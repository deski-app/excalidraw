{
  "version": 3,
  "sources": ["<define:import.meta.env>", "../../jotai.ts", "../../i18n.ts", "../../components/Spinner.scss", "../../components/Spinner.tsx", "../../css/variables.module.scss", "../../colors.ts", "../../constants.ts", "../../components/LoadingMessage.tsx", "../../components/InitializeApp.tsx", "../../utils.ts", "../../element/typeChecks.ts", "../../random.ts", "../../scene/Scene.ts", "../../points.ts", "../../math.ts", "../../scene/comparisons.ts", "../../scene/Shape.ts", "../../ga.ts", "../../galines.ts", "../../gapoints.ts", "../../gadirections.ts", "../../gatransforms.ts", "../../element/transformHandles.ts", "../../element/collision.ts", "../../keys.ts", "../../element/binding.ts", "../../element/linearElementEditor.ts", "../../element/containerCache.ts", "../../element/textElement.ts", "../../element/bounds.ts", "../../appState.ts", "../../actions/register.ts", "../../cursor.ts", "../../groups.ts", "../../element/newElement.ts", "../../element/embeddable.ts", "../../renderer/roundRect.ts", "../../scene/scrollbars.ts", "../../clients.ts", "../../types.ts", "../../components/ToolIcon.scss", "../../errors.ts", "../../components/ToolButton.tsx", "../../components/icons.tsx", "../../components/Tooltip.scss", "../../components/Tooltip.tsx", "../../data/url.ts", "../../element/Hyperlink.scss", "../../analytics.ts", "../../element/Hyperlink.tsx", "../../renderer/renderSnaps.ts", "../../renderer/renderScene.ts", "../../data/filesystem.ts", "../../data/restore.ts", "../../data/encryption.ts", "../../data/encode.ts", "../../data/image.ts", "../../data/blob.ts", "../../data/json.ts", "../../element/image.ts", "../../scene/export.ts", "../../charts.ts", "../../clipboard.ts", "../../../utils/bbox.ts", "../../../utils/withinBounds.ts", "../../hooks/useLibraryItemSvg.ts", "../../data/library.ts", "../../../utils/export.ts", "../../frame.ts", "../../renderer/renderElement.ts", "../../scene/ShapeCache.ts", "../../element/mutateElement.ts", "../../element/sizeHelpers.ts", "../../element/resizeTest.ts", "../../element/resizeElements.ts", "../../element/dragElements.ts", "../../element/showSelectedShapeActions.ts", "../../element/index.ts", "../../scene/selection.ts", "../../scene/scroll.ts", "../../scene/zoom.ts", "../../scene/index.ts", "../../actions/actionDeleteSelected.tsx", "../../zindex.ts", "../../actions/actionZindex.tsx", "../../actions/actionSelectAll.ts", "../../element/sortElements.ts", "../../actions/actionDuplicateSelection.tsx", "../../components/ButtonIconSelect.tsx", "../../components/ColorPicker/TopPicks.tsx", "../../components/ColorPicker/colorPickerUtils.ts", "../../components/ColorPicker/HotkeyLabel.tsx", "../../components/ColorPicker/ShadeList.tsx", "../../components/ColorPicker/PickerColorList.tsx", "../../components/ColorPicker/CustomColorList.tsx", "../../components/ColorPicker/keyboardNavHandlers.ts", "../../components/ColorPicker/PickerHeading.tsx", "../../components/ColorPicker/Picker.tsx", "../../context/ui-appState.ts", "../../hooks/useCreatePortalContainer.ts", "../../hooks/useOutsideClick.ts", "../../hooks/useStable.ts", "../../components/EyeDropper.scss", "../../components/EyeDropper.tsx", "../../components/ColorPicker/ColorInput.tsx", "../../components/ColorPicker/ColorPicker.scss", "../../components/ColorPicker/ColorPicker.tsx", "../../components/Popover.scss", "../../components/Popover.tsx", "../../components/IconPicker.scss", "../../components/IconPicker.tsx", "../../actions/actionProperties.tsx", "../../actions/actionCanvas.tsx", "../../actions/actionFinalize.tsx", "../../components/TextInput.scss", "../../components/ProjectName.scss", "../../components/ProjectName.tsx", "../../components/DarkModeToggle.tsx", "../../data/index.ts", "../../data/resave.ts", "../../components/CheckboxItem.scss", "../../components/CheckboxItem.tsx", "../../actions/actionExport.tsx", "../../actions/actionStyles.ts", "../../actions/actionMenu.tsx", "../../actions/actionGroup.tsx", "../../components/Avatar.scss", "../../components/Avatar.tsx", "../../actions/actionNavigate.tsx", "../../actions/actionAddToLibrary.ts", "../../align.ts", "../../actions/actionAlign.tsx", "../../distribute.ts", "../../actions/actionDistribute.tsx", "../../actions/actionFlip.ts", "../../actions/actionClipboard.tsx", "../../actions/actionToggleGridMode.tsx", "../../actions/actionToggleZenMode.tsx", "../../actions/actionToggleObjectsSnapMode.tsx", "../../actions/actionToggleStats.tsx", "../../actions/actionBoundText.tsx", "../../actions/actionElementLock.ts", "../../actions/actionLinearEditor.ts", "../../actions/index.ts", "../../actions/actionHistory.tsx", "../../actions/manager.tsx", "../../gesture.ts", "../../history.ts", "../../shapes.tsx", "../../components/ContextMenu.scss", "../../actions/shortcuts.ts", "../../components/ContextMenu.tsx", "../../components/Stack.scss", "../../components/Stack.tsx", "../../components/Actions.scss", "../../components/dropdownMenu/DropdownMenuTrigger.tsx", "../../components/dropdownMenu/common.ts", "../../components/dropdownMenu/DropdownMenuItemContent.tsx", "../../components/dropdownMenu/DropdownMenuItem.tsx", "../../components/dropdownMenu/DropdownMenuSeparator.tsx", "../../components/dropdownMenu/DropdownMenuGroup.tsx", "../../components/Island.scss", "../../components/Island.tsx", "../../components/dropdownMenu/DropdownMenuContent.tsx", "../../components/dropdownMenu/DropdownMenuItemLink.tsx", "../../components/dropdownMenu/DropdownMenuItemCustom.tsx", "../../components/dropdownMenu/dropdownMenuUtils.ts", "../../components/dropdownMenu/DropdownMenu.scss", "../../components/dropdownMenu/DropdownMenu.tsx", "../../context/tunnels.ts", "../../components/Actions.tsx", "../../hooks/useCallbackRefState.ts", "../../components/Dialog.scss", "../../components/Modal.scss", "../../components/Modal.tsx", "../../components/LibraryMenuBrowseButton.tsx", "../../components/LibraryMenuControlButtons.tsx", "../../components/Trans.tsx", "../../components/ConfirmDialog.scss", "../../components/DialogActionButton.scss", "../../components/DialogActionButton.tsx", "../../components/ConfirmDialog.tsx", "../../data/EditorLocalStorage.ts", "../../components/PublishLibrary.scss", "../../components/PublishLibrary.tsx", "../../components/LibraryMenuHeaderContent.tsx", "../../components/LibraryUnit.scss", "../../components/LibraryUnit.tsx", "../../hooks/useTransition.ts", "../../components/LibraryMenuSection.tsx", "../../hooks/useScrollPosition.ts", "../../components/LibraryMenuItems.scss", "../../components/LibraryMenuItems.tsx", "../../components/LibraryMenu.scss", "../../components/LibraryMenu.tsx", "../../components/Dialog.tsx", "../../components/ErrorDialog.tsx", "../../components/RadioGroup.scss", "../../components/RadioGroup.tsx", "../../components/Switch.scss", "../../components/Switch.tsx", "../../components/ImageExportDialog.scss", "../../components/FilledButton.scss", "../../components/FilledButton.tsx", "../../components/ImageExportDialog.tsx", "../../components/FixedSideContainer.scss", "../../components/FixedSideContainer.tsx", "../../components/HintViewer.scss", "../../components/HintViewer.tsx", "../../components/LockButton.tsx", "../../components/Section.tsx", "../../components/PenModeButton.tsx", "../../components/Stats.scss", "../../components/Stats.tsx", "../../components/HandButton.tsx", "../../components/MobileMenu.tsx", "../../components/PasteChartDialog.scss", "../../components/PasteChartDialog.tsx", "../../components/HelpDialog.scss", "../../components/HelpDialog.tsx", "../../components/UserList.scss", "../../components/UserList.tsx", "../../components/Card.scss", "../../components/Card.tsx", "../../components/ExportDialog.scss", "../../components/JSONExportDialog.tsx", "../../components/HelpButton.tsx", "../../components/footer/Footer.tsx", "../../components/Sidebar/common.ts", "../../components/Button.scss", "../../components/Button.tsx", "../../components/Sidebar/SidebarHeader.tsx", "../../components/Sidebar/SidebarTrigger.scss", "../../components/Sidebar/SidebarTrigger.tsx", "../../components/Sidebar/SidebarTabTriggers.tsx", "../../components/Sidebar/SidebarTabTrigger.tsx", "../../components/Sidebar/SidebarTabs.tsx", "../../components/Sidebar/SidebarTab.tsx", "../../components/Sidebar/Sidebar.scss", "../../components/Sidebar/Sidebar.tsx", "../../components/main-menu/DefaultItems.scss", "../../components/ActiveConfirmDialog.tsx", "../../components/OverwriteConfirm/OverwriteConfirmState.ts", "../../components/main-menu/DefaultItems.tsx", "../../components/hoc/withInternalFallback.tsx", "../../components/main-menu/MainMenu.tsx", "../../components/OverwriteConfirm/OverwriteConfirmActions.tsx", "../../components/OverwriteConfirm/OverwriteConfirm.scss", "../../components/OverwriteConfirm/OverwriteConfirm.tsx", "../../components/DefaultSidebar.tsx", "../../components/LayerUI.scss", "../../components/Toolbar.scss", "../../components/LaserPointerButton.tsx", "../../components/TextField.scss", "../../components/TextField.tsx", "../../components/InlineIcon.tsx", "../../components/Paragraph.tsx", "../../components/MagicSettings.scss", "../../components/TTDDialog/TTDDialogTabs.tsx", "../../components/TTDDialog/TTDDialogTab.tsx", "../../components/MagicSettings.tsx", "../../components/TTDDialog/MermaidToExcalidraw.scss", "../../components/TTDDialog/common.ts", "../../components/TTDDialog/TTDDialogPanels.tsx", "../../components/TTDDialog/TTDDialogPanel.tsx", "../../components/TTDDialog/TTDDialogInput.tsx", "../../components/TTDDialog/TTDDialogOutput.tsx", "../../components/TTDDialog/TTDDialogSubmitShortcut.tsx", "../../components/TTDDialog/MermaidToExcalidraw.tsx", "../../components/TTDDialog/TTDDialogTabTriggers.tsx", "../../components/TTDDialog/TTDDialogTabTrigger.tsx", "../../components/TTDDialog/TTDDialog.scss", "../../components/TTDDialog/TTDDialog.tsx", "../../components/LayerUI.tsx", "../../components/Toast.scss", "../../components/Toast.tsx", "../../actions/actionToggleViewMode.tsx", "../../scene/Fonts.ts", "../../actions/actionFrame.ts", "../../snapping.ts", "../../components/BraveMeasureTextError.tsx", "../../data/transform.ts", "../../reactUtils.ts", "../../components/canvases/InteractiveCanvas.tsx", "../../components/canvases/StaticCanvas.tsx", "../../components/canvases/index.tsx", "../../scene/Renderer.ts", "../../components/SVGLayer.scss", "../../components/SVGLayer.tsx", "../../emitter.ts", "../../element/ElementCanvasButtons.scss", "../../element/ElementCanvasButtons.tsx", "../../data/magic.ts", "../../components/MagicButton.tsx", "../../components/FollowMode/FollowMode.scss", "../../components/FollowMode/FollowMode.tsx", "../../animation-frame-handler.ts", "../../animated-trail.ts", "../../laser-trails.ts", "../../element/textWysiwyg.tsx", "../../components/App.tsx", "../../css/app.scss", "../../css/styles.scss", "../../../../public/fonts/fonts.css", "../../polyfill.ts", "../../components/footer/FooterCenter.scss", "../../components/footer/FooterCenter.tsx", "../../components/ExcalidrawLogo.scss", "../../components/ExcalidrawLogo.tsx", "../../components/welcome-screen/WelcomeScreen.Center.tsx", "../../components/welcome-screen/WelcomeScreen.Hints.tsx", "../../components/welcome-screen/WelcomeScreen.scss", "../../components/welcome-screen/WelcomeScreen.tsx", "../../components/live-collaboration/LiveCollaborationTrigger.scss", "../../components/live-collaboration/LiveCollaborationTrigger.tsx", "../../components/TTDDialog/TTDDialogTrigger.tsx", "../../index.tsx"],
  "sourcesContent": ["", "import { PrimitiveAtom, unstable_createStore, useAtom } from \"jotai\";\nimport { useLayoutEffect } from \"react\";\n\nexport const jotaiScope = Symbol();\nexport const jotaiStore = unstable_createStore();\n\nexport const useAtomWithInitialValue = <\n  T extends unknown,\n  A extends PrimitiveAtom<T>,\n>(\n  atom: A,\n  initialValue: T | (() => T),\n) => {\n  const [value, setValue] = useAtom(atom);\n\n  useLayoutEffect(() => {\n    if (typeof initialValue === \"function\") {\n      // @ts-ignore\n      setValue(initialValue());\n    } else {\n      setValue(initialValue);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return [value, setValue] as const;\n};\n", "import fallbackLangData from \"./locales/en.json\";\nimport percentages from \"./locales/percentages.json\";\nimport { jotaiScope, jotaiStore } from \"./jotai\";\nimport { atom, useAtomValue } from \"jotai\";\nimport { NestedKeyOf } from \"./utility-types\";\n\nconst COMPLETION_THRESHOLD = 85;\n\nexport interface Language {\n  code: string;\n  label: string;\n  rtl?: boolean;\n}\n\nexport type TranslationKeys = NestedKeyOf<typeof fallbackLangData>;\n\nexport const defaultLang = { code: \"en\", label: \"English\" };\n\nexport const languages: Language[] = [\n  defaultLang,\n  ...[\n    { code: \"ar-SA\", label: \"\u0627\u0644\u0639\u0631\u0628\u064A\u0629\", rtl: true },\n    { code: \"bg-BG\", label: \"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438\" },\n    { code: \"ca-ES\", label: \"Catal\u00E0\" },\n    { code: \"cs-CZ\", label: \"\u010Cesky\" },\n    { code: \"de-DE\", label: \"Deutsch\" },\n    { code: \"el-GR\", label: \"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC\" },\n    { code: \"es-ES\", label: \"Espa\u00F1ol\" },\n    { code: \"eu-ES\", label: \"Euskara\" },\n    { code: \"fa-IR\", label: \"\u0641\u0627\u0631\u0633\u06CC\", rtl: true },\n    { code: \"fi-FI\", label: \"Suomi\" },\n    { code: \"fr-FR\", label: \"Fran\u00E7ais\" },\n    { code: \"gl-ES\", label: \"Galego\" },\n    { code: \"he-IL\", label: \"\u05E2\u05D1\u05E8\u05D9\u05EA\", rtl: true },\n    { code: \"hi-IN\", label: \"\u0939\u093F\u0928\u094D\u0926\u0940\" },\n    { code: \"hu-HU\", label: \"Magyar\" },\n    { code: \"id-ID\", label: \"Bahasa Indonesia\" },\n    { code: \"it-IT\", label: \"Italiano\" },\n    { code: \"ja-JP\", label: \"\u65E5\u672C\u8A9E\" },\n    { code: \"kab-KAB\", label: \"Taqbaylit\" },\n    { code: \"kk-KZ\", label: \"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456\" },\n    { code: \"ko-KR\", label: \"\uD55C\uAD6D\uC5B4\" },\n    { code: \"ku-TR\", label: \"Kurd\u00EE\" },\n    { code: \"lt-LT\", label: \"Lietuvi\u0173\" },\n    { code: \"lv-LV\", label: \"Latvie\u0161u\" },\n    { code: \"my-MM\", label: \"Burmese\" },\n    { code: \"nb-NO\", label: \"Norsk bokm\u00E5l\" },\n    { code: \"nl-NL\", label: \"Nederlands\" },\n    { code: \"nn-NO\", label: \"Norsk nynorsk\" },\n    { code: \"oc-FR\", label: \"Occitan\" },\n    { code: \"pa-IN\", label: \"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40\" },\n    { code: \"pl-PL\", label: \"Polski\" },\n    { code: \"pt-BR\", label: \"Portugu\u00EAs Brasileiro\" },\n    { code: \"pt-PT\", label: \"Portugu\u00EAs\" },\n    { code: \"ro-RO\", label: \"Rom\u00E2n\u0103\" },\n    { code: \"ru-RU\", label: \"\u0420\u0443\u0441\u0441\u043A\u0438\u0439\" },\n    { code: \"sk-SK\", label: \"Sloven\u010Dina\" },\n    { code: \"sv-SE\", label: \"Svenska\" },\n    { code: \"sl-SI\", label: \"Sloven\u0161\u010Dina\" },\n    { code: \"tr-TR\", label: \"T\u00FCrk\u00E7e\" },\n    { code: \"uk-UA\", label: \"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430\" },\n    { code: \"zh-CN\", label: \"\u7B80\u4F53\u4E2D\u6587\" },\n    { code: \"zh-TW\", label: \"\u7E41\u9AD4\u4E2D\u6587\" },\n    { code: \"vi-VN\", label: \"Ti\u1EBFng Vi\u1EC7t\" },\n    { code: \"mr-IN\", label: \"\u092E\u0930\u093E\u0920\u0940\" },\n  ]\n    .filter(\n      (lang) =>\n        (percentages as Record<string, number>)[lang.code] >=\n        COMPLETION_THRESHOLD,\n    )\n    .sort((left, right) => (left.label > right.label ? 1 : -1)),\n];\n\nconst TEST_LANG_CODE = \"__test__\";\nif (import.meta.env.DEV) {\n  languages.unshift(\n    { code: TEST_LANG_CODE, label: \"test language\" },\n    {\n      code: `${TEST_LANG_CODE}.rtl`,\n      label: \"\\u{202a}test language (rtl)\\u{202c}\",\n      rtl: true,\n    },\n  );\n}\n\nlet currentLang: Language = defaultLang;\nlet currentLangData = {};\n\nexport const setLanguage = async (lang: Language) => {\n  currentLang = lang;\n  document.documentElement.dir = currentLang.rtl ? \"rtl\" : \"ltr\";\n  document.documentElement.lang = currentLang.code;\n\n  if (lang.code.startsWith(TEST_LANG_CODE)) {\n    currentLangData = {};\n  } else {\n    try {\n      currentLangData = await import(`./locales/${currentLang.code}.json`);\n    } catch (error: any) {\n      console.error(`Failed to load language ${lang.code}:`, error.message);\n      currentLangData = fallbackLangData;\n    }\n  }\n\n  jotaiStore.set(editorLangCodeAtom, lang.code);\n};\n\nexport const getLanguage = () => currentLang;\n\nconst findPartsForData = (data: any, parts: string[]) => {\n  for (let index = 0; index < parts.length; ++index) {\n    const part = parts[index];\n    if (data[part] === undefined) {\n      return undefined;\n    }\n    data = data[part];\n  }\n  if (typeof data !== \"string\") {\n    return undefined;\n  }\n  return data;\n};\n\nexport const t = (\n  path: NestedKeyOf<typeof fallbackLangData>,\n  replacement?: { [key: string]: string | number } | null,\n  fallback?: string,\n) => {\n  if (currentLang.code.startsWith(TEST_LANG_CODE)) {\n    const name = replacement\n      ? `${path}(${JSON.stringify(replacement).slice(1, -1)})`\n      : path;\n    return `\\u{202a}[[${name}]]\\u{202c}`;\n  }\n\n  const parts = path.split(\".\");\n  let translation =\n    findPartsForData(currentLangData, parts) ||\n    findPartsForData(fallbackLangData, parts) ||\n    fallback;\n  if (translation === undefined) {\n    const errorMessage = `Can't find translation for ${path}`;\n    // in production, don't blow up the app on a missing translation key\n    if (import.meta.env.PROD) {\n      console.warn(errorMessage);\n      return \"\";\n    }\n    throw new Error(errorMessage);\n  }\n\n  if (replacement) {\n    for (const key in replacement) {\n      translation = translation.replace(`{{${key}}}`, String(replacement[key]));\n    }\n  }\n  return translation;\n};\n\n/** @private atom used solely to rerender components using `useI18n` hook */\nconst editorLangCodeAtom = atom(defaultLang.code);\n\n// Should be used in components that fall under these cases:\n// - component is rendered as an <Excalidraw> child\n// - component is rendered internally by <Excalidraw>, but the component\n//   is memoized w/o being updated on `langCode`, `AppState`, or `UIAppState`\nexport const useI18n = () => {\n  const langCode = useAtomValue(editorLangCodeAtom, jotaiScope);\n  return { t, langCode };\n};\n", ".excalidraw .Spinner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  --spinner-color: var(--icon-fill-color);\n}\n.excalidraw .Spinner svg {\n  animation: rotate 1.6s linear infinite;\n  animation-delay: var(--spinner-delay);\n  transform-origin: center center;\n}\n.excalidraw .Spinner circle {\n  stroke: var(--spinner-color);\n  animation: dash 1.6s linear 0s infinite;\n  stroke-linecap: round;\n}\n@keyframes rotate {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes dash {\n  0% {\n    stroke-dasharray: 1, 300;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 150, 300;\n    stroke-dashoffset: -200;\n  }\n  100% {\n    stroke-dasharray: 1, 300;\n    stroke-dashoffset: -280;\n  }\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIlNwaW5uZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLRTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUlKO0VBQ0U7SUFDRTs7O0FBSUo7RUFDRTtJQUNFO0lBQ0E7O0VBRUY7SUFDRTtJQUNBOztFQUVGO0lBQ0U7SUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG4kZHVyYXRpb246IDEuNnM7XG5cbi5leGNhbGlkcmF3IHtcbiAgLlNwaW5uZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuXG4gICAgLS1zcGlubmVyLWNvbG9yOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuXG4gICAgc3ZnIHtcbiAgICAgIGFuaW1hdGlvbjogcm90YXRlICRkdXJhdGlvbiBsaW5lYXIgaW5maW5pdGU7XG4gICAgICBhbmltYXRpb24tZGVsYXk6IHZhcigtLXNwaW5uZXItZGVsYXkpO1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjtcbiAgICB9XG5cbiAgICBjaXJjbGUge1xuICAgICAgc3Ryb2tlOiB2YXIoLS1zcGlubmVyLWNvbG9yKTtcbiAgICAgIGFuaW1hdGlvbjogZGFzaCAkZHVyYXRpb24gbGluZWFyIDBzIGluZmluaXRlO1xuICAgICAgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kO1xuICAgIH1cbiAgfVxuXG4gIEBrZXlmcmFtZXMgcm90YXRlIHtcbiAgICAxMDAlIHtcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XG4gICAgfVxuICB9XG5cbiAgQGtleWZyYW1lcyBkYXNoIHtcbiAgICAwJSB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiAxLCAzMDA7XG4gICAgICBzdHJva2UtZGFzaG9mZnNldDogMDtcbiAgICB9XG4gICAgNTAlIHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDE1MCwgMzAwO1xuICAgICAgc3Ryb2tlLWRhc2hvZmZzZXQ6IC0yMDA7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgc3Ryb2tlLWRhc2hhcnJheTogMSwgMzAwO1xuICAgICAgc3Ryb2tlLWRhc2hvZmZzZXQ6IC0yODA7XG4gICAgfVxuICB9XG59XG4iXX0= */", "import React from \"react\";\n\nimport \"./Spinner.scss\";\n\nconst Spinner = ({\n  size = \"1em\",\n  circleWidth = 8,\n  synchronized = false,\n}: {\n  size?: string | number;\n  circleWidth?: number;\n  synchronized?: boolean;\n}) => {\n  const mountTime = React.useRef(Date.now());\n  const mountDelay = -(mountTime.current % 1600);\n\n  return (\n    <div className=\"Spinner\">\n      <svg\n        viewBox=\"0 0 100 100\"\n        style={{\n          width: size,\n          height: size,\n          // fix for remounting causing spinner flicker\n          [\"--spinner-delay\" as any]: synchronized ? `${mountDelay}ms` : 0,\n        }}\n      >\n        <circle\n          cx=\"50\"\n          cy=\"50\"\n          r={50 - circleWidth / 2}\n          strokeWidth={circleWidth}\n          fill=\"none\"\n          strokeMiterlimit=\"10\"\n        />\n      </svg>\n    </div>\n  );\n};\n\nexport default Spinner;\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NzcyIsInNvdXJjZXMiOlsidmFyaWFibGVzLm1vZHVsZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIl19 */", "import oc from \"open-color\";\nimport { Merge } from \"./utility-types\";\n\n// FIXME can't put to utils.ts rn because of circular dependency\nconst pick = <R extends Record<string, any>, K extends readonly (keyof R)[]>(\n  source: R,\n  keys: K,\n) => {\n  return keys.reduce((acc, key: K[number]) => {\n    if (key in source) {\n      acc[key] = source[key];\n    }\n    return acc;\n  }, {} as Pick<R, K[number]>) as Pick<R, K[number]>;\n};\n\nexport type ColorPickerColor =\n  | Exclude<keyof oc, \"indigo\" | \"lime\">\n  | \"transparent\"\n  | \"bronze\";\nexport type ColorTuple = readonly [string, string, string, string, string];\nexport type ColorPalette = Merge<\n  Record<ColorPickerColor, ColorTuple>,\n  { black: \"#1e1e1e\"; white: \"#ffffff\"; transparent: \"transparent\" }\n>;\n\n// used general type instead of specific type (ColorPalette) to support custom colors\nexport type ColorPaletteCustom = { [key: string]: ColorTuple | string };\nexport type ColorShadesIndexes = [number, number, number, number, number];\n\nexport const MAX_CUSTOM_COLORS_USED_IN_CANVAS = 5;\nexport const COLORS_PER_ROW = 5;\n\nexport const DEFAULT_CHART_COLOR_INDEX = 4;\n\nexport const DEFAULT_ELEMENT_STROKE_COLOR_INDEX = 4;\nexport const DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX = 1;\nexport const ELEMENTS_PALETTE_SHADE_INDEXES = [0, 2, 4, 6, 8] as const;\nexport const CANVAS_PALETTE_SHADE_INDEXES = [0, 1, 2, 3, 4] as const;\n\nexport const getSpecificColorShades = (\n  color: Exclude<\n    ColorPickerColor,\n    \"transparent\" | \"white\" | \"black\" | \"bronze\"\n  >,\n  indexArr: Readonly<ColorShadesIndexes>,\n) => {\n  return indexArr.map((index) => oc[color][index]) as any as ColorTuple;\n};\n\nexport const COLOR_PALETTE = {\n  transparent: \"transparent\",\n  black: \"#1e1e1e\",\n  white: \"#ffffff\",\n  // open-colors\n  gray: getSpecificColorShades(\"gray\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  red: getSpecificColorShades(\"red\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  pink: getSpecificColorShades(\"pink\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  grape: getSpecificColorShades(\"grape\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  violet: getSpecificColorShades(\"violet\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  blue: getSpecificColorShades(\"blue\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  cyan: getSpecificColorShades(\"cyan\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  teal: getSpecificColorShades(\"teal\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  green: getSpecificColorShades(\"green\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  yellow: getSpecificColorShades(\"yellow\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  orange: getSpecificColorShades(\"orange\", ELEMENTS_PALETTE_SHADE_INDEXES),\n  // radix bronze shades 3,5,7,9,11\n  bronze: [\"#f8f1ee\", \"#eaddd7\", \"#d2bab0\", \"#a18072\", \"#846358\"],\n} as ColorPalette;\n\nconst COMMON_ELEMENT_SHADES = pick(COLOR_PALETTE, [\n  \"cyan\",\n  \"blue\",\n  \"violet\",\n  \"grape\",\n  \"pink\",\n  \"green\",\n  \"teal\",\n  \"yellow\",\n  \"orange\",\n  \"red\",\n]);\n\n// -----------------------------------------------------------------------------\n// quick picks defaults\n// -----------------------------------------------------------------------------\n\n// ORDER matters for positioning in quick picker\nexport const DEFAULT_ELEMENT_STROKE_PICKS = [\n  COLOR_PALETTE.black,\n  COLOR_PALETTE.red[DEFAULT_ELEMENT_STROKE_COLOR_INDEX],\n  COLOR_PALETTE.green[DEFAULT_ELEMENT_STROKE_COLOR_INDEX],\n  COLOR_PALETTE.blue[DEFAULT_ELEMENT_STROKE_COLOR_INDEX],\n  COLOR_PALETTE.yellow[DEFAULT_ELEMENT_STROKE_COLOR_INDEX],\n] as ColorTuple;\n\n// ORDER matters for positioning in quick picker\nexport const DEFAULT_ELEMENT_BACKGROUND_PICKS = [\n  COLOR_PALETTE.transparent,\n  COLOR_PALETTE.red[DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX],\n  COLOR_PALETTE.green[DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX],\n  COLOR_PALETTE.blue[DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX],\n  COLOR_PALETTE.yellow[DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX],\n] as ColorTuple;\n\n// ORDER matters for positioning in quick picker\nexport const DEFAULT_CANVAS_BACKGROUND_PICKS = [\n  COLOR_PALETTE.white,\n  // radix slate2\n  \"#f8f9fa\",\n  // radix blue2\n  \"#f5faff\",\n  // radix yellow2\n  \"#fffce8\",\n  // radix bronze2\n  \"#fdf8f6\",\n] as ColorTuple;\n\n// -----------------------------------------------------------------------------\n// palette defaults\n// -----------------------------------------------------------------------------\n\nexport const DEFAULT_ELEMENT_STROKE_COLOR_PALETTE = {\n  // 1st row\n  transparent: COLOR_PALETTE.transparent,\n  white: COLOR_PALETTE.white,\n  gray: COLOR_PALETTE.gray,\n  black: COLOR_PALETTE.black,\n  bronze: COLOR_PALETTE.bronze,\n  // rest\n  ...COMMON_ELEMENT_SHADES,\n} as const;\n\n// ORDER matters for positioning in pallete (5x3 grid)s\nexport const DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE = {\n  transparent: COLOR_PALETTE.transparent,\n  white: COLOR_PALETTE.white,\n  gray: COLOR_PALETTE.gray,\n  black: COLOR_PALETTE.black,\n  bronze: COLOR_PALETTE.bronze,\n\n  ...COMMON_ELEMENT_SHADES,\n} as const;\n\n// -----------------------------------------------------------------------------\n// helpers\n// -----------------------------------------------------------------------------\n\n// !!!MUST BE WITHOUT GRAY, TRANSPARENT AND BLACK!!!\nexport const getAllColorsSpecificShade = (index: 0 | 1 | 2 | 3 | 4) =>\n  [\n    // 2nd row\n    COLOR_PALETTE.cyan[index],\n    COLOR_PALETTE.blue[index],\n    COLOR_PALETTE.violet[index],\n    COLOR_PALETTE.grape[index],\n    COLOR_PALETTE.pink[index],\n\n    // 3rd row\n    COLOR_PALETTE.green[index],\n    COLOR_PALETTE.teal[index],\n    COLOR_PALETTE.yellow[index],\n    COLOR_PALETTE.orange[index],\n    COLOR_PALETTE.red[index],\n  ] as const;\n\nexport const rgbToHex = (r: number, g: number, b: number) =>\n  `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`;\n\n// -----------------------------------------------------------------------------\n", "import cssVariables from \"./css/variables.module.scss\";\nimport { AppProps } from \"./types\";\nimport { ExcalidrawElement, FontFamilyValues } from \"./element/types\";\nimport { COLOR_PALETTE } from \"./colors\";\nexport const isDarwin = /Mac|iPod|iPhone|iPad/.test(navigator.platform);\nexport const isWindows = /^Win/.test(navigator.platform);\nexport const isAndroid = /\\b(android)\\b/i.test(navigator.userAgent);\nexport const isFirefox =\n  \"netscape\" in window &&\n  navigator.userAgent.indexOf(\"rv:\") > 1 &&\n  navigator.userAgent.indexOf(\"Gecko\") > 1;\nexport const isChrome = navigator.userAgent.indexOf(\"Chrome\") !== -1;\nexport const isSafari =\n  !isChrome && navigator.userAgent.indexOf(\"Safari\") !== -1;\nexport const isIOS =\n  /iPad|iPhone/.test(navigator.platform) ||\n  // iPadOS 13+\n  (navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document);\n// keeping function so it can be mocked in test\nexport const isBrave = () =>\n  (navigator as any).brave?.isBrave?.name === \"isBrave\";\n\nexport const APP_NAME = \"Excalidraw\";\n\nexport const DRAGGING_THRESHOLD = 10; // px\nexport const LINE_CONFIRM_THRESHOLD = 8; // px\nexport const ELEMENT_SHIFT_TRANSLATE_AMOUNT = 5;\nexport const ELEMENT_TRANSLATE_AMOUNT = 1;\nexport const TEXT_TO_CENTER_SNAP_THRESHOLD = 30;\nexport const SHIFT_LOCKING_ANGLE = Math.PI / 12;\nexport const CURSOR_TYPE = {\n  TEXT: \"text\",\n  CROSSHAIR: \"crosshair\",\n  GRABBING: \"grabbing\",\n  GRAB: \"grab\",\n  POINTER: \"pointer\",\n  MOVE: \"move\",\n  AUTO: \"\",\n};\nexport const POINTER_BUTTON = {\n  MAIN: 0,\n  WHEEL: 1,\n  SECONDARY: 2,\n  TOUCH: -1,\n  ERASER: 5,\n} as const;\n\nexport const POINTER_EVENTS = {\n  enabled: \"all\",\n  disabled: \"none\",\n  // asserted as any so it can be freely assigned to React Element\n  // \"pointerEnvets\" CSS prop\n  inheritFromUI: \"var(--ui-pointerEvents)\" as any,\n} as const;\n\nexport enum EVENT {\n  COPY = \"copy\",\n  PASTE = \"paste\",\n  CUT = \"cut\",\n  KEYDOWN = \"keydown\",\n  KEYUP = \"keyup\",\n  MOUSE_MOVE = \"mousemove\",\n  RESIZE = \"resize\",\n  UNLOAD = \"unload\",\n  FOCUS = \"focus\",\n  BLUR = \"blur\",\n  DRAG_OVER = \"dragover\",\n  DROP = \"drop\",\n  GESTURE_END = \"gestureend\",\n  BEFORE_UNLOAD = \"beforeunload\",\n  GESTURE_START = \"gesturestart\",\n  GESTURE_CHANGE = \"gesturechange\",\n  POINTER_MOVE = \"pointermove\",\n  POINTER_DOWN = \"pointerdown\",\n  POINTER_UP = \"pointerup\",\n  STATE_CHANGE = \"statechange\",\n  WHEEL = \"wheel\",\n  TOUCH_START = \"touchstart\",\n  TOUCH_END = \"touchend\",\n  HASHCHANGE = \"hashchange\",\n  VISIBILITY_CHANGE = \"visibilitychange\",\n  SCROLL = \"scroll\",\n  // custom events\n  EXCALIDRAW_LINK = \"excalidraw-link\",\n  MENU_ITEM_SELECT = \"menu.itemSelect\",\n  MESSAGE = \"message\",\n  FULLSCREENCHANGE = \"fullscreenchange\",\n}\n\nexport const YOUTUBE_STATES = {\n  UNSTARTED: -1,\n  ENDED: 0,\n  PLAYING: 1,\n  PAUSED: 2,\n  BUFFERING: 3,\n  CUED: 5,\n} as const;\n\nexport const ENV = {\n  TEST: \"test\",\n  DEVELOPMENT: \"development\",\n};\n\nexport const CLASSES = {\n  SHAPE_ACTIONS_MENU: \"App-menu__left\",\n};\n\n// 1-based in case we ever do `if(element.fontFamily)`\nexport const FONT_FAMILY = {\n  Virgil: 1,\n  Helvetica: 2,\n  Cascadia: 3,\n  Assistant: 4,\n};\n\nexport const THEME = {\n  LIGHT: \"light\",\n  DARK: \"dark\",\n} as const;\n\nexport const FRAME_STYLE = {\n  strokeColor: \"#bbb\" as ExcalidrawElement[\"strokeColor\"],\n  strokeWidth: 2 as ExcalidrawElement[\"strokeWidth\"],\n  strokeStyle: \"solid\" as ExcalidrawElement[\"strokeStyle\"],\n  fillStyle: \"solid\" as ExcalidrawElement[\"fillStyle\"],\n  roughness: 0 as ExcalidrawElement[\"roughness\"],\n  roundness: null as ExcalidrawElement[\"roundness\"],\n  backgroundColor: \"transparent\" as ExcalidrawElement[\"backgroundColor\"],\n  radius: 8,\n  nameOffsetY: 3,\n  nameColorLightTheme: \"#999999\",\n  nameColorDarkTheme: \"#7a7a7a\",\n  nameFontSize: 14,\n  nameLineHeight: 1.25,\n};\n\nexport const WINDOWS_EMOJI_FALLBACK_FONT = \"Segoe UI Emoji\";\n\nexport const MIN_FONT_SIZE = 1;\nexport const DEFAULT_FONT_SIZE = 20;\nexport const DEFAULT_FONT_FAMILY: FontFamilyValues = FONT_FAMILY.Virgil;\nexport const DEFAULT_TEXT_ALIGN = \"left\";\nexport const DEFAULT_VERTICAL_ALIGN = \"top\";\nexport const DEFAULT_VERSION = \"{version}\";\nexport const DEFAULT_TRANSFORM_HANDLE_SPACING = 2;\n\nexport const CANVAS_ONLY_ACTIONS = [\"selectAll\"];\n\nexport const GRID_SIZE = 20; // TODO make it configurable?\n\nexport const IMAGE_MIME_TYPES = {\n  svg: \"image/svg+xml\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  gif: \"image/gif\",\n  webp: \"image/webp\",\n  bmp: \"image/bmp\",\n  ico: \"image/x-icon\",\n  avif: \"image/avif\",\n  jfif: \"image/jfif\",\n} as const;\n\nexport const ALLOWED_PASTE_MIME_TYPES = [\"text/plain\", \"text/html\"] as const;\n\nexport const MIME_TYPES = {\n  json: \"application/json\",\n  // excalidraw data\n  excalidraw: \"application/vnd.excalidraw+json\",\n  excalidrawlib: \"application/vnd.excalidrawlib+json\",\n  // image-encoded excalidraw data\n  \"excalidraw.svg\": \"image/svg+xml\",\n  \"excalidraw.png\": \"image/png\",\n  // binary\n  binary: \"application/octet-stream\",\n  // image\n  ...IMAGE_MIME_TYPES,\n} as const;\n\nexport const EXPORT_IMAGE_TYPES = {\n  png: \"png\",\n  svg: \"svg\",\n  clipboard: \"clipboard\",\n} as const;\n\nexport const EXPORT_DATA_TYPES = {\n  excalidraw: \"excalidraw\",\n  excalidrawClipboard: \"excalidraw/clipboard\",\n  excalidrawLibrary: \"excalidrawlib\",\n  excalidrawClipboardWithAPI: \"excalidraw-api/clipboard\",\n} as const;\n\nexport const EXPORT_SOURCE =\n  window.EXCALIDRAW_EXPORT_SOURCE || window.location.origin;\n\n// time in milliseconds\nexport const IMAGE_RENDER_TIMEOUT = 500;\nexport const TAP_TWICE_TIMEOUT = 300;\nexport const TOUCH_CTX_MENU_TIMEOUT = 500;\nexport const TITLE_TIMEOUT = 10000;\nexport const VERSION_TIMEOUT = 30000;\nexport const SCROLL_TIMEOUT = 100;\nexport const ZOOM_STEP = 0.1;\nexport const MIN_ZOOM = 0.1;\nexport const HYPERLINK_TOOLTIP_DELAY = 300;\n\n// Report a user inactive after IDLE_THRESHOLD milliseconds\nexport const IDLE_THRESHOLD = 60_000;\n// Report a user active each ACTIVE_THRESHOLD milliseconds\nexport const ACTIVE_THRESHOLD = 3_000;\n\nexport const THEME_FILTER = cssVariables.themeFilter;\n\nexport const URL_QUERY_KEYS = {\n  addLibrary: \"addLibrary\",\n} as const;\n\nexport const URL_HASH_KEYS = {\n  addLibrary: \"addLibrary\",\n} as const;\n\nexport const DEFAULT_UI_OPTIONS: AppProps[\"UIOptions\"] = {\n  canvasActions: {\n    changeViewBackgroundColor: true,\n    clearCanvas: true,\n    export: { saveFileToDisk: true },\n    loadScene: true,\n    saveToActiveFile: true,\n    toggleTheme: null,\n    saveAsImage: true,\n  },\n  tools: {\n    image: true,\n  },\n};\n\n// breakpoints\n// -----------------------------------------------------------------------------\n// md screen\nexport const MQ_MAX_WIDTH_PORTRAIT = 730;\nexport const MQ_MAX_WIDTH_LANDSCAPE = 1000;\nexport const MQ_MAX_HEIGHT_LANDSCAPE = 500;\n// sidebar\nexport const MQ_RIGHT_SIDEBAR_MIN_WIDTH = 1229;\n// -----------------------------------------------------------------------------\n\nexport const LIBRARY_SIDEBAR_WIDTH = parseInt(cssVariables.rightSidebarWidth);\n\nexport const MAX_DECIMALS_FOR_SVG_EXPORT = 2;\n\nexport const EXPORT_SCALES = [1, 2, 3];\nexport const DEFAULT_EXPORT_PADDING = 10; // px\n\nexport const DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT = 1440;\n\nexport const MAX_ALLOWED_FILE_BYTES = 2 * 1024 * 1024;\n\nexport const SVG_NS = \"http://www.w3.org/2000/svg\";\n\nexport const ENCRYPTION_KEY_BITS = 128;\n\nexport const VERSIONS = {\n  excalidraw: 2,\n  excalidrawLibrary: 2,\n} as const;\n\nexport const BOUND_TEXT_PADDING = 5;\nexport const ARROW_LABEL_WIDTH_FRACTION = 0.7;\nexport const ARROW_LABEL_FONT_SIZE_TO_MIN_WIDTH_RATIO = 11;\n\nexport const VERTICAL_ALIGN = {\n  TOP: \"top\",\n  MIDDLE: \"middle\",\n  BOTTOM: \"bottom\",\n};\n\nexport const TEXT_ALIGN = {\n  LEFT: \"left\",\n  CENTER: \"center\",\n  RIGHT: \"right\",\n};\n\nexport const ELEMENT_READY_TO_ERASE_OPACITY = 20;\n\n// Radius represented as 25% of element's largest side (width/height).\n// Used for LEGACY and PROPORTIONAL_RADIUS algorithms, or when the element is\n// below the cutoff size.\nexport const DEFAULT_PROPORTIONAL_RADIUS = 0.25;\n// Fixed radius for the ADAPTIVE_RADIUS algorithm. In pixels.\nexport const DEFAULT_ADAPTIVE_RADIUS = 32;\n// roundness type (algorithm)\nexport const ROUNDNESS = {\n  // Used for legacy rounding (rectangles), which currently works the same\n  // as PROPORTIONAL_RADIUS, but we need to differentiate for UI purposes and\n  // forwards-compat.\n  LEGACY: 1,\n\n  // Used for linear elements & diamonds\n  PROPORTIONAL_RADIUS: 2,\n\n  // Current default algorithm for rectangles, using fixed pixel radius.\n  // It's working similarly to a regular border-radius, but attemps to make\n  // radius visually similar across differnt element sizes, especially\n  // very large and very small elements.\n  //\n  // NOTE right now we don't allow configuration and use a constant radius\n  // (see DEFAULT_ADAPTIVE_RADIUS constant)\n  ADAPTIVE_RADIUS: 3,\n} as const;\n\n/** key containt id of precedeing elemnt id we use in reconciliation during\n * collaboration */\nexport const PRECEDING_ELEMENT_KEY = \"__precedingElement__\";\n\nexport const ROUGHNESS = {\n  architect: 0,\n  artist: 1,\n  cartoonist: 2,\n} as const;\n\nexport const STROKE_WIDTH = {\n  thin: 1,\n  bold: 2,\n  extraBold: 4,\n} as const;\n\nexport const DEFAULT_ELEMENT_PROPS: {\n  strokeColor: ExcalidrawElement[\"strokeColor\"];\n  backgroundColor: ExcalidrawElement[\"backgroundColor\"];\n  fillStyle: ExcalidrawElement[\"fillStyle\"];\n  strokeWidth: ExcalidrawElement[\"strokeWidth\"];\n  strokeStyle: ExcalidrawElement[\"strokeStyle\"];\n  roughness: ExcalidrawElement[\"roughness\"];\n  opacity: ExcalidrawElement[\"opacity\"];\n  locked: ExcalidrawElement[\"locked\"];\n} = {\n  strokeColor: COLOR_PALETTE.black,\n  backgroundColor: COLOR_PALETTE.transparent,\n  fillStyle: \"solid\",\n  strokeWidth: 2,\n  strokeStyle: \"solid\",\n  roughness: ROUGHNESS.artist,\n  opacity: 100,\n  locked: false,\n};\n\nexport const LIBRARY_SIDEBAR_TAB = \"library\";\n\nexport const DEFAULT_SIDEBAR = {\n  name: \"default\",\n  defaultTab: LIBRARY_SIDEBAR_TAB,\n} as const;\n\nexport const LIBRARY_DISABLED_TYPES = new Set([\n  \"iframe\",\n  \"embeddable\",\n  \"image\",\n] as const);\n\n// use these constants to easily identify reference sites\nexport const TOOL_TYPE = {\n  selection: \"selection\",\n  rectangle: \"rectangle\",\n  diamond: \"diamond\",\n  ellipse: \"ellipse\",\n  arrow: \"arrow\",\n  line: \"line\",\n  freedraw: \"freedraw\",\n  text: \"text\",\n  image: \"image\",\n  eraser: \"eraser\",\n  hand: \"hand\",\n  frame: \"frame\",\n  magicframe: \"magicframe\",\n  embeddable: \"embeddable\",\n  laser: \"laser\",\n} as const;\n\nexport const EDITOR_LS_KEYS = {\n  OAI_API_KEY: \"excalidraw-oai-api-key\",\n  // legacy naming (non)scheme\n  MERMAID_TO_EXCALIDRAW: \"mermaid-to-excalidraw\",\n  PUBLISH_LIBRARY: \"publish-library-data\",\n} as const;\n\n/**\n * not translated as this is used only in public, stateless API as default value\n * where filename is optional and we can't retrieve name from app state\n */\nexport const DEFAULT_FILENAME = \"Untitled\";\n", "import { t } from \"../i18n\";\nimport { useState, useEffect } from \"react\";\nimport Spinner from \"./Spinner\";\nimport clsx from \"clsx\";\nimport { THEME } from \"../constants\";\nimport { Theme } from \"../element/types\";\n\nexport const LoadingMessage: React.FC<{ delay?: number; theme?: Theme }> = ({\n  delay,\n  theme,\n}) => {\n  const [isWaiting, setIsWaiting] = useState(!!delay);\n\n  useEffect(() => {\n    if (!delay) {\n      return;\n    }\n    const timer = setTimeout(() => {\n      setIsWaiting(false);\n    }, delay);\n    return () => clearTimeout(timer);\n  }, [delay]);\n\n  if (isWaiting) {\n    return null;\n  }\n\n  return (\n    <div\n      className={clsx(\"LoadingMessage\", {\n        \"LoadingMessage--dark\": theme === THEME.DARK,\n      })}\n    >\n      <div>\n        <Spinner />\n      </div>\n      <div className=\"LoadingMessage-text\">{t(\"labels.loadingScene\")}</div>\n    </div>\n  );\n};\n", "import React, { useEffect, useState } from \"react\";\n\nimport { LoadingMessage } from \"./LoadingMessage\";\nimport { defaultLang, Language, languages, setLanguage } from \"../i18n\";\nimport { Theme } from \"../element/types\";\n\ninterface Props {\n  langCode: Language[\"code\"];\n  children: React.ReactElement;\n  theme?: Theme;\n}\n\nexport const InitializeApp = (props: Props) => {\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const updateLang = async () => {\n      await setLanguage(currentLang);\n      setLoading(false);\n    };\n    const currentLang =\n      languages.find((lang) => lang.code === props.langCode) || defaultLang;\n    updateLang();\n  }, [props.langCode]);\n\n  return loading ? <LoadingMessage theme={props.theme} /> : props.children;\n};\n", "import { COLOR_PALETTE } from \"./colors\";\nimport {\n  DEFAULT_VERSION,\n  EVENT,\n  FONT_FAMILY,\n  isDarwin,\n  WINDOWS_EMOJI_FALLBACK_FONT,\n} from \"./constants\";\nimport { FontFamilyValues, FontString } from \"./element/types\";\nimport {\n  ActiveTool,\n  AppState,\n  ToolType,\n  UnsubscribeCallback,\n  Zoom,\n} from \"./types\";\nimport { ResolutionType } from \"./utility-types\";\n\nlet mockDateTime: string | null = null;\n\nexport const setDateTimeForTests = (dateTime: string) => {\n  mockDateTime = dateTime;\n};\n\nexport const getDateTime = () => {\n  if (mockDateTime) {\n    return mockDateTime;\n  }\n\n  const date = new Date();\n  const year = date.getFullYear();\n  const month = `${date.getMonth() + 1}`.padStart(2, \"0\");\n  const day = `${date.getDate()}`.padStart(2, \"0\");\n  const hr = `${date.getHours()}`.padStart(2, \"0\");\n  const min = `${date.getMinutes()}`.padStart(2, \"0\");\n\n  return `${year}-${month}-${day}-${hr}${min}`;\n};\n\nexport const capitalizeString = (str: string) =>\n  str.charAt(0).toUpperCase() + str.slice(1);\n\nexport const isToolIcon = (\n  target: Element | EventTarget | null,\n): target is HTMLElement =>\n  target instanceof HTMLElement && target.className.includes(\"ToolIcon\");\n\nexport const isInputLike = (\n  target: Element | EventTarget | null,\n): target is\n  | HTMLInputElement\n  | HTMLTextAreaElement\n  | HTMLSelectElement\n  | HTMLBRElement\n  | HTMLDivElement =>\n  (target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\n  target instanceof HTMLBRElement || // newline in wysiwyg\n  target instanceof HTMLInputElement ||\n  target instanceof HTMLTextAreaElement ||\n  target instanceof HTMLSelectElement;\n\nexport const isInteractive = (target: Element | EventTarget | null) => {\n  return (\n    isInputLike(target) ||\n    (target instanceof Element && !!target.closest(\"label, button\"))\n  );\n};\n\nexport const isWritableElement = (\n  target: Element | EventTarget | null,\n): target is\n  | HTMLInputElement\n  | HTMLTextAreaElement\n  | HTMLBRElement\n  | HTMLDivElement =>\n  (target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\n  target instanceof HTMLBRElement || // newline in wysiwyg\n  target instanceof HTMLTextAreaElement ||\n  (target instanceof HTMLInputElement &&\n    (target.type === \"text\" ||\n      target.type === \"number\" ||\n      target.type === \"password\"));\n\nexport const getFontFamilyString = ({\n  fontFamily,\n}: {\n  fontFamily: FontFamilyValues;\n}) => {\n  for (const [fontFamilyString, id] of Object.entries(FONT_FAMILY)) {\n    if (id === fontFamily) {\n      return `${fontFamilyString}, ${WINDOWS_EMOJI_FALLBACK_FONT}`;\n    }\n  }\n  return WINDOWS_EMOJI_FALLBACK_FONT;\n};\n\n/** returns fontSize+fontFamily string for assignment to DOM elements */\nexport const getFontString = ({\n  fontSize,\n  fontFamily,\n}: {\n  fontSize: number;\n  fontFamily: FontFamilyValues;\n}) => {\n  return `${fontSize}px ${getFontFamilyString({ fontFamily })}` as FontString;\n};\n\nexport const debounce = <T extends any[]>(\n  fn: (...args: T) => void,\n  timeout: number,\n) => {\n  let handle = 0;\n  let lastArgs: T | null = null;\n  const ret = (...args: T) => {\n    lastArgs = args;\n    clearTimeout(handle);\n    handle = window.setTimeout(() => {\n      lastArgs = null;\n      fn(...args);\n    }, timeout);\n  };\n  ret.flush = () => {\n    clearTimeout(handle);\n    if (lastArgs) {\n      const _lastArgs = lastArgs;\n      lastArgs = null;\n      fn(..._lastArgs);\n    }\n  };\n  ret.cancel = () => {\n    lastArgs = null;\n    clearTimeout(handle);\n  };\n  return ret;\n};\n\n// throttle callback to execute once per animation frame\nexport const throttleRAF = <T extends any[]>(\n  fn: (...args: T) => void,\n  opts?: { trailing?: boolean },\n) => {\n  let timerId: number | null = null;\n  let lastArgs: T | null = null;\n  let lastArgsTrailing: T | null = null;\n\n  const scheduleFunc = (args: T) => {\n    timerId = window.requestAnimationFrame(() => {\n      timerId = null;\n      fn(...args);\n      lastArgs = null;\n      if (lastArgsTrailing) {\n        lastArgs = lastArgsTrailing;\n        lastArgsTrailing = null;\n        scheduleFunc(lastArgs);\n      }\n    });\n  };\n\n  const ret = (...args: T) => {\n    if (import.meta.env.MODE === \"test\") {\n      fn(...args);\n      return;\n    }\n    lastArgs = args;\n    if (timerId === null) {\n      scheduleFunc(lastArgs);\n    } else if (opts?.trailing) {\n      lastArgsTrailing = args;\n    }\n  };\n  ret.flush = () => {\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n    if (lastArgs) {\n      fn(...(lastArgsTrailing || lastArgs));\n      lastArgs = lastArgsTrailing = null;\n    }\n  };\n  ret.cancel = () => {\n    lastArgs = lastArgsTrailing = null;\n    if (timerId !== null) {\n      cancelAnimationFrame(timerId);\n      timerId = null;\n    }\n  };\n  return ret;\n};\n\n/**\n * Exponential ease-out method\n *\n * @param {number} k - The value to be tweened.\n * @returns {number} The tweened value.\n */\nexport const easeOut = (k: number) => {\n  return 1 - Math.pow(1 - k, 4);\n};\n\nconst easeOutInterpolate = (from: number, to: number, progress: number) => {\n  return (to - from) * easeOut(progress) + from;\n};\n\n/**\n * Animates values from `fromValues` to `toValues` using the requestAnimationFrame API.\n * Executes the `onStep` callback on each step with the interpolated values.\n * Returns a function that can be called to cancel the animation.\n *\n * @example\n * // Example usage:\n * const fromValues = { x: 0, y: 0 };\n * const toValues = { x: 100, y: 200 };\n * const onStep = ({x, y}) => {\n *   setState(x, y)\n * };\n * const onCancel = () => {\n *   console.log(\"Animation canceled\");\n * };\n *\n * const cancelAnimation = easeToValuesRAF({\n *   fromValues,\n *   toValues,\n *   onStep,\n *   onCancel,\n * });\n *\n * // To cancel the animation:\n * cancelAnimation();\n */\nexport const easeToValuesRAF = <\n  T extends Record<keyof T, number>,\n  K extends keyof T,\n>({\n  fromValues,\n  toValues,\n  onStep,\n  duration = 250,\n  interpolateValue,\n  onStart,\n  onEnd,\n  onCancel,\n}: {\n  fromValues: T;\n  toValues: T;\n  /**\n   * Interpolate a single value.\n   * Return undefined to be handled by the default interpolator.\n   */\n  interpolateValue?: (\n    fromValue: number,\n    toValue: number,\n    /** no easing applied  */\n    progress: number,\n    key: K,\n  ) => number | undefined;\n  onStep: (values: T) => void;\n  duration?: number;\n  onStart?: () => void;\n  onEnd?: () => void;\n  onCancel?: () => void;\n}) => {\n  let canceled = false;\n  let frameId = 0;\n  let startTime: number;\n\n  function step(timestamp: number) {\n    if (canceled) {\n      return;\n    }\n    if (startTime === undefined) {\n      startTime = timestamp;\n      onStart?.();\n    }\n\n    const elapsed = Math.min(timestamp - startTime, duration);\n    const factor = easeOut(elapsed / duration);\n\n    const newValues = {} as T;\n\n    Object.keys(fromValues).forEach((key) => {\n      const _key = key as keyof T;\n      const result = ((toValues[_key] - fromValues[_key]) * factor +\n        fromValues[_key]) as T[keyof T];\n      newValues[_key] = result;\n    });\n\n    onStep(newValues);\n\n    if (elapsed < duration) {\n      const progress = elapsed / duration;\n\n      const newValues = {} as T;\n\n      Object.keys(fromValues).forEach((key) => {\n        const _key = key as K;\n        const startValue = fromValues[_key];\n        const endValue = toValues[_key];\n\n        let result;\n\n        result = interpolateValue\n          ? interpolateValue(startValue, endValue, progress, _key)\n          : easeOutInterpolate(startValue, endValue, progress);\n\n        if (result == null) {\n          result = easeOutInterpolate(startValue, endValue, progress);\n        }\n\n        newValues[_key] = result as T[K];\n      });\n      onStep(newValues);\n\n      frameId = window.requestAnimationFrame(step);\n    } else {\n      onStep(toValues);\n      onEnd?.();\n    }\n  }\n\n  frameId = window.requestAnimationFrame(step);\n\n  return () => {\n    onCancel?.();\n    canceled = true;\n    window.cancelAnimationFrame(frameId);\n  };\n};\n\n// https://github.com/lodash/lodash/blob/es/chunk.js\nexport const chunk = <T extends any>(\n  array: readonly T[],\n  size: number,\n): T[][] => {\n  if (!array.length || size < 1) {\n    return [];\n  }\n  let index = 0;\n  let resIndex = 0;\n  const result = Array(Math.ceil(array.length / size));\n  while (index < array.length) {\n    result[resIndex++] = array.slice(index, (index += size));\n  }\n  return result;\n};\n\nexport const selectNode = (node: Element) => {\n  const selection = window.getSelection();\n  if (selection) {\n    const range = document.createRange();\n    range.selectNodeContents(node);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n};\n\nexport const removeSelection = () => {\n  const selection = window.getSelection();\n  if (selection) {\n    selection.removeAllRanges();\n  }\n};\n\nexport const distance = (x: number, y: number) => Math.abs(x - y);\n\nexport const updateActiveTool = (\n  appState: Pick<AppState, \"activeTool\">,\n  data: ((\n    | {\n        type: ToolType;\n      }\n    | { type: \"custom\"; customType: string }\n  ) & { locked?: boolean }) & {\n    lastActiveToolBeforeEraser?: ActiveTool | null;\n  },\n): AppState[\"activeTool\"] => {\n  if (data.type === \"custom\") {\n    return {\n      ...appState.activeTool,\n      type: \"custom\",\n      customType: data.customType,\n      locked: data.locked ?? appState.activeTool.locked,\n    };\n  }\n\n  return {\n    ...appState.activeTool,\n    lastActiveTool:\n      data.lastActiveToolBeforeEraser === undefined\n        ? appState.activeTool.lastActiveTool\n        : data.lastActiveToolBeforeEraser,\n    type: data.type,\n    customType: null,\n    locked: data.locked ?? appState.activeTool.locked,\n  };\n};\n\nexport const isFullScreen = () =>\n  document.fullscreenElement?.nodeName === \"HTML\";\n\nexport const allowFullScreen = () =>\n  document.documentElement.requestFullscreen();\n\nexport const exitFullScreen = () => document.exitFullscreen();\n\nexport const getShortcutKey = (shortcut: string): string => {\n  shortcut = shortcut\n    .replace(/\\bAlt\\b/i, \"Alt\")\n    .replace(/\\bShift\\b/i, \"Shift\")\n    .replace(/\\b(Enter|Return)\\b/i, \"Enter\");\n  if (isDarwin) {\n    return shortcut\n      .replace(/\\bCtrlOrCmd\\b/gi, \"Cmd\")\n      .replace(/\\bAlt\\b/i, \"Option\");\n  }\n  return shortcut.replace(/\\bCtrlOrCmd\\b/gi, \"Ctrl\");\n};\n\nexport const viewportCoordsToSceneCoords = (\n  { clientX, clientY }: { clientX: number; clientY: number },\n  {\n    zoom,\n    offsetLeft,\n    offsetTop,\n    scrollX,\n    scrollY,\n  }: {\n    zoom: Zoom;\n    offsetLeft: number;\n    offsetTop: number;\n    scrollX: number;\n    scrollY: number;\n  },\n) => {\n  const x = (clientX - offsetLeft) / zoom.value - scrollX;\n  const y = (clientY - offsetTop) / zoom.value - scrollY;\n\n  return { x, y };\n};\n\nexport const sceneCoordsToViewportCoords = (\n  { sceneX, sceneY }: { sceneX: number; sceneY: number },\n  {\n    zoom,\n    offsetLeft,\n    offsetTop,\n    scrollX,\n    scrollY,\n  }: {\n    zoom: Zoom;\n    offsetLeft: number;\n    offsetTop: number;\n    scrollX: number;\n    scrollY: number;\n  },\n) => {\n  const x = (sceneX + scrollX) * zoom.value + offsetLeft;\n  const y = (sceneY + scrollY) * zoom.value + offsetTop;\n  return { x, y };\n};\n\nexport const getGlobalCSSVariable = (name: string) =>\n  getComputedStyle(document.documentElement).getPropertyValue(`--${name}`);\n\nconst RS_LTR_CHARS =\n  \"A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\" +\n  \"\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF\";\nconst RS_RTL_CHARS = \"\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\";\nconst RE_RTL_CHECK = new RegExp(`^[^${RS_LTR_CHARS}]*[${RS_RTL_CHARS}]`);\n/**\n * Checks whether first directional character is RTL. Meaning whether it starts\n *  with RTL characters, or indeterminate (numbers etc.) characters followed by\n *  RTL.\n * See https://github.com/excalidraw/excalidraw/pull/1722#discussion_r436340171\n */\nexport const isRTL = (text: string) => RE_RTL_CHECK.test(text);\n\nexport const tupleToCoors = (\n  xyTuple: readonly [number, number],\n): { x: number; y: number } => {\n  const [x, y] = xyTuple;\n  return { x, y };\n};\n\n/** use as a rejectionHandler to mute filesystem Abort errors */\nexport const muteFSAbortError = (error?: Error) => {\n  if (error?.name === \"AbortError\") {\n    console.warn(error);\n    return;\n  }\n  throw error;\n};\n\nexport const findIndex = <T>(\n  array: readonly T[],\n  cb: (element: T, index: number, array: readonly T[]) => boolean,\n  fromIndex: number = 0,\n) => {\n  if (fromIndex < 0) {\n    fromIndex = array.length + fromIndex;\n  }\n  fromIndex = Math.min(array.length, Math.max(fromIndex, 0));\n  let index = fromIndex - 1;\n  while (++index < array.length) {\n    if (cb(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n};\n\nexport const findLastIndex = <T>(\n  array: readonly T[],\n  cb: (element: T, index: number, array: readonly T[]) => boolean,\n  fromIndex: number = array.length - 1,\n) => {\n  if (fromIndex < 0) {\n    fromIndex = array.length + fromIndex;\n  }\n  fromIndex = Math.min(array.length - 1, Math.max(fromIndex, 0));\n  let index = fromIndex + 1;\n  while (--index > -1) {\n    if (cb(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n};\n\nexport const isTransparent = (color: string) => {\n  const isRGBTransparent = color.length === 5 && color.substr(4, 1) === \"0\";\n  const isRRGGBBTransparent = color.length === 9 && color.substr(7, 2) === \"00\";\n  return (\n    isRGBTransparent ||\n    isRRGGBBTransparent ||\n    color === COLOR_PALETTE.transparent\n  );\n};\n\nexport type ResolvablePromise<T> = Promise<T> & {\n  resolve: [T] extends [undefined] ? (value?: T) => void : (value: T) => void;\n  reject: (error: Error) => void;\n};\nexport const resolvablePromise = <T>() => {\n  let resolve!: any;\n  let reject!: any;\n  const promise = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  (promise as any).resolve = resolve;\n  (promise as any).reject = reject;\n  return promise as ResolvablePromise<T>;\n};\n\n//https://stackoverflow.com/a/9462382/8418\nexport const nFormatter = (num: number, digits: number): string => {\n  const si = [\n    { value: 1, symbol: \"b\" },\n    { value: 1e3, symbol: \"k\" },\n    { value: 1e6, symbol: \"M\" },\n    { value: 1e9, symbol: \"G\" },\n  ];\n  const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n  let index;\n  for (index = si.length - 1; index > 0; index--) {\n    if (num >= si[index].value) {\n      break;\n    }\n  }\n  return (\n    (num / si[index].value).toFixed(digits).replace(rx, \"$1\") + si[index].symbol\n  );\n};\n\nexport const getVersion = () => {\n  return (\n    document.querySelector<HTMLMetaElement>('meta[name=\"version\"]')?.content ||\n    DEFAULT_VERSION\n  );\n};\n\n// Adapted from https://github.com/Modernizr/Modernizr/blob/master/feature-detects/emoji.js\nexport const supportsEmoji = () => {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) {\n    return false;\n  }\n  const offset = 12;\n  ctx.fillStyle = \"#f00\";\n  ctx.textBaseline = \"top\";\n  ctx.font = \"32px Arial\";\n  // Modernizr used \uD83D\uDC28, but it is sort of supported on Windows 7.\n  // Luckily \uD83D\uDE00 isn't supported.\n  ctx.fillText(\"\uD83D\uDE00\", 0, 0);\n  return ctx.getImageData(offset, offset, 1, 1).data[0] !== 0;\n};\n\nexport const getNearestScrollableContainer = (\n  element: HTMLElement,\n): HTMLElement | Document => {\n  let parent = element.parentElement;\n  while (parent) {\n    if (parent === document.body) {\n      return document;\n    }\n    const { overflowY } = window.getComputedStyle(parent);\n    const hasScrollableContent = parent.scrollHeight > parent.clientHeight;\n    if (\n      hasScrollableContent &&\n      (overflowY === \"auto\" ||\n        overflowY === \"scroll\" ||\n        overflowY === \"overlay\")\n    ) {\n      return parent;\n    }\n    parent = parent.parentElement;\n  }\n  return document;\n};\n\nexport const focusNearestParent = (element: HTMLInputElement) => {\n  let parent = element.parentElement;\n  while (parent) {\n    if (parent.tabIndex > -1) {\n      parent.focus();\n      return;\n    }\n    parent = parent.parentElement;\n  }\n};\n\nexport const preventUnload = (event: BeforeUnloadEvent) => {\n  event.preventDefault();\n  // NOTE: modern browsers no longer allow showing a custom message here\n  event.returnValue = \"\";\n};\n\nexport const bytesToHexString = (bytes: Uint8Array) => {\n  return Array.from(bytes)\n    .map((byte) => `0${byte.toString(16)}`.slice(-2))\n    .join(\"\");\n};\n\nexport const getUpdatedTimestamp = () => (isTestEnv() ? 1 : Date.now());\n\n/**\n * Transforms array of objects containing `id` attribute,\n * or array of ids (strings), into a Map, keyd by `id`.\n */\nexport const arrayToMap = <T extends { id: string } | string>(\n  items: readonly T[] | Map<string, T>,\n) => {\n  if (items instanceof Map) {\n    return items;\n  }\n  return items.reduce((acc: Map<string, T>, element) => {\n    acc.set(typeof element === \"string\" ? element : element.id, element);\n    return acc;\n  }, new Map());\n};\n\nexport const arrayToMapWithIndex = <T extends { id: string }>(\n  elements: readonly T[],\n) =>\n  elements.reduce((acc, element: T, idx) => {\n    acc.set(element.id, [element, idx]);\n    return acc;\n  }, new Map<string, [element: T, index: number]>());\n\nexport const isTestEnv = () => import.meta.env.MODE === \"test\";\n\nexport const wrapEvent = <T extends Event>(name: EVENT, nativeEvent: T) => {\n  return new CustomEvent(name, {\n    detail: {\n      nativeEvent,\n    },\n    cancelable: true,\n  });\n};\n\nexport const updateObject = <T extends Record<string, any>>(\n  obj: T,\n  updates: Partial<T>,\n): T => {\n  let didChange = false;\n  for (const key in updates) {\n    const value = (updates as any)[key];\n    if (typeof value !== \"undefined\") {\n      if (\n        (obj as any)[key] === value &&\n        // if object, always update because its attrs could have changed\n        (typeof value !== \"object\" || value === null)\n      ) {\n        continue;\n      }\n      didChange = true;\n    }\n  }\n\n  if (!didChange) {\n    return obj;\n  }\n\n  return {\n    ...obj,\n    ...updates,\n  };\n};\n\nexport const isPrimitive = (val: any) => {\n  const type = typeof val;\n  return val == null || (type !== \"object\" && type !== \"function\");\n};\n\nexport const getFrame = () => {\n  try {\n    return window.self === window.top ? \"top\" : \"iframe\";\n  } catch (error) {\n    return \"iframe\";\n  }\n};\n\nexport const isRunningInIframe = () => getFrame() === \"iframe\";\n\nexport const isPromiseLike = (\n  value: any,\n): value is Promise<ResolutionType<typeof value>> => {\n  return (\n    !!value &&\n    typeof value === \"object\" &&\n    \"then\" in value &&\n    \"catch\" in value &&\n    \"finally\" in value\n  );\n};\n\nexport const queryFocusableElements = (container: HTMLElement | null) => {\n  const focusableElements = container?.querySelectorAll<HTMLElement>(\n    \"button, a, input, select, textarea, div[tabindex], label[tabindex]\",\n  );\n\n  return focusableElements\n    ? Array.from(focusableElements).filter(\n        (element) =>\n          element.tabIndex > -1 && !(element as HTMLInputElement).disabled,\n      )\n    : [];\n};\n\n/** use as a fallback after identity check (for perf reasons) */\nconst _defaultIsShallowComparatorFallback = (a: any, b: any): boolean => {\n  // consider two empty arrays equal\n  if (\n    Array.isArray(a) &&\n    Array.isArray(b) &&\n    a.length === 0 &&\n    b.length === 0\n  ) {\n    return true;\n  }\n  return a === b;\n};\n\n/**\n * Returns whether object/array is shallow equal.\n * Considers empty object/arrays as equal (whether top-level or second-level).\n */\nexport const isShallowEqual = <\n  T extends Record<string, any>,\n  K extends readonly unknown[],\n>(\n  objA: T,\n  objB: T,\n  comparators?:\n    | { [key in keyof T]?: (a: T[key], b: T[key]) => boolean }\n    | (keyof T extends K[number]\n        ? K extends readonly (keyof T)[]\n          ? K\n          : {\n              _error: \"keys are either missing or include keys not in compared obj\";\n            }\n        : {\n            _error: \"keys are either missing or include keys not in compared obj\";\n          }),\n  debug = false,\n) => {\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  if (aKeys.length !== bKeys.length) {\n    return false;\n  }\n\n  if (comparators && Array.isArray(comparators)) {\n    for (const key of comparators) {\n      const ret =\n        objA[key] === objB[key] ||\n        _defaultIsShallowComparatorFallback(objA[key], objB[key]);\n      if (!ret) {\n        if (debug) {\n          console.warn(\n            `%cisShallowEqual: ${key} not equal ->`,\n            \"color: #8B4000\",\n            objA[key],\n            objB[key],\n          );\n        }\n        return false;\n      }\n    }\n    return true;\n  }\n\n  return aKeys.every((key) => {\n    const comparator = (\n      comparators as { [key in keyof T]?: (a: T[key], b: T[key]) => boolean }\n    )?.[key as keyof T];\n    const ret = comparator\n      ? comparator(objA[key], objB[key])\n      : objA[key] === objB[key] ||\n        _defaultIsShallowComparatorFallback(objA[key], objB[key]);\n\n    if (!ret && debug) {\n      console.warn(\n        `%cisShallowEqual: ${key} not equal ->`,\n        \"color: #8B4000\",\n        objA[key],\n        objB[key],\n      );\n    }\n    return ret;\n  });\n};\n\n// taken from Radix UI\n// https://github.com/radix-ui/primitives/blob/main/packages/core/primitive/src/primitive.tsx\nexport const composeEventHandlers = <E>(\n  originalEventHandler?: (event: E) => void,\n  ourEventHandler?: (event: E) => void,\n  { checkForDefaultPrevented = true } = {},\n) => {\n  return function handleEvent(event: E) {\n    originalEventHandler?.(event);\n\n    if (\n      !checkForDefaultPrevented ||\n      !(event as unknown as Event)?.defaultPrevented\n    ) {\n      return ourEventHandler?.(event);\n    }\n  };\n};\n\n/**\n * supply `null` as message if non-never value is valid, you just need to\n * typecheck against it\n */\nexport const assertNever = (\n  value: never,\n  message: string | null,\n  softAssert?: boolean,\n): never => {\n  if (!message) {\n    return value;\n  }\n  if (softAssert) {\n    console.error(message);\n    return value;\n  }\n\n  throw new Error(message);\n};\n\n/**\n * Memoizes on values of `opts` object (strict equality).\n */\nexport const memoize = <T extends Record<string, any>, R extends any>(\n  func: (opts: T) => R,\n) => {\n  let lastArgs: Map<string, any> | undefined;\n  let lastResult: R | undefined;\n\n  const ret = function (opts: T) {\n    const currentArgs = Object.entries(opts);\n\n    if (lastArgs) {\n      let argsAreEqual = true;\n      for (const [key, value] of currentArgs) {\n        if (lastArgs.get(key) !== value) {\n          argsAreEqual = false;\n          break;\n        }\n      }\n      if (argsAreEqual) {\n        return lastResult;\n      }\n    }\n\n    const result = func(opts);\n\n    lastArgs = new Map(currentArgs);\n    lastResult = result;\n\n    return result;\n  };\n\n  ret.clear = () => {\n    lastArgs = undefined;\n    lastResult = undefined;\n  };\n\n  return ret as typeof func & { clear: () => void };\n};\n\n/** Checks if value is inside given collection. Useful for type-safety. */\nexport const isMemberOf = <T extends string>(\n  /** Set/Map/Array/Object */\n  collection: Set<T> | readonly T[] | Record<T, any> | Map<T, any>,\n  /** value to look for */\n  value: string,\n): value is T => {\n  return collection instanceof Set || collection instanceof Map\n    ? collection.has(value as T)\n    : \"includes\" in collection\n    ? collection.includes(value as T)\n    : collection.hasOwnProperty(value);\n};\n\nexport const cloneJSON = <T>(obj: T): T => JSON.parse(JSON.stringify(obj));\n\nexport const isFiniteNumber = (value: any): value is number => {\n  return typeof value === \"number\" && Number.isFinite(value);\n};\n\nexport const updateStable = <T extends any[] | Record<string, any>>(\n  prevValue: T,\n  nextValue: T,\n) => {\n  if (isShallowEqual(prevValue, nextValue)) {\n    return prevValue;\n  }\n  return nextValue;\n};\n\n// Window\nexport function addEventListener<K extends keyof WindowEventMap>(\n  target: Window & typeof globalThis,\n  type: K,\n  listener: (this: Window, ev: WindowEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\nexport function addEventListener(\n  target: Window & typeof globalThis,\n  type: string,\n  listener: (this: Window, ev: Event) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\n// Document\nexport function addEventListener<K extends keyof DocumentEventMap>(\n  target: Document,\n  type: K,\n  listener: (this: Document, ev: DocumentEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\nexport function addEventListener(\n  target: Document,\n  type: string,\n  listener: (this: Document, ev: Event) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\n// FontFaceSet (document.fonts)\nexport function addEventListener<K extends keyof FontFaceSetEventMap>(\n  target: FontFaceSet,\n  type: K,\n  listener: (this: FontFaceSet, ev: FontFaceSetEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\n// HTMLElement / mix\nexport function addEventListener<K extends keyof HTMLElementEventMap>(\n  target:\n    | Document\n    | (Window & typeof globalThis)\n    | HTMLElement\n    | undefined\n    | null\n    | false,\n  type: K,\n  listener: (this: HTMLDivElement, ev: HTMLElementEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback;\n// implem\nexport function addEventListener(\n  /**\n   * allows for falsy values so you don't have to type check when adding\n   * event listeners to optional elements\n   */\n  target:\n    | Document\n    | (Window & typeof globalThis)\n    | FontFaceSet\n    | HTMLElement\n    | undefined\n    | null\n    | false,\n  type: keyof WindowEventMap | keyof DocumentEventMap | string,\n  listener: (ev: Event) => any,\n  options?: boolean | AddEventListenerOptions,\n): UnsubscribeCallback {\n  if (!target) {\n    return () => {};\n  }\n  target?.addEventListener?.(type, listener, options);\n  return () => {\n    target?.removeEventListener?.(type, listener, options);\n  };\n}\n\nconst average = (a: number, b: number) => (a + b) / 2;\nexport function getSvgPathFromStroke(points: number[][], closed = true) {\n  const len = points.length;\n\n  if (len < 4) {\n    return ``;\n  }\n\n  let a = points[0];\n  let b = points[1];\n  const c = points[2];\n\n  let result = `M${a[0].toFixed(2)},${a[1].toFixed(2)} Q${b[0].toFixed(\n    2,\n  )},${b[1].toFixed(2)} ${average(b[0], c[0]).toFixed(2)},${average(\n    b[1],\n    c[1],\n  ).toFixed(2)} T`;\n\n  for (let i = 2, max = len - 1; i < max; i++) {\n    a = points[i];\n    b = points[i + 1];\n    result += `${average(a[0], b[0]).toFixed(2)},${average(a[1], b[1]).toFixed(\n      2,\n    )} `;\n  }\n\n  if (closed) {\n    result += \"Z\";\n  }\n\n  return result;\n}\n\nexport const normalizeEOL = (str: string) => {\n  return str.replace(/\\r?\\n|\\r/g, \"\\n\");\n};\n\n// -----------------------------------------------------------------------------\ntype HasBrand<T> = {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  [K in keyof T]: K extends `~brand${infer _}` ? true : never;\n}[keyof T];\n\ntype RemoveAllBrands<T> = HasBrand<T> extends true\n  ? {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      [K in keyof T as K extends `~brand~${infer _}` ? never : K]: T[K];\n    }\n  : never;\n\n// adapted from https://github.com/colinhacks/zod/discussions/1994#discussioncomment-6068940\n// currently does not cover all types (e.g. tuples, promises...)\ntype Unbrand<T> = T extends Map<infer E, infer F>\n  ? Map<E, F>\n  : T extends Set<infer E>\n  ? Set<E>\n  : T extends Array<infer E>\n  ? Array<E>\n  : RemoveAllBrands<T>;\n\n/**\n * Makes type into a branded type, ensuring that value is assignable to\n * the base ubranded type. Optionally you can explicitly supply current value\n * type to combine both (useful for composite branded types. Make sure you\n * compose branded types which are not composite themselves.)\n */\nexport const toBrandedType = <BrandedType, CurrentType = BrandedType>(\n  value: Unbrand<BrandedType>,\n) => {\n  return value as CurrentType & BrandedType;\n};\n\n// -----------------------------------------------------------------------------\n", "import { ROUNDNESS } from \"../constants\";\nimport { ElementOrToolType } from \"../types\";\nimport { MarkNonNullable } from \"../utility-types\";\nimport { assertNever } from \"../utils\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawTextElement,\n  ExcalidrawEmbeddableElement,\n  ExcalidrawLinearElement,\n  ExcalidrawBindableElement,\n  ExcalidrawFreeDrawElement,\n  InitializedExcalidrawImageElement,\n  ExcalidrawImageElement,\n  ExcalidrawTextElementWithContainer,\n  ExcalidrawTextContainer,\n  ExcalidrawFrameElement,\n  RoundnessType,\n  ExcalidrawFrameLikeElement,\n  ExcalidrawElementType,\n  ExcalidrawIframeElement,\n  ExcalidrawIframeLikeElement,\n  ExcalidrawMagicFrameElement,\n} from \"./types\";\n\nexport const isInitializedImageElement = (\n  element: ExcalidrawElement | null,\n): element is InitializedExcalidrawImageElement => {\n  return !!element && element.type === \"image\" && !!element.fileId;\n};\n\nexport const isImageElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawImageElement => {\n  return !!element && element.type === \"image\";\n};\n\nexport const isEmbeddableElement = (\n  element: ExcalidrawElement | null | undefined,\n): element is ExcalidrawEmbeddableElement => {\n  return !!element && element.type === \"embeddable\";\n};\n\nexport const isIframeElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawIframeElement => {\n  return !!element && element.type === \"iframe\";\n};\n\nexport const isIframeLikeElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawIframeLikeElement => {\n  return (\n    !!element && (element.type === \"iframe\" || element.type === \"embeddable\")\n  );\n};\n\nexport const isTextElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawTextElement => {\n  return element != null && element.type === \"text\";\n};\n\nexport const isFrameElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawFrameElement => {\n  return element != null && element.type === \"frame\";\n};\n\nexport const isMagicFrameElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawMagicFrameElement => {\n  return element != null && element.type === \"magicframe\";\n};\n\nexport const isFrameLikeElement = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawFrameLikeElement => {\n  return (\n    element != null &&\n    (element.type === \"frame\" || element.type === \"magicframe\")\n  );\n};\n\nexport const isFreeDrawElement = (\n  element?: ExcalidrawElement | null,\n): element is ExcalidrawFreeDrawElement => {\n  return element != null && isFreeDrawElementType(element.type);\n};\n\nexport const isFreeDrawElementType = (\n  elementType: ExcalidrawElementType,\n): boolean => {\n  return elementType === \"freedraw\";\n};\n\nexport const isLinearElement = (\n  element?: ExcalidrawElement | null,\n): element is ExcalidrawLinearElement => {\n  return element != null && isLinearElementType(element.type);\n};\n\nexport const isArrowElement = (\n  element?: ExcalidrawElement | null,\n): element is ExcalidrawLinearElement => {\n  return element != null && element.type === \"arrow\";\n};\n\nexport const isLinearElementType = (\n  elementType: ElementOrToolType,\n): boolean => {\n  return (\n    elementType === \"arrow\" || elementType === \"line\" // || elementType === \"freedraw\"\n  );\n};\n\nexport const isBindingElement = (\n  element?: ExcalidrawElement | null,\n  includeLocked = true,\n): element is ExcalidrawLinearElement => {\n  return (\n    element != null &&\n    (!element.locked || includeLocked === true) &&\n    isBindingElementType(element.type)\n  );\n};\n\nexport const isBindingElementType = (\n  elementType: ElementOrToolType,\n): boolean => {\n  return elementType === \"arrow\";\n};\n\nexport const isBindableElement = (\n  element: ExcalidrawElement | null,\n  includeLocked = true,\n): element is ExcalidrawBindableElement => {\n  return (\n    element != null &&\n    (!element.locked || includeLocked === true) &&\n    (element.type === \"rectangle\" ||\n      element.type === \"diamond\" ||\n      element.type === \"ellipse\" ||\n      element.type === \"image\" ||\n      element.type === \"iframe\" ||\n      element.type === \"embeddable\" ||\n      element.type === \"frame\" ||\n      element.type === \"magicframe\" ||\n      (element.type === \"text\" && !element.containerId))\n  );\n};\n\nexport const isTextBindableContainer = (\n  element: ExcalidrawElement | null,\n  includeLocked = true,\n): element is ExcalidrawTextContainer => {\n  return (\n    element != null &&\n    (!element.locked || includeLocked === true) &&\n    (element.type === \"rectangle\" ||\n      element.type === \"diamond\" ||\n      element.type === \"ellipse\" ||\n      isArrowElement(element))\n  );\n};\n\nexport const isExcalidrawElement = (\n  element: any,\n): element is ExcalidrawElement => {\n  const type: ExcalidrawElementType | undefined = element?.type;\n  if (!type) {\n    return false;\n  }\n  switch (type) {\n    case \"text\":\n    case \"diamond\":\n    case \"rectangle\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"ellipse\":\n    case \"arrow\":\n    case \"freedraw\":\n    case \"line\":\n    case \"frame\":\n    case \"magicframe\":\n    case \"image\":\n    case \"selection\": {\n      return true;\n    }\n    default: {\n      assertNever(type, null);\n      return false;\n    }\n  }\n};\n\nexport const hasBoundTextElement = (\n  element: ExcalidrawElement | null,\n): element is MarkNonNullable<ExcalidrawBindableElement, \"boundElements\"> => {\n  return (\n    isTextBindableContainer(element) &&\n    !!element.boundElements?.some(({ type }) => type === \"text\")\n  );\n};\n\nexport const isBoundToContainer = (\n  element: ExcalidrawElement | null,\n): element is ExcalidrawTextElementWithContainer => {\n  return (\n    element !== null &&\n    \"containerId\" in element &&\n    element.containerId !== null &&\n    isTextElement(element)\n  );\n};\n\nexport const isUsingAdaptiveRadius = (type: string) =>\n  type === \"rectangle\" ||\n  type === \"embeddable\" ||\n  type === \"iframe\" ||\n  type === \"image\";\n\nexport const isUsingProportionalRadius = (type: string) =>\n  type === \"line\" || type === \"arrow\" || type === \"diamond\";\n\nexport const canApplyRoundnessTypeToElement = (\n  roundnessType: RoundnessType,\n  element: ExcalidrawElement,\n) => {\n  if (\n    (roundnessType === ROUNDNESS.ADAPTIVE_RADIUS ||\n      // if legacy roundness, it can be applied to elements that currently\n      // use adaptive radius\n      roundnessType === ROUNDNESS.LEGACY) &&\n    isUsingAdaptiveRadius(element.type)\n  ) {\n    return true;\n  }\n  if (\n    roundnessType === ROUNDNESS.PROPORTIONAL_RADIUS &&\n    isUsingProportionalRadius(element.type)\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const getDefaultRoundnessTypeForElement = (\n  element: ExcalidrawElement,\n) => {\n  if (isUsingProportionalRadius(element.type)) {\n    return {\n      type: ROUNDNESS.PROPORTIONAL_RADIUS,\n    };\n  }\n\n  if (isUsingAdaptiveRadius(element.type)) {\n    return {\n      type: ROUNDNESS.ADAPTIVE_RADIUS,\n    };\n  }\n\n  return null;\n};\n", "import { Random } from \"roughjs/bin/math\";\nimport { nanoid } from \"nanoid\";\nimport { isTestEnv } from \"./utils\";\n\nlet random = new Random(Date.now());\nlet testIdBase = 0;\n\nexport const randomInteger = () => Math.floor(random.next() * 2 ** 31);\n\nexport const reseed = (seed: number) => {\n  random = new Random(seed);\n  testIdBase = 0;\n};\n\nexport const randomId = () => (isTestEnv() ? `id${testIdBase++}` : nanoid());\n", "import {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n  ExcalidrawFrameLikeElement,\n  ElementsMapOrArray,\n  SceneElementsMap,\n  NonDeletedSceneElementsMap,\n} from \"../element/types\";\nimport { isNonDeletedElement } from \"../element\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\nimport { getSelectedElements } from \"./selection\";\nimport { AppState } from \"../types\";\nimport { Assert, SameType } from \"../utility-types\";\nimport { randomInteger } from \"../random\";\nimport { toBrandedType } from \"../utils\";\n\ntype ElementIdKey = InstanceType<typeof LinearElementEditor>[\"elementId\"];\ntype ElementKey = ExcalidrawElement | ElementIdKey;\n\ntype SceneStateCallback = () => void;\ntype SceneStateCallbackRemover = () => void;\n\ntype SelectionHash = string & { __brand: \"selectionHash\" };\n\nconst getNonDeletedElements = <T extends ExcalidrawElement>(\n  allElements: readonly T[],\n) => {\n  const elementsMap = new Map() as NonDeletedSceneElementsMap;\n  const elements: T[] = [];\n  for (const element of allElements) {\n    if (!element.isDeleted) {\n      elements.push(element as NonDeleted<T>);\n      elementsMap.set(element.id, element as NonDeletedExcalidrawElement);\n    }\n  }\n  return { elementsMap, elements };\n};\n\nconst hashSelectionOpts = (\n  opts: Parameters<InstanceType<typeof Scene>[\"getSelectedElements\"]>[0],\n) => {\n  const keys = [\"includeBoundTextElement\", \"includeElementsInFrames\"] as const;\n\n  type HashableKeys = Omit<typeof opts, \"selectedElementIds\" | \"elements\">;\n\n  // just to ensure we're hashing all expected keys\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  type _ = Assert<\n    SameType<\n      Required<HashableKeys>,\n      Pick<Required<HashableKeys>, typeof keys[number]>\n    >\n  >;\n\n  let hash = \"\";\n  for (const key of keys) {\n    hash += `${key}:${opts[key] ? \"1\" : \"0\"}`;\n  }\n  return hash as SelectionHash;\n};\n\n// ideally this would be a branded type but it'd be insanely hard to work with\n// in our codebase\nexport type ExcalidrawElementsIncludingDeleted = readonly ExcalidrawElement[];\n\nconst isIdKey = (elementKey: ElementKey): elementKey is ElementIdKey => {\n  if (typeof elementKey === \"string\") {\n    return true;\n  }\n  return false;\n};\n\nclass Scene {\n  // ---------------------------------------------------------------------------\n  // static methods/props\n  // ---------------------------------------------------------------------------\n\n  private static sceneMapByElement = new WeakMap<ExcalidrawElement, Scene>();\n  private static sceneMapById = new Map<string, Scene>();\n\n  static mapElementToScene(\n    elementKey: ElementKey,\n    scene: Scene,\n    /**\n     * needed because of frame exporting hack.\n     * elementId:Scene mapping will be removed completely, soon.\n     */\n    mapElementIds = true,\n  ) {\n    if (isIdKey(elementKey)) {\n      if (!mapElementIds) {\n        return;\n      }\n      // for cases where we don't have access to the element object\n      // (e.g. restore serialized appState with id references)\n      this.sceneMapById.set(elementKey, scene);\n    } else {\n      this.sceneMapByElement.set(elementKey, scene);\n      if (!mapElementIds) {\n        // if mapping element objects, also cache the id string when later\n        // looking up by id alone\n        this.sceneMapById.set(elementKey.id, scene);\n      }\n    }\n  }\n\n  static getScene(elementKey: ElementKey): Scene | null {\n    if (isIdKey(elementKey)) {\n      return this.sceneMapById.get(elementKey) || null;\n    }\n    return this.sceneMapByElement.get(elementKey) || null;\n  }\n\n  // ---------------------------------------------------------------------------\n  // instance methods/props\n  // ---------------------------------------------------------------------------\n\n  private callbacks: Set<SceneStateCallback> = new Set();\n\n  private nonDeletedElements: readonly NonDeletedExcalidrawElement[] = [];\n  private nonDeletedElementsMap = toBrandedType<NonDeletedSceneElementsMap>(\n    new Map(),\n  );\n  private elements: readonly ExcalidrawElement[] = [];\n  private nonDeletedFramesLikes: readonly NonDeleted<ExcalidrawFrameLikeElement>[] =\n    [];\n  private frames: readonly ExcalidrawFrameLikeElement[] = [];\n  private elementsMap = toBrandedType<SceneElementsMap>(new Map());\n  private selectedElementsCache: {\n    selectedElementIds: AppState[\"selectedElementIds\"] | null;\n    elements: readonly NonDeletedExcalidrawElement[] | null;\n    cache: Map<SelectionHash, NonDeletedExcalidrawElement[]>;\n  } = {\n    selectedElementIds: null,\n    elements: null,\n    cache: new Map(),\n  };\n  private versionNonce: number | undefined;\n\n  getElementsMapIncludingDeleted() {\n    return this.elementsMap;\n  }\n\n  getNonDeletedElementsMap() {\n    return this.nonDeletedElementsMap;\n  }\n\n  getElementsIncludingDeleted() {\n    return this.elements;\n  }\n\n  getNonDeletedElements(): readonly NonDeletedExcalidrawElement[] {\n    return this.nonDeletedElements;\n  }\n\n  getFramesIncludingDeleted() {\n    return this.frames;\n  }\n\n  getSelectedElements(opts: {\n    // NOTE can be ommitted by making Scene constructor require App instance\n    selectedElementIds: AppState[\"selectedElementIds\"];\n    /**\n     * for specific cases where you need to use elements not from current\n     * scene state. This in effect will likely result in cache-miss, and\n     * the cache won't be updated in this case.\n     */\n    elements?: ElementsMapOrArray;\n    // selection-related options\n    includeBoundTextElement?: boolean;\n    includeElementsInFrames?: boolean;\n  }): NonDeleted<ExcalidrawElement>[] {\n    const hash = hashSelectionOpts(opts);\n\n    const elements = opts?.elements || this.nonDeletedElements;\n    if (\n      this.selectedElementsCache.elements === elements &&\n      this.selectedElementsCache.selectedElementIds === opts.selectedElementIds\n    ) {\n      const cached = this.selectedElementsCache.cache.get(hash);\n      if (cached) {\n        return cached;\n      }\n    } else if (opts?.elements == null) {\n      // if we're operating on latest scene elements and the cache is not\n      //  storing the latest elements, clear the cache\n      this.selectedElementsCache.cache.clear();\n    }\n\n    const selectedElements = getSelectedElements(\n      elements,\n      { selectedElementIds: opts.selectedElementIds },\n      opts,\n    );\n\n    // cache only if we're not using custom elements\n    if (opts?.elements == null) {\n      this.selectedElementsCache.selectedElementIds = opts.selectedElementIds;\n      this.selectedElementsCache.elements = this.nonDeletedElements;\n      this.selectedElementsCache.cache.set(hash, selectedElements);\n    }\n\n    return selectedElements;\n  }\n\n  getNonDeletedFramesLikes(): readonly NonDeleted<ExcalidrawFrameLikeElement>[] {\n    return this.nonDeletedFramesLikes;\n  }\n\n  getElement<T extends ExcalidrawElement>(id: T[\"id\"]): T | null {\n    return (this.elementsMap.get(id) as T | undefined) || null;\n  }\n\n  getVersionNonce() {\n    return this.versionNonce;\n  }\n\n  getNonDeletedElement(\n    id: ExcalidrawElement[\"id\"],\n  ): NonDeleted<ExcalidrawElement> | null {\n    const element = this.getElement(id);\n    if (element && isNonDeletedElement(element)) {\n      return element;\n    }\n    return null;\n  }\n\n  /**\n   * A utility method to help with updating all scene elements, with the added\n   * performance optimization of not renewing the array if no change is made.\n   *\n   * Maps all current excalidraw elements, invoking the callback for each\n   * element. The callback should either return a new mapped element, or the\n   * original element if no changes are made. If no changes are made to any\n   * element, this results in a no-op. Otherwise, the newly mapped elements\n   * are set as the next scene's elements.\n   *\n   * @returns whether a change was made\n   */\n  mapElements(\n    iteratee: (element: ExcalidrawElement) => ExcalidrawElement,\n  ): boolean {\n    let didChange = false;\n    const newElements = this.elements.map((element) => {\n      const nextElement = iteratee(element);\n      if (nextElement !== element) {\n        didChange = true;\n      }\n      return nextElement;\n    });\n    if (didChange) {\n      this.replaceAllElements(newElements);\n    }\n    return didChange;\n  }\n\n  replaceAllElements(nextElements: ElementsMapOrArray, mapElementIds = true) {\n    this.elements =\n      // ts doesn't like `Array.isArray` of `instanceof Map`\n      nextElements instanceof Array\n        ? nextElements\n        : Array.from(nextElements.values());\n    const nextFrameLikes: ExcalidrawFrameLikeElement[] = [];\n    this.elementsMap.clear();\n    this.elements.forEach((element) => {\n      if (isFrameLikeElement(element)) {\n        nextFrameLikes.push(element);\n      }\n      this.elementsMap.set(element.id, element);\n      Scene.mapElementToScene(element, this, mapElementIds);\n    });\n    const nonDeletedElements = getNonDeletedElements(this.elements);\n    this.nonDeletedElements = nonDeletedElements.elements;\n    this.nonDeletedElementsMap = nonDeletedElements.elementsMap;\n\n    this.frames = nextFrameLikes;\n    this.nonDeletedFramesLikes = getNonDeletedElements(this.frames).elements;\n\n    this.informMutation();\n  }\n\n  informMutation() {\n    this.versionNonce = randomInteger();\n\n    for (const callback of Array.from(this.callbacks)) {\n      callback();\n    }\n  }\n\n  addCallback(cb: SceneStateCallback): SceneStateCallbackRemover {\n    if (this.callbacks.has(cb)) {\n      throw new Error();\n    }\n\n    this.callbacks.add(cb);\n\n    return () => {\n      if (!this.callbacks.has(cb)) {\n        throw new Error();\n      }\n      this.callbacks.delete(cb);\n    };\n  }\n\n  destroy() {\n    this.nonDeletedElements = [];\n    this.elements = [];\n    this.nonDeletedFramesLikes = [];\n    this.frames = [];\n    this.elementsMap.clear();\n    this.selectedElementsCache.selectedElementIds = null;\n    this.selectedElementsCache.elements = null;\n    this.selectedElementsCache.cache.clear();\n\n    Scene.sceneMapById.forEach((scene, elementKey) => {\n      if (scene === this) {\n        Scene.sceneMapById.delete(elementKey);\n      }\n    });\n\n    // done not for memory leaks, but to guard against possible late fires\n    // (I guess?)\n    this.callbacks.clear();\n  }\n\n  insertElementAtIndex(element: ExcalidrawElement, index: number) {\n    if (!Number.isFinite(index) || index < 0) {\n      throw new Error(\n        \"insertElementAtIndex can only be called with index >= 0\",\n      );\n    }\n    const nextElements = [\n      ...this.elements.slice(0, index),\n      element,\n      ...this.elements.slice(index),\n    ];\n    this.replaceAllElements(nextElements);\n  }\n\n  insertElementsAtIndex(elements: ExcalidrawElement[], index: number) {\n    if (!Number.isFinite(index) || index < 0) {\n      throw new Error(\n        \"insertElementAtIndex can only be called with index >= 0\",\n      );\n    }\n    const nextElements = [\n      ...this.elements.slice(0, index),\n      ...elements,\n      ...this.elements.slice(index),\n    ];\n\n    this.replaceAllElements(nextElements);\n  }\n\n  addNewElement = (element: ExcalidrawElement) => {\n    if (element.frameId) {\n      this.insertElementAtIndex(element, this.getElementIndex(element.frameId));\n    } else {\n      this.replaceAllElements([...this.elements, element]);\n    }\n  };\n\n  getElementIndex(elementId: string) {\n    return this.elements.findIndex((element) => element.id === elementId);\n  }\n\n  getContainerElement = (\n    element:\n      | (ExcalidrawElement & {\n          containerId: ExcalidrawElement[\"id\"] | null;\n        })\n      | null,\n  ) => {\n    if (!element) {\n      return null;\n    }\n    if (element.containerId) {\n      return this.getElement(element.containerId) || null;\n    }\n    return null;\n  };\n}\n\nexport default Scene;\n", "import { Point } from \"./types\";\n\nexport const getSizeFromPoints = (points: readonly Point[]) => {\n  const xs = points.map((point) => point[0]);\n  const ys = points.map((point) => point[1]);\n  return {\n    width: Math.max(...xs) - Math.min(...xs),\n    height: Math.max(...ys) - Math.min(...ys),\n  };\n};\n\n/** @arg dimension, 0 for rescaling only x, 1 for y */\nexport const rescalePoints = (\n  dimension: 0 | 1,\n  newSize: number,\n  points: readonly Point[],\n  normalize: boolean,\n): Point[] => {\n  const coordinates = points.map((point) => point[dimension]);\n  const maxCoordinate = Math.max(...coordinates);\n  const minCoordinate = Math.min(...coordinates);\n  const size = maxCoordinate - minCoordinate;\n  const scale = size === 0 ? 1 : newSize / size;\n\n  let nextMinCoordinate = Infinity;\n\n  const scaledPoints = points.map((point): Point => {\n    const newCoordinate = point[dimension] * scale;\n    const newPoint = [...point];\n    newPoint[dimension] = newCoordinate;\n    if (newCoordinate < nextMinCoordinate) {\n      nextMinCoordinate = newCoordinate;\n    }\n    return newPoint as unknown as Point;\n  });\n\n  if (!normalize) {\n    return scaledPoints;\n  }\n\n  if (scaledPoints.length === 2) {\n    // we don't translate two-point lines\n    return scaledPoints;\n  }\n\n  const translation = minCoordinate - nextMinCoordinate;\n\n  const nextPoints = scaledPoints.map(\n    (scaledPoint) =>\n      scaledPoint.map((value, currentDimension) => {\n        return currentDimension === dimension ? value + translation : value;\n      }) as [number, number],\n  );\n  return nextPoints;\n};\n", "import { NormalizedZoomValue, Point, Zoom } from \"./types\";\nimport {\n  DEFAULT_ADAPTIVE_RADIUS,\n  LINE_CONFIRM_THRESHOLD,\n  DEFAULT_PROPORTIONAL_RADIUS,\n  ROUNDNESS,\n} from \"./constants\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  NonDeleted,\n} from \"./element/types\";\nimport { getCurvePathOps } from \"./element/bounds\";\nimport { Mutable } from \"./utility-types\";\nimport { ShapeCache } from \"./scene/ShapeCache\";\n\nexport const rotate = (\n  // target point to rotate\n  x: number,\n  y: number,\n  // point to rotate against\n  cx: number,\n  cy: number,\n  angle: number,\n): [number, number] =>\n  // \uD835\uDC4E\u2032\uD835\uDC65=(\uD835\uDC4E\uD835\uDC65\u2212\uD835\uDC50\uD835\uDC65)cos\uD835\uDF03\u2212(\uD835\uDC4E\uD835\uDC66\u2212\uD835\uDC50\uD835\uDC66)sin\uD835\uDF03+\uD835\uDC50\uD835\uDC65\n  // \uD835\uDC4E\u2032\uD835\uDC66=(\uD835\uDC4E\uD835\uDC65\u2212\uD835\uDC50\uD835\uDC65)sin\uD835\uDF03+(\uD835\uDC4E\uD835\uDC66\u2212\uD835\uDC50\uD835\uDC66)cos\uD835\uDF03+\uD835\uDC50\uD835\uDC66.\n  // https://math.stackexchange.com/questions/2204520/how-do-i-rotate-a-line-segment-in-a-specific-point-on-the-line\n  [\n    (x - cx) * Math.cos(angle) - (y - cy) * Math.sin(angle) + cx,\n    (x - cx) * Math.sin(angle) + (y - cy) * Math.cos(angle) + cy,\n  ];\n\nexport const rotatePoint = (\n  point: Point,\n  center: Point,\n  angle: number,\n): [number, number] => rotate(point[0], point[1], center[0], center[1], angle);\n\nexport const adjustXYWithRotation = (\n  sides: {\n    n?: boolean;\n    e?: boolean;\n    s?: boolean;\n    w?: boolean;\n  },\n  x: number,\n  y: number,\n  angle: number,\n  deltaX1: number,\n  deltaY1: number,\n  deltaX2: number,\n  deltaY2: number,\n): [number, number] => {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  if (sides.e && sides.w) {\n    x += deltaX1 + deltaX2;\n  } else if (sides.e) {\n    x += deltaX1 * (1 + cos);\n    y += deltaX1 * sin;\n    x += deltaX2 * (1 - cos);\n    y += deltaX2 * -sin;\n  } else if (sides.w) {\n    x += deltaX1 * (1 - cos);\n    y += deltaX1 * -sin;\n    x += deltaX2 * (1 + cos);\n    y += deltaX2 * sin;\n  }\n\n  if (sides.n && sides.s) {\n    y += deltaY1 + deltaY2;\n  } else if (sides.n) {\n    x += deltaY1 * sin;\n    y += deltaY1 * (1 - cos);\n    x += deltaY2 * -sin;\n    y += deltaY2 * (1 + cos);\n  } else if (sides.s) {\n    x += deltaY1 * -sin;\n    y += deltaY1 * (1 + cos);\n    x += deltaY2 * sin;\n    y += deltaY2 * (1 - cos);\n  }\n  return [x, y];\n};\n\nexport const getPointOnAPath = (point: Point, path: Point[]) => {\n  const [px, py] = point;\n  const [start, ...other] = path;\n  let [lastX, lastY] = start;\n  let kLine: number = 0;\n  let idx: number = 0;\n\n  // if any item in the array is true, it means that a point is\n  // on some segment of a line based path\n  const retVal = other.some(([x2, y2], i) => {\n    // we always take a line when dealing with line segments\n    const x1 = lastX;\n    const y1 = lastY;\n\n    lastX = x2;\n    lastY = y2;\n\n    // if a point is not within the domain of the line segment\n    // it is not on the line segment\n    if (px < x1 || px > x2) {\n      return false;\n    }\n\n    // check if all points lie on the same line\n    // y1 = kx1 + b, y2 = kx2 + b\n    // y2 - y1 = k(x2 - x2) -> k = (y2 - y1) / (x2 - x1)\n\n    // coefficient for the line (p0, p1)\n    const kL = (y2 - y1) / (x2 - x1);\n\n    // coefficient for the line segment (p0, point)\n    const kP1 = (py - y1) / (px - x1);\n\n    // coefficient for the line segment (point, p1)\n    const kP2 = (py - y2) / (px - x2);\n\n    // because we are basing both lines from the same starting point\n    // the only option for collinearity is having same coefficients\n\n    // using it for floating point comparisons\n    const epsilon = 0.3;\n\n    // if coefficient is more than an arbitrary epsilon,\n    // these lines are nor collinear\n    if (Math.abs(kP1 - kL) > epsilon && Math.abs(kP2 - kL) > epsilon) {\n      return false;\n    }\n\n    // store the coefficient because we are goint to need it\n    kLine = kL;\n    idx = i;\n\n    return true;\n  });\n\n  // Return a coordinate that is always on the line segment\n  if (retVal === true) {\n    return { x: point[0], y: kLine * point[0], segment: idx };\n  }\n\n  return null;\n};\n\nexport const distance2d = (x1: number, y1: number, x2: number, y2: number) => {\n  const xd = x2 - x1;\n  const yd = y2 - y1;\n  return Math.hypot(xd, yd);\n};\n\nexport const centerPoint = (a: Point, b: Point): Point => {\n  return [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n};\n\n// Checks if the first and last point are close enough\n// to be considered a loop\nexport const isPathALoop = (\n  points: ExcalidrawLinearElement[\"points\"],\n  /** supply if you want the loop detection to account for current zoom */\n  zoomValue: Zoom[\"value\"] = 1 as NormalizedZoomValue,\n): boolean => {\n  if (points.length >= 3) {\n    const [first, last] = [points[0], points[points.length - 1]];\n    const distance = distance2d(first[0], first[1], last[0], last[1]);\n\n    // Adjusting LINE_CONFIRM_THRESHOLD to current zoom so that when zoomed in\n    // really close we make the threshold smaller, and vice versa.\n    return distance <= LINE_CONFIRM_THRESHOLD / zoomValue;\n  }\n  return false;\n};\n\n// Draw a line from the point to the right till infiinty\n// Check how many lines of the polygon does this infinite line intersects with\n// If the number of intersections is odd, point is in the polygon\nexport const isPointInPolygon = (\n  points: Point[],\n  x: number,\n  y: number,\n): boolean => {\n  const vertices = points.length;\n\n  // There must be at least 3 vertices in polygon\n  if (vertices < 3) {\n    return false;\n  }\n  const extreme: Point = [Number.MAX_SAFE_INTEGER, y];\n  const p: Point = [x, y];\n  let count = 0;\n  for (let i = 0; i < vertices; i++) {\n    const current = points[i];\n    const next = points[(i + 1) % vertices];\n    if (doSegmentsIntersect(current, next, p, extreme)) {\n      if (orderedColinearOrientation(current, p, next) === 0) {\n        return isPointWithinBounds(current, p, next);\n      }\n      count++;\n    }\n  }\n  // true if count is off\n  return count % 2 === 1;\n};\n\n// Returns whether `q` lies inside the segment/rectangle defined by `p` and `r`.\n// This is an approximation to \"does `q` lie on a segment `pr`\" check.\nexport const isPointWithinBounds = (p: Point, q: Point, r: Point) => {\n  return (\n    q[0] <= Math.max(p[0], r[0]) &&\n    q[0] >= Math.min(p[0], r[0]) &&\n    q[1] <= Math.max(p[1], r[1]) &&\n    q[1] >= Math.min(p[1], r[1])\n  );\n};\n\n// For the ordered points p, q, r, return\n// 0 if p, q, r are colinear\n// 1 if Clockwise\n// 2 if counterclickwise\nconst orderedColinearOrientation = (p: Point, q: Point, r: Point) => {\n  const val = (q[1] - p[1]) * (r[0] - q[0]) - (q[0] - p[0]) * (r[1] - q[1]);\n  if (val === 0) {\n    return 0;\n  }\n  return val > 0 ? 1 : 2;\n};\n\n// Check is p1q1 intersects with p2q2\nconst doSegmentsIntersect = (p1: Point, q1: Point, p2: Point, q2: Point) => {\n  const o1 = orderedColinearOrientation(p1, q1, p2);\n  const o2 = orderedColinearOrientation(p1, q1, q2);\n  const o3 = orderedColinearOrientation(p2, q2, p1);\n  const o4 = orderedColinearOrientation(p2, q2, q1);\n\n  if (o1 !== o2 && o3 !== o4) {\n    return true;\n  }\n\n  // p1, q1 and p2 are colinear and p2 lies on segment p1q1\n  if (o1 === 0 && isPointWithinBounds(p1, p2, q1)) {\n    return true;\n  }\n\n  // p1, q1 and p2 are colinear and q2 lies on segment p1q1\n  if (o2 === 0 && isPointWithinBounds(p1, q2, q1)) {\n    return true;\n  }\n\n  // p2, q2 and p1 are colinear and p1 lies on segment p2q2\n  if (o3 === 0 && isPointWithinBounds(p2, p1, q2)) {\n    return true;\n  }\n\n  // p2, q2 and q1 are colinear and q1 lies on segment p2q2\n  if (o4 === 0 && isPointWithinBounds(p2, q1, q2)) {\n    return true;\n  }\n\n  return false;\n};\n\n// TODO: Rounding this point causes some shake when free drawing\nexport const getGridPoint = (\n  x: number,\n  y: number,\n  gridSize: number | null,\n): [number, number] => {\n  if (gridSize) {\n    return [\n      Math.round(x / gridSize) * gridSize,\n      Math.round(y / gridSize) * gridSize,\n    ];\n  }\n  return [x, y];\n};\n\nexport const getCornerRadius = (x: number, element: ExcalidrawElement) => {\n  if (\n    element.roundness?.type === ROUNDNESS.PROPORTIONAL_RADIUS ||\n    element.roundness?.type === ROUNDNESS.LEGACY\n  ) {\n    return x * DEFAULT_PROPORTIONAL_RADIUS;\n  }\n\n  if (element.roundness?.type === ROUNDNESS.ADAPTIVE_RADIUS) {\n    const fixedRadiusSize = element.roundness?.value ?? DEFAULT_ADAPTIVE_RADIUS;\n\n    const CUTOFF_SIZE = fixedRadiusSize / DEFAULT_PROPORTIONAL_RADIUS;\n\n    if (x <= CUTOFF_SIZE) {\n      return x * DEFAULT_PROPORTIONAL_RADIUS;\n    }\n\n    return fixedRadiusSize;\n  }\n\n  return 0;\n};\n\nexport const getControlPointsForBezierCurve = (\n  element: NonDeleted<ExcalidrawLinearElement>,\n  endPoint: Point,\n) => {\n  const shape = ShapeCache.generateElementShape(element, null);\n  if (!shape) {\n    return null;\n  }\n\n  const ops = getCurvePathOps(shape[0]);\n  let currentP: Mutable<Point> = [0, 0];\n  let index = 0;\n  let minDistance = Infinity;\n  let controlPoints: Mutable<Point>[] | null = null;\n\n  while (index < ops.length) {\n    const { op, data } = ops[index];\n    if (op === \"move\") {\n      currentP = data as unknown as Mutable<Point>;\n    }\n    if (op === \"bcurveTo\") {\n      const p0 = currentP;\n      const p1 = [data[0], data[1]] as Mutable<Point>;\n      const p2 = [data[2], data[3]] as Mutable<Point>;\n      const p3 = [data[4], data[5]] as Mutable<Point>;\n      const distance = distance2d(p3[0], p3[1], endPoint[0], endPoint[1]);\n      if (distance < minDistance) {\n        minDistance = distance;\n        controlPoints = [p0, p1, p2, p3];\n      }\n      currentP = p3;\n    }\n    index++;\n  }\n\n  return controlPoints;\n};\n\nexport const getBezierXY = (\n  p0: Point,\n  p1: Point,\n  p2: Point,\n  p3: Point,\n  t: number,\n) => {\n  const equation = (t: number, idx: number) =>\n    Math.pow(1 - t, 3) * p3[idx] +\n    3 * t * Math.pow(1 - t, 2) * p2[idx] +\n    3 * Math.pow(t, 2) * (1 - t) * p1[idx] +\n    p0[idx] * Math.pow(t, 3);\n  const tx = equation(t, 0);\n  const ty = equation(t, 1);\n  return [tx, ty];\n};\n\nexport const getPointsInBezierCurve = (\n  element: NonDeleted<ExcalidrawLinearElement>,\n  endPoint: Point,\n) => {\n  const controlPoints: Mutable<Point>[] = getControlPointsForBezierCurve(\n    element,\n    endPoint,\n  )!;\n  if (!controlPoints) {\n    return [];\n  }\n  const pointsOnCurve: Mutable<Point>[] = [];\n  let t = 1;\n  // Take 20 points on curve for better accuracy\n  while (t > 0) {\n    const point = getBezierXY(\n      controlPoints[0],\n      controlPoints[1],\n      controlPoints[2],\n      controlPoints[3],\n      t,\n    );\n    pointsOnCurve.push([point[0], point[1]]);\n    t -= 0.05;\n  }\n  if (pointsOnCurve.length) {\n    if (arePointsEqual(pointsOnCurve.at(-1)!, endPoint)) {\n      pointsOnCurve.push([endPoint[0], endPoint[1]]);\n    }\n  }\n  return pointsOnCurve;\n};\n\nexport const getBezierCurveArcLengths = (\n  element: NonDeleted<ExcalidrawLinearElement>,\n  endPoint: Point,\n) => {\n  const arcLengths: number[] = [];\n  arcLengths[0] = 0;\n  const points = getPointsInBezierCurve(element, endPoint);\n  let index = 0;\n  let distance = 0;\n  while (index < points.length - 1) {\n    const segmentDistance = distance2d(\n      points[index][0],\n      points[index][1],\n      points[index + 1][0],\n      points[index + 1][1],\n    );\n    distance += segmentDistance;\n    arcLengths.push(distance);\n    index++;\n  }\n\n  return arcLengths;\n};\n\nexport const getBezierCurveLength = (\n  element: NonDeleted<ExcalidrawLinearElement>,\n  endPoint: Point,\n) => {\n  const arcLengths = getBezierCurveArcLengths(element, endPoint);\n  return arcLengths.at(-1) as number;\n};\n\n// This maps interval to actual interval t on the curve so that when t = 0.5, its actually the point at 50% of the length\nexport const mapIntervalToBezierT = (\n  element: NonDeleted<ExcalidrawLinearElement>,\n  endPoint: Point,\n  interval: number, // The interval between 0 to 1 for which you want to find the point on the curve,\n) => {\n  const arcLengths = getBezierCurveArcLengths(element, endPoint);\n  const pointsCount = arcLengths.length - 1;\n  const curveLength = arcLengths.at(-1) as number;\n  const targetLength = interval * curveLength;\n  let low = 0;\n  let high = pointsCount;\n  let index = 0;\n  // Doing a binary search to find the largest length that is less than the target length\n  while (low < high) {\n    index = Math.floor(low + (high - low) / 2);\n    if (arcLengths[index] < targetLength) {\n      low = index + 1;\n    } else {\n      high = index;\n    }\n  }\n  if (arcLengths[index] > targetLength) {\n    index--;\n  }\n  if (arcLengths[index] === targetLength) {\n    return index / pointsCount;\n  }\n\n  return (\n    1 -\n    (index +\n      (targetLength - arcLengths[index]) /\n        (arcLengths[index + 1] - arcLengths[index])) /\n      pointsCount\n  );\n};\n\nexport const arePointsEqual = (p1: Point, p2: Point) => {\n  return p1[0] === p2[0] && p1[1] === p2[1];\n};\n\nexport const isRightAngle = (angle: number) => {\n  // if our angles were mathematically accurate, we could just check\n  //\n  //    angle % (Math.PI / 2) === 0\n  //\n  // but since we're in floating point land, we need to round.\n  //\n  // Below, after dividing by Math.PI, a multiple of 0.5 indicates a right\n  // angle, which we can check with modulo after rounding.\n  return Math.round((angle / Math.PI) * 10000) % 5000 === 0;\n};\n\n// Given two ranges, return if the two ranges overlap with each other\n// e.g. [1, 3] overlaps with [2, 4] while [1, 3] does not overlap with [4, 5]\nexport const rangesOverlap = (\n  [a0, a1]: [number, number],\n  [b0, b1]: [number, number],\n) => {\n  if (a0 <= b0) {\n    return a1 >= b0;\n  }\n\n  if (a0 >= b0) {\n    return b1 >= a0;\n  }\n\n  return false;\n};\n\n// Given two ranges,return ther intersection of the two ranges if any\n// e.g. the intersection of [1, 3] and [2, 4] is [2, 3]\nexport const rangeIntersection = (\n  rangeA: [number, number],\n  rangeB: [number, number],\n): [number, number] | null => {\n  const rangeStart = Math.max(rangeA[0], rangeB[0]);\n  const rangeEnd = Math.min(rangeA[1], rangeB[1]);\n\n  if (rangeStart <= rangeEnd) {\n    return [rangeStart, rangeEnd];\n  }\n\n  return null;\n};\n\nexport const isValueInRange = (value: number, min: number, max: number) => {\n  return value >= min && value <= max;\n};\n", "import { isIframeElement } from \"../element/typeChecks\";\nimport {\n  ExcalidrawIframeElement,\n  NonDeletedExcalidrawElement,\n} from \"../element/types\";\nimport { ElementOrToolType } from \"../types\";\n\nexport const hasBackground = (type: ElementOrToolType) =>\n  type === \"rectangle\" ||\n  type === \"iframe\" ||\n  type === \"embeddable\" ||\n  type === \"ellipse\" ||\n  type === \"diamond\" ||\n  type === \"line\" ||\n  type === \"freedraw\";\n\nexport const hasStrokeColor = (type: ElementOrToolType) =>\n  type !== \"image\" && type !== \"frame\" && type !== \"magicframe\";\n\nexport const hasStrokeWidth = (type: ElementOrToolType) =>\n  type === \"rectangle\" ||\n  type === \"iframe\" ||\n  type === \"embeddable\" ||\n  type === \"ellipse\" ||\n  type === \"diamond\" ||\n  type === \"freedraw\" ||\n  type === \"arrow\" ||\n  type === \"line\";\n\nexport const hasStrokeStyle = (type: ElementOrToolType) =>\n  type === \"rectangle\" ||\n  type === \"iframe\" ||\n  type === \"embeddable\" ||\n  type === \"ellipse\" ||\n  type === \"diamond\" ||\n  type === \"arrow\" ||\n  type === \"line\";\n\nexport const canChangeRoundness = (type: ElementOrToolType) =>\n  type === \"rectangle\" ||\n  type === \"iframe\" ||\n  type === \"embeddable\" ||\n  type === \"arrow\" ||\n  type === \"line\" ||\n  type === \"diamond\" ||\n  type === \"image\";\n\nexport const canHaveArrowheads = (type: ElementOrToolType) => type === \"arrow\";\n\nexport const getElementAtPosition = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  isAtPositionFn: (element: NonDeletedExcalidrawElement) => boolean,\n) => {\n  let hitElement = null;\n  // We need to to hit testing from front (end of the array) to back (beginning of the array)\n  // because array is ordered from lower z-index to highest and we want element z-index\n  // with higher z-index\n  for (let index = elements.length - 1; index >= 0; --index) {\n    const element = elements[index];\n    if (element.isDeleted) {\n      continue;\n    }\n    if (isAtPositionFn(element)) {\n      hitElement = element;\n      break;\n    }\n  }\n\n  return hitElement;\n};\n\nexport const getElementsAtPosition = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  isAtPositionFn: (element: NonDeletedExcalidrawElement) => boolean,\n) => {\n  const iframeLikes: ExcalidrawIframeElement[] = [];\n  // The parameter elements comes ordered from lower z-index to higher.\n  // We want to preserve that order on the returned array.\n  // Exception being embeddables which should be on top of everything else in\n  // terms of hit testing.\n  const elsAtPos = elements.filter((element) => {\n    const hit = !element.isDeleted && isAtPositionFn(element);\n    if (hit) {\n      if (isIframeElement(element)) {\n        iframeLikes.push(element);\n        return false;\n      }\n      return true;\n    }\n    return false;\n  });\n  return elsAtPos.concat(iframeLikes);\n};\n", "import type { Drawable, Options } from \"roughjs/bin/core\";\nimport type { RoughGenerator } from \"roughjs/bin/generator\";\nimport { getDiamondPoints, getArrowheadPoints } from \"../element\";\nimport type { ElementShapes } from \"./types\";\nimport type {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  ExcalidrawSelectionElement,\n  ExcalidrawLinearElement,\n  Arrowhead,\n} from \"../element/types\";\nimport { isPathALoop, getCornerRadius } from \"../math\";\nimport { generateFreeDrawShape } from \"../renderer/renderElement\";\nimport { isTransparent, assertNever } from \"../utils\";\nimport { simplify } from \"points-on-curve\";\nimport { ROUGHNESS } from \"../constants\";\nimport {\n  isEmbeddableElement,\n  isIframeElement,\n  isIframeLikeElement,\n  isLinearElement,\n} from \"../element/typeChecks\";\nimport { canChangeRoundness } from \"./comparisons\";\nimport { EmbedsValidationStatus } from \"../types\";\n\nconst getDashArrayDashed = (strokeWidth: number) => [8, 8 + strokeWidth];\n\nconst getDashArrayDotted = (strokeWidth: number) => [1.5, 6 + strokeWidth];\n\nfunction adjustRoughness(element: ExcalidrawElement): number {\n  const roughness = element.roughness;\n\n  const maxSize = Math.max(element.width, element.height);\n  const minSize = Math.min(element.width, element.height);\n\n  // don't reduce roughness if\n  if (\n    // both sides relatively big\n    (minSize >= 20 && maxSize >= 50) ||\n    // is round & both sides above 15px\n    (minSize >= 15 &&\n      !!element.roundness &&\n      canChangeRoundness(element.type)) ||\n    // relatively long linear element\n    (isLinearElement(element) && maxSize >= 50)\n  ) {\n    return roughness;\n  }\n\n  return Math.min(roughness / (maxSize < 10 ? 3 : 2), 2.5);\n}\n\nexport const generateRoughOptions = (\n  element: ExcalidrawElement,\n  continuousPath = false,\n): Options => {\n  const options: Options = {\n    seed: element.seed,\n    strokeLineDash:\n      element.strokeStyle === \"dashed\"\n        ? getDashArrayDashed(element.strokeWidth)\n        : element.strokeStyle === \"dotted\"\n        ? getDashArrayDotted(element.strokeWidth)\n        : undefined,\n    // for non-solid strokes, disable multiStroke because it tends to make\n    // dashes/dots overlay each other\n    disableMultiStroke: element.strokeStyle !== \"solid\",\n    // for non-solid strokes, increase the width a bit to make it visually\n    // similar to solid strokes, because we're also disabling multiStroke\n    strokeWidth:\n      element.strokeStyle !== \"solid\"\n        ? element.strokeWidth + 0.5\n        : element.strokeWidth,\n    // when increasing strokeWidth, we must explicitly set fillWeight and\n    // hachureGap because if not specified, roughjs uses strokeWidth to\n    // calculate them (and we don't want the fills to be modified)\n    fillWeight: element.strokeWidth / 2,\n    hachureGap: element.strokeWidth * 4,\n    roughness: adjustRoughness(element),\n    stroke: element.strokeColor,\n    preserveVertices:\n      continuousPath || element.roughness < ROUGHNESS.cartoonist,\n  };\n\n  switch (element.type) {\n    case \"rectangle\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"diamond\":\n    case \"ellipse\": {\n      options.fillStyle = element.fillStyle;\n      options.fill = isTransparent(element.backgroundColor)\n        ? undefined\n        : element.backgroundColor;\n      if (element.type === \"ellipse\") {\n        options.curveFitting = 1;\n      }\n      return options;\n    }\n    case \"line\":\n    case \"freedraw\": {\n      if (isPathALoop(element.points)) {\n        options.fillStyle = element.fillStyle;\n        options.fill =\n          element.backgroundColor === \"transparent\"\n            ? undefined\n            : element.backgroundColor;\n      }\n      return options;\n    }\n    case \"arrow\":\n      return options;\n    default: {\n      throw new Error(`Unimplemented type ${element.type}`);\n    }\n  }\n};\n\nconst modifyIframeLikeForRoughOptions = (\n  element: NonDeletedExcalidrawElement,\n  isExporting: boolean,\n  embedsValidationStatus: EmbedsValidationStatus | null,\n) => {\n  if (\n    isIframeLikeElement(element) &&\n    (isExporting ||\n      (isEmbeddableElement(element) &&\n        embedsValidationStatus?.get(element.id) !== true)) &&\n    isTransparent(element.backgroundColor) &&\n    isTransparent(element.strokeColor)\n  ) {\n    return {\n      ...element,\n      roughness: 0,\n      backgroundColor: \"#d3d3d3\",\n      fillStyle: \"solid\",\n    } as const;\n  } else if (isIframeElement(element)) {\n    return {\n      ...element,\n      strokeColor: isTransparent(element.strokeColor)\n        ? \"#000000\"\n        : element.strokeColor,\n      backgroundColor: isTransparent(element.backgroundColor)\n        ? \"#f4f4f6\"\n        : element.backgroundColor,\n    };\n  }\n  return element;\n};\n\nconst getArrowheadShapes = (\n  element: ExcalidrawLinearElement,\n  shape: Drawable[],\n  position: \"start\" | \"end\",\n  arrowhead: Arrowhead,\n  generator: RoughGenerator,\n  options: Options,\n  canvasBackgroundColor: string,\n) => {\n  const arrowheadPoints = getArrowheadPoints(\n    element,\n    shape,\n    position,\n    arrowhead,\n  );\n\n  if (arrowheadPoints === null) {\n    return [];\n  }\n\n  switch (arrowhead) {\n    case \"dot\":\n    case \"circle\":\n    case \"circle_outline\": {\n      const [x, y, diameter] = arrowheadPoints;\n\n      // always use solid stroke for arrowhead\n      delete options.strokeLineDash;\n\n      return [\n        generator.circle(x, y, diameter, {\n          ...options,\n          fill:\n            arrowhead === \"circle_outline\"\n              ? canvasBackgroundColor\n              : element.strokeColor,\n\n          fillStyle: \"solid\",\n          stroke: element.strokeColor,\n          roughness: Math.min(0.5, options.roughness || 0),\n        }),\n      ];\n    }\n    case \"triangle\":\n    case \"triangle_outline\": {\n      const [x, y, x2, y2, x3, y3] = arrowheadPoints;\n\n      // always use solid stroke for arrowhead\n      delete options.strokeLineDash;\n\n      return [\n        generator.polygon(\n          [\n            [x, y],\n            [x2, y2],\n            [x3, y3],\n            [x, y],\n          ],\n          {\n            ...options,\n            fill:\n              arrowhead === \"triangle_outline\"\n                ? canvasBackgroundColor\n                : element.strokeColor,\n            fillStyle: \"solid\",\n            roughness: Math.min(1, options.roughness || 0),\n          },\n        ),\n      ];\n    }\n    case \"diamond\":\n    case \"diamond_outline\": {\n      const [x, y, x2, y2, x3, y3, x4, y4] = arrowheadPoints;\n\n      // always use solid stroke for arrowhead\n      delete options.strokeLineDash;\n\n      return [\n        generator.polygon(\n          [\n            [x, y],\n            [x2, y2],\n            [x3, y3],\n            [x4, y4],\n            [x, y],\n          ],\n          {\n            ...options,\n            fill:\n              arrowhead === \"diamond_outline\"\n                ? canvasBackgroundColor\n                : element.strokeColor,\n            fillStyle: \"solid\",\n            roughness: Math.min(1, options.roughness || 0),\n          },\n        ),\n      ];\n    }\n    case \"bar\":\n    case \"arrow\":\n    default: {\n      const [x2, y2, x3, y3, x4, y4] = arrowheadPoints;\n\n      if (element.strokeStyle === \"dotted\") {\n        // for dotted arrows caps, reduce gap to make it more legible\n        const dash = getDashArrayDotted(element.strokeWidth - 1);\n        options.strokeLineDash = [dash[0], dash[1] - 1];\n      } else {\n        // for solid/dashed, keep solid arrow cap\n        delete options.strokeLineDash;\n      }\n      options.roughness = Math.min(1, options.roughness || 0);\n      return [\n        generator.line(x3, y3, x2, y2, options),\n        generator.line(x4, y4, x2, y2, options),\n      ];\n    }\n  }\n};\n\n/**\n * Generates the roughjs shape for given element.\n *\n * Low-level. Use `ShapeCache.generateElementShape` instead.\n *\n * @private\n */\nexport const _generateElementShape = (\n  element: Exclude<NonDeletedExcalidrawElement, ExcalidrawSelectionElement>,\n  generator: RoughGenerator,\n  {\n    isExporting,\n    canvasBackgroundColor,\n    embedsValidationStatus,\n  }: {\n    isExporting: boolean;\n    canvasBackgroundColor: string;\n    embedsValidationStatus: EmbedsValidationStatus | null;\n  },\n): Drawable | Drawable[] | null => {\n  switch (element.type) {\n    case \"rectangle\":\n    case \"iframe\":\n    case \"embeddable\": {\n      let shape: ElementShapes[typeof element.type];\n      // this is for rendering the stroke/bg of the embeddable, especially\n      // when the src url is not set\n\n      if (element.roundness) {\n        const w = element.width;\n        const h = element.height;\n        const r = getCornerRadius(Math.min(w, h), element);\n        shape = generator.path(\n          `M ${r} 0 L ${w - r} 0 Q ${w} 0, ${w} ${r} L ${w} ${\n            h - r\n          } Q ${w} ${h}, ${w - r} ${h} L ${r} ${h} Q 0 ${h}, 0 ${\n            h - r\n          } L 0 ${r} Q 0 0, ${r} 0`,\n          generateRoughOptions(\n            modifyIframeLikeForRoughOptions(\n              element,\n              isExporting,\n              embedsValidationStatus,\n            ),\n            true,\n          ),\n        );\n      } else {\n        shape = generator.rectangle(\n          0,\n          0,\n          element.width,\n          element.height,\n          generateRoughOptions(\n            modifyIframeLikeForRoughOptions(\n              element,\n              isExporting,\n              embedsValidationStatus,\n            ),\n            false,\n          ),\n        );\n      }\n      return shape;\n    }\n    case \"diamond\": {\n      let shape: ElementShapes[typeof element.type];\n\n      const [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY] =\n        getDiamondPoints(element);\n      if (element.roundness) {\n        const verticalRadius = getCornerRadius(Math.abs(topX - leftX), element);\n\n        const horizontalRadius = getCornerRadius(\n          Math.abs(rightY - topY),\n          element,\n        );\n\n        shape = generator.path(\n          `M ${topX + verticalRadius} ${topY + horizontalRadius} L ${\n            rightX - verticalRadius\n          } ${rightY - horizontalRadius}\n            C ${rightX} ${rightY}, ${rightX} ${rightY}, ${\n            rightX - verticalRadius\n          } ${rightY + horizontalRadius}\n            L ${bottomX + verticalRadius} ${bottomY - horizontalRadius}\n            C ${bottomX} ${bottomY}, ${bottomX} ${bottomY}, ${\n            bottomX - verticalRadius\n          } ${bottomY - horizontalRadius}\n            L ${leftX + verticalRadius} ${leftY + horizontalRadius}\n            C ${leftX} ${leftY}, ${leftX} ${leftY}, ${leftX + verticalRadius} ${\n            leftY - horizontalRadius\n          }\n            L ${topX - verticalRadius} ${topY + horizontalRadius}\n            C ${topX} ${topY}, ${topX} ${topY}, ${topX + verticalRadius} ${\n            topY + horizontalRadius\n          }`,\n          generateRoughOptions(element, true),\n        );\n      } else {\n        shape = generator.polygon(\n          [\n            [topX, topY],\n            [rightX, rightY],\n            [bottomX, bottomY],\n            [leftX, leftY],\n          ],\n          generateRoughOptions(element),\n        );\n      }\n      return shape;\n    }\n    case \"ellipse\": {\n      const shape: ElementShapes[typeof element.type] = generator.ellipse(\n        element.width / 2,\n        element.height / 2,\n        element.width,\n        element.height,\n        generateRoughOptions(element),\n      );\n      return shape;\n    }\n    case \"line\":\n    case \"arrow\": {\n      let shape: ElementShapes[typeof element.type];\n      const options = generateRoughOptions(element);\n\n      // points array can be empty in the beginning, so it is important to add\n      // initial position to it\n      const points = element.points.length ? element.points : [[0, 0]];\n\n      // curve is always the first element\n      // this simplifies finding the curve for an element\n      if (!element.roundness) {\n        if (options.fill) {\n          shape = [generator.polygon(points as [number, number][], options)];\n        } else {\n          shape = [generator.linearPath(points as [number, number][], options)];\n        }\n      } else {\n        shape = [generator.curve(points as [number, number][], options)];\n      }\n\n      // add lines only in arrow\n      if (element.type === \"arrow\") {\n        const { startArrowhead = null, endArrowhead = \"arrow\" } = element;\n\n        if (startArrowhead !== null) {\n          const shapes = getArrowheadShapes(\n            element,\n            shape,\n            \"start\",\n            startArrowhead,\n            generator,\n            options,\n            canvasBackgroundColor,\n          );\n          shape.push(...shapes);\n        }\n\n        if (endArrowhead !== null) {\n          if (endArrowhead === undefined) {\n            // Hey, we have an old arrow here!\n          }\n\n          const shapes = getArrowheadShapes(\n            element,\n            shape,\n            \"end\",\n            endArrowhead,\n            generator,\n            options,\n            canvasBackgroundColor,\n          );\n          shape.push(...shapes);\n        }\n      }\n      return shape;\n    }\n    case \"freedraw\": {\n      let shape: ElementShapes[typeof element.type];\n      generateFreeDrawShape(element);\n\n      if (isPathALoop(element.points)) {\n        // generate rough polygon to fill freedraw shape\n        const simplifiedPoints = simplify(element.points, 0.75);\n        shape = generator.curve(simplifiedPoints as [number, number][], {\n          ...generateRoughOptions(element),\n          stroke: \"none\",\n        });\n      } else {\n        shape = null;\n      }\n      return shape;\n    }\n    case \"frame\":\n    case \"magicframe\":\n    case \"text\":\n    case \"image\": {\n      const shape: ElementShapes[typeof element.type] = null;\n      // we return (and cache) `null` to make sure we don't regenerate\n      // `element.canvas` on rerenders\n      return shape;\n    }\n    default: {\n      assertNever(\n        element,\n        `generateElementShape(): Unimplemented type ${(element as any)?.type}`,\n      );\n      return null;\n    }\n  }\n};\n", "/**\n * This is a 2D Projective Geometric Algebra implementation.\n *\n * For wider context on geometric algebra visit see https://bivector.net.\n *\n * For this specific algebra see cheatsheet https://bivector.net/2DPGA.pdf.\n *\n * Converted from generator written by enki, with a ton of added on top.\n *\n * This library uses 8-vectors to represent points, directions and lines\n * in 2D space.\n *\n * An array `[a, b, c, d, e, f, g, h]` represents a n(8)vector:\n *   a + b*e0 + c*e1 + d*e2 + e*e01 + f*e20 + g*e12 + h*e012\n *\n * See GAPoint, GALine, GADirection and GATransform modules for common\n * operations.\n */\n\nexport type Point = NVector;\nexport type Direction = NVector;\nexport type Line = NVector;\nexport type Transform = NVector;\n\nexport const point = (x: number, y: number): Point => [0, 0, 0, 0, y, x, 1, 0];\n\nexport const origin = (): Point => [0, 0, 0, 0, 0, 0, 1, 0];\n\nexport const direction = (x: number, y: number): Direction => {\n  const norm = Math.hypot(x, y); // same as `inorm(direction(x, y))`\n  return [0, 0, 0, 0, y / norm, x / norm, 0, 0];\n};\n\nexport const offset = (x: number, y: number): Direction => [\n  0,\n  0,\n  0,\n  0,\n  y,\n  x,\n  0,\n  0,\n];\n\n/// This is the \"implementation\" part of the library\n\ntype NVector = readonly [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n];\n\n// These are labels for what each number in an nvector represents\nconst NVECTOR_BASE = [\"1\", \"e0\", \"e1\", \"e2\", \"e01\", \"e20\", \"e12\", \"e012\"];\n\n// Used to represent points, lines and transformations\nexport const nvector = (value: number = 0, index: number = 0): NVector => {\n  const result = [0, 0, 0, 0, 0, 0, 0, 0];\n  if (index < 0 || index > 7) {\n    throw new Error(`Expected \\`index\\` between 0 and 7, got \\`${index}\\``);\n  }\n  if (value !== 0) {\n    result[index] = value;\n  }\n  return result as unknown as NVector;\n};\n\nconst STRING_EPSILON = 0.000001;\nexport const toString = (nvector: NVector): string => {\n  const result = nvector\n    .map((value, index) =>\n      Math.abs(value) > STRING_EPSILON\n        ? value.toFixed(7).replace(/(\\.|0+)$/, \"\") +\n          (index > 0 ? NVECTOR_BASE[index] : \"\")\n        : null,\n    )\n    .filter((representation) => representation != null)\n    .join(\" + \");\n  return result === \"\" ? \"0\" : result;\n};\n\n// Reverse the order of the basis blades.\nexport const reverse = (nvector: NVector): NVector => [\n  nvector[0],\n  nvector[1],\n  nvector[2],\n  nvector[3],\n  -nvector[4],\n  -nvector[5],\n  -nvector[6],\n  -nvector[7],\n];\n\n// Poincare duality operator.\nexport const dual = (nvector: NVector): NVector => [\n  nvector[7],\n  nvector[6],\n  nvector[5],\n  nvector[4],\n  nvector[3],\n  nvector[2],\n  nvector[1],\n  nvector[0],\n];\n\n// Clifford Conjugation\nexport const conjugate = (nvector: NVector): NVector => [\n  nvector[0],\n  -nvector[1],\n  -nvector[2],\n  -nvector[3],\n  -nvector[4],\n  -nvector[5],\n  -nvector[6],\n  nvector[7],\n];\n\n// Main involution\nexport const involute = (nvector: NVector): NVector => [\n  nvector[0],\n  -nvector[1],\n  -nvector[2],\n  -nvector[3],\n  nvector[4],\n  nvector[5],\n  nvector[6],\n  -nvector[7],\n];\n\n// Multivector addition\nexport const add = (a: NVector, b: NVector | number): NVector => {\n  if (isNumber(b)) {\n    return [a[0] + b, a[1], a[2], a[3], a[4], a[5], a[6], a[7]];\n  }\n  return [\n    a[0] + b[0],\n    a[1] + b[1],\n    a[2] + b[2],\n    a[3] + b[3],\n    a[4] + b[4],\n    a[5] + b[5],\n    a[6] + b[6],\n    a[7] + b[7],\n  ];\n};\n\n// Multivector subtraction\nexport const sub = (a: NVector, b: NVector | number): NVector => {\n  if (isNumber(b)) {\n    return [a[0] - b, a[1], a[2], a[3], a[4], a[5], a[6], a[7]];\n  }\n  return [\n    a[0] - b[0],\n    a[1] - b[1],\n    a[2] - b[2],\n    a[3] - b[3],\n    a[4] - b[4],\n    a[5] - b[5],\n    a[6] - b[6],\n    a[7] - b[7],\n  ];\n};\n\n// The geometric product.\nexport const mul = (a: NVector, b: NVector | number): NVector => {\n  if (isNumber(b)) {\n    return [\n      a[0] * b,\n      a[1] * b,\n      a[2] * b,\n      a[3] * b,\n      a[4] * b,\n      a[5] * b,\n      a[6] * b,\n      a[7] * b,\n    ];\n  }\n  return [\n    mulScalar(a, b),\n    b[1] * a[0] +\n      b[0] * a[1] -\n      b[4] * a[2] +\n      b[5] * a[3] +\n      b[2] * a[4] -\n      b[3] * a[5] -\n      b[7] * a[6] -\n      b[6] * a[7],\n    b[2] * a[0] + b[0] * a[2] - b[6] * a[3] + b[3] * a[6],\n    b[3] * a[0] + b[6] * a[2] + b[0] * a[3] - b[2] * a[6],\n    b[4] * a[0] +\n      b[2] * a[1] -\n      b[1] * a[2] +\n      b[7] * a[3] +\n      b[0] * a[4] +\n      b[6] * a[5] -\n      b[5] * a[6] +\n      b[3] * a[7],\n    b[5] * a[0] -\n      b[3] * a[1] +\n      b[7] * a[2] +\n      b[1] * a[3] -\n      b[6] * a[4] +\n      b[0] * a[5] +\n      b[4] * a[6] +\n      b[2] * a[7],\n    b[6] * a[0] + b[3] * a[2] - b[2] * a[3] + b[0] * a[6],\n    b[7] * a[0] +\n      b[6] * a[1] +\n      b[5] * a[2] +\n      b[4] * a[3] +\n      b[3] * a[4] +\n      b[2] * a[5] +\n      b[1] * a[6] +\n      b[0] * a[7],\n  ];\n};\n\nexport const mulScalar = (a: NVector, b: NVector): number =>\n  b[0] * a[0] + b[2] * a[2] + b[3] * a[3] - b[6] * a[6];\n\n// The outer/exterior/wedge product.\nexport const meet = (a: NVector, b: NVector): NVector => [\n  b[0] * a[0],\n  b[1] * a[0] + b[0] * a[1],\n  b[2] * a[0] + b[0] * a[2],\n  b[3] * a[0] + b[0] * a[3],\n  b[4] * a[0] + b[2] * a[1] - b[1] * a[2] + b[0] * a[4],\n  b[5] * a[0] - b[3] * a[1] + b[1] * a[3] + b[0] * a[5],\n  b[6] * a[0] + b[3] * a[2] - b[2] * a[3] + b[0] * a[6],\n  b[7] * a[0] +\n    b[6] * a[1] +\n    b[5] * a[2] +\n    b[4] * a[3] +\n    b[3] * a[4] +\n    b[2] * a[5] +\n    b[1] * a[6],\n];\n\n// The regressive product.\nexport const join = (a: NVector, b: NVector): NVector => [\n  joinScalar(a, b),\n  a[1] * b[7] + a[4] * b[5] - a[5] * b[4] + a[7] * b[1],\n  a[2] * b[7] - a[4] * b[6] + a[6] * b[4] + a[7] * b[2],\n  a[3] * b[7] + a[5] * b[6] - a[6] * b[5] + a[7] * b[3],\n  a[4] * b[7] + a[7] * b[4],\n  a[5] * b[7] + a[7] * b[5],\n  a[6] * b[7] + a[7] * b[6],\n  a[7] * b[7],\n];\n\nexport const joinScalar = (a: NVector, b: NVector): number =>\n  a[0] * b[7] +\n  a[1] * b[6] +\n  a[2] * b[5] +\n  a[3] * b[4] +\n  a[4] * b[3] +\n  a[5] * b[2] +\n  a[6] * b[1] +\n  a[7] * b[0];\n\n// The inner product.\nexport const dot = (a: NVector, b: NVector): NVector => [\n  b[0] * a[0] + b[2] * a[2] + b[3] * a[3] - b[6] * a[6],\n  b[1] * a[0] +\n    b[0] * a[1] -\n    b[4] * a[2] +\n    b[5] * a[3] +\n    b[2] * a[4] -\n    b[3] * a[5] -\n    b[7] * a[6] -\n    b[6] * a[7],\n  b[2] * a[0] + b[0] * a[2] - b[6] * a[3] + b[3] * a[6],\n  b[3] * a[0] + b[6] * a[2] + b[0] * a[3] - b[2] * a[6],\n  b[4] * a[0] + b[7] * a[3] + b[0] * a[4] + b[3] * a[7],\n  b[5] * a[0] + b[7] * a[2] + b[0] * a[5] + b[2] * a[7],\n  b[6] * a[0] + b[0] * a[6],\n  b[7] * a[0] + b[0] * a[7],\n];\n\nexport const norm = (a: NVector): number =>\n  Math.sqrt(Math.abs(a[0] * a[0] - a[2] * a[2] - a[3] * a[3] + a[6] * a[6]));\n\nexport const inorm = (a: NVector): number =>\n  Math.sqrt(Math.abs(a[7] * a[7] - a[5] * a[5] - a[4] * a[4] + a[1] * a[1]));\n\nexport const normalized = (a: NVector): NVector => {\n  const n = norm(a);\n  if (n === 0 || n === 1) {\n    return a;\n  }\n  const sign = a[6] < 0 ? -1 : 1;\n  return mul(a, sign / n);\n};\n\nexport const inormalized = (a: NVector): NVector => {\n  const n = inorm(a);\n  if (n === 0 || n === 1) {\n    return a;\n  }\n  return mul(a, 1 / n);\n};\n\nconst isNumber = (a: any): a is number => typeof a === \"number\";\n\nexport const E0: NVector = nvector(1, 1);\nexport const E1: NVector = nvector(1, 2);\nexport const E2: NVector = nvector(1, 3);\nexport const E01: NVector = nvector(1, 4);\nexport const E20: NVector = nvector(1, 5);\nexport const E12: NVector = nvector(1, 6);\nexport const E012: NVector = nvector(1, 7);\nexport const I = E012;\n", "import * as GA from \"./ga\";\nimport { Line, Point } from \"./ga\";\n\n/**\n * A line is stored as an array `[0, c, a, b, 0, 0, 0, 0]` representing:\n *   c * e0 + a * e1 + b*e2\n *\n * This maps to a standard formula `a * x + b * y + c`.\n *\n * `(-b, a)` corresponds to a 2D vector parallel to the line. The lines\n * have a natural orientation, corresponding to that vector.\n *\n * The magnitude (\"norm\") of the line is `sqrt(a ^ 2 + b ^ 2)`.\n * `c / norm(line)` is the oriented distance from line to origin.\n */\n\n// Returns line with direction (x, y) through origin\nexport const vector = (x: number, y: number): Line =>\n  GA.normalized([0, 0, -y, x, 0, 0, 0, 0]);\n\n// For equation ax + by + c = 0.\nexport const equation = (a: number, b: number, c: number): Line =>\n  GA.normalized([0, c, a, b, 0, 0, 0, 0]);\n\nexport const through = (from: Point, to: Point): Line =>\n  GA.normalized(GA.join(to, from));\n\nexport const orthogonal = (line: Line, point: Point): Line =>\n  GA.dot(line, point);\n\n// Returns a line perpendicular to the line through `against` and `intersection`\n// going through `intersection`.\nexport const orthogonalThrough = (against: Point, intersection: Point): Line =>\n  orthogonal(through(against, intersection), intersection);\n\nexport const parallel = (line: Line, distance: number): Line => {\n  const result = line.slice();\n  result[1] -= distance;\n  return result as unknown as Line;\n};\n\nexport const parallelThrough = (line: Line, point: Point): Line =>\n  orthogonal(orthogonal(point, line), point);\n\nexport const distance = (line1: Line, line2: Line): number =>\n  GA.inorm(GA.meet(line1, line2));\n\nexport const angle = (line1: Line, line2: Line): number =>\n  Math.acos(GA.dot(line1, line2)[0]);\n\n// The orientation of the line\nexport const sign = (line: Line): number => Math.sign(line[1]);\n", "import * as GA from \"./ga\";\nimport * as GALine from \"./galines\";\nimport { Point, Line, join } from \"./ga\";\n\nexport const from = ([x, y]: readonly [number, number]): Point => [\n  0,\n  0,\n  0,\n  0,\n  y,\n  x,\n  1,\n  0,\n];\n\nexport const toTuple = (point: Point): [number, number] => [point[5], point[4]];\n\nexport const abs = (point: Point): Point => [\n  0,\n  0,\n  0,\n  0,\n  Math.abs(point[4]),\n  Math.abs(point[5]),\n  1,\n  0,\n];\n\nexport const intersect = (line1: Line, line2: Line): Point =>\n  GA.normalized(GA.meet(line1, line2));\n\n// Projects `point` onto the `line`.\n// The returned point is the closest point on the `line` to the `point`.\nexport const project = (point: Point, line: Line): Point =>\n  intersect(GALine.orthogonal(line, point), line);\n\nexport const distance = (point1: Point, point2: Point): number =>\n  GA.norm(join(point1, point2));\n\nexport const distanceToLine = (point: Point, line: Line): number =>\n  GA.joinScalar(point, line);\n", "import * as GA from \"./ga\";\nimport { Line, Direction, Point } from \"./ga\";\n\n/**\n * A direction is stored as an array `[0, 0, 0, 0, y, x, 0, 0]` representing\n * vector `(x, y)`.\n */\n\nexport const from = (point: Point): Point => [\n  0,\n  0,\n  0,\n  0,\n  point[4],\n  point[5],\n  0,\n  0,\n];\n\nexport const fromTo = (from: Point, to: Point): Direction =>\n  GA.inormalized([0, 0, 0, 0, to[4] - from[4], to[5] - from[5], 0, 0]);\n\nexport const orthogonal = (direction: Direction): Direction =>\n  GA.inormalized([0, 0, 0, 0, -direction[5], direction[4], 0, 0]);\n\nexport const orthogonalToLine = (line: Line): Direction => GA.mul(line, GA.I);\n", "import * as GA from \"./ga\";\nimport { Line, Direction, Point, Transform } from \"./ga\";\nimport * as GADirection from \"./gadirections\";\n\n/**\n * TODO: docs\n */\n\nexport const rotation = (pivot: Point, angle: number): Transform =>\n  GA.add(GA.mul(pivot, Math.sin(angle / 2)), Math.cos(angle / 2));\n\nexport const translation = (direction: Direction): Transform => [\n  1,\n  0,\n  0,\n  0,\n  -(0.5 * direction[5]),\n  0.5 * direction[4],\n  0,\n  0,\n];\n\nexport const translationOrthogonal = (\n  direction: Direction,\n  distance: number,\n): Transform => {\n  const scale = 0.5 * distance;\n  return [1, 0, 0, 0, scale * direction[4], scale * direction[5], 0, 0];\n};\n\nexport const translationAlong = (line: Line, distance: number): Transform =>\n  GA.add(GA.mul(GADirection.orthogonalToLine(line), 0.5 * distance), 1);\n\nexport const compose = (motor1: Transform, motor2: Transform): Transform =>\n  GA.mul(motor2, motor1);\n\nexport const apply = (\n  motor: Transform,\n  nvector: Point | Direction | Line,\n): Point | Direction | Line =>\n  GA.normalized(GA.mul(GA.mul(motor, nvector), GA.reverse(motor)));\n", "import {\n  ElementsMap,\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  PointerType,\n} from \"./types\";\n\nimport { Bounds, getElementAbsoluteCoords } from \"./bounds\";\nimport { rotate } from \"../math\";\nimport { InteractiveCanvasAppState, Zoom } from \"../types\";\nimport { isTextElement } from \".\";\nimport { isFrameLikeElement, isLinearElement } from \"./typeChecks\";\nimport { DEFAULT_TRANSFORM_HANDLE_SPACING } from \"../constants\";\n\nexport type TransformHandleDirection =\n  | \"n\"\n  | \"s\"\n  | \"w\"\n  | \"e\"\n  | \"nw\"\n  | \"ne\"\n  | \"sw\"\n  | \"se\";\n\nexport type TransformHandleType = TransformHandleDirection | \"rotation\";\n\nexport type TransformHandle = Bounds;\nexport type TransformHandles = Partial<{\n  [T in TransformHandleType]: TransformHandle;\n}>;\nexport type MaybeTransformHandleType = TransformHandleType | false;\n\nconst transformHandleSizes: { [k in PointerType]: number } = {\n  mouse: 8,\n  pen: 16,\n  touch: 28,\n};\n\nconst ROTATION_RESIZE_HANDLE_GAP = 16;\n\nexport const OMIT_SIDES_FOR_MULTIPLE_ELEMENTS = {\n  e: true,\n  s: true,\n  n: true,\n  w: true,\n};\n\nexport const OMIT_SIDES_FOR_FRAME = {\n  e: true,\n  s: true,\n  n: true,\n  w: true,\n  rotation: true,\n};\n\nconst OMIT_SIDES_FOR_TEXT_ELEMENT = {\n  e: true,\n  s: true,\n  n: true,\n  w: true,\n};\n\nconst OMIT_SIDES_FOR_LINE_SLASH = {\n  e: true,\n  s: true,\n  n: true,\n  w: true,\n  nw: true,\n  se: true,\n};\n\nconst OMIT_SIDES_FOR_LINE_BACKSLASH = {\n  e: true,\n  s: true,\n  n: true,\n  w: true,\n};\n\nconst generateTransformHandle = (\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  cx: number,\n  cy: number,\n  angle: number,\n): TransformHandle => {\n  const [xx, yy] = rotate(x + width / 2, y + height / 2, cx, cy, angle);\n  return [xx - width / 2, yy - height / 2, width, height];\n};\n\nexport const getTransformHandlesFromCoords = (\n  [x1, y1, x2, y2, cx, cy]: [number, number, number, number, number, number],\n  angle: number,\n  zoom: Zoom,\n  pointerType: PointerType,\n  omitSides: { [T in TransformHandleType]?: boolean } = {},\n  margin = 4,\n): TransformHandles => {\n  const size = transformHandleSizes[pointerType];\n  const handleWidth = size / zoom.value;\n  const handleHeight = size / zoom.value;\n\n  const handleMarginX = size / zoom.value;\n  const handleMarginY = size / zoom.value;\n\n  const width = x2 - x1;\n  const height = y2 - y1;\n  const dashedLineMargin = margin / zoom.value;\n  const centeringOffset =\n    (size - DEFAULT_TRANSFORM_HANDLE_SPACING * 2) / (2 * zoom.value);\n\n  const transformHandles: TransformHandles = {\n    nw: omitSides.nw\n      ? undefined\n      : generateTransformHandle(\n          x1 - dashedLineMargin - handleMarginX + centeringOffset,\n          y1 - dashedLineMargin - handleMarginY + centeringOffset,\n          handleWidth,\n          handleHeight,\n          cx,\n          cy,\n          angle,\n        ),\n    ne: omitSides.ne\n      ? undefined\n      : generateTransformHandle(\n          x2 + dashedLineMargin - centeringOffset,\n          y1 - dashedLineMargin - handleMarginY + centeringOffset,\n          handleWidth,\n          handleHeight,\n          cx,\n          cy,\n          angle,\n        ),\n    sw: omitSides.sw\n      ? undefined\n      : generateTransformHandle(\n          x1 - dashedLineMargin - handleMarginX + centeringOffset,\n          y2 + dashedLineMargin - centeringOffset,\n          handleWidth,\n          handleHeight,\n          cx,\n          cy,\n          angle,\n        ),\n    se: omitSides.se\n      ? undefined\n      : generateTransformHandle(\n          x2 + dashedLineMargin - centeringOffset,\n          y2 + dashedLineMargin - centeringOffset,\n          handleWidth,\n          handleHeight,\n          cx,\n          cy,\n          angle,\n        ),\n    rotation: omitSides.rotation\n      ? undefined\n      : generateTransformHandle(\n          x1 + width / 2 - handleWidth / 2,\n          y1 -\n            dashedLineMargin -\n            handleMarginY +\n            centeringOffset -\n            ROTATION_RESIZE_HANDLE_GAP / zoom.value,\n          handleWidth,\n          handleHeight,\n          cx,\n          cy,\n          angle,\n        ),\n  };\n\n  // We only want to show height handles (all cardinal directions)  above a certain size\n  // Note: we render using \"mouse\" size so we should also use \"mouse\" size for this check\n  const minimumSizeForEightHandles =\n    (5 * transformHandleSizes.mouse) / zoom.value;\n  if (Math.abs(width) > minimumSizeForEightHandles) {\n    if (!omitSides.n) {\n      transformHandles.n = generateTransformHandle(\n        x1 + width / 2 - handleWidth / 2,\n        y1 - dashedLineMargin - handleMarginY + centeringOffset,\n        handleWidth,\n        handleHeight,\n        cx,\n        cy,\n        angle,\n      );\n    }\n    if (!omitSides.s) {\n      transformHandles.s = generateTransformHandle(\n        x1 + width / 2 - handleWidth / 2,\n        y2 + dashedLineMargin - centeringOffset,\n        handleWidth,\n        handleHeight,\n        cx,\n        cy,\n        angle,\n      );\n    }\n  }\n  if (Math.abs(height) > minimumSizeForEightHandles) {\n    if (!omitSides.w) {\n      transformHandles.w = generateTransformHandle(\n        x1 - dashedLineMargin - handleMarginX + centeringOffset,\n        y1 + height / 2 - handleHeight / 2,\n        handleWidth,\n        handleHeight,\n        cx,\n        cy,\n        angle,\n      );\n    }\n    if (!omitSides.e) {\n      transformHandles.e = generateTransformHandle(\n        x2 + dashedLineMargin - centeringOffset,\n        y1 + height / 2 - handleHeight / 2,\n        handleWidth,\n        handleHeight,\n        cx,\n        cy,\n        angle,\n      );\n    }\n  }\n\n  return transformHandles;\n};\n\nexport const getTransformHandles = (\n  element: ExcalidrawElement,\n  zoom: Zoom,\n  elementsMap: ElementsMap,\n\n  pointerType: PointerType = \"mouse\",\n): TransformHandles => {\n  // so that when locked element is selected (especially when you toggle lock\n  // via keyboard) the locked element is visually distinct, indicating\n  // you can't move/resize\n  if (element.locked) {\n    return {};\n  }\n\n  let omitSides: { [T in TransformHandleType]?: boolean } = {};\n  if (element.type === \"freedraw\" || isLinearElement(element)) {\n    if (element.points.length === 2) {\n      // only check the last point because starting point is always (0,0)\n      const [, p1] = element.points;\n      if (p1[0] === 0 || p1[1] === 0) {\n        omitSides = OMIT_SIDES_FOR_LINE_BACKSLASH;\n      } else if (p1[0] > 0 && p1[1] < 0) {\n        omitSides = OMIT_SIDES_FOR_LINE_SLASH;\n      } else if (p1[0] > 0 && p1[1] > 0) {\n        omitSides = OMIT_SIDES_FOR_LINE_BACKSLASH;\n      } else if (p1[0] < 0 && p1[1] > 0) {\n        omitSides = OMIT_SIDES_FOR_LINE_SLASH;\n      } else if (p1[0] < 0 && p1[1] < 0) {\n        omitSides = OMIT_SIDES_FOR_LINE_BACKSLASH;\n      }\n    }\n  } else if (isTextElement(element)) {\n    omitSides = OMIT_SIDES_FOR_TEXT_ELEMENT;\n  } else if (isFrameLikeElement(element)) {\n    omitSides = {\n      rotation: true,\n    };\n  }\n  const dashedLineMargin = isLinearElement(element)\n    ? DEFAULT_TRANSFORM_HANDLE_SPACING + 8\n    : DEFAULT_TRANSFORM_HANDLE_SPACING;\n  return getTransformHandlesFromCoords(\n    getElementAbsoluteCoords(element, elementsMap, true),\n    element.angle,\n    zoom,\n    pointerType,\n    omitSides,\n    dashedLineMargin,\n  );\n};\n\nexport const shouldShowBoundingBox = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: InteractiveCanvasAppState,\n) => {\n  if (appState.editingLinearElement) {\n    return false;\n  }\n  if (elements.length > 1) {\n    return true;\n  }\n  const element = elements[0];\n  if (!isLinearElement(element)) {\n    return true;\n  }\n\n  return element.points.length > 2;\n};\n", "import * as GA from \"../ga\";\nimport * as GAPoint from \"../gapoints\";\nimport * as GADirection from \"../gadirections\";\nimport * as GALine from \"../galines\";\nimport * as GATransform from \"../gatransforms\";\n\nimport {\n  distance2d,\n  rotatePoint,\n  isPathALoop,\n  isPointInPolygon,\n  rotate,\n} from \"../math\";\nimport { pointsOnBezierCurves } from \"points-on-curve\";\n\nimport {\n  NonDeletedExcalidrawElement,\n  ExcalidrawBindableElement,\n  ExcalidrawElement,\n  ExcalidrawRectangleElement,\n  ExcalidrawDiamondElement,\n  ExcalidrawTextElement,\n  ExcalidrawEllipseElement,\n  NonDeleted,\n  ExcalidrawFreeDrawElement,\n  ExcalidrawImageElement,\n  ExcalidrawLinearElement,\n  StrokeRoundness,\n  ExcalidrawFrameLikeElement,\n  ExcalidrawIframeLikeElement,\n  ElementsMap,\n} from \"./types\";\n\nimport {\n  getElementAbsoluteCoords,\n  getCurvePathOps,\n  getRectangleBoxAbsoluteCoords,\n  RectangleBox,\n} from \"./bounds\";\nimport { FrameNameBoundsCache, Point } from \"../types\";\nimport { Drawable } from \"roughjs/bin/core\";\nimport { AppState } from \"../types\";\nimport {\n  hasBoundTextElement,\n  isFrameLikeElement,\n  isIframeLikeElement,\n  isImageElement,\n} from \"./typeChecks\";\nimport { isTextElement } from \".\";\nimport { isTransparent } from \"../utils\";\nimport { shouldShowBoundingBox } from \"./transformHandles\";\nimport { getBoundTextElement } from \"./textElement\";\nimport { Mutable } from \"../utility-types\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\n\nconst isElementDraggableFromInside = (\n  element: NonDeletedExcalidrawElement,\n): boolean => {\n  if (element.type === \"arrow\") {\n    return false;\n  }\n\n  if (element.type === \"freedraw\") {\n    return true;\n  }\n  const isDraggableFromInside =\n    !isTransparent(element.backgroundColor) ||\n    hasBoundTextElement(element) ||\n    isIframeLikeElement(element);\n  if (element.type === \"line\") {\n    return isDraggableFromInside && isPathALoop(element.points);\n  }\n  return isDraggableFromInside || isImageElement(element);\n};\n\nexport const hitTest = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  frameNameBoundsCache: FrameNameBoundsCache,\n  x: number,\n  y: number,\n  elementsMap: ElementsMap,\n): boolean => {\n  // How many pixels off the shape boundary we still consider a hit\n  const threshold = 10 / appState.zoom.value;\n  const point: Point = [x, y];\n\n  if (\n    isElementSelected(appState, element) &&\n    shouldShowBoundingBox([element], appState)\n  ) {\n    return isPointHittingElementBoundingBox(\n      element,\n      elementsMap,\n      point,\n      threshold,\n      frameNameBoundsCache,\n    );\n  }\n\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n  if (boundTextElement) {\n    const isHittingBoundTextElement = hitTest(\n      boundTextElement,\n      appState,\n      frameNameBoundsCache,\n      x,\n      y,\n      elementsMap,\n    );\n    if (isHittingBoundTextElement) {\n      return true;\n    }\n  }\n  return isHittingElementNotConsideringBoundingBox(\n    element,\n    appState,\n    frameNameBoundsCache,\n    point,\n    elementsMap,\n  );\n};\n\nexport const isHittingElementBoundingBoxWithoutHittingElement = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  frameNameBoundsCache: FrameNameBoundsCache,\n  x: number,\n  y: number,\n  elementsMap: ElementsMap,\n): boolean => {\n  const threshold = 10 / appState.zoom.value;\n\n  // So that bound text element hit is considered within bounding box of container even if its outside actual bounding box of element\n  // eg for linear elements text can be outside the element bounding box\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n  if (\n    boundTextElement &&\n    hitTest(boundTextElement, appState, frameNameBoundsCache, x, y, elementsMap)\n  ) {\n    return false;\n  }\n\n  return (\n    !isHittingElementNotConsideringBoundingBox(\n      element,\n      appState,\n      frameNameBoundsCache,\n      [x, y],\n      elementsMap,\n    ) &&\n    isPointHittingElementBoundingBox(\n      element,\n      elementsMap,\n      [x, y],\n      threshold,\n      frameNameBoundsCache,\n    )\n  );\n};\n\nexport const isHittingElementNotConsideringBoundingBox = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  frameNameBoundsCache: FrameNameBoundsCache | null,\n  point: Point,\n  elementsMap: ElementsMap,\n): boolean => {\n  const threshold = 10 / appState.zoom.value;\n  const check = isTextElement(element)\n    ? isStrictlyInside\n    : isElementDraggableFromInside(element)\n    ? isInsideCheck\n    : isNearCheck;\n  return hitTestPointAgainstElement({\n    element,\n    elementsMap,\n    point,\n    threshold,\n    check,\n    frameNameBoundsCache,\n  });\n};\n\nconst isElementSelected = (\n  appState: AppState,\n  element: NonDeleted<ExcalidrawElement>,\n) => appState.selectedElementIds[element.id];\n\nexport const isPointHittingElementBoundingBox = (\n  element: NonDeleted<ExcalidrawElement>,\n  elementsMap: ElementsMap,\n  [x, y]: Point,\n  threshold: number,\n  frameNameBoundsCache: FrameNameBoundsCache | null,\n) => {\n  // frames needs be checked differently so as to be able to drag it\n  // by its frame, whether it has been selected or not\n  // this logic here is not ideal\n  // TODO: refactor it later...\n  if (isFrameLikeElement(element)) {\n    return hitTestPointAgainstElement({\n      element,\n      elementsMap,\n      point: [x, y],\n      threshold,\n      check: isInsideCheck,\n      frameNameBoundsCache,\n    });\n  }\n\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const elementCenterX = (x1 + x2) / 2;\n  const elementCenterY = (y1 + y2) / 2;\n  // reverse rotate to take element's angle into account.\n  const [rotatedX, rotatedY] = rotate(\n    x,\n    y,\n    elementCenterX,\n    elementCenterY,\n    -element.angle,\n  );\n\n  return (\n    rotatedX > x1 - threshold &&\n    rotatedX < x2 + threshold &&\n    rotatedY > y1 - threshold &&\n    rotatedY < y2 + threshold\n  );\n};\n\nexport const bindingBorderTest = (\n  element: NonDeleted<ExcalidrawBindableElement>,\n  { x, y }: { x: number; y: number },\n  elementsMap: ElementsMap,\n): boolean => {\n  const threshold = maxBindingGap(element, element.width, element.height);\n  const check = isOutsideCheck;\n  const point: Point = [x, y];\n  return hitTestPointAgainstElement({\n    element,\n    elementsMap,\n    point,\n    threshold,\n    check,\n    frameNameBoundsCache: null,\n  });\n};\n\nexport const maxBindingGap = (\n  element: ExcalidrawElement,\n  elementWidth: number,\n  elementHeight: number,\n): number => {\n  // Aligns diamonds with rectangles\n  const shapeRatio = element.type === \"diamond\" ? 1 / Math.sqrt(2) : 1;\n  const smallerDimension = shapeRatio * Math.min(elementWidth, elementHeight);\n  // We make the bindable boundary bigger for bigger elements\n  return Math.max(16, Math.min(0.25 * smallerDimension, 32));\n};\n\ntype HitTestArgs = {\n  element: NonDeletedExcalidrawElement;\n  elementsMap: ElementsMap;\n  point: Point;\n  threshold: number;\n  check: (distance: number, threshold: number) => boolean;\n  frameNameBoundsCache: FrameNameBoundsCache | null;\n};\n\nconst hitTestPointAgainstElement = (args: HitTestArgs): boolean => {\n  switch (args.element.type) {\n    case \"rectangle\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"image\":\n    case \"text\":\n    case \"diamond\":\n    case \"ellipse\":\n      const distance = distanceToBindableElement(\n        args.element,\n        args.point,\n        args.elementsMap,\n      );\n      return args.check(distance, args.threshold);\n    case \"freedraw\": {\n      if (\n        !args.check(\n          distanceToRectangle(args.element, args.point, args.elementsMap),\n          args.threshold,\n        )\n      ) {\n        return false;\n      }\n\n      return hitTestFreeDrawElement(\n        args.element,\n        args.point,\n        args.threshold,\n        args.elementsMap,\n      );\n    }\n    case \"arrow\":\n    case \"line\":\n      return hitTestLinear(args);\n    case \"selection\":\n      console.warn(\n        \"This should not happen, we need to investigate why it does.\",\n      );\n      return false;\n    case \"frame\":\n    case \"magicframe\": {\n      // check distance to frame element first\n      if (\n        args.check(\n          distanceToBindableElement(args.element, args.point, args.elementsMap),\n          args.threshold,\n        )\n      ) {\n        return true;\n      }\n\n      const frameNameBounds = args.frameNameBoundsCache?.get(args.element);\n\n      if (frameNameBounds) {\n        return args.check(\n          distanceToRectangleBox(frameNameBounds, args.point),\n          args.threshold,\n        );\n      }\n      return false;\n    }\n  }\n};\n\nexport const distanceToBindableElement = (\n  element: ExcalidrawBindableElement,\n  point: Point,\n  elementsMap: ElementsMap,\n): number => {\n  switch (element.type) {\n    case \"rectangle\":\n    case \"image\":\n    case \"text\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      return distanceToRectangle(element, point, elementsMap);\n    case \"diamond\":\n      return distanceToDiamond(element, point, elementsMap);\n    case \"ellipse\":\n      return distanceToEllipse(element, point, elementsMap);\n  }\n};\n\nconst isStrictlyInside = (distance: number, threshold: number): boolean => {\n  return distance < 0;\n};\n\nconst isInsideCheck = (distance: number, threshold: number): boolean => {\n  return distance < threshold;\n};\n\nconst isNearCheck = (distance: number, threshold: number): boolean => {\n  return Math.abs(distance) < threshold;\n};\n\nconst isOutsideCheck = (distance: number, threshold: number): boolean => {\n  return 0 <= distance && distance < threshold;\n};\n\nconst distanceToRectangle = (\n  element:\n    | ExcalidrawRectangleElement\n    | ExcalidrawTextElement\n    | ExcalidrawFreeDrawElement\n    | ExcalidrawImageElement\n    | ExcalidrawIframeLikeElement\n    | ExcalidrawFrameLikeElement,\n  point: Point,\n  elementsMap: ElementsMap,\n): number => {\n  const [, pointRel, hwidth, hheight] = pointRelativeToElement(\n    element,\n    point,\n    elementsMap,\n  );\n  return Math.max(\n    GAPoint.distanceToLine(pointRel, GALine.equation(0, 1, -hheight)),\n    GAPoint.distanceToLine(pointRel, GALine.equation(1, 0, -hwidth)),\n  );\n};\n\nconst distanceToRectangleBox = (box: RectangleBox, point: Point): number => {\n  const [, pointRel, hwidth, hheight] = pointRelativeToDivElement(point, box);\n  return Math.max(\n    GAPoint.distanceToLine(pointRel, GALine.equation(0, 1, -hheight)),\n    GAPoint.distanceToLine(pointRel, GALine.equation(1, 0, -hwidth)),\n  );\n};\n\nconst distanceToDiamond = (\n  element: ExcalidrawDiamondElement,\n  point: Point,\n  elementsMap: ElementsMap,\n): number => {\n  const [, pointRel, hwidth, hheight] = pointRelativeToElement(\n    element,\n    point,\n    elementsMap,\n  );\n  const side = GALine.equation(hheight, hwidth, -hheight * hwidth);\n  return GAPoint.distanceToLine(pointRel, side);\n};\n\nconst distanceToEllipse = (\n  element: ExcalidrawEllipseElement,\n  point: Point,\n  elementsMap: ElementsMap,\n): number => {\n  const [pointRel, tangent] = ellipseParamsForTest(element, point, elementsMap);\n  return -GALine.sign(tangent) * GAPoint.distanceToLine(pointRel, tangent);\n};\n\nconst ellipseParamsForTest = (\n  element: ExcalidrawEllipseElement,\n  point: Point,\n  elementsMap: ElementsMap,\n): [GA.Point, GA.Line] => {\n  const [, pointRel, hwidth, hheight] = pointRelativeToElement(\n    element,\n    point,\n    elementsMap,\n  );\n  const [px, py] = GAPoint.toTuple(pointRel);\n\n  // We're working in positive quadrant, so start with `t = 45deg`, `tx=cos(t)`\n  let tx = 0.707;\n  let ty = 0.707;\n\n  const a = hwidth;\n  const b = hheight;\n\n  // This is a numerical method to find the params tx, ty at which\n  // the ellipse has the closest point to the given point\n  [0, 1, 2, 3].forEach((_) => {\n    const xx = a * tx;\n    const yy = b * ty;\n\n    const ex = ((a * a - b * b) * tx ** 3) / a;\n    const ey = ((b * b - a * a) * ty ** 3) / b;\n\n    const rx = xx - ex;\n    const ry = yy - ey;\n\n    const qx = px - ex;\n    const qy = py - ey;\n\n    const r = Math.hypot(ry, rx);\n    const q = Math.hypot(qy, qx);\n\n    tx = Math.min(1, Math.max(0, ((qx * r) / q + ex) / a));\n    ty = Math.min(1, Math.max(0, ((qy * r) / q + ey) / b));\n    const t = Math.hypot(ty, tx);\n    tx /= t;\n    ty /= t;\n  });\n\n  const closestPoint = GA.point(a * tx, b * ty);\n\n  const tangent = GALine.orthogonalThrough(pointRel, closestPoint);\n  return [pointRel, tangent];\n};\n\nconst hitTestFreeDrawElement = (\n  element: ExcalidrawFreeDrawElement,\n  point: Point,\n  threshold: number,\n  elementsMap: ElementsMap,\n): boolean => {\n  // Check point-distance-to-line-segment for every segment in the\n  // element's points (its input points, not its outline points).\n  // This is... okay? It's plenty fast, but the GA library may\n  // have a faster option.\n\n  let x: number;\n  let y: number;\n\n  if (element.angle === 0) {\n    x = point[0] - element.x;\n    y = point[1] - element.y;\n  } else {\n    // Counter-rotate the point around center before testing\n    const [minX, minY, maxX, maxY] = getElementAbsoluteCoords(\n      element,\n      elementsMap,\n    );\n    const rotatedPoint = rotatePoint(\n      point,\n      [minX + (maxX - minX) / 2, minY + (maxY - minY) / 2],\n      -element.angle,\n    );\n    x = rotatedPoint[0] - element.x;\n    y = rotatedPoint[1] - element.y;\n  }\n\n  let [A, B] = element.points;\n  let P: readonly [number, number];\n\n  // For freedraw dots\n  if (\n    distance2d(A[0], A[1], x, y) < threshold ||\n    distance2d(B[0], B[1], x, y) < threshold\n  ) {\n    return true;\n  }\n\n  // For freedraw lines\n  for (let i = 0; i < element.points.length; i++) {\n    const delta = [B[0] - A[0], B[1] - A[1]];\n    const length = Math.hypot(delta[1], delta[0]);\n\n    const U = [delta[0] / length, delta[1] / length];\n    const C = [x - A[0], y - A[1]];\n    const d = (C[0] * U[0] + C[1] * U[1]) / Math.hypot(U[1], U[0]);\n    P = [A[0] + U[0] * d, A[1] + U[1] * d];\n\n    const da = distance2d(P[0], P[1], A[0], A[1]);\n    const db = distance2d(P[0], P[1], B[0], B[1]);\n\n    P = db < da && da > length ? B : da < db && db > length ? A : P;\n\n    if (Math.hypot(y - P[1], x - P[0]) < threshold) {\n      return true;\n    }\n\n    A = B;\n    B = element.points[i + 1];\n  }\n\n  const shape = ShapeCache.get(element);\n\n  // for filled freedraw shapes, support\n  // selecting from inside\n  if (shape && shape.sets.length) {\n    return element.fillStyle === \"solid\"\n      ? hitTestCurveInside(shape, x, y, \"round\")\n      : hitTestRoughShape(shape, x, y, threshold);\n  }\n\n  return false;\n};\n\nconst hitTestLinear = (args: HitTestArgs): boolean => {\n  const { element, threshold } = args;\n  if (!ShapeCache.get(element)) {\n    return false;\n  }\n\n  const [point, pointAbs, hwidth, hheight] = pointRelativeToElement(\n    args.element,\n    args.point,\n    args.elementsMap,\n  );\n  const side1 = GALine.equation(0, 1, -hheight);\n  const side2 = GALine.equation(1, 0, -hwidth);\n  if (\n    !isInsideCheck(GAPoint.distanceToLine(pointAbs, side1), threshold) ||\n    !isInsideCheck(GAPoint.distanceToLine(pointAbs, side2), threshold)\n  ) {\n    return false;\n  }\n  const [relX, relY] = GAPoint.toTuple(point);\n\n  const shape = ShapeCache.get(element as ExcalidrawLinearElement);\n\n  if (!shape) {\n    return false;\n  }\n\n  if (args.check === isInsideCheck) {\n    const hit = shape.some((subshape) =>\n      hitTestCurveInside(\n        subshape,\n        relX,\n        relY,\n        element.roundness ? \"round\" : \"sharp\",\n      ),\n    );\n    if (hit) {\n      return true;\n    }\n  }\n\n  // hit test all \"subshapes\" of the linear element\n  return shape.some((subshape) =>\n    hitTestRoughShape(subshape, relX, relY, threshold),\n  );\n};\n\n// Returns:\n//   1. the point relative to the elements (x, y) position\n//   2. the point relative to the element's center with positive (x, y)\n//   3. half element width\n//   4. half element height\n//\n// Note that for linear elements the (x, y) position is not at the\n// top right corner of their boundary.\n//\n// Rectangles, diamonds and ellipses are symmetrical over axes,\n// and other elements have a rectangular boundary,\n// so we only need to perform hit tests for the positive quadrant.\nconst pointRelativeToElement = (\n  element: ExcalidrawElement,\n  pointTuple: Point,\n  elementsMap: ElementsMap,\n): [GA.Point, GA.Point, number, number] => {\n  const point = GAPoint.from(pointTuple);\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const center = coordsCenter(x1, y1, x2, y2);\n  // GA has angle orientation opposite to `rotate`\n  const rotate = GATransform.rotation(center, element.angle);\n  const pointRotated = GATransform.apply(rotate, point);\n  const pointRelToCenter = GA.sub(pointRotated, GADirection.from(center));\n  const pointRelToCenterAbs = GAPoint.abs(pointRelToCenter);\n  const elementPos = GA.offset(element.x, element.y);\n  const pointRelToPos = GA.sub(pointRotated, elementPos);\n  const halfWidth = (x2 - x1) / 2;\n  const halfHeight = (y2 - y1) / 2;\n  return [pointRelToPos, pointRelToCenterAbs, halfWidth, halfHeight];\n};\n\nconst pointRelativeToDivElement = (\n  pointTuple: Point,\n  rectangle: RectangleBox,\n): [GA.Point, GA.Point, number, number] => {\n  const point = GAPoint.from(pointTuple);\n  const [x1, y1, x2, y2] = getRectangleBoxAbsoluteCoords(rectangle);\n  const center = coordsCenter(x1, y1, x2, y2);\n  const rotate = GATransform.rotation(center, rectangle.angle);\n  const pointRotated = GATransform.apply(rotate, point);\n  const pointRelToCenter = GA.sub(pointRotated, GADirection.from(center));\n  const pointRelToCenterAbs = GAPoint.abs(pointRelToCenter);\n  const elementPos = GA.offset(rectangle.x, rectangle.y);\n  const pointRelToPos = GA.sub(pointRotated, elementPos);\n  const halfWidth = (x2 - x1) / 2;\n  const halfHeight = (y2 - y1) / 2;\n  return [pointRelToPos, pointRelToCenterAbs, halfWidth, halfHeight];\n};\n\n// Returns point in absolute coordinates\nexport const pointInAbsoluteCoords = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n  // Point relative to the element position\n  point: Point,\n): Point => {\n  const [x, y] = point;\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const cx = (x2 - x1) / 2;\n  const cy = (y2 - y1) / 2;\n  const [rotatedX, rotatedY] = rotate(x, y, cx, cy, element.angle);\n  return [element.x + rotatedX, element.y + rotatedY];\n};\n\nconst relativizationToElementCenter = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n): GA.Transform => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const center = coordsCenter(x1, y1, x2, y2);\n  // GA has angle orientation opposite to `rotate`\n  const rotate = GATransform.rotation(center, element.angle);\n  const translate = GA.reverse(\n    GATransform.translation(GADirection.from(center)),\n  );\n  return GATransform.compose(rotate, translate);\n};\n\nconst coordsCenter = (\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n): GA.Point => {\n  return GA.point((x1 + x2) / 2, (y1 + y2) / 2);\n};\n\n// The focus distance is the oriented ratio between the size of\n// the `element` and the \"focus image\" of the element on which\n// all focus points lie, so it's a number between -1 and 1.\n// The line going through `a` and `b` is a tangent to the \"focus image\"\n// of the element.\nexport const determineFocusDistance = (\n  element: ExcalidrawBindableElement,\n\n  // Point on the line, in absolute coordinates\n  a: Point,\n  // Another point on the line, in absolute coordinates (closer to element)\n  b: Point,\n  elementsMap: ElementsMap,\n): number => {\n  const relateToCenter = relativizationToElementCenter(element, elementsMap);\n  const aRel = GATransform.apply(relateToCenter, GAPoint.from(a));\n  const bRel = GATransform.apply(relateToCenter, GAPoint.from(b));\n  const line = GALine.through(aRel, bRel);\n  const q = element.height / element.width;\n  const hwidth = element.width / 2;\n  const hheight = element.height / 2;\n  const n = line[2];\n  const m = line[3];\n  const c = line[1];\n  const mabs = Math.abs(m);\n  const nabs = Math.abs(n);\n  let ret;\n  switch (element.type) {\n    case \"rectangle\":\n    case \"image\":\n    case \"text\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      ret = c / (hwidth * (nabs + q * mabs));\n      break;\n    case \"diamond\":\n      ret = mabs < nabs ? c / (nabs * hwidth) : c / (mabs * hheight);\n      break;\n    case \"ellipse\":\n      ret = c / (hwidth * Math.sqrt(n ** 2 + q ** 2 * m ** 2));\n      break;\n  }\n  return ret || 0;\n};\n\nexport const determineFocusPoint = (\n  element: ExcalidrawBindableElement,\n  // The oriented, relative distance from the center of `element` of the\n  // returned focusPoint\n  focus: number,\n  adjecentPoint: Point,\n  elementsMap: ElementsMap,\n): Point => {\n  if (focus === 0) {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const center = coordsCenter(x1, y1, x2, y2);\n    return GAPoint.toTuple(center);\n  }\n  const relateToCenter = relativizationToElementCenter(element, elementsMap);\n  const adjecentPointRel = GATransform.apply(\n    relateToCenter,\n    GAPoint.from(adjecentPoint),\n  );\n  const reverseRelateToCenter = GA.reverse(relateToCenter);\n  let point;\n  switch (element.type) {\n    case \"rectangle\":\n    case \"image\":\n    case \"text\":\n    case \"diamond\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      point = findFocusPointForRectangulars(element, focus, adjecentPointRel);\n      break;\n    case \"ellipse\":\n      point = findFocusPointForEllipse(element, focus, adjecentPointRel);\n      break;\n  }\n  return GAPoint.toTuple(GATransform.apply(reverseRelateToCenter, point));\n};\n\n// Returns 2 or 0 intersection points between line going through `a` and `b`\n// and the `element`, in ascending order of distance from `a`.\nexport const intersectElementWithLine = (\n  element: ExcalidrawBindableElement,\n\n  // Point on the line, in absolute coordinates\n  a: Point,\n  // Another point on the line, in absolute coordinates\n  b: Point,\n  // If given, the element is inflated by this value\n  gap: number = 0,\n  elementsMap: ElementsMap,\n): Point[] => {\n  const relateToCenter = relativizationToElementCenter(element, elementsMap);\n  const aRel = GATransform.apply(relateToCenter, GAPoint.from(a));\n  const bRel = GATransform.apply(relateToCenter, GAPoint.from(b));\n  const line = GALine.through(aRel, bRel);\n  const reverseRelateToCenter = GA.reverse(relateToCenter);\n  const intersections = getSortedElementLineIntersections(\n    element,\n    line,\n    aRel,\n    gap,\n  );\n  return intersections.map((point) =>\n    GAPoint.toTuple(GATransform.apply(reverseRelateToCenter, point)),\n  );\n};\n\nconst getSortedElementLineIntersections = (\n  element: ExcalidrawBindableElement,\n  // Relative to element center\n  line: GA.Line,\n  // Relative to element center\n  nearPoint: GA.Point,\n  gap: number = 0,\n): GA.Point[] => {\n  let intersections: GA.Point[];\n  switch (element.type) {\n    case \"rectangle\":\n    case \"image\":\n    case \"text\":\n    case \"diamond\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      const corners = getCorners(element);\n      intersections = corners\n        .flatMap((point, i) => {\n          const edge: [GA.Point, GA.Point] = [point, corners[(i + 1) % 4]];\n          return intersectSegment(line, offsetSegment(edge, gap));\n        })\n        .concat(\n          corners.flatMap((point) => getCircleIntersections(point, gap, line)),\n        );\n      break;\n    case \"ellipse\":\n      intersections = getEllipseIntersections(element, gap, line);\n      break;\n  }\n  if (intersections.length < 2) {\n    // Ignore the \"edge\" case of only intersecting with a single corner\n    return [];\n  }\n  const sortedIntersections = intersections.sort(\n    (i1, i2) =>\n      GAPoint.distance(i1, nearPoint) - GAPoint.distance(i2, nearPoint),\n  );\n  return [\n    sortedIntersections[0],\n    sortedIntersections[sortedIntersections.length - 1],\n  ];\n};\n\nconst getCorners = (\n  element:\n    | ExcalidrawRectangleElement\n    | ExcalidrawImageElement\n    | ExcalidrawDiamondElement\n    | ExcalidrawTextElement\n    | ExcalidrawIframeLikeElement\n    | ExcalidrawFrameLikeElement,\n  scale: number = 1,\n): GA.Point[] => {\n  const hx = (scale * element.width) / 2;\n  const hy = (scale * element.height) / 2;\n  switch (element.type) {\n    case \"rectangle\":\n    case \"image\":\n    case \"text\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      return [\n        GA.point(hx, hy),\n        GA.point(hx, -hy),\n        GA.point(-hx, -hy),\n        GA.point(-hx, hy),\n      ];\n    case \"diamond\":\n      return [\n        GA.point(0, hy),\n        GA.point(hx, 0),\n        GA.point(0, -hy),\n        GA.point(-hx, 0),\n      ];\n  }\n};\n\n// Returns intersection of `line` with `segment`, with `segment` moved by\n// `gap` in its polar direction.\n// If intersection coincides with second segment point returns empty array.\nconst intersectSegment = (\n  line: GA.Line,\n  segment: [GA.Point, GA.Point],\n): GA.Point[] => {\n  const [a, b] = segment;\n  const aDist = GAPoint.distanceToLine(a, line);\n  const bDist = GAPoint.distanceToLine(b, line);\n  if (aDist * bDist >= 0) {\n    // The intersection is outside segment `(a, b)`\n    return [];\n  }\n  return [GAPoint.intersect(line, GALine.through(a, b))];\n};\n\nconst offsetSegment = (\n  segment: [GA.Point, GA.Point],\n  distance: number,\n): [GA.Point, GA.Point] => {\n  const [a, b] = segment;\n  const offset = GATransform.translationOrthogonal(\n    GADirection.fromTo(a, b),\n    distance,\n  );\n  return [GATransform.apply(offset, a), GATransform.apply(offset, b)];\n};\n\nconst getEllipseIntersections = (\n  element: ExcalidrawEllipseElement,\n  gap: number,\n  line: GA.Line,\n): GA.Point[] => {\n  const a = element.width / 2 + gap;\n  const b = element.height / 2 + gap;\n  const m = line[2];\n  const n = line[3];\n  const c = line[1];\n  const squares = a * a * m * m + b * b * n * n;\n  const discr = squares - c * c;\n  if (squares === 0 || discr <= 0) {\n    return [];\n  }\n  const discrRoot = Math.sqrt(discr);\n  const xn = -a * a * m * c;\n  const yn = -b * b * n * c;\n  return [\n    GA.point(\n      (xn + a * b * n * discrRoot) / squares,\n      (yn - a * b * m * discrRoot) / squares,\n    ),\n    GA.point(\n      (xn - a * b * n * discrRoot) / squares,\n      (yn + a * b * m * discrRoot) / squares,\n    ),\n  ];\n};\n\nexport const getCircleIntersections = (\n  center: GA.Point,\n  radius: number,\n  line: GA.Line,\n): GA.Point[] => {\n  if (radius === 0) {\n    return GAPoint.distanceToLine(line, center) === 0 ? [center] : [];\n  }\n  const m = line[2];\n  const n = line[3];\n  const c = line[1];\n  const [a, b] = GAPoint.toTuple(center);\n  const r = radius;\n  const squares = m * m + n * n;\n  const discr = r * r * squares - (m * a + n * b + c) ** 2;\n  if (squares === 0 || discr <= 0) {\n    return [];\n  }\n  const discrRoot = Math.sqrt(discr);\n  const xn = a * n * n - b * m * n - m * c;\n  const yn = b * m * m - a * m * n - n * c;\n\n  return [\n    GA.point((xn + n * discrRoot) / squares, (yn - m * discrRoot) / squares),\n    GA.point((xn - n * discrRoot) / squares, (yn + m * discrRoot) / squares),\n  ];\n};\n\n// The focus point is the tangent point of the \"focus image\" of the\n// `element`, where the tangent goes through `point`.\nexport const findFocusPointForEllipse = (\n  ellipse: ExcalidrawEllipseElement,\n  // Between -1 and 1 (not 0) the relative size of the \"focus image\" of\n  // the element on which the focus point lies\n  relativeDistance: number,\n  // The point for which we're trying to find the focus point, relative\n  // to the ellipse center.\n  point: GA.Point,\n): GA.Point => {\n  const relativeDistanceAbs = Math.abs(relativeDistance);\n  const a = (ellipse.width * relativeDistanceAbs) / 2;\n  const b = (ellipse.height * relativeDistanceAbs) / 2;\n\n  const orientation = Math.sign(relativeDistance);\n  const [px, pyo] = GAPoint.toTuple(point);\n\n  // The calculation below can't handle py = 0\n  const py = pyo === 0 ? 0.0001 : pyo;\n\n  const squares = px ** 2 * b ** 2 + py ** 2 * a ** 2;\n  // Tangent mx + ny + 1 = 0\n  const m =\n    (-px * b ** 2 +\n      orientation * py * Math.sqrt(Math.max(0, squares - a ** 2 * b ** 2))) /\n    squares;\n\n  let n = (-m * px - 1) / py;\n\n  if (n === 0) {\n    // if zero {-0, 0}, fall back to a same-sign value in the similar range\n    n = (Object.is(n, -0) ? -1 : 1) * 0.01;\n  }\n\n  const x = -(a ** 2 * m) / (n ** 2 * b ** 2 + m ** 2 * a ** 2);\n  return GA.point(x, (-m * x - 1) / n);\n};\n\nexport const findFocusPointForRectangulars = (\n  element:\n    | ExcalidrawRectangleElement\n    | ExcalidrawImageElement\n    | ExcalidrawDiamondElement\n    | ExcalidrawTextElement\n    | ExcalidrawIframeLikeElement\n    | ExcalidrawFrameLikeElement,\n  // Between -1 and 1 for how far away should the focus point be relative\n  // to the size of the element. Sign determines orientation.\n  relativeDistance: number,\n  // The point for which we're trying to find the focus point, relative\n  // to the element center.\n  point: GA.Point,\n): GA.Point => {\n  const relativeDistanceAbs = Math.abs(relativeDistance);\n  const orientation = Math.sign(relativeDistance);\n  const corners = getCorners(element, relativeDistanceAbs);\n\n  let maxDistance = 0;\n  let tangentPoint: null | GA.Point = null;\n  corners.forEach((corner) => {\n    const distance = orientation * GALine.through(point, corner)[1];\n    if (distance > maxDistance) {\n      maxDistance = distance;\n      tangentPoint = corner;\n    }\n  });\n  return tangentPoint!;\n};\n\nconst pointInBezierEquation = (\n  p0: Point,\n  p1: Point,\n  p2: Point,\n  p3: Point,\n  [mx, my]: Point,\n  lineThreshold: number,\n) => {\n  // B(t) = p0 * (1-t)^3 + 3p1 * t * (1-t)^2 + 3p2 * t^2 * (1-t) + p3 * t^3\n  const equation = (t: number, idx: number) =>\n    Math.pow(1 - t, 3) * p3[idx] +\n    3 * t * Math.pow(1 - t, 2) * p2[idx] +\n    3 * Math.pow(t, 2) * (1 - t) * p1[idx] +\n    p0[idx] * Math.pow(t, 3);\n\n  // go through t in increments of 0.01\n  let t = 0;\n  while (t <= 1.0) {\n    const tx = equation(t, 0);\n    const ty = equation(t, 1);\n\n    const diff = Math.sqrt(Math.pow(tx - mx, 2) + Math.pow(ty - my, 2));\n\n    if (diff < lineThreshold) {\n      return true;\n    }\n\n    t += 0.01;\n  }\n\n  return false;\n};\n\nconst hitTestCurveInside = (\n  drawable: Drawable,\n  x: number,\n  y: number,\n  roundness: StrokeRoundness,\n) => {\n  const ops = getCurvePathOps(drawable);\n  const points: Mutable<Point>[] = [];\n  let odd = false; // select one line out of double lines\n  for (const operation of ops) {\n    if (operation.op === \"move\") {\n      odd = !odd;\n      if (odd) {\n        points.push([operation.data[0], operation.data[1]]);\n      }\n    } else if (operation.op === \"bcurveTo\") {\n      if (odd) {\n        points.push([operation.data[0], operation.data[1]]);\n        points.push([operation.data[2], operation.data[3]]);\n        points.push([operation.data[4], operation.data[5]]);\n      }\n    } else if (operation.op === \"lineTo\") {\n      if (odd) {\n        points.push([operation.data[0], operation.data[1]]);\n      }\n    }\n  }\n  if (points.length >= 4) {\n    if (roundness === \"sharp\") {\n      return isPointInPolygon(points, x, y);\n    }\n    const polygonPoints = pointsOnBezierCurves(points, 10, 5);\n    return isPointInPolygon(polygonPoints, x, y);\n  }\n  return false;\n};\n\nconst hitTestRoughShape = (\n  drawable: Drawable,\n  x: number,\n  y: number,\n  lineThreshold: number,\n) => {\n  // read operations from first opSet\n  const ops = getCurvePathOps(drawable);\n\n  // set start position as (0,0) just in case\n  // move operation does not exist (unlikely but it is worth safekeeping it)\n  let currentP: Point = [0, 0];\n\n  return ops.some(({ op, data }, idx) => {\n    // There are only four operation types:\n    // move, bcurveTo, lineTo, and curveTo\n    if (op === \"move\") {\n      // change starting point\n      currentP = data as unknown as Point;\n      // move operation does not draw anything; so, it always\n      // returns false\n    } else if (op === \"bcurveTo\") {\n      // create points from bezier curve\n      // bezier curve stores data as a flattened array of three positions\n      // [x1, y1, x2, y2, x3, y3]\n      const p1 = [data[0], data[1]] as Point;\n      const p2 = [data[2], data[3]] as Point;\n      const p3 = [data[4], data[5]] as Point;\n\n      const p0 = currentP;\n      currentP = p3;\n\n      // check if points are on the curve\n      // cubic bezier curves require four parameters\n      // the first parameter is the last stored position (p0)\n      const retVal = pointInBezierEquation(\n        p0,\n        p1,\n        p2,\n        p3,\n        [x, y],\n        lineThreshold,\n      );\n\n      // set end point of bezier curve as the new starting point for\n      // upcoming operations as each operation is based on the last drawn\n      // position of the previous operation\n      return retVal;\n    } else if (op === \"lineTo\") {\n      return hitTestCurveInside(drawable, x, y, \"sharp\");\n    } else if (op === \"qcurveTo\") {\n      // TODO: Implement this\n      console.warn(\"qcurveTo is not implemented yet\");\n    }\n\n    return false;\n  });\n};\n", "import { isDarwin } from \"./constants\";\n\nexport const CODES = {\n  EQUAL: \"Equal\",\n  MINUS: \"Minus\",\n  NUM_ADD: \"NumpadAdd\",\n  NUM_SUBTRACT: \"NumpadSubtract\",\n  NUM_ZERO: \"Numpad0\",\n  BRACKET_RIGHT: \"BracketRight\",\n  BRACKET_LEFT: \"BracketLeft\",\n  ONE: \"Digit1\",\n  TWO: \"Digit2\",\n  THREE: \"Digit3\",\n  NINE: \"Digit9\",\n  QUOTE: \"Quote\",\n  ZERO: \"Digit0\",\n  SLASH: \"Slash\",\n  C: \"KeyC\",\n  D: \"KeyD\",\n  H: \"KeyH\",\n  V: \"KeyV\",\n  Z: \"KeyZ\",\n  R: \"KeyR\",\n  S: \"KeyS\",\n} as const;\n\nexport const KEYS = {\n  ARROW_DOWN: \"ArrowDown\",\n  ARROW_LEFT: \"ArrowLeft\",\n  ARROW_RIGHT: \"ArrowRight\",\n  ARROW_UP: \"ArrowUp\",\n  PAGE_UP: \"PageUp\",\n  PAGE_DOWN: \"PageDown\",\n  BACKSPACE: \"Backspace\",\n  ALT: \"Alt\",\n  CTRL_OR_CMD: isDarwin ? \"metaKey\" : \"ctrlKey\",\n  DELETE: \"Delete\",\n  ENTER: \"Enter\",\n  ESCAPE: \"Escape\",\n  QUESTION_MARK: \"?\",\n  SPACE: \" \",\n  TAB: \"Tab\",\n  CHEVRON_LEFT: \"<\",\n  CHEVRON_RIGHT: \">\",\n  PERIOD: \".\",\n  COMMA: \",\",\n  SUBTRACT: \"-\",\n\n  A: \"a\",\n  C: \"c\",\n  D: \"d\",\n  E: \"e\",\n  F: \"f\",\n  G: \"g\",\n  H: \"h\",\n  I: \"i\",\n  L: \"l\",\n  O: \"o\",\n  P: \"p\",\n  Q: \"q\",\n  R: \"r\",\n  S: \"s\",\n  T: \"t\",\n  V: \"v\",\n  X: \"x\",\n  Y: \"y\",\n  Z: \"z\",\n  K: \"k\",\n  W: \"w\",\n\n  0: \"0\",\n  1: \"1\",\n  2: \"2\",\n  3: \"3\",\n  4: \"4\",\n  5: \"5\",\n  6: \"6\",\n  7: \"7\",\n  8: \"8\",\n  9: \"9\",\n} as const;\n\nexport type Key = keyof typeof KEYS;\n\nexport const isArrowKey = (key: string) =>\n  key === KEYS.ARROW_LEFT ||\n  key === KEYS.ARROW_RIGHT ||\n  key === KEYS.ARROW_DOWN ||\n  key === KEYS.ARROW_UP;\n\nexport const shouldResizeFromCenter = (event: MouseEvent | KeyboardEvent) =>\n  event.altKey;\n\nexport const shouldMaintainAspectRatio = (event: MouseEvent | KeyboardEvent) =>\n  event.shiftKey;\n\nexport const shouldRotateWithDiscreteAngle = (\n  event: MouseEvent | KeyboardEvent | React.PointerEvent<HTMLCanvasElement>,\n) => event.shiftKey;\n", "import {\n  ExcalidrawLinearElement,\n  ExcalidrawBindableElement,\n  NonDeleted,\n  NonDeletedExcalidrawElement,\n  PointBinding,\n  ExcalidrawElement,\n  ElementsMap,\n  NonDeletedSceneElementsMap,\n} from \"./types\";\nimport { getElementAtPosition } from \"../scene\";\nimport { AppState } from \"../types\";\nimport {\n  isBindableElement,\n  isBindingElement,\n  isLinearElement,\n} from \"./typeChecks\";\nimport {\n  bindingBorderTest,\n  distanceToBindableElement,\n  maxBindingGap,\n  determineFocusDistance,\n  intersectElementWithLine,\n  determineFocusPoint,\n} from \"./collision\";\nimport { mutateElement } from \"./mutateElement\";\nimport Scene from \"../scene/Scene\";\nimport { LinearElementEditor } from \"./linearElementEditor\";\nimport { arrayToMap, tupleToCoors } from \"../utils\";\nimport { KEYS } from \"../keys\";\nimport { getBoundTextElement, handleBindTextResize } from \"./textElement\";\n\nexport type SuggestedBinding =\n  | NonDeleted<ExcalidrawBindableElement>\n  | SuggestedPointBinding;\n\nexport type SuggestedPointBinding = [\n  NonDeleted<ExcalidrawLinearElement>,\n  \"start\" | \"end\" | \"both\",\n  NonDeleted<ExcalidrawBindableElement>,\n];\n\nexport const shouldEnableBindingForPointerEvent = (\n  event: React.PointerEvent<HTMLElement>,\n) => {\n  return !event[KEYS.CTRL_OR_CMD];\n};\n\nexport const isBindingEnabled = (appState: AppState): boolean => {\n  return appState.isBindingEnabled;\n};\n\nconst getNonDeletedElements = (\n  scene: Scene,\n  ids: readonly ExcalidrawElement[\"id\"][],\n): NonDeleted<ExcalidrawElement>[] => {\n  const result: NonDeleted<ExcalidrawElement>[] = [];\n  ids.forEach((id) => {\n    const element = scene.getNonDeletedElement(id);\n    if (element != null) {\n      result.push(element);\n    }\n  });\n  return result;\n};\n\nexport const bindOrUnbindLinearElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startBindingElement: ExcalidrawBindableElement | null | \"keep\",\n  endBindingElement: ExcalidrawBindableElement | null | \"keep\",\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  const boundToElementIds: Set<ExcalidrawBindableElement[\"id\"]> = new Set();\n  const unboundFromElementIds: Set<ExcalidrawBindableElement[\"id\"]> = new Set();\n  bindOrUnbindLinearElementEdge(\n    linearElement,\n    startBindingElement,\n    endBindingElement,\n    \"start\",\n    boundToElementIds,\n    unboundFromElementIds,\n    elementsMap,\n  );\n  bindOrUnbindLinearElementEdge(\n    linearElement,\n    endBindingElement,\n    startBindingElement,\n    \"end\",\n    boundToElementIds,\n    unboundFromElementIds,\n    elementsMap,\n  );\n\n  const onlyUnbound = Array.from(unboundFromElementIds).filter(\n    (id) => !boundToElementIds.has(id),\n  );\n\n  getNonDeletedElements(Scene.getScene(linearElement)!, onlyUnbound).forEach(\n    (element) => {\n      mutateElement(element, {\n        boundElements: element.boundElements?.filter(\n          (element) =>\n            element.type !== \"arrow\" || element.id !== linearElement.id,\n        ),\n      });\n    },\n  );\n};\n\nconst bindOrUnbindLinearElementEdge = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  bindableElement: ExcalidrawBindableElement | null | \"keep\",\n  otherEdgeBindableElement: ExcalidrawBindableElement | null | \"keep\",\n  startOrEnd: \"start\" | \"end\",\n  // Is mutated\n  boundToElementIds: Set<ExcalidrawBindableElement[\"id\"]>,\n  // Is mutated\n  unboundFromElementIds: Set<ExcalidrawBindableElement[\"id\"]>,\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  if (bindableElement !== \"keep\") {\n    if (bindableElement != null) {\n      // Don't bind if we're trying to bind or are already bound to the same\n      // element on the other edge already (\"start\" edge takes precedence).\n      if (\n        otherEdgeBindableElement == null ||\n        (otherEdgeBindableElement === \"keep\"\n          ? !isLinearElementSimpleAndAlreadyBoundOnOppositeEdge(\n              linearElement,\n              bindableElement,\n              startOrEnd,\n            )\n          : startOrEnd === \"start\" ||\n            otherEdgeBindableElement.id !== bindableElement.id)\n      ) {\n        bindLinearElement(\n          linearElement,\n          bindableElement,\n          startOrEnd,\n          elementsMap,\n        );\n        boundToElementIds.add(bindableElement.id);\n      }\n    } else {\n      const unbound = unbindLinearElement(linearElement, startOrEnd);\n      if (unbound != null) {\n        unboundFromElementIds.add(unbound);\n      }\n    }\n  }\n};\n\nexport const bindOrUnbindSelectedElements = (\n  selectedElements: NonDeleted<ExcalidrawElement>[],\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  selectedElements.forEach((selectedElement) => {\n    if (isBindingElement(selectedElement)) {\n      bindOrUnbindLinearElement(\n        selectedElement,\n        getElligibleElementForBindingElement(\n          selectedElement,\n          \"start\",\n          elements,\n          elementsMap,\n        ),\n        getElligibleElementForBindingElement(\n          selectedElement,\n          \"end\",\n          elements,\n          elementsMap,\n        ),\n        elementsMap,\n      );\n    } else if (isBindableElement(selectedElement)) {\n      maybeBindBindableElement(selectedElement, elementsMap);\n    }\n  });\n};\n\nconst maybeBindBindableElement = (\n  bindableElement: NonDeleted<ExcalidrawBindableElement>,\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  getElligibleElementsForBindableElementAndWhere(\n    bindableElement,\n    elementsMap,\n  ).forEach(([linearElement, where]) =>\n    bindOrUnbindLinearElement(\n      linearElement,\n      where === \"end\" ? \"keep\" : bindableElement,\n      where === \"start\" ? \"keep\" : bindableElement,\n      elementsMap,\n    ),\n  );\n};\n\nexport const maybeBindLinearElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  appState: AppState,\n  scene: Scene,\n  pointerCoords: { x: number; y: number },\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  if (appState.startBoundElement != null) {\n    bindLinearElement(\n      linearElement,\n      appState.startBoundElement,\n      \"start\",\n      elementsMap,\n    );\n  }\n  const hoveredElement = getHoveredElementForBinding(\n    pointerCoords,\n    scene.getNonDeletedElements(),\n    elementsMap,\n  );\n  if (\n    hoveredElement != null &&\n    !isLinearElementSimpleAndAlreadyBoundOnOppositeEdge(\n      linearElement,\n      hoveredElement,\n      \"end\",\n    )\n  ) {\n    bindLinearElement(linearElement, hoveredElement, \"end\", elementsMap);\n  }\n};\n\nexport const bindLinearElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  hoveredElement: ExcalidrawBindableElement,\n  startOrEnd: \"start\" | \"end\",\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  mutateElement(linearElement, {\n    [startOrEnd === \"start\" ? \"startBinding\" : \"endBinding\"]: {\n      elementId: hoveredElement.id,\n      ...calculateFocusAndGap(\n        linearElement,\n        hoveredElement,\n        startOrEnd,\n        elementsMap,\n      ),\n    } as PointBinding,\n  });\n\n  const boundElementsMap = arrayToMap(hoveredElement.boundElements || []);\n  if (!boundElementsMap.has(linearElement.id)) {\n    mutateElement(hoveredElement, {\n      boundElements: (hoveredElement.boundElements || []).concat({\n        id: linearElement.id,\n        type: \"arrow\",\n      }),\n    });\n  }\n};\n\n// Don't bind both ends of a simple segment\nconst isLinearElementSimpleAndAlreadyBoundOnOppositeEdge = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  bindableElement: ExcalidrawBindableElement,\n  startOrEnd: \"start\" | \"end\",\n): boolean => {\n  const otherBinding =\n    linearElement[startOrEnd === \"start\" ? \"endBinding\" : \"startBinding\"];\n  return isLinearElementSimpleAndAlreadyBound(\n    linearElement,\n    otherBinding?.elementId,\n    bindableElement,\n  );\n};\n\nexport const isLinearElementSimpleAndAlreadyBound = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  alreadyBoundToId: ExcalidrawBindableElement[\"id\"] | undefined,\n  bindableElement: ExcalidrawBindableElement,\n): boolean => {\n  return (\n    alreadyBoundToId === bindableElement.id && linearElement.points.length < 3\n  );\n};\n\nexport const unbindLinearElements = (\n  elements: NonDeleted<ExcalidrawElement>[],\n  elementsMap: NonDeletedSceneElementsMap,\n): void => {\n  elements.forEach((element) => {\n    if (isBindingElement(element)) {\n      bindOrUnbindLinearElement(element, null, null, elementsMap);\n    }\n  });\n};\n\nconst unbindLinearElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startOrEnd: \"start\" | \"end\",\n): ExcalidrawBindableElement[\"id\"] | null => {\n  const field = startOrEnd === \"start\" ? \"startBinding\" : \"endBinding\";\n  const binding = linearElement[field];\n  if (binding == null) {\n    return null;\n  }\n  mutateElement(linearElement, { [field]: null });\n  return binding.elementId;\n};\n\nexport const getHoveredElementForBinding = (\n  pointerCoords: {\n    x: number;\n    y: number;\n  },\n  elements: readonly NonDeletedExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n): NonDeleted<ExcalidrawBindableElement> | null => {\n  const hoveredElement = getElementAtPosition(\n    elements,\n    (element) =>\n      isBindableElement(element, false) &&\n      bindingBorderTest(element, pointerCoords, elementsMap),\n  );\n  return hoveredElement as NonDeleted<ExcalidrawBindableElement> | null;\n};\n\nconst calculateFocusAndGap = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  hoveredElement: ExcalidrawBindableElement,\n  startOrEnd: \"start\" | \"end\",\n  elementsMap: NonDeletedSceneElementsMap,\n): { focus: number; gap: number } => {\n  const direction = startOrEnd === \"start\" ? -1 : 1;\n  const edgePointIndex = direction === -1 ? 0 : linearElement.points.length - 1;\n  const adjacentPointIndex = edgePointIndex - direction;\n\n  const edgePoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n    linearElement,\n    edgePointIndex,\n    elementsMap,\n  );\n  const adjacentPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n    linearElement,\n    adjacentPointIndex,\n    elementsMap,\n  );\n  return {\n    focus: determineFocusDistance(\n      hoveredElement,\n      adjacentPoint,\n      edgePoint,\n      elementsMap,\n    ),\n    gap: Math.max(\n      1,\n      distanceToBindableElement(hoveredElement, edgePoint, elementsMap),\n    ),\n  };\n};\n\n// Supports translating, rotating and scaling `changedElement` with bound\n// linear elements.\n// Because scaling involves moving the focus points as well, it is\n// done before the `changedElement` is updated, and the `newSize` is passed\n// in explicitly.\nexport const updateBoundElements = (\n  changedElement: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n\n  options?: {\n    simultaneouslyUpdated?: readonly ExcalidrawElement[];\n    newSize?: { width: number; height: number };\n  },\n) => {\n  const boundLinearElements = (changedElement.boundElements ?? []).filter(\n    (el) => el.type === \"arrow\",\n  );\n  if (boundLinearElements.length === 0) {\n    return;\n  }\n  const { newSize, simultaneouslyUpdated } = options ?? {};\n  const simultaneouslyUpdatedElementIds = getSimultaneouslyUpdatedElementIds(\n    simultaneouslyUpdated,\n  );\n  const scene = Scene.getScene(changedElement)!;\n  getNonDeletedElements(\n    scene,\n    boundLinearElements.map((el) => el.id),\n  ).forEach((element) => {\n    if (!isLinearElement(element)) {\n      return;\n    }\n\n    const bindableElement = changedElement as ExcalidrawBindableElement;\n    // In case the boundElements are stale\n    if (!doesNeedUpdate(element, bindableElement)) {\n      return;\n    }\n    const startBinding = maybeCalculateNewGapWhenScaling(\n      bindableElement,\n      element.startBinding,\n      newSize,\n    );\n    const endBinding = maybeCalculateNewGapWhenScaling(\n      bindableElement,\n      element.endBinding,\n      newSize,\n    );\n    // `linearElement` is being moved/scaled already, just update the binding\n    if (simultaneouslyUpdatedElementIds.has(element.id)) {\n      mutateElement(element, { startBinding, endBinding });\n      return;\n    }\n    updateBoundPoint(\n      element,\n      \"start\",\n      startBinding,\n      changedElement as ExcalidrawBindableElement,\n      elementsMap,\n    );\n    updateBoundPoint(\n      element,\n      \"end\",\n      endBinding,\n      changedElement as ExcalidrawBindableElement,\n      elementsMap,\n    );\n    const boundText = getBoundTextElement(\n      element,\n      scene.getNonDeletedElementsMap(),\n    );\n    if (boundText) {\n      handleBindTextResize(element, scene.getNonDeletedElementsMap(), false);\n    }\n  });\n};\n\nconst doesNeedUpdate = (\n  boundElement: NonDeleted<ExcalidrawLinearElement>,\n  changedElement: ExcalidrawBindableElement,\n) => {\n  return (\n    boundElement.startBinding?.elementId === changedElement.id ||\n    boundElement.endBinding?.elementId === changedElement.id\n  );\n};\n\nconst getSimultaneouslyUpdatedElementIds = (\n  simultaneouslyUpdated: readonly ExcalidrawElement[] | undefined,\n): Set<ExcalidrawElement[\"id\"]> => {\n  return new Set((simultaneouslyUpdated || []).map((element) => element.id));\n};\n\nconst updateBoundPoint = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startOrEnd: \"start\" | \"end\",\n  binding: PointBinding | null | undefined,\n  changedElement: ExcalidrawBindableElement,\n  elementsMap: ElementsMap,\n): void => {\n  if (\n    binding == null ||\n    // We only need to update the other end if this is a 2 point line element\n    (binding.elementId !== changedElement.id && linearElement.points.length > 2)\n  ) {\n    return;\n  }\n  const bindingElement = Scene.getScene(linearElement)!.getElement(\n    binding.elementId,\n  ) as ExcalidrawBindableElement | null;\n  if (bindingElement == null) {\n    // We're not cleaning up after deleted elements atm., so handle this case\n    return;\n  }\n  const direction = startOrEnd === \"start\" ? -1 : 1;\n  const edgePointIndex = direction === -1 ? 0 : linearElement.points.length - 1;\n  const adjacentPointIndex = edgePointIndex - direction;\n  const adjacentPoint = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n    linearElement,\n    adjacentPointIndex,\n    elementsMap,\n  );\n  const focusPointAbsolute = determineFocusPoint(\n    bindingElement,\n    binding.focus,\n    adjacentPoint,\n    elementsMap,\n  );\n  let newEdgePoint;\n  // The linear element was not originally pointing inside the bound shape,\n  // we can point directly at the focus point\n  if (binding.gap === 0) {\n    newEdgePoint = focusPointAbsolute;\n  } else {\n    const intersections = intersectElementWithLine(\n      bindingElement,\n      adjacentPoint,\n      focusPointAbsolute,\n      binding.gap,\n      elementsMap,\n    );\n    if (intersections.length === 0) {\n      // This should never happen, since focusPoint should always be\n      // inside the element, but just in case, bail out\n      newEdgePoint = focusPointAbsolute;\n    } else {\n      // Guaranteed to intersect because focusPoint is always inside the shape\n      newEdgePoint = intersections[0];\n    }\n  }\n  LinearElementEditor.movePoints(\n    linearElement,\n    [\n      {\n        index: edgePointIndex,\n        point: LinearElementEditor.pointFromAbsoluteCoords(\n          linearElement,\n          newEdgePoint,\n          elementsMap,\n        ),\n      },\n    ],\n    { [startOrEnd === \"start\" ? \"startBinding\" : \"endBinding\"]: binding },\n  );\n};\n\nconst maybeCalculateNewGapWhenScaling = (\n  changedElement: ExcalidrawBindableElement,\n  currentBinding: PointBinding | null | undefined,\n  newSize: { width: number; height: number } | undefined,\n): PointBinding | null | undefined => {\n  if (currentBinding == null || newSize == null) {\n    return currentBinding;\n  }\n  const { gap, focus, elementId } = currentBinding;\n  const { width: newWidth, height: newHeight } = newSize;\n  const { width, height } = changedElement;\n  const newGap = Math.max(\n    1,\n    Math.min(\n      maxBindingGap(changedElement, newWidth, newHeight),\n      gap * (newWidth < newHeight ? newWidth / width : newHeight / height),\n    ),\n  );\n  return { elementId, gap: newGap, focus };\n};\n\n// TODO: this is a bottleneck, optimise\nexport const getEligibleElementsForBinding = (\n  selectedElements: NonDeleted<ExcalidrawElement>[],\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n): SuggestedBinding[] => {\n  const includedElementIds = new Set(selectedElements.map(({ id }) => id));\n  return selectedElements.flatMap((selectedElement) =>\n    isBindingElement(selectedElement, false)\n      ? (getElligibleElementsForBindingElement(\n          selectedElement as NonDeleted<ExcalidrawLinearElement>,\n          elements,\n          elementsMap,\n        ).filter(\n          (element) => !includedElementIds.has(element.id),\n        ) as SuggestedBinding[])\n      : isBindableElement(selectedElement, false)\n      ? getElligibleElementsForBindableElementAndWhere(\n          selectedElement,\n          elementsMap,\n        ).filter((binding) => !includedElementIds.has(binding[0].id))\n      : [],\n  );\n};\n\nconst getElligibleElementsForBindingElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n): NonDeleted<ExcalidrawBindableElement>[] => {\n  return [\n    getElligibleElementForBindingElement(\n      linearElement,\n      \"start\",\n      elements,\n      elementsMap,\n    ),\n    getElligibleElementForBindingElement(\n      linearElement,\n      \"end\",\n      elements,\n      elementsMap,\n    ),\n  ].filter(\n    (element): element is NonDeleted<ExcalidrawBindableElement> =>\n      element != null,\n  );\n};\n\nconst getElligibleElementForBindingElement = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startOrEnd: \"start\" | \"end\",\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n): NonDeleted<ExcalidrawBindableElement> | null => {\n  return getHoveredElementForBinding(\n    getLinearElementEdgeCoors(linearElement, startOrEnd, elementsMap),\n    elements,\n    elementsMap,\n  );\n};\n\nconst getLinearElementEdgeCoors = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startOrEnd: \"start\" | \"end\",\n  elementsMap: NonDeletedSceneElementsMap,\n): { x: number; y: number } => {\n  const index = startOrEnd === \"start\" ? 0 : -1;\n  return tupleToCoors(\n    LinearElementEditor.getPointAtIndexGlobalCoordinates(\n      linearElement,\n      index,\n      elementsMap,\n    ),\n  );\n};\n\nconst getElligibleElementsForBindableElementAndWhere = (\n  bindableElement: NonDeleted<ExcalidrawBindableElement>,\n  elementsMap: NonDeletedSceneElementsMap,\n): SuggestedPointBinding[] => {\n  const scene = Scene.getScene(bindableElement)!;\n  return scene\n    .getNonDeletedElements()\n    .map((element) => {\n      if (!isBindingElement(element, false)) {\n        return null;\n      }\n      const canBindStart = isLinearElementEligibleForNewBindingByBindable(\n        element,\n        \"start\",\n        bindableElement,\n        elementsMap,\n      );\n      const canBindEnd = isLinearElementEligibleForNewBindingByBindable(\n        element,\n        \"end\",\n        bindableElement,\n        elementsMap,\n      );\n      if (!canBindStart && !canBindEnd) {\n        return null;\n      }\n      return [\n        element,\n        canBindStart && canBindEnd ? \"both\" : canBindStart ? \"start\" : \"end\",\n        bindableElement,\n      ];\n    })\n    .filter((maybeElement) => maybeElement != null) as SuggestedPointBinding[];\n};\n\nconst isLinearElementEligibleForNewBindingByBindable = (\n  linearElement: NonDeleted<ExcalidrawLinearElement>,\n  startOrEnd: \"start\" | \"end\",\n  bindableElement: NonDeleted<ExcalidrawBindableElement>,\n  elementsMap: NonDeletedSceneElementsMap,\n): boolean => {\n  const existingBinding =\n    linearElement[startOrEnd === \"start\" ? \"startBinding\" : \"endBinding\"];\n  return (\n    existingBinding == null &&\n    !isLinearElementSimpleAndAlreadyBoundOnOppositeEdge(\n      linearElement,\n      bindableElement,\n      startOrEnd,\n    ) &&\n    bindingBorderTest(\n      bindableElement,\n      getLinearElementEdgeCoors(linearElement, startOrEnd, elementsMap),\n      elementsMap,\n    )\n  );\n};\n\n// We need to:\n// 1: Update elements not selected to point to duplicated elements\n// 2: Update duplicated elements to point to other duplicated elements\nexport const fixBindingsAfterDuplication = (\n  sceneElements: readonly ExcalidrawElement[],\n  oldElements: readonly ExcalidrawElement[],\n  oldIdToDuplicatedId: Map<ExcalidrawElement[\"id\"], ExcalidrawElement[\"id\"]>,\n  // There are three copying mechanisms: Copy-paste, duplication and alt-drag.\n  // Only when alt-dragging the new \"duplicates\" act as the \"old\", while\n  // the \"old\" elements act as the \"new copy\" - essentially working reverse\n  // to the other two.\n  duplicatesServeAsOld?: \"duplicatesServeAsOld\" | undefined,\n): void => {\n  // First collect all the binding/bindable elements, so we only update\n  // each once, regardless of whether they were duplicated or not.\n  const allBoundElementIds: Set<ExcalidrawElement[\"id\"]> = new Set();\n  const allBindableElementIds: Set<ExcalidrawElement[\"id\"]> = new Set();\n  const shouldReverseRoles = duplicatesServeAsOld === \"duplicatesServeAsOld\";\n  oldElements.forEach((oldElement) => {\n    const { boundElements } = oldElement;\n    if (boundElements != null && boundElements.length > 0) {\n      boundElements.forEach((boundElement) => {\n        if (shouldReverseRoles && !oldIdToDuplicatedId.has(boundElement.id)) {\n          allBoundElementIds.add(boundElement.id);\n        }\n      });\n      allBindableElementIds.add(oldIdToDuplicatedId.get(oldElement.id)!);\n    }\n    if (isBindingElement(oldElement)) {\n      if (oldElement.startBinding != null) {\n        const { elementId } = oldElement.startBinding;\n        if (shouldReverseRoles && !oldIdToDuplicatedId.has(elementId)) {\n          allBindableElementIds.add(elementId);\n        }\n      }\n      if (oldElement.endBinding != null) {\n        const { elementId } = oldElement.endBinding;\n        if (shouldReverseRoles && !oldIdToDuplicatedId.has(elementId)) {\n          allBindableElementIds.add(elementId);\n        }\n      }\n      if (oldElement.startBinding != null || oldElement.endBinding != null) {\n        allBoundElementIds.add(oldIdToDuplicatedId.get(oldElement.id)!);\n      }\n    }\n  });\n\n  // Update the linear elements\n  (\n    sceneElements.filter(({ id }) =>\n      allBoundElementIds.has(id),\n    ) as ExcalidrawLinearElement[]\n  ).forEach((element) => {\n    const { startBinding, endBinding } = element;\n    mutateElement(element, {\n      startBinding: newBindingAfterDuplication(\n        startBinding,\n        oldIdToDuplicatedId,\n      ),\n      endBinding: newBindingAfterDuplication(endBinding, oldIdToDuplicatedId),\n    });\n  });\n\n  // Update the bindable shapes\n  sceneElements\n    .filter(({ id }) => allBindableElementIds.has(id))\n    .forEach((bindableElement) => {\n      const { boundElements } = bindableElement;\n      if (boundElements != null && boundElements.length > 0) {\n        mutateElement(bindableElement, {\n          boundElements: boundElements.map((boundElement) =>\n            oldIdToDuplicatedId.has(boundElement.id)\n              ? {\n                  id: oldIdToDuplicatedId.get(boundElement.id)!,\n                  type: boundElement.type,\n                }\n              : boundElement,\n          ),\n        });\n      }\n    });\n};\n\nconst newBindingAfterDuplication = (\n  binding: PointBinding | null,\n  oldIdToDuplicatedId: Map<ExcalidrawElement[\"id\"], ExcalidrawElement[\"id\"]>,\n): PointBinding | null => {\n  if (binding == null) {\n    return null;\n  }\n  const { elementId, focus, gap } = binding;\n  return {\n    focus,\n    gap,\n    elementId: oldIdToDuplicatedId.get(elementId) ?? elementId,\n  };\n};\n\nexport const fixBindingsAfterDeletion = (\n  sceneElements: readonly ExcalidrawElement[],\n  deletedElements: readonly ExcalidrawElement[],\n): void => {\n  const deletedElementIds = new Set(\n    deletedElements.map((element) => element.id),\n  );\n  // non-deleted which bindings need to be updated\n  const affectedElements: Set<ExcalidrawElement[\"id\"]> = new Set();\n  deletedElements.forEach((deletedElement) => {\n    if (isBindableElement(deletedElement)) {\n      deletedElement.boundElements?.forEach((element) => {\n        if (!deletedElementIds.has(element.id)) {\n          affectedElements.add(element.id);\n        }\n      });\n    } else if (isBindingElement(deletedElement)) {\n      if (deletedElement.startBinding) {\n        affectedElements.add(deletedElement.startBinding.elementId);\n      }\n      if (deletedElement.endBinding) {\n        affectedElements.add(deletedElement.endBinding.elementId);\n      }\n    }\n  });\n  sceneElements\n    .filter(({ id }) => affectedElements.has(id))\n    .forEach((element) => {\n      if (isBindableElement(element)) {\n        mutateElement(element, {\n          boundElements: newBoundElementsAfterDeletion(\n            element.boundElements,\n            deletedElementIds,\n          ),\n        });\n      } else if (isBindingElement(element)) {\n        mutateElement(element, {\n          startBinding: newBindingAfterDeletion(\n            element.startBinding,\n            deletedElementIds,\n          ),\n          endBinding: newBindingAfterDeletion(\n            element.endBinding,\n            deletedElementIds,\n          ),\n        });\n      }\n    });\n};\n\nconst newBindingAfterDeletion = (\n  binding: PointBinding | null,\n  deletedElementIds: Set<ExcalidrawElement[\"id\"]>,\n): PointBinding | null => {\n  if (binding == null || deletedElementIds.has(binding.elementId)) {\n    return null;\n  }\n  return binding;\n};\n\nconst newBoundElementsAfterDeletion = (\n  boundElements: ExcalidrawElement[\"boundElements\"],\n  deletedElementIds: Set<ExcalidrawElement[\"id\"]>,\n) => {\n  if (!boundElements) {\n    return null;\n  }\n  return boundElements.filter((ele) => !deletedElementIds.has(ele.id));\n};\n", "import {\n  NonDeleted,\n  ExcalidrawLinearElement,\n  ExcalidrawElement,\n  PointBinding,\n  ExcalidrawBindableElement,\n  ExcalidrawTextElementWithContainer,\n  ElementsMap,\n  NonDeletedExcalidrawElement,\n  NonDeletedSceneElementsMap,\n} from \"./types\";\nimport {\n  distance2d,\n  rotate,\n  isPathALoop,\n  getGridPoint,\n  rotatePoint,\n  centerPoint,\n  getControlPointsForBezierCurve,\n  getBezierXY,\n  getBezierCurveLength,\n  mapIntervalToBezierT,\n  arePointsEqual,\n} from \"../math\";\nimport { getElementAbsoluteCoords, getLockedLinearCursorAlignSize } from \".\";\nimport {\n  Bounds,\n  getCurvePathOps,\n  getElementPointsCoords,\n  getMinMaxXYFromCurvePathOps,\n} from \"./bounds\";\nimport {\n  Point,\n  AppState,\n  PointerCoords,\n  InteractiveCanvasAppState,\n} from \"../types\";\nimport { mutateElement } from \"./mutateElement\";\nimport History from \"../history\";\n\nimport {\n  bindOrUnbindLinearElement,\n  getHoveredElementForBinding,\n  isBindingEnabled,\n} from \"./binding\";\nimport { tupleToCoors } from \"../utils\";\nimport { isBindingElement } from \"./typeChecks\";\nimport { KEYS, shouldRotateWithDiscreteAngle } from \"../keys\";\nimport { getBoundTextElement, handleBindTextResize } from \"./textElement\";\nimport { DRAGGING_THRESHOLD } from \"../constants\";\nimport { Mutable } from \"../utility-types\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\n\nconst editorMidPointsCache: {\n  version: number | null;\n  points: (Point | null)[];\n  zoom: number | null;\n} = { version: null, points: [], zoom: null };\nexport class LinearElementEditor {\n  public readonly elementId: ExcalidrawElement[\"id\"] & {\n    _brand: \"excalidrawLinearElementId\";\n  };\n  /** indices */\n  public readonly selectedPointsIndices: readonly number[] | null;\n\n  public readonly pointerDownState: Readonly<{\n    prevSelectedPointsIndices: readonly number[] | null;\n    /** index */\n    lastClickedPoint: number;\n    origin: Readonly<{ x: number; y: number }> | null;\n    segmentMidpoint: {\n      value: Point | null;\n      index: number | null;\n      added: boolean;\n    };\n  }>;\n\n  /** whether you're dragging a point */\n  public readonly isDragging: boolean;\n  public readonly lastUncommittedPoint: Point | null;\n  public readonly pointerOffset: Readonly<{ x: number; y: number }>;\n  public readonly startBindingElement:\n    | ExcalidrawBindableElement\n    | null\n    | \"keep\";\n  public readonly endBindingElement: ExcalidrawBindableElement | null | \"keep\";\n  public readonly hoverPointIndex: number;\n  public readonly segmentMidPointHoveredCoords: Point | null;\n\n  constructor(element: NonDeleted<ExcalidrawLinearElement>) {\n    this.elementId = element.id as string & {\n      _brand: \"excalidrawLinearElementId\";\n    };\n    LinearElementEditor.normalizePoints(element);\n\n    this.selectedPointsIndices = null;\n    this.lastUncommittedPoint = null;\n    this.isDragging = false;\n    this.pointerOffset = { x: 0, y: 0 };\n    this.startBindingElement = \"keep\";\n    this.endBindingElement = \"keep\";\n    this.pointerDownState = {\n      prevSelectedPointsIndices: null,\n      lastClickedPoint: -1,\n      origin: null,\n\n      segmentMidpoint: {\n        value: null,\n        index: null,\n        added: false,\n      },\n    };\n    this.hoverPointIndex = -1;\n    this.segmentMidPointHoveredCoords = null;\n  }\n\n  // ---------------------------------------------------------------------------\n  // static methods\n  // ---------------------------------------------------------------------------\n\n  static POINT_HANDLE_SIZE = 10;\n  /**\n   * @param id the `elementId` from the instance of this class (so that we can\n   *  statically guarantee this method returns an ExcalidrawLinearElement)\n   */\n  static getElement(\n    id: InstanceType<typeof LinearElementEditor>[\"elementId\"],\n    elementsMap: ElementsMap,\n  ) {\n    const element = elementsMap.get(id);\n    if (element) {\n      return element as NonDeleted<ExcalidrawLinearElement>;\n    }\n    return null;\n  }\n\n  static handleBoxSelection(\n    event: PointerEvent,\n    appState: AppState,\n    setState: React.Component<any, AppState>[\"setState\"],\n    elementsMap: NonDeletedSceneElementsMap,\n  ) {\n    if (\n      !appState.editingLinearElement ||\n      appState.draggingElement?.type !== \"selection\"\n    ) {\n      return false;\n    }\n    const { editingLinearElement } = appState;\n    const { selectedPointsIndices, elementId } = editingLinearElement;\n\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n    if (!element) {\n      return false;\n    }\n\n    const [selectionX1, selectionY1, selectionX2, selectionY2] =\n      getElementAbsoluteCoords(appState.draggingElement, elementsMap);\n\n    const pointsSceneCoords = LinearElementEditor.getPointsGlobalCoordinates(\n      element,\n      elementsMap,\n    );\n\n    const nextSelectedPoints = pointsSceneCoords.reduce(\n      (acc: number[], point, index) => {\n        if (\n          (point[0] >= selectionX1 &&\n            point[0] <= selectionX2 &&\n            point[1] >= selectionY1 &&\n            point[1] <= selectionY2) ||\n          (event.shiftKey && selectedPointsIndices?.includes(index))\n        ) {\n          acc.push(index);\n        }\n\n        return acc;\n      },\n      [],\n    );\n\n    setState({\n      editingLinearElement: {\n        ...editingLinearElement,\n        selectedPointsIndices: nextSelectedPoints.length\n          ? nextSelectedPoints\n          : null,\n      },\n    });\n  }\n\n  /** @returns whether point was dragged */\n  static handlePointDragging(\n    event: PointerEvent,\n    appState: AppState,\n    scenePointerX: number,\n    scenePointerY: number,\n    maybeSuggestBinding: (\n      element: NonDeleted<ExcalidrawLinearElement>,\n      pointSceneCoords: { x: number; y: number }[],\n    ) => void,\n    linearElementEditor: LinearElementEditor,\n    elementsMap: NonDeletedSceneElementsMap,\n  ): boolean {\n    if (!linearElementEditor) {\n      return false;\n    }\n    const { selectedPointsIndices, elementId } = linearElementEditor;\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n    if (!element) {\n      return false;\n    }\n\n    // point that's being dragged (out of all selected points)\n    const draggingPoint = element.points[\n      linearElementEditor.pointerDownState.lastClickedPoint\n    ] as [number, number] | undefined;\n\n    if (selectedPointsIndices && draggingPoint) {\n      if (\n        shouldRotateWithDiscreteAngle(event) &&\n        selectedPointsIndices.length === 1 &&\n        element.points.length > 1\n      ) {\n        const selectedIndex = selectedPointsIndices[0];\n        const referencePoint =\n          element.points[selectedIndex === 0 ? 1 : selectedIndex - 1];\n\n        const [width, height] = LinearElementEditor._getShiftLockedDelta(\n          element,\n          elementsMap,\n          referencePoint,\n          [scenePointerX, scenePointerY],\n          event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n        );\n\n        LinearElementEditor.movePoints(element, [\n          {\n            index: selectedIndex,\n            point: [width + referencePoint[0], height + referencePoint[1]],\n            isDragging:\n              selectedIndex ===\n              linearElementEditor.pointerDownState.lastClickedPoint,\n          },\n        ]);\n      } else {\n        const newDraggingPointPosition = LinearElementEditor.createPointAt(\n          element,\n          elementsMap,\n          scenePointerX - linearElementEditor.pointerOffset.x,\n          scenePointerY - linearElementEditor.pointerOffset.y,\n          event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n        );\n\n        const deltaX = newDraggingPointPosition[0] - draggingPoint[0];\n        const deltaY = newDraggingPointPosition[1] - draggingPoint[1];\n\n        LinearElementEditor.movePoints(\n          element,\n          selectedPointsIndices.map((pointIndex) => {\n            const newPointPosition =\n              pointIndex ===\n              linearElementEditor.pointerDownState.lastClickedPoint\n                ? LinearElementEditor.createPointAt(\n                    element,\n                    elementsMap,\n                    scenePointerX - linearElementEditor.pointerOffset.x,\n                    scenePointerY - linearElementEditor.pointerOffset.y,\n                    event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n                  )\n                : ([\n                    element.points[pointIndex][0] + deltaX,\n                    element.points[pointIndex][1] + deltaY,\n                  ] as const);\n            return {\n              index: pointIndex,\n              point: newPointPosition,\n              isDragging:\n                pointIndex ===\n                linearElementEditor.pointerDownState.lastClickedPoint,\n            };\n          }),\n        );\n      }\n\n      const boundTextElement = getBoundTextElement(element, elementsMap);\n      if (boundTextElement) {\n        handleBindTextResize(element, elementsMap, false);\n      }\n\n      // suggest bindings for first and last point if selected\n      if (isBindingElement(element, false)) {\n        const coords: { x: number; y: number }[] = [];\n\n        const firstSelectedIndex = selectedPointsIndices[0];\n        if (firstSelectedIndex === 0) {\n          coords.push(\n            tupleToCoors(\n              LinearElementEditor.getPointGlobalCoordinates(\n                element,\n                element.points[0],\n                elementsMap,\n              ),\n            ),\n          );\n        }\n\n        const lastSelectedIndex =\n          selectedPointsIndices[selectedPointsIndices.length - 1];\n        if (lastSelectedIndex === element.points.length - 1) {\n          coords.push(\n            tupleToCoors(\n              LinearElementEditor.getPointGlobalCoordinates(\n                element,\n                element.points[lastSelectedIndex],\n                elementsMap,\n              ),\n            ),\n          );\n        }\n\n        if (coords.length) {\n          maybeSuggestBinding(element, coords);\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  static handlePointerUp(\n    event: PointerEvent,\n    editingLinearElement: LinearElementEditor,\n    appState: AppState,\n    elements: readonly NonDeletedExcalidrawElement[],\n    elementsMap: NonDeletedSceneElementsMap,\n  ): LinearElementEditor {\n    const { elementId, selectedPointsIndices, isDragging, pointerDownState } =\n      editingLinearElement;\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n    if (!element) {\n      return editingLinearElement;\n    }\n\n    const bindings: Mutable<\n      Partial<\n        Pick<\n          InstanceType<typeof LinearElementEditor>,\n          \"startBindingElement\" | \"endBindingElement\"\n        >\n      >\n    > = {};\n\n    if (isDragging && selectedPointsIndices) {\n      for (const selectedPoint of selectedPointsIndices) {\n        if (\n          selectedPoint === 0 ||\n          selectedPoint === element.points.length - 1\n        ) {\n          if (isPathALoop(element.points, appState.zoom.value)) {\n            LinearElementEditor.movePoints(element, [\n              {\n                index: selectedPoint,\n                point:\n                  selectedPoint === 0\n                    ? element.points[element.points.length - 1]\n                    : element.points[0],\n              },\n            ]);\n          }\n\n          const bindingElement = isBindingEnabled(appState)\n            ? getHoveredElementForBinding(\n                tupleToCoors(\n                  LinearElementEditor.getPointAtIndexGlobalCoordinates(\n                    element,\n                    selectedPoint!,\n                    elementsMap,\n                  ),\n                ),\n                elements,\n                elementsMap,\n              )\n            : null;\n\n          bindings[\n            selectedPoint === 0 ? \"startBindingElement\" : \"endBindingElement\"\n          ] = bindingElement;\n        }\n      }\n    }\n\n    return {\n      ...editingLinearElement,\n      ...bindings,\n      // if clicking without previously dragging a point(s), and not holding\n      // shift, deselect all points except the one clicked. If holding shift,\n      // toggle the point.\n      selectedPointsIndices:\n        isDragging || event.shiftKey\n          ? !isDragging &&\n            event.shiftKey &&\n            pointerDownState.prevSelectedPointsIndices?.includes(\n              pointerDownState.lastClickedPoint,\n            )\n            ? selectedPointsIndices &&\n              selectedPointsIndices.filter(\n                (pointIndex) =>\n                  pointIndex !== pointerDownState.lastClickedPoint,\n              )\n            : selectedPointsIndices\n          : selectedPointsIndices?.includes(pointerDownState.lastClickedPoint)\n          ? [pointerDownState.lastClickedPoint]\n          : selectedPointsIndices,\n      isDragging: false,\n      pointerOffset: { x: 0, y: 0 },\n    };\n  }\n\n  static getEditorMidPoints = (\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n    appState: InteractiveCanvasAppState,\n  ): typeof editorMidPointsCache[\"points\"] => {\n    const boundText = getBoundTextElement(element, elementsMap);\n\n    // Since its not needed outside editor unless 2 pointer lines or bound text\n    if (\n      !appState.editingLinearElement &&\n      element.points.length > 2 &&\n      !boundText\n    ) {\n      return [];\n    }\n    if (\n      editorMidPointsCache.version === element.version &&\n      editorMidPointsCache.zoom === appState.zoom.value\n    ) {\n      return editorMidPointsCache.points;\n    }\n    LinearElementEditor.updateEditorMidPointsCache(\n      element,\n      elementsMap,\n      appState,\n    );\n    return editorMidPointsCache.points!;\n  };\n\n  static updateEditorMidPointsCache = (\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n    appState: InteractiveCanvasAppState,\n  ) => {\n    const points = LinearElementEditor.getPointsGlobalCoordinates(\n      element,\n      elementsMap,\n    );\n\n    let index = 0;\n    const midpoints: (Point | null)[] = [];\n    while (index < points.length - 1) {\n      if (\n        LinearElementEditor.isSegmentTooShort(\n          element,\n          element.points[index],\n          element.points[index + 1],\n          appState.zoom,\n        )\n      ) {\n        midpoints.push(null);\n        index++;\n        continue;\n      }\n      const segmentMidPoint = LinearElementEditor.getSegmentMidPoint(\n        element,\n        points[index],\n        points[index + 1],\n        index + 1,\n        elementsMap,\n      );\n      midpoints.push(segmentMidPoint);\n      index++;\n    }\n    editorMidPointsCache.points = midpoints;\n    editorMidPointsCache.version = element.version;\n    editorMidPointsCache.zoom = appState.zoom.value;\n  };\n\n  static getSegmentMidpointHitCoords = (\n    linearElementEditor: LinearElementEditor,\n    scenePointer: { x: number; y: number },\n    appState: AppState,\n    elementsMap: ElementsMap,\n  ) => {\n    const { elementId } = linearElementEditor;\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n    if (!element) {\n      return null;\n    }\n    const clickedPointIndex = LinearElementEditor.getPointIndexUnderCursor(\n      element,\n      elementsMap,\n      appState.zoom,\n      scenePointer.x,\n      scenePointer.y,\n    );\n    if (clickedPointIndex >= 0) {\n      return null;\n    }\n    const points = LinearElementEditor.getPointsGlobalCoordinates(\n      element,\n      elementsMap,\n    );\n    if (points.length >= 3 && !appState.editingLinearElement) {\n      return null;\n    }\n\n    const threshold =\n      LinearElementEditor.POINT_HANDLE_SIZE / appState.zoom.value;\n\n    const existingSegmentMidpointHitCoords =\n      linearElementEditor.segmentMidPointHoveredCoords;\n    if (existingSegmentMidpointHitCoords) {\n      const distance = distance2d(\n        existingSegmentMidpointHitCoords[0],\n        existingSegmentMidpointHitCoords[1],\n        scenePointer.x,\n        scenePointer.y,\n      );\n      if (distance <= threshold) {\n        return existingSegmentMidpointHitCoords;\n      }\n    }\n    let index = 0;\n    const midPoints: typeof editorMidPointsCache[\"points\"] =\n      LinearElementEditor.getEditorMidPoints(element, elementsMap, appState);\n    while (index < midPoints.length) {\n      if (midPoints[index] !== null) {\n        const distance = distance2d(\n          midPoints[index]![0],\n          midPoints[index]![1],\n          scenePointer.x,\n          scenePointer.y,\n        );\n        if (distance <= threshold) {\n          return midPoints[index];\n        }\n      }\n\n      index++;\n    }\n    return null;\n  };\n\n  static isSegmentTooShort(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    startPoint: Point,\n    endPoint: Point,\n    zoom: AppState[\"zoom\"],\n  ) {\n    let distance = distance2d(\n      startPoint[0],\n      startPoint[1],\n      endPoint[0],\n      endPoint[1],\n    );\n    if (element.points.length > 2 && element.roundness) {\n      distance = getBezierCurveLength(element, endPoint);\n    }\n\n    return distance * zoom.value < LinearElementEditor.POINT_HANDLE_SIZE * 4;\n  }\n\n  static getSegmentMidPoint(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    startPoint: Point,\n    endPoint: Point,\n    endPointIndex: number,\n    elementsMap: ElementsMap,\n  ) {\n    let segmentMidPoint = centerPoint(startPoint, endPoint);\n    if (element.points.length > 2 && element.roundness) {\n      const controlPoints = getControlPointsForBezierCurve(\n        element,\n        element.points[endPointIndex],\n      );\n      if (controlPoints) {\n        const t = mapIntervalToBezierT(\n          element,\n          element.points[endPointIndex],\n          0.5,\n        );\n\n        const [tx, ty] = getBezierXY(\n          controlPoints[0],\n          controlPoints[1],\n          controlPoints[2],\n          controlPoints[3],\n          t,\n        );\n        segmentMidPoint = LinearElementEditor.getPointGlobalCoordinates(\n          element,\n          [tx, ty],\n          elementsMap,\n        );\n      }\n    }\n\n    return segmentMidPoint;\n  }\n\n  static getSegmentMidPointIndex(\n    linearElementEditor: LinearElementEditor,\n    appState: AppState,\n    midPoint: Point,\n    elementsMap: ElementsMap,\n  ) {\n    const element = LinearElementEditor.getElement(\n      linearElementEditor.elementId,\n      elementsMap,\n    );\n    if (!element) {\n      return -1;\n    }\n    const midPoints = LinearElementEditor.getEditorMidPoints(\n      element,\n      elementsMap,\n      appState,\n    );\n    let index = 0;\n    while (index < midPoints.length) {\n      if (LinearElementEditor.arePointsEqual(midPoint, midPoints[index])) {\n        return index + 1;\n      }\n      index++;\n    }\n    return -1;\n  }\n\n  static handlePointerDown(\n    event: React.PointerEvent<HTMLElement>,\n    appState: AppState,\n    history: History,\n    scenePointer: { x: number; y: number },\n    linearElementEditor: LinearElementEditor,\n    elements: readonly NonDeletedExcalidrawElement[],\n    elementsMap: NonDeletedSceneElementsMap,\n  ): {\n    didAddPoint: boolean;\n    hitElement: NonDeleted<ExcalidrawElement> | null;\n    linearElementEditor: LinearElementEditor | null;\n  } {\n    const ret: ReturnType<typeof LinearElementEditor[\"handlePointerDown\"]> = {\n      didAddPoint: false,\n      hitElement: null,\n      linearElementEditor: null,\n    };\n\n    if (!linearElementEditor) {\n      return ret;\n    }\n\n    const { elementId } = linearElementEditor;\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n\n    if (!element) {\n      return ret;\n    }\n    const segmentMidpoint = LinearElementEditor.getSegmentMidpointHitCoords(\n      linearElementEditor,\n      scenePointer,\n      appState,\n      elementsMap,\n    );\n    let segmentMidpointIndex = null;\n    if (segmentMidpoint) {\n      segmentMidpointIndex = LinearElementEditor.getSegmentMidPointIndex(\n        linearElementEditor,\n        appState,\n        segmentMidpoint,\n        elementsMap,\n      );\n    }\n    if (event.altKey && appState.editingLinearElement) {\n      if (linearElementEditor.lastUncommittedPoint == null) {\n        mutateElement(element, {\n          points: [\n            ...element.points,\n            LinearElementEditor.createPointAt(\n              element,\n              elementsMap,\n              scenePointer.x,\n              scenePointer.y,\n              event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n            ),\n          ],\n        });\n        ret.didAddPoint = true;\n      }\n      history.resumeRecording();\n      ret.linearElementEditor = {\n        ...linearElementEditor,\n        pointerDownState: {\n          prevSelectedPointsIndices: linearElementEditor.selectedPointsIndices,\n          lastClickedPoint: -1,\n          origin: { x: scenePointer.x, y: scenePointer.y },\n          segmentMidpoint: {\n            value: segmentMidpoint,\n            index: segmentMidpointIndex,\n            added: false,\n          },\n        },\n        selectedPointsIndices: [element.points.length - 1],\n        lastUncommittedPoint: null,\n        endBindingElement: getHoveredElementForBinding(\n          scenePointer,\n          elements,\n          elementsMap,\n        ),\n      };\n\n      ret.didAddPoint = true;\n      return ret;\n    }\n\n    const clickedPointIndex = LinearElementEditor.getPointIndexUnderCursor(\n      element,\n      elementsMap,\n      appState.zoom,\n      scenePointer.x,\n      scenePointer.y,\n    );\n    // if we clicked on a point, set the element as hitElement otherwise\n    // it would get deselected if the point is outside the hitbox area\n    if (clickedPointIndex >= 0 || segmentMidpoint) {\n      ret.hitElement = element;\n    } else {\n      // You might be wandering why we are storing the binding elements on\n      // LinearElementEditor and passing them in, instead of calculating them\n      // from the end points of the `linearElement` - this is to allow disabling\n      // binding (which needs to happen at the point the user finishes moving\n      // the point).\n      const { startBindingElement, endBindingElement } = linearElementEditor;\n      if (isBindingEnabled(appState) && isBindingElement(element)) {\n        bindOrUnbindLinearElement(\n          element,\n          startBindingElement,\n          endBindingElement,\n          elementsMap,\n        );\n      }\n    }\n\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    const targetPoint =\n      clickedPointIndex > -1 &&\n      rotate(\n        element.x + element.points[clickedPointIndex][0],\n        element.y + element.points[clickedPointIndex][1],\n        cx,\n        cy,\n        element.angle,\n      );\n\n    const nextSelectedPointsIndices =\n      clickedPointIndex > -1 || event.shiftKey\n        ? event.shiftKey ||\n          linearElementEditor.selectedPointsIndices?.includes(clickedPointIndex)\n          ? normalizeSelectedPoints([\n              ...(linearElementEditor.selectedPointsIndices || []),\n              clickedPointIndex,\n            ])\n          : [clickedPointIndex]\n        : null;\n    ret.linearElementEditor = {\n      ...linearElementEditor,\n      pointerDownState: {\n        prevSelectedPointsIndices: linearElementEditor.selectedPointsIndices,\n        lastClickedPoint: clickedPointIndex,\n        origin: { x: scenePointer.x, y: scenePointer.y },\n        segmentMidpoint: {\n          value: segmentMidpoint,\n          index: segmentMidpointIndex,\n          added: false,\n        },\n      },\n      selectedPointsIndices: nextSelectedPointsIndices,\n      pointerOffset: targetPoint\n        ? {\n            x: scenePointer.x - targetPoint[0],\n            y: scenePointer.y - targetPoint[1],\n          }\n        : { x: 0, y: 0 },\n    };\n\n    return ret;\n  }\n\n  static arePointsEqual(point1: Point | null, point2: Point | null) {\n    if (!point1 && !point2) {\n      return true;\n    }\n    if (!point1 || !point2) {\n      return false;\n    }\n    return arePointsEqual(point1, point2);\n  }\n\n  static handlePointerMove(\n    event: React.PointerEvent<HTMLCanvasElement>,\n    scenePointerX: number,\n    scenePointerY: number,\n    appState: AppState,\n    elementsMap: ElementsMap,\n  ): LinearElementEditor | null {\n    if (!appState.editingLinearElement) {\n      return null;\n    }\n    const { elementId, lastUncommittedPoint } = appState.editingLinearElement;\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n    if (!element) {\n      return appState.editingLinearElement;\n    }\n\n    const { points } = element;\n    const lastPoint = points[points.length - 1];\n\n    if (!event.altKey) {\n      if (lastPoint === lastUncommittedPoint) {\n        LinearElementEditor.deletePoints(element, [points.length - 1]);\n      }\n      return {\n        ...appState.editingLinearElement,\n        lastUncommittedPoint: null,\n      };\n    }\n\n    let newPoint: Point;\n\n    if (shouldRotateWithDiscreteAngle(event) && points.length >= 2) {\n      const lastCommittedPoint = points[points.length - 2];\n\n      const [width, height] = LinearElementEditor._getShiftLockedDelta(\n        element,\n        elementsMap,\n        lastCommittedPoint,\n        [scenePointerX, scenePointerY],\n        event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n      );\n\n      newPoint = [\n        width + lastCommittedPoint[0],\n        height + lastCommittedPoint[1],\n      ];\n    } else {\n      newPoint = LinearElementEditor.createPointAt(\n        element,\n        elementsMap,\n        scenePointerX - appState.editingLinearElement.pointerOffset.x,\n        scenePointerY - appState.editingLinearElement.pointerOffset.y,\n        event[KEYS.CTRL_OR_CMD] ? null : appState.gridSize,\n      );\n    }\n\n    if (lastPoint === lastUncommittedPoint) {\n      LinearElementEditor.movePoints(element, [\n        {\n          index: element.points.length - 1,\n          point: newPoint,\n        },\n      ]);\n    } else {\n      LinearElementEditor.addPoints(element, appState, [{ point: newPoint }]);\n    }\n    return {\n      ...appState.editingLinearElement,\n      lastUncommittedPoint: element.points[element.points.length - 1],\n    };\n  }\n\n  /** scene coords */\n  static getPointGlobalCoordinates(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    point: Point,\n    elementsMap: ElementsMap,\n  ) {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n\n    let { x, y } = element;\n    [x, y] = rotate(x + point[0], y + point[1], cx, cy, element.angle);\n    return [x, y] as const;\n  }\n\n  /** scene coords */\n  static getPointsGlobalCoordinates(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n  ): Point[] {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    return element.points.map((point) => {\n      let { x, y } = element;\n      [x, y] = rotate(x + point[0], y + point[1], cx, cy, element.angle);\n      return [x, y] as const;\n    });\n  }\n\n  static getPointAtIndexGlobalCoordinates(\n    element: NonDeleted<ExcalidrawLinearElement>,\n\n    indexMaybeFromEnd: number, // -1 for last element\n    elementsMap: ElementsMap,\n  ): Point {\n    const index =\n      indexMaybeFromEnd < 0\n        ? element.points.length + indexMaybeFromEnd\n        : indexMaybeFromEnd;\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n\n    const point = element.points[index];\n    const { x, y } = element;\n    return point\n      ? rotate(x + point[0], y + point[1], cx, cy, element.angle)\n      : rotate(x, y, cx, cy, element.angle);\n  }\n\n  static pointFromAbsoluteCoords(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    absoluteCoords: Point,\n    elementsMap: ElementsMap,\n  ): Point {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    const [x, y] = rotate(\n      absoluteCoords[0],\n      absoluteCoords[1],\n      cx,\n      cy,\n      -element.angle,\n    );\n    return [x - element.x, y - element.y];\n  }\n\n  static getPointIndexUnderCursor(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n    zoom: AppState[\"zoom\"],\n    x: number,\n    y: number,\n  ) {\n    const pointHandles = LinearElementEditor.getPointsGlobalCoordinates(\n      element,\n      elementsMap,\n    );\n    let idx = pointHandles.length;\n    // loop from right to left because points on the right are rendered over\n    // points on the left, thus should take precedence when clicking, if they\n    // overlap\n    while (--idx > -1) {\n      const point = pointHandles[idx];\n      if (\n        distance2d(x, y, point[0], point[1]) * zoom.value <\n        // +1px to account for outline stroke\n        LinearElementEditor.POINT_HANDLE_SIZE + 1\n      ) {\n        return idx;\n      }\n    }\n    return -1;\n  }\n\n  static createPointAt(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n    scenePointerX: number,\n    scenePointerY: number,\n    gridSize: number | null,\n  ): Point {\n    const pointerOnGrid = getGridPoint(scenePointerX, scenePointerY, gridSize);\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    const [rotatedX, rotatedY] = rotate(\n      pointerOnGrid[0],\n      pointerOnGrid[1],\n      cx,\n      cy,\n      -element.angle,\n    );\n\n    return [rotatedX - element.x, rotatedY - element.y];\n  }\n\n  /**\n   * Normalizes line points so that the start point is at [0,0]. This is\n   * expected in various parts of the codebase. Also returns new x/y to account\n   * for the potential normalization.\n   */\n  static getNormalizedPoints(element: ExcalidrawLinearElement) {\n    const { points } = element;\n\n    const offsetX = points[0][0];\n    const offsetY = points[0][1];\n\n    return {\n      points: points.map((point, _idx) => {\n        return [point[0] - offsetX, point[1] - offsetY] as const;\n      }),\n      x: element.x + offsetX,\n      y: element.y + offsetY,\n    };\n  }\n\n  // element-mutating methods\n  // ---------------------------------------------------------------------------\n\n  static normalizePoints(element: NonDeleted<ExcalidrawLinearElement>) {\n    mutateElement(element, LinearElementEditor.getNormalizedPoints(element));\n  }\n\n  static duplicateSelectedPoints(appState: AppState, elementsMap: ElementsMap) {\n    if (!appState.editingLinearElement) {\n      return false;\n    }\n\n    const { selectedPointsIndices, elementId } = appState.editingLinearElement;\n\n    const element = LinearElementEditor.getElement(elementId, elementsMap);\n\n    if (!element || selectedPointsIndices === null) {\n      return false;\n    }\n\n    const { points } = element;\n\n    const nextSelectedIndices: number[] = [];\n\n    let pointAddedToEnd = false;\n    let indexCursor = -1;\n    const nextPoints = points.reduce((acc: Point[], point, index) => {\n      ++indexCursor;\n      acc.push(point);\n\n      const isSelected = selectedPointsIndices.includes(index);\n      if (isSelected) {\n        const nextPoint = points[index + 1];\n\n        if (!nextPoint) {\n          pointAddedToEnd = true;\n        }\n        acc.push(\n          nextPoint\n            ? [(point[0] + nextPoint[0]) / 2, (point[1] + nextPoint[1]) / 2]\n            : [point[0], point[1]],\n        );\n\n        nextSelectedIndices.push(indexCursor + 1);\n        ++indexCursor;\n      }\n\n      return acc;\n    }, []);\n\n    mutateElement(element, { points: nextPoints });\n\n    // temp hack to ensure the line doesn't move when adding point to the end,\n    // potentially expanding the bounding box\n    if (pointAddedToEnd) {\n      const lastPoint = element.points[element.points.length - 1];\n      LinearElementEditor.movePoints(element, [\n        {\n          index: element.points.length - 1,\n          point: [lastPoint[0] + 30, lastPoint[1] + 30],\n        },\n      ]);\n    }\n\n    return {\n      appState: {\n        ...appState,\n        editingLinearElement: {\n          ...appState.editingLinearElement,\n          selectedPointsIndices: nextSelectedIndices,\n        },\n      },\n    };\n  }\n\n  static deletePoints(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    pointIndices: readonly number[],\n  ) {\n    let offsetX = 0;\n    let offsetY = 0;\n\n    const isDeletingOriginPoint = pointIndices.includes(0);\n\n    // if deleting first point, make the next to be [0,0] and recalculate\n    // positions of the rest with respect to it\n    if (isDeletingOriginPoint) {\n      const firstNonDeletedPoint = element.points.find((point, idx) => {\n        return !pointIndices.includes(idx);\n      });\n      if (firstNonDeletedPoint) {\n        offsetX = firstNonDeletedPoint[0];\n        offsetY = firstNonDeletedPoint[1];\n      }\n    }\n\n    const nextPoints = element.points.reduce((acc: Point[], point, idx) => {\n      if (!pointIndices.includes(idx)) {\n        acc.push(\n          !acc.length ? [0, 0] : [point[0] - offsetX, point[1] - offsetY],\n        );\n      }\n      return acc;\n    }, []);\n\n    LinearElementEditor._updatePoints(element, nextPoints, offsetX, offsetY);\n  }\n\n  static addPoints(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    appState: AppState,\n    targetPoints: { point: Point }[],\n  ) {\n    const offsetX = 0;\n    const offsetY = 0;\n\n    const nextPoints = [...element.points, ...targetPoints.map((x) => x.point)];\n    LinearElementEditor._updatePoints(element, nextPoints, offsetX, offsetY);\n  }\n\n  static movePoints(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    targetPoints: { index: number; point: Point; isDragging?: boolean }[],\n    otherUpdates?: { startBinding?: PointBinding; endBinding?: PointBinding },\n  ) {\n    const { points } = element;\n\n    // in case we're moving start point, instead of modifying its position\n    // which would break the invariant of it being at [0,0], we move\n    // all the other points in the opposite direction by delta to\n    // offset it. We do the same with actual element.x/y position, so\n    // this hacks are completely transparent to the user.\n    let offsetX = 0;\n    let offsetY = 0;\n\n    const selectedOriginPoint = targetPoints.find(({ index }) => index === 0);\n\n    if (selectedOriginPoint) {\n      offsetX =\n        selectedOriginPoint.point[0] + points[selectedOriginPoint.index][0];\n      offsetY =\n        selectedOriginPoint.point[1] + points[selectedOriginPoint.index][1];\n    }\n\n    const nextPoints = points.map((point, idx) => {\n      const selectedPointData = targetPoints.find((p) => p.index === idx);\n      if (selectedPointData) {\n        if (selectedOriginPoint) {\n          return point;\n        }\n\n        const deltaX =\n          selectedPointData.point[0] - points[selectedPointData.index][0];\n        const deltaY =\n          selectedPointData.point[1] - points[selectedPointData.index][1];\n\n        return [point[0] + deltaX, point[1] + deltaY] as const;\n      }\n      return offsetX || offsetY\n        ? ([point[0] - offsetX, point[1] - offsetY] as const)\n        : point;\n    });\n\n    LinearElementEditor._updatePoints(\n      element,\n      nextPoints,\n      offsetX,\n      offsetY,\n      otherUpdates,\n    );\n  }\n\n  static shouldAddMidpoint(\n    linearElementEditor: LinearElementEditor,\n    pointerCoords: PointerCoords,\n    appState: AppState,\n    elementsMap: ElementsMap,\n  ) {\n    const element = LinearElementEditor.getElement(\n      linearElementEditor.elementId,\n      elementsMap,\n    );\n\n    if (!element) {\n      return false;\n    }\n\n    const { segmentMidpoint } = linearElementEditor.pointerDownState;\n\n    if (\n      segmentMidpoint.added ||\n      segmentMidpoint.value === null ||\n      segmentMidpoint.index === null ||\n      linearElementEditor.pointerDownState.origin === null\n    ) {\n      return false;\n    }\n\n    const origin = linearElementEditor.pointerDownState.origin!;\n    const dist = distance2d(\n      origin.x,\n      origin.y,\n      pointerCoords.x,\n      pointerCoords.y,\n    );\n    if (\n      !appState.editingLinearElement &&\n      dist < DRAGGING_THRESHOLD / appState.zoom.value\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  static addMidpoint(\n    linearElementEditor: LinearElementEditor,\n    pointerCoords: PointerCoords,\n    appState: AppState,\n    snapToGrid: boolean,\n    elementsMap: ElementsMap,\n  ) {\n    const element = LinearElementEditor.getElement(\n      linearElementEditor.elementId,\n      elementsMap,\n    );\n    if (!element) {\n      return;\n    }\n    const { segmentMidpoint } = linearElementEditor.pointerDownState;\n    const ret: {\n      pointerDownState: LinearElementEditor[\"pointerDownState\"];\n      selectedPointsIndices: LinearElementEditor[\"selectedPointsIndices\"];\n    } = {\n      pointerDownState: linearElementEditor.pointerDownState,\n      selectedPointsIndices: linearElementEditor.selectedPointsIndices,\n    };\n\n    const midpoint = LinearElementEditor.createPointAt(\n      element,\n      elementsMap,\n      pointerCoords.x,\n      pointerCoords.y,\n      snapToGrid ? appState.gridSize : null,\n    );\n    const points = [\n      ...element.points.slice(0, segmentMidpoint.index!),\n      midpoint,\n      ...element.points.slice(segmentMidpoint.index!),\n    ];\n\n    mutateElement(element, {\n      points,\n    });\n\n    ret.pointerDownState = {\n      ...linearElementEditor.pointerDownState,\n      segmentMidpoint: {\n        ...linearElementEditor.pointerDownState.segmentMidpoint,\n        added: true,\n      },\n      lastClickedPoint: segmentMidpoint.index!,\n    };\n    ret.selectedPointsIndices = [segmentMidpoint.index!];\n    return ret;\n  }\n\n  private static _updatePoints(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    nextPoints: readonly Point[],\n    offsetX: number,\n    offsetY: number,\n    otherUpdates?: { startBinding?: PointBinding; endBinding?: PointBinding },\n  ) {\n    const nextCoords = getElementPointsCoords(element, nextPoints);\n    const prevCoords = getElementPointsCoords(element, element.points);\n    const nextCenterX = (nextCoords[0] + nextCoords[2]) / 2;\n    const nextCenterY = (nextCoords[1] + nextCoords[3]) / 2;\n    const prevCenterX = (prevCoords[0] + prevCoords[2]) / 2;\n    const prevCenterY = (prevCoords[1] + prevCoords[3]) / 2;\n    const dX = prevCenterX - nextCenterX;\n    const dY = prevCenterY - nextCenterY;\n    const rotated = rotate(offsetX, offsetY, dX, dY, element.angle);\n    mutateElement(element, {\n      ...otherUpdates,\n      points: nextPoints,\n      x: element.x + rotated[0],\n      y: element.y + rotated[1],\n    });\n  }\n\n  private static _getShiftLockedDelta(\n    element: NonDeleted<ExcalidrawLinearElement>,\n    elementsMap: ElementsMap,\n    referencePoint: Point,\n    scenePointer: Point,\n    gridSize: number | null,\n  ) {\n    const referencePointCoords = LinearElementEditor.getPointGlobalCoordinates(\n      element,\n      referencePoint,\n      elementsMap,\n    );\n\n    const [gridX, gridY] = getGridPoint(\n      scenePointer[0],\n      scenePointer[1],\n      gridSize,\n    );\n\n    const { width, height } = getLockedLinearCursorAlignSize(\n      referencePointCoords[0],\n      referencePointCoords[1],\n      gridX,\n      gridY,\n    );\n\n    return rotatePoint([width, height], [0, 0], -element.angle);\n  }\n\n  static getBoundTextElementPosition = (\n    element: ExcalidrawLinearElement,\n    boundTextElement: ExcalidrawTextElementWithContainer,\n    elementsMap: ElementsMap,\n  ): { x: number; y: number } => {\n    const points = LinearElementEditor.getPointsGlobalCoordinates(\n      element,\n      elementsMap,\n    );\n    if (points.length < 2) {\n      mutateElement(boundTextElement, { isDeleted: true });\n    }\n    let x = 0;\n    let y = 0;\n    if (element.points.length % 2 === 1) {\n      const index = Math.floor(element.points.length / 2);\n      const midPoint = LinearElementEditor.getPointGlobalCoordinates(\n        element,\n        element.points[index],\n        elementsMap,\n      );\n      x = midPoint[0] - boundTextElement.width / 2;\n      y = midPoint[1] - boundTextElement.height / 2;\n    } else {\n      const index = element.points.length / 2 - 1;\n\n      let midSegmentMidpoint = editorMidPointsCache.points[index];\n      if (element.points.length === 2) {\n        midSegmentMidpoint = centerPoint(points[0], points[1]);\n      }\n      if (\n        !midSegmentMidpoint ||\n        editorMidPointsCache.version !== element.version\n      ) {\n        midSegmentMidpoint = LinearElementEditor.getSegmentMidPoint(\n          element,\n          points[index],\n          points[index + 1],\n          index + 1,\n          elementsMap,\n        );\n      }\n      x = midSegmentMidpoint[0] - boundTextElement.width / 2;\n      y = midSegmentMidpoint[1] - boundTextElement.height / 2;\n    }\n    return { x, y };\n  };\n\n  static getMinMaxXYWithBoundText = (\n    element: ExcalidrawLinearElement,\n    elementsMap: ElementsMap,\n    elementBounds: Bounds,\n    boundTextElement: ExcalidrawTextElementWithContainer,\n  ): [number, number, number, number, number, number] => {\n    let [x1, y1, x2, y2] = elementBounds;\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    const { x: boundTextX1, y: boundTextY1 } =\n      LinearElementEditor.getBoundTextElementPosition(\n        element,\n        boundTextElement,\n        elementsMap,\n      );\n    const boundTextX2 = boundTextX1 + boundTextElement.width;\n    const boundTextY2 = boundTextY1 + boundTextElement.height;\n\n    const topLeftRotatedPoint = rotatePoint([x1, y1], [cx, cy], element.angle);\n    const topRightRotatedPoint = rotatePoint([x2, y1], [cx, cy], element.angle);\n\n    const counterRotateBoundTextTopLeft = rotatePoint(\n      [boundTextX1, boundTextY1],\n\n      [cx, cy],\n\n      -element.angle,\n    );\n    const counterRotateBoundTextTopRight = rotatePoint(\n      [boundTextX2, boundTextY1],\n\n      [cx, cy],\n\n      -element.angle,\n    );\n    const counterRotateBoundTextBottomLeft = rotatePoint(\n      [boundTextX1, boundTextY2],\n\n      [cx, cy],\n\n      -element.angle,\n    );\n    const counterRotateBoundTextBottomRight = rotatePoint(\n      [boundTextX2, boundTextY2],\n\n      [cx, cy],\n\n      -element.angle,\n    );\n\n    if (\n      topLeftRotatedPoint[0] < topRightRotatedPoint[0] &&\n      topLeftRotatedPoint[1] >= topRightRotatedPoint[1]\n    ) {\n      x1 = Math.min(x1, counterRotateBoundTextBottomLeft[0]);\n      x2 = Math.max(\n        x2,\n        Math.max(\n          counterRotateBoundTextTopRight[0],\n          counterRotateBoundTextBottomRight[0],\n        ),\n      );\n      y1 = Math.min(y1, counterRotateBoundTextTopLeft[1]);\n\n      y2 = Math.max(y2, counterRotateBoundTextBottomRight[1]);\n    } else if (\n      topLeftRotatedPoint[0] >= topRightRotatedPoint[0] &&\n      topLeftRotatedPoint[1] > topRightRotatedPoint[1]\n    ) {\n      x1 = Math.min(x1, counterRotateBoundTextBottomRight[0]);\n      x2 = Math.max(\n        x2,\n        Math.max(\n          counterRotateBoundTextTopLeft[0],\n          counterRotateBoundTextTopRight[0],\n        ),\n      );\n      y1 = Math.min(y1, counterRotateBoundTextBottomLeft[1]);\n\n      y2 = Math.max(y2, counterRotateBoundTextTopRight[1]);\n    } else if (topLeftRotatedPoint[0] >= topRightRotatedPoint[0]) {\n      x1 = Math.min(x1, counterRotateBoundTextTopRight[0]);\n      x2 = Math.max(x2, counterRotateBoundTextBottomLeft[0]);\n      y1 = Math.min(y1, counterRotateBoundTextBottomRight[1]);\n\n      y2 = Math.max(y2, counterRotateBoundTextTopLeft[1]);\n    } else if (topLeftRotatedPoint[1] <= topRightRotatedPoint[1]) {\n      x1 = Math.min(\n        x1,\n        Math.min(\n          counterRotateBoundTextTopRight[0],\n          counterRotateBoundTextTopLeft[0],\n        ),\n      );\n\n      x2 = Math.max(x2, counterRotateBoundTextBottomRight[0]);\n      y1 = Math.min(y1, counterRotateBoundTextTopRight[1]);\n      y2 = Math.max(y2, counterRotateBoundTextBottomLeft[1]);\n    }\n\n    return [x1, y1, x2, y2, cx, cy];\n  };\n\n  static getElementAbsoluteCoords = (\n    element: ExcalidrawLinearElement,\n    elementsMap: ElementsMap,\n    includeBoundText: boolean = false,\n  ): [number, number, number, number, number, number] => {\n    let coords: [number, number, number, number, number, number];\n    let x1;\n    let y1;\n    let x2;\n    let y2;\n    if (element.points.length < 2 || !ShapeCache.get(element)) {\n      // XXX this is just a poor estimate and not very useful\n      const { minX, minY, maxX, maxY } = element.points.reduce(\n        (limits, [x, y]) => {\n          limits.minY = Math.min(limits.minY, y);\n          limits.minX = Math.min(limits.minX, x);\n\n          limits.maxX = Math.max(limits.maxX, x);\n          limits.maxY = Math.max(limits.maxY, y);\n\n          return limits;\n        },\n        { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity },\n      );\n      x1 = minX + element.x;\n      y1 = minY + element.y;\n      x2 = maxX + element.x;\n      y2 = maxY + element.y;\n    } else {\n      const shape = ShapeCache.generateElementShape(element, null);\n\n      // first element is always the curve\n      const ops = getCurvePathOps(shape[0]);\n\n      const [minX, minY, maxX, maxY] = getMinMaxXYFromCurvePathOps(ops);\n      x1 = minX + element.x;\n      y1 = minY + element.y;\n      x2 = maxX + element.x;\n      y2 = maxY + element.y;\n    }\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n    coords = [x1, y1, x2, y2, cx, cy];\n\n    if (!includeBoundText) {\n      return coords;\n    }\n    const boundTextElement = getBoundTextElement(element, elementsMap);\n    if (boundTextElement) {\n      coords = LinearElementEditor.getMinMaxXYWithBoundText(\n        element,\n        elementsMap,\n        [x1, y1, x2, y2],\n        boundTextElement,\n      );\n    }\n\n    return coords;\n  };\n}\n\nconst normalizeSelectedPoints = (\n  points: (number | null)[],\n): number[] | null => {\n  let nextPoints = [\n    ...new Set(points.filter((p) => p !== null && p !== -1)),\n  ] as number[];\n  nextPoints = nextPoints.sort((a, b) => a - b);\n  return nextPoints.length ? nextPoints : null;\n};\n", "import { ExcalidrawTextContainer } from \"./types\";\n\nexport const originalContainerCache: {\n  [id: ExcalidrawTextContainer[\"id\"]]:\n    | {\n        height: ExcalidrawTextContainer[\"height\"];\n      }\n    | undefined;\n} = {};\n\nexport const updateOriginalContainerCache = (\n  id: ExcalidrawTextContainer[\"id\"],\n  height: ExcalidrawTextContainer[\"height\"],\n) => {\n  const data =\n    originalContainerCache[id] || (originalContainerCache[id] = { height });\n  data.height = height;\n  return data;\n};\n\nexport const resetOriginalContainerCache = (\n  id: ExcalidrawTextContainer[\"id\"],\n) => {\n  if (originalContainerCache[id]) {\n    delete originalContainerCache[id];\n  }\n};\n\nexport const getOriginalContainerHeightFromCache = (\n  id: ExcalidrawTextContainer[\"id\"],\n) => {\n  return originalContainerCache[id]?.height ?? null;\n};\n", "import { getFontString, arrayToMap, isTestEnv, normalizeEOL } from \"../utils\";\nimport {\n  ElementsMap,\n  ExcalidrawElement,\n  ExcalidrawElementType,\n  ExcalidrawTextContainer,\n  ExcalidrawTextElement,\n  ExcalidrawTextElementWithContainer,\n  FontFamilyValues,\n  FontString,\n  NonDeletedExcalidrawElement,\n} from \"./types\";\nimport { mutateElement } from \"./mutateElement\";\nimport {\n  ARROW_LABEL_FONT_SIZE_TO_MIN_WIDTH_RATIO,\n  ARROW_LABEL_WIDTH_FRACTION,\n  BOUND_TEXT_PADDING,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  FONT_FAMILY,\n  isSafari,\n  TEXT_ALIGN,\n  VERTICAL_ALIGN,\n} from \"../constants\";\nimport { MaybeTransformHandleType } from \"./transformHandles\";\nimport { isTextElement } from \".\";\nimport { isBoundToContainer, isArrowElement } from \"./typeChecks\";\nimport { LinearElementEditor } from \"./linearElementEditor\";\nimport { AppState } from \"../types\";\nimport { isTextBindableContainer } from \"./typeChecks\";\nimport { getElementAbsoluteCoords } from \".\";\nimport { getSelectedElements } from \"../scene\";\nimport { isHittingElementNotConsideringBoundingBox } from \"./collision\";\n\nimport { ExtractSetType } from \"../utility-types\";\nimport {\n  resetOriginalContainerCache,\n  updateOriginalContainerCache,\n} from \"./containerCache\";\n\nexport const normalizeText = (text: string) => {\n  return (\n    normalizeEOL(text)\n      // replace tabs with spaces so they render and measure correctly\n      .replace(/\\t/g, \"        \")\n  );\n};\n\nconst splitIntoLines = (text: string) => {\n  return normalizeText(text).split(\"\\n\");\n};\n\nexport const redrawTextBoundingBox = (\n  textElement: ExcalidrawTextElement,\n  container: ExcalidrawElement | null,\n  elementsMap: ElementsMap,\n) => {\n  let maxWidth = undefined;\n  const boundTextUpdates = {\n    x: textElement.x,\n    y: textElement.y,\n    text: textElement.text,\n    width: textElement.width,\n    height: textElement.height,\n    baseline: textElement.baseline,\n  };\n\n  boundTextUpdates.text = textElement.text;\n\n  if (container) {\n    maxWidth = getBoundTextMaxWidth(container, textElement);\n    boundTextUpdates.text = wrapText(\n      textElement.originalText,\n      getFontString(textElement),\n      maxWidth,\n    );\n  }\n  const metrics = measureText(\n    boundTextUpdates.text,\n    getFontString(textElement),\n    textElement.lineHeight,\n  );\n\n  boundTextUpdates.width = metrics.width;\n  boundTextUpdates.height = metrics.height;\n  boundTextUpdates.baseline = metrics.baseline;\n\n  if (container) {\n    const maxContainerHeight = getBoundTextMaxHeight(\n      container,\n      textElement as ExcalidrawTextElementWithContainer,\n    );\n    const maxContainerWidth = getBoundTextMaxWidth(container, textElement);\n\n    if (!isArrowElement(container) && metrics.height > maxContainerHeight) {\n      const nextHeight = computeContainerDimensionForBoundText(\n        metrics.height,\n        container.type,\n      );\n      mutateElement(container, { height: nextHeight });\n      updateOriginalContainerCache(container.id, nextHeight);\n    }\n    if (metrics.width > maxContainerWidth) {\n      const nextWidth = computeContainerDimensionForBoundText(\n        metrics.width,\n        container.type,\n      );\n      mutateElement(container, { width: nextWidth });\n    }\n    const updatedTextElement = {\n      ...textElement,\n      ...boundTextUpdates,\n    } as ExcalidrawTextElementWithContainer;\n    const { x, y } = computeBoundTextPosition(\n      container,\n      updatedTextElement,\n      elementsMap,\n    );\n    boundTextUpdates.x = x;\n    boundTextUpdates.y = y;\n  }\n\n  mutateElement(textElement, boundTextUpdates);\n};\n\nexport const bindTextToShapeAfterDuplication = (\n  newElements: ExcalidrawElement[],\n  oldElements: ExcalidrawElement[],\n  oldIdToDuplicatedId: Map<ExcalidrawElement[\"id\"], ExcalidrawElement[\"id\"]>,\n): void => {\n  const newElementsMap = arrayToMap(newElements) as Map<\n    ExcalidrawElement[\"id\"],\n    ExcalidrawElement\n  >;\n  oldElements.forEach((element) => {\n    const newElementId = oldIdToDuplicatedId.get(element.id) as string;\n    const boundTextElementId = getBoundTextElementId(element);\n\n    if (boundTextElementId) {\n      const newTextElementId = oldIdToDuplicatedId.get(boundTextElementId);\n      if (newTextElementId) {\n        const newContainer = newElementsMap.get(newElementId);\n        if (newContainer) {\n          mutateElement(newContainer, {\n            boundElements: (element.boundElements || [])\n              .filter(\n                (boundElement) =>\n                  boundElement.id !== newTextElementId &&\n                  boundElement.id !== boundTextElementId,\n              )\n              .concat({\n                type: \"text\",\n                id: newTextElementId,\n              }),\n          });\n        }\n        const newTextElement = newElementsMap.get(newTextElementId);\n        if (newTextElement && isTextElement(newTextElement)) {\n          mutateElement(newTextElement, {\n            containerId: newContainer ? newElementId : null,\n          });\n        }\n      }\n    }\n  });\n};\n\nexport const handleBindTextResize = (\n  container: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  transformHandleType: MaybeTransformHandleType,\n  shouldMaintainAspectRatio = false,\n) => {\n  const boundTextElementId = getBoundTextElementId(container);\n  if (!boundTextElementId) {\n    return;\n  }\n  resetOriginalContainerCache(container.id);\n  const textElement = getBoundTextElement(container, elementsMap);\n  if (textElement && textElement.text) {\n    if (!container) {\n      return;\n    }\n\n    let text = textElement.text;\n    let nextHeight = textElement.height;\n    let nextWidth = textElement.width;\n    const maxWidth = getBoundTextMaxWidth(container, textElement);\n    const maxHeight = getBoundTextMaxHeight(container, textElement);\n    let containerHeight = container.height;\n    let nextBaseLine = textElement.baseline;\n    if (\n      shouldMaintainAspectRatio ||\n      (transformHandleType !== \"n\" && transformHandleType !== \"s\")\n    ) {\n      if (text) {\n        text = wrapText(\n          textElement.originalText,\n          getFontString(textElement),\n          maxWidth,\n        );\n      }\n      const metrics = measureText(\n        text,\n        getFontString(textElement),\n        textElement.lineHeight,\n      );\n      nextHeight = metrics.height;\n      nextWidth = metrics.width;\n      nextBaseLine = metrics.baseline;\n    }\n    // increase height in case text element height exceeds\n    if (nextHeight > maxHeight) {\n      containerHeight = computeContainerDimensionForBoundText(\n        nextHeight,\n        container.type,\n      );\n\n      const diff = containerHeight - container.height;\n      // fix the y coord when resizing from ne/nw/n\n      const updatedY =\n        !isArrowElement(container) &&\n        (transformHandleType === \"ne\" ||\n          transformHandleType === \"nw\" ||\n          transformHandleType === \"n\")\n          ? container.y - diff\n          : container.y;\n      mutateElement(container, {\n        height: containerHeight,\n        y: updatedY,\n      });\n    }\n\n    mutateElement(textElement, {\n      text,\n      width: nextWidth,\n      height: nextHeight,\n      baseline: nextBaseLine,\n    });\n\n    if (!isArrowElement(container)) {\n      mutateElement(\n        textElement,\n        computeBoundTextPosition(container, textElement, elementsMap),\n      );\n    }\n  }\n};\n\nexport const computeBoundTextPosition = (\n  container: ExcalidrawElement,\n  boundTextElement: ExcalidrawTextElementWithContainer,\n  elementsMap: ElementsMap,\n) => {\n  if (isArrowElement(container)) {\n    return LinearElementEditor.getBoundTextElementPosition(\n      container,\n      boundTextElement,\n      elementsMap,\n    );\n  }\n  const containerCoords = getContainerCoords(container);\n  const maxContainerHeight = getBoundTextMaxHeight(container, boundTextElement);\n  const maxContainerWidth = getBoundTextMaxWidth(container, boundTextElement);\n\n  let x;\n  let y;\n  if (boundTextElement.verticalAlign === VERTICAL_ALIGN.TOP) {\n    y = containerCoords.y;\n  } else if (boundTextElement.verticalAlign === VERTICAL_ALIGN.BOTTOM) {\n    y = containerCoords.y + (maxContainerHeight - boundTextElement.height);\n  } else {\n    y =\n      containerCoords.y +\n      (maxContainerHeight / 2 - boundTextElement.height / 2);\n  }\n  if (boundTextElement.textAlign === TEXT_ALIGN.LEFT) {\n    x = containerCoords.x;\n  } else if (boundTextElement.textAlign === TEXT_ALIGN.RIGHT) {\n    x = containerCoords.x + (maxContainerWidth - boundTextElement.width);\n  } else {\n    x =\n      containerCoords.x + (maxContainerWidth / 2 - boundTextElement.width / 2);\n  }\n  return { x, y };\n};\n\n// https://github.com/grassator/canvas-text-editor/blob/master/lib/FontMetrics.js\n\nexport const measureText = (\n  text: string,\n  font: FontString,\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n) => {\n  text = text\n    .split(\"\\n\")\n    // replace empty lines with single space because leading/trailing empty\n    // lines would be stripped from computation\n    .map((x) => x || \" \")\n    .join(\"\\n\");\n  const fontSize = parseFloat(font);\n  const height = getTextHeight(text, fontSize, lineHeight);\n  const width = getTextWidth(text, font);\n  const baseline = measureBaseline(text, font, lineHeight);\n  return { width, height, baseline };\n};\n\nexport const measureBaseline = (\n  text: string,\n  font: FontString,\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n  wrapInContainer?: boolean,\n) => {\n  const container = document.createElement(\"div\");\n  container.style.position = \"absolute\";\n  container.style.whiteSpace = \"pre\";\n  container.style.font = font;\n  container.style.minHeight = \"1em\";\n  if (wrapInContainer) {\n    container.style.overflow = \"hidden\";\n    container.style.wordBreak = \"break-word\";\n    container.style.whiteSpace = \"pre-wrap\";\n  }\n\n  container.style.lineHeight = String(lineHeight);\n\n  container.innerText = text;\n\n  // Baseline is important for positioning text on canvas\n  document.body.appendChild(container);\n\n  const span = document.createElement(\"span\");\n  span.style.display = \"inline-block\";\n  span.style.overflow = \"hidden\";\n  span.style.width = \"1px\";\n  span.style.height = \"1px\";\n  container.appendChild(span);\n  let baseline = span.offsetTop + span.offsetHeight;\n  const height = container.offsetHeight;\n\n  if (isSafari) {\n    const canvasHeight = getTextHeight(text, parseFloat(font), lineHeight);\n    const fontSize = parseFloat(font);\n    // In Safari the font size gets rounded off when rendering hence calculating the safari height and shifting the baseline if it differs\n    // from the actual canvas height\n    const domHeight = getTextHeight(text, Math.round(fontSize), lineHeight);\n    if (canvasHeight > height) {\n      baseline += canvasHeight - domHeight;\n    }\n\n    if (height > canvasHeight) {\n      baseline -= domHeight - canvasHeight;\n    }\n  }\n  document.body.removeChild(container);\n  return baseline;\n};\n\n/**\n * To get unitless line-height (if unknown) we can calculate it by dividing\n * height-per-line by fontSize.\n */\nexport const detectLineHeight = (textElement: ExcalidrawTextElement) => {\n  const lineCount = splitIntoLines(textElement.text).length;\n  return (textElement.height /\n    lineCount /\n    textElement.fontSize) as ExcalidrawTextElement[\"lineHeight\"];\n};\n\n/**\n * We calculate the line height from the font size and the unitless line height,\n * aligning with the W3C spec.\n */\nexport const getLineHeightInPx = (\n  fontSize: ExcalidrawTextElement[\"fontSize\"],\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n) => {\n  return fontSize * lineHeight;\n};\n\n// FIXME rename to getApproxMinContainerHeight\nexport const getApproxMinLineHeight = (\n  fontSize: ExcalidrawTextElement[\"fontSize\"],\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n) => {\n  return getLineHeightInPx(fontSize, lineHeight) + BOUND_TEXT_PADDING * 2;\n};\n\nlet canvas: HTMLCanvasElement | undefined;\n\nconst getLineWidth = (text: string, font: FontString) => {\n  if (!canvas) {\n    canvas = document.createElement(\"canvas\");\n  }\n  const canvas2dContext = canvas.getContext(\"2d\")!;\n  canvas2dContext.font = font;\n  const width = canvas2dContext.measureText(text).width;\n\n  // since in test env the canvas measureText algo\n  // doesn't measure text and instead just returns number of\n  // characters hence we assume that each letteris 10px\n  if (isTestEnv()) {\n    return width * 10;\n  }\n  return width;\n};\n\nexport const getTextWidth = (text: string, font: FontString) => {\n  const lines = splitIntoLines(text);\n  let width = 0;\n  lines.forEach((line) => {\n    width = Math.max(width, getLineWidth(line, font));\n  });\n  return width;\n};\n\nexport const getTextHeight = (\n  text: string,\n  fontSize: number,\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n) => {\n  const lineCount = splitIntoLines(text).length;\n  return getLineHeightInPx(fontSize, lineHeight) * lineCount;\n};\n\nexport const parseTokens = (text: string) => {\n  // Splitting words containing \"-\" as those are treated as separate words\n  // by css wrapping algorithm eg non-profit => non-, profit\n  const words = text.split(\"-\");\n  if (words.length > 1) {\n    // non-proft org => ['non-', 'profit org']\n    words.forEach((word, index) => {\n      if (index !== words.length - 1) {\n        words[index] = word += \"-\";\n      }\n    });\n  }\n  // Joining the words with space and splitting them again with space to get the\n  // final list of tokens\n  // ['non-', 'profit org'] =>,'non- proft org' => ['non-','profit','org']\n  return words.join(\" \").split(\" \");\n};\n\nexport const wrapText = (text: string, font: FontString, maxWidth: number) => {\n  // if maxWidth is not finite or NaN which can happen in case of bugs in\n  // computation, we need to make sure we don't continue as we'll end up\n  // in an infinite loop\n  if (!Number.isFinite(maxWidth) || maxWidth < 0) {\n    return text;\n  }\n\n  const lines: Array<string> = [];\n  const originalLines = text.split(\"\\n\");\n  const spaceWidth = getLineWidth(\" \", font);\n\n  let currentLine = \"\";\n  let currentLineWidthTillNow = 0;\n\n  const push = (str: string) => {\n    if (str.trim()) {\n      lines.push(str);\n    }\n  };\n\n  const resetParams = () => {\n    currentLine = \"\";\n    currentLineWidthTillNow = 0;\n  };\n  originalLines.forEach((originalLine) => {\n    const currentLineWidth = getTextWidth(originalLine, font);\n\n    // Push the line if its <= maxWidth\n    if (currentLineWidth <= maxWidth) {\n      lines.push(originalLine);\n      return; // continue\n    }\n\n    const words = parseTokens(originalLine);\n    resetParams();\n\n    let index = 0;\n\n    while (index < words.length) {\n      const currentWordWidth = getLineWidth(words[index], font);\n\n      // This will only happen when single word takes entire width\n      if (currentWordWidth === maxWidth) {\n        push(words[index]);\n        index++;\n      }\n\n      // Start breaking longer words exceeding max width\n      else if (currentWordWidth > maxWidth) {\n        // push current line since the current word exceeds the max width\n        // so will be appended in next line\n\n        push(currentLine);\n\n        resetParams();\n\n        while (words[index].length > 0) {\n          const currentChar = String.fromCodePoint(\n            words[index].codePointAt(0)!,\n          );\n          const width = charWidth.calculate(currentChar, font);\n          currentLineWidthTillNow += width;\n          words[index] = words[index].slice(currentChar.length);\n\n          if (currentLineWidthTillNow >= maxWidth) {\n            push(currentLine);\n            currentLine = currentChar;\n            currentLineWidthTillNow = width;\n          } else {\n            currentLine += currentChar;\n          }\n        }\n        // push current line if appending space exceeds max width\n        if (currentLineWidthTillNow + spaceWidth >= maxWidth) {\n          push(currentLine);\n          resetParams();\n          // space needs to be appended before next word\n          // as currentLine contains chars which couldn't be appended\n          // to previous line unless the line ends with hyphen to sync\n          // with css word-wrap\n        } else if (!currentLine.endsWith(\"-\")) {\n          currentLine += \" \";\n          currentLineWidthTillNow += spaceWidth;\n        }\n        index++;\n      } else {\n        // Start appending words in a line till max width reached\n        while (currentLineWidthTillNow < maxWidth && index < words.length) {\n          const word = words[index];\n          currentLineWidthTillNow = getLineWidth(currentLine + word, font);\n\n          if (currentLineWidthTillNow > maxWidth) {\n            push(currentLine);\n            resetParams();\n\n            break;\n          }\n          index++;\n\n          // if word ends with \"-\" then we don't need to add space\n          // to sync with css word-wrap\n          const shouldAppendSpace = !word.endsWith(\"-\");\n          currentLine += word;\n\n          if (shouldAppendSpace) {\n            currentLine += \" \";\n          }\n\n          // Push the word if appending space exceeds max width\n          if (currentLineWidthTillNow + spaceWidth >= maxWidth) {\n            if (shouldAppendSpace) {\n              lines.push(currentLine.slice(0, -1));\n            } else {\n              lines.push(currentLine);\n            }\n            resetParams();\n            break;\n          }\n        }\n      }\n    }\n    if (currentLine.slice(-1) === \" \") {\n      // only remove last trailing space which we have added when joining words\n      currentLine = currentLine.slice(0, -1);\n      push(currentLine);\n    }\n  });\n  return lines.join(\"\\n\");\n};\n\nexport const charWidth = (() => {\n  const cachedCharWidth: { [key: FontString]: Array<number> } = {};\n\n  const calculate = (char: string, font: FontString) => {\n    const ascii = char.charCodeAt(0);\n    if (!cachedCharWidth[font]) {\n      cachedCharWidth[font] = [];\n    }\n    if (!cachedCharWidth[font][ascii]) {\n      const width = getLineWidth(char, font);\n      cachedCharWidth[font][ascii] = width;\n    }\n\n    return cachedCharWidth[font][ascii];\n  };\n\n  const getCache = (font: FontString) => {\n    return cachedCharWidth[font];\n  };\n  return {\n    calculate,\n    getCache,\n  };\n})();\n\nconst DUMMY_TEXT = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\".toLocaleUpperCase();\n\n// FIXME rename to getApproxMinContainerWidth\nexport const getApproxMinLineWidth = (\n  font: FontString,\n  lineHeight: ExcalidrawTextElement[\"lineHeight\"],\n) => {\n  const maxCharWidth = getMaxCharWidth(font);\n  if (maxCharWidth === 0) {\n    return (\n      measureText(DUMMY_TEXT.split(\"\").join(\"\\n\"), font, lineHeight).width +\n      BOUND_TEXT_PADDING * 2\n    );\n  }\n  return maxCharWidth + BOUND_TEXT_PADDING * 2;\n};\n\nexport const getMinCharWidth = (font: FontString) => {\n  const cache = charWidth.getCache(font);\n  if (!cache) {\n    return 0;\n  }\n  const cacheWithOutEmpty = cache.filter((val) => val !== undefined);\n\n  return Math.min(...cacheWithOutEmpty);\n};\n\nexport const getMaxCharWidth = (font: FontString) => {\n  const cache = charWidth.getCache(font);\n  if (!cache) {\n    return 0;\n  }\n  const cacheWithOutEmpty = cache.filter((val) => val !== undefined);\n  return Math.max(...cacheWithOutEmpty);\n};\n\nexport const getApproxCharsToFitInWidth = (font: FontString, width: number) => {\n  // Generally lower case is used so converting to lower case\n  const dummyText = DUMMY_TEXT.toLocaleLowerCase();\n  const batchLength = 6;\n  let index = 0;\n  let widthTillNow = 0;\n  let str = \"\";\n  while (widthTillNow <= width) {\n    const batch = dummyText.substr(index, index + batchLength);\n    str += batch;\n    widthTillNow += getLineWidth(str, font);\n    if (index === dummyText.length - 1) {\n      index = 0;\n    }\n    index = index + batchLength;\n  }\n\n  while (widthTillNow > width) {\n    str = str.substr(0, str.length - 1);\n    widthTillNow = getLineWidth(str, font);\n  }\n  return str.length;\n};\n\nexport const getBoundTextElementId = (container: ExcalidrawElement | null) => {\n  return container?.boundElements?.length\n    ? container?.boundElements?.filter((ele) => ele.type === \"text\")[0]?.id ||\n        null\n    : null;\n};\n\nexport const getBoundTextElement = (\n  element: ExcalidrawElement | null,\n  elementsMap: ElementsMap,\n) => {\n  if (!element) {\n    return null;\n  }\n  const boundTextElementId = getBoundTextElementId(element);\n\n  if (boundTextElementId) {\n    return (elementsMap.get(boundTextElementId) ||\n      null) as ExcalidrawTextElementWithContainer | null;\n  }\n  return null;\n};\n\nexport const getContainerElement = (\n  element: ExcalidrawTextElement | null,\n  elementsMap: ElementsMap,\n): ExcalidrawTextContainer | null => {\n  if (!element) {\n    return null;\n  }\n  if (element.containerId) {\n    return (elementsMap.get(element.containerId) ||\n      null) as ExcalidrawTextContainer | null;\n  }\n  return null;\n};\n\nexport const getContainerCenter = (\n  container: ExcalidrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  if (!isArrowElement(container)) {\n    return {\n      x: container.x + container.width / 2,\n      y: container.y + container.height / 2,\n    };\n  }\n  const points = LinearElementEditor.getPointsGlobalCoordinates(\n    container,\n    elementsMap,\n  );\n  if (points.length % 2 === 1) {\n    const index = Math.floor(container.points.length / 2);\n    const midPoint = LinearElementEditor.getPointGlobalCoordinates(\n      container,\n      container.points[index],\n      elementsMap,\n    );\n    return { x: midPoint[0], y: midPoint[1] };\n  }\n  const index = container.points.length / 2 - 1;\n  let midSegmentMidpoint = LinearElementEditor.getEditorMidPoints(\n    container,\n    elementsMap,\n    appState,\n  )[index];\n  if (!midSegmentMidpoint) {\n    midSegmentMidpoint = LinearElementEditor.getSegmentMidPoint(\n      container,\n      points[index],\n      points[index + 1],\n      index + 1,\n      elementsMap,\n    );\n  }\n  return { x: midSegmentMidpoint[0], y: midSegmentMidpoint[1] };\n};\n\nexport const getContainerCoords = (container: NonDeletedExcalidrawElement) => {\n  let offsetX = BOUND_TEXT_PADDING;\n  let offsetY = BOUND_TEXT_PADDING;\n\n  if (container.type === \"ellipse\") {\n    // The derivation of coordinates is explained in https://github.com/excalidraw/excalidraw/pull/6172\n    offsetX += (container.width / 2) * (1 - Math.sqrt(2) / 2);\n    offsetY += (container.height / 2) * (1 - Math.sqrt(2) / 2);\n  }\n  // The derivation of coordinates is explained in https://github.com/excalidraw/excalidraw/pull/6265\n  if (container.type === \"diamond\") {\n    offsetX += container.width / 4;\n    offsetY += container.height / 4;\n  }\n  return {\n    x: container.x + offsetX,\n    y: container.y + offsetY,\n  };\n};\n\nexport const getTextElementAngle = (\n  textElement: ExcalidrawTextElement,\n  container: ExcalidrawTextContainer | null,\n) => {\n  if (!container || isArrowElement(container)) {\n    return textElement.angle;\n  }\n  return container.angle;\n};\n\nexport const getBoundTextElementPosition = (\n  container: ExcalidrawElement,\n  boundTextElement: ExcalidrawTextElementWithContainer,\n  elementsMap: ElementsMap,\n) => {\n  if (isArrowElement(container)) {\n    return LinearElementEditor.getBoundTextElementPosition(\n      container,\n      boundTextElement,\n      elementsMap,\n    );\n  }\n};\n\nexport const shouldAllowVerticalAlign = (\n  selectedElements: NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n) => {\n  return selectedElements.some((element) => {\n    if (isBoundToContainer(element)) {\n      const container = getContainerElement(element, elementsMap);\n      if (isArrowElement(container)) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  });\n};\n\nexport const suppportsHorizontalAlign = (\n  selectedElements: NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n) => {\n  return selectedElements.some((element) => {\n    if (isBoundToContainer(element)) {\n      const container = getContainerElement(element, elementsMap);\n      if (isArrowElement(container)) {\n        return false;\n      }\n      return true;\n    }\n\n    return isTextElement(element);\n  });\n};\n\nexport const getTextBindableContainerAtPosition = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  x: number,\n  y: number,\n  elementsMap: ElementsMap,\n): ExcalidrawTextContainer | null => {\n  const selectedElements = getSelectedElements(elements, appState);\n  if (selectedElements.length === 1) {\n    return isTextBindableContainer(selectedElements[0], false)\n      ? selectedElements[0]\n      : null;\n  }\n  let hitElement = null;\n  // We need to to hit testing from front (end of the array) to back (beginning of the array)\n  for (let index = elements.length - 1; index >= 0; --index) {\n    if (elements[index].isDeleted) {\n      continue;\n    }\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(\n      elements[index],\n      elementsMap,\n    );\n    if (\n      isArrowElement(elements[index]) &&\n      isHittingElementNotConsideringBoundingBox(\n        elements[index],\n        appState,\n        null,\n        [x, y],\n        elementsMap,\n      )\n    ) {\n      hitElement = elements[index];\n      break;\n    } else if (x1 < x && x < x2 && y1 < y && y < y2) {\n      hitElement = elements[index];\n      break;\n    }\n  }\n\n  return isTextBindableContainer(hitElement, false) ? hitElement : null;\n};\n\nconst VALID_CONTAINER_TYPES = new Set([\n  \"rectangle\",\n  \"ellipse\",\n  \"diamond\",\n  \"arrow\",\n]);\n\nexport const isValidTextContainer = (element: {\n  type: ExcalidrawElementType;\n}) => VALID_CONTAINER_TYPES.has(element.type);\n\nexport const computeContainerDimensionForBoundText = (\n  dimension: number,\n  containerType: ExtractSetType<typeof VALID_CONTAINER_TYPES>,\n) => {\n  dimension = Math.ceil(dimension);\n  const padding = BOUND_TEXT_PADDING * 2;\n\n  if (containerType === \"ellipse\") {\n    return Math.round(((dimension + padding) / Math.sqrt(2)) * 2);\n  }\n  if (containerType === \"arrow\") {\n    return dimension + padding * 8;\n  }\n  if (containerType === \"diamond\") {\n    return 2 * (dimension + padding);\n  }\n  return dimension + padding;\n};\n\nexport const getBoundTextMaxWidth = (\n  container: ExcalidrawElement,\n  boundTextElement: ExcalidrawTextElement | null,\n) => {\n  const { width } = container;\n  if (isArrowElement(container)) {\n    const minWidth =\n      (boundTextElement?.fontSize ?? DEFAULT_FONT_SIZE) *\n      ARROW_LABEL_FONT_SIZE_TO_MIN_WIDTH_RATIO;\n    return Math.max(ARROW_LABEL_WIDTH_FRACTION * width, minWidth);\n  }\n  if (container.type === \"ellipse\") {\n    // The width of the largest rectangle inscribed inside an ellipse is\n    // Math.round((ellipse.width / 2) * Math.sqrt(2)) which is derived from\n    // equation of an ellipse -https://github.com/excalidraw/excalidraw/pull/6172\n    return Math.round((width / 2) * Math.sqrt(2)) - BOUND_TEXT_PADDING * 2;\n  }\n  if (container.type === \"diamond\") {\n    // The width of the largest rectangle inscribed inside a rhombus is\n    // Math.round(width / 2) - https://github.com/excalidraw/excalidraw/pull/6265\n    return Math.round(width / 2) - BOUND_TEXT_PADDING * 2;\n  }\n  return width - BOUND_TEXT_PADDING * 2;\n};\n\nexport const getBoundTextMaxHeight = (\n  container: ExcalidrawElement,\n  boundTextElement: ExcalidrawTextElementWithContainer,\n) => {\n  const { height } = container;\n  if (isArrowElement(container)) {\n    const containerHeight = height - BOUND_TEXT_PADDING * 8 * 2;\n    if (containerHeight <= 0) {\n      return boundTextElement.height;\n    }\n    return height;\n  }\n  if (container.type === \"ellipse\") {\n    // The height of the largest rectangle inscribed inside an ellipse is\n    // Math.round((ellipse.height / 2) * Math.sqrt(2)) which is derived from\n    // equation of an ellipse - https://github.com/excalidraw/excalidraw/pull/6172\n    return Math.round((height / 2) * Math.sqrt(2)) - BOUND_TEXT_PADDING * 2;\n  }\n  if (container.type === \"diamond\") {\n    // The height of the largest rectangle inscribed inside a rhombus is\n    // Math.round(height / 2) - https://github.com/excalidraw/excalidraw/pull/6265\n    return Math.round(height / 2) - BOUND_TEXT_PADDING * 2;\n  }\n  return height - BOUND_TEXT_PADDING * 2;\n};\n\nexport const isMeasureTextSupported = () => {\n  const width = getTextWidth(\n    DUMMY_TEXT,\n    getFontString({\n      fontSize: DEFAULT_FONT_SIZE,\n      fontFamily: DEFAULT_FONT_FAMILY,\n    }),\n  );\n  return width > 0;\n};\n\n/**\n * Unitless line height\n *\n * In previous versions we used `normal` line height, which browsers interpret\n * differently, and based on font-family and font-size.\n *\n * To make line heights consistent across browsers we hardcode the values for\n * each of our fonts based on most common average line-heights.\n * See https://github.com/excalidraw/excalidraw/pull/6360#issuecomment-1477635971\n * where the values come from.\n */\nconst DEFAULT_LINE_HEIGHT = {\n  // ~1.25 is the average for Virgil in WebKit and Blink.\n  // Gecko (FF) uses ~1.28.\n  [FONT_FAMILY.Virgil]: 1.25 as ExcalidrawTextElement[\"lineHeight\"],\n  // ~1.15 is the average for Virgil in WebKit and Blink.\n  // Gecko if all over the place.\n  [FONT_FAMILY.Helvetica]: 1.15 as ExcalidrawTextElement[\"lineHeight\"],\n  // ~1.2 is the average for Virgil in WebKit and Blink, and kinda Gecko too\n  [FONT_FAMILY.Cascadia]: 1.2 as ExcalidrawTextElement[\"lineHeight\"],\n};\n\nexport const getDefaultLineHeight = (fontFamily: FontFamilyValues) => {\n  if (fontFamily in DEFAULT_LINE_HEIGHT) {\n    return DEFAULT_LINE_HEIGHT[fontFamily];\n  }\n  return DEFAULT_LINE_HEIGHT[DEFAULT_FONT_FAMILY];\n};\n", "import {\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  Arrowhead,\n  ExcalidrawFreeDrawElement,\n  NonDeleted,\n  ExcalidrawTextElementWithContainer,\n  ElementsMap,\n} from \"./types\";\nimport { distance2d, rotate, rotatePoint } from \"../math\";\nimport rough from \"roughjs/bin/rough\";\nimport { Drawable, Op } from \"roughjs/bin/core\";\nimport { AppState, Point } from \"../types\";\nimport { generateRoughOptions } from \"../scene/Shape\";\nimport {\n  isArrowElement,\n  isBoundToContainer,\n  isFreeDrawElement,\n  isLinearElement,\n  isTextElement,\n} from \"./typeChecks\";\nimport { rescalePoints } from \"../points\";\nimport { getBoundTextElement, getContainerElement } from \"./textElement\";\nimport { LinearElementEditor } from \"./linearElementEditor\";\nimport { Mutable } from \"../utility-types\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\nimport { arrayToMap } from \"../utils\";\n\nexport type RectangleBox = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  angle: number;\n};\n\ntype MaybeQuadraticSolution = [number | null, number | null] | false;\n\n/**\n * x and y position of top left corner, x and y position of bottom right corner\n */\nexport type Bounds = readonly [\n  minX: number,\n  minY: number,\n  maxX: number,\n  maxY: number,\n];\n\nexport type SceneBounds = readonly [\n  sceneX: number,\n  sceneY: number,\n  sceneX2: number,\n  sceneY2: number,\n];\n\nexport class ElementBounds {\n  private static boundsCache = new WeakMap<\n    ExcalidrawElement,\n    {\n      bounds: Bounds;\n      version: ExcalidrawElement[\"version\"];\n    }\n  >();\n\n  static getBounds(element: ExcalidrawElement, elementsMap: ElementsMap) {\n    const cachedBounds = ElementBounds.boundsCache.get(element);\n\n    if (\n      cachedBounds?.version &&\n      cachedBounds.version === element.version &&\n      // we don't invalidate cache when we update containers and not labels,\n      // which is causing problems down the line. Fix TBA.\n      !isBoundToContainer(element)\n    ) {\n      return cachedBounds.bounds;\n    }\n    const bounds = ElementBounds.calculateBounds(element, elementsMap);\n\n    ElementBounds.boundsCache.set(element, {\n      version: element.version,\n      bounds,\n    });\n\n    return bounds;\n  }\n\n  private static calculateBounds(\n    element: ExcalidrawElement,\n    elementsMap: ElementsMap,\n  ): Bounds {\n    let bounds: Bounds;\n\n    const [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n      element,\n      elementsMap,\n    );\n    if (isFreeDrawElement(element)) {\n      const [minX, minY, maxX, maxY] = getBoundsFromPoints(\n        element.points.map(([x, y]) =>\n          rotate(x, y, cx - element.x, cy - element.y, element.angle),\n        ),\n      );\n\n      return [\n        minX + element.x,\n        minY + element.y,\n        maxX + element.x,\n        maxY + element.y,\n      ];\n    } else if (isLinearElement(element)) {\n      bounds = getLinearElementRotatedBounds(element, cx, cy, elementsMap);\n    } else if (element.type === \"diamond\") {\n      const [x11, y11] = rotate(cx, y1, cx, cy, element.angle);\n      const [x12, y12] = rotate(cx, y2, cx, cy, element.angle);\n      const [x22, y22] = rotate(x1, cy, cx, cy, element.angle);\n      const [x21, y21] = rotate(x2, cy, cx, cy, element.angle);\n      const minX = Math.min(x11, x12, x22, x21);\n      const minY = Math.min(y11, y12, y22, y21);\n      const maxX = Math.max(x11, x12, x22, x21);\n      const maxY = Math.max(y11, y12, y22, y21);\n      bounds = [minX, minY, maxX, maxY];\n    } else if (element.type === \"ellipse\") {\n      const w = (x2 - x1) / 2;\n      const h = (y2 - y1) / 2;\n      const cos = Math.cos(element.angle);\n      const sin = Math.sin(element.angle);\n      const ww = Math.hypot(w * cos, h * sin);\n      const hh = Math.hypot(h * cos, w * sin);\n      bounds = [cx - ww, cy - hh, cx + ww, cy + hh];\n    } else {\n      const [x11, y11] = rotate(x1, y1, cx, cy, element.angle);\n      const [x12, y12] = rotate(x1, y2, cx, cy, element.angle);\n      const [x22, y22] = rotate(x2, y2, cx, cy, element.angle);\n      const [x21, y21] = rotate(x2, y1, cx, cy, element.angle);\n      const minX = Math.min(x11, x12, x22, x21);\n      const minY = Math.min(y11, y12, y22, y21);\n      const maxX = Math.max(x11, x12, x22, x21);\n      const maxY = Math.max(y11, y12, y22, y21);\n      bounds = [minX, minY, maxX, maxY];\n    }\n\n    return bounds;\n  }\n}\n\n// Scene -> Scene coords, but in x1,x2,y1,y2 format.\n//\n// If the element is created from right to left, the width is going to be negative\n// This set of functions retrieves the absolute position of the 4 points.\nexport const getElementAbsoluteCoords = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n  includeBoundText: boolean = false,\n): [number, number, number, number, number, number] => {\n  if (isFreeDrawElement(element)) {\n    return getFreeDrawElementAbsoluteCoords(element);\n  } else if (isLinearElement(element)) {\n    return LinearElementEditor.getElementAbsoluteCoords(\n      element,\n      elementsMap,\n      includeBoundText,\n    );\n  } else if (isTextElement(element)) {\n    const container = elementsMap\n      ? getContainerElement(element, elementsMap)\n      : null;\n    if (isArrowElement(container)) {\n      const coords = LinearElementEditor.getBoundTextElementPosition(\n        container,\n        element as ExcalidrawTextElementWithContainer,\n        elementsMap,\n      );\n      return [\n        coords.x,\n        coords.y,\n        coords.x + element.width,\n        coords.y + element.height,\n        coords.x + element.width / 2,\n        coords.y + element.height / 2,\n      ];\n    }\n  }\n  return [\n    element.x,\n    element.y,\n    element.x + element.width,\n    element.y + element.height,\n    element.x + element.width / 2,\n    element.y + element.height / 2,\n  ];\n};\n\n/*\n * for a given element, `getElementLineSegments` returns line segments\n * that can be used for visual collision detection (useful for frames)\n * as opposed to bounding box collision detection\n */\nexport const getElementLineSegments = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n): [Point, Point][] => {\n  const [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n    element,\n    elementsMap,\n  );\n\n  const center: Point = [cx, cy];\n\n  if (isLinearElement(element) || isFreeDrawElement(element)) {\n    const segments: [Point, Point][] = [];\n\n    let i = 0;\n\n    while (i < element.points.length - 1) {\n      segments.push([\n        rotatePoint(\n          [\n            element.points[i][0] + element.x,\n            element.points[i][1] + element.y,\n          ] as Point,\n          center,\n          element.angle,\n        ),\n        rotatePoint(\n          [\n            element.points[i + 1][0] + element.x,\n            element.points[i + 1][1] + element.y,\n          ] as Point,\n          center,\n          element.angle,\n        ),\n      ]);\n      i++;\n    }\n\n    return segments;\n  }\n\n  const [nw, ne, sw, se, n, s, w, e] = (\n    [\n      [x1, y1],\n      [x2, y1],\n      [x1, y2],\n      [x2, y2],\n      [cx, y1],\n      [cx, y2],\n      [x1, cy],\n      [x2, cy],\n    ] as Point[]\n  ).map((point) => rotatePoint(point, center, element.angle));\n\n  if (element.type === \"diamond\") {\n    return [\n      [n, w],\n      [n, e],\n      [s, w],\n      [s, e],\n    ];\n  }\n\n  if (element.type === \"ellipse\") {\n    return [\n      [n, w],\n      [n, e],\n      [s, w],\n      [s, e],\n      [n, w],\n      [n, e],\n      [s, w],\n      [s, e],\n    ];\n  }\n\n  return [\n    [nw, ne],\n    [sw, se],\n    [nw, sw],\n    [ne, se],\n    [nw, e],\n    [sw, e],\n    [ne, w],\n    [se, w],\n  ];\n};\n\n/**\n * Scene -> Scene coords, but in x1,x2,y1,y2 format.\n *\n * Rectangle here means any rectangular frame, not an excalidraw element.\n */\nexport const getRectangleBoxAbsoluteCoords = (boxSceneCoords: RectangleBox) => {\n  return [\n    boxSceneCoords.x,\n    boxSceneCoords.y,\n    boxSceneCoords.x + boxSceneCoords.width,\n    boxSceneCoords.y + boxSceneCoords.height,\n    boxSceneCoords.x + boxSceneCoords.width / 2,\n    boxSceneCoords.y + boxSceneCoords.height / 2,\n  ];\n};\n\nexport const pointRelativeTo = (\n  element: ExcalidrawElement,\n  absoluteCoords: Point,\n): Point => {\n  return [absoluteCoords[0] - element.x, absoluteCoords[1] - element.y];\n};\n\nexport const getDiamondPoints = (element: ExcalidrawElement) => {\n  // Here we add +1 to avoid these numbers to be 0\n  // otherwise rough.js will throw an error complaining about it\n  const topX = Math.floor(element.width / 2) + 1;\n  const topY = 0;\n  const rightX = element.width;\n  const rightY = Math.floor(element.height / 2) + 1;\n  const bottomX = topX;\n  const bottomY = element.height;\n  const leftX = 0;\n  const leftY = rightY;\n\n  return [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY];\n};\n\nexport const getCurvePathOps = (shape: Drawable): Op[] => {\n  for (const set of shape.sets) {\n    if (set.type === \"path\") {\n      return set.ops;\n    }\n  }\n  return shape.sets[0].ops;\n};\n\n// reference: https://eliot-jones.com/2019/12/cubic-bezier-curve-bounding-boxes\nconst getBezierValueForT = (\n  t: number,\n  p0: number,\n  p1: number,\n  p2: number,\n  p3: number,\n) => {\n  const oneMinusT = 1 - t;\n  return (\n    Math.pow(oneMinusT, 3) * p0 +\n    3 * Math.pow(oneMinusT, 2) * t * p1 +\n    3 * oneMinusT * Math.pow(t, 2) * p2 +\n    Math.pow(t, 3) * p3\n  );\n};\n\nconst solveQuadratic = (\n  p0: number,\n  p1: number,\n  p2: number,\n  p3: number,\n): MaybeQuadraticSolution => {\n  const i = p1 - p0;\n  const j = p2 - p1;\n  const k = p3 - p2;\n\n  const a = 3 * i - 6 * j + 3 * k;\n  const b = 6 * j - 6 * i;\n  const c = 3 * i;\n\n  const sqrtPart = b * b - 4 * a * c;\n  const hasSolution = sqrtPart >= 0;\n\n  if (!hasSolution) {\n    return false;\n  }\n\n  let s1 = null;\n  let s2 = null;\n\n  let t1 = Infinity;\n  let t2 = Infinity;\n\n  if (a === 0) {\n    t1 = t2 = -c / b;\n  } else {\n    t1 = (-b + Math.sqrt(sqrtPart)) / (2 * a);\n    t2 = (-b - Math.sqrt(sqrtPart)) / (2 * a);\n  }\n\n  if (t1 >= 0 && t1 <= 1) {\n    s1 = getBezierValueForT(t1, p0, p1, p2, p3);\n  }\n\n  if (t2 >= 0 && t2 <= 1) {\n    s2 = getBezierValueForT(t2, p0, p1, p2, p3);\n  }\n\n  return [s1, s2];\n};\n\nconst getCubicBezierCurveBound = (\n  p0: Point,\n  p1: Point,\n  p2: Point,\n  p3: Point,\n): Bounds => {\n  const solX = solveQuadratic(p0[0], p1[0], p2[0], p3[0]);\n  const solY = solveQuadratic(p0[1], p1[1], p2[1], p3[1]);\n\n  let minX = Math.min(p0[0], p3[0]);\n  let maxX = Math.max(p0[0], p3[0]);\n\n  if (solX) {\n    const xs = solX.filter((x) => x !== null) as number[];\n    minX = Math.min(minX, ...xs);\n    maxX = Math.max(maxX, ...xs);\n  }\n\n  let minY = Math.min(p0[1], p3[1]);\n  let maxY = Math.max(p0[1], p3[1]);\n  if (solY) {\n    const ys = solY.filter((y) => y !== null) as number[];\n    minY = Math.min(minY, ...ys);\n    maxY = Math.max(maxY, ...ys);\n  }\n  return [minX, minY, maxX, maxY];\n};\n\nexport const getMinMaxXYFromCurvePathOps = (\n  ops: Op[],\n  transformXY?: (x: number, y: number) => [number, number],\n): Bounds => {\n  let currentP: Point = [0, 0];\n\n  const { minX, minY, maxX, maxY } = ops.reduce(\n    (limits, { op, data }) => {\n      // There are only four operation types:\n      // move, bcurveTo, lineTo, and curveTo\n      if (op === \"move\") {\n        // change starting point\n        currentP = data as unknown as Point;\n        // move operation does not draw anything; so, it always\n        // returns false\n      } else if (op === \"bcurveTo\") {\n        const _p1 = [data[0], data[1]] as Point;\n        const _p2 = [data[2], data[3]] as Point;\n        const _p3 = [data[4], data[5]] as Point;\n\n        const p1 = transformXY ? transformXY(..._p1) : _p1;\n        const p2 = transformXY ? transformXY(..._p2) : _p2;\n        const p3 = transformXY ? transformXY(..._p3) : _p3;\n\n        const p0 = transformXY ? transformXY(...currentP) : currentP;\n        currentP = _p3;\n\n        const [minX, minY, maxX, maxY] = getCubicBezierCurveBound(\n          p0,\n          p1,\n          p2,\n          p3,\n        );\n\n        limits.minX = Math.min(limits.minX, minX);\n        limits.minY = Math.min(limits.minY, minY);\n\n        limits.maxX = Math.max(limits.maxX, maxX);\n        limits.maxY = Math.max(limits.maxY, maxY);\n      } else if (op === \"lineTo\") {\n        // TODO: Implement this\n      } else if (op === \"qcurveTo\") {\n        // TODO: Implement this\n      }\n      return limits;\n    },\n    { minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity },\n  );\n  return [minX, minY, maxX, maxY];\n};\n\nexport const getBoundsFromPoints = (\n  points: ExcalidrawFreeDrawElement[\"points\"],\n): Bounds => {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  for (const [x, y] of points) {\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  }\n\n  return [minX, minY, maxX, maxY];\n};\n\nconst getFreeDrawElementAbsoluteCoords = (\n  element: ExcalidrawFreeDrawElement,\n): [number, number, number, number, number, number] => {\n  const [minX, minY, maxX, maxY] = getBoundsFromPoints(element.points);\n  const x1 = minX + element.x;\n  const y1 = minY + element.y;\n  const x2 = maxX + element.x;\n  const y2 = maxY + element.y;\n  return [x1, y1, x2, y2, (x1 + x2) / 2, (y1 + y2) / 2];\n};\n\n/** @returns number in pixels */\nexport const getArrowheadSize = (arrowhead: Arrowhead): number => {\n  switch (arrowhead) {\n    case \"arrow\":\n      return 25;\n    case \"diamond\":\n    case \"diamond_outline\":\n      return 12;\n    default:\n      return 15;\n  }\n};\n\n/** @returns number in degrees */\nexport const getArrowheadAngle = (arrowhead: Arrowhead): number => {\n  switch (arrowhead) {\n    case \"bar\":\n      return 90;\n    case \"arrow\":\n      return 20;\n    default:\n      return 25;\n  }\n};\n\nexport const getArrowheadPoints = (\n  element: ExcalidrawLinearElement,\n  shape: Drawable[],\n  position: \"start\" | \"end\",\n  arrowhead: Arrowhead,\n) => {\n  const ops = getCurvePathOps(shape[0]);\n  if (ops.length < 1) {\n    return null;\n  }\n\n  // The index of the bCurve operation to examine.\n  const index = position === \"start\" ? 1 : ops.length - 1;\n\n  const data = ops[index].data;\n  const p3 = [data[4], data[5]] as Point;\n  const p2 = [data[2], data[3]] as Point;\n  const p1 = [data[0], data[1]] as Point;\n\n  // We need to find p0 of the bezier curve.\n  // It is typically the last point of the previous\n  // curve; it can also be the position of moveTo operation.\n  const prevOp = ops[index - 1];\n  let p0: Point = [0, 0];\n  if (prevOp.op === \"move\") {\n    p0 = prevOp.data as unknown as Point;\n  } else if (prevOp.op === \"bcurveTo\") {\n    p0 = [prevOp.data[4], prevOp.data[5]];\n  }\n\n  // B(t) = p0 * (1-t)^3 + 3p1 * t * (1-t)^2 + 3p2 * t^2 * (1-t) + p3 * t^3\n  const equation = (t: number, idx: number) =>\n    Math.pow(1 - t, 3) * p3[idx] +\n    3 * t * Math.pow(1 - t, 2) * p2[idx] +\n    3 * Math.pow(t, 2) * (1 - t) * p1[idx] +\n    p0[idx] * Math.pow(t, 3);\n\n  // Ee know the last point of the arrow (or the first, if start arrowhead).\n  const [x2, y2] = position === \"start\" ? p0 : p3;\n\n  // By using cubic bezier equation (B(t)) and the given parameters,\n  // we calculate a point that is closer to the last point.\n  // The value 0.3 is chosen arbitrarily and it works best for all\n  // the tested cases.\n  const [x1, y1] = [equation(0.3, 0), equation(0.3, 1)];\n\n  // Find the normalized direction vector based on the\n  // previously calculated points.\n  const distance = Math.hypot(x2 - x1, y2 - y1);\n  const nx = (x2 - x1) / distance;\n  const ny = (y2 - y1) / distance;\n\n  const size = getArrowheadSize(arrowhead);\n\n  let length = 0;\n\n  {\n    // Length for -> arrows is based on the length of the last section\n    const [cx, cy] =\n      position === \"end\"\n        ? element.points[element.points.length - 1]\n        : element.points[0];\n    const [px, py] =\n      element.points.length > 1\n        ? position === \"end\"\n          ? element.points[element.points.length - 2]\n          : element.points[1]\n        : [0, 0];\n\n    length = Math.hypot(cx - px, cy - py);\n  }\n\n  // Scale down the arrowhead until we hit a certain size so that it doesn't look weird.\n  // This value is selected by minimizing a minimum size with the last segment of the arrowhead\n  const lengthMultiplier =\n    arrowhead === \"diamond\" || arrowhead === \"diamond_outline\" ? 0.25 : 0.5;\n  const minSize = Math.min(size, length * lengthMultiplier);\n  const xs = x2 - nx * minSize;\n  const ys = y2 - ny * minSize;\n\n  if (\n    arrowhead === \"dot\" ||\n    arrowhead === \"circle\" ||\n    arrowhead === \"circle_outline\"\n  ) {\n    const diameter = Math.hypot(ys - y2, xs - x2) + element.strokeWidth - 2;\n    return [x2, y2, diameter];\n  }\n\n  const angle = getArrowheadAngle(arrowhead);\n\n  // Return points\n  const [x3, y3] = rotate(xs, ys, x2, y2, (-angle * Math.PI) / 180);\n  const [x4, y4] = rotate(xs, ys, x2, y2, (angle * Math.PI) / 180);\n\n  if (arrowhead === \"diamond\" || arrowhead === \"diamond_outline\") {\n    // point opposite to the arrowhead point\n    let ox;\n    let oy;\n\n    if (position === \"start\") {\n      const [px, py] = element.points.length > 1 ? element.points[1] : [0, 0];\n\n      [ox, oy] = rotate(\n        x2 + minSize * 2,\n        y2,\n        x2,\n        y2,\n        Math.atan2(py - y2, px - x2),\n      );\n    } else {\n      const [px, py] =\n        element.points.length > 1\n          ? element.points[element.points.length - 2]\n          : [0, 0];\n\n      [ox, oy] = rotate(\n        x2 - minSize * 2,\n        y2,\n        x2,\n        y2,\n        Math.atan2(y2 - py, x2 - px),\n      );\n    }\n\n    return [x2, y2, x3, y3, ox, oy, x4, y4];\n  }\n\n  return [x2, y2, x3, y3, x4, y4];\n};\n\nconst generateLinearElementShape = (\n  element: ExcalidrawLinearElement,\n): Drawable => {\n  const generator = rough.generator();\n  const options = generateRoughOptions(element);\n\n  const method = (() => {\n    if (element.roundness) {\n      return \"curve\";\n    }\n    if (options.fill) {\n      return \"polygon\";\n    }\n    return \"linearPath\";\n  })();\n\n  return generator[method](element.points as Mutable<Point>[], options);\n};\n\nconst getLinearElementRotatedBounds = (\n  element: ExcalidrawLinearElement,\n  cx: number,\n  cy: number,\n  elementsMap: ElementsMap,\n): Bounds => {\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n\n  if (element.points.length < 2) {\n    const [pointX, pointY] = element.points[0];\n    const [x, y] = rotate(\n      element.x + pointX,\n      element.y + pointY,\n      cx,\n      cy,\n      element.angle,\n    );\n\n    let coords: Bounds = [x, y, x, y];\n    if (boundTextElement) {\n      const coordsWithBoundText = LinearElementEditor.getMinMaxXYWithBoundText(\n        element,\n        elementsMap,\n        [x, y, x, y],\n        boundTextElement,\n      );\n      coords = [\n        coordsWithBoundText[0],\n        coordsWithBoundText[1],\n        coordsWithBoundText[2],\n        coordsWithBoundText[3],\n      ];\n    }\n    return coords;\n  }\n\n  // first element is always the curve\n  const cachedShape = ShapeCache.get(element)?.[0];\n  const shape = cachedShape ?? generateLinearElementShape(element);\n  const ops = getCurvePathOps(shape);\n  const transformXY = (x: number, y: number) =>\n    rotate(element.x + x, element.y + y, cx, cy, element.angle);\n  const res = getMinMaxXYFromCurvePathOps(ops, transformXY);\n  let coords: Bounds = [res[0], res[1], res[2], res[3]];\n  if (boundTextElement) {\n    const coordsWithBoundText = LinearElementEditor.getMinMaxXYWithBoundText(\n      element,\n      elementsMap,\n      coords,\n      boundTextElement,\n    );\n    coords = [\n      coordsWithBoundText[0],\n      coordsWithBoundText[1],\n      coordsWithBoundText[2],\n      coordsWithBoundText[3],\n    ];\n  }\n  return coords;\n};\n\nexport const getElementBounds = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n): Bounds => {\n  return ElementBounds.getBounds(element, elementsMap);\n};\n\nexport const getCommonBounds = (\n  elements: readonly ExcalidrawElement[],\n): Bounds => {\n  if (!elements.length) {\n    return [0, 0, 0, 0];\n  }\n\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n\n  const elementsMap = arrayToMap(elements);\n\n  elements.forEach((element) => {\n    const [x1, y1, x2, y2] = getElementBounds(element, elementsMap);\n    minX = Math.min(minX, x1);\n    minY = Math.min(minY, y1);\n    maxX = Math.max(maxX, x2);\n    maxY = Math.max(maxY, y2);\n  });\n\n  return [minX, minY, maxX, maxY];\n};\n\nexport const getDraggedElementsBounds = (\n  elements: ExcalidrawElement[],\n  dragOffset: { x: number; y: number },\n) => {\n  const [minX, minY, maxX, maxY] = getCommonBounds(elements);\n  return [\n    minX + dragOffset.x,\n    minY + dragOffset.y,\n    maxX + dragOffset.x,\n    maxY + dragOffset.y,\n  ];\n};\n\nexport const getResizedElementAbsoluteCoords = (\n  element: ExcalidrawElement,\n  nextWidth: number,\n  nextHeight: number,\n  normalizePoints: boolean,\n): Bounds => {\n  if (!(isLinearElement(element) || isFreeDrawElement(element))) {\n    return [\n      element.x,\n      element.y,\n      element.x + nextWidth,\n      element.y + nextHeight,\n    ];\n  }\n\n  const points = rescalePoints(\n    0,\n    nextWidth,\n    rescalePoints(1, nextHeight, element.points, normalizePoints),\n    normalizePoints,\n  );\n\n  let bounds: Bounds;\n\n  if (isFreeDrawElement(element)) {\n    // Free Draw\n    bounds = getBoundsFromPoints(points);\n  } else {\n    // Line\n    const gen = rough.generator();\n    const curve = !element.roundness\n      ? gen.linearPath(\n          points as [number, number][],\n          generateRoughOptions(element),\n        )\n      : gen.curve(points as [number, number][], generateRoughOptions(element));\n\n    const ops = getCurvePathOps(curve);\n    bounds = getMinMaxXYFromCurvePathOps(ops);\n  }\n\n  const [minX, minY, maxX, maxY] = bounds;\n  return [\n    minX + element.x,\n    minY + element.y,\n    maxX + element.x,\n    maxY + element.y,\n  ];\n};\n\nexport const getElementPointsCoords = (\n  element: ExcalidrawLinearElement,\n  points: readonly (readonly [number, number])[],\n): Bounds => {\n  // This might be computationally heavey\n  const gen = rough.generator();\n  const curve =\n    element.roundness == null\n      ? gen.linearPath(\n          points as [number, number][],\n          generateRoughOptions(element),\n        )\n      : gen.curve(points as [number, number][], generateRoughOptions(element));\n  const ops = getCurvePathOps(curve);\n  const [minX, minY, maxX, maxY] = getMinMaxXYFromCurvePathOps(ops);\n  return [\n    minX + element.x,\n    minY + element.y,\n    maxX + element.x,\n    maxY + element.y,\n  ];\n};\n\nexport const getClosestElementBounds = (\n  elements: readonly ExcalidrawElement[],\n  from: { x: number; y: number },\n): Bounds => {\n  if (!elements.length) {\n    return [0, 0, 0, 0];\n  }\n\n  let minDistance = Infinity;\n  let closestElement = elements[0];\n  const elementsMap = arrayToMap(elements);\n  elements.forEach((element) => {\n    const [x1, y1, x2, y2] = getElementBounds(element, elementsMap);\n    const distance = distance2d((x1 + x2) / 2, (y1 + y2) / 2, from.x, from.y);\n\n    if (distance < minDistance) {\n      minDistance = distance;\n      closestElement = element;\n    }\n  });\n\n  return getElementBounds(closestElement, elementsMap);\n};\n\nexport interface BoundingBox {\n  minX: number;\n  minY: number;\n  maxX: number;\n  maxY: number;\n  midX: number;\n  midY: number;\n  width: number;\n  height: number;\n}\n\nexport const getCommonBoundingBox = (\n  elements: ExcalidrawElement[] | readonly NonDeleted<ExcalidrawElement>[],\n): BoundingBox => {\n  const [minX, minY, maxX, maxY] = getCommonBounds(elements);\n  return {\n    minX,\n    minY,\n    maxX,\n    maxY,\n    width: maxX - minX,\n    height: maxY - minY,\n    midX: (minX + maxX) / 2,\n    midY: (minY + maxY) / 2,\n  };\n};\n\n/**\n * returns scene coords of user's editor viewport (visible canvas area) bounds\n */\nexport const getVisibleSceneBounds = ({\n  scrollX,\n  scrollY,\n  width,\n  height,\n  zoom,\n}: AppState): SceneBounds => {\n  return [\n    -scrollX,\n    -scrollY,\n    -scrollX + width / zoom.value,\n    -scrollY + height / zoom.value,\n  ];\n};\n", "import { COLOR_PALETTE } from \"./colors\";\nimport {\n  DEFAULT_ELEMENT_PROPS,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  DEFAULT_TEXT_ALIGN,\n  EXPORT_SCALES,\n  THEME,\n} from \"./constants\";\nimport { AppState, NormalizedZoomValue } from \"./types\";\n\nconst defaultExportScale = EXPORT_SCALES.includes(devicePixelRatio)\n  ? devicePixelRatio\n  : 1;\n\nexport const getDefaultAppState = (): Omit<\n  AppState,\n  \"offsetTop\" | \"offsetLeft\" | \"width\" | \"height\"\n> => {\n  return {\n    showWelcomeScreen: false,\n    theme: THEME.LIGHT,\n    collaborators: new Map(),\n    currentChartType: \"bar\",\n    currentItemBackgroundColor: DEFAULT_ELEMENT_PROPS.backgroundColor,\n    currentItemEndArrowhead: \"arrow\",\n    currentItemFillStyle: DEFAULT_ELEMENT_PROPS.fillStyle,\n    currentItemFontFamily: DEFAULT_FONT_FAMILY,\n    currentItemFontSize: DEFAULT_FONT_SIZE,\n    currentItemOpacity: DEFAULT_ELEMENT_PROPS.opacity,\n    currentItemRoughness: DEFAULT_ELEMENT_PROPS.roughness,\n    currentItemStartArrowhead: null,\n    currentItemStrokeColor: DEFAULT_ELEMENT_PROPS.strokeColor,\n    currentItemRoundness: \"round\",\n    currentItemStrokeStyle: DEFAULT_ELEMENT_PROPS.strokeStyle,\n    currentItemStrokeWidth: DEFAULT_ELEMENT_PROPS.strokeWidth,\n    currentItemTextAlign: DEFAULT_TEXT_ALIGN,\n    cursorButton: \"up\",\n    activeEmbeddable: null,\n    draggingElement: null,\n    editingElement: null,\n    editingGroupId: null,\n    editingLinearElement: null,\n    activeTool: {\n      type: \"selection\",\n      customType: null,\n      locked: DEFAULT_ELEMENT_PROPS.locked,\n      lastActiveTool: null,\n    },\n    penMode: false,\n    penDetected: false,\n    errorMessage: null,\n    exportBackground: true,\n    exportScale: defaultExportScale,\n    exportEmbedScene: false,\n    exportWithDarkMode: false,\n    fileHandle: null,\n    gridSize: null,\n    isBindingEnabled: true,\n    defaultSidebarDockedPreference: false,\n    isLoading: false,\n    isResizing: false,\n    isRotating: false,\n    lastPointerDownWith: \"mouse\",\n    multiElement: null,\n    name: null,\n    contextMenu: null,\n    openMenu: null,\n    openPopup: null,\n    openSidebar: null,\n    openDialog: null,\n    pasteDialog: { shown: false, data: null },\n    previousSelectedElementIds: {},\n    resizingElement: null,\n    scrolledOutside: false,\n    scrollX: 0,\n    scrollY: 0,\n    selectedElementIds: {},\n    selectedGroupIds: {},\n    selectedElementsAreBeingDragged: false,\n    selectionElement: null,\n    shouldCacheIgnoreZoom: false,\n    showStats: false,\n    startBoundElement: null,\n    suggestedBindings: [],\n    frameRendering: { enabled: true, clip: true, name: true, outline: true },\n    frameToHighlight: null,\n    editingFrame: null,\n    elementsToHighlight: null,\n    toast: null,\n    viewBackgroundColor: COLOR_PALETTE.white,\n    zenModeEnabled: false,\n    zoom: {\n      value: 1 as NormalizedZoomValue,\n    },\n    viewModeEnabled: false,\n    pendingImageElementId: null,\n    showHyperlinkPopup: false,\n    selectedLinearElement: null,\n    snapLines: [],\n    originSnapOffset: {\n      x: 0,\n      y: 0,\n    },\n    objectsSnapModeEnabled: false,\n    userToFollow: null,\n    followedBy: new Set(),\n  };\n};\n\n/**\n * Config containing all AppState keys. Used to determine whether given state\n *  prop should be stripped when exporting to given storage type.\n */\nconst APP_STATE_STORAGE_CONF = (<\n  Values extends {\n    /** whether to keep when storing to browser storage (localStorage/IDB) */\n    browser: boolean;\n    /** whether to keep when exporting to file/database */\n    export: boolean;\n    /** server (shareLink/collab/...) */\n    server: boolean;\n  },\n  T extends Record<keyof AppState, Values>,\n>(config: { [K in keyof T]: K extends keyof AppState ? T[K] : never }) =>\n  config)({\n  showWelcomeScreen: { browser: true, export: false, server: false },\n  theme: { browser: true, export: false, server: false },\n  collaborators: { browser: false, export: false, server: false },\n  currentChartType: { browser: true, export: false, server: false },\n  currentItemBackgroundColor: { browser: true, export: false, server: false },\n  currentItemEndArrowhead: { browser: true, export: false, server: false },\n  currentItemFillStyle: { browser: true, export: false, server: false },\n  currentItemFontFamily: { browser: true, export: false, server: false },\n  currentItemFontSize: { browser: true, export: false, server: false },\n  currentItemRoundness: {\n    browser: true,\n    export: false,\n    server: false,\n  },\n  currentItemOpacity: { browser: true, export: false, server: false },\n  currentItemRoughness: { browser: true, export: false, server: false },\n  currentItemStartArrowhead: { browser: true, export: false, server: false },\n  currentItemStrokeColor: { browser: true, export: false, server: false },\n  currentItemStrokeStyle: { browser: true, export: false, server: false },\n  currentItemStrokeWidth: { browser: true, export: false, server: false },\n  currentItemTextAlign: { browser: true, export: false, server: false },\n  cursorButton: { browser: true, export: false, server: false },\n  activeEmbeddable: { browser: false, export: false, server: false },\n  draggingElement: { browser: false, export: false, server: false },\n  editingElement: { browser: false, export: false, server: false },\n  editingGroupId: { browser: true, export: false, server: false },\n  editingLinearElement: { browser: false, export: false, server: false },\n  activeTool: { browser: true, export: false, server: false },\n  penMode: { browser: true, export: false, server: false },\n  penDetected: { browser: true, export: false, server: false },\n  errorMessage: { browser: false, export: false, server: false },\n  exportBackground: { browser: true, export: false, server: false },\n  exportEmbedScene: { browser: true, export: false, server: false },\n  exportScale: { browser: true, export: false, server: false },\n  exportWithDarkMode: { browser: true, export: false, server: false },\n  fileHandle: { browser: false, export: false, server: false },\n  gridSize: { browser: true, export: true, server: true },\n  height: { browser: false, export: false, server: false },\n  isBindingEnabled: { browser: false, export: false, server: false },\n  defaultSidebarDockedPreference: {\n    browser: true,\n    export: false,\n    server: false,\n  },\n  isLoading: { browser: false, export: false, server: false },\n  isResizing: { browser: false, export: false, server: false },\n  isRotating: { browser: false, export: false, server: false },\n  lastPointerDownWith: { browser: true, export: false, server: false },\n  multiElement: { browser: false, export: false, server: false },\n  name: { browser: true, export: false, server: false },\n  offsetLeft: { browser: false, export: false, server: false },\n  offsetTop: { browser: false, export: false, server: false },\n  contextMenu: { browser: false, export: false, server: false },\n  openMenu: { browser: true, export: false, server: false },\n  openPopup: { browser: false, export: false, server: false },\n  openSidebar: { browser: true, export: false, server: false },\n  openDialog: { browser: false, export: false, server: false },\n  pasteDialog: { browser: false, export: false, server: false },\n  previousSelectedElementIds: { browser: true, export: false, server: false },\n  resizingElement: { browser: false, export: false, server: false },\n  scrolledOutside: { browser: true, export: false, server: false },\n  scrollX: { browser: true, export: false, server: false },\n  scrollY: { browser: true, export: false, server: false },\n  selectedElementIds: { browser: true, export: false, server: false },\n  selectedGroupIds: { browser: true, export: false, server: false },\n  selectedElementsAreBeingDragged: {\n    browser: false,\n    export: false,\n    server: false,\n  },\n  selectionElement: { browser: false, export: false, server: false },\n  shouldCacheIgnoreZoom: { browser: true, export: false, server: false },\n  showStats: { browser: true, export: false, server: false },\n  startBoundElement: { browser: false, export: false, server: false },\n  suggestedBindings: { browser: false, export: false, server: false },\n  frameRendering: { browser: false, export: false, server: false },\n  frameToHighlight: { browser: false, export: false, server: false },\n  editingFrame: { browser: false, export: false, server: false },\n  elementsToHighlight: { browser: false, export: false, server: false },\n  toast: { browser: false, export: false, server: false },\n  viewBackgroundColor: { browser: true, export: true, server: true },\n  width: { browser: false, export: false, server: false },\n  zenModeEnabled: { browser: true, export: false, server: false },\n  zoom: { browser: true, export: false, server: false },\n  viewModeEnabled: { browser: false, export: false, server: false },\n  pendingImageElementId: { browser: false, export: false, server: false },\n  showHyperlinkPopup: { browser: false, export: false, server: false },\n  selectedLinearElement: { browser: true, export: false, server: false },\n  snapLines: { browser: false, export: false, server: false },\n  originSnapOffset: { browser: false, export: false, server: false },\n  objectsSnapModeEnabled: { browser: true, export: false, server: false },\n  userToFollow: { browser: false, export: false, server: false },\n  followedBy: { browser: false, export: false, server: false },\n});\n\nconst _clearAppStateForStorage = <\n  ExportType extends \"export\" | \"browser\" | \"server\",\n>(\n  appState: Partial<AppState>,\n  exportType: ExportType,\n) => {\n  type ExportableKeys = {\n    [K in keyof typeof APP_STATE_STORAGE_CONF]: typeof APP_STATE_STORAGE_CONF[K][ExportType] extends true\n      ? K\n      : never;\n  }[keyof typeof APP_STATE_STORAGE_CONF];\n  const stateForExport = {} as { [K in ExportableKeys]?: typeof appState[K] };\n  for (const key of Object.keys(appState) as (keyof typeof appState)[]) {\n    const propConfig = APP_STATE_STORAGE_CONF[key];\n    if (propConfig?.[exportType]) {\n      const nextValue = appState[key];\n\n      // https://github.com/microsoft/TypeScript/issues/31445\n      (stateForExport as any)[key] = nextValue;\n    }\n  }\n  return stateForExport;\n};\n\nexport const clearAppStateForLocalStorage = (appState: Partial<AppState>) => {\n  return _clearAppStateForStorage(appState, \"browser\");\n};\n\nexport const cleanAppStateForExport = (appState: Partial<AppState>) => {\n  return _clearAppStateForStorage(appState, \"export\");\n};\n\nexport const clearAppStateForDatabase = (appState: Partial<AppState>) => {\n  return _clearAppStateForStorage(appState, \"server\");\n};\n\nexport const isEraserActive = ({\n  activeTool,\n}: {\n  activeTool: AppState[\"activeTool\"];\n}) => activeTool.type === \"eraser\";\n\nexport const isHandToolActive = ({\n  activeTool,\n}: {\n  activeTool: AppState[\"activeTool\"];\n}) => {\n  return activeTool.type === \"hand\";\n};\n", "import { Action } from \"./types\";\n\nexport let actions: readonly Action[] = [];\n\nexport const register = <T extends Action>(action: T) => {\n  actions = actions.concat(action);\n  return action as T & {\n    keyTest?: unknown extends T[\"keyTest\"] ? never : T[\"keyTest\"];\n  };\n};\n", "import { CURSOR_TYPE, MIME_TYPES, THEME } from \"./constants\";\nimport OpenColor from \"open-color\";\nimport { AppState, DataURL } from \"./types\";\nimport { isHandToolActive, isEraserActive } from \"./appState\";\n\nconst laserPointerCursorSVG_tag = `<svg viewBox=\"0 0 24 24\" stroke-width=\"1\" width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">`;\nconst laserPointerCursorBackgroundSVG = `<path d=\"M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z\" style=\"fill:#fff\"/>`;\nconst laserPointerCursorIconSVG = `<path stroke=\"#1b1b1f\" fill=\"#fff\" d=\"m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408\"/>`;\n\nconst laserPointerCursorDataURL_lightMode = `data:${\n  MIME_TYPES.svg\n},${encodeURIComponent(\n  `${laserPointerCursorSVG_tag}${laserPointerCursorIconSVG}</svg>`,\n)}`;\nconst laserPointerCursorDataURL_darkMode = `data:${\n  MIME_TYPES.svg\n},${encodeURIComponent(\n  `${laserPointerCursorSVG_tag}${laserPointerCursorBackgroundSVG}${laserPointerCursorIconSVG}</svg>`,\n)}`;\n\nexport const resetCursor = (interactiveCanvas: HTMLCanvasElement | null) => {\n  if (interactiveCanvas) {\n    interactiveCanvas.style.cursor = \"\";\n  }\n};\n\nexport const setCursor = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  cursor: string,\n) => {\n  if (interactiveCanvas) {\n    interactiveCanvas.style.cursor = cursor;\n  }\n};\n\nlet eraserCanvasCache: any;\nlet previewDataURL: string;\nexport const setEraserCursor = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  theme: AppState[\"theme\"],\n) => {\n  const cursorImageSizePx = 20;\n\n  const drawCanvas = () => {\n    const isDarkTheme = theme === THEME.DARK;\n    eraserCanvasCache = document.createElement(\"canvas\");\n    eraserCanvasCache.theme = theme;\n    eraserCanvasCache.height = cursorImageSizePx;\n    eraserCanvasCache.width = cursorImageSizePx;\n    const context = eraserCanvasCache.getContext(\"2d\")!;\n    context.lineWidth = 1;\n    context.beginPath();\n    context.arc(\n      eraserCanvasCache.width / 2,\n      eraserCanvasCache.height / 2,\n      5,\n      0,\n      2 * Math.PI,\n    );\n    context.fillStyle = isDarkTheme ? OpenColor.black : OpenColor.white;\n    context.fill();\n    context.strokeStyle = isDarkTheme ? OpenColor.white : OpenColor.black;\n    context.stroke();\n    previewDataURL = eraserCanvasCache.toDataURL(MIME_TYPES.svg) as DataURL;\n  };\n  if (!eraserCanvasCache || eraserCanvasCache.theme !== theme) {\n    drawCanvas();\n  }\n\n  setCursor(\n    interactiveCanvas,\n    `url(${previewDataURL}) ${cursorImageSizePx / 2} ${\n      cursorImageSizePx / 2\n    }, auto`,\n  );\n};\n\nexport const setCursorForShape = (\n  interactiveCanvas: HTMLCanvasElement | null,\n  appState: Pick<AppState, \"activeTool\" | \"theme\">,\n) => {\n  if (!interactiveCanvas) {\n    return;\n  }\n  if (appState.activeTool.type === \"selection\") {\n    resetCursor(interactiveCanvas);\n  } else if (isHandToolActive(appState)) {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.GRAB;\n  } else if (isEraserActive(appState)) {\n    setEraserCursor(interactiveCanvas, appState.theme);\n    // do nothing if image tool is selected which suggests there's\n    // a image-preview set as the cursor\n    // Ignore custom type as well and let host decide\n  } else if (appState.activeTool.type === \"laser\") {\n    const url =\n      appState.theme === THEME.LIGHT\n        ? laserPointerCursorDataURL_lightMode\n        : laserPointerCursorDataURL_darkMode;\n    interactiveCanvas.style.cursor = `url(${url}), auto`;\n  } else if (![\"image\", \"custom\"].includes(appState.activeTool.type)) {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.CROSSHAIR;\n  } else if (appState.activeTool.type !== \"image\") {\n    interactiveCanvas.style.cursor = CURSOR_TYPE.AUTO;\n  }\n};\n", "import {\n  GroupId,\n  ExcalidrawElement,\n  NonDeleted,\n  NonDeletedExcalidrawElement,\n  ElementsMapOrArray,\n  ElementsMap,\n} from \"./element/types\";\nimport {\n  AppClassProperties,\n  AppState,\n  InteractiveCanvasAppState,\n} from \"./types\";\nimport { getSelectedElements } from \"./scene\";\nimport { getBoundTextElement } from \"./element/textElement\";\nimport { makeNextSelectedElementIds } from \"./scene/selection\";\nimport { Mutable } from \"./utility-types\";\n\nexport const selectGroup = (\n  groupId: GroupId,\n  appState: InteractiveCanvasAppState,\n  elements: readonly NonDeleted<ExcalidrawElement>[],\n): Pick<\n  InteractiveCanvasAppState,\n  \"selectedGroupIds\" | \"selectedElementIds\" | \"editingGroupId\"\n> => {\n  const elementsInGroup = elements.reduce(\n    (acc: Record<string, true>, element) => {\n      if (element.groupIds.includes(groupId)) {\n        acc[element.id] = true;\n      }\n      return acc;\n    },\n    {},\n  );\n\n  if (Object.keys(elementsInGroup).length < 2) {\n    if (\n      appState.selectedGroupIds[groupId] ||\n      appState.editingGroupId === groupId\n    ) {\n      return {\n        selectedElementIds: appState.selectedElementIds,\n        selectedGroupIds: { ...appState.selectedGroupIds, [groupId]: false },\n        editingGroupId: null,\n      };\n    }\n    return appState;\n  }\n\n  return {\n    editingGroupId: appState.editingGroupId,\n    selectedGroupIds: { ...appState.selectedGroupIds, [groupId]: true },\n    selectedElementIds: {\n      ...appState.selectedElementIds,\n      ...elementsInGroup,\n    },\n  };\n};\n\nexport const selectGroupsForSelectedElements = (function () {\n  type SelectGroupsReturnType = Pick<\n    InteractiveCanvasAppState,\n    \"selectedGroupIds\" | \"editingGroupId\" | \"selectedElementIds\"\n  >;\n\n  let lastSelectedElements: readonly NonDeleted<ExcalidrawElement>[] | null =\n    null;\n  let lastElements: readonly NonDeleted<ExcalidrawElement>[] | null = null;\n  let lastReturnValue: SelectGroupsReturnType | null = null;\n\n  const _selectGroups = (\n    selectedElements: readonly NonDeleted<ExcalidrawElement>[],\n    elements: readonly NonDeleted<ExcalidrawElement>[],\n    appState: Pick<AppState, \"selectedElementIds\" | \"editingGroupId\">,\n    prevAppState: InteractiveCanvasAppState,\n  ): SelectGroupsReturnType => {\n    if (\n      lastReturnValue !== undefined &&\n      elements === lastElements &&\n      selectedElements === lastSelectedElements &&\n      appState.editingGroupId === lastReturnValue?.editingGroupId\n    ) {\n      return lastReturnValue;\n    }\n\n    const selectedGroupIds: Record<GroupId, boolean> = {};\n    // Gather all the groups withing selected elements\n    for (const selectedElement of selectedElements) {\n      let groupIds = selectedElement.groupIds;\n      if (appState.editingGroupId) {\n        // handle the case where a group is nested within a group\n        const indexOfEditingGroup = groupIds.indexOf(appState.editingGroupId);\n        if (indexOfEditingGroup > -1) {\n          groupIds = groupIds.slice(0, indexOfEditingGroup);\n        }\n      }\n      if (groupIds.length > 0) {\n        const lastSelectedGroup = groupIds[groupIds.length - 1];\n        selectedGroupIds[lastSelectedGroup] = true;\n      }\n    }\n\n    // Gather all the elements within selected groups\n    const groupElementsIndex: Record<GroupId, string[]> = {};\n    const selectedElementIdsInGroups = elements.reduce(\n      (acc: Record<string, true>, element) => {\n        const groupId = element.groupIds.find((id) => selectedGroupIds[id]);\n\n        if (groupId) {\n          acc[element.id] = true;\n\n          // Populate the index\n          if (!Array.isArray(groupElementsIndex[groupId])) {\n            groupElementsIndex[groupId] = [element.id];\n          } else {\n            groupElementsIndex[groupId].push(element.id);\n          }\n        }\n        return acc;\n      },\n      {},\n    );\n\n    for (const groupId of Object.keys(groupElementsIndex)) {\n      // If there is one element in the group, and the group is selected or it's being edited, it's not a group\n      if (groupElementsIndex[groupId].length < 2) {\n        if (selectedGroupIds[groupId]) {\n          selectedGroupIds[groupId] = false;\n        }\n      }\n    }\n\n    lastElements = elements;\n    lastSelectedElements = selectedElements;\n\n    lastReturnValue = {\n      editingGroupId: appState.editingGroupId,\n      selectedGroupIds,\n      selectedElementIds: makeNextSelectedElementIds(\n        {\n          ...appState.selectedElementIds,\n          ...selectedElementIdsInGroups,\n        },\n        prevAppState,\n      ),\n    };\n\n    return lastReturnValue;\n  };\n\n  /**\n   * When you select an element, you often want to actually select the whole group it's in, unless\n   * you're currently editing that group.\n   */\n  const selectGroupsForSelectedElements = (\n    appState: Pick<AppState, \"selectedElementIds\" | \"editingGroupId\">,\n    elements: readonly NonDeletedExcalidrawElement[],\n    prevAppState: InteractiveCanvasAppState,\n    /**\n     * supply null in cases where you don't have access to App instance and\n     * you don't care about optimizing selectElements retrieval\n     */\n    app: AppClassProperties | null,\n  ): Mutable<\n    Pick<\n      InteractiveCanvasAppState,\n      \"selectedGroupIds\" | \"editingGroupId\" | \"selectedElementIds\"\n    >\n  > => {\n    const selectedElements = app\n      ? app.scene.getSelectedElements({\n          selectedElementIds: appState.selectedElementIds,\n          // supplying elements explicitly in case we're passed non-state elements\n          elements,\n        })\n      : getSelectedElements(elements, appState);\n\n    if (!selectedElements.length) {\n      return {\n        selectedGroupIds: {},\n        editingGroupId: null,\n        selectedElementIds: makeNextSelectedElementIds(\n          appState.selectedElementIds,\n          prevAppState,\n        ),\n      };\n    }\n\n    return _selectGroups(selectedElements, elements, appState, prevAppState);\n  };\n\n  selectGroupsForSelectedElements.clearCache = () => {\n    lastElements = null;\n    lastSelectedElements = null;\n    lastReturnValue = null;\n  };\n\n  return selectGroupsForSelectedElements;\n})();\n\n/**\n * If the element's group is selected, don't render an individual\n * selection border around it.\n */\nexport const isSelectedViaGroup = (\n  appState: InteractiveCanvasAppState,\n  element: ExcalidrawElement,\n) => getSelectedGroupForElement(appState, element) != null;\n\nexport const getSelectedGroupForElement = (\n  appState: InteractiveCanvasAppState,\n  element: ExcalidrawElement,\n) =>\n  element.groupIds\n    .filter((groupId) => groupId !== appState.editingGroupId)\n    .find((groupId) => appState.selectedGroupIds[groupId]);\n\nexport const getSelectedGroupIds = (\n  appState: InteractiveCanvasAppState,\n): GroupId[] =>\n  Object.entries(appState.selectedGroupIds)\n    .filter(([groupId, isSelected]) => isSelected)\n    .map(([groupId, isSelected]) => groupId);\n\n// given a list of elements, return the the actual group ids that should be selected\n// or used to update the elements\nexport const selectGroupsFromGivenElements = (\n  elements: readonly NonDeleted<ExcalidrawElement>[],\n  appState: InteractiveCanvasAppState,\n) => {\n  let nextAppState: InteractiveCanvasAppState = {\n    ...appState,\n    selectedGroupIds: {},\n  };\n\n  for (const element of elements) {\n    let groupIds = element.groupIds;\n    if (appState.editingGroupId) {\n      const indexOfEditingGroup = groupIds.indexOf(appState.editingGroupId);\n      if (indexOfEditingGroup > -1) {\n        groupIds = groupIds.slice(0, indexOfEditingGroup);\n      }\n    }\n    if (groupIds.length > 0) {\n      const groupId = groupIds[groupIds.length - 1];\n      nextAppState = {\n        ...nextAppState,\n        ...selectGroup(groupId, nextAppState, elements),\n      };\n    }\n  }\n\n  return nextAppState.selectedGroupIds;\n};\n\nexport const editGroupForSelectedElement = (\n  appState: AppState,\n  element: NonDeleted<ExcalidrawElement>,\n): AppState => {\n  return {\n    ...appState,\n    editingGroupId: element.groupIds.length ? element.groupIds[0] : null,\n    selectedGroupIds: {},\n    selectedElementIds: {\n      [element.id]: true,\n    },\n  };\n};\n\nexport const isElementInGroup = (element: ExcalidrawElement, groupId: string) =>\n  element.groupIds.includes(groupId);\n\nexport const getElementsInGroup = (\n  elements: ElementsMapOrArray,\n  groupId: string,\n) => {\n  const elementsInGroup: ExcalidrawElement[] = [];\n  for (const element of elements.values()) {\n    if (isElementInGroup(element, groupId)) {\n      elementsInGroup.push(element);\n    }\n  }\n  return elementsInGroup;\n};\n\nexport const getSelectedGroupIdForElement = (\n  element: ExcalidrawElement,\n  selectedGroupIds: { [groupId: string]: boolean },\n) => element.groupIds.find((groupId) => selectedGroupIds[groupId]);\n\nexport const getNewGroupIdsForDuplication = (\n  groupIds: ExcalidrawElement[\"groupIds\"],\n  editingGroupId: AppState[\"editingGroupId\"],\n  mapper: (groupId: GroupId) => GroupId,\n) => {\n  const copy = [...groupIds];\n  const positionOfEditingGroupId = editingGroupId\n    ? groupIds.indexOf(editingGroupId)\n    : -1;\n  const endIndex =\n    positionOfEditingGroupId > -1 ? positionOfEditingGroupId : groupIds.length;\n  for (let index = 0; index < endIndex; index++) {\n    copy[index] = mapper(copy[index]);\n  }\n\n  return copy;\n};\n\nexport const addToGroup = (\n  prevGroupIds: ExcalidrawElement[\"groupIds\"],\n  newGroupId: GroupId,\n  editingGroupId: AppState[\"editingGroupId\"],\n) => {\n  // insert before the editingGroupId, or push to the end.\n  const groupIds = [...prevGroupIds];\n  const positionOfEditingGroupId = editingGroupId\n    ? groupIds.indexOf(editingGroupId)\n    : -1;\n  const positionToInsert =\n    positionOfEditingGroupId > -1 ? positionOfEditingGroupId : groupIds.length;\n  groupIds.splice(positionToInsert, 0, newGroupId);\n  return groupIds;\n};\n\nexport const removeFromSelectedGroups = (\n  groupIds: ExcalidrawElement[\"groupIds\"],\n  selectedGroupIds: { [groupId: string]: boolean },\n) => groupIds.filter((groupId) => !selectedGroupIds[groupId]);\n\nexport const getMaximumGroups = (\n  elements: ExcalidrawElement[],\n  elementsMap: ElementsMap,\n): ExcalidrawElement[][] => {\n  const groups: Map<String, ExcalidrawElement[]> = new Map<\n    String,\n    ExcalidrawElement[]\n  >();\n  elements.forEach((element: ExcalidrawElement) => {\n    const groupId =\n      element.groupIds.length === 0\n        ? element.id\n        : element.groupIds[element.groupIds.length - 1];\n\n    const currentGroupMembers = groups.get(groupId) || [];\n\n    // Include bound text if present when grouping\n    const boundTextElement = getBoundTextElement(element, elementsMap);\n    if (boundTextElement) {\n      currentGroupMembers.push(boundTextElement);\n    }\n    groups.set(groupId, [...currentGroupMembers, element]);\n  });\n\n  return Array.from(groups.values());\n};\n\nexport const elementsAreInSameGroup = (elements: ExcalidrawElement[]) => {\n  const allGroups = elements.flatMap((element) => element.groupIds);\n  const groupCount = new Map<string, number>();\n  let maxGroup = 0;\n\n  for (const group of allGroups) {\n    groupCount.set(group, (groupCount.get(group) ?? 0) + 1);\n    if (groupCount.get(group)! > maxGroup) {\n      maxGroup = groupCount.get(group)!;\n    }\n  }\n\n  return maxGroup === elements.length;\n};\n", "import {\n  ExcalidrawElement,\n  ExcalidrawImageElement,\n  ExcalidrawTextElement,\n  ExcalidrawLinearElement,\n  ExcalidrawGenericElement,\n  NonDeleted,\n  TextAlign,\n  GroupId,\n  VerticalAlign,\n  Arrowhead,\n  ExcalidrawFreeDrawElement,\n  FontFamilyValues,\n  ExcalidrawTextContainer,\n  ExcalidrawFrameElement,\n  ExcalidrawEmbeddableElement,\n  ExcalidrawMagicFrameElement,\n  ExcalidrawIframeElement,\n  ElementsMap,\n} from \"./types\";\nimport {\n  arrayToMap,\n  getFontString,\n  getUpdatedTimestamp,\n  isTestEnv,\n} from \"../utils\";\nimport { randomInteger, randomId } from \"../random\";\nimport { bumpVersion, newElementWith } from \"./mutateElement\";\nimport { getNewGroupIdsForDuplication } from \"../groups\";\nimport { AppState } from \"../types\";\nimport { getElementAbsoluteCoords } from \".\";\nimport { adjustXYWithRotation } from \"../math\";\nimport { getResizedElementAbsoluteCoords } from \"./bounds\";\nimport {\n  measureText,\n  normalizeText,\n  wrapText,\n  getBoundTextMaxWidth,\n  getDefaultLineHeight,\n} from \"./textElement\";\nimport {\n  DEFAULT_ELEMENT_PROPS,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  DEFAULT_TEXT_ALIGN,\n  DEFAULT_VERTICAL_ALIGN,\n  VERTICAL_ALIGN,\n} from \"../constants\";\nimport { MarkOptional, Merge, Mutable } from \"../utility-types\";\n\nexport type ElementConstructorOpts = MarkOptional<\n  Omit<ExcalidrawGenericElement, \"id\" | \"type\" | \"isDeleted\" | \"updated\">,\n  | \"width\"\n  | \"height\"\n  | \"angle\"\n  | \"groupIds\"\n  | \"frameId\"\n  | \"boundElements\"\n  | \"seed\"\n  | \"version\"\n  | \"versionNonce\"\n  | \"link\"\n  | \"strokeStyle\"\n  | \"fillStyle\"\n  | \"strokeColor\"\n  | \"backgroundColor\"\n  | \"roughness\"\n  | \"strokeWidth\"\n  | \"roundness\"\n  | \"locked\"\n  | \"opacity\"\n  | \"customData\"\n>;\n\nconst _newElementBase = <T extends ExcalidrawElement>(\n  type: T[\"type\"],\n  {\n    x,\n    y,\n    strokeColor = DEFAULT_ELEMENT_PROPS.strokeColor,\n    backgroundColor = DEFAULT_ELEMENT_PROPS.backgroundColor,\n    fillStyle = DEFAULT_ELEMENT_PROPS.fillStyle,\n    strokeWidth = DEFAULT_ELEMENT_PROPS.strokeWidth,\n    strokeStyle = DEFAULT_ELEMENT_PROPS.strokeStyle,\n    roughness = DEFAULT_ELEMENT_PROPS.roughness,\n    opacity = DEFAULT_ELEMENT_PROPS.opacity,\n    width = 0,\n    height = 0,\n    angle = 0,\n    groupIds = [],\n    frameId = null,\n    roundness = null,\n    boundElements = null,\n    link = null,\n    locked = DEFAULT_ELEMENT_PROPS.locked,\n    ...rest\n  }: ElementConstructorOpts & Omit<Partial<ExcalidrawGenericElement>, \"type\">,\n) => {\n  // assign type to guard against excess properties\n  const element: Merge<ExcalidrawGenericElement, { type: T[\"type\"] }> = {\n    id: rest.id || randomId(),\n    type,\n    x,\n    y,\n    width,\n    height,\n    angle,\n    strokeColor,\n    backgroundColor,\n    fillStyle,\n    strokeWidth,\n    strokeStyle,\n    roughness,\n    opacity,\n    groupIds,\n    frameId,\n    roundness,\n    seed: rest.seed ?? randomInteger(),\n    version: rest.version || 1,\n    versionNonce: rest.versionNonce ?? 0,\n    isDeleted: false as false,\n    boundElements,\n    updated: getUpdatedTimestamp(),\n    link,\n    locked,\n    customData: rest.customData,\n  };\n  return element;\n};\n\nexport const newElement = (\n  opts: {\n    type: ExcalidrawGenericElement[\"type\"];\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawGenericElement> =>\n  _newElementBase<ExcalidrawGenericElement>(opts.type, opts);\n\nexport const newEmbeddableElement = (\n  opts: {\n    type: \"embeddable\";\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawEmbeddableElement> => {\n  return _newElementBase<ExcalidrawEmbeddableElement>(\"embeddable\", opts);\n};\n\nexport const newIframeElement = (\n  opts: {\n    type: \"iframe\";\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawIframeElement> => {\n  return {\n    ..._newElementBase<ExcalidrawIframeElement>(\"iframe\", opts),\n  };\n};\n\nexport const newFrameElement = (\n  opts: {\n    name?: string;\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawFrameElement> => {\n  const frameElement = newElementWith(\n    {\n      ..._newElementBase<ExcalidrawFrameElement>(\"frame\", opts),\n      type: \"frame\",\n      name: opts?.name || null,\n    },\n    {},\n  );\n\n  return frameElement;\n};\n\nexport const newMagicFrameElement = (\n  opts: {\n    name?: string;\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawMagicFrameElement> => {\n  const frameElement = newElementWith(\n    {\n      ..._newElementBase<ExcalidrawMagicFrameElement>(\"magicframe\", opts),\n      type: \"magicframe\",\n      name: opts?.name || null,\n    },\n    {},\n  );\n\n  return frameElement;\n};\n\n/** computes element x/y offset based on textAlign/verticalAlign */\nconst getTextElementPositionOffsets = (\n  opts: {\n    textAlign: ExcalidrawTextElement[\"textAlign\"];\n    verticalAlign: ExcalidrawTextElement[\"verticalAlign\"];\n  },\n  metrics: {\n    width: number;\n    height: number;\n  },\n) => {\n  return {\n    x:\n      opts.textAlign === \"center\"\n        ? metrics.width / 2\n        : opts.textAlign === \"right\"\n        ? metrics.width\n        : 0,\n    y: opts.verticalAlign === \"middle\" ? metrics.height / 2 : 0,\n  };\n};\n\nexport const newTextElement = (\n  opts: {\n    text: string;\n    fontSize?: number;\n    fontFamily?: FontFamilyValues;\n    textAlign?: TextAlign;\n    verticalAlign?: VerticalAlign;\n    containerId?: ExcalidrawTextContainer[\"id\"] | null;\n    lineHeight?: ExcalidrawTextElement[\"lineHeight\"];\n    strokeWidth?: ExcalidrawTextElement[\"strokeWidth\"];\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawTextElement> => {\n  const fontFamily = opts.fontFamily || DEFAULT_FONT_FAMILY;\n  const fontSize = opts.fontSize || DEFAULT_FONT_SIZE;\n  const lineHeight = opts.lineHeight || getDefaultLineHeight(fontFamily);\n  const text = normalizeText(opts.text);\n  const metrics = measureText(\n    text,\n    getFontString({ fontFamily, fontSize }),\n    lineHeight,\n  );\n  const textAlign = opts.textAlign || DEFAULT_TEXT_ALIGN;\n  const verticalAlign = opts.verticalAlign || DEFAULT_VERTICAL_ALIGN;\n  const offsets = getTextElementPositionOffsets(\n    { textAlign, verticalAlign },\n    metrics,\n  );\n\n  const textElement = newElementWith(\n    {\n      ..._newElementBase<ExcalidrawTextElement>(\"text\", opts),\n      text,\n      fontSize,\n      fontFamily,\n      textAlign,\n      verticalAlign,\n      x: opts.x - offsets.x,\n      y: opts.y - offsets.y,\n      width: metrics.width,\n      height: metrics.height,\n      baseline: metrics.baseline,\n      containerId: opts.containerId || null,\n      originalText: text,\n      lineHeight,\n    },\n    {},\n  );\n  return textElement;\n};\n\nconst getAdjustedDimensions = (\n  element: ExcalidrawTextElement,\n  elementsMap: ElementsMap,\n  nextText: string,\n): {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  baseline: number;\n} => {\n  const {\n    width: nextWidth,\n    height: nextHeight,\n    baseline: nextBaseline,\n  } = measureText(nextText, getFontString(element), element.lineHeight);\n  const { textAlign, verticalAlign } = element;\n  let x: number;\n  let y: number;\n  if (\n    textAlign === \"center\" &&\n    verticalAlign === VERTICAL_ALIGN.MIDDLE &&\n    !element.containerId\n  ) {\n    const prevMetrics = measureText(\n      element.text,\n      getFontString(element),\n      element.lineHeight,\n    );\n    const offsets = getTextElementPositionOffsets(element, {\n      width: nextWidth - prevMetrics.width,\n      height: nextHeight - prevMetrics.height,\n    });\n\n    x = element.x - offsets.x;\n    y = element.y - offsets.y;\n  } else {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n\n    const [nextX1, nextY1, nextX2, nextY2] = getResizedElementAbsoluteCoords(\n      element,\n      nextWidth,\n      nextHeight,\n      false,\n    );\n    const deltaX1 = (x1 - nextX1) / 2;\n    const deltaY1 = (y1 - nextY1) / 2;\n    const deltaX2 = (x2 - nextX2) / 2;\n    const deltaY2 = (y2 - nextY2) / 2;\n\n    [x, y] = adjustXYWithRotation(\n      {\n        s: true,\n        e: textAlign === \"center\" || textAlign === \"left\",\n        w: textAlign === \"center\" || textAlign === \"right\",\n      },\n      element.x,\n      element.y,\n      element.angle,\n      deltaX1,\n      deltaY1,\n      deltaX2,\n      deltaY2,\n    );\n  }\n\n  return {\n    width: nextWidth,\n    height: nextHeight,\n    baseline: nextBaseline,\n    x: Number.isFinite(x) ? x : element.x,\n    y: Number.isFinite(y) ? y : element.y,\n  };\n};\n\nexport const refreshTextDimensions = (\n  textElement: ExcalidrawTextElement,\n  container: ExcalidrawTextContainer | null,\n  elementsMap: ElementsMap,\n  text = textElement.text,\n) => {\n  if (textElement.isDeleted) {\n    return;\n  }\n  if (container) {\n    text = wrapText(\n      text,\n      getFontString(textElement),\n      getBoundTextMaxWidth(container, textElement),\n    );\n  }\n  const dimensions = getAdjustedDimensions(textElement, elementsMap, text);\n  return { text, ...dimensions };\n};\n\nexport const updateTextElement = (\n  textElement: ExcalidrawTextElement,\n  container: ExcalidrawTextContainer | null,\n  elementsMap: ElementsMap,\n  {\n    text,\n    isDeleted,\n    originalText,\n  }: {\n    text: string;\n    isDeleted?: boolean;\n    originalText: string;\n  },\n): ExcalidrawTextElement => {\n  return newElementWith(textElement, {\n    originalText,\n    isDeleted: isDeleted ?? textElement.isDeleted,\n    ...refreshTextDimensions(textElement, container, elementsMap, originalText),\n  });\n};\n\nexport const newFreeDrawElement = (\n  opts: {\n    type: \"freedraw\";\n    points?: ExcalidrawFreeDrawElement[\"points\"];\n    simulatePressure: boolean;\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawFreeDrawElement> => {\n  return {\n    ..._newElementBase<ExcalidrawFreeDrawElement>(opts.type, opts),\n    points: opts.points || [],\n    pressures: [],\n    simulatePressure: opts.simulatePressure,\n    lastCommittedPoint: null,\n  };\n};\n\nexport const newLinearElement = (\n  opts: {\n    type: ExcalidrawLinearElement[\"type\"];\n    startArrowhead?: Arrowhead | null;\n    endArrowhead?: Arrowhead | null;\n    points?: ExcalidrawLinearElement[\"points\"];\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawLinearElement> => {\n  return {\n    ..._newElementBase<ExcalidrawLinearElement>(opts.type, opts),\n    points: opts.points || [],\n    lastCommittedPoint: null,\n    startBinding: null,\n    endBinding: null,\n    startArrowhead: opts.startArrowhead || null,\n    endArrowhead: opts.endArrowhead || null,\n  };\n};\n\nexport const newImageElement = (\n  opts: {\n    type: ExcalidrawImageElement[\"type\"];\n    status?: ExcalidrawImageElement[\"status\"];\n    fileId?: ExcalidrawImageElement[\"fileId\"];\n    scale?: ExcalidrawImageElement[\"scale\"];\n  } & ElementConstructorOpts,\n): NonDeleted<ExcalidrawImageElement> => {\n  return {\n    ..._newElementBase<ExcalidrawImageElement>(\"image\", opts),\n    // in the future we'll support changing stroke color for some SVG elements,\n    // and `transparent` will likely mean \"use original colors of the image\"\n    strokeColor: \"transparent\",\n    status: opts.status ?? \"pending\",\n    fileId: opts.fileId ?? null,\n    scale: opts.scale ?? [1, 1],\n  };\n};\n\n// Simplified deep clone for the purpose of cloning ExcalidrawElement.\n//\n// Only clones plain objects and arrays. Doesn't clone Date, RegExp, Map, Set,\n// Typed arrays and other non-null objects.\n//\n// Adapted from https://github.com/lukeed/klona\n//\n// The reason for `deepCopyElement()` wrapper is type safety (only allow\n// passing ExcalidrawElement as the top-level argument).\nconst _deepCopyElement = (val: any, depth: number = 0) => {\n  // only clone non-primitives\n  if (val == null || typeof val !== \"object\") {\n    return val;\n  }\n\n  const objectType = Object.prototype.toString.call(val);\n\n  if (objectType === \"[object Object]\") {\n    const tmp =\n      typeof val.constructor === \"function\"\n        ? Object.create(Object.getPrototypeOf(val))\n        : {};\n    for (const key in val) {\n      if (val.hasOwnProperty(key)) {\n        // don't copy non-serializable objects like these caches. They'll be\n        // populated when the element is rendered.\n        if (depth === 0 && (key === \"shape\" || key === \"canvas\")) {\n          continue;\n        }\n        tmp[key] = _deepCopyElement(val[key], depth + 1);\n      }\n    }\n    return tmp;\n  }\n\n  if (Array.isArray(val)) {\n    let k = val.length;\n    const arr = new Array(k);\n    while (k--) {\n      arr[k] = _deepCopyElement(val[k], depth + 1);\n    }\n    return arr;\n  }\n\n  // we're not cloning non-array & non-plain-object objects because we\n  // don't support them on excalidraw elements yet. If we do, we need to make\n  // sure we start cloning them, so let's warn about it.\n  if (import.meta.env.DEV) {\n    if (\n      objectType !== \"[object Object]\" &&\n      objectType !== \"[object Array]\" &&\n      objectType.startsWith(\"[object \")\n    ) {\n      console.warn(\n        `_deepCloneElement: unexpected object type ${objectType}. This value will not be cloned!`,\n      );\n    }\n  }\n\n  return val;\n};\n\n/**\n * Clones ExcalidrawElement data structure. Does not regenerate id, nonce, or\n * any value. The purpose is to to break object references for immutability\n * reasons, whenever we want to keep the original element, but ensure it's not\n * mutated.\n *\n * Only clones plain objects and arrays. Doesn't clone Date, RegExp, Map, Set,\n * Typed arrays and other non-null objects.\n */\nexport const deepCopyElement = <T extends ExcalidrawElement>(\n  val: T,\n): Mutable<T> => {\n  return _deepCopyElement(val);\n};\n\n/**\n * utility wrapper to generate new id. In test env it reuses the old + postfix\n * for test assertions.\n */\nexport const regenerateId = (\n  /** supply null if no previous id exists */\n  previousId: string | null,\n) => {\n  if (isTestEnv() && previousId) {\n    let nextId = `${previousId}_copy`;\n    // `window.h` may not be defined in some unit tests\n    if (\n      window.h?.app\n        ?.getSceneElementsIncludingDeleted()\n        .find((el) => el.id === nextId)\n    ) {\n      nextId += \"_copy\";\n    }\n    return nextId;\n  }\n  return randomId();\n};\n\n/**\n * Duplicate an element, often used in the alt-drag operation.\n * Note that this method has gotten a bit complicated since the\n * introduction of gruoping/ungrouping elements.\n * @param editingGroupId The current group being edited. The new\n *                       element will inherit this group and its\n *                       parents.\n * @param groupIdMapForOperation A Map that maps old group IDs to\n *                               duplicated ones. If you are duplicating\n *                               multiple elements at once, share this map\n *                               amongst all of them\n * @param element Element to duplicate\n * @param overrides Any element properties to override\n */\nexport const duplicateElement = <TElement extends ExcalidrawElement>(\n  editingGroupId: AppState[\"editingGroupId\"],\n  groupIdMapForOperation: Map<GroupId, GroupId>,\n  element: TElement,\n  overrides?: Partial<TElement>,\n): Readonly<TElement> => {\n  let copy = deepCopyElement(element);\n\n  copy.id = regenerateId(copy.id);\n  copy.boundElements = null;\n  copy.updated = getUpdatedTimestamp();\n  copy.seed = randomInteger();\n  copy.groupIds = getNewGroupIdsForDuplication(\n    copy.groupIds,\n    editingGroupId,\n    (groupId) => {\n      if (!groupIdMapForOperation.has(groupId)) {\n        groupIdMapForOperation.set(groupId, regenerateId(groupId));\n      }\n      return groupIdMapForOperation.get(groupId)!;\n    },\n  );\n  if (overrides) {\n    copy = Object.assign(copy, overrides);\n  }\n  return copy;\n};\n\n/**\n * Clones elements, regenerating their ids (including bindings) and group ids.\n *\n * If bindings don't exist in the elements array, they are removed. Therefore,\n * it's advised to supply the whole elements array, or sets of elements that\n * are encapsulated (such as library items), if the purpose is to retain\n * bindings to the cloned elements intact.\n *\n * NOTE by default does not randomize or regenerate anything except the id.\n */\nexport const duplicateElements = (\n  elements: readonly ExcalidrawElement[],\n  opts?: {\n    /** NOTE also updates version flags and `updated` */\n    randomizeSeed: boolean;\n  },\n) => {\n  const clonedElements: ExcalidrawElement[] = [];\n\n  const origElementsMap = arrayToMap(elements);\n\n  // used for for migrating old ids to new ids\n  const elementNewIdsMap = new Map<\n    /* orig */ ExcalidrawElement[\"id\"],\n    /* new */ ExcalidrawElement[\"id\"]\n  >();\n\n  const maybeGetNewId = (id: ExcalidrawElement[\"id\"]) => {\n    // if we've already migrated the element id, return the new one directly\n    if (elementNewIdsMap.has(id)) {\n      return elementNewIdsMap.get(id)!;\n    }\n    // if we haven't migrated the element id, but an old element with the same\n    // id exists, generate a new id for it and return it\n    if (origElementsMap.has(id)) {\n      const newId = regenerateId(id);\n      elementNewIdsMap.set(id, newId);\n      return newId;\n    }\n    // if old element doesn't exist, return null to mark it for removal\n    return null;\n  };\n\n  const groupNewIdsMap = new Map</* orig */ GroupId, /* new */ GroupId>();\n\n  for (const element of elements) {\n    const clonedElement: Mutable<ExcalidrawElement> = _deepCopyElement(element);\n\n    clonedElement.id = maybeGetNewId(element.id)!;\n\n    if (opts?.randomizeSeed) {\n      clonedElement.seed = randomInteger();\n      bumpVersion(clonedElement);\n    }\n\n    if (clonedElement.groupIds) {\n      clonedElement.groupIds = clonedElement.groupIds.map((groupId) => {\n        if (!groupNewIdsMap.has(groupId)) {\n          groupNewIdsMap.set(groupId, regenerateId(groupId));\n        }\n        return groupNewIdsMap.get(groupId)!;\n      });\n    }\n\n    if (\"containerId\" in clonedElement && clonedElement.containerId) {\n      const newContainerId = maybeGetNewId(clonedElement.containerId);\n      clonedElement.containerId = newContainerId;\n    }\n\n    if (\"boundElements\" in clonedElement && clonedElement.boundElements) {\n      clonedElement.boundElements = clonedElement.boundElements.reduce(\n        (\n          acc: Mutable<NonNullable<ExcalidrawElement[\"boundElements\"]>>,\n          binding,\n        ) => {\n          const newBindingId = maybeGetNewId(binding.id);\n          if (newBindingId) {\n            acc.push({ ...binding, id: newBindingId });\n          }\n          return acc;\n        },\n        [],\n      );\n    }\n\n    if (\"endBinding\" in clonedElement && clonedElement.endBinding) {\n      const newEndBindingId = maybeGetNewId(clonedElement.endBinding.elementId);\n      clonedElement.endBinding = newEndBindingId\n        ? {\n            ...clonedElement.endBinding,\n            elementId: newEndBindingId,\n          }\n        : null;\n    }\n    if (\"startBinding\" in clonedElement && clonedElement.startBinding) {\n      const newEndBindingId = maybeGetNewId(\n        clonedElement.startBinding.elementId,\n      );\n      clonedElement.startBinding = newEndBindingId\n        ? {\n            ...clonedElement.startBinding,\n            elementId: newEndBindingId,\n          }\n        : null;\n    }\n\n    if (clonedElement.frameId) {\n      clonedElement.frameId = maybeGetNewId(clonedElement.frameId);\n    }\n\n    clonedElements.push(clonedElement);\n  }\n\n  return clonedElements;\n};\n", "import { register } from \"../actions/register\";\nimport { FONT_FAMILY, VERTICAL_ALIGN } from \"../constants\";\nimport { ExcalidrawProps } from \"../types\";\nimport { getFontString, updateActiveTool } from \"../utils\";\nimport { setCursorForShape } from \"../cursor\";\nimport { newTextElement } from \"./newElement\";\nimport { wrapText } from \"./textElement\";\nimport { isIframeElement } from \"./typeChecks\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawIframeLikeElement,\n  IframeData,\n} from \"./types\";\n\nconst embeddedLinkCache = new Map<string, IframeData>();\n\nconst RE_YOUTUBE =\n  /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?youtu(?:be\\.com|\\.be)\\/(embed\\/|watch\\?v=|shorts\\/|playlist\\?list=|embed\\/videoseries\\?list=)?([a-zA-Z0-9_-]+)(?:\\?t=|&t=|\\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\\s]*$/;\n\nconst RE_VIMEO =\n  /^(?:http(?:s)?:\\/\\/)?(?:(?:w){3}.)?(?:player\\.)?vimeo\\.com\\/(?:video\\/)?([^?\\s]+)(?:\\?.*)?$/;\nconst RE_FIGMA = /^https:\\/\\/(?:www\\.)?figma\\.com/;\n\nconst RE_GH_GIST = /^https:\\/\\/gist\\.github\\.com/;\nconst RE_GH_GIST_EMBED =\n  /^<script[\\s\\S]*?\\ssrc=[\"'](https:\\/\\/gist.github.com\\/.*?)\\.js[\"']/i;\n\n// not anchored to start to allow <blockquote> twitter embeds\nconst RE_TWITTER = /(?:http(?:s)?:\\/\\/)?(?:(?:w){3}.)?(?:twitter|x).com/;\nconst RE_TWITTER_EMBED =\n  /^<blockquote[\\s\\S]*?\\shref=[\"'](https:\\/\\/(?:twitter|x).com\\/[^\"']*)/i;\n\nconst RE_VALTOWN =\n  /^https:\\/\\/(?:www\\.)?val.town\\/(v|embed)\\/[a-zA-Z_$][0-9a-zA-Z_$]+\\.[a-zA-Z_$][0-9a-zA-Z_$]+/;\n\nconst RE_GENERIC_EMBED =\n  /^<(?:iframe|blockquote)[\\s\\S]*?\\s(?:src|href)=[\"']([^\"']*)[\"'][\\s\\S]*?>$/i;\n\nconst RE_GIPHY =\n  /giphy.com\\/(?:clips|embed|gifs)\\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/;\n\nconst ALLOWED_DOMAINS = new Set([\n  \"youtube.com\",\n  \"youtu.be\",\n  \"vimeo.com\",\n  \"player.vimeo.com\",\n  \"figma.com\",\n  \"link.excalidraw.com\",\n  \"gist.github.com\",\n  \"twitter.com\",\n  \"x.com\",\n  \"*.simplepdf.eu\",\n  \"stackblitz.com\",\n  \"val.town\",\n  \"giphy.com\",\n  \"dddice.com\",\n]);\n\nexport const createSrcDoc = (body: string) => {\n  return `<html><body>${body}</body></html>`;\n};\n\nexport const getEmbedLink = (\n  link: string | null | undefined,\n): IframeData | null => {\n  if (!link) {\n    return null;\n  }\n\n  if (embeddedLinkCache.has(link)) {\n    return embeddedLinkCache.get(link)!;\n  }\n\n  const originalLink = link;\n\n  let type: \"video\" | \"generic\" = \"generic\";\n  let aspectRatio = { w: 560, h: 840 };\n  const ytLink = link.match(RE_YOUTUBE);\n  if (ytLink?.[2]) {\n    const time = ytLink[3] ? `&start=${ytLink[3]}` : ``;\n    const isPortrait = link.includes(\"shorts\");\n    type = \"video\";\n    switch (ytLink[1]) {\n      case \"embed/\":\n      case \"watch?v=\":\n      case \"shorts/\":\n        link = `https://www.youtube.com/embed/${ytLink[2]}?enablejsapi=1${time}`;\n        break;\n      case \"playlist?list=\":\n      case \"embed/videoseries?list=\":\n        link = `https://www.youtube.com/embed/videoseries?list=${ytLink[2]}&enablejsapi=1${time}`;\n        break;\n      default:\n        link = `https://www.youtube.com/embed/${ytLink[2]}?enablejsapi=1${time}`;\n        break;\n    }\n    aspectRatio = isPortrait ? { w: 315, h: 560 } : { w: 560, h: 315 };\n    embeddedLinkCache.set(originalLink, {\n      link,\n      intrinsicSize: aspectRatio,\n      type,\n    });\n    return { link, intrinsicSize: aspectRatio, type };\n  }\n\n  const vimeoLink = link.match(RE_VIMEO);\n  if (vimeoLink?.[1]) {\n    const target = vimeoLink?.[1];\n    const error = !/^\\d+$/.test(target)\n      ? new URIError(\"Invalid embed link format\")\n      : undefined;\n    type = \"video\";\n    link = `https://player.vimeo.com/video/${target}?api=1`;\n    aspectRatio = { w: 560, h: 315 };\n    //warning deliberately ommited so it is displayed only once per link\n    //same link next time will be served from cache\n    embeddedLinkCache.set(originalLink, {\n      link,\n      intrinsicSize: aspectRatio,\n      type,\n    });\n    return { link, intrinsicSize: aspectRatio, type, error };\n  }\n\n  const figmaLink = link.match(RE_FIGMA);\n  if (figmaLink) {\n    type = \"generic\";\n    link = `https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(\n      link,\n    )}`;\n    aspectRatio = { w: 550, h: 550 };\n    embeddedLinkCache.set(originalLink, {\n      link,\n      intrinsicSize: aspectRatio,\n      type,\n    });\n    return { link, intrinsicSize: aspectRatio, type };\n  }\n\n  const valLink = link.match(RE_VALTOWN);\n  if (valLink) {\n    link =\n      valLink[1] === \"embed\" ? valLink[0] : valLink[0].replace(\"/v\", \"/embed\");\n    embeddedLinkCache.set(originalLink, {\n      link,\n      intrinsicSize: aspectRatio,\n      type,\n    });\n    return { link, intrinsicSize: aspectRatio, type };\n  }\n\n  if (RE_TWITTER.test(link)) {\n    // the embed srcdoc still supports twitter.com domain only\n    link = link.replace(/\\bx.com\\b/, \"twitter.com\");\n\n    let ret: IframeData;\n    // assume embed code\n    if (/<blockquote/.test(link)) {\n      const srcDoc = createSrcDoc(link);\n      ret = {\n        type: \"document\",\n        srcdoc: () => srcDoc,\n        intrinsicSize: { w: 480, h: 480 },\n      };\n      // assume regular tweet url\n    } else {\n      ret = {\n        type: \"document\",\n        srcdoc: (theme: string) =>\n          createSrcDoc(\n            `<blockquote class=\"twitter-tweet\" data-dnt=\"true\" data-theme=\"${theme}\"><a href=\"${link}\"></a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>`,\n          ),\n        intrinsicSize: { w: 480, h: 480 },\n      };\n    }\n    embeddedLinkCache.set(originalLink, ret);\n    return ret;\n  }\n\n  if (RE_GH_GIST.test(link)) {\n    let ret: IframeData;\n    // assume embed code\n    if (/<script>/.test(link)) {\n      const srcDoc = createSrcDoc(link);\n      ret = {\n        type: \"document\",\n        srcdoc: () => srcDoc,\n        intrinsicSize: { w: 550, h: 720 },\n      };\n      // assume regular url\n    } else {\n      ret = {\n        type: \"document\",\n        srcdoc: () =>\n          createSrcDoc(`\n          <script src=\"${link}.js\"></script>\n          <style type=\"text/css\">\n            * { margin: 0px; }\n            table, .gist { height: 100%; }\n            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n          </style>\n        `),\n        intrinsicSize: { w: 550, h: 720 },\n      };\n    }\n    embeddedLinkCache.set(link, ret);\n    return ret;\n  }\n\n  embeddedLinkCache.set(link, { link, intrinsicSize: aspectRatio, type });\n  return { link, intrinsicSize: aspectRatio, type };\n};\n\nexport const createPlaceholderEmbeddableLabel = (\n  element: ExcalidrawIframeLikeElement,\n): ExcalidrawElement => {\n  let text: string;\n  if (isIframeElement(element)) {\n    text = \"IFrame element\";\n  } else {\n    text =\n      !element.link || element?.link === \"\" ? \"Empty Web-Embed\" : element.link;\n  }\n\n  const fontSize = Math.max(\n    Math.min(element.width / 2, element.width / text.length),\n    element.width / 30,\n  );\n  const fontFamily = FONT_FAMILY.Helvetica;\n\n  const fontString = getFontString({\n    fontSize,\n    fontFamily,\n  });\n\n  return newTextElement({\n    x: element.x + element.width / 2,\n    y: element.y + element.height / 2,\n    strokeColor:\n      element.strokeColor !== \"transparent\" ? element.strokeColor : \"black\",\n    backgroundColor: \"transparent\",\n    fontFamily,\n    fontSize,\n    text: wrapText(text, fontString, element.width - 20),\n    textAlign: \"center\",\n    verticalAlign: VERTICAL_ALIGN.MIDDLE,\n    angle: element.angle ?? 0,\n  });\n};\n\nexport const actionSetEmbeddableAsActiveTool = register({\n  name: \"setEmbeddableAsActiveTool\",\n  trackEvent: { category: \"toolbar\" },\n  perform: (elements, appState, _, app) => {\n    const nextActiveTool = updateActiveTool(appState, {\n      type: \"embeddable\",\n    });\n\n    setCursorForShape(app.canvas, {\n      ...appState,\n      activeTool: nextActiveTool,\n    });\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        activeTool: updateActiveTool(appState, {\n          type: \"embeddable\",\n        }),\n      },\n      commitToHistory: false,\n    };\n  },\n});\n\nconst validateHostname = (\n  url: string,\n  /** using a Set assumes it already contains normalized bare domains */\n  allowedHostnames: Set<string> | string,\n): boolean => {\n  try {\n    const { hostname } = new URL(url);\n\n    const bareDomain = hostname.replace(/^www\\./, \"\");\n    const bareDomainWithFirstSubdomainWildcarded = bareDomain.replace(\n      /^([^.]+)/,\n      \"*\",\n    );\n\n    if (allowedHostnames instanceof Set) {\n      return (\n        ALLOWED_DOMAINS.has(bareDomain) ||\n        ALLOWED_DOMAINS.has(bareDomainWithFirstSubdomainWildcarded)\n      );\n    }\n\n    if (bareDomain === allowedHostnames.replace(/^www\\./, \"\")) {\n      return true;\n    }\n  } catch (error) {\n    // ignore\n  }\n  return false;\n};\n\nexport const maybeParseEmbedSrc = (str: string): string => {\n  const twitterMatch = str.match(RE_TWITTER_EMBED);\n  if (twitterMatch && twitterMatch.length === 2) {\n    return twitterMatch[1];\n  }\n\n  const gistMatch = str.match(RE_GH_GIST_EMBED);\n  if (gistMatch && gistMatch.length === 2) {\n    return gistMatch[1];\n  }\n\n  if (RE_GIPHY.test(str)) {\n    return `https://giphy.com/embed/${RE_GIPHY.exec(str)![1]}`;\n  }\n\n  const match = str.match(RE_GENERIC_EMBED);\n  if (match && match.length === 2) {\n    return match[1];\n  }\n  return str;\n};\n\nexport const embeddableURLValidator = (\n  url: string | null | undefined,\n  validateEmbeddable: ExcalidrawProps[\"validateEmbeddable\"],\n): boolean => {\n  if (!url) {\n    return false;\n  }\n  if (validateEmbeddable != null) {\n    if (typeof validateEmbeddable === \"function\") {\n      const ret = validateEmbeddable(url);\n      // if return value is undefined, leave validation to default\n      if (typeof ret === \"boolean\") {\n        return ret;\n      }\n    } else if (typeof validateEmbeddable === \"boolean\") {\n      return validateEmbeddable;\n    } else if (validateEmbeddable instanceof RegExp) {\n      return validateEmbeddable.test(url);\n    } else if (Array.isArray(validateEmbeddable)) {\n      for (const domain of validateEmbeddable) {\n        if (domain instanceof RegExp) {\n          if (url.match(domain)) {\n            return true;\n          }\n        } else if (validateHostname(url, domain)) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n\n  return validateHostname(url, ALLOWED_DOMAINS);\n};\n", "/**\n * https://stackoverflow.com/a/3368118\n * Draws a rounded rectangle using the current state of the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} radius The corner radius\n */\nexport const roundRect = (\n  context: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n  strokeColor?: string,\n) => {\n  context.beginPath();\n  context.moveTo(x + radius, y);\n  context.lineTo(x + width - radius, y);\n  context.quadraticCurveTo(x + width, y, x + width, y + radius);\n  context.lineTo(x + width, y + height - radius);\n  context.quadraticCurveTo(\n    x + width,\n    y + height,\n    x + width - radius,\n    y + height,\n  );\n  context.lineTo(x + radius, y + height);\n  context.quadraticCurveTo(x, y + height, x, y + height - radius);\n  context.lineTo(x, y + radius);\n  context.quadraticCurveTo(x, y, x + radius, y);\n  context.closePath();\n  context.fill();\n  if (strokeColor) {\n    context.strokeStyle = strokeColor;\n  }\n  context.stroke();\n};\n", "import { getCommonBounds } from \"../element\";\nimport { InteractiveCanvasAppState } from \"../types\";\nimport { ScrollBars } from \"./types\";\nimport { getGlobalCSSVariable } from \"../utils\";\nimport { getLanguage } from \"../i18n\";\nimport { ExcalidrawElement } from \"../element/types\";\n\nexport const SCROLLBAR_MARGIN = 4;\nexport const SCROLLBAR_WIDTH = 6;\nexport const SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\n\nexport const getScrollBars = (\n  elements: readonly ExcalidrawElement[],\n  viewportWidth: number,\n  viewportHeight: number,\n  appState: InteractiveCanvasAppState,\n): ScrollBars => {\n  if (!elements.length) {\n    return {\n      horizontal: null,\n      vertical: null,\n    };\n  }\n  // This is the bounding box of all the elements\n  const [elementsMinX, elementsMinY, elementsMaxX, elementsMaxY] =\n    getCommonBounds(elements);\n\n  // Apply zoom\n  const viewportWidthWithZoom = viewportWidth / appState.zoom.value;\n  const viewportHeightWithZoom = viewportHeight / appState.zoom.value;\n\n  const viewportWidthDiff = viewportWidth - viewportWidthWithZoom;\n  const viewportHeightDiff = viewportHeight - viewportHeightWithZoom;\n\n  const safeArea = {\n    top: parseInt(getGlobalCSSVariable(\"sat\")) || 0,\n    bottom: parseInt(getGlobalCSSVariable(\"sab\")) || 0,\n    left: parseInt(getGlobalCSSVariable(\"sal\")) || 0,\n    right: parseInt(getGlobalCSSVariable(\"sar\")) || 0,\n  };\n\n  const isRTL = getLanguage().rtl;\n\n  // The viewport is the rectangle currently visible for the user\n  const viewportMinX =\n    -appState.scrollX + viewportWidthDiff / 2 + safeArea.left;\n  const viewportMinY =\n    -appState.scrollY + viewportHeightDiff / 2 + safeArea.top;\n  const viewportMaxX = viewportMinX + viewportWidthWithZoom - safeArea.right;\n  const viewportMaxY = viewportMinY + viewportHeightWithZoom - safeArea.bottom;\n\n  // The scene is the bounding box of both the elements and viewport\n  const sceneMinX = Math.min(elementsMinX, viewportMinX);\n  const sceneMinY = Math.min(elementsMinY, viewportMinY);\n  const sceneMaxX = Math.max(elementsMaxX, viewportMaxX);\n  const sceneMaxY = Math.max(elementsMaxY, viewportMaxY);\n\n  // The scrollbar represents where the viewport is in relationship to the scene\n\n  return {\n    horizontal:\n      viewportMinX === sceneMinX && viewportMaxX === sceneMaxX\n        ? null\n        : {\n            x:\n              Math.max(safeArea.left, SCROLLBAR_MARGIN) +\n              ((viewportMinX - sceneMinX) / (sceneMaxX - sceneMinX)) *\n                viewportWidth,\n            y:\n              viewportHeight -\n              SCROLLBAR_WIDTH -\n              Math.max(SCROLLBAR_MARGIN, safeArea.bottom),\n            width:\n              ((viewportMaxX - viewportMinX) / (sceneMaxX - sceneMinX)) *\n                viewportWidth -\n              Math.max(SCROLLBAR_MARGIN * 2, safeArea.left + safeArea.right),\n            height: SCROLLBAR_WIDTH,\n          },\n    vertical:\n      viewportMinY === sceneMinY && viewportMaxY === sceneMaxY\n        ? null\n        : {\n            x: isRTL\n              ? Math.max(safeArea.left, SCROLLBAR_MARGIN)\n              : viewportWidth -\n                SCROLLBAR_WIDTH -\n                Math.max(safeArea.right, SCROLLBAR_MARGIN),\n            y:\n              ((viewportMinY - sceneMinY) / (sceneMaxY - sceneMinY)) *\n                viewportHeight +\n              Math.max(safeArea.top, SCROLLBAR_MARGIN),\n            width: SCROLLBAR_WIDTH,\n            height:\n              ((viewportMaxY - viewportMinY) / (sceneMaxY - sceneMinY)) *\n                viewportHeight -\n              Math.max(SCROLLBAR_MARGIN * 2, safeArea.top + safeArea.bottom),\n          },\n  };\n};\n\nexport const isOverScrollBars = (\n  scrollBars: ScrollBars,\n  x: number,\n  y: number,\n): {\n  isOverEither: boolean;\n  isOverHorizontal: boolean;\n  isOverVertical: boolean;\n} => {\n  const [isOverHorizontal, isOverVertical] = [\n    scrollBars.horizontal,\n    scrollBars.vertical,\n  ].map((scrollBar) => {\n    return (\n      scrollBar != null &&\n      scrollBar.x <= x &&\n      x <= scrollBar.x + scrollBar.width &&\n      scrollBar.y <= y &&\n      y <= scrollBar.y + scrollBar.height\n    );\n  });\n  const isOverEither = isOverHorizontal || isOverVertical;\n  return { isOverEither, isOverHorizontal, isOverVertical };\n};\n", "function hashToInteger(id: string) {\n  let hash = 0;\n  if (id.length === 0) {\n    return hash;\n  }\n  for (let i = 0; i < id.length; i++) {\n    const char = id.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n  }\n  return hash;\n}\n\nexport const getClientColor = (\n  /**\n   * any uniquely identifying key, such as user id or socket id\n   */\n  id: string,\n) => {\n  // to get more even distribution in case `id` is not uniformly distributed to\n  // begin with, we hash it\n  const hash = Math.abs(hashToInteger(id));\n  // we want to get a multiple of 10 number in the range of 0-360 (in other\n  // words a hue value of step size 10). There are 37 such values including 0.\n  const hue = (hash % 37) * 10;\n  const saturation = 100;\n  const lightness = 83;\n\n  return `hsl(${hue}, ${saturation}%, ${lightness}%)`;\n};\n\n/**\n * returns first char, capitalized\n */\nexport const getNameInitial = (name?: string | null) => {\n  // first char can be a surrogate pair, hence using codePointAt\n  const firstCodePoint = name?.trim()?.codePointAt(0);\n  return (\n    firstCodePoint ? String.fromCodePoint(firstCodePoint) : \"?\"\n  ).toUpperCase();\n};\n", "import React from \"react\";\nimport {\n  PointerType,\n  ExcalidrawLinearElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n  TextAlign,\n  ExcalidrawElement,\n  GroupId,\n  ExcalidrawBindableElement,\n  Arrowhead,\n  ChartType,\n  FontFamilyValues,\n  FileId,\n  ExcalidrawImageElement,\n  Theme,\n  StrokeRoundness,\n  ExcalidrawEmbeddableElement,\n  ExcalidrawMagicFrameElement,\n  ExcalidrawFrameLikeElement,\n  ExcalidrawElementType,\n  ExcalidrawIframeLikeElement,\n} from \"./element/types\";\nimport { Action } from \"./actions/types\";\nimport { Point as RoughPoint } from \"roughjs/bin/geometry\";\nimport { LinearElementEditor } from \"./element/linearElementEditor\";\nimport { SuggestedBinding } from \"./element/binding\";\nimport { ImportedDataState } from \"./data/types\";\nimport type App from \"./components/App\";\nimport type { throttleRAF } from \"./utils\";\nimport { Spreadsheet } from \"./charts\";\nimport { Language } from \"./i18n\";\nimport { ClipboardData } from \"./clipboard\";\nimport { isOverScrollBars } from \"./scene/scrollbars\";\nimport { MaybeTransformHandleType } from \"./element/transformHandles\";\nimport Library from \"./data/library\";\nimport type { FileSystemHandle } from \"./data/filesystem\";\nimport type { IMAGE_MIME_TYPES, MIME_TYPES } from \"./constants\";\nimport { ContextMenuItems } from \"./components/ContextMenu\";\nimport { SnapLine } from \"./snapping\";\nimport { Merge, ValueOf } from \"./utility-types\";\n\nexport type Point = Readonly<RoughPoint>;\n\nexport type SocketId = string & { _brand: \"SocketId\" };\n\nexport type Collaborator = Readonly<{\n  pointer?: CollaboratorPointer;\n  button?: \"up\" | \"down\";\n  selectedElementIds?: AppState[\"selectedElementIds\"];\n  username?: string | null;\n  userState?: UserIdleState;\n  color?: {\n    background: string;\n    stroke: string;\n  };\n  // The url of the collaborator's avatar, defaults to username initials\n  // if not present\n  avatarUrl?: string;\n  // user id. If supplied, we'll filter out duplicates when rendering user avatars.\n  id?: string;\n  socketId?: SocketId;\n  isCurrentUser?: boolean;\n}>;\n\nexport type CollaboratorPointer = {\n  x: number;\n  y: number;\n  tool: \"pointer\" | \"laser\";\n};\n\nexport type DataURL = string & { _brand: \"DataURL\" };\n\nexport type BinaryFileData = {\n  mimeType:\n    | ValueOf<typeof IMAGE_MIME_TYPES>\n    // future user or unknown file type\n    | typeof MIME_TYPES.binary;\n  id: FileId;\n  dataURL: DataURL;\n  /**\n   * Epoch timestamp in milliseconds\n   */\n  created: number;\n  /**\n   * Indicates when the file was last retrieved from storage to be loaded\n   * onto the scene. We use this flag to determine whether to delete unused\n   * files from storage.\n   *\n   * Epoch timestamp in milliseconds.\n   */\n  lastRetrieved?: number;\n};\n\nexport type BinaryFileMetadata = Omit<BinaryFileData, \"dataURL\">;\n\nexport type BinaryFiles = Record<ExcalidrawElement[\"id\"], BinaryFileData>;\n\nexport type ToolType =\n  | \"selection\"\n  | \"rectangle\"\n  | \"diamond\"\n  | \"ellipse\"\n  | \"arrow\"\n  | \"line\"\n  | \"freedraw\"\n  | \"text\"\n  | \"image\"\n  | \"eraser\"\n  | \"hand\"\n  | \"frame\"\n  | \"magicframe\"\n  | \"embeddable\"\n  | \"laser\";\n\nexport type ElementOrToolType = ExcalidrawElementType | ToolType | \"custom\";\n\nexport type ActiveTool =\n  | {\n      type: ToolType;\n      customType: null;\n    }\n  | {\n      type: \"custom\";\n      customType: string;\n    };\n\nexport type SidebarName = string;\nexport type SidebarTabName = string;\n\nexport type UserToFollow = {\n  socketId: SocketId;\n  username: string;\n};\n\ntype _CommonCanvasAppState = {\n  zoom: AppState[\"zoom\"];\n  scrollX: AppState[\"scrollX\"];\n  scrollY: AppState[\"scrollY\"];\n  width: AppState[\"width\"];\n  height: AppState[\"height\"];\n  viewModeEnabled: AppState[\"viewModeEnabled\"];\n  editingGroupId: AppState[\"editingGroupId\"]; // TODO: move to interactive canvas if possible\n  selectedElementIds: AppState[\"selectedElementIds\"]; // TODO: move to interactive canvas if possible\n  frameToHighlight: AppState[\"frameToHighlight\"]; // TODO: move to interactive canvas if possible\n  offsetLeft: AppState[\"offsetLeft\"];\n  offsetTop: AppState[\"offsetTop\"];\n  theme: AppState[\"theme\"];\n  pendingImageElementId: AppState[\"pendingImageElementId\"];\n};\n\nexport type StaticCanvasAppState = Readonly<\n  _CommonCanvasAppState & {\n    shouldCacheIgnoreZoom: AppState[\"shouldCacheIgnoreZoom\"];\n    /** null indicates transparent bg */\n    viewBackgroundColor: AppState[\"viewBackgroundColor\"] | null;\n    exportScale: AppState[\"exportScale\"];\n    selectedElementsAreBeingDragged: AppState[\"selectedElementsAreBeingDragged\"];\n    gridSize: AppState[\"gridSize\"];\n    frameRendering: AppState[\"frameRendering\"];\n  }\n>;\n\nexport type InteractiveCanvasAppState = Readonly<\n  _CommonCanvasAppState & {\n    // renderInteractiveScene\n    activeEmbeddable: AppState[\"activeEmbeddable\"];\n    editingLinearElement: AppState[\"editingLinearElement\"];\n    selectionElement: AppState[\"selectionElement\"];\n    selectedGroupIds: AppState[\"selectedGroupIds\"];\n    selectedLinearElement: AppState[\"selectedLinearElement\"];\n    multiElement: AppState[\"multiElement\"];\n    isBindingEnabled: AppState[\"isBindingEnabled\"];\n    suggestedBindings: AppState[\"suggestedBindings\"];\n    isRotating: AppState[\"isRotating\"];\n    elementsToHighlight: AppState[\"elementsToHighlight\"];\n    // Collaborators\n    collaborators: AppState[\"collaborators\"];\n    // SnapLines\n    snapLines: AppState[\"snapLines\"];\n    zenModeEnabled: AppState[\"zenModeEnabled\"];\n  }\n>;\n\nexport interface AppState {\n  contextMenu: {\n    items: ContextMenuItems;\n    top: number;\n    left: number;\n  } | null;\n  showWelcomeScreen: boolean;\n  isLoading: boolean;\n  errorMessage: React.ReactNode;\n  activeEmbeddable: {\n    element: NonDeletedExcalidrawElement;\n    state: \"hover\" | \"active\";\n  } | null;\n  draggingElement: NonDeletedExcalidrawElement | null;\n  resizingElement: NonDeletedExcalidrawElement | null;\n  multiElement: NonDeleted<ExcalidrawLinearElement> | null;\n  selectionElement: NonDeletedExcalidrawElement | null;\n  isBindingEnabled: boolean;\n  startBoundElement: NonDeleted<ExcalidrawBindableElement> | null;\n  suggestedBindings: SuggestedBinding[];\n  frameToHighlight: NonDeleted<ExcalidrawFrameLikeElement> | null;\n  frameRendering: {\n    enabled: boolean;\n    name: boolean;\n    outline: boolean;\n    clip: boolean;\n  };\n  editingFrame: string | null;\n  elementsToHighlight: NonDeleted<ExcalidrawElement>[] | null;\n  // element being edited, but not necessarily added to elements array yet\n  // (e.g. text element when typing into the input)\n  editingElement: NonDeletedExcalidrawElement | null;\n  editingLinearElement: LinearElementEditor | null;\n  activeTool: {\n    /**\n     * indicates a previous tool we should revert back to if we deselect the\n     * currently active tool. At the moment applies to `eraser` and `hand` tool.\n     */\n    lastActiveTool: ActiveTool | null;\n    locked: boolean;\n  } & ActiveTool;\n  penMode: boolean;\n  penDetected: boolean;\n  exportBackground: boolean;\n  exportEmbedScene: boolean;\n  exportWithDarkMode: boolean;\n  exportScale: number;\n  currentItemStrokeColor: string;\n  currentItemBackgroundColor: string;\n  currentItemFillStyle: ExcalidrawElement[\"fillStyle\"];\n  currentItemStrokeWidth: number;\n  currentItemStrokeStyle: ExcalidrawElement[\"strokeStyle\"];\n  currentItemRoughness: number;\n  currentItemOpacity: number;\n  currentItemFontFamily: FontFamilyValues;\n  currentItemFontSize: number;\n  currentItemTextAlign: TextAlign;\n  currentItemStartArrowhead: Arrowhead | null;\n  currentItemEndArrowhead: Arrowhead | null;\n  currentItemRoundness: StrokeRoundness;\n  viewBackgroundColor: string;\n  scrollX: number;\n  scrollY: number;\n  cursorButton: \"up\" | \"down\";\n  scrolledOutside: boolean;\n  name: string | null;\n  isResizing: boolean;\n  isRotating: boolean;\n  zoom: Zoom;\n  openMenu: \"canvas\" | \"shape\" | null;\n  openPopup: \"canvasBackground\" | \"elementBackground\" | \"elementStroke\" | null;\n  openSidebar: { name: SidebarName; tab?: SidebarTabName } | null;\n  openDialog:\n    | null\n    | { name: \"imageExport\" | \"help\" | \"jsonExport\" }\n    | {\n        name: \"settings\";\n        source:\n          | \"tool\" // when magicframe tool is selected\n          | \"generation\" // when magicframe generate button is clicked\n          | \"settings\"; // when AI settings dialog is explicitly invoked\n        tab: \"text-to-diagram\" | \"diagram-to-code\";\n      }\n    | { name: \"ttd\"; tab: \"text-to-diagram\" | \"mermaid\" };\n  /**\n   * Reflects user preference for whether the default sidebar should be docked.\n   *\n   * NOTE this is only a user preference and does not reflect the actual docked\n   * state of the sidebar, because the host apps can override this through\n   * a DefaultSidebar prop, which is not reflected back to the appState.\n   */\n  defaultSidebarDockedPreference: boolean;\n\n  lastPointerDownWith: PointerType;\n  selectedElementIds: Readonly<{ [id: string]: true }>;\n  previousSelectedElementIds: { [id: string]: true };\n  selectedElementsAreBeingDragged: boolean;\n  shouldCacheIgnoreZoom: boolean;\n  toast: { message: string; closable?: boolean; duration?: number } | null;\n  zenModeEnabled: boolean;\n  theme: Theme;\n  gridSize: number | null;\n  viewModeEnabled: boolean;\n\n  /** top-most selected groups (i.e. does not include nested groups) */\n  selectedGroupIds: { [groupId: string]: boolean };\n  /** group being edited when you drill down to its constituent element\n    (e.g. when you double-click on a group's element) */\n  editingGroupId: GroupId | null;\n  width: number;\n  height: number;\n  offsetTop: number;\n  offsetLeft: number;\n\n  fileHandle: FileSystemHandle | null;\n  collaborators: Map<SocketId, Collaborator>;\n  showStats: boolean;\n  currentChartType: ChartType;\n  pasteDialog:\n    | {\n        shown: false;\n        data: null;\n      }\n    | {\n        shown: true;\n        data: Spreadsheet;\n      };\n  /** imageElement waiting to be placed on canvas */\n  pendingImageElementId: ExcalidrawImageElement[\"id\"] | null;\n  showHyperlinkPopup: false | \"info\" | \"editor\";\n  selectedLinearElement: LinearElementEditor | null;\n  snapLines: readonly SnapLine[];\n  originSnapOffset: {\n    x: number;\n    y: number;\n  } | null;\n  objectsSnapModeEnabled: boolean;\n  /** the user's clientId & username who is being followed on the canvas */\n  userToFollow: UserToFollow | null;\n  /** the clientIds of the users following the current user */\n  followedBy: Set<SocketId>;\n}\n\nexport type UIAppState = Omit<\n  AppState,\n  | \"suggestedBindings\"\n  | \"startBoundElement\"\n  | \"cursorButton\"\n  | \"scrollX\"\n  | \"scrollY\"\n>;\n\nexport type NormalizedZoomValue = number & { _brand: \"normalizedZoom\" };\n\nexport type Zoom = Readonly<{\n  value: NormalizedZoomValue;\n}>;\n\nexport type PointerCoords = Readonly<{\n  x: number;\n  y: number;\n}>;\n\nexport type Gesture = {\n  pointers: Map<number, PointerCoords>;\n  lastCenter: { x: number; y: number } | null;\n  initialDistance: number | null;\n  initialScale: number | null;\n};\n\nexport declare class GestureEvent extends UIEvent {\n  readonly rotation: number;\n  readonly scale: number;\n}\n\n// libraries\n// -----------------------------------------------------------------------------\n/** @deprecated legacy: do not use outside of migration paths */\nexport type LibraryItem_v1 = readonly NonDeleted<ExcalidrawElement>[];\n/** @deprecated legacy: do not use outside of migration paths */\ntype LibraryItems_v1 = readonly LibraryItem_v1[];\n\n/** v2 library item */\nexport type LibraryItem = {\n  id: string;\n  status: \"published\" | \"unpublished\";\n  elements: readonly NonDeleted<ExcalidrawElement>[];\n  /** timestamp in epoch (ms) */\n  created: number;\n  name?: string;\n  error?: string;\n};\nexport type LibraryItems = readonly LibraryItem[];\nexport type LibraryItems_anyVersion = LibraryItems | LibraryItems_v1;\n\nexport type LibraryItemsSource =\n  | ((\n      currentLibraryItems: LibraryItems,\n    ) =>\n      | Blob\n      | LibraryItems_anyVersion\n      | Promise<LibraryItems_anyVersion | Blob>)\n  | Blob\n  | LibraryItems_anyVersion\n  | Promise<LibraryItems_anyVersion | Blob>;\n// -----------------------------------------------------------------------------\n\nexport type ExcalidrawInitialDataState = Merge<\n  ImportedDataState,\n  {\n    libraryItems?:\n      | Required<ImportedDataState>[\"libraryItems\"]\n      | Promise<Required<ImportedDataState>[\"libraryItems\"]>;\n  }\n>;\n\nexport type OnUserFollowedPayload = {\n  userToFollow: UserToFollow;\n  action: \"FOLLOW\" | \"UNFOLLOW\";\n};\n\nexport interface ExcalidrawProps {\n  onChange?: (\n    elements: readonly ExcalidrawElement[],\n    appState: AppState,\n    files: BinaryFiles,\n  ) => void;\n  initialData?:\n    | ExcalidrawInitialDataState\n    | null\n    | Promise<ExcalidrawInitialDataState | null>;\n  excalidrawAPI?: (api: ExcalidrawImperativeAPI) => void;\n  isCollaborating?: boolean;\n  onPointerUpdate?: (payload: {\n    pointer: { x: number; y: number; tool: \"pointer\" | \"laser\" };\n    button: \"down\" | \"up\";\n    pointersMap: Gesture[\"pointers\"];\n  }) => void;\n  onPaste?: (\n    data: ClipboardData,\n    event: ClipboardEvent | null,\n  ) => Promise<boolean> | boolean;\n  renderTopRightUI?: (\n    isMobile: boolean,\n    appState: UIAppState,\n  ) => JSX.Element | null;\n  langCode?: Language[\"code\"];\n  viewModeEnabled?: boolean;\n  zenModeEnabled?: boolean;\n  gridModeEnabled?: boolean;\n  objectsSnapModeEnabled?: boolean;\n  libraryReturnUrl?: string;\n  theme?: Theme;\n  // @TODO come with better API before v0.18.0\n  name?: string;\n  renderCustomStats?: (\n    elements: readonly NonDeletedExcalidrawElement[],\n    appState: UIAppState,\n  ) => JSX.Element;\n  UIOptions?: Partial<UIOptions>;\n  detectScroll?: boolean;\n  handleKeyboardGlobally?: boolean;\n  onLibraryChange?: (libraryItems: LibraryItems) => void | Promise<any>;\n  autoFocus?: boolean;\n  generateIdForFile?: (file: File) => string | Promise<string>;\n  onLinkOpen?: (\n    element: NonDeletedExcalidrawElement,\n    event: CustomEvent<{\n      nativeEvent: MouseEvent | React.PointerEvent<HTMLCanvasElement>;\n    }>,\n  ) => void;\n  onPointerDown?: (\n    activeTool: AppState[\"activeTool\"],\n    pointerDownState: PointerDownState,\n  ) => void;\n  onPointerUp?: (\n    activeTool: AppState[\"activeTool\"],\n    pointerDownState: PointerDownState,\n  ) => void;\n  onScrollChange?: (scrollX: number, scrollY: number, zoom: Zoom) => void;\n  onUserFollow?: (payload: OnUserFollowedPayload) => void;\n  children?: React.ReactNode;\n  validateEmbeddable?:\n    | boolean\n    | string[]\n    | RegExp\n    | RegExp[]\n    | ((link: string) => boolean | undefined);\n  renderEmbeddable?: (\n    element: NonDeleted<ExcalidrawEmbeddableElement>,\n    appState: AppState,\n  ) => JSX.Element | null;\n  aiEnabled?: boolean;\n}\n\nexport type SceneData = {\n  elements?: ImportedDataState[\"elements\"];\n  appState?: ImportedDataState[\"appState\"];\n  collaborators?: Map<SocketId, Collaborator>;\n  commitToHistory?: boolean;\n};\n\nexport enum UserIdleState {\n  ACTIVE = \"active\",\n  AWAY = \"away\",\n  IDLE = \"idle\",\n}\n\nexport type ExportOpts = {\n  saveFileToDisk?: boolean;\n  onExportToBackend?: (\n    exportedElements: readonly NonDeletedExcalidrawElement[],\n    appState: UIAppState,\n    files: BinaryFiles,\n  ) => void;\n  renderCustomUI?: (\n    exportedElements: readonly NonDeletedExcalidrawElement[],\n    appState: UIAppState,\n    files: BinaryFiles,\n    canvas: HTMLCanvasElement,\n  ) => JSX.Element;\n};\n\n// NOTE at the moment, if action name corresponds to canvasAction prop, its\n// truthiness value will determine whether the action is rendered or not\n// (see manager renderAction). We also override canvasAction values in\n// Excalidraw package index.tsx.\nexport type CanvasActions = Partial<{\n  changeViewBackgroundColor: boolean;\n  clearCanvas: boolean;\n  export: false | ExportOpts;\n  loadScene: boolean;\n  saveToActiveFile: boolean;\n  toggleTheme: boolean | null;\n  saveAsImage: boolean;\n}>;\n\nexport type UIOptions = Partial<{\n  dockedSidebarBreakpoint: number;\n  canvasActions: CanvasActions;\n  tools: {\n    image: boolean;\n  };\n  /** @deprecated does nothing. Will be removed in 0.15 */\n  welcomeScreen?: boolean;\n}>;\n\nexport type AppProps = Merge<\n  ExcalidrawProps,\n  {\n    UIOptions: Merge<\n      UIOptions,\n      {\n        canvasActions: Required<CanvasActions> & { export: ExportOpts };\n      }\n    >;\n    detectScroll: boolean;\n    handleKeyboardGlobally: boolean;\n    isCollaborating: boolean;\n    children?: React.ReactNode;\n    aiEnabled: boolean;\n  }\n>;\n\n/** A subset of App class properties that we need to use elsewhere\n * in the app, eg Manager. Factored out into a separate type to keep DRY. */\nexport type AppClassProperties = {\n  props: AppProps;\n  interactiveCanvas: HTMLCanvasElement | null;\n  /** static canvas */\n  canvas: HTMLCanvasElement;\n  focusContainer(): void;\n  library: Library;\n  imageCache: Map<\n    FileId,\n    {\n      image: HTMLImageElement | Promise<HTMLImageElement>;\n      mimeType: ValueOf<typeof IMAGE_MIME_TYPES>;\n    }\n  >;\n  files: BinaryFiles;\n  device: App[\"device\"];\n  scene: App[\"scene\"];\n  pasteFromClipboard: App[\"pasteFromClipboard\"];\n  id: App[\"id\"];\n  onInsertElements: App[\"onInsertElements\"];\n  onExportImage: App[\"onExportImage\"];\n  lastViewportPosition: App[\"lastViewportPosition\"];\n  scrollToContent: App[\"scrollToContent\"];\n  addFiles: App[\"addFiles\"];\n  addElementsFromPasteOrLibrary: App[\"addElementsFromPasteOrLibrary\"];\n  togglePenMode: App[\"togglePenMode\"];\n  setActiveTool: App[\"setActiveTool\"];\n  setOpenDialog: App[\"setOpenDialog\"];\n  insertEmbeddableElement: App[\"insertEmbeddableElement\"];\n  onMagicframeToolSelect: App[\"onMagicframeToolSelect\"];\n  getName: App[\"getName\"];\n};\n\nexport type PointerDownState = Readonly<{\n  // The first position at which pointerDown happened\n  origin: Readonly<{ x: number; y: number }>;\n  // Same as \"origin\" but snapped to the grid, if grid is on\n  originInGrid: Readonly<{ x: number; y: number }>;\n  // Scrollbar checks\n  scrollbars: ReturnType<typeof isOverScrollBars>;\n  // The previous pointer position\n  lastCoords: { x: number; y: number };\n  // map of original elements data\n  originalElements: Map<string, NonDeleted<ExcalidrawElement>>;\n  resize: {\n    // Handle when resizing, might change during the pointer interaction\n    handleType: MaybeTransformHandleType;\n    // This is determined on the initial pointer down event\n    isResizing: boolean;\n    // This is determined on the initial pointer down event\n    offset: { x: number; y: number };\n    // This is determined on the initial pointer down event\n    arrowDirection: \"origin\" | \"end\";\n    // This is a center point of selected elements determined on the initial pointer down event (for rotation only)\n    center: { x: number; y: number };\n  };\n  hit: {\n    // The element the pointer is \"hitting\", is determined on the initial\n    // pointer down event\n    element: NonDeleted<ExcalidrawElement> | null;\n    // The elements the pointer is \"hitting\", is determined on the initial\n    // pointer down event\n    allHitElements: NonDeleted<ExcalidrawElement>[];\n    // This is determined on the initial pointer down event\n    wasAddedToSelection: boolean;\n    // Whether selected element(s) were duplicated, might change during the\n    // pointer interaction\n    hasBeenDuplicated: boolean;\n    hasHitCommonBoundingBoxOfSelectedElements: boolean;\n  };\n  withCmdOrCtrl: boolean;\n  drag: {\n    // Might change during the pointer interaction\n    hasOccurred: boolean;\n    // Might change during the pointer interaction\n    offset: { x: number; y: number } | null;\n  };\n  // We need to have these in the state so that we can unsubscribe them\n  eventListeners: {\n    // It's defined on the initial pointer down event\n    onMove: null | ReturnType<typeof throttleRAF>;\n    // It's defined on the initial pointer down event\n    onUp: null | ((event: PointerEvent) => void);\n    // It's defined on the initial pointer down event\n    onKeyDown: null | ((event: KeyboardEvent) => void);\n    // It's defined on the initial pointer down event\n    onKeyUp: null | ((event: KeyboardEvent) => void);\n  };\n  boxSelection: {\n    hasOccurred: boolean;\n  };\n}>;\n\nexport type UnsubscribeCallback = () => void;\n\nexport type ExcalidrawImperativeAPI = {\n  updateScene: InstanceType<typeof App>[\"updateScene\"];\n  updateLibrary: InstanceType<typeof Library>[\"updateLibrary\"];\n  resetScene: InstanceType<typeof App>[\"resetScene\"];\n  getSceneElementsIncludingDeleted: InstanceType<\n    typeof App\n  >[\"getSceneElementsIncludingDeleted\"];\n  history: {\n    clear: InstanceType<typeof App>[\"resetHistory\"];\n  };\n  getSceneElements: InstanceType<typeof App>[\"getSceneElements\"];\n  getAppState: () => InstanceType<typeof App>[\"state\"];\n  getFiles: () => InstanceType<typeof App>[\"files\"];\n  getName: InstanceType<typeof App>[\"getName\"];\n  scrollToContent: InstanceType<typeof App>[\"scrollToContent\"];\n  registerAction: (action: Action) => void;\n  refresh: InstanceType<typeof App>[\"refresh\"];\n  setToast: InstanceType<typeof App>[\"setToast\"];\n  addFiles: (data: BinaryFileData[]) => void;\n  id: string;\n  setActiveTool: InstanceType<typeof App>[\"setActiveTool\"];\n  setCursor: InstanceType<typeof App>[\"setCursor\"];\n  resetCursor: InstanceType<typeof App>[\"resetCursor\"];\n  toggleSidebar: InstanceType<typeof App>[\"toggleSidebar\"];\n  /**\n   * Disables rendering of frames (including element clipping), but currently\n   * the frames are still interactive in edit mode. As such, this API should be\n   * used in conjunction with view mode (props.viewModeEnabled).\n   */\n  updateFrameRendering: InstanceType<typeof App>[\"updateFrameRendering\"];\n  onChange: (\n    callback: (\n      elements: readonly ExcalidrawElement[],\n      appState: AppState,\n      files: BinaryFiles,\n    ) => void,\n  ) => UnsubscribeCallback;\n  onPointerDown: (\n    callback: (\n      activeTool: AppState[\"activeTool\"],\n      pointerDownState: PointerDownState,\n      event: React.PointerEvent<HTMLElement>,\n    ) => void,\n  ) => UnsubscribeCallback;\n  onPointerUp: (\n    callback: (\n      activeTool: AppState[\"activeTool\"],\n      pointerDownState: PointerDownState,\n      event: PointerEvent,\n    ) => void,\n  ) => UnsubscribeCallback;\n  onScrollChange: (\n    callback: (scrollX: number, scrollY: number, zoom: Zoom) => void,\n  ) => UnsubscribeCallback;\n  onUserFollow: (\n    callback: (payload: OnUserFollowedPayload) => void,\n  ) => UnsubscribeCallback;\n};\n\nexport type Device = Readonly<{\n  viewport: {\n    isMobile: boolean;\n    isLandscape: boolean;\n  };\n  editor: {\n    isMobile: boolean;\n    canFitSidebar: boolean;\n  };\n  isTouchScreen: boolean;\n}>;\n\ntype FrameNameBounds = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  angle: number;\n};\n\nexport type FrameNameBoundsCache = {\n  get: (\n    frameElement: ExcalidrawFrameLikeElement | ExcalidrawMagicFrameElement,\n  ) => FrameNameBounds | null;\n  _cache: Map<\n    string,\n    FrameNameBounds & {\n      zoom: AppState[\"zoom\"][\"value\"];\n      versionNonce: ExcalidrawFrameLikeElement[\"versionNonce\"];\n    }\n  >;\n};\n\nexport type KeyboardModifiersObject = {\n  ctrlKey: boolean;\n  shiftKey: boolean;\n  altKey: boolean;\n  metaKey: boolean;\n};\n\nexport type Primitive =\n  | number\n  | string\n  | boolean\n  | bigint\n  | symbol\n  | null\n  | undefined;\n\nexport type JSONValue = string | number | boolean | null | object;\n\nexport type EmbedsValidationStatus = Map<\n  ExcalidrawIframeLikeElement[\"id\"],\n  boolean\n>;\n\nexport type ElementsPendingErasure = Set<ExcalidrawElement[\"id\"]>;\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .ToolIcon {\n  border-radius: var(--border-radius-lg);\n  display: inline-flex;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n}\n.excalidraw .ToolIcon__hidden {\n  display: none !important;\n}\n.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked + .ToolIcon__icon,\n.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked + .ToolIcon__icon {\n  --icon-fill-color: var(--color-on-primary-container);\n}\n.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked + .ToolIcon__icon svg,\n.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked + .ToolIcon__icon svg {\n  fill: var(--icon-fill-color);\n}\n.excalidraw .ToolIcon .ToolIcon_type_radio:checked + .ToolIcon__icon,\n.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked + .ToolIcon__icon {\n  background: var(--color-surface-primary-container);\n  --keybinding-color: var(--color-on-primary-container);\n}\n.excalidraw .ToolIcon .ToolIcon_type_radio:checked + .ToolIcon__icon svg,\n.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked + .ToolIcon__icon svg {\n  color: var(--color-on-primary-container);\n}\n.excalidraw .ToolIcon .ToolIcon__keybinding {\n  bottom: 4px;\n  right: 4px;\n}\n.excalidraw .ToolIcon .ToolIcon__icon:hover {\n  background: var(--button-hover-bg);\n}\n.excalidraw .ToolIcon .ToolIcon__icon:active {\n  background: var(--button-hover-bg);\n  border: 1px solid var(--button-active-border);\n}\n.excalidraw .ToolIcon .ToolIcon__icon:active svg {\n  color: var(--color-on-primary-container);\n}\n.excalidraw .ToolIcon--plain {\n  background-color: transparent;\n}\n.excalidraw .ToolIcon--plain .ToolIcon__icon {\n  width: 2rem;\n  height: 2rem;\n}\n.excalidraw .ToolIcon_type_radio,\n.excalidraw .ToolIcon_type_checkbox {\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n}\n.excalidraw .ToolIcon__icon {\n  box-sizing: border-box;\n  width: var(--default-button-size);\n  height: var(--default-button-size);\n  color: var(--icon-fill-color);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: var(--border-radius-lg);\n}\n.excalidraw .ToolIcon__icon + .ToolIcon__label {\n  margin-inline-start: 0;\n}\n.excalidraw .ToolIcon__icon svg {\n  position: relative;\n  width: var(--default-icon-size);\n  height: var(--default-icon-size);\n  color: var(--icon-fill-color);\n}\n.excalidraw .ToolIcon__label {\n  display: flex;\n  align-items: center;\n  color: var(--icon-fill-color);\n  font-family: var(--ui-font);\n  margin: 0 0.8em;\n  text-overflow: ellipsis;\n}\n.excalidraw .ToolIcon__label .Spinner {\n  margin-left: 0.6em;\n}\n.excalidraw .ToolIcon_size_small .ToolIcon__icon {\n  width: 2rem;\n  height: 2rem;\n  font-size: 0.8em;\n}\n.excalidraw .ToolIcon_type_button,\n.excalidraw .Modal .ToolIcon_type_button,\n.excalidraw .ToolIcon_type_button {\n  padding: 0;\n  border: none;\n  margin: 0;\n  font-size: inherit;\n  background-color: initial;\n}\n.excalidraw .ToolIcon_type_button:focus-visible,\n.excalidraw .Modal .ToolIcon_type_button:focus-visible,\n.excalidraw .ToolIcon_type_button:focus-visible {\n  box-shadow: 0 0 0 2px var(--focus-highlight-color);\n}\n.excalidraw .ToolIcon_type_button.ToolIcon--selected,\n.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected,\n.excalidraw .ToolIcon_type_button.ToolIcon--selected {\n  background-color: var(--button-gray-2);\n}\n.excalidraw .ToolIcon_type_button.ToolIcon--selected:active,\n.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected:active,\n.excalidraw .ToolIcon_type_button.ToolIcon--selected:active {\n  background-color: var(--button-gray-3);\n}\n.excalidraw .ToolIcon_type_button:active,\n.excalidraw .Modal .ToolIcon_type_button:active,\n.excalidraw .ToolIcon_type_button:active {\n  background-color: var(--button-gray-3);\n}\n.excalidraw .ToolIcon_type_button--show,\n.excalidraw .Modal .ToolIcon_type_button--show,\n.excalidraw .ToolIcon_type_button--show {\n  visibility: visible;\n}\n.excalidraw .ToolIcon_type_button--hide,\n.excalidraw .Modal .ToolIcon_type_button--hide,\n.excalidraw .ToolIcon_type_button--hide {\n  display: none !important;\n}\n.excalidraw .ToolIcon_type_floating {\n  background-color: transparent;\n}\n.excalidraw .ToolIcon_type_floating:hover {\n  background-color: transparent;\n}\n.excalidraw .ToolIcon_type_floating:active {\n  background-color: transparent;\n}\n.excalidraw .ToolIcon_type_floating .ToolIcon__icon {\n  background-color: var(--button-gray-1);\n  width: 2rem;\n  height: 2rem;\n}\n.excalidraw .ToolIcon_type_floating .ToolIcon__icon:hover {\n  background-color: var(--button-gray-2);\n}\n.excalidraw .ToolIcon_type_floating .ToolIcon__icon:active {\n  background-color: var(--button-gray-3);\n}\n.excalidraw .ToolIcon__keybinding {\n  position: absolute;\n  bottom: 2px;\n  right: 3px;\n  font-size: 0.625rem;\n  color: var(--keybinding-color);\n  font-family: var(--ui-font);\n  user-select: none;\n}\n:root[dir=ltr] .excalidraw .unlocked-icon {\n  left: 2px;\n}\n:root[dir=rtl] .excalidraw .unlocked-icon {\n  right: 2px;\n}\n.excalidraw .App-toolbar-container .ToolIcon__icon {\n  width: var(--lg-button-size);\n  height: var(--lg-button-size);\n}\n@media screen and (max-width: 450px) {\n  .excalidraw .App-toolbar-container .ToolIcon__icon {\n    width: 1.8rem;\n    height: 1.8rem;\n  }\n}\n@media screen and (max-width: 379px) {\n  .excalidraw .App-toolbar-container .ToolIcon__icon {\n    width: 1.5rem;\n    height: 1.5rem;\n  }\n}\n.excalidraw .App-toolbar-container .ToolIcon__icon svg {\n  width: var(--lg-icon-size);\n  height: var(--lg-icon-size);\n}\n.excalidraw .App-toolbar-container .ToolIcon__LaserPointer .ToolIcon__icon,\n.excalidraw .App-toolbar-container .ToolIcon__MagicButton .ToolIcon__icon {\n  width: var(--default-button-size);\n  height: var(--default-button-size);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUb29sSWNvbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQ3pLQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FERkE7QUFBQTtFQUNFOztBQUVBO0FBQUE7RUFDRTs7QUFRTjtBQUFBO0VBQ0U7RUFDQTs7QUFFQTtBQUFBO0VBQ0U7O0FBS047RUFDRTtFQUNBOztBQUlBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FDN0JOO0VBQ0U7O0FBQ0E7RUFDRTtFQUNBOztBQUlKO0FBQUE7RUFFRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUVBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0FBQUE7QUFBQTtFQUdFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7QUFBQTtBQUFBO0VBQ0U7O0FBR0Y7QUFBQTtBQUFBO0VBQ0U7O0FBRUE7QUFBQTtBQUFBO0VBQ0U7O0FBSUo7QUFBQTtBQUFBO0VBQ0U7O0FBR0Y7QUFBQTtBQUFBO0VBQ0U7O0FBR0Y7QUFBQTtBQUFBO0VBQ0U7O0FBSUo7RUFDRTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQVFBO0VBQ0E7O0FBUkE7RUFDRTs7QUFFRjtFQUNFOztBQVFOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBSUE7RUFDRTs7QUFHRjtFQUNFOztBQUtGO0VBQ0U7RUFDQTs7QUFFQTtFQUpGO0lBS0k7SUFDQTs7O0FBRUY7RUFSRjtJQVNJO0lBQ0E7OztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtBQUFBO0VBRUU7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcbkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLlRvb2xJY29uIHtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcblxuICAgICZfX2hpZGRlbiB7XG4gICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzO1xuICB9XG5cbiAgLlRvb2xJY29uLS1wbGFpbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgaGVpZ2h0OiAycmVtO1xuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgd2lkdGg6IHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpO1xuICAgIGhlaWdodDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gICAgY29sb3I6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG5cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcblxuICAgICYgKyAuVG9vbEljb25fX2xhYmVsIHtcbiAgICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDA7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHdpZHRoOiB2YXIoLS1kZWZhdWx0LWljb24tc2l6ZSk7XG4gICAgICBoZWlnaHQ6IHZhcigtLWRlZmF1bHQtaWNvbi1zaXplKTtcbiAgICAgIGNvbG9yOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fbGFiZWwge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBjb2xvcjogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG4gICAgbWFyZ2luOiAwIDAuOGVtO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuXG4gICAgLlNwaW5uZXIge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNmVtO1xuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9zaXplX3NtYWxsIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgd2lkdGg6IDJyZW07XG4gICAgaGVpZ2h0OiAycmVtO1xuICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9idXR0b24sXG4gIC5Nb2RhbCAuVG9vbEljb25fdHlwZV9idXR0b24sXG4gIC5Ub29sSWNvbl90eXBlX2J1dHRvbiB7XG4gICAgcGFkZGluZzogMDtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgbWFyZ2luOiAwO1xuICAgIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbml0aWFsO1xuXG4gICAgJjpmb2N1cy12aXNpYmxlIHtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCB2YXIoLS1mb2N1cy1oaWdobGlnaHQtY29sb3IpO1xuICAgIH1cblxuICAgICYuVG9vbEljb24tLXNlbGVjdGVkIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ncmF5LTIpO1xuXG4gICAgICAmOmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ncmF5LTMpO1xuICAgICAgfVxuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ncmF5LTMpO1xuICAgIH1cblxuICAgICYtLXNob3cge1xuICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICB9XG5cbiAgICAmLS1oaWRlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9mbG9hdGluZyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIH1cblxuICAgIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tZ3JheS0xKTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tZ3JheS0yKTtcbiAgICAgIH1cbiAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWdyYXktMyk7XG4gICAgICB9XG5cbiAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgaGVpZ2h0OiAycmVtO1xuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMnB4O1xuICAgIHJpZ2h0OiAzcHg7XG4gICAgZm9udC1zaXplOiAwLjYyNXJlbTtcbiAgICBjb2xvcjogdmFyKC0ta2V5YmluZGluZy1jb2xvcik7XG4gICAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICB9XG5cbiAgLnVubG9ja2VkLWljb24ge1xuICAgIDpyb290W2Rpcj1cImx0clwiXSAmIHtcbiAgICAgIGxlZnQ6IDJweDtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICByaWdodDogMnB4O1xuICAgIH1cbiAgfVxuXG4gIC5BcHAtdG9vbGJhci1jb250YWluZXIge1xuICAgIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICB3aWR0aDogdmFyKC0tbGctYnV0dG9uLXNpemUpO1xuICAgICAgaGVpZ2h0OiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG5cbiAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ1MHB4KSB7XG4gICAgICAgIHdpZHRoOiAxLjhyZW07XG4gICAgICAgIGhlaWdodDogMS44cmVtO1xuICAgICAgfVxuICAgICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMzc5cHgpIHtcbiAgICAgICAgd2lkdGg6IDEuNXJlbTtcbiAgICAgICAgaGVpZ2h0OiAxLjVyZW07XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIHdpZHRoOiB2YXIoLS1sZy1pY29uLXNpemUpO1xuICAgICAgICBoZWlnaHQ6IHZhcigtLWxnLWljb24tc2l6ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLlRvb2xJY29uX19MYXNlclBvaW50ZXIgLlRvb2xJY29uX19pY29uLFxuICAgIC5Ub29sSWNvbl9fTWFnaWNCdXR0b24gLlRvb2xJY29uX19pY29uIHtcbiAgICAgIHdpZHRoOiB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKTtcbiAgICAgIGhlaWdodDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gICAgfVxuICB9XG59XG4iXX0= */", "type CANVAS_ERROR_NAMES = \"CANVAS_ERROR\" | \"CANVAS_POSSIBLY_TOO_BIG\";\n\nexport class CanvasError extends Error {\n  constructor(\n    message: string = \"Couldn't export canvas.\",\n    name: CANVAS_ERROR_NAMES = \"CANVAS_ERROR\",\n  ) {\n    super();\n    this.name = name;\n    this.message = message;\n  }\n}\n\nexport class AbortError extends DOMException {\n  constructor(message: string = \"Request Aborted\") {\n    super(message, \"AbortError\");\n  }\n}\n\ntype ImageSceneDataErrorCode =\n  | \"IMAGE_NOT_CONTAINS_SCENE_DATA\"\n  | \"IMAGE_SCENE_DATA_ERROR\";\n\nexport class ImageSceneDataError extends Error {\n  public code;\n  constructor(\n    message = \"Image Scene Data Error\",\n    code: ImageSceneDataErrorCode = \"IMAGE_SCENE_DATA_ERROR\",\n  ) {\n    super(message);\n    this.name = \"EncodingError\";\n    this.code = code;\n  }\n}\n", "import \"./ToolIcon.scss\";\n\nimport React, { CSSProperties, useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useExcalidrawContainer } from \"./App\";\nimport { AbortError } from \"../errors\";\nimport Spinner from \"./Spinner\";\nimport { PointerType } from \"../element/types\";\nimport { isPromiseLike } from \"../utils\";\n\nexport type ToolButtonSize = \"small\" | \"medium\";\n\ntype ToolButtonBaseProps = {\n  icon?: React.ReactNode;\n  \"aria-label\": string;\n  \"aria-keyshortcuts\"?: string;\n  \"data-testid\"?: string;\n  label?: string;\n  title?: string;\n  name?: string;\n  id?: string;\n  size?: ToolButtonSize;\n  keyBindingLabel?: string | null;\n  showAriaLabel?: boolean;\n  hidden?: boolean;\n  visible?: boolean;\n  selected?: boolean;\n  className?: string;\n  style?: CSSProperties;\n  isLoading?: boolean;\n};\n\ntype ToolButtonProps =\n  | (ToolButtonBaseProps & {\n      type: \"button\";\n      children?: React.ReactNode;\n      onClick?(event: React.MouseEvent): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"submit\";\n      children?: React.ReactNode;\n      onClick?(event: React.MouseEvent): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"icon\";\n      children?: React.ReactNode;\n      onClick?(): void;\n    })\n  | (ToolButtonBaseProps & {\n      type: \"radio\";\n      checked: boolean;\n      onChange?(data: { pointerType: PointerType | null }): void;\n      onPointerDown?(data: { pointerType: PointerType }): void;\n    });\n\nexport const ToolButton = React.forwardRef((props: ToolButtonProps, ref) => {\n  const { id: excalId } = useExcalidrawContainer();\n  const innerRef = React.useRef(null);\n  React.useImperativeHandle(ref, () => innerRef.current);\n  const sizeCn = `ToolIcon_size_${props.size}`;\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const isMountedRef = useRef(true);\n\n  const onClick = async (event: React.MouseEvent) => {\n    const ret = \"onClick\" in props && props.onClick?.(event);\n\n    if (isPromiseLike(ret)) {\n      try {\n        setIsLoading(true);\n        await ret;\n      } catch (error: any) {\n        if (!(error instanceof AbortError)) {\n          throw error;\n        } else {\n          console.warn(error);\n        }\n      } finally {\n        if (isMountedRef.current) {\n          setIsLoading(false);\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const lastPointerTypeRef = useRef<PointerType | null>(null);\n\n  if (\n    props.type === \"button\" ||\n    props.type === \"icon\" ||\n    props.type === \"submit\"\n  ) {\n    const type = (props.type === \"icon\" ? \"button\" : props.type) as\n      | \"button\"\n      | \"submit\";\n    return (\n      <button\n        className={clsx(\n          \"ToolIcon_type_button\",\n          sizeCn,\n          props.className,\n          props.visible && !props.hidden\n            ? \"ToolIcon_type_button--show\"\n            : \"ToolIcon_type_button--hide\",\n          {\n            ToolIcon: !props.hidden,\n            \"ToolIcon--selected\": props.selected,\n            \"ToolIcon--plain\": props.type === \"icon\",\n          },\n        )}\n        style={props.style}\n        data-testid={props[\"data-testid\"]}\n        hidden={props.hidden}\n        title={props.title}\n        aria-label={props[\"aria-label\"]}\n        type={type}\n        onClick={onClick}\n        ref={innerRef}\n        disabled={isLoading || props.isLoading}\n      >\n        {(props.icon || props.label) && (\n          <div className=\"ToolIcon__icon\" aria-hidden=\"true\">\n            {props.icon || props.label}\n            {props.keyBindingLabel && (\n              <span className=\"ToolIcon__keybinding\">\n                {props.keyBindingLabel}\n              </span>\n            )}\n            {props.isLoading && <Spinner />}\n          </div>\n        )}\n        {props.showAriaLabel && (\n          <div className=\"ToolIcon__label\">\n            {props[\"aria-label\"]} {isLoading && <Spinner />}\n          </div>\n        )}\n        {props.children}\n      </button>\n    );\n  }\n\n  return (\n    <label\n      className={clsx(\"ToolIcon\", props.className)}\n      title={props.title}\n      onPointerDown={(event) => {\n        lastPointerTypeRef.current = event.pointerType || null;\n        props.onPointerDown?.({ pointerType: event.pointerType || null });\n      }}\n      onPointerUp={() => {\n        requestAnimationFrame(() => {\n          lastPointerTypeRef.current = null;\n        });\n      }}\n    >\n      <input\n        className={`ToolIcon_type_radio ${sizeCn}`}\n        type=\"radio\"\n        name={props.name}\n        aria-label={props[\"aria-label\"]}\n        aria-keyshortcuts={props[\"aria-keyshortcuts\"]}\n        data-testid={props[\"data-testid\"]}\n        id={`${excalId}-${props.id}`}\n        onChange={() => {\n          props.onChange?.({ pointerType: lastPointerTypeRef.current });\n        }}\n        checked={props.checked}\n        ref={innerRef}\n      />\n      <div className=\"ToolIcon__icon\">\n        {props.icon}\n        {props.keyBindingLabel && (\n          <span className=\"ToolIcon__keybinding\">{props.keyBindingLabel}</span>\n        )}\n      </div>\n    </label>\n  );\n});\n\nToolButton.defaultProps = {\n  visible: true,\n  className: \"\",\n  size: \"medium\",\n};\n\nToolButton.displayName = \"ToolButton\";\n", "//\n// All icons are imported from https://fontawesome.com/icons?d=gallery\n// Icons are under the license https://fontawesome.com/license\n//\n\n// Note: when adding new icons, review https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/RTL_Guidelines\n// to determine whether or not the icons should be mirrored in right-to-left languages.\n\nimport React from \"react\";\n\nimport oc from \"open-color\";\nimport clsx from \"clsx\";\nimport { Theme } from \"../element/types\";\nimport { THEME } from \"../constants\";\n\nexport const iconFillColor = (theme: Theme) => \"var(--icon-fill-color)\";\n\nconst handlerColor = (theme: Theme) =>\n  theme === THEME.LIGHT ? oc.white : \"#1e1e1e\";\n\ntype Opts = {\n  width?: number;\n  height?: number;\n  mirror?: true;\n} & React.SVGProps<SVGSVGElement>;\n\nexport const createIcon = (\n  d: string | React.ReactNode,\n  opts: number | Opts = 512,\n) => {\n  const {\n    width = 512,\n    height = width,\n    mirror,\n    style,\n    ...rest\n  } = typeof opts === \"number\" ? ({ width: opts } as Opts) : opts;\n  return (\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      role=\"img\"\n      viewBox={`0 0 ${width} ${height}`}\n      className={clsx({ \"rtl-mirror\": mirror })}\n      style={style}\n      {...rest}\n    >\n      {typeof d === \"string\" ? <path fill=\"currentColor\" d={d} /> : d}\n    </svg>\n  );\n};\n\nconst tablerIconProps: Opts = {\n  width: 24,\n  height: 24,\n  fill: \"none\",\n  strokeWidth: 2,\n  stroke: \"currentColor\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n} as const;\n\nconst modifiedTablerIconProps: Opts = {\n  width: 20,\n  height: 20,\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n} as const;\n\n// -----------------------------------------------------------------------------\n\n// tabler-icons: present\nexport const PlusPromoIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <rect x={3} y={8} width={18} height={4} rx={1} />\n    <line x1={12} y1={8} x2={12} y2={21} />\n    <path d=\"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7\" />\n    <path d=\"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: book\nexport const LibraryIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0\" />\n    <path d=\"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0\" />\n    <line x1=\"3\" y1=\"6\" x2=\"3\" y2=\"19\" />\n    <line x1=\"12\" y1=\"6\" x2=\"12\" y2=\"19\" />\n    <line x1=\"21\" y1=\"6\" x2=\"21\" y2=\"19\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: plus\nexport const PlusIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n  </svg>,\n  tablerIconProps,\n);\n\n// tabler-icons: dots-vertical\nexport const DotsIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n    <circle cx=\"12\" cy=\"19\" r=\"1\"></circle>\n    <circle cx=\"12\" cy=\"5\" r=\"1\"></circle>\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: pinned\nexport const PinIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M9 4v6l-2 4v2h10v-2l-2 -4v-6\"></path>\n    <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"21\"></line>\n    <line x1=\"8\" y1=\"4\" x2=\"16\" y2=\"4\"></line>\n  </svg>,\n  tablerIconProps,\n);\n\n// tabler-icons: lock-open (via Figma)\nexport const UnlockedIcon = createIcon(\n  <g>\n    <path\n      d=\"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <path\n      d=\"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <mask\n      id=\"UnlockedIcon\"\n      style={{ maskType: \"alpha\" }}\n      maskUnits=\"userSpaceOnUse\"\n      x={6}\n      y={1}\n      width={9}\n      height={9}\n    >\n      <path\n        stroke=\"none\"\n        d=\"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481\"\n        fill=\"#fff\"\n      />\n    </mask>\n    <g mask=\"url(#UnlockedIcon)\">\n      <path\n        stroke=\"none\"\n        d=\"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n  </g>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: lock (via Figma)\nexport const LockedIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z\" />\n    <path d=\"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z\" />\n    <path d=\"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\n// custom\nexport const WelcomeScreenMenuArrow = createIcon(\n  <>\n    <path\n      d=\"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 41, height: 94, fill: \"none\" },\n);\n\n// custom\nexport const WelcomeScreenHelpArrow = createIcon(\n  <>\n    <path\n      d=\"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 85, height: 71, fill: \"none\" },\n);\n\n// custom\nexport const WelcomeScreenTopToolbarArrow = createIcon(\n  <>\n    <path\n      d=\"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n    />\n  </>,\n  { width: 38, height: 78, fill: \"none\" },\n);\n\n// custom\nexport const ExcalLogo = createIcon(\n  <g fill=\"currentColor\">\n    <path\n      d=\"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z\"\n      fill=\"currentColor\"\n    />\n  </g>,\n  { width: 40, height: 40, fill: \"none\" },\n);\n\n// custom\nexport const SelectionIcon = createIcon(\n  <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z\" />\n    <path d=\"M13.5 13.5l4.5 4.5\" />\n  </g>,\n  { fill: \"none\", width: 22, height: 22, strokeWidth: 1.25 },\n);\n\n// tabler-icons: square\nexport const RectangleIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"></rect>\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: square-rotated\nexport const DiamondIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z\" />\n  </g>,\n\n  tablerIconProps,\n);\n\n// tabler-icons: circle\nexport const EllipseIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <circle cx=\"12\" cy=\"12\" r=\"9\"></circle>\n  </g>,\n\n  tablerIconProps,\n);\n\n// tabler-icons: arrow-narrow-right\nexport const ArrowIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n    <line x1=\"15\" y1=\"16\" x2=\"19\" y2=\"12\" />\n    <line x1=\"15\" y1=\"8\" x2=\"19\" y2=\"12\" />\n  </g>,\n  tablerIconProps,\n);\n\n// custom?\nexport const LineIcon = createIcon(\n  <path d=\"M4.167 10h11.666\" strokeWidth=\"1.5\" />,\n  modifiedTablerIconProps,\n);\n\nexport const PenModeIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z\"></path>\n    <path d=\"M16 7h4\"></path>\n    <path d=\"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3\"></path>\n  </g>,\n  tablerIconProps,\n);\n\n// modified tabler-icons: pencil\nexport const FreedrawIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path\n      clipRule=\"evenodd\"\n      d=\"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z\"\n    />\n    <path d=\"m11.25 5.417 3.333 3.333\" />\n  </g>,\n\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: typography\nexport const TextIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"20\" x2=\"7\" y2=\"20\" />\n    <line x1=\"14\" y1=\"20\" x2=\"21\" y2=\"20\" />\n    <line x1=\"6.9\" y1=\"15\" x2=\"13.8\" y2=\"15\" />\n    <line x1=\"10.2\" y1=\"6.3\" x2=\"16\" y2=\"20\" />\n    <polyline points=\"5 20 11 4 13 4 20 20\"></polyline>\n  </g>,\n  tablerIconProps,\n);\n\n// modified tabler-icons: photo\nexport const ImageIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M12.5 6.667h.01\" />\n    <path d=\"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z\" />\n    <path d=\"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166\" />\n    <path d=\"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: eraser\nexport const EraserIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3\" />\n    <path d=\"M18 13.3l-6.3 -6.3\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ZoomInIcon = createIcon(\n  <path strokeWidth=\"1.25\" d=\"M10 4.167v11.666M4.167 10h11.666\" />,\n  modifiedTablerIconProps,\n);\n\nexport const ZoomOutIcon = createIcon(\n  <path d=\"M5 10h10\" strokeWidth=\"1.25\" />,\n  modifiedTablerIconProps,\n);\n\nexport const TrashIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const EmbedIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <polyline points=\"12 16 18 10 12 4\" />\n    <polyline points=\"8 4 2 10 8 16\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const DuplicateIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z\" />\n    <path\n      clipRule=\"evenodd\"\n      d=\"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z\"\n    />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const MoonIcon = createIcon(\n  <path\n    clipRule=\"evenodd\"\n    d=\"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z\"\n    stroke=\"currentColor\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SunIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    strokeWidth=\"1.25\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path d=\"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const HamburgerMenuIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <line x1=\"4\" y1=\"6\" x2=\"20\" y2=\"6\"></line>\n    <line x1=\"4\" y1=\"12\" x2=\"20\" y2=\"12\"></line>\n    <line x1=\"4\" y1=\"18\" x2=\"20\" y2=\"18\"></line>\n  </g>,\n  tablerIconProps,\n);\n\nexport const ExportIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const HelpIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"12\" cy=\"12\" r=\"9\"></circle>\n    <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"17.01\"></line>\n    <path d=\"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const ExternalLinkIcon = createIcon(\n  <path\n    strokeWidth=\"1.25\"\n    d=\"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const GithubIcon = createIcon(\n  <path\n    d=\"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const DiscordIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0\" />\n    <path d=\"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const XBrandIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 4l11.733 16h4.267l-11.733 -16z\" />\n    <path d=\"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const checkIcon = createIcon(\n  <polyline fill=\"none\" stroke=\"currentColor\" points=\"20 6 9 17 4 12\" />,\n  {\n    width: 24,\n    height: 24,\n  },\n);\n\nexport const LinkIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416\" />\n    <path d=\"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const save = createIcon(\n  \"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z\",\n  { width: 448, height: 512 },\n);\n\nexport const saveAs = createIcon(\n  \"M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z\",\n  { width: 448, height: 512 },\n);\n\n// tabler-icon: folder\nexport const LoadIcon = createIcon(\n  <path\n    d=\"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const clipboard = createIcon(\n  \"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z\",\n  { width: 384, height: 512 },\n);\n\nexport const palette = createIcon(\n  \"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\",\n);\n\nexport const ExportImageIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M15 8h.01\"></path>\n    <path d=\"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5\"></path>\n    <path d=\"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4\"></path>\n    <path d=\"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598\"></path>\n    <path d=\"M19 16v6\"></path>\n    <path d=\"M22 19l-3 3l-3 -3\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const exportToFileIcon = createIcon(\n  \"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\",\n  { width: 512, height: 512 },\n);\n\nexport const zoomIn = createIcon(\n  \"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n  { width: 448, height: 512 },\n);\n\nexport const zoomOut = createIcon(\n  \"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n  { width: 448, height: 512 },\n);\n\nexport const done = createIcon(\n  \"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\",\n);\n\nexport const menu = createIcon(\n  \"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\",\n);\n\nexport const UndoIcon = createIcon(\n  <path\n    d=\"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const RedoIcon = createIcon(\n  <path\n    d=\"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const questionCircle = createIcon(\n  \"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z\",\n  { mirror: true },\n);\n\nexport const share = createIcon(\n  <path\n    d=\"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834\"\n    strokeWidth=\"1.5\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const shareIOS = createIcon(\n  \"M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z\",\n  { width: 24, height: 24 },\n);\n\nexport const shareWindows = createIcon(\n  <>\n    <path\n      fill=\"currentColor\"\n      d=\"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z\"\n    />\n    <path\n      stroke=\"currentColor\"\n      fill=\"currentColor\"\n      d=\"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z\"\n    />\n  </>,\n  { width: 64, height: 64 },\n);\n\n// Icon imported form Storybook\n// Storybook is licensed under MIT https://github.com/storybookjs/storybook/blob/next/LICENSE\nexport const resetZoom = createIcon(\n  <path\n    stroke=\"currentColor\"\n    strokeWidth=\"40\"\n    fill=\"currentColor\"\n    d=\"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z\"\n  />,\n  { width: 1024 },\n);\n\nexport const BringForwardIcon = createIcon(\n  <>\n    <g\n      clipPath=\"url(#a)\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path\n        d=\"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z\"\n        fill=\"currentColor\"\n      />\n      <path d=\"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const SendBackwardIcon = createIcon(\n  <>\n    <g\n      clipPath=\"url(#a)\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388\"\n        fill=\"currentColor\"\n      />\n      <path d=\"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const BringToFrontIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z\"\n        fill=\"currentColor\"\n      />\n      <path d=\"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const SendToBackIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n      <path\n        d=\"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n      <mask id=\"SendToBackIcon\" fill=\"#fff\">\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z\"\n        />\n      </mask>\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z\"\n        fill=\"currentColor\"\n      />\n      <path\n        d=\"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z\"\n        fill=\"currentColor\"\n        mask=\"url(#SendToBackIcon)\"\n      />\n      <path\n        d=\"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\n//\n// Align action icons created from scratch to match those of z-index actions\n// Note: vertical align icons are flipped so the larger item is always the\n// first one the user sees. Horizontal align icons should not be flipped since\n// that would make them lie about their function.\n//\nexport const AlignTopIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignBottomIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 16.667h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignLeftIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const AlignRightIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M16.667 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const DistributeHorizontallyIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M16.667 3.333v13.334M3.333 3.333v13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const DistributeVerticallyIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\" stroke=\"currentColor\" strokeWidth=\"1.25\">\n      <path\n        d=\"M3.333 3.333h13.334M3.333 16.667h13.334\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path d=\"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const CenterVerticallyIcon = createIcon(\n  <g stroke=\"currentColor\" strokeWidth=\"1.25\">\n    <path d=\"M1.667 10h2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M8.333 10h3.334\" strokeLinejoin=\"round\" />\n    <path d=\"M15.417 10h2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const CenterHorizontallyIcon = createIcon(\n  <g stroke=\"currentColor\" strokeWidth=\"1.25\">\n    <path d=\"M10 18.333v-2.916\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M10 11.667V8.333\" strokeLinejoin=\"round\" />\n    <path d=\"M10 4.583V1.667\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    <path d=\"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const usersIcon = createIcon(\n  <g strokeWidth=\"1.5\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n    <path d=\"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2\"></path>\n    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n    <path d=\"M21 21v-2a4 4 0 0 0 -3 -3.85\"></path>\n  </g>,\n  tablerIconProps,\n);\n\n// not mirrored because it's inspired by a playback control, which is always RTL\nexport const start = createIcon(\n  \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z\",\n);\n\nexport const stop = createIcon(\n  \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z\",\n);\n\nexport const CloseIcon = createIcon(\n  <>\n    <g\n      clipPath=\"url(#a)\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M15 5 5 15M5 5l10 10\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const back = createIcon(\n  \"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z\",\n  { width: 320, height: 512, style: { marginLeft: \"-0.2rem\" }, mirror: true },\n);\n\nexport const clone = createIcon(\n  \"M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z\",\n  { mirror: true },\n);\n\n// modified https://feathericons.com/?query=shield\nexport const shield = createIcon(\n  \"M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z\",\n  { width: 24 },\n);\n\nexport const file = createIcon(\n  \"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z\",\n  { width: 384, height: 512 },\n);\n\n// TODO barnabasmolnar/editor-redesign\n// couldn't find a new icon for this\nexport const GroupIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <>\n      <path d=\"M25 26H111V111H25\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <path d=\"M100 100H160V160H100\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <g\n        fill={handlerColor(theme)}\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"6\"\n      >\n        <rect x=\"2.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"2.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n      </g>\n    </>,\n    { width: 182, height: 182, mirror: true },\n  ),\n);\n\nexport const UngroupIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <>\n      <path d=\"M25 26H111V111H25\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <path d=\"M100 100H160V160H100\" fill={iconFillColor(theme)} />\n      <path\n        d=\"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z\"\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"2\"\n      />\n      <g\n        fill={handlerColor(theme)}\n        stroke={iconFillColor(theme)}\n        strokeWidth=\"6\"\n      >\n        <rect x=\"2.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"78.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"149.5\" width=\"30\" height=\"30\" />\n        <rect x=\"147.5\" y=\"78.5\" width=\"30\" height=\"30\" />\n        <rect x=\"105.5\" y=\"2.5\" width=\"30\" height=\"30\" />\n        <rect x=\"2.5\" y=\"102.5\" width=\"30\" height=\"30\" />\n      </g>\n    </>,\n    { width: 182, height: 182, mirror: true },\n  ),\n);\n\nexport const FillZigZagIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path d=\"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const FillHachureIcon = createIcon(\n  <>\n    <path\n      d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n    />\n    <mask\n      id=\"FillHachureIcon\"\n      style={{ maskType: \"alpha\" }}\n      maskUnits=\"userSpaceOnUse\"\n      x={2}\n      y={2}\n      width={16}\n      height={16}\n    >\n      <path\n        d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n    </mask>\n    <g mask=\"url(#FillHachureIcon)\">\n      <path\n        d=\"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FillCrossHatchIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n      <mask\n        id=\"FillCrossHatchIcon\"\n        style={{ maskType: \"alpha\" }}\n        maskUnits=\"userSpaceOnUse\"\n        x={-1}\n        y={-1}\n        width={22}\n        height={22}\n      >\n        <path\n          d=\"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.25\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </mask>\n      <g mask=\"url(#FillCrossHatchIcon)\">\n        <path\n          d=\"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z\"\n          fill=\"currentColor\"\n        />\n      </g>\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FillSolidIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  { ...modifiedTablerIconProps, fill: \"currentColor\" },\n);\n\nexport const StrokeWidthBaseIcon = createIcon(\n  <>\n    <path\n      d=\"M4.167 10h11.666\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeWidthBoldIcon = createIcon(\n  <path\n    d=\"M5 10h10\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2.5\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeWidthExtraBoldIcon = createIcon(\n  <path\n    d=\"M5 10h10\"\n    stroke=\"currentColor\"\n    strokeWidth=\"3.75\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const StrokeStyleSolidIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <path\n      d=\"M6 10H34\"\n      stroke={iconFillColor(theme)}\n      strokeWidth={2}\n      fill=\"none\"\n      strokeLinecap=\"round\"\n    />,\n    {\n      width: 40,\n      height: 20,\n    },\n  ),\n);\n\nexport const StrokeStyleDashedIcon = createIcon(\n  <g strokeWidth=\"2\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M5 12h2\" />\n    <path d=\"M17 12h2\" />\n    <path d=\"M11 12h2\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: line-dotted\nexport const StrokeStyleDottedIcon = createIcon(\n  <g strokeWidth=\"2\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 12v.01\" />\n    <path d=\"M8 12v.01\" />\n    <path d=\"M12 12v.01\" />\n    <path d=\"M16 12v.01\" />\n    <path d=\"M20 12v.01\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const SloppinessArchitectIcon = createIcon(\n  <path\n    d=\"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SloppinessArtistIcon = createIcon(\n  <path\n    d=\"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const SloppinessCartoonistIcon = createIcon(\n  <path\n    d=\"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42\"\n    strokeWidth=\"1.25\"\n  />,\n  modifiedTablerIconProps,\n);\n\nexport const EdgeSharpIcon = createIcon(\n  <svg strokeWidth=\"1.5\">\n    <path d=\"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10\" />\n    <path d=\"M13.3333 3.33331V3.34331\" />\n    <path d=\"M16.6667 3.33331V3.34331\" />\n    <path d=\"M16.6667 6.66669V6.67669\" />\n    <path d=\"M16.6667 10V10.01\" />\n    <path d=\"M3.33334 13.3333V13.3433\" />\n    <path d=\"M16.6667 13.3333V13.3433\" />\n    <path d=\"M3.33334 16.6667V16.6767\" />\n    <path d=\"M6.66666 16.6667V16.6767\" />\n    <path d=\"M10 16.6667V16.6767\" />\n    <path d=\"M13.3333 16.6667V16.6767\" />\n    <path d=\"M16.6667 16.6667V16.6767\" />\n  </svg>,\n  modifiedTablerIconProps,\n);\n\n// tabler-icons: border-radius\nexport const EdgeRoundIcon = createIcon(\n  <g\n    strokeWidth=\"1.5\"\n    stroke=\"currentColor\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 12v-4a4 4 0 0 1 4 -4h4\" />\n    <line x1=\"16\" y1=\"4\" x2=\"16\" y2=\"4.01\" />\n    <line x1=\"20\" y1=\"4\" x2=\"20\" y2=\"4.01\" />\n    <line x1=\"20\" y1=\"8\" x2=\"20\" y2=\"8.01\" />\n    <line x1=\"20\" y1=\"12\" x2=\"20\" y2=\"12.01\" />\n    <line x1=\"4\" y1=\"16\" x2=\"4\" y2=\"16.01\" />\n    <line x1=\"20\" y1=\"16\" x2=\"20\" y2=\"16.01\" />\n    <line x1=\"4\" y1=\"20\" x2=\"4\" y2=\"20.01\" />\n    <line x1=\"8\" y1=\"20\" x2=\"8\" y2=\"20.01\" />\n    <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"20.01\" />\n    <line x1=\"16\" y1=\"20\" x2=\"16\" y2=\"20.01\" />\n    <line x1=\"20\" y1=\"20\" x2=\"20\" y2=\"20.01\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const ArrowheadNoneIcon = createIcon(\n  <path d=\"M6 10H34\" stroke=\"currentColor\" strokeWidth={2} fill=\"none\" />,\n  {\n    width: 40,\n    height: 20,\n  },\n);\n\nexport const ArrowheadArrowIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        stroke=\"currentColor\"\n        strokeWidth={2}\n        fill=\"none\"\n      >\n        <path d=\"M34 10H6M34 10L27 5M34 10L27 15\" />\n        <path d=\"M27.5 5L34.5 10L27.5 15\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCircleIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n      >\n        <path d=\"M32 10L6 10\" strokeWidth={2} />\n        <circle r=\"4\" transform=\"matrix(-1 0 0 1 30 10)\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadCircleOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeWidth={2}\n      >\n        <path d=\"M26 10L6 10\" />\n        <circle r=\"4\" transform=\"matrix(-1 0 0 1 30 10)\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadBarIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}>\n        <path\n          d=\"M34 10H5.99996M34 10L34 5M34 10L34 15\"\n          stroke=\"currentColor\"\n          strokeWidth={2}\n          fill=\"none\"\n        />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadTriangleIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n      >\n        <path d=\"M32 10L6 10\" strokeWidth={2} />\n        <path d=\"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadTriangleOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeWidth={2}\n        strokeLinejoin=\"round\"\n      >\n        <path d=\"M6,9.5H27\" />\n        <path d=\"M27,5L34,10L27,14Z\" fill=\"none\" />\n      </g>,\n\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadDiamondIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"currentColor\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M6,9.5H20\" />\n        <path d=\"M27,5L34,10L27,14L20,9.5Z\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const ArrowheadDiamondOutlineIcon = React.memo(\n  ({ flip = false }: { flip?: boolean }) =>\n    createIcon(\n      <g\n        stroke=\"currentColor\"\n        fill=\"none\"\n        transform={flip ? \"translate(40, 0) scale(-1, 1)\" : \"\"}\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n      >\n        <path d=\"M6,9.5H20\" />\n        <path d=\"M27,5L34,10L27,14L20,9.5Z\" />\n      </g>,\n      { width: 40, height: 20 },\n    ),\n);\n\nexport const FontSizeSmallIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeMediumIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5 16.667V3.333L10 15l5-11.667v13.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeLargeIcon = createIcon(\n  <>\n    <g clipPath=\"url(#a)\">\n      <path\n        d=\"M5.833 3.333v13.334h8.334\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.25\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontSizeExtraLargeIcon = createIcon(\n  <>\n    <path\n      d=\"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontFamilyNormalIcon = createIcon(\n  <>\n    <g\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334\" />\n    </g>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const FontFamilyCodeIcon = createIcon(\n  <>\n    <g\n      clipPath=\"url(#a)\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.25\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h20v20H0z\" />\n      </clipPath>\n    </defs>\n  </>,\n  modifiedTablerIconProps,\n);\n\nexport const TextAlignLeftIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    strokeWidth={2}\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"4\" y1=\"12\" x2=\"12\" y2=\"12\" />\n    <line x1=\"4\" y1=\"16\" x2=\"16\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const TextAlignCenterIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" />\n    <line x1=\"6\" y1=\"16\" x2=\"18\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const TextAlignRightIcon = createIcon(\n  <g\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <line x1=\"4\" y1=\"8\" x2=\"20\" y2=\"8\" />\n    <line x1=\"10\" y1=\"12\" x2=\"20\" y2=\"12\" />\n    <line x1=\"8\" y1=\"16\" x2=\"20\" y2=\"16\" />\n  </g>,\n  tablerIconProps,\n);\n\n// tabler-icons: layout-align-top\nexport const TextAlignTopIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"1.5\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"4\" x2=\"20\" y2=\"4\" />\n      <rect x=\"9\" y=\"8\" width=\"6\" height=\"12\" rx=\"2\" />\n    </g>,\n    tablerIconProps,\n  ),\n);\n\n// tabler-icons: layout-align-bottom\nexport const TextAlignBottomIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"2\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"20\" x2=\"20\" y2=\"20\" />\n      <rect x=\"9\" y=\"4\" width=\"6\" height=\"12\" rx=\"2\"></rect>\n    </g>,\n    tablerIconProps,\n  ),\n);\n\n// tabler-icons: layout-align-middle\nexport const TextAlignMiddleIcon = React.memo(({ theme }: { theme: Theme }) =>\n  createIcon(\n    <g\n      strokeWidth=\"1.5\"\n      stroke=\"currentColor\"\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <line x1=\"4\" y1=\"12\" x2=\"9\" y2=\"12\" />\n      <line x1=\"15\" y1=\"12\" x2=\"20\" y2=\"12\" />\n      <rect x=\"9\" y=\"6\" width=\"6\" height=\"12\" rx=\"2\" />\n    </g>,\n    tablerIconProps,\n  ),\n);\n\nexport const publishIcon = createIcon(\n  <path\n    d=\"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z\"\n    fill=\"currentColor\"\n  />,\n  { width: 640, height: 512 },\n);\n\nexport const eraser = createIcon(\n  <path d=\"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z\" />,\n);\n\nexport const handIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5\"></path>\n    <path d=\"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5\"></path>\n    <path d=\"M14 5.5a1.5 1.5 0 0 1 3 0v6.5\"></path>\n    <path d=\"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const downloadIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2\"></path>\n    <path d=\"M7 11l5 5l5 -5\"></path>\n    <path d=\"M12 4l0 12\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const copyIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z\"></path>\n    <path d=\"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const helpIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0\"></path>\n    <path d=\"M12 17l0 .01\"></path>\n    <path d=\"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const playerPlayIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M7 4v16l13 -8z\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const playerStopFilledIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path\n      d=\"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z\"\n      strokeWidth=\"0\"\n      fill=\"currentColor\"\n    ></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const tablerCheckIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M5 12l5 5l10 -10\"></path>\n  </>,\n  tablerIconProps,\n);\n\nexport const alertTriangleIcon = createIcon(\n  <>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z\" />\n    <path d=\"M12 9v4\" />\n    <path d=\"M12 17h.01\" />\n  </>,\n  tablerIconProps,\n);\n\nexport const eyeDropperIcon = createIcon(\n  <g strokeWidth={1.25}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M11 7l6 6\"></path>\n    <path d=\"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const extraToolsIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M12 3l-4 7h8z\"></path>\n    <path d=\"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0\"></path>\n    <path d=\"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const frameToolIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n    <path d=\"M4 7l16 0\"></path>\n    <path d=\"M4 17l16 0\"></path>\n    <path d=\"M7 4l0 16\"></path>\n    <path d=\"M17 4l0 16\"></path>\n  </g>,\n  tablerIconProps,\n);\n\nexport const mermaidLogoIcon = createIcon(\n  <path\n    fill=\"currentColor\"\n    d=\"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z\"\n  />,\n);\n\nexport const ArrowRightIcon = createIcon(\n  <g strokeWidth=\"1.25\">\n    <path d=\"M4.16602 10H15.8327\" />\n    <path d=\"M12.5 13.3333L15.8333 10\" />\n    <path d=\"M12.5 6.66666L15.8333 9.99999\" />\n  </g>,\n  modifiedTablerIconProps,\n);\n\nexport const laserPointerToolIcon = createIcon(\n  <g\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"1.25\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    transform=\"rotate(90 10 10)\"\n  >\n    <path\n      clipRule=\"evenodd\"\n      d=\"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z\"\n    />\n    <path d=\"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13\" />\n  </g>,\n\n  20,\n);\n\nexport const MagicIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M6 21l15 -15l-3 -3l-15 15l3 3\" />\n    <path d=\"M15 6l3 3\" />\n    <path d=\"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n    <path d=\"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const OpenAIIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35\" />\n    <path d=\"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946\" />\n    <path d=\"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348\" />\n    <path d=\"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45\" />\n    <path d=\"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946\" />\n    <path d=\"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const fullscreenIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M4 8v-2a2 2 0 0 1 2 -2h2\" />\n    <path d=\"M4 16v2a2 2 0 0 0 2 2h2\" />\n    <path d=\"M16 4h2a2 2 0 0 1 2 2v2\" />\n    <path d=\"M16 20h2a2 2 0 0 0 2 -2v-2\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const eyeIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0\" />\n    <path d=\"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const eyeClosedIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10.585 10.587a2 2 0 0 0 2.829 2.828\" />\n    <path d=\"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87\" />\n    <path d=\"M3 3l18 18\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const brainIcon = createIcon(\n  <g stroke=\"currentColor\" fill=\"none\">\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8\" />\n    <path d=\"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8\" />\n    <path d=\"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5\" />\n    <path d=\"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0\" />\n    <path d=\"M6.5 16a3.5 3.5 0 0 1 0 -7h.5\" />\n    <path d=\"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10\" />\n  </g>,\n  tablerIconProps,\n);\n\nexport const searchIcon = createIcon(\n  <g strokeWidth={1.5}>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n    <path d=\"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0\" />\n    <path d=\"M21 21l-6 -6\" />\n  </g>,\n  tablerIconProps,\n);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw-tooltip {\n  --ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI,\n    Roboto, Helvetica, Arial, sans-serif;\n  font-family: var(--ui-font);\n  position: fixed;\n  z-index: var(--zIndex-popup);\n  padding: 8px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  pointer-events: none;\n  word-wrap: break-word;\n  background: #000000;\n  line-height: 1.5;\n  text-align: center;\n  font-size: 13px;\n  font-weight: 500;\n  color: #ffffff;\n  display: none;\n}\n.excalidraw-tooltip.excalidraw-tooltip--visible {\n  display: block;\n}\n\n.excalidraw-tooltip-wrapper {\n  display: flex;\n}\n\n.excalidraw-tooltip-icon {\n  width: 0.9em;\n  height: 0.9em;\n  margin-left: 5px;\n  margin-top: 1px;\n  display: flex;\n}\n.excalidraw--mobile.excalidraw-tooltip-icon {\n  display: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUb29sdGlwLnNjc3MiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtGO0VBQ0U7QUFBQTtFQUVBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQSxZQ0ppQjtFRE1qQjtFQUNBO0VBQ0E7RUFDQTtFQUNBLE9DWGlCO0VEYWpCOztBQUVBO0VBQ0U7OztBQUtKO0VBQ0U7OztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUR0Q1M7RUN5Q1AiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLy8gY29udGFpbmVyIGluIGJvZHkgd2hlcmUgdGhlIGFjdHVhbCB0b29sdGlwIGlzIGFwcGVuZGVkIHRvXG4uZXhjYWxpZHJhdy10b29sdGlwIHtcbiAgLS11aS1mb250OiBBc3Npc3RhbnQsIHN5c3RlbS11aSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSxcbiAgICBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB6LWluZGV4OiB2YXIoLS16SW5kZXgtcG9wdXApO1xuXG4gIHBhZGRpbmc6IDhweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuXG4gIGJhY2tncm91bmQ6ICRvYy1ibGFjaztcblxuICBsaW5lLWhlaWdodDogMS41O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgY29sb3I6ICRvYy13aGl0ZTtcblxuICBkaXNwbGF5OiBub25lO1xuXG4gICYuZXhjYWxpZHJhdy10b29sdGlwLS12aXNpYmxlIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxufVxuXG4vLyB3cmFwcyB0aGUgZWxlbWVudCB3ZSB3YW50IHRvIGFwcGx5IHRoZSB0b29sdGlwIHRvXG4uZXhjYWxpZHJhdy10b29sdGlwLXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4uZXhjYWxpZHJhdy10b29sdGlwLWljb24ge1xuICB3aWR0aDogMC45ZW07XG4gIGhlaWdodDogMC45ZW07XG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG4gIG1hcmdpbi10b3A6IDFweDtcbiAgZGlzcGxheTogZmxleDtcblxuICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuIiwiLy9cbi8vXG4vLyAg8J2XliDwnZeiIPCdl58g8J2XoiDwnZelXG4vLyAgdiAxLjkuMVxuLy9cbi8vICDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblxuXG4vLyAgR2VuZXJhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtd2hpdGU6ICAgICAgICAgI2ZmZmZmZjtcbiRvYy1ibGFjazogICAgICAgICAjMDAwMDAwO1xuXG5cbi8vICBHcmF5XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmF5LWxpc3Q6IChcbiAgXCIwXCI6ICNmOGY5ZmEsXG4gIFwiMVwiOiAjZjFmM2Y1LFxuICBcIjJcIjogI2U5ZWNlZixcbiAgXCIzXCI6ICNkZWUyZTYsXG4gIFwiNFwiOiAjY2VkNGRhLFxuICBcIjVcIjogI2FkYjViZCxcbiAgXCI2XCI6ICM4NjhlOTYsXG4gIFwiN1wiOiAjNDk1MDU3LFxuICBcIjhcIjogIzM0M2E0MCxcbiAgXCI5XCI6ICMyMTI1Mjlcbik7XG5cbiRvYy1ncmF5LTA6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXktMTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjFcIik7XG4kb2MtZ3JheS0yOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMlwiKTtcbiRvYy1ncmF5LTM6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXktNDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjRcIik7XG4kb2MtZ3JheS01OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNVwiKTtcbiRvYy1ncmF5LTY6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXktNzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjdcIik7XG4kb2MtZ3JheS04OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOFwiKTtcbiRvYy1ncmF5LTk6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBSZWRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXJlZC1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNWY1LFxuICBcIjFcIjogI2ZmZTNlMyxcbiAgXCIyXCI6ICNmZmM5YzksXG4gIFwiM1wiOiAjZmZhOGE4LFxuICBcIjRcIjogI2ZmODc4NyxcbiAgXCI1XCI6ICNmZjZiNmIsXG4gIFwiNlwiOiAjZmE1MjUyLFxuICBcIjdcIjogI2YwM2UzZSxcbiAgXCI4XCI6ICNlMDMxMzEsXG4gIFwiOVwiOiAjYzkyYTJhXG4pO1xuXG4kb2MtcmVkLTA6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjBcIik7XG4kb2MtcmVkLTE6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjFcIik7XG4kb2MtcmVkLTI6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjJcIik7XG4kb2MtcmVkLTM6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjNcIik7XG4kb2MtcmVkLTQ6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjRcIik7XG4kb2MtcmVkLTU6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjVcIik7XG4kb2MtcmVkLTY6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjZcIik7XG4kb2MtcmVkLTc6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjdcIik7XG4kb2MtcmVkLTg6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjhcIik7XG4kb2MtcmVkLTk6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjlcIik7XG5cblxuLy8gIFBpbmtcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXBpbmstbGlzdDogKFxuICBcIjBcIjogI2ZmZjBmNixcbiAgXCIxXCI6ICNmZmRlZWIsXG4gIFwiMlwiOiAjZmNjMmQ3LFxuICBcIjNcIjogI2ZhYTJjMSxcbiAgXCI0XCI6ICNmNzgzYWMsXG4gIFwiNVwiOiAjZjA2NTk1LFxuICBcIjZcIjogI2U2NDk4MCxcbiAgXCI3XCI6ICNkNjMzNmMsXG4gIFwiOFwiOiAjYzIyNTVjLFxuICBcIjlcIjogI2E2MWU0ZFxuKTtcblxuJG9jLXBpbmstMDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjBcIik7XG4kb2MtcGluay0xOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMVwiKTtcbiRvYy1waW5rLTI6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIyXCIpO1xuJG9jLXBpbmstMzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjNcIik7XG4kb2MtcGluay00OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNFwiKTtcbiRvYy1waW5rLTU6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI1XCIpO1xuJG9jLXBpbmstNjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjZcIik7XG4kb2MtcGluay03OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiN1wiKTtcbiRvYy1waW5rLTg6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI4XCIpO1xuJG9jLXBpbmstOTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyYXBlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmFwZS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmMGZjLFxuICBcIjFcIjogI2YzZDlmYSxcbiAgXCIyXCI6ICNlZWJlZmEsXG4gIFwiM1wiOiAjZTU5OWY3LFxuICBcIjRcIjogI2RhNzdmMixcbiAgXCI1XCI6ICNjYzVkZTgsXG4gIFwiNlwiOiAjYmU0YmRiLFxuICBcIjdcIjogI2FlM2VjOSxcbiAgXCI4XCI6ICM5YzM2YjUsXG4gIFwiOVwiOiAjODYyZTljXG4pO1xuXG4kb2MtZ3JhcGUtMDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXBlLTE6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmFwZS0yOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjJcIik7XG4kb2MtZ3JhcGUtMzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXBlLTQ6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmFwZS01OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjVcIik7XG4kb2MtZ3JhcGUtNjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXBlLTc6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmFwZS04OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjhcIik7XG4kb2MtZ3JhcGUtOTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBWaW9sZXRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXZpb2xldC1saXN0OiAoXG4gIFwiMFwiOiAjZjNmMGZmLFxuICBcIjFcIjogI2U1ZGJmZixcbiAgXCIyXCI6ICNkMGJmZmYsXG4gIFwiM1wiOiAjYjE5N2ZjLFxuICBcIjRcIjogIzk3NzVmYSxcbiAgXCI1XCI6ICM4NDVlZjcsXG4gIFwiNlwiOiAjNzk1MGYyLFxuICBcIjdcIjogIzcwNDhlOCxcbiAgXCI4XCI6ICM2NzQxZDksXG4gIFwiOVwiOiAjNWYzZGM0XG4pO1xuXG4kb2MtdmlvbGV0LTA6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjBcIik7XG4kb2MtdmlvbGV0LTE6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjFcIik7XG4kb2MtdmlvbGV0LTI6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjJcIik7XG4kb2MtdmlvbGV0LTM6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjNcIik7XG4kb2MtdmlvbGV0LTQ6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjRcIik7XG4kb2MtdmlvbGV0LTU6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjVcIik7XG4kb2MtdmlvbGV0LTY6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjZcIik7XG4kb2MtdmlvbGV0LTc6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjdcIik7XG4kb2MtdmlvbGV0LTg6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjhcIik7XG4kb2MtdmlvbGV0LTk6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEluZGlnb1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtaW5kaWdvLWxpc3Q6IChcbiAgXCIwXCI6ICNlZGYyZmYsXG4gIFwiMVwiOiAjZGJlNGZmLFxuICBcIjJcIjogI2JhYzhmZixcbiAgXCIzXCI6ICM5MWE3ZmYsXG4gIFwiNFwiOiAjNzQ4ZmZjLFxuICBcIjVcIjogIzVjN2NmYSxcbiAgXCI2XCI6ICM0YzZlZjUsXG4gIFwiN1wiOiAjNDI2M2ViLFxuICBcIjhcIjogIzNiNWJkYixcbiAgXCI5XCI6ICMzNjRmYzdcbik7XG5cbiRvYy1pbmRpZ28tMDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMFwiKTtcbiRvYy1pbmRpZ28tMTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMVwiKTtcbiRvYy1pbmRpZ28tMjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMlwiKTtcbiRvYy1pbmRpZ28tMzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiM1wiKTtcbiRvYy1pbmRpZ28tNDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNFwiKTtcbiRvYy1pbmRpZ28tNTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNVwiKTtcbiRvYy1pbmRpZ28tNjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNlwiKTtcbiRvYy1pbmRpZ28tNzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiN1wiKTtcbiRvYy1pbmRpZ28tODogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOFwiKTtcbiRvYy1pbmRpZ28tOTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQmx1ZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtYmx1ZS1saXN0OiAoXG4gIFwiMFwiOiAjZTdmNWZmLFxuICBcIjFcIjogI2QwZWJmZixcbiAgXCIyXCI6ICNhNWQ4ZmYsXG4gIFwiM1wiOiAjNzRjMGZjLFxuICBcIjRcIjogIzRkYWJmNyxcbiAgXCI1XCI6ICMzMzlhZjAsXG4gIFwiNlwiOiAjMjI4YmU2LFxuICBcIjdcIjogIzFjN2VkNixcbiAgXCI4XCI6ICMxOTcxYzIsXG4gIFwiOVwiOiAjMTg2NGFiXG4pO1xuXG4kb2MtYmx1ZS0wOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMFwiKTtcbiRvYy1ibHVlLTE6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIxXCIpO1xuJG9jLWJsdWUtMjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjJcIik7XG4kb2MtYmx1ZS0zOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiM1wiKTtcbiRvYy1ibHVlLTQ6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI0XCIpO1xuJG9jLWJsdWUtNTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjVcIik7XG4kb2MtYmx1ZS02OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNlwiKTtcbiRvYy1ibHVlLTc6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI3XCIpO1xuJG9jLWJsdWUtODogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjhcIik7XG4kb2MtYmx1ZS05OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ3lhblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY3lhbi1saXN0OiAoXG4gIFwiMFwiOiAjZTNmYWZjLFxuICBcIjFcIjogI2M1ZjZmYSxcbiAgXCIyXCI6ICM5OWU5ZjIsXG4gIFwiM1wiOiAjNjZkOWU4LFxuICBcIjRcIjogIzNiYzlkYixcbiAgXCI1XCI6ICMyMmI4Y2YsXG4gIFwiNlwiOiAjMTVhYWJmLFxuICBcIjdcIjogIzEwOThhZCxcbiAgXCI4XCI6ICMwYzg1OTksXG4gIFwiOVwiOiAjMGI3Mjg1XG4pO1xuXG4kb2MtY3lhbi0wOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMFwiKTtcbiRvYy1jeWFuLTE6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIxXCIpO1xuJG9jLWN5YW4tMjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjJcIik7XG4kb2MtY3lhbi0zOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiM1wiKTtcbiRvYy1jeWFuLTQ6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI0XCIpO1xuJG9jLWN5YW4tNTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjVcIik7XG4kb2MtY3lhbi02OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNlwiKTtcbiRvYy1jeWFuLTc6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI3XCIpO1xuJG9jLWN5YW4tODogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjhcIik7XG4kb2MtY3lhbi05OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVGVhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdGVhbC1saXN0OiAoXG4gIFwiMFwiOiAjZTZmY2Y1LFxuICBcIjFcIjogI2MzZmFlOCxcbiAgXCIyXCI6ICM5NmYyZDcsXG4gIFwiM1wiOiAjNjNlNmJlLFxuICBcIjRcIjogIzM4ZDlhOSxcbiAgXCI1XCI6ICMyMGM5OTcsXG4gIFwiNlwiOiAjMTJiODg2LFxuICBcIjdcIjogIzBjYTY3OCxcbiAgXCI4XCI6ICMwOTkyNjgsXG4gIFwiOVwiOiAjMDg3ZjViXG4pO1xuXG4kb2MtdGVhbC0wOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMFwiKTtcbiRvYy10ZWFsLTE6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIxXCIpO1xuJG9jLXRlYWwtMjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjJcIik7XG4kb2MtdGVhbC0zOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiM1wiKTtcbiRvYy10ZWFsLTQ6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI0XCIpO1xuJG9jLXRlYWwtNTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjVcIik7XG4kb2MtdGVhbC02OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNlwiKTtcbiRvYy10ZWFsLTc6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI3XCIpO1xuJG9jLXRlYWwtODogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjhcIik7XG4kb2MtdGVhbC05OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JlZW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyZWVuLWxpc3Q6IChcbiAgXCIwXCI6ICNlYmZiZWUsXG4gIFwiMVwiOiAjZDNmOWQ4LFxuICBcIjJcIjogI2IyZjJiYixcbiAgXCIzXCI6ICM4Y2U5OWEsXG4gIFwiNFwiOiAjNjlkYjdjLFxuICBcIjVcIjogIzUxY2Y2NixcbiAgXCI2XCI6ICM0MGMwNTcsXG4gIFwiN1wiOiAjMzdiMjRkLFxuICBcIjhcIjogIzJmOWU0NCxcbiAgXCI5XCI6ICMyYjhhM2Vcbik7XG5cbiRvYy1ncmVlbi0wOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjBcIik7XG4kb2MtZ3JlZW4tMTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIxXCIpO1xuJG9jLWdyZWVuLTI6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmVlbi0zOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjNcIik7XG4kb2MtZ3JlZW4tNDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI0XCIpO1xuJG9jLWdyZWVuLTU6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmVlbi02OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjZcIik7XG4kb2MtZ3JlZW4tNzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI3XCIpO1xuJG9jLWdyZWVuLTg6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmVlbi05OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIExpbWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWxpbWUtbGlzdDogKFxuICBcIjBcIjogI2Y0ZmNlMyxcbiAgXCIxXCI6ICNlOWZhYzgsXG4gIFwiMlwiOiAjZDhmNWEyLFxuICBcIjNcIjogI2MwZWI3NSxcbiAgXCI0XCI6ICNhOWUzNGIsXG4gIFwiNVwiOiAjOTRkODJkLFxuICBcIjZcIjogIzgyYzkxZSxcbiAgXCI3XCI6ICM3NGI4MTYsXG4gIFwiOFwiOiAjNjZhODBmLFxuICBcIjlcIjogIzVjOTQwZFxuKTtcblxuJG9jLWxpbWUtMDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjBcIik7XG4kb2MtbGltZS0xOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMVwiKTtcbiRvYy1saW1lLTI6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIyXCIpO1xuJG9jLWxpbWUtMzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjNcIik7XG4kb2MtbGltZS00OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNFwiKTtcbiRvYy1saW1lLTU6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI1XCIpO1xuJG9jLWxpbWUtNjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjZcIik7XG4kb2MtbGltZS03OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiN1wiKTtcbiRvYy1saW1lLTg6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI4XCIpO1xuJG9jLWxpbWUtOTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFllbGxvd1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MteWVsbG93LWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY5ZGIsXG4gIFwiMVwiOiAjZmZmM2JmLFxuICBcIjJcIjogI2ZmZWM5OSxcbiAgXCIzXCI6ICNmZmUwNjYsXG4gIFwiNFwiOiAjZmZkNDNiLFxuICBcIjVcIjogI2ZjYzQxOSxcbiAgXCI2XCI6ICNmYWIwMDUsXG4gIFwiN1wiOiAjZjU5ZjAwLFxuICBcIjhcIjogI2YwOGMwMCxcbiAgXCI5XCI6ICNlNjc3MDBcbik7XG5cbiRvYy15ZWxsb3ctMDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMFwiKTtcbiRvYy15ZWxsb3ctMTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMVwiKTtcbiRvYy15ZWxsb3ctMjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMlwiKTtcbiRvYy15ZWxsb3ctMzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiM1wiKTtcbiRvYy15ZWxsb3ctNDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNFwiKTtcbiRvYy15ZWxsb3ctNTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNVwiKTtcbiRvYy15ZWxsb3ctNjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNlwiKTtcbiRvYy15ZWxsb3ctNzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiN1wiKTtcbiRvYy15ZWxsb3ctODogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOFwiKTtcbiRvYy15ZWxsb3ctOTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgT3JhbmdlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1vcmFuZ2UtbGlzdDogKFxuICBcIjBcIjogI2ZmZjRlNixcbiAgXCIxXCI6ICNmZmU4Y2MsXG4gIFwiMlwiOiAjZmZkOGE4LFxuICBcIjNcIjogI2ZmYzA3OCxcbiAgXCI0XCI6ICNmZmE5NGQsXG4gIFwiNVwiOiAjZmY5MjJiLFxuICBcIjZcIjogI2ZkN2UxNCxcbiAgXCI3XCI6ICNmNzY3MDcsXG4gIFwiOFwiOiAjZTg1OTBjLFxuICBcIjlcIjogI2Q5NDgwZlxuKTtcblxuJG9jLW9yYW5nZS0wOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIwXCIpO1xuJG9jLW9yYW5nZS0xOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIxXCIpO1xuJG9jLW9yYW5nZS0yOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIyXCIpO1xuJG9jLW9yYW5nZS0zOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIzXCIpO1xuJG9jLW9yYW5nZS00OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI0XCIpO1xuJG9jLW9yYW5nZS01OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI1XCIpO1xuJG9jLW9yYW5nZS02OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI2XCIpO1xuJG9jLW9yYW5nZS03OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI3XCIpO1xuJG9jLW9yYW5nZS04OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI4XCIpO1xuJG9jLW9yYW5nZS05OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDb2xvciBsaXN0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jb2xvci1zcGVjdHJ1bTogICA5O1xuXG4kb2MtY29sb3ItbGlzdDogKFxuICAkb2MtZ3JheS1saXN0OiAgICAgIFwiZ3JheVwiLFxuICAkb2MtcmVkLWxpc3Q6ICAgICAgXCJyZWRcIixcbiAgJG9jLXBpbmstbGlzdDogICAgICBcInBpbmtcIixcbiAgJG9jLWdyYXBlLWxpc3Q6ICAgICAgXCJncmFwZVwiLFxuICAkb2MtdmlvbGV0LWxpc3Q6ICAgICAgXCJ2aW9sZXRcIixcbiAgJG9jLWluZGlnby1saXN0OiAgICAgIFwiaW5kaWdvXCIsXG4gICRvYy1ibHVlLWxpc3Q6ICAgICAgXCJibHVlXCIsXG4gICRvYy1jeWFuLWxpc3Q6ICAgICAgXCJjeWFuXCIsXG4gICRvYy10ZWFsLWxpc3Q6ICAgICAgXCJ0ZWFsXCIsXG4gICRvYy1ncmVlbi1saXN0OiAgICAgIFwiZ3JlZW5cIixcbiAgJG9jLWxpbWUtbGlzdDogICAgICBcImxpbWVcIixcbiAgJG9jLXllbGxvdy1saXN0OiAgICAgIFwieWVsbG93XCIsXG4gICRvYy1vcmFuZ2UtbGlzdDogICAgICBcIm9yYW5nZVwiXG4pO1xuIl19 */", "import \"./Tooltip.scss\";\n\nimport React, { useEffect } from \"react\";\n\nexport const getTooltipDiv = () => {\n  const existingDiv = document.querySelector<HTMLDivElement>(\n    \".excalidraw-tooltip\",\n  );\n  if (existingDiv) {\n    return existingDiv;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  div.classList.add(\"excalidraw-tooltip\");\n  return div;\n};\n\nexport const updateTooltipPosition = (\n  tooltip: HTMLDivElement,\n  item: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  },\n  position: \"bottom\" | \"top\" = \"bottom\",\n) => {\n  const tooltipRect = tooltip.getBoundingClientRect();\n\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const margin = 5;\n\n  let left = item.left + item.width / 2 - tooltipRect.width / 2;\n  if (left < 0) {\n    left = margin;\n  } else if (left + tooltipRect.width >= viewportWidth) {\n    left = viewportWidth - tooltipRect.width - margin;\n  }\n\n  let top: number;\n\n  if (position === \"bottom\") {\n    top = item.top + item.height + margin;\n    if (top + tooltipRect.height >= viewportHeight) {\n      top = item.top - tooltipRect.height - margin;\n    }\n  } else {\n    top = item.top - tooltipRect.height - margin;\n    if (top < 0) {\n      top = item.top + item.height + margin;\n    }\n  }\n\n  Object.assign(tooltip.style, {\n    top: `${top}px`,\n    left: `${left}px`,\n  });\n};\n\nconst updateTooltip = (\n  item: HTMLDivElement,\n  tooltip: HTMLDivElement,\n  label: string,\n  long: boolean,\n) => {\n  tooltip.classList.add(\"excalidraw-tooltip--visible\");\n  tooltip.style.minWidth = long ? \"50ch\" : \"10ch\";\n  tooltip.style.maxWidth = long ? \"50ch\" : \"15ch\";\n\n  tooltip.textContent = label;\n\n  const itemRect = item.getBoundingClientRect();\n  updateTooltipPosition(tooltip, itemRect);\n};\n\ntype TooltipProps = {\n  children: React.ReactNode;\n  label: string;\n  long?: boolean;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n};\n\nexport const Tooltip = ({\n  children,\n  label,\n  long = false,\n  style,\n  disabled,\n}: TooltipProps) => {\n  useEffect(() => {\n    return () =>\n      getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");\n  }, []);\n  if (disabled) {\n    return null;\n  }\n  return (\n    <div\n      className=\"excalidraw-tooltip-wrapper\"\n      onPointerEnter={(event) =>\n        updateTooltip(\n          event.currentTarget as HTMLDivElement,\n          getTooltipDiv(),\n          label,\n          long,\n        )\n      }\n      onPointerLeave={() =>\n        getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\")\n      }\n      style={style}\n    >\n      {children}\n    </div>\n  );\n};\n", "import { sanitizeUrl } from \"@braintree/sanitize-url\";\n\nexport const normalizeLink = (link: string) => {\n  link = link.trim();\n  if (!link) {\n    return link;\n  }\n  return sanitizeUrl(link);\n};\n\nexport const isLocalLink = (link: string | null) => {\n  return !!(link?.includes(location.origin) || link?.startsWith(\"/\"));\n};\n\n/**\n * Returns URL sanitized and safe for usage in places such as\n * iframe's src attribute or <a> href attributes.\n */\nexport const toValidURL = (link: string) => {\n  link = normalizeLink(link);\n\n  // make relative links into fully-qualified urls\n  if (link.startsWith(\"/\")) {\n    return `${location.origin}${link}`;\n  }\n\n  try {\n    new URL(link);\n  } catch {\n    // if link does not parse as URL, assume invalid and return blank page\n    return \"about:blank\";\n  }\n\n  return link;\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw-hyperlinkContainer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: absolute;\n  box-shadow: 0px 2px 4px 0 rgba(0, 0, 0, 0.3);\n  z-index: var(--zIndex-hyperlinkContainer);\n  background: var(--island-bg-color);\n  border-radius: var(--border-radius-md);\n  box-sizing: border-box;\n  min-height: 42px;\n}\n.excalidraw-hyperlinkContainer-input,\n.excalidraw-hyperlinkContainer button {\n  z-index: 100;\n}\n.excalidraw-hyperlinkContainer-input, .excalidraw-hyperlinkContainer-link {\n  height: 24px;\n  padding: 0 8px;\n  line-height: 24px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  font-family: var(--ui-font);\n}\n.excalidraw-hyperlinkContainer-input {\n  width: 18rem;\n  border: none;\n  background-color: transparent;\n  color: var(--text-primary-color);\n  outline: none;\n  border: none;\n  box-shadow: none !important;\n}\n.excalidraw-hyperlinkContainer-link {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 15rem;\n}\n.excalidraw-hyperlinkContainer button {\n  color: #228be6;\n  background-color: transparent !important;\n  font-weight: 500;\n}\n.excalidraw-hyperlinkContainer button.excalidraw-hyperlinkContainer--remove {\n  color: #c92a2a;\n}\n.excalidraw-hyperlinkContainer--remove .ToolIcon__icon svg {\n  color: #fa5252;\n}\n.excalidraw-hyperlinkContainer .ToolIcon__icon {\n  width: 2rem;\n  height: 2rem;\n}\n.excalidraw-hyperlinkContainer__buttons {\n  flex: 0 0 auto;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2VsZW1lbnQiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJIeXBlcmxpbmsuc2NzcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuLWNvbG9yL29wZW4tY29sb3Iuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMzS0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtBQUFBO0VBRUU7O0FBR0Y7RUFFRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0UsT0M0SlE7RUQzSlI7RUFDQTs7QUFDQTtFQUNFLE9DZUs7O0FEWFQ7RUFDRSxPQ09POztBREpUO0VBQ0U7RUFDQTs7QUFHRjtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3LWh5cGVybGlua0NvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3gtc2hhZG93OiAwcHggMnB4IDRweCAwIHJnYigwIDAgMCAvIDMwJSk7XG4gIHotaW5kZXg6IHZhcigtLXpJbmRleC1oeXBlcmxpbmtDb250YWluZXIpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLW1kKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLy8gdG8gYWNjb3VudCBmb3IgTFMgZHVlIHRvIHJlbmRlcmluZyBpY29ucyBhZnRlciBuZXcgbGluayBjcmVhdGVkXG4gIG1pbi1oZWlnaHQ6IDQycHg7XG5cbiAgJi1pbnB1dCxcbiAgYnV0dG9uIHtcbiAgICB6LWluZGV4OiAxMDA7XG4gIH1cblxuICAmLWlucHV0LFxuICAmLWxpbmsge1xuICAgIGhlaWdodDogMjRweDtcbiAgICBwYWRkaW5nOiAwIDhweDtcbiAgICBsaW5lLWhlaWdodDogMjRweDtcbiAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcbiAgfVxuXG4gICYtaW5wdXQge1xuICAgIHdpZHRoOiAxOHJlbTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG5cbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cblxuICAmLWxpbmsge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBtYXgtd2lkdGg6IDE1cmVtO1xuICB9XG5cbiAgYnV0dG9uIHtcbiAgICBjb2xvcjogJG9jLWJsdWUtNjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgJi5leGNhbGlkcmF3LWh5cGVybGlua0NvbnRhaW5lci0tcmVtb3ZlIHtcbiAgICAgIGNvbG9yOiAkb2MtcmVkLTk7XG4gICAgfVxuICB9XG5cbiAgJi0tcmVtb3ZlIC5Ub29sSWNvbl9faWNvbiBzdmcge1xuICAgIGNvbG9yOiAkb2MtcmVkLTY7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgIHdpZHRoOiAycmVtO1xuICAgIGhlaWdodDogMnJlbTtcbiAgfVxuXG4gICZfX2J1dHRvbnMge1xuICAgIGZsZXg6IDAgMCBhdXRvO1xuICB9XG59XG4iLCIvL1xuLy9cbi8vICDwnZeWIPCdl6Ig8J2XnyDwnZeiIPCdl6Vcbi8vICB2IDEuOS4xXG4vL1xuLy8gIOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuXG5cbi8vICBHZW5lcmFsXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy13aGl0ZTogICAgICAgICAjZmZmZmZmO1xuJG9jLWJsYWNrOiAgICAgICAgICMwMDAwMDA7XG5cblxuLy8gIEdyYXlcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyYXktbGlzdDogKFxuICBcIjBcIjogI2Y4ZjlmYSxcbiAgXCIxXCI6ICNmMWYzZjUsXG4gIFwiMlwiOiAjZTllY2VmLFxuICBcIjNcIjogI2RlZTJlNixcbiAgXCI0XCI6ICNjZWQ0ZGEsXG4gIFwiNVwiOiAjYWRiNWJkLFxuICBcIjZcIjogIzg2OGU5NixcbiAgXCI3XCI6ICM0OTUwNTcsXG4gIFwiOFwiOiAjMzQzYTQwLFxuICBcIjlcIjogIzIxMjUyOVxuKTtcblxuJG9jLWdyYXktMDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjBcIik7XG4kb2MtZ3JheS0xOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMVwiKTtcbiRvYy1ncmF5LTI6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXktMzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjNcIik7XG4kb2MtZ3JheS00OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNFwiKTtcbiRvYy1ncmF5LTU6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXktNjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjZcIik7XG4kb2MtZ3JheS03OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiN1wiKTtcbiRvYy1ncmF5LTg6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXktOTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFJlZFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtcmVkLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY1ZjUsXG4gIFwiMVwiOiAjZmZlM2UzLFxuICBcIjJcIjogI2ZmYzljOSxcbiAgXCIzXCI6ICNmZmE4YTgsXG4gIFwiNFwiOiAjZmY4Nzg3LFxuICBcIjVcIjogI2ZmNmI2YixcbiAgXCI2XCI6ICNmYTUyNTIsXG4gIFwiN1wiOiAjZjAzZTNlLFxuICBcIjhcIjogI2UwMzEzMSxcbiAgXCI5XCI6ICNjOTJhMmFcbik7XG5cbiRvYy1yZWQtMDogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMFwiKTtcbiRvYy1yZWQtMTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMVwiKTtcbiRvYy1yZWQtMjogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMlwiKTtcbiRvYy1yZWQtMzogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiM1wiKTtcbiRvYy1yZWQtNDogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNFwiKTtcbiRvYy1yZWQtNTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNVwiKTtcbiRvYy1yZWQtNjogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNlwiKTtcbiRvYy1yZWQtNzogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiN1wiKTtcbiRvYy1yZWQtODogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiOFwiKTtcbiRvYy1yZWQtOTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUGlua1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtcGluay1saXN0OiAoXG4gIFwiMFwiOiAjZmZmMGY2LFxuICBcIjFcIjogI2ZmZGVlYixcbiAgXCIyXCI6ICNmY2MyZDcsXG4gIFwiM1wiOiAjZmFhMmMxLFxuICBcIjRcIjogI2Y3ODNhYyxcbiAgXCI1XCI6ICNmMDY1OTUsXG4gIFwiNlwiOiAjZTY0OTgwLFxuICBcIjdcIjogI2Q2MzM2YyxcbiAgXCI4XCI6ICNjMjI1NWMsXG4gIFwiOVwiOiAjYTYxZTRkXG4pO1xuXG4kb2MtcGluay0wOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMFwiKTtcbiRvYy1waW5rLTE6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIxXCIpO1xuJG9jLXBpbmstMjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjJcIik7XG4kb2MtcGluay0zOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiM1wiKTtcbiRvYy1waW5rLTQ6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI0XCIpO1xuJG9jLXBpbmstNTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjVcIik7XG4kb2MtcGluay02OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNlwiKTtcbiRvYy1waW5rLTc6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI3XCIpO1xuJG9jLXBpbmstODogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjhcIik7XG4kb2MtcGluay05OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JhcGVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyYXBlLWxpc3Q6IChcbiAgXCIwXCI6ICNmOGYwZmMsXG4gIFwiMVwiOiAjZjNkOWZhLFxuICBcIjJcIjogI2VlYmVmYSxcbiAgXCIzXCI6ICNlNTk5ZjcsXG4gIFwiNFwiOiAjZGE3N2YyLFxuICBcIjVcIjogI2NjNWRlOCxcbiAgXCI2XCI6ICNiZTRiZGIsXG4gIFwiN1wiOiAjYWUzZWM5LFxuICBcIjhcIjogIzljMzZiNSxcbiAgXCI5XCI6ICM4NjJlOWNcbik7XG5cbiRvYy1ncmFwZS0wOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjBcIik7XG4kb2MtZ3JhcGUtMTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXBlLTI6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmFwZS0zOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjNcIik7XG4kb2MtZ3JhcGUtNDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXBlLTU6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmFwZS02OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjZcIik7XG4kb2MtZ3JhcGUtNzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXBlLTg6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmFwZS05OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFZpb2xldFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdmlvbGV0LWxpc3Q6IChcbiAgXCIwXCI6ICNmM2YwZmYsXG4gIFwiMVwiOiAjZTVkYmZmLFxuICBcIjJcIjogI2QwYmZmZixcbiAgXCIzXCI6ICNiMTk3ZmMsXG4gIFwiNFwiOiAjOTc3NWZhLFxuICBcIjVcIjogIzg0NWVmNyxcbiAgXCI2XCI6ICM3OTUwZjIsXG4gIFwiN1wiOiAjNzA0OGU4LFxuICBcIjhcIjogIzY3NDFkOSxcbiAgXCI5XCI6ICM1ZjNkYzRcbik7XG5cbiRvYy12aW9sZXQtMDogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMFwiKTtcbiRvYy12aW9sZXQtMTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMVwiKTtcbiRvYy12aW9sZXQtMjogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMlwiKTtcbiRvYy12aW9sZXQtMzogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiM1wiKTtcbiRvYy12aW9sZXQtNDogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNFwiKTtcbiRvYy12aW9sZXQtNTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNVwiKTtcbiRvYy12aW9sZXQtNjogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNlwiKTtcbiRvYy12aW9sZXQtNzogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiN1wiKTtcbiRvYy12aW9sZXQtODogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiOFwiKTtcbiRvYy12aW9sZXQtOTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgSW5kaWdvXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1pbmRpZ28tbGlzdDogKFxuICBcIjBcIjogI2VkZjJmZixcbiAgXCIxXCI6ICNkYmU0ZmYsXG4gIFwiMlwiOiAjYmFjOGZmLFxuICBcIjNcIjogIzkxYTdmZixcbiAgXCI0XCI6ICM3NDhmZmMsXG4gIFwiNVwiOiAjNWM3Y2ZhLFxuICBcIjZcIjogIzRjNmVmNSxcbiAgXCI3XCI6ICM0MjYzZWIsXG4gIFwiOFwiOiAjM2I1YmRiLFxuICBcIjlcIjogIzM2NGZjN1xuKTtcblxuJG9jLWluZGlnby0wOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIwXCIpO1xuJG9jLWluZGlnby0xOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIxXCIpO1xuJG9jLWluZGlnby0yOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIyXCIpO1xuJG9jLWluZGlnby0zOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIzXCIpO1xuJG9jLWluZGlnby00OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI0XCIpO1xuJG9jLWluZGlnby01OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI1XCIpO1xuJG9jLWluZGlnby02OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI2XCIpO1xuJG9jLWluZGlnby03OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI3XCIpO1xuJG9jLWluZGlnby04OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI4XCIpO1xuJG9jLWluZGlnby05OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBCbHVlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ibHVlLWxpc3Q6IChcbiAgXCIwXCI6ICNlN2Y1ZmYsXG4gIFwiMVwiOiAjZDBlYmZmLFxuICBcIjJcIjogI2E1ZDhmZixcbiAgXCIzXCI6ICM3NGMwZmMsXG4gIFwiNFwiOiAjNGRhYmY3LFxuICBcIjVcIjogIzMzOWFmMCxcbiAgXCI2XCI6ICMyMjhiZTYsXG4gIFwiN1wiOiAjMWM3ZWQ2LFxuICBcIjhcIjogIzE5NzFjMixcbiAgXCI5XCI6ICMxODY0YWJcbik7XG5cbiRvYy1ibHVlLTA6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIwXCIpO1xuJG9jLWJsdWUtMTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjFcIik7XG4kb2MtYmx1ZS0yOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMlwiKTtcbiRvYy1ibHVlLTM6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIzXCIpO1xuJG9jLWJsdWUtNDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjRcIik7XG4kb2MtYmx1ZS01OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNVwiKTtcbiRvYy1ibHVlLTY6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI2XCIpO1xuJG9jLWJsdWUtNzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjdcIik7XG4kb2MtYmx1ZS04OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOFwiKTtcbiRvYy1ibHVlLTk6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDeWFuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jeWFuLWxpc3Q6IChcbiAgXCIwXCI6ICNlM2ZhZmMsXG4gIFwiMVwiOiAjYzVmNmZhLFxuICBcIjJcIjogIzk5ZTlmMixcbiAgXCIzXCI6ICM2NmQ5ZTgsXG4gIFwiNFwiOiAjM2JjOWRiLFxuICBcIjVcIjogIzIyYjhjZixcbiAgXCI2XCI6ICMxNWFhYmYsXG4gIFwiN1wiOiAjMTA5OGFkLFxuICBcIjhcIjogIzBjODU5OSxcbiAgXCI5XCI6ICMwYjcyODVcbik7XG5cbiRvYy1jeWFuLTA6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIwXCIpO1xuJG9jLWN5YW4tMTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjFcIik7XG4kb2MtY3lhbi0yOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMlwiKTtcbiRvYy1jeWFuLTM6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIzXCIpO1xuJG9jLWN5YW4tNDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjRcIik7XG4kb2MtY3lhbi01OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNVwiKTtcbiRvYy1jeWFuLTY6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI2XCIpO1xuJG9jLWN5YW4tNzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjdcIik7XG4kb2MtY3lhbi04OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOFwiKTtcbiRvYy1jeWFuLTk6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBUZWFsXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy10ZWFsLWxpc3Q6IChcbiAgXCIwXCI6ICNlNmZjZjUsXG4gIFwiMVwiOiAjYzNmYWU4LFxuICBcIjJcIjogIzk2ZjJkNyxcbiAgXCIzXCI6ICM2M2U2YmUsXG4gIFwiNFwiOiAjMzhkOWE5LFxuICBcIjVcIjogIzIwYzk5NyxcbiAgXCI2XCI6ICMxMmI4ODYsXG4gIFwiN1wiOiAjMGNhNjc4LFxuICBcIjhcIjogIzA5OTI2OCxcbiAgXCI5XCI6ICMwODdmNWJcbik7XG5cbiRvYy10ZWFsLTA6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIwXCIpO1xuJG9jLXRlYWwtMTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjFcIik7XG4kb2MtdGVhbC0yOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMlwiKTtcbiRvYy10ZWFsLTM6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIzXCIpO1xuJG9jLXRlYWwtNDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjRcIik7XG4kb2MtdGVhbC01OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNVwiKTtcbiRvYy10ZWFsLTY6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI2XCIpO1xuJG9jLXRlYWwtNzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjdcIik7XG4kb2MtdGVhbC04OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOFwiKTtcbiRvYy10ZWFsLTk6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmVlblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JlZW4tbGlzdDogKFxuICBcIjBcIjogI2ViZmJlZSxcbiAgXCIxXCI6ICNkM2Y5ZDgsXG4gIFwiMlwiOiAjYjJmMmJiLFxuICBcIjNcIjogIzhjZTk5YSxcbiAgXCI0XCI6ICM2OWRiN2MsXG4gIFwiNVwiOiAjNTFjZjY2LFxuICBcIjZcIjogIzQwYzA1NyxcbiAgXCI3XCI6ICMzN2IyNGQsXG4gIFwiOFwiOiAjMmY5ZTQ0LFxuICBcIjlcIjogIzJiOGEzZVxuKTtcblxuJG9jLWdyZWVuLTA6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmVlbi0xOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjFcIik7XG4kb2MtZ3JlZW4tMjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIyXCIpO1xuJG9jLWdyZWVuLTM6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmVlbi00OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjRcIik7XG4kb2MtZ3JlZW4tNTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI1XCIpO1xuJG9jLWdyZWVuLTY6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmVlbi03OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjdcIik7XG4kb2MtZ3JlZW4tODogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI4XCIpO1xuJG9jLWdyZWVuLTk6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgTGltZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtbGltZS1saXN0OiAoXG4gIFwiMFwiOiAjZjRmY2UzLFxuICBcIjFcIjogI2U5ZmFjOCxcbiAgXCIyXCI6ICNkOGY1YTIsXG4gIFwiM1wiOiAjYzBlYjc1LFxuICBcIjRcIjogI2E5ZTM0YixcbiAgXCI1XCI6ICM5NGQ4MmQsXG4gIFwiNlwiOiAjODJjOTFlLFxuICBcIjdcIjogIzc0YjgxNixcbiAgXCI4XCI6ICM2NmE4MGYsXG4gIFwiOVwiOiAjNWM5NDBkXG4pO1xuXG4kb2MtbGltZS0wOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMFwiKTtcbiRvYy1saW1lLTE6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIxXCIpO1xuJG9jLWxpbWUtMjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjJcIik7XG4kb2MtbGltZS0zOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiM1wiKTtcbiRvYy1saW1lLTQ6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI0XCIpO1xuJG9jLWxpbWUtNTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjVcIik7XG4kb2MtbGltZS02OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNlwiKTtcbiRvYy1saW1lLTc6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI3XCIpO1xuJG9jLWxpbWUtODogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjhcIik7XG4kb2MtbGltZS05OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgWWVsbG93XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy15ZWxsb3ctbGlzdDogKFxuICBcIjBcIjogI2ZmZjlkYixcbiAgXCIxXCI6ICNmZmYzYmYsXG4gIFwiMlwiOiAjZmZlYzk5LFxuICBcIjNcIjogI2ZmZTA2NixcbiAgXCI0XCI6ICNmZmQ0M2IsXG4gIFwiNVwiOiAjZmNjNDE5LFxuICBcIjZcIjogI2ZhYjAwNSxcbiAgXCI3XCI6ICNmNTlmMDAsXG4gIFwiOFwiOiAjZjA4YzAwLFxuICBcIjlcIjogI2U2NzcwMFxuKTtcblxuJG9jLXllbGxvdy0wOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIwXCIpO1xuJG9jLXllbGxvdy0xOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIxXCIpO1xuJG9jLXllbGxvdy0yOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIyXCIpO1xuJG9jLXllbGxvdy0zOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIzXCIpO1xuJG9jLXllbGxvdy00OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI0XCIpO1xuJG9jLXllbGxvdy01OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI1XCIpO1xuJG9jLXllbGxvdy02OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI2XCIpO1xuJG9jLXllbGxvdy03OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI3XCIpO1xuJG9jLXllbGxvdy04OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI4XCIpO1xuJG9jLXllbGxvdy05OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBPcmFuZ2Vcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLW9yYW5nZS1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNGU2LFxuICBcIjFcIjogI2ZmZThjYyxcbiAgXCIyXCI6ICNmZmQ4YTgsXG4gIFwiM1wiOiAjZmZjMDc4LFxuICBcIjRcIjogI2ZmYTk0ZCxcbiAgXCI1XCI6ICNmZjkyMmIsXG4gIFwiNlwiOiAjZmQ3ZTE0LFxuICBcIjdcIjogI2Y3NjcwNyxcbiAgXCI4XCI6ICNlODU5MGMsXG4gIFwiOVwiOiAjZDk0ODBmXG4pO1xuXG4kb2Mtb3JhbmdlLTA6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjBcIik7XG4kb2Mtb3JhbmdlLTE6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjFcIik7XG4kb2Mtb3JhbmdlLTI6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjJcIik7XG4kb2Mtb3JhbmdlLTM6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjNcIik7XG4kb2Mtb3JhbmdlLTQ6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjRcIik7XG4kb2Mtb3JhbmdlLTU6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjVcIik7XG4kb2Mtb3JhbmdlLTY6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjZcIik7XG4kb2Mtb3JhbmdlLTc6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjdcIik7XG4kb2Mtb3JhbmdlLTg6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjhcIik7XG4kb2Mtb3JhbmdlLTk6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIENvbG9yIGxpc3Rcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWNvbG9yLXNwZWN0cnVtOiAgIDk7XG5cbiRvYy1jb2xvci1saXN0OiAoXG4gICRvYy1ncmF5LWxpc3Q6ICAgICAgXCJncmF5XCIsXG4gICRvYy1yZWQtbGlzdDogICAgICBcInJlZFwiLFxuICAkb2MtcGluay1saXN0OiAgICAgIFwicGlua1wiLFxuICAkb2MtZ3JhcGUtbGlzdDogICAgICBcImdyYXBlXCIsXG4gICRvYy12aW9sZXQtbGlzdDogICAgICBcInZpb2xldFwiLFxuICAkb2MtaW5kaWdvLWxpc3Q6ICAgICAgXCJpbmRpZ29cIixcbiAgJG9jLWJsdWUtbGlzdDogICAgICBcImJsdWVcIixcbiAgJG9jLWN5YW4tbGlzdDogICAgICBcImN5YW5cIixcbiAgJG9jLXRlYWwtbGlzdDogICAgICBcInRlYWxcIixcbiAgJG9jLWdyZWVuLWxpc3Q6ICAgICAgXCJncmVlblwiLFxuICAkb2MtbGltZS1saXN0OiAgICAgIFwibGltZVwiLFxuICAkb2MteWVsbG93LWxpc3Q6ICAgICAgXCJ5ZWxsb3dcIixcbiAgJG9jLW9yYW5nZS1saXN0OiAgICAgIFwib3JhbmdlXCJcbik7XG4iXX0= */", "// place here categories that you want to track. We want to track just a\n// small subset of categories at a given time.\nconst ALLOWED_CATEGORIES_TO_TRACK = [\"ai\"] as string[];\n\nexport const trackEvent = (\n  category: string,\n  action: string,\n  label?: string,\n  value?: number,\n) => {\n  try {\n    // prettier-ignore\n    if (\n      typeof window === \"undefined\"\n      || import.meta.env.VITE_WORKER_ID\n      // comment out to debug locally\n      || import.meta.env.PROD\n    ) {\n      return;\n    }\n\n    if (!ALLOWED_CATEGORIES_TO_TRACK.includes(category)) {\n      return;\n    }\n\n    if (!import.meta.env.PROD) {\n      console.info(\"trackEvent\", { category, action, label, value });\n    }\n\n    if (window.sa_event) {\n      window.sa_event(action, {\n        category,\n        label,\n        value,\n      });\n    }\n  } catch (error) {\n    console.error(\"error during analytics\", error);\n  }\n};\n", "import { AppState, ExcalidrawProps, Point, UIAppState } from \"../types\";\nimport {\n  getShortcutKey,\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n  wrapEvent,\n} from \"../utils\";\nimport { getEmbedLink, embeddableURLValidator } from \"./embeddable\";\nimport { mutateElement } from \"./mutateElement\";\nimport {\n  ElementsMap,\n  ExcalidrawEmbeddableElement,\n  NonDeletedExcalidrawElement,\n} from \"./types\";\n\nimport { register } from \"../actions/register\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { FreedrawIcon, LinkIcon, TrashIcon } from \"../components/icons\";\nimport { t } from \"../i18n\";\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport clsx from \"clsx\";\nimport { KEYS } from \"../keys\";\nimport { DEFAULT_LINK_SIZE } from \"../renderer/renderElement\";\nimport { rotate } from \"../math\";\nimport { EVENT, HYPERLINK_TOOLTIP_DELAY, MIME_TYPES } from \"../constants\";\nimport { Bounds } from \"./bounds\";\nimport { getTooltipDiv, updateTooltipPosition } from \"../components/Tooltip\";\nimport { getSelectedElements } from \"../scene\";\nimport { isPointHittingElementBoundingBox } from \"./collision\";\nimport { getElementAbsoluteCoords } from \".\";\nimport { isLocalLink, normalizeLink } from \"../data/url\";\n\nimport \"./Hyperlink.scss\";\nimport { trackEvent } from \"../analytics\";\nimport { useAppProps, useExcalidrawAppState } from \"../components/App\";\nimport { isEmbeddableElement } from \"./typeChecks\";\n\nconst CONTAINER_WIDTH = 320;\nconst SPACE_BOTTOM = 85;\nconst CONTAINER_PADDING = 5;\nconst CONTAINER_HEIGHT = 42;\nconst AUTO_HIDE_TIMEOUT = 500;\n\nexport const EXTERNAL_LINK_IMG = document.createElement(\"img\");\nEXTERNAL_LINK_IMG.src = `data:${MIME_TYPES.svg}, ${encodeURIComponent(\n  `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#1971c2\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-external-link\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path><polyline points=\"15 3 21 3 21 9\"></polyline><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line></svg>`,\n)}`;\n\nlet IS_HYPERLINK_TOOLTIP_VISIBLE = false;\n\nconst embeddableLinkCache = new Map<\n  ExcalidrawEmbeddableElement[\"id\"],\n  string\n>();\n\nexport const Hyperlink = ({\n  element,\n  elementsMap,\n  setAppState,\n  onLinkOpen,\n  setToast,\n  updateEmbedValidationStatus,\n}: {\n  element: NonDeletedExcalidrawElement;\n  elementsMap: ElementsMap;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  onLinkOpen: ExcalidrawProps[\"onLinkOpen\"];\n  setToast: (\n    toast: { message: string; closable?: boolean; duration?: number } | null,\n  ) => void;\n  updateEmbedValidationStatus: (\n    element: ExcalidrawEmbeddableElement,\n    status: boolean,\n  ) => void;\n}) => {\n  const appState = useExcalidrawAppState();\n  const appProps = useAppProps();\n\n  const linkVal = element.link || \"\";\n\n  const [inputVal, setInputVal] = useState(linkVal);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const isEditing = appState.showHyperlinkPopup === \"editor\";\n\n  const handleSubmit = useCallback(() => {\n    if (!inputRef.current) {\n      return;\n    }\n\n    const link = normalizeLink(inputRef.current.value) || null;\n\n    if (!element.link && link) {\n      trackEvent(\"hyperlink\", \"create\");\n    }\n\n    if (isEmbeddableElement(element)) {\n      if (appState.activeEmbeddable?.element === element) {\n        setAppState({ activeEmbeddable: null });\n      }\n      if (!link) {\n        mutateElement(element, {\n          link: null,\n        });\n        updateEmbedValidationStatus(element, false);\n        return;\n      }\n\n      if (!embeddableURLValidator(link, appProps.validateEmbeddable)) {\n        if (link) {\n          setToast({ message: t(\"toast.unableToEmbed\"), closable: true });\n        }\n        element.link && embeddableLinkCache.set(element.id, element.link);\n        mutateElement(element, {\n          link,\n        });\n        updateEmbedValidationStatus(element, false);\n      } else {\n        const { width, height } = element;\n        const embedLink = getEmbedLink(link);\n        if (embedLink?.error instanceof URIError) {\n          setToast({\n            message: t(\"toast.unrecognizedLinkFormat\"),\n            closable: true,\n          });\n        }\n        const ar = embedLink\n          ? embedLink.intrinsicSize.w / embedLink.intrinsicSize.h\n          : 1;\n        const hasLinkChanged =\n          embeddableLinkCache.get(element.id) !== element.link;\n        mutateElement(element, {\n          ...(hasLinkChanged\n            ? {\n                width:\n                  embedLink?.type === \"video\"\n                    ? width > height\n                      ? width\n                      : height * ar\n                    : width,\n                height:\n                  embedLink?.type === \"video\"\n                    ? width > height\n                      ? width / ar\n                      : height\n                    : height,\n              }\n            : {}),\n          link,\n        });\n        updateEmbedValidationStatus(element, true);\n        if (embeddableLinkCache.has(element.id)) {\n          embeddableLinkCache.delete(element.id);\n        }\n      }\n    } else {\n      mutateElement(element, { link });\n    }\n  }, [\n    element,\n    setToast,\n    appProps.validateEmbeddable,\n    appState.activeEmbeddable,\n    setAppState,\n    updateEmbedValidationStatus,\n  ]);\n\n  useLayoutEffect(() => {\n    return () => {\n      handleSubmit();\n    };\n  }, [handleSubmit]);\n\n  useEffect(() => {\n    let timeoutId: number | null = null;\n    const handlePointerMove = (event: PointerEvent) => {\n      if (isEditing) {\n        return;\n      }\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      const shouldHide = shouldHideLinkPopup(element, elementsMap, appState, [\n        event.clientX,\n        event.clientY,\n      ]) as boolean;\n      if (shouldHide) {\n        timeoutId = window.setTimeout(() => {\n          setAppState({ showHyperlinkPopup: false });\n        }, AUTO_HIDE_TIMEOUT);\n      }\n    };\n    window.addEventListener(EVENT.POINTER_MOVE, handlePointerMove, false);\n    return () => {\n      window.removeEventListener(EVENT.POINTER_MOVE, handlePointerMove, false);\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [appState, element, isEditing, setAppState, elementsMap]);\n\n  const handleRemove = useCallback(() => {\n    trackEvent(\"hyperlink\", \"delete\");\n    mutateElement(element, { link: null });\n    if (isEditing) {\n      inputRef.current!.value = \"\";\n    }\n    setAppState({ showHyperlinkPopup: false });\n  }, [setAppState, element, isEditing]);\n\n  const onEdit = () => {\n    trackEvent(\"hyperlink\", \"edit\", \"popup-ui\");\n    setAppState({ showHyperlinkPopup: \"editor\" });\n  };\n  const { x, y } = getCoordsForPopover(element, appState, elementsMap);\n  if (\n    appState.contextMenu ||\n    appState.draggingElement ||\n    appState.resizingElement ||\n    appState.isRotating ||\n    appState.openMenu ||\n    appState.viewModeEnabled\n  ) {\n    return null;\n  }\n\n  return (\n    <div\n      className=\"excalidraw-hyperlinkContainer\"\n      style={{\n        top: `${y}px`,\n        left: `${x}px`,\n        width: CONTAINER_WIDTH,\n        padding: CONTAINER_PADDING,\n      }}\n      onClick={() => {\n        if (!element.link && !isEditing) {\n          setAppState({ showHyperlinkPopup: \"editor\" });\n        }\n      }}\n    >\n      {isEditing ? (\n        <input\n          className={clsx(\"excalidraw-hyperlinkContainer-input\")}\n          placeholder=\"Type or paste your link here\"\n          ref={inputRef}\n          value={inputVal}\n          onChange={(event) => setInputVal(event.target.value)}\n          autoFocus\n          onKeyDown={(event) => {\n            event.stopPropagation();\n            // prevent cmd/ctrl+k shortcut when editing link\n            if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.K) {\n              event.preventDefault();\n            }\n            if (event.key === KEYS.ENTER || event.key === KEYS.ESCAPE) {\n              handleSubmit();\n              setAppState({ showHyperlinkPopup: \"info\" });\n            }\n          }}\n        />\n      ) : element.link ? (\n        <a\n          href={normalizeLink(element.link || \"\")}\n          className=\"excalidraw-hyperlinkContainer-link\"\n          target={isLocalLink(element.link) ? \"_self\" : \"_blank\"}\n          onClick={(event) => {\n            if (element.link && onLinkOpen) {\n              const customEvent = wrapEvent(\n                EVENT.EXCALIDRAW_LINK,\n                event.nativeEvent,\n              );\n              onLinkOpen(\n                {\n                  ...element,\n                  link: normalizeLink(element.link),\n                },\n                customEvent,\n              );\n              if (customEvent.defaultPrevented) {\n                event.preventDefault();\n              }\n            }\n          }}\n          rel=\"noopener noreferrer\"\n        >\n          {element.link}\n        </a>\n      ) : (\n        <div className=\"excalidraw-hyperlinkContainer-link\">\n          {t(\"labels.link.empty\")}\n        </div>\n      )}\n      <div className=\"excalidraw-hyperlinkContainer__buttons\">\n        {!isEditing && (\n          <ToolButton\n            type=\"button\"\n            title={t(\"buttons.edit\")}\n            aria-label={t(\"buttons.edit\")}\n            label={t(\"buttons.edit\")}\n            onClick={onEdit}\n            className=\"excalidraw-hyperlinkContainer--edit\"\n            icon={FreedrawIcon}\n          />\n        )}\n        {linkVal && !isEmbeddableElement(element) && (\n          <ToolButton\n            type=\"button\"\n            title={t(\"buttons.remove\")}\n            aria-label={t(\"buttons.remove\")}\n            label={t(\"buttons.remove\")}\n            onClick={handleRemove}\n            className=\"excalidraw-hyperlinkContainer--remove\"\n            icon={TrashIcon}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getCoordsForPopover = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1] = getElementAbsoluteCoords(element, elementsMap);\n  const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n    { sceneX: x1 + element.width / 2, sceneY: y1 },\n    appState,\n  );\n  const x = viewportX - appState.offsetLeft - CONTAINER_WIDTH / 2;\n  const y = viewportY - appState.offsetTop - SPACE_BOTTOM;\n  return { x, y };\n};\n\nexport const actionLink = register({\n  name: \"hyperlink\",\n  perform: (elements, appState) => {\n    if (appState.showHyperlinkPopup === \"editor\") {\n      return false;\n    }\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        showHyperlinkPopup: \"editor\",\n        openMenu: null,\n      },\n      commitToHistory: true,\n    };\n  },\n  trackEvent: { category: \"hyperlink\", action: \"click\" },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.K,\n  contextItemLabel: (elements, appState) =>\n    getContextMenuLabel(elements, appState),\n  predicate: (elements, appState) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    return selectedElements.length === 1;\n  },\n  PanelComponent: ({ elements, appState, updateData }) => {\n    const selectedElements = getSelectedElements(elements, appState);\n\n    return (\n      <ToolButton\n        type=\"button\"\n        icon={LinkIcon}\n        aria-label={t(getContextMenuLabel(elements, appState))}\n        title={`${\n          isEmbeddableElement(elements[0])\n            ? t(\"labels.link.labelEmbed\")\n            : t(\"labels.link.label\")\n        } - ${getShortcutKey(\"CtrlOrCmd+K\")}`}\n        onClick={() => updateData(null)}\n        selected={selectedElements.length === 1 && !!selectedElements[0].link}\n      />\n    );\n  },\n});\n\nexport const getContextMenuLabel = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: AppState,\n) => {\n  const selectedElements = getSelectedElements(elements, appState);\n  const label = selectedElements[0]!.link\n    ? isEmbeddableElement(selectedElements[0])\n      ? \"labels.link.editEmbed\"\n      : \"labels.link.edit\"\n    : isEmbeddableElement(selectedElements[0])\n    ? \"labels.link.createEmbed\"\n    : \"labels.link.create\";\n  return label;\n};\n\nexport const getLinkHandleFromCoords = (\n  [x1, y1, x2, y2]: Bounds,\n  angle: number,\n  appState: Pick<UIAppState, \"zoom\">,\n): Bounds => {\n  const size = DEFAULT_LINK_SIZE;\n  const linkWidth = size / appState.zoom.value;\n  const linkHeight = size / appState.zoom.value;\n  const linkMarginY = size / appState.zoom.value;\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n  const centeringOffset = (size - 8) / (2 * appState.zoom.value);\n  const dashedLineMargin = 4 / appState.zoom.value;\n\n  // Same as `ne` resize handle\n  const x = x2 + dashedLineMargin - centeringOffset;\n  const y = y1 - dashedLineMargin - linkMarginY + centeringOffset;\n\n  const [rotatedX, rotatedY] = rotate(\n    x + linkWidth / 2,\n    y + linkHeight / 2,\n    centerX,\n    centerY,\n    angle,\n  );\n  return [\n    rotatedX - linkWidth / 2,\n    rotatedY - linkHeight / 2,\n    linkWidth,\n    linkHeight,\n  ];\n};\n\nexport const isPointHittingLinkIcon = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  appState: AppState,\n  [x, y]: Point,\n) => {\n  const threshold = 4 / appState.zoom.value;\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const [linkX, linkY, linkWidth, linkHeight] = getLinkHandleFromCoords(\n    [x1, y1, x2, y2],\n    element.angle,\n    appState,\n  );\n  const hitLink =\n    x > linkX - threshold &&\n    x < linkX + threshold + linkWidth &&\n    y > linkY - threshold &&\n    y < linkY + linkHeight + threshold;\n  return hitLink;\n};\n\nexport const isPointHittingLink = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  appState: AppState,\n  [x, y]: Point,\n  isMobile: boolean,\n) => {\n  if (!element.link || appState.selectedElementIds[element.id]) {\n    return false;\n  }\n  const threshold = 4 / appState.zoom.value;\n  if (\n    !isMobile &&\n    appState.viewModeEnabled &&\n    isPointHittingElementBoundingBox(\n      element,\n      elementsMap,\n      [x, y],\n      threshold,\n      null,\n    )\n  ) {\n    return true;\n  }\n  return isPointHittingLinkIcon(element, elementsMap, appState, [x, y]);\n};\n\nlet HYPERLINK_TOOLTIP_TIMEOUT_ID: number | null = null;\nexport const showHyperlinkTooltip = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  if (HYPERLINK_TOOLTIP_TIMEOUT_ID) {\n    clearTimeout(HYPERLINK_TOOLTIP_TIMEOUT_ID);\n  }\n  HYPERLINK_TOOLTIP_TIMEOUT_ID = window.setTimeout(\n    () => renderTooltip(element, appState, elementsMap),\n    HYPERLINK_TOOLTIP_DELAY,\n  );\n};\n\nconst renderTooltip = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  if (!element.link) {\n    return;\n  }\n\n  const tooltipDiv = getTooltipDiv();\n\n  tooltipDiv.classList.add(\"excalidraw-tooltip--visible\");\n  tooltipDiv.style.maxWidth = \"20rem\";\n  tooltipDiv.textContent = element.link;\n\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n\n  const [linkX, linkY, linkWidth, linkHeight] = getLinkHandleFromCoords(\n    [x1, y1, x2, y2],\n    element.angle,\n    appState,\n  );\n\n  const linkViewportCoords = sceneCoordsToViewportCoords(\n    { sceneX: linkX, sceneY: linkY },\n    appState,\n  );\n\n  updateTooltipPosition(\n    tooltipDiv,\n    {\n      left: linkViewportCoords.x,\n      top: linkViewportCoords.y,\n      width: linkWidth,\n      height: linkHeight,\n    },\n    \"top\",\n  );\n  trackEvent(\"hyperlink\", \"tooltip\", \"link-icon\");\n\n  IS_HYPERLINK_TOOLTIP_VISIBLE = true;\n};\nexport const hideHyperlinkToolip = () => {\n  if (HYPERLINK_TOOLTIP_TIMEOUT_ID) {\n    clearTimeout(HYPERLINK_TOOLTIP_TIMEOUT_ID);\n  }\n  if (IS_HYPERLINK_TOOLTIP_VISIBLE) {\n    IS_HYPERLINK_TOOLTIP_VISIBLE = false;\n    getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");\n  }\n};\n\nexport const shouldHideLinkPopup = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  appState: AppState,\n  [clientX, clientY]: Point,\n): Boolean => {\n  const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n    { clientX, clientY },\n    appState,\n  );\n\n  const threshold = 15 / appState.zoom.value;\n  // hitbox to prevent hiding when hovered in element bounding box\n  if (\n    isPointHittingElementBoundingBox(\n      element,\n      elementsMap,\n      [sceneX, sceneY],\n      threshold,\n      null,\n    )\n  ) {\n    return false;\n  }\n  const [x1, y1, x2] = getElementAbsoluteCoords(element, elementsMap);\n  // hit box to prevent hiding when hovered in the vertical area between element and popover\n  if (\n    sceneX >= x1 &&\n    sceneX <= x2 &&\n    sceneY >= y1 - SPACE_BOTTOM &&\n    sceneY <= y1\n  ) {\n    return false;\n  }\n  // hit box to prevent hiding when hovered around popover within threshold\n  const { x: popoverX, y: popoverY } = getCoordsForPopover(\n    element,\n    appState,\n    elementsMap,\n  );\n\n  if (\n    clientX >= popoverX - threshold &&\n    clientX <= popoverX + CONTAINER_WIDTH + CONTAINER_PADDING * 2 + threshold &&\n    clientY >= popoverY - threshold &&\n    clientY <= popoverY + threshold + CONTAINER_PADDING * 2 + CONTAINER_HEIGHT\n  ) {\n    return false;\n  }\n  return true;\n};\n", "import { PointSnapLine, PointerSnapLine } from \"../snapping\";\nimport { InteractiveCanvasAppState, Point } from \"../types\";\n\nconst SNAP_COLOR_LIGHT = \"#ff6b6b\";\nconst SNAP_COLOR_DARK = \"#ff0000\";\nconst SNAP_WIDTH = 1;\nconst SNAP_CROSS_SIZE = 2;\n\nexport const renderSnaps = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  if (!appState.snapLines.length) {\n    return;\n  }\n\n  // in dark mode, we need to adjust the color to account for color inversion.\n  // Don't change if zen mode, because we draw only crosses, we want the\n  // colors to be more visible\n  const snapColor =\n    appState.theme === \"light\" || appState.zenModeEnabled\n      ? SNAP_COLOR_LIGHT\n      : SNAP_COLOR_DARK;\n  // in zen mode make the cross more visible since we don't draw the lines\n  const snapWidth =\n    (appState.zenModeEnabled ? SNAP_WIDTH * 1.5 : SNAP_WIDTH) /\n    appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  for (const snapLine of appState.snapLines) {\n    if (snapLine.type === \"pointer\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n\n      drawPointerSnapLine(snapLine, context, appState);\n    } else if (snapLine.type === \"gap\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n\n      drawGapLine(\n        snapLine.points[0],\n        snapLine.points[1],\n        snapLine.direction,\n        appState,\n        context,\n      );\n    } else if (snapLine.type === \"points\") {\n      context.lineWidth = snapWidth;\n      context.strokeStyle = snapColor;\n      drawPointsSnapLine(snapLine, context, appState);\n    }\n  }\n\n  context.restore();\n};\n\nconst drawPointsSnapLine = (\n  pointSnapLine: PointSnapLine,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  if (!appState.zenModeEnabled) {\n    const firstPoint = pointSnapLine.points[0];\n    const lastPoint = pointSnapLine.points[pointSnapLine.points.length - 1];\n\n    drawLine(firstPoint, lastPoint, context);\n  }\n\n  for (const point of pointSnapLine.points) {\n    drawCross(point, appState, context);\n  }\n};\n\nconst drawPointerSnapLine = (\n  pointerSnapLine: PointerSnapLine,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  drawCross(pointerSnapLine.points[0], appState, context);\n  if (!appState.zenModeEnabled) {\n    drawLine(pointerSnapLine.points[0], pointerSnapLine.points[1], context);\n  }\n};\n\nconst drawCross = (\n  [x, y]: Point,\n  appState: InteractiveCanvasAppState,\n  context: CanvasRenderingContext2D,\n) => {\n  context.save();\n  const size =\n    (appState.zenModeEnabled ? SNAP_CROSS_SIZE * 1.5 : SNAP_CROSS_SIZE) /\n    appState.zoom.value;\n  context.beginPath();\n\n  context.moveTo(x - size, y - size);\n  context.lineTo(x + size, y + size);\n\n  context.moveTo(x + size, y - size);\n  context.lineTo(x - size, y + size);\n\n  context.stroke();\n  context.restore();\n};\n\nconst drawLine = (\n  from: Point,\n  to: Point,\n  context: CanvasRenderingContext2D,\n) => {\n  context.beginPath();\n  context.lineTo(...from);\n  context.lineTo(...to);\n  context.stroke();\n};\n\nconst drawGapLine = (\n  from: Point,\n  to: Point,\n  direction: \"horizontal\" | \"vertical\",\n  appState: InteractiveCanvasAppState,\n  context: CanvasRenderingContext2D,\n) => {\n  // a horizontal gap snap line\n  // |\u2013\u2013\u2013\u2013\u2013\u2013\u2013||\u2013\u2013\u2013\u2013\u2013\u2013\u2013|\n  // ^    ^   ^       ^\n  // \\    \\   \\       \\\n  // (1)  (2) (3)     (4)\n\n  const FULL = 8 / appState.zoom.value;\n  const HALF = FULL / 2;\n  const QUARTER = FULL / 4;\n\n  if (direction === \"horizontal\") {\n    const halfPoint = [(from[0] + to[0]) / 2, from[1]];\n    // (1)\n    if (!appState.zenModeEnabled) {\n      drawLine([from[0], from[1] - FULL], [from[0], from[1] + FULL], context);\n    }\n\n    // (3)\n    drawLine(\n      [halfPoint[0] - QUARTER, halfPoint[1] - HALF],\n      [halfPoint[0] - QUARTER, halfPoint[1] + HALF],\n      context,\n    );\n    drawLine(\n      [halfPoint[0] + QUARTER, halfPoint[1] - HALF],\n      [halfPoint[0] + QUARTER, halfPoint[1] + HALF],\n      context,\n    );\n\n    if (!appState.zenModeEnabled) {\n      // (4)\n      drawLine([to[0], to[1] - FULL], [to[0], to[1] + FULL], context);\n\n      // (2)\n      drawLine(from, to, context);\n    }\n  } else {\n    const halfPoint = [from[0], (from[1] + to[1]) / 2];\n    // (1)\n    if (!appState.zenModeEnabled) {\n      drawLine([from[0] - FULL, from[1]], [from[0] + FULL, from[1]], context);\n    }\n\n    // (3)\n    drawLine(\n      [halfPoint[0] - HALF, halfPoint[1] - QUARTER],\n      [halfPoint[0] + HALF, halfPoint[1] - QUARTER],\n      context,\n    );\n    drawLine(\n      [halfPoint[0] - HALF, halfPoint[1] + QUARTER],\n      [halfPoint[0] + HALF, halfPoint[1] + QUARTER],\n      context,\n    );\n\n    if (!appState.zenModeEnabled) {\n      // (4)\n      drawLine([to[0] - FULL, to[1]], [to[0] + FULL, to[1]], context);\n\n      // (2)\n      drawLine(from, to, context);\n    }\n  }\n};\n", "import { RoughSVG } from \"roughjs/bin/svg\";\nimport oc from \"open-color\";\n\nimport {\n  InteractiveCanvasAppState,\n  StaticCanvasAppState,\n  BinaryFiles,\n  Point,\n  Zoom,\n  AppState,\n} from \"../types\";\nimport {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  ExcalidrawLinearElement,\n  NonDeleted,\n  GroupId,\n  ExcalidrawBindableElement,\n  ExcalidrawFrameLikeElement,\n  ElementsMap,\n} from \"../element/types\";\nimport {\n  getElementAbsoluteCoords,\n  OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  getTransformHandlesFromCoords,\n  getTransformHandles,\n  getCommonBounds,\n} from \"../element\";\n\nimport { roundRect } from \"./roundRect\";\nimport {\n  InteractiveCanvasRenderConfig,\n  InteractiveSceneRenderConfig,\n  SVGRenderConfig,\n  StaticCanvasRenderConfig,\n  StaticSceneRenderConfig,\n  RenderableElementsMap,\n} from \"../scene/types\";\nimport {\n  getScrollBars,\n  SCROLLBAR_COLOR,\n  SCROLLBAR_WIDTH,\n} from \"../scene/scrollbars\";\n\nimport {\n  renderElement,\n  renderElementToSvg,\n  renderSelectionElement,\n} from \"./renderElement\";\nimport { getClientColor } from \"../clients\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport {\n  isSelectedViaGroup,\n  getSelectedGroupIds,\n  getElementsInGroup,\n  selectGroupsFromGivenElements,\n} from \"../groups\";\nimport { maxBindingGap } from \"../element/collision\";\nimport { SuggestedBinding, SuggestedPointBinding } from \"../element/binding\";\nimport {\n  OMIT_SIDES_FOR_FRAME,\n  shouldShowBoundingBox,\n  TransformHandles,\n  TransformHandleType,\n} from \"../element/transformHandles\";\nimport { arrayToMap, throttleRAF } from \"../utils\";\nimport { UserIdleState } from \"../types\";\nimport {\n  DEFAULT_TRANSFORM_HANDLE_SPACING,\n  FRAME_STYLE,\n  THEME_FILTER,\n} from \"../constants\";\nimport {\n  EXTERNAL_LINK_IMG,\n  getLinkHandleFromCoords,\n} from \"../element/Hyperlink\";\nimport { renderSnaps } from \"./renderSnaps\";\nimport {\n  isEmbeddableElement,\n  isFrameLikeElement,\n  isIframeLikeElement,\n  isLinearElement,\n} from \"../element/typeChecks\";\nimport { createPlaceholderEmbeddableLabel } from \"../element/embeddable\";\nimport {\n  elementOverlapsWithFrame,\n  getTargetFrame,\n  isElementInFrame,\n} from \"../frame\";\n\nconst strokeRectWithRotation = (\n  context: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  cx: number,\n  cy: number,\n  angle: number,\n  fill: boolean = false,\n  /** should account for zoom */\n  radius: number = 0,\n) => {\n  context.save();\n  context.translate(cx, cy);\n  context.rotate(angle);\n  if (fill) {\n    context.fillRect(x - cx, y - cy, width, height);\n  }\n  if (radius && context.roundRect) {\n    context.beginPath();\n    context.roundRect(x - cx, y - cy, width, height, radius);\n    context.stroke();\n    context.closePath();\n  } else {\n    context.strokeRect(x - cx, y - cy, width, height);\n  }\n  context.restore();\n};\n\nconst strokeDiamondWithRotation = (\n  context: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  cx: number,\n  cy: number,\n  angle: number,\n) => {\n  context.save();\n  context.translate(cx, cy);\n  context.rotate(angle);\n  context.beginPath();\n  context.moveTo(0, height / 2);\n  context.lineTo(width / 2, 0);\n  context.lineTo(0, -height / 2);\n  context.lineTo(-width / 2, 0);\n  context.closePath();\n  context.stroke();\n  context.restore();\n};\n\nconst strokeEllipseWithRotation = (\n  context: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  cx: number,\n  cy: number,\n  angle: number,\n) => {\n  context.beginPath();\n  context.ellipse(cx, cy, width / 2, height / 2, angle, 0, Math.PI * 2);\n  context.stroke();\n};\n\nconst fillCircle = (\n  context: CanvasRenderingContext2D,\n  cx: number,\n  cy: number,\n  radius: number,\n  stroke = true,\n) => {\n  context.beginPath();\n  context.arc(cx, cy, radius, 0, Math.PI * 2);\n  context.fill();\n  if (stroke) {\n    context.stroke();\n  }\n};\n\nconst strokeGrid = (\n  context: CanvasRenderingContext2D,\n  gridSize: number,\n  scrollX: number,\n  scrollY: number,\n  zoom: Zoom,\n  width: number,\n  height: number,\n) => {\n  const BOLD_LINE_FREQUENCY = 5;\n\n  enum GridLineColor {\n    Bold = \"#cccccc\",\n    Regular = \"#e5e5e5\",\n  }\n\n  const offsetX =\n    -Math.round(zoom.value / gridSize) * gridSize + (scrollX % gridSize);\n  const offsetY =\n    -Math.round(zoom.value / gridSize) * gridSize + (scrollY % gridSize);\n\n  const lineWidth = Math.min(1 / zoom.value, 1);\n\n  const spaceWidth = 1 / zoom.value;\n  const lineDash = [lineWidth * 3, spaceWidth + (lineWidth + spaceWidth)];\n\n  context.save();\n  context.lineWidth = lineWidth;\n\n  for (let x = offsetX; x < offsetX + width + gridSize * 2; x += gridSize) {\n    const isBold =\n      Math.round(x - scrollX) % (BOLD_LINE_FREQUENCY * gridSize) === 0;\n    context.beginPath();\n    context.setLineDash(isBold ? [] : lineDash);\n    context.strokeStyle = isBold ? GridLineColor.Bold : GridLineColor.Regular;\n    context.moveTo(x, offsetY - gridSize);\n    context.lineTo(x, offsetY + height + gridSize * 2);\n    context.stroke();\n  }\n  for (let y = offsetY; y < offsetY + height + gridSize * 2; y += gridSize) {\n    const isBold =\n      Math.round(y - scrollY) % (BOLD_LINE_FREQUENCY * gridSize) === 0;\n    context.beginPath();\n    context.setLineDash(isBold ? [] : lineDash);\n    context.strokeStyle = isBold ? GridLineColor.Bold : GridLineColor.Regular;\n    context.moveTo(offsetX - gridSize, y);\n    context.lineTo(offsetX + width + gridSize * 2, y);\n    context.stroke();\n  }\n  context.restore();\n};\n\nconst renderSingleLinearPoint = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  point: Point,\n  radius: number,\n  isSelected: boolean,\n  isPhantomPoint = false,\n) => {\n  context.strokeStyle = \"#5e5ad8\";\n  context.setLineDash([]);\n  context.fillStyle = \"rgba(255, 255, 255, 0.9)\";\n  if (isSelected) {\n    context.fillStyle = \"rgba(134, 131, 226, 0.9)\";\n  } else if (isPhantomPoint) {\n    context.fillStyle = \"rgba(177, 151, 252, 0.7)\";\n  }\n\n  fillCircle(\n    context,\n    point[0],\n    point[1],\n    radius / appState.zoom.value,\n    !isPhantomPoint,\n  );\n};\n\nconst renderLinearPointHandles = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  element: NonDeleted<ExcalidrawLinearElement>,\n  elementsMap: RenderableElementsMap,\n) => {\n  if (!appState.selectedLinearElement) {\n    return;\n  }\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  context.lineWidth = 1 / appState.zoom.value;\n  const points = LinearElementEditor.getPointsGlobalCoordinates(\n    element,\n    elementsMap,\n  );\n\n  const { POINT_HANDLE_SIZE } = LinearElementEditor;\n  const radius = appState.editingLinearElement\n    ? POINT_HANDLE_SIZE\n    : POINT_HANDLE_SIZE / 2;\n  points.forEach((point, idx) => {\n    const isSelected =\n      !!appState.editingLinearElement?.selectedPointsIndices?.includes(idx);\n\n    renderSingleLinearPoint(context, appState, point, radius, isSelected);\n  });\n\n  //Rendering segment mid points\n  const midPoints = LinearElementEditor.getEditorMidPoints(\n    element,\n    elementsMap,\n    appState,\n  ).filter((midPoint) => midPoint !== null) as Point[];\n\n  midPoints.forEach((segmentMidPoint) => {\n    if (\n      appState?.selectedLinearElement?.segmentMidPointHoveredCoords &&\n      LinearElementEditor.arePointsEqual(\n        segmentMidPoint,\n        appState.selectedLinearElement.segmentMidPointHoveredCoords,\n      )\n    ) {\n      // The order of renderingSingleLinearPoint and highLight points is different\n      // inside vs outside editor as hover states are different,\n      // in editor when hovered the original point is not visible as hover state fully covers it whereas outside the\n      // editor original point is visible and hover state is just an outer circle.\n      if (appState.editingLinearElement) {\n        renderSingleLinearPoint(\n          context,\n          appState,\n          segmentMidPoint,\n          radius,\n          false,\n        );\n        highlightPoint(segmentMidPoint, context, appState);\n      } else {\n        highlightPoint(segmentMidPoint, context, appState);\n        renderSingleLinearPoint(\n          context,\n          appState,\n          segmentMidPoint,\n          radius,\n          false,\n        );\n      }\n    } else if (appState.editingLinearElement || points.length === 2) {\n      renderSingleLinearPoint(\n        context,\n        appState,\n        segmentMidPoint,\n        POINT_HANDLE_SIZE / 2,\n        false,\n        true,\n      );\n    }\n  });\n\n  context.restore();\n};\n\nconst highlightPoint = (\n  point: Point,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  context.fillStyle = \"rgba(105, 101, 219, 0.4)\";\n\n  fillCircle(\n    context,\n    point[0],\n    point[1],\n    LinearElementEditor.POINT_HANDLE_SIZE / appState.zoom.value,\n    false,\n  );\n};\nconst renderLinearElementPointHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elementsMap: ElementsMap,\n) => {\n  const { elementId, hoverPointIndex } = appState.selectedLinearElement!;\n  if (\n    appState.editingLinearElement?.selectedPointsIndices?.includes(\n      hoverPointIndex,\n    )\n  ) {\n    return;\n  }\n  const element = LinearElementEditor.getElement(elementId, elementsMap);\n\n  if (!element) {\n    return;\n  }\n  const point = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n    element,\n    hoverPointIndex,\n    elementsMap,\n  );\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n\n  highlightPoint(point, context, appState);\n  context.restore();\n};\n\nconst frameClip = (\n  frame: ExcalidrawFrameLikeElement,\n  context: CanvasRenderingContext2D,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n) => {\n  context.translate(frame.x + appState.scrollX, frame.y + appState.scrollY);\n  context.beginPath();\n  if (context.roundRect) {\n    context.roundRect(\n      0,\n      0,\n      frame.width,\n      frame.height,\n      FRAME_STYLE.radius / appState.zoom.value,\n    );\n  } else {\n    context.rect(0, 0, frame.width, frame.height);\n  }\n  context.clip();\n  context.translate(\n    -(frame.x + appState.scrollX),\n    -(frame.y + appState.scrollY),\n  );\n};\n\nconst getNormalizedCanvasDimensions = (\n  canvas: HTMLCanvasElement,\n  scale: number,\n): [number, number] => {\n  // When doing calculations based on canvas width we should used normalized one\n  return [canvas.width / scale, canvas.height / scale];\n};\n\nconst bootstrapCanvas = ({\n  canvas,\n  scale,\n  normalizedWidth,\n  normalizedHeight,\n  theme,\n  isExporting,\n  viewBackgroundColor,\n}: {\n  canvas: HTMLCanvasElement;\n  scale: number;\n  normalizedWidth: number;\n  normalizedHeight: number;\n  theme?: AppState[\"theme\"];\n  isExporting?: StaticCanvasRenderConfig[\"isExporting\"];\n  viewBackgroundColor?: StaticCanvasAppState[\"viewBackgroundColor\"];\n}): CanvasRenderingContext2D => {\n  const context = canvas.getContext(\"2d\")!;\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n  context.scale(scale, scale);\n\n  if (isExporting && theme === \"dark\") {\n    context.filter = THEME_FILTER;\n  }\n\n  // Paint background\n  if (typeof viewBackgroundColor === \"string\") {\n    const hasTransparence =\n      viewBackgroundColor === \"transparent\" ||\n      viewBackgroundColor.length === 5 || // #RGBA\n      viewBackgroundColor.length === 9 || // #RRGGBBA\n      /(hsla|rgba)\\(/.test(viewBackgroundColor);\n    if (hasTransparence) {\n      context.clearRect(0, 0, normalizedWidth, normalizedHeight);\n    }\n    context.save();\n    context.fillStyle = viewBackgroundColor;\n    context.fillRect(0, 0, normalizedWidth, normalizedHeight);\n    context.restore();\n  } else {\n    context.clearRect(0, 0, normalizedWidth, normalizedHeight);\n  }\n\n  return context;\n};\n\nconst _renderInteractiveScene = ({\n  canvas,\n  elementsMap,\n  visibleElements,\n  selectedElements,\n  scale,\n  appState,\n  renderConfig,\n}: InteractiveSceneRenderConfig) => {\n  if (canvas === null) {\n    return { atLeastOneVisibleElement: false, elementsMap };\n  }\n\n  const [normalizedWidth, normalizedHeight] = getNormalizedCanvasDimensions(\n    canvas,\n    scale,\n  );\n\n  const context = bootstrapCanvas({\n    canvas,\n    scale,\n    normalizedWidth,\n    normalizedHeight,\n  });\n\n  // Apply zoom\n  context.save();\n  context.scale(appState.zoom.value, appState.zoom.value);\n\n  let editingLinearElement: NonDeleted<ExcalidrawLinearElement> | undefined =\n    undefined;\n\n  visibleElements.forEach((element) => {\n    // Getting the element using LinearElementEditor during collab mismatches version - being one head of visible elements due to\n    // ShapeCache returns empty hence making sure that we get the\n    // correct element from visible elements\n    if (appState.editingLinearElement?.elementId === element.id) {\n      if (element) {\n        editingLinearElement = element as NonDeleted<ExcalidrawLinearElement>;\n      }\n    }\n  });\n\n  if (editingLinearElement) {\n    renderLinearPointHandles(\n      context,\n      appState,\n      editingLinearElement,\n      elementsMap,\n    );\n  }\n\n  // Paint selection element\n  if (appState.selectionElement) {\n    try {\n      renderSelectionElement(appState.selectionElement, context, appState);\n    } catch (error: any) {\n      console.error(error);\n    }\n  }\n\n  if (appState.isBindingEnabled) {\n    appState.suggestedBindings\n      .filter((binding) => binding != null)\n      .forEach((suggestedBinding) => {\n        renderBindingHighlight(\n          context,\n          appState,\n          suggestedBinding!,\n          elementsMap,\n        );\n      });\n  }\n\n  if (appState.frameToHighlight) {\n    renderFrameHighlight(\n      context,\n      appState,\n      appState.frameToHighlight,\n      elementsMap,\n    );\n  }\n\n  if (appState.elementsToHighlight) {\n    renderElementsBoxHighlight(context, appState, appState.elementsToHighlight);\n  }\n\n  const isFrameSelected = selectedElements.some((element) =>\n    isFrameLikeElement(element),\n  );\n\n  // Getting the element using LinearElementEditor during collab mismatches version - being one head of visible elements due to\n  // ShapeCache returns empty hence making sure that we get the\n  // correct element from visible elements\n  if (\n    selectedElements.length === 1 &&\n    appState.editingLinearElement?.elementId === selectedElements[0].id\n  ) {\n    renderLinearPointHandles(\n      context,\n      appState,\n      selectedElements[0] as NonDeleted<ExcalidrawLinearElement>,\n      elementsMap,\n    );\n  }\n\n  if (\n    appState.selectedLinearElement &&\n    appState.selectedLinearElement.hoverPointIndex >= 0\n  ) {\n    renderLinearElementPointHighlight(context, appState, elementsMap);\n  }\n  // Paint selected elements\n  if (!appState.multiElement && !appState.editingLinearElement) {\n    const showBoundingBox = shouldShowBoundingBox(selectedElements, appState);\n\n    const isSingleLinearElementSelected =\n      selectedElements.length === 1 && isLinearElement(selectedElements[0]);\n    // render selected linear element points\n    if (\n      isSingleLinearElementSelected &&\n      appState.selectedLinearElement?.elementId === selectedElements[0].id &&\n      !selectedElements[0].locked\n    ) {\n      renderLinearPointHandles(\n        context,\n        appState,\n        selectedElements[0] as ExcalidrawLinearElement,\n        elementsMap,\n      );\n    }\n    const selectionColor = renderConfig.selectionColor || oc.black;\n\n    if (showBoundingBox) {\n      // Optimisation for finding quickly relevant element ids\n      const locallySelectedIds = arrayToMap(selectedElements);\n\n      const selections: {\n        angle: number;\n        elementX1: number;\n        elementY1: number;\n        elementX2: number;\n        elementY2: number;\n        selectionColors: string[];\n        dashed?: boolean;\n        cx: number;\n        cy: number;\n        activeEmbeddable: boolean;\n      }[] = [];\n\n      for (const element of elementsMap.values()) {\n        const selectionColors = [];\n        // local user\n        if (\n          locallySelectedIds.has(element.id) &&\n          !isSelectedViaGroup(appState, element)\n        ) {\n          selectionColors.push(selectionColor);\n        }\n        // remote users\n        if (renderConfig.remoteSelectedElementIds[element.id]) {\n          selectionColors.push(\n            ...renderConfig.remoteSelectedElementIds[element.id].map(\n              (socketId: string) => {\n                const background = getClientColor(socketId);\n                return background;\n              },\n            ),\n          );\n        }\n\n        if (selectionColors.length) {\n          const [elementX1, elementY1, elementX2, elementY2, cx, cy] =\n            getElementAbsoluteCoords(element, elementsMap, true);\n          selections.push({\n            angle: element.angle,\n            elementX1,\n            elementY1,\n            elementX2,\n            elementY2,\n            selectionColors,\n            dashed: !!renderConfig.remoteSelectedElementIds[element.id],\n            cx,\n            cy,\n            activeEmbeddable:\n              appState.activeEmbeddable?.element === element &&\n              appState.activeEmbeddable.state === \"active\",\n          });\n        }\n      }\n\n      const addSelectionForGroupId = (groupId: GroupId) => {\n        const groupElements = getElementsInGroup(elementsMap, groupId);\n        const [elementX1, elementY1, elementX2, elementY2] =\n          getCommonBounds(groupElements);\n        selections.push({\n          angle: 0,\n          elementX1,\n          elementX2,\n          elementY1,\n          elementY2,\n          selectionColors: [oc.black],\n          dashed: true,\n          cx: elementX1 + (elementX2 - elementX1) / 2,\n          cy: elementY1 + (elementY2 - elementY1) / 2,\n          activeEmbeddable: false,\n        });\n      };\n\n      for (const groupId of getSelectedGroupIds(appState)) {\n        // TODO: support multiplayer selected group IDs\n        addSelectionForGroupId(groupId);\n      }\n\n      if (appState.editingGroupId) {\n        addSelectionForGroupId(appState.editingGroupId);\n      }\n\n      selections.forEach((selection) =>\n        renderSelectionBorder(context, appState, selection),\n      );\n    }\n    // Paint resize transformHandles\n    context.save();\n    context.translate(appState.scrollX, appState.scrollY);\n\n    if (selectedElements.length === 1) {\n      context.fillStyle = oc.white;\n      const transformHandles = getTransformHandles(\n        selectedElements[0],\n        appState.zoom,\n        elementsMap,\n        \"mouse\", // when we render we don't know which pointer type so use mouse,\n      );\n      if (!appState.viewModeEnabled && showBoundingBox) {\n        renderTransformHandles(\n          context,\n          renderConfig,\n          appState,\n          transformHandles,\n          selectedElements[0].angle,\n        );\n      }\n    } else if (selectedElements.length > 1 && !appState.isRotating) {\n      const dashedLinePadding =\n        (DEFAULT_TRANSFORM_HANDLE_SPACING * 2) / appState.zoom.value;\n      context.fillStyle = oc.white;\n      const [x1, y1, x2, y2] = getCommonBounds(selectedElements);\n      const initialLineDash = context.getLineDash();\n      context.setLineDash([2 / appState.zoom.value]);\n      const lineWidth = context.lineWidth;\n      context.lineWidth = 1 / appState.zoom.value;\n      context.strokeStyle = selectionColor;\n      strokeRectWithRotation(\n        context,\n        x1 - dashedLinePadding,\n        y1 - dashedLinePadding,\n        x2 - x1 + dashedLinePadding * 2,\n        y2 - y1 + dashedLinePadding * 2,\n        (x1 + x2) / 2,\n        (y1 + y2) / 2,\n        0,\n      );\n      context.lineWidth = lineWidth;\n      context.setLineDash(initialLineDash);\n      const transformHandles = getTransformHandlesFromCoords(\n        [x1, y1, x2, y2, (x1 + x2) / 2, (y1 + y2) / 2],\n        0,\n        appState.zoom,\n        \"mouse\",\n        isFrameSelected\n          ? OMIT_SIDES_FOR_FRAME\n          : OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n      );\n      if (selectedElements.some((element) => !element.locked)) {\n        renderTransformHandles(\n          context,\n          renderConfig,\n          appState,\n          transformHandles,\n          0,\n        );\n      }\n    }\n    context.restore();\n  }\n\n  renderSnaps(context, appState);\n\n  // Reset zoom\n  context.restore();\n\n  // Paint remote pointers\n  for (const clientId in renderConfig.remotePointerViewportCoords) {\n    let { x, y } = renderConfig.remotePointerViewportCoords[clientId];\n\n    x -= appState.offsetLeft;\n    y -= appState.offsetTop;\n\n    const width = 11;\n    const height = 14;\n\n    const isOutOfBounds =\n      x < 0 ||\n      x > normalizedWidth - width ||\n      y < 0 ||\n      y > normalizedHeight - height;\n\n    x = Math.max(x, 0);\n    x = Math.min(x, normalizedWidth - width);\n    y = Math.max(y, 0);\n    y = Math.min(y, normalizedHeight - height);\n\n    const background = getClientColor(clientId);\n\n    context.save();\n    context.strokeStyle = background;\n    context.fillStyle = background;\n\n    const userState = renderConfig.remotePointerUserStates[clientId];\n    const isInactive =\n      isOutOfBounds ||\n      userState === UserIdleState.IDLE ||\n      userState === UserIdleState.AWAY;\n\n    if (isInactive) {\n      context.globalAlpha = 0.3;\n    }\n\n    if (\n      renderConfig.remotePointerButton &&\n      renderConfig.remotePointerButton[clientId] === \"down\"\n    ) {\n      context.beginPath();\n      context.arc(x, y, 15, 0, 2 * Math.PI, false);\n      context.lineWidth = 3;\n      context.strokeStyle = \"#ffffff88\";\n      context.stroke();\n      context.closePath();\n\n      context.beginPath();\n      context.arc(x, y, 15, 0, 2 * Math.PI, false);\n      context.lineWidth = 1;\n      context.strokeStyle = background;\n      context.stroke();\n      context.closePath();\n    }\n\n    // Background (white outline) for arrow\n    context.fillStyle = oc.white;\n    context.strokeStyle = oc.white;\n    context.lineWidth = 6;\n    context.lineJoin = \"round\";\n    context.beginPath();\n    context.moveTo(x, y);\n    context.lineTo(x + 0, y + 14);\n    context.lineTo(x + 4, y + 9);\n    context.lineTo(x + 11, y + 8);\n    context.closePath();\n    context.stroke();\n    context.fill();\n\n    // Arrow\n    context.fillStyle = background;\n    context.strokeStyle = background;\n    context.lineWidth = 2;\n    context.lineJoin = \"round\";\n    context.beginPath();\n    if (isInactive) {\n      context.moveTo(x - 1, y - 1);\n      context.lineTo(x - 1, y + 15);\n      context.lineTo(x + 5, y + 10);\n      context.lineTo(x + 12, y + 9);\n      context.closePath();\n      context.fill();\n    } else {\n      context.moveTo(x, y);\n      context.lineTo(x + 0, y + 14);\n      context.lineTo(x + 4, y + 9);\n      context.lineTo(x + 11, y + 8);\n      context.closePath();\n      context.fill();\n      context.stroke();\n    }\n\n    const username = renderConfig.remotePointerUsernames[clientId] || \"\";\n\n    if (!isOutOfBounds && username) {\n      context.font = \"600 12px sans-serif\"; // font has to be set before context.measureText()\n\n      const offsetX = x + width / 2;\n      const offsetY = y + height + 2;\n      const paddingHorizontal = 5;\n      const paddingVertical = 3;\n      const measure = context.measureText(username);\n      const measureHeight =\n        measure.actualBoundingBoxDescent + measure.actualBoundingBoxAscent;\n      const finalHeight = Math.max(measureHeight, 12);\n\n      const boxX = offsetX - 1;\n      const boxY = offsetY - 1;\n      const boxWidth = measure.width + 2 + paddingHorizontal * 2 + 2;\n      const boxHeight = finalHeight + 2 + paddingVertical * 2 + 2;\n      if (context.roundRect) {\n        context.beginPath();\n        context.roundRect(boxX, boxY, boxWidth, boxHeight, 8);\n        context.fillStyle = background;\n        context.fill();\n        context.strokeStyle = oc.white;\n        context.stroke();\n      } else {\n        roundRect(context, boxX, boxY, boxWidth, boxHeight, 8, oc.white);\n      }\n      context.fillStyle = oc.black;\n\n      context.fillText(\n        username,\n        offsetX + paddingHorizontal + 1,\n        offsetY +\n          paddingVertical +\n          measure.actualBoundingBoxAscent +\n          Math.floor((finalHeight - measureHeight) / 2) +\n          2,\n      );\n    }\n\n    context.restore();\n    context.closePath();\n  }\n\n  // Paint scrollbars\n  let scrollBars;\n  if (renderConfig.renderScrollbars) {\n    scrollBars = getScrollBars(\n      visibleElements,\n      normalizedWidth,\n      normalizedHeight,\n      appState,\n    );\n\n    context.save();\n    context.fillStyle = SCROLLBAR_COLOR;\n    context.strokeStyle = \"rgba(255,255,255,0.8)\";\n    [scrollBars.horizontal, scrollBars.vertical].forEach((scrollBar) => {\n      if (scrollBar) {\n        roundRect(\n          context,\n          scrollBar.x,\n          scrollBar.y,\n          scrollBar.width,\n          scrollBar.height,\n          SCROLLBAR_WIDTH / 2,\n        );\n      }\n    });\n    context.restore();\n  }\n\n  return {\n    scrollBars,\n    atLeastOneVisibleElement: visibleElements.length > 0,\n    elementsMap,\n  };\n};\n\nconst _renderStaticScene = ({\n  canvas,\n  rc,\n  elementsMap,\n  allElementsMap,\n  visibleElements,\n  scale,\n  appState,\n  renderConfig,\n}: StaticSceneRenderConfig) => {\n  if (canvas === null) {\n    return;\n  }\n\n  const { renderGrid = true, isExporting } = renderConfig;\n\n  const [normalizedWidth, normalizedHeight] = getNormalizedCanvasDimensions(\n    canvas,\n    scale,\n  );\n\n  const context = bootstrapCanvas({\n    canvas,\n    scale,\n    normalizedWidth,\n    normalizedHeight,\n    theme: appState.theme,\n    isExporting,\n    viewBackgroundColor: appState.viewBackgroundColor,\n  });\n\n  // Apply zoom\n  context.scale(appState.zoom.value, appState.zoom.value);\n\n  // Grid\n  if (renderGrid && appState.gridSize) {\n    strokeGrid(\n      context,\n      appState.gridSize,\n      appState.scrollX,\n      appState.scrollY,\n      appState.zoom,\n      normalizedWidth / appState.zoom.value,\n      normalizedHeight / appState.zoom.value,\n    );\n  }\n\n  const groupsToBeAddedToFrame = new Set<string>();\n\n  visibleElements.forEach((element) => {\n    if (\n      element.groupIds.length > 0 &&\n      appState.frameToHighlight &&\n      appState.selectedElementIds[element.id] &&\n      (elementOverlapsWithFrame(\n        element,\n        appState.frameToHighlight,\n        elementsMap,\n      ) ||\n        element.groupIds.find((groupId) => groupsToBeAddedToFrame.has(groupId)))\n    ) {\n      element.groupIds.forEach((groupId) =>\n        groupsToBeAddedToFrame.add(groupId),\n      );\n    }\n  });\n\n  // Paint visible elements\n  visibleElements\n    .filter((el) => !isIframeLikeElement(el))\n    .forEach((element) => {\n      try {\n        const frameId = element.frameId || appState.frameToHighlight?.id;\n\n        if (\n          frameId &&\n          appState.frameRendering.enabled &&\n          appState.frameRendering.clip\n        ) {\n          context.save();\n\n          const frame = getTargetFrame(element, elementsMap, appState);\n\n          // TODO do we need to check isElementInFrame here?\n          if (frame && isElementInFrame(element, elementsMap, appState)) {\n            frameClip(frame, context, renderConfig, appState);\n          }\n          renderElement(\n            element,\n            elementsMap,\n            allElementsMap,\n            rc,\n            context,\n            renderConfig,\n            appState,\n          );\n          context.restore();\n        } else {\n          renderElement(\n            element,\n            elementsMap,\n            allElementsMap,\n            rc,\n            context,\n            renderConfig,\n            appState,\n          );\n        }\n        if (!isExporting) {\n          renderLinkIcon(element, context, appState, elementsMap);\n        }\n      } catch (error: any) {\n        console.error(error);\n      }\n    });\n\n  // render embeddables on top\n  visibleElements\n    .filter((el) => isIframeLikeElement(el))\n    .forEach((element) => {\n      try {\n        const render = () => {\n          renderElement(\n            element,\n            elementsMap,\n            allElementsMap,\n            rc,\n            context,\n            renderConfig,\n            appState,\n          );\n\n          if (\n            isIframeLikeElement(element) &&\n            (isExporting ||\n              (isEmbeddableElement(element) &&\n                renderConfig.embedsValidationStatus.get(element.id) !==\n                  true)) &&\n            element.width &&\n            element.height\n          ) {\n            const label = createPlaceholderEmbeddableLabel(element);\n            renderElement(\n              label,\n              elementsMap,\n              allElementsMap,\n              rc,\n              context,\n              renderConfig,\n              appState,\n            );\n          }\n          if (!isExporting) {\n            renderLinkIcon(element, context, appState, elementsMap);\n          }\n        };\n        // - when exporting the whole canvas, we DO NOT apply clipping\n        // - when we are exporting a particular frame, apply clipping\n        //   if the containing frame is not selected, apply clipping\n        const frameId = element.frameId || appState.frameToHighlight?.id;\n\n        if (\n          frameId &&\n          appState.frameRendering.enabled &&\n          appState.frameRendering.clip\n        ) {\n          context.save();\n\n          const frame = getTargetFrame(element, elementsMap, appState);\n\n          if (frame && isElementInFrame(element, elementsMap, appState)) {\n            frameClip(frame, context, renderConfig, appState);\n          }\n          render();\n          context.restore();\n        } else {\n          render();\n        }\n      } catch (error: any) {\n        console.error(error);\n      }\n    });\n};\n\n/** throttled to animation framerate */\nconst renderInteractiveSceneThrottled = throttleRAF(\n  (config: InteractiveSceneRenderConfig) => {\n    const ret = _renderInteractiveScene(config);\n    config.callback?.(ret);\n  },\n  { trailing: true },\n);\n\n/**\n * Interactive scene is the ui-canvas where we render boundinb boxes, selections\n * and other ui stuff.\n */\nexport const renderInteractiveScene = <\n  U extends typeof _renderInteractiveScene,\n  T extends boolean = false,\n>(\n  renderConfig: InteractiveSceneRenderConfig,\n  throttle?: T,\n): T extends true ? void : ReturnType<U> => {\n  if (throttle) {\n    renderInteractiveSceneThrottled(renderConfig);\n    return undefined as T extends true ? void : ReturnType<U>;\n  }\n  const ret = _renderInteractiveScene(renderConfig);\n  renderConfig.callback(ret);\n  return ret as T extends true ? void : ReturnType<U>;\n};\n\n/** throttled to animation framerate */\nconst renderStaticSceneThrottled = throttleRAF(\n  (config: StaticSceneRenderConfig) => {\n    _renderStaticScene(config);\n  },\n  { trailing: true },\n);\n\n/**\n * Static scene is the non-ui canvas where we render elements.\n */\nexport const renderStaticScene = (\n  renderConfig: StaticSceneRenderConfig,\n  throttle?: boolean,\n) => {\n  if (throttle) {\n    renderStaticSceneThrottled(renderConfig);\n    return;\n  }\n\n  _renderStaticScene(renderConfig);\n};\n\nexport const cancelRender = () => {\n  renderInteractiveSceneThrottled.cancel();\n  renderStaticSceneThrottled.cancel();\n};\n\nconst renderTransformHandles = (\n  context: CanvasRenderingContext2D,\n  renderConfig: InteractiveCanvasRenderConfig,\n  appState: InteractiveCanvasAppState,\n  transformHandles: TransformHandles,\n  angle: number,\n): void => {\n  Object.keys(transformHandles).forEach((key) => {\n    const transformHandle = transformHandles[key as TransformHandleType];\n    if (transformHandle !== undefined) {\n      const [x, y, width, height] = transformHandle;\n\n      context.save();\n      context.lineWidth = 1 / appState.zoom.value;\n      if (renderConfig.selectionColor) {\n        context.strokeStyle = renderConfig.selectionColor;\n      }\n      if (key === \"rotation\") {\n        fillCircle(context, x + width / 2, y + height / 2, width / 2);\n        // prefer round corners if roundRect API is available\n      } else if (context.roundRect) {\n        context.beginPath();\n        context.roundRect(x, y, width, height, 2 / appState.zoom.value);\n        context.fill();\n        context.stroke();\n      } else {\n        strokeRectWithRotation(\n          context,\n          x,\n          y,\n          width,\n          height,\n          x + width / 2,\n          y + height / 2,\n          angle,\n          true, // fill before stroke\n        );\n      }\n      context.restore();\n    }\n  });\n};\n\nconst renderSelectionBorder = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elementProperties: {\n    angle: number;\n    elementX1: number;\n    elementY1: number;\n    elementX2: number;\n    elementY2: number;\n    selectionColors: string[];\n    dashed?: boolean;\n    cx: number;\n    cy: number;\n    activeEmbeddable: boolean;\n  },\n  padding = DEFAULT_TRANSFORM_HANDLE_SPACING * 2,\n) => {\n  const {\n    angle,\n    elementX1,\n    elementY1,\n    elementX2,\n    elementY2,\n    selectionColors,\n    cx,\n    cy,\n    dashed,\n    activeEmbeddable,\n  } = elementProperties;\n  const elementWidth = elementX2 - elementX1;\n  const elementHeight = elementY2 - elementY1;\n\n  const linePadding = padding / appState.zoom.value;\n  const lineWidth = 8 / appState.zoom.value;\n  const spaceWidth = 4 / appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  context.lineWidth = (activeEmbeddable ? 4 : 1) / appState.zoom.value;\n\n  const count = selectionColors.length;\n  for (let index = 0; index < count; ++index) {\n    context.strokeStyle = selectionColors[index];\n    if (dashed) {\n      context.setLineDash([\n        lineWidth,\n        spaceWidth + (lineWidth + spaceWidth) * (count - 1),\n      ]);\n    }\n    context.lineDashOffset = (lineWidth + spaceWidth) * index;\n    strokeRectWithRotation(\n      context,\n      elementX1 - linePadding,\n      elementY1 - linePadding,\n      elementWidth + linePadding * 2,\n      elementHeight + linePadding * 2,\n      cx,\n      cy,\n      angle,\n    );\n  }\n  context.restore();\n};\n\nconst renderBindingHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  suggestedBinding: SuggestedBinding,\n  elementsMap: ElementsMap,\n) => {\n  const renderHighlight = Array.isArray(suggestedBinding)\n    ? renderBindingHighlightForSuggestedPointBinding\n    : renderBindingHighlightForBindableElement;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  renderHighlight(context, suggestedBinding as any, elementsMap);\n\n  context.restore();\n};\n\nconst renderBindingHighlightForBindableElement = (\n  context: CanvasRenderingContext2D,\n  element: ExcalidrawBindableElement,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const width = x2 - x1;\n  const height = y2 - y1;\n  const threshold = maxBindingGap(element, width, height);\n\n  // So that we don't overlap the element itself\n  const strokeOffset = 4;\n  context.strokeStyle = \"rgba(0,0,0,.05)\";\n  context.lineWidth = threshold - strokeOffset;\n  const padding = strokeOffset / 2 + threshold / 2;\n\n  switch (element.type) {\n    case \"rectangle\":\n    case \"text\":\n    case \"image\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"frame\":\n    case \"magicframe\":\n      strokeRectWithRotation(\n        context,\n        x1 - padding,\n        y1 - padding,\n        width + padding * 2,\n        height + padding * 2,\n        x1 + width / 2,\n        y1 + height / 2,\n        element.angle,\n      );\n      break;\n    case \"diamond\":\n      const side = Math.hypot(width, height);\n      const wPadding = (padding * side) / height;\n      const hPadding = (padding * side) / width;\n      strokeDiamondWithRotation(\n        context,\n        width + wPadding * 2,\n        height + hPadding * 2,\n        x1 + width / 2,\n        y1 + height / 2,\n        element.angle,\n      );\n      break;\n    case \"ellipse\":\n      strokeEllipseWithRotation(\n        context,\n        width + padding * 2,\n        height + padding * 2,\n        x1 + width / 2,\n        y1 + height / 2,\n        element.angle,\n      );\n      break;\n  }\n};\n\nconst renderFrameHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  frame: NonDeleted<ExcalidrawFrameLikeElement>,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(frame, elementsMap);\n  const width = x2 - x1;\n  const height = y2 - y1;\n\n  context.strokeStyle = \"rgb(0,118,255)\";\n  context.lineWidth = FRAME_STYLE.strokeWidth / appState.zoom.value;\n\n  context.save();\n  context.translate(appState.scrollX, appState.scrollY);\n  strokeRectWithRotation(\n    context,\n    x1,\n    y1,\n    width,\n    height,\n    x1 + width / 2,\n    y1 + height / 2,\n    frame.angle,\n    false,\n    FRAME_STYLE.radius / appState.zoom.value,\n  );\n  context.restore();\n};\n\nconst renderElementsBoxHighlight = (\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n  elements: NonDeleted<ExcalidrawElement>[],\n) => {\n  const individualElements = elements.filter(\n    (element) => element.groupIds.length === 0,\n  );\n\n  const elementsInGroups = elements.filter(\n    (element) => element.groupIds.length > 0,\n  );\n\n  const getSelectionFromElements = (elements: ExcalidrawElement[]) => {\n    const [elementX1, elementY1, elementX2, elementY2] =\n      getCommonBounds(elements);\n    return {\n      angle: 0,\n      elementX1,\n      elementX2,\n      elementY1,\n      elementY2,\n      selectionColors: [\"rgb(0,118,255)\"],\n      dashed: false,\n      cx: elementX1 + (elementX2 - elementX1) / 2,\n      cy: elementY1 + (elementY2 - elementY1) / 2,\n      activeEmbeddable: false,\n    };\n  };\n\n  const getSelectionForGroupId = (groupId: GroupId) => {\n    const groupElements = getElementsInGroup(elements, groupId);\n    return getSelectionFromElements(groupElements);\n  };\n\n  Object.entries(selectGroupsFromGivenElements(elementsInGroups, appState))\n    .filter(([id, isSelected]) => isSelected)\n    .map(([id, isSelected]) => id)\n    .map((groupId) => getSelectionForGroupId(groupId))\n    .concat(\n      individualElements.map((element) => getSelectionFromElements([element])),\n    )\n    .forEach((selection) =>\n      renderSelectionBorder(context, appState, selection),\n    );\n};\n\nconst renderBindingHighlightForSuggestedPointBinding = (\n  context: CanvasRenderingContext2D,\n  suggestedBinding: SuggestedPointBinding,\n  elementsMap: ElementsMap,\n) => {\n  const [element, startOrEnd, bindableElement] = suggestedBinding;\n\n  const threshold = maxBindingGap(\n    bindableElement,\n    bindableElement.width,\n    bindableElement.height,\n  );\n\n  context.strokeStyle = \"rgba(0,0,0,0)\";\n  context.fillStyle = \"rgba(0,0,0,.05)\";\n\n  const pointIndices =\n    startOrEnd === \"both\" ? [0, -1] : startOrEnd === \"start\" ? [0] : [-1];\n  pointIndices.forEach((index) => {\n    const [x, y] = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n      element,\n      index,\n      elementsMap,\n    );\n    fillCircle(context, x, y, threshold);\n  });\n};\n\nlet linkCanvasCache: any;\nconst renderLinkIcon = (\n  element: NonDeletedExcalidrawElement,\n  context: CanvasRenderingContext2D,\n  appState: StaticCanvasAppState,\n  elementsMap: ElementsMap,\n) => {\n  if (element.link && !appState.selectedElementIds[element.id]) {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n    const [x, y, width, height] = getLinkHandleFromCoords(\n      [x1, y1, x2, y2],\n      element.angle,\n      appState,\n    );\n    const centerX = x + width / 2;\n    const centerY = y + height / 2;\n    context.save();\n    context.translate(appState.scrollX + centerX, appState.scrollY + centerY);\n    context.rotate(element.angle);\n\n    if (!linkCanvasCache || linkCanvasCache.zoom !== appState.zoom.value) {\n      linkCanvasCache = document.createElement(\"canvas\");\n      linkCanvasCache.zoom = appState.zoom.value;\n      linkCanvasCache.width =\n        width * window.devicePixelRatio * appState.zoom.value;\n      linkCanvasCache.height =\n        height * window.devicePixelRatio * appState.zoom.value;\n      const linkCanvasCacheContext = linkCanvasCache.getContext(\"2d\")!;\n      linkCanvasCacheContext.scale(\n        window.devicePixelRatio * appState.zoom.value,\n        window.devicePixelRatio * appState.zoom.value,\n      );\n      linkCanvasCacheContext.fillStyle = \"#fff\";\n      linkCanvasCacheContext.fillRect(0, 0, width, height);\n      linkCanvasCacheContext.drawImage(EXTERNAL_LINK_IMG, 0, 0, width, height);\n      linkCanvasCacheContext.restore();\n      context.drawImage(\n        linkCanvasCache,\n        x - centerX,\n        y - centerY,\n        width,\n        height,\n      );\n    } else {\n      context.drawImage(\n        linkCanvasCache,\n        x - centerX,\n        y - centerY,\n        width,\n        height,\n      );\n    }\n    context.restore();\n  }\n};\n\n// This should be only called for exporting purposes\nexport const renderSceneToSvg = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  elementsMap: RenderableElementsMap,\n  rsvg: RoughSVG,\n  svgRoot: SVGElement,\n  files: BinaryFiles,\n  renderConfig: SVGRenderConfig,\n) => {\n  if (!svgRoot) {\n    return;\n  }\n\n  // render elements\n  elements\n    .filter((el) => !isIframeLikeElement(el))\n    .forEach((element) => {\n      if (!element.isDeleted) {\n        try {\n          renderElementToSvg(\n            element,\n            elementsMap,\n            rsvg,\n            svgRoot,\n            files,\n            element.x + renderConfig.offsetX,\n            element.y + renderConfig.offsetY,\n            renderConfig,\n          );\n        } catch (error: any) {\n          console.error(error);\n        }\n      }\n    });\n\n  // render embeddables on top\n  elements\n    .filter((el) => isIframeLikeElement(el))\n    .forEach((element) => {\n      if (!element.isDeleted) {\n        try {\n          renderElementToSvg(\n            element,\n            elementsMap,\n            rsvg,\n            svgRoot,\n            files,\n            element.x + renderConfig.offsetX,\n            element.y + renderConfig.offsetY,\n            renderConfig,\n          );\n        } catch (error: any) {\n          console.error(error);\n        }\n      }\n    });\n};\n", "import {\n  fileOpen as _fileOpen,\n  fileSave as _fileSave,\n  FileSystemHandle,\n  supported as nativeFileSystemSupported,\n} from \"browser-fs-access\";\nimport { EVENT, MIME_TYPES } from \"../constants\";\nimport { AbortError } from \"../errors\";\nimport { debounce } from \"../utils\";\n\ntype FILE_EXTENSION = Exclude<keyof typeof MIME_TYPES, \"binary\">;\n\nconst INPUT_CHANGE_INTERVAL_MS = 500;\n\nexport const fileOpen = <M extends boolean | undefined = false>(opts: {\n  extensions?: FILE_EXTENSION[];\n  description: string;\n  multiple?: M;\n}): Promise<M extends false | undefined ? File : File[]> => {\n  // an unsafe TS hack, alas not much we can do AFAIK\n  type RetType = M extends false | undefined ? File : File[];\n\n  const mimeTypes = opts.extensions?.reduce((mimeTypes, type) => {\n    mimeTypes.push(MIME_TYPES[type]);\n\n    return mimeTypes;\n  }, [] as string[]);\n\n  const extensions = opts.extensions?.reduce((acc, ext) => {\n    if (ext === \"jpg\") {\n      return acc.concat(\".jpg\", \".jpeg\");\n    }\n    return acc.concat(`.${ext}`);\n  }, [] as string[]);\n\n  return _fileOpen({\n    description: opts.description,\n    extensions,\n    mimeTypes,\n    multiple: opts.multiple ?? false,\n    legacySetup: (resolve, reject, input) => {\n      const scheduleRejection = debounce(reject, INPUT_CHANGE_INTERVAL_MS);\n      const focusHandler = () => {\n        checkForFile();\n        document.addEventListener(EVENT.KEYUP, scheduleRejection);\n        document.addEventListener(EVENT.POINTER_UP, scheduleRejection);\n        scheduleRejection();\n      };\n      const checkForFile = () => {\n        // this hack might not work when expecting multiple files\n        if (input.files?.length) {\n          const ret = opts.multiple ? [...input.files] : input.files[0];\n          resolve(ret as RetType);\n        }\n      };\n      requestAnimationFrame(() => {\n        window.addEventListener(EVENT.FOCUS, focusHandler);\n      });\n      const interval = window.setInterval(() => {\n        checkForFile();\n      }, INPUT_CHANGE_INTERVAL_MS);\n      return (rejectPromise) => {\n        clearInterval(interval);\n        scheduleRejection.cancel();\n        window.removeEventListener(EVENT.FOCUS, focusHandler);\n        document.removeEventListener(EVENT.KEYUP, scheduleRejection);\n        document.removeEventListener(EVENT.POINTER_UP, scheduleRejection);\n        if (rejectPromise) {\n          // so that something is shown in console if we need to debug this\n          console.warn(\"Opening the file was canceled (legacy-fs).\");\n          rejectPromise(new AbortError());\n        }\n      };\n    },\n  }) as Promise<RetType>;\n};\n\nexport const fileSave = (\n  blob: Blob | Promise<Blob>,\n  opts: {\n    /** supply without the extension */\n    name: string;\n    /** file extension */\n    extension: FILE_EXTENSION;\n    description: string;\n    /** existing FileSystemHandle */\n    fileHandle?: FileSystemHandle | null;\n  },\n) => {\n  return _fileSave(\n    blob,\n    {\n      fileName: `${opts.name}.${opts.extension}`,\n      description: opts.description,\n      extensions: [`.${opts.extension}`],\n    },\n    opts.fileHandle,\n  );\n};\n\nexport type { FileSystemHandle };\nexport { nativeFileSystemSupported };\n", "import {\n  ExcalidrawElement,\n  ExcalidrawElementType,\n  ExcalidrawSelectionElement,\n  ExcalidrawTextElement,\n  FontFamilyValues,\n  PointBinding,\n  StrokeRoundness,\n} from \"../element/types\";\nimport {\n  AppState,\n  BinaryFiles,\n  LibraryItem,\n  NormalizedZoomValue,\n} from \"../types\";\nimport { ImportedDataState, LegacyAppState } from \"./types\";\nimport {\n  getNonDeletedElements,\n  getNormalizedDimensions,\n  isInvisiblySmallElement,\n  refreshTextDimensions,\n} from \"../element\";\nimport { isTextElement, isUsingAdaptiveRadius } from \"../element/typeChecks\";\nimport { randomId } from \"../random\";\nimport {\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_TEXT_ALIGN,\n  DEFAULT_VERTICAL_ALIGN,\n  PRECEDING_ELEMENT_KEY,\n  FONT_FAMILY,\n  ROUNDNESS,\n  DEFAULT_SIDEBAR,\n  DEFAULT_ELEMENT_PROPS,\n} from \"../constants\";\nimport { getDefaultAppState } from \"../appState\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { bumpVersion } from \"../element/mutateElement\";\nimport { getFontString, getUpdatedTimestamp, updateActiveTool } from \"../utils\";\nimport { arrayToMap } from \"../utils\";\nimport { MarkOptional, Mutable } from \"../utility-types\";\nimport {\n  detectLineHeight,\n  getContainerElement,\n  getDefaultLineHeight,\n  measureBaseline,\n} from \"../element/textElement\";\nimport { normalizeLink } from \"./url\";\n\ntype RestoredAppState = Omit<\n  AppState,\n  \"offsetTop\" | \"offsetLeft\" | \"width\" | \"height\"\n>;\n\nexport const AllowedExcalidrawActiveTools: Record<\n  AppState[\"activeTool\"][\"type\"],\n  boolean\n> = {\n  selection: true,\n  text: true,\n  rectangle: true,\n  diamond: true,\n  ellipse: true,\n  line: true,\n  image: true,\n  arrow: true,\n  freedraw: true,\n  eraser: false,\n  custom: true,\n  frame: true,\n  embeddable: true,\n  hand: true,\n  laser: false,\n  magicframe: false,\n};\n\nexport type RestoredDataState = {\n  elements: ExcalidrawElement[];\n  appState: RestoredAppState;\n  files: BinaryFiles;\n};\n\nconst getFontFamilyByName = (fontFamilyName: string): FontFamilyValues => {\n  if (Object.keys(FONT_FAMILY).includes(fontFamilyName)) {\n    return FONT_FAMILY[\n      fontFamilyName as keyof typeof FONT_FAMILY\n    ] as FontFamilyValues;\n  }\n  return DEFAULT_FONT_FAMILY;\n};\n\nconst repairBinding = (binding: PointBinding | null) => {\n  if (!binding) {\n    return null;\n  }\n  return { ...binding, focus: binding.focus || 0 };\n};\n\nconst restoreElementWithProperties = <\n  T extends Required<Omit<ExcalidrawElement, \"customData\">> & {\n    customData?: ExcalidrawElement[\"customData\"];\n    /** @deprecated */\n    boundElementIds?: readonly ExcalidrawElement[\"id\"][];\n    /** @deprecated */\n    strokeSharpness?: StrokeRoundness;\n    /** metadata that may be present in elements during collaboration */\n    [PRECEDING_ELEMENT_KEY]?: string;\n  },\n  K extends Pick<T, keyof Omit<Required<T>, keyof ExcalidrawElement>>,\n>(\n  element: T,\n  extra: Pick<\n    T,\n    // This extra Pick<T, keyof K> ensure no excess properties are passed.\n    // @ts-ignore TS complains here but type checks the call sites fine.\n    keyof K\n  > &\n    Partial<Pick<ExcalidrawElement, \"type\" | \"x\" | \"y\" | \"customData\">>,\n): T => {\n  const base: Pick<T, keyof ExcalidrawElement> & {\n    [PRECEDING_ELEMENT_KEY]?: string;\n  } = {\n    type: extra.type || element.type,\n    // all elements must have version > 0 so getSceneVersion() will pick up\n    // newly added elements\n    version: element.version || 1,\n    versionNonce: element.versionNonce ?? 0,\n    isDeleted: element.isDeleted ?? false,\n    id: element.id || randomId(),\n    fillStyle: element.fillStyle || DEFAULT_ELEMENT_PROPS.fillStyle,\n    strokeWidth: element.strokeWidth || DEFAULT_ELEMENT_PROPS.strokeWidth,\n    strokeStyle: element.strokeStyle ?? DEFAULT_ELEMENT_PROPS.strokeStyle,\n    roughness: element.roughness ?? DEFAULT_ELEMENT_PROPS.roughness,\n    opacity:\n      element.opacity == null ? DEFAULT_ELEMENT_PROPS.opacity : element.opacity,\n    angle: element.angle || 0,\n    x: extra.x ?? element.x ?? 0,\n    y: extra.y ?? element.y ?? 0,\n    strokeColor: element.strokeColor || DEFAULT_ELEMENT_PROPS.strokeColor,\n    backgroundColor:\n      element.backgroundColor || DEFAULT_ELEMENT_PROPS.backgroundColor,\n    width: element.width || 0,\n    height: element.height || 0,\n    seed: element.seed ?? 1,\n    groupIds: element.groupIds ?? [],\n    frameId: element.frameId ?? null,\n    roundness: element.roundness\n      ? element.roundness\n      : element.strokeSharpness === \"round\"\n      ? {\n          // for old elements that would now use adaptive radius algo,\n          // use legacy algo instead\n          type: isUsingAdaptiveRadius(element.type)\n            ? ROUNDNESS.LEGACY\n            : ROUNDNESS.PROPORTIONAL_RADIUS,\n        }\n      : null,\n    boundElements: element.boundElementIds\n      ? element.boundElementIds.map((id) => ({ type: \"arrow\", id }))\n      : element.boundElements ?? [],\n    updated: element.updated ?? getUpdatedTimestamp(),\n    link: element.link ? normalizeLink(element.link) : null,\n    locked: element.locked ?? false,\n  };\n\n  if (\"customData\" in element || \"customData\" in extra) {\n    base.customData =\n      \"customData\" in extra ? extra.customData : element.customData;\n  }\n\n  if (PRECEDING_ELEMENT_KEY in element) {\n    base[PRECEDING_ELEMENT_KEY] = element[PRECEDING_ELEMENT_KEY];\n  }\n\n  return {\n    ...base,\n    ...getNormalizedDimensions(base),\n    ...extra,\n  } as unknown as T;\n};\n\nconst restoreElement = (\n  element: Exclude<ExcalidrawElement, ExcalidrawSelectionElement>,\n): typeof element | null => {\n  switch (element.type) {\n    case \"text\":\n      let fontSize = element.fontSize;\n      let fontFamily = element.fontFamily;\n      if (\"font\" in element) {\n        const [fontPx, _fontFamily]: [string, string] = (\n          element as any\n        ).font.split(\" \");\n        fontSize = parseFloat(fontPx);\n        fontFamily = getFontFamilyByName(_fontFamily);\n      }\n      const text = (typeof element.text === \"string\" && element.text) || \"\";\n\n      // line-height might not be specified either when creating elements\n      // programmatically, or when importing old diagrams.\n      // For the latter we want to detect the original line height which\n      // will likely differ from our per-font fixed line height we now use,\n      // to maintain backward compatibility.\n      const lineHeight =\n        element.lineHeight ||\n        (element.height\n          ? // detect line-height from current element height and font-size\n            detectLineHeight(element)\n          : // no element height likely means programmatic use, so default\n            // to a fixed line height\n            getDefaultLineHeight(element.fontFamily));\n      const baseline = measureBaseline(\n        element.text,\n        getFontString(element),\n        lineHeight,\n      );\n      element = restoreElementWithProperties(element, {\n        fontSize,\n        fontFamily,\n        text,\n        textAlign: element.textAlign || DEFAULT_TEXT_ALIGN,\n        verticalAlign: element.verticalAlign || DEFAULT_VERTICAL_ALIGN,\n        containerId: element.containerId ?? null,\n        originalText: element.originalText || text,\n\n        lineHeight,\n        baseline,\n      });\n\n      // if empty text, mark as deleted. We keep in array\n      // for data integrity purposes (collab etc.)\n      if (!text && !element.isDeleted) {\n        element = { ...element, originalText: text, isDeleted: true };\n        element = bumpVersion(element);\n      }\n\n      return element;\n    case \"freedraw\": {\n      return restoreElementWithProperties(element, {\n        points: element.points,\n        lastCommittedPoint: null,\n        simulatePressure: element.simulatePressure,\n        pressures: element.pressures,\n      });\n    }\n    case \"image\":\n      return restoreElementWithProperties(element, {\n        status: element.status || \"pending\",\n        fileId: element.fileId,\n        scale: element.scale || [1, 1],\n      });\n    case \"line\":\n    // @ts-ignore LEGACY type\n    // eslint-disable-next-line no-fallthrough\n    case \"draw\":\n    case \"arrow\": {\n      const {\n        startArrowhead = null,\n        endArrowhead = element.type === \"arrow\" ? \"arrow\" : null,\n      } = element;\n      let x = element.x;\n      let y = element.y;\n      let points = // migrate old arrow model to new one\n        !Array.isArray(element.points) || element.points.length < 2\n          ? [\n              [0, 0],\n              [element.width, element.height],\n            ]\n          : element.points;\n\n      if (points[0][0] !== 0 || points[0][1] !== 0) {\n        ({ points, x, y } = LinearElementEditor.getNormalizedPoints(element));\n      }\n\n      return restoreElementWithProperties(element, {\n        type:\n          (element.type as ExcalidrawElementType | \"draw\") === \"draw\"\n            ? \"line\"\n            : element.type,\n        startBinding: repairBinding(element.startBinding),\n        endBinding: repairBinding(element.endBinding),\n        lastCommittedPoint: null,\n        startArrowhead,\n        endArrowhead,\n        points,\n        x,\n        y,\n      });\n    }\n\n    // generic elements\n    case \"ellipse\":\n    case \"rectangle\":\n    case \"diamond\":\n    case \"iframe\":\n    case \"embeddable\":\n      return restoreElementWithProperties(element, {});\n    case \"magicframe\":\n    case \"frame\":\n      return restoreElementWithProperties(element, {\n        name: element.name ?? null,\n      });\n\n    // Don't use default case so as to catch a missing an element type case.\n    // We also don't want to throw, but instead return void so we filter\n    // out these unsupported elements from the restored array.\n  }\n  return null;\n};\n\n/**\n * Repairs contaienr element's boundElements array by removing duplicates and\n * fixing containerId of bound elements if not present. Also removes any\n * bound elements that do not exist in the elements array.\n *\n * NOTE mutates elements.\n */\nconst repairContainerElement = (\n  container: Mutable<ExcalidrawElement>,\n  elementsMap: Map<string, Mutable<ExcalidrawElement>>,\n) => {\n  if (container.boundElements) {\n    // copy because we're not cloning on restore, and we don't want to mutate upstream\n    const boundElements = container.boundElements.slice();\n\n    // dedupe bindings & fix boundElement.containerId if not set already\n    const boundIds = new Set<ExcalidrawElement[\"id\"]>();\n    container.boundElements = boundElements.reduce(\n      (\n        acc: Mutable<NonNullable<ExcalidrawElement[\"boundElements\"]>>,\n        binding,\n      ) => {\n        const boundElement = elementsMap.get(binding.id);\n        if (boundElement && !boundIds.has(binding.id)) {\n          boundIds.add(binding.id);\n\n          if (boundElement.isDeleted) {\n            return acc;\n          }\n\n          acc.push(binding);\n\n          if (\n            isTextElement(boundElement) &&\n            // being slightly conservative here, preserving existing containerId\n            // if defined, lest boundElements is stale\n            !boundElement.containerId\n          ) {\n            (boundElement as Mutable<ExcalidrawTextElement>).containerId =\n              container.id;\n          }\n        }\n        return acc;\n      },\n      [],\n    );\n  }\n};\n\n/**\n * Repairs target bound element's container's boundElements array,\n * or removes contaienrId if container does not exist.\n *\n * NOTE mutates elements.\n */\nconst repairBoundElement = (\n  boundElement: Mutable<ExcalidrawTextElement>,\n  elementsMap: Map<string, Mutable<ExcalidrawElement>>,\n) => {\n  const container = boundElement.containerId\n    ? elementsMap.get(boundElement.containerId)\n    : null;\n\n  if (!container) {\n    boundElement.containerId = null;\n    return;\n  }\n\n  if (boundElement.isDeleted) {\n    return;\n  }\n\n  if (\n    container.boundElements &&\n    !container.boundElements.find((binding) => binding.id === boundElement.id)\n  ) {\n    // copy because we're not cloning on restore, and we don't want to mutate upstream\n    const boundElements = (\n      container.boundElements || (container.boundElements = [])\n    ).slice();\n    boundElements.push({ type: \"text\", id: boundElement.id });\n    container.boundElements = boundElements;\n  }\n};\n\n/**\n * Remove an element's frameId if its containing frame is non-existent\n *\n * NOTE mutates elements.\n */\nconst repairFrameMembership = (\n  element: Mutable<ExcalidrawElement>,\n  elementsMap: Map<string, Mutable<ExcalidrawElement>>,\n) => {\n  if (element.frameId) {\n    const containingFrame = elementsMap.get(element.frameId);\n\n    if (!containingFrame) {\n      element.frameId = null;\n    }\n  }\n};\n\nexport const restoreElements = (\n  elements: ImportedDataState[\"elements\"],\n  /** NOTE doesn't serve for reconciliation */\n  localElements: readonly ExcalidrawElement[] | null | undefined,\n  opts?: { refreshDimensions?: boolean; repairBindings?: boolean } | undefined,\n): ExcalidrawElement[] => {\n  // used to detect duplicate top-level element ids\n  const existingIds = new Set<string>();\n  const localElementsMap = localElements ? arrayToMap(localElements) : null;\n  const restoredElements = (elements || []).reduce((elements, element) => {\n    // filtering out selection, which is legacy, no longer kept in elements,\n    // and causing issues if retained\n    if (element.type !== \"selection\" && !isInvisiblySmallElement(element)) {\n      let migratedElement: ExcalidrawElement | null = restoreElement(element);\n      if (migratedElement) {\n        const localElement = localElementsMap?.get(element.id);\n        if (localElement && localElement.version > migratedElement.version) {\n          migratedElement = bumpVersion(migratedElement, localElement.version);\n        }\n        if (existingIds.has(migratedElement.id)) {\n          migratedElement = { ...migratedElement, id: randomId() };\n        }\n        existingIds.add(migratedElement.id);\n\n        elements.push(migratedElement);\n      }\n    }\n    return elements;\n  }, [] as ExcalidrawElement[]);\n\n  if (!opts?.repairBindings) {\n    return restoredElements;\n  }\n\n  // repair binding. Mutates elements.\n  const restoredElementsMap = arrayToMap(restoredElements);\n  for (const element of restoredElements) {\n    if (element.frameId) {\n      repairFrameMembership(element, restoredElementsMap);\n    }\n\n    if (isTextElement(element) && element.containerId) {\n      repairBoundElement(element, restoredElementsMap);\n    } else if (element.boundElements) {\n      repairContainerElement(element, restoredElementsMap);\n    }\n\n    if (opts.refreshDimensions && isTextElement(element)) {\n      Object.assign(\n        element,\n        refreshTextDimensions(\n          element,\n          getContainerElement(element, restoredElementsMap),\n          restoredElementsMap,\n        ),\n      );\n    }\n  }\n\n  return restoredElements;\n};\n\nconst coalesceAppStateValue = <\n  T extends keyof ReturnType<typeof getDefaultAppState>,\n>(\n  key: T,\n  appState: Exclude<ImportedDataState[\"appState\"], null | undefined>,\n  defaultAppState: ReturnType<typeof getDefaultAppState>,\n) => {\n  const value = appState[key];\n  // NOTE the value! assertion is needed in TS 4.5.5 (fixed in newer versions)\n  return value !== undefined ? value! : defaultAppState[key];\n};\n\nconst LegacyAppStateMigrations: {\n  [K in keyof LegacyAppState]: (\n    ImportedDataState: Exclude<ImportedDataState[\"appState\"], null | undefined>,\n    defaultAppState: ReturnType<typeof getDefaultAppState>,\n  ) => [LegacyAppState[K][1], AppState[LegacyAppState[K][1]]];\n} = {\n  isSidebarDocked: (appState, defaultAppState) => {\n    return [\n      \"defaultSidebarDockedPreference\",\n      appState.isSidebarDocked ??\n        coalesceAppStateValue(\n          \"defaultSidebarDockedPreference\",\n          appState,\n          defaultAppState,\n        ),\n    ];\n  },\n};\n\nexport const restoreAppState = (\n  appState: ImportedDataState[\"appState\"],\n  localAppState: Partial<AppState> | null | undefined,\n): RestoredAppState => {\n  appState = appState || {};\n  const defaultAppState = getDefaultAppState();\n  const nextAppState = {} as typeof defaultAppState;\n\n  // first, migrate all legacy AppState properties to new ones. We do it\n  // in one go before migrate the rest of the properties in case the new ones\n  // depend on checking any other key (i.e. they are coupled)\n  for (const legacyKey of Object.keys(\n    LegacyAppStateMigrations,\n  ) as (keyof typeof LegacyAppStateMigrations)[]) {\n    if (legacyKey in appState) {\n      const [nextKey, nextValue] = LegacyAppStateMigrations[legacyKey](\n        appState,\n        defaultAppState,\n      );\n      (nextAppState as any)[nextKey] = nextValue;\n    }\n  }\n\n  for (const [key, defaultValue] of Object.entries(defaultAppState) as [\n    keyof typeof defaultAppState,\n    any,\n  ][]) {\n    // if AppState contains a legacy key, prefer that one and migrate its\n    // value to the new one\n    const suppliedValue = appState[key];\n\n    const localValue = localAppState ? localAppState[key] : undefined;\n    (nextAppState as any)[key] =\n      suppliedValue !== undefined\n        ? suppliedValue\n        : localValue !== undefined\n        ? localValue\n        : defaultValue;\n  }\n\n  return {\n    ...nextAppState,\n    cursorButton: localAppState?.cursorButton || \"up\",\n    // reset on fresh restore so as to hide the UI button if penMode not active\n    penDetected:\n      localAppState?.penDetected ??\n      (appState.penMode ? appState.penDetected ?? false : false),\n    activeTool: {\n      ...updateActiveTool(\n        defaultAppState,\n        nextAppState.activeTool.type &&\n          AllowedExcalidrawActiveTools[nextAppState.activeTool.type]\n          ? nextAppState.activeTool\n          : { type: \"selection\" },\n      ),\n      lastActiveTool: null,\n      locked: nextAppState.activeTool.locked ?? false,\n    },\n    // Migrates from previous version where appState.zoom was a number\n    zoom:\n      typeof appState.zoom === \"number\"\n        ? {\n            value: appState.zoom as NormalizedZoomValue,\n          }\n        : appState.zoom?.value\n        ? appState.zoom\n        : defaultAppState.zoom,\n    openSidebar:\n      // string (legacy)\n      typeof (appState.openSidebar as any as string) === \"string\"\n        ? { name: DEFAULT_SIDEBAR.name }\n        : nextAppState.openSidebar,\n  };\n};\n\nexport const restore = (\n  data: Pick<ImportedDataState, \"appState\" | \"elements\" | \"files\"> | null,\n  /**\n   * Local AppState (`this.state` or initial state from localStorage) so that we\n   * don't overwrite local state with default values (when values not\n   * explicitly specified).\n   * Supply `null` if you can't get access to it.\n   */\n  localAppState: Partial<AppState> | null | undefined,\n  localElements: readonly ExcalidrawElement[] | null | undefined,\n  elementsConfig?: { refreshDimensions?: boolean; repairBindings?: boolean },\n): RestoredDataState => {\n  return {\n    elements: restoreElements(data?.elements, localElements, elementsConfig),\n    appState: restoreAppState(data?.appState, localAppState || null),\n    files: data?.files || {},\n  };\n};\n\nconst restoreLibraryItem = (libraryItem: LibraryItem) => {\n  const elements = restoreElements(\n    getNonDeletedElements(libraryItem.elements),\n    null,\n  );\n  return elements.length ? { ...libraryItem, elements } : null;\n};\n\nexport const restoreLibraryItems = (\n  libraryItems: ImportedDataState[\"libraryItems\"] = [],\n  defaultStatus: LibraryItem[\"status\"],\n) => {\n  const restoredItems: LibraryItem[] = [];\n  for (const item of libraryItems) {\n    // migrate older libraries\n    if (Array.isArray(item)) {\n      const restoredItem = restoreLibraryItem({\n        status: defaultStatus,\n        elements: item,\n        id: randomId(),\n        created: Date.now(),\n      });\n      if (restoredItem) {\n        restoredItems.push(restoredItem);\n      }\n    } else {\n      const _item = item as MarkOptional<\n        LibraryItem,\n        \"id\" | \"status\" | \"created\"\n      >;\n      const restoredItem = restoreLibraryItem({\n        ..._item,\n        id: _item.id || randomId(),\n        status: _item.status || defaultStatus,\n        created: _item.created || Date.now(),\n      });\n      if (restoredItem) {\n        restoredItems.push(restoredItem);\n      }\n    }\n  }\n  return restoredItems;\n};\n", "import { ENCRYPTION_KEY_BITS } from \"../constants\";\nimport { blobToArrayBuffer } from \"./blob\";\n\nexport const IV_LENGTH_BYTES = 12;\n\nexport const createIV = () => {\n  const arr = new Uint8Array(IV_LENGTH_BYTES);\n  return window.crypto.getRandomValues(arr);\n};\n\nexport const generateEncryptionKey = async <\n  T extends \"string\" | \"cryptoKey\" = \"string\",\n>(\n  returnAs?: T,\n): Promise<T extends \"cryptoKey\" ? CryptoKey : string> => {\n  const key = await window.crypto.subtle.generateKey(\n    {\n      name: \"AES-GCM\",\n      length: ENCRYPTION_KEY_BITS,\n    },\n    true, // extractable\n    [\"encrypt\", \"decrypt\"],\n  );\n  return (\n    returnAs === \"cryptoKey\"\n      ? key\n      : (await window.crypto.subtle.exportKey(\"jwk\", key)).k\n  ) as T extends \"cryptoKey\" ? CryptoKey : string;\n};\n\nexport const getCryptoKey = (key: string, usage: KeyUsage) =>\n  window.crypto.subtle.importKey(\n    \"jwk\",\n    {\n      alg: \"A128GCM\",\n      ext: true,\n      k: key,\n      key_ops: [\"encrypt\", \"decrypt\"],\n      kty: \"oct\",\n    },\n    {\n      name: \"AES-GCM\",\n      length: ENCRYPTION_KEY_BITS,\n    },\n    false, // extractable\n    [usage],\n  );\n\nexport const encryptData = async (\n  key: string | CryptoKey,\n  data: Uint8Array | ArrayBuffer | Blob | File | string,\n): Promise<{ encryptedBuffer: ArrayBuffer; iv: Uint8Array }> => {\n  const importedKey =\n    typeof key === \"string\" ? await getCryptoKey(key, \"encrypt\") : key;\n  const iv = createIV();\n  const buffer: ArrayBuffer | Uint8Array =\n    typeof data === \"string\"\n      ? new TextEncoder().encode(data)\n      : data instanceof Uint8Array\n      ? data\n      : data instanceof Blob\n      ? await blobToArrayBuffer(data)\n      : data;\n\n  // We use symmetric encryption. AES-GCM is the recommended algorithm and\n  // includes checks that the ciphertext has not been modified by an attacker.\n  const encryptedBuffer = await window.crypto.subtle.encrypt(\n    {\n      name: \"AES-GCM\",\n      iv,\n    },\n    importedKey,\n    buffer as ArrayBuffer | Uint8Array,\n  );\n\n  return { encryptedBuffer, iv };\n};\n\nexport const decryptData = async (\n  iv: Uint8Array,\n  encrypted: Uint8Array | ArrayBuffer,\n  privateKey: string,\n): Promise<ArrayBuffer> => {\n  const key = await getCryptoKey(privateKey, \"decrypt\");\n  return window.crypto.subtle.decrypt(\n    {\n      name: \"AES-GCM\",\n      iv,\n    },\n    key,\n    encrypted,\n  );\n};\n", "import { deflate, inflate } from \"pako\";\nimport { encryptData, decryptData } from \"./encryption\";\n\n// -----------------------------------------------------------------------------\n// byte (binary) strings\n// -----------------------------------------------------------------------------\n\n// fast, Buffer-compatible implem\nexport const toByteString = (\n  data: string | Uint8Array | ArrayBuffer,\n): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const blob =\n      typeof data === \"string\"\n        ? new Blob([new TextEncoder().encode(data)])\n        : new Blob([data instanceof Uint8Array ? data : new Uint8Array(data)]);\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      if (!event.target || typeof event.target.result !== \"string\") {\n        return reject(new Error(\"couldn't convert to byte string\"));\n      }\n      resolve(event.target.result);\n    };\n    reader.readAsBinaryString(blob);\n  });\n};\n\nconst byteStringToArrayBuffer = (byteString: string) => {\n  const buffer = new ArrayBuffer(byteString.length);\n  const bufferView = new Uint8Array(buffer);\n  for (let i = 0, len = byteString.length; i < len; i++) {\n    bufferView[i] = byteString.charCodeAt(i);\n  }\n  return buffer;\n};\n\nconst byteStringToString = (byteString: string) => {\n  return new TextDecoder(\"utf-8\").decode(byteStringToArrayBuffer(byteString));\n};\n\n// -----------------------------------------------------------------------------\n// base64\n// -----------------------------------------------------------------------------\n\n/**\n * @param isByteString set to true if already byte string to prevent bloat\n *  due to reencoding\n */\nexport const stringToBase64 = async (str: string, isByteString = false) => {\n  return isByteString ? window.btoa(str) : window.btoa(await toByteString(str));\n};\n\n// async to align with stringToBase64\nexport const base64ToString = async (base64: string, isByteString = false) => {\n  return isByteString\n    ? window.atob(base64)\n    : byteStringToString(window.atob(base64));\n};\n\n// -----------------------------------------------------------------------------\n// text encoding\n// -----------------------------------------------------------------------------\n\ntype EncodedData = {\n  encoded: string;\n  encoding: \"bstring\";\n  /** whether text is compressed (zlib) */\n  compressed: boolean;\n  /** version for potential migration purposes */\n  version?: string;\n};\n\n/**\n * Encodes (and potentially compresses via zlib) text to byte string\n */\nexport const encode = async ({\n  text,\n  compress,\n}: {\n  text: string;\n  /** defaults to `true`. If compression fails, falls back to bstring alone. */\n  compress?: boolean;\n}): Promise<EncodedData> => {\n  let deflated!: string;\n  if (compress !== false) {\n    try {\n      deflated = await toByteString(deflate(text));\n    } catch (error: any) {\n      console.error(\"encode: cannot deflate\", error);\n    }\n  }\n  return {\n    version: \"1\",\n    encoding: \"bstring\",\n    compressed: !!deflated,\n    encoded: deflated || (await toByteString(text)),\n  };\n};\n\nexport const decode = async (data: EncodedData): Promise<string> => {\n  let decoded: string;\n\n  switch (data.encoding) {\n    case \"bstring\":\n      // if compressed, do not double decode the bstring\n      decoded = data.compressed\n        ? data.encoded\n        : await byteStringToString(data.encoded);\n      break;\n    default:\n      throw new Error(`decode: unknown encoding \"${data.encoding}\"`);\n  }\n\n  if (data.compressed) {\n    return inflate(new Uint8Array(byteStringToArrayBuffer(decoded)), {\n      to: \"string\",\n    });\n  }\n\n  return decoded;\n};\n\n// -----------------------------------------------------------------------------\n// binary encoding\n// -----------------------------------------------------------------------------\n\ntype FileEncodingInfo = {\n  /* version 2 is the version we're shipping the initial image support with.\n    version 1 was a PR version that a lot of people were using anyway.\n    Thus, if there are issues we can check whether they're not using the\n    unoffic version */\n  version: 1 | 2;\n  compression: \"pako@1\" | null;\n  encryption: \"AES-GCM\" | null;\n};\n\n// -----------------------------------------------------------------------------\nconst CONCAT_BUFFERS_VERSION = 1;\n/** how many bytes we use to encode how many bytes the next chunk has.\n * Corresponds to DataView setter methods (setUint32, setUint16, etc).\n *\n * NOTE ! values must not be changed, which would be backwards incompatible !\n */\nconst VERSION_DATAVIEW_BYTES = 4;\nconst NEXT_CHUNK_SIZE_DATAVIEW_BYTES = 4;\n// -----------------------------------------------------------------------------\n\nconst DATA_VIEW_BITS_MAP = { 1: 8, 2: 16, 4: 32 } as const;\n\n// getter\nfunction dataView(buffer: Uint8Array, bytes: 1 | 2 | 4, offset: number): number;\n// setter\nfunction dataView(\n  buffer: Uint8Array,\n  bytes: 1 | 2 | 4,\n  offset: number,\n  value: number,\n): Uint8Array;\n/**\n * abstraction over DataView that serves as a typed getter/setter in case\n * you're using constants for the byte size and want to ensure there's no\n * discrepenancy in the encoding across refactors.\n *\n * DataView serves for an endian-agnostic handling of numbers in ArrayBuffers.\n */\nfunction dataView(\n  buffer: Uint8Array,\n  bytes: 1 | 2 | 4,\n  offset: number,\n  value?: number,\n): Uint8Array | number {\n  if (value != null) {\n    if (value > Math.pow(2, DATA_VIEW_BITS_MAP[bytes]) - 1) {\n      throw new Error(\n        `attempting to set value higher than the allocated bytes (value: ${value}, bytes: ${bytes})`,\n      );\n    }\n    const method = `setUint${DATA_VIEW_BITS_MAP[bytes]}` as const;\n    new DataView(buffer.buffer)[method](offset, value);\n    return buffer;\n  }\n  const method = `getUint${DATA_VIEW_BITS_MAP[bytes]}` as const;\n  return new DataView(buffer.buffer)[method](offset);\n}\n\n// -----------------------------------------------------------------------------\n\n/**\n * Resulting concatenated buffer has this format:\n *\n * [\n *   VERSION chunk (4 bytes)\n *   LENGTH chunk 1 (4 bytes)\n *   DATA chunk 1 (up to 2^32 bits)\n *   LENGTH chunk 2 (4 bytes)\n *   DATA chunk 2 (up to 2^32 bits)\n *   ...\n * ]\n *\n * @param buffers each buffer (chunk) must be at most 2^32 bits large (~4GB)\n */\nconst concatBuffers = (...buffers: Uint8Array[]) => {\n  const bufferView = new Uint8Array(\n    VERSION_DATAVIEW_BYTES +\n      NEXT_CHUNK_SIZE_DATAVIEW_BYTES * buffers.length +\n      buffers.reduce((acc, buffer) => acc + buffer.byteLength, 0),\n  );\n\n  let cursor = 0;\n\n  // as the first chunk we'll encode the version for backwards compatibility\n  dataView(bufferView, VERSION_DATAVIEW_BYTES, cursor, CONCAT_BUFFERS_VERSION);\n  cursor += VERSION_DATAVIEW_BYTES;\n\n  for (const buffer of buffers) {\n    dataView(\n      bufferView,\n      NEXT_CHUNK_SIZE_DATAVIEW_BYTES,\n      cursor,\n      buffer.byteLength,\n    );\n    cursor += NEXT_CHUNK_SIZE_DATAVIEW_BYTES;\n\n    bufferView.set(buffer, cursor);\n    cursor += buffer.byteLength;\n  }\n\n  return bufferView;\n};\n\n/** can only be used on buffers created via `concatBuffers()` */\nconst splitBuffers = (concatenatedBuffer: Uint8Array) => {\n  const buffers = [];\n\n  let cursor = 0;\n\n  // first chunk is the version\n  const version = dataView(\n    concatenatedBuffer,\n    NEXT_CHUNK_SIZE_DATAVIEW_BYTES,\n    cursor,\n  );\n  // If version is outside of the supported versions, throw an error.\n  // This usually means the buffer wasn't encoded using this API, so we'd only\n  // waste compute.\n  if (version > CONCAT_BUFFERS_VERSION) {\n    throw new Error(`invalid version ${version}`);\n  }\n\n  cursor += VERSION_DATAVIEW_BYTES;\n\n  while (true) {\n    const chunkSize = dataView(\n      concatenatedBuffer,\n      NEXT_CHUNK_SIZE_DATAVIEW_BYTES,\n      cursor,\n    );\n    cursor += NEXT_CHUNK_SIZE_DATAVIEW_BYTES;\n\n    buffers.push(concatenatedBuffer.slice(cursor, cursor + chunkSize));\n    cursor += chunkSize;\n    if (cursor >= concatenatedBuffer.byteLength) {\n      break;\n    }\n  }\n\n  return buffers;\n};\n\n// helpers for (de)compressing data with JSON metadata including encryption\n// -----------------------------------------------------------------------------\n\n/** @private */\nconst _encryptAndCompress = async (\n  data: Uint8Array | string,\n  encryptionKey: string,\n) => {\n  const { encryptedBuffer, iv } = await encryptData(\n    encryptionKey,\n    deflate(data),\n  );\n\n  return { iv, buffer: new Uint8Array(encryptedBuffer) };\n};\n\n/**\n * The returned buffer has following format:\n * `[]` refers to a buffers wrapper (see `concatBuffers`)\n *\n * [\n *   encodingMetadataBuffer,\n *   iv,\n *   [\n *      contentsMetadataBuffer\n *      contentsBuffer\n *   ]\n * ]\n */\nexport const compressData = async <T extends Record<string, any> = never>(\n  dataBuffer: Uint8Array,\n  options: {\n    encryptionKey: string;\n  } & ([T] extends [never]\n    ? {\n        metadata?: T;\n      }\n    : {\n        metadata: T;\n      }),\n): Promise<Uint8Array> => {\n  const fileInfo: FileEncodingInfo = {\n    version: 2,\n    compression: \"pako@1\",\n    encryption: \"AES-GCM\",\n  };\n\n  const encodingMetadataBuffer = new TextEncoder().encode(\n    JSON.stringify(fileInfo),\n  );\n\n  const contentsMetadataBuffer = new TextEncoder().encode(\n    JSON.stringify(options.metadata || null),\n  );\n\n  const { iv, buffer } = await _encryptAndCompress(\n    concatBuffers(contentsMetadataBuffer, dataBuffer),\n    options.encryptionKey,\n  );\n\n  return concatBuffers(encodingMetadataBuffer, iv, buffer);\n};\n\n/** @private */\nconst _decryptAndDecompress = async (\n  iv: Uint8Array,\n  decryptedBuffer: Uint8Array,\n  decryptionKey: string,\n  isCompressed: boolean,\n) => {\n  decryptedBuffer = new Uint8Array(\n    await decryptData(iv, decryptedBuffer, decryptionKey),\n  );\n\n  if (isCompressed) {\n    return inflate(decryptedBuffer);\n  }\n\n  return decryptedBuffer;\n};\n\nexport const decompressData = async <T extends Record<string, any>>(\n  bufferView: Uint8Array,\n  options: { decryptionKey: string },\n) => {\n  // first chunk is encoding metadata (ignored for now)\n  const [encodingMetadataBuffer, iv, buffer] = splitBuffers(bufferView);\n\n  const encodingMetadata: FileEncodingInfo = JSON.parse(\n    new TextDecoder().decode(encodingMetadataBuffer),\n  );\n\n  try {\n    const [contentsMetadataBuffer, contentsBuffer] = splitBuffers(\n      await _decryptAndDecompress(\n        iv,\n        buffer,\n        options.decryptionKey,\n        !!encodingMetadata.compression,\n      ),\n    );\n\n    const metadata = JSON.parse(\n      new TextDecoder().decode(contentsMetadataBuffer),\n    ) as T;\n\n    return {\n      /** metadata source is always JSON so we can decode it here */\n      metadata,\n      /** data can be anything so the caller must decode it */\n      data: contentsBuffer,\n    };\n  } catch (error: any) {\n    console.error(\n      `Error during decompressing and decrypting the file.`,\n      encodingMetadata,\n    );\n    throw error;\n  }\n};\n\n// -----------------------------------------------------------------------------\n", "import decodePng from \"png-chunks-extract\";\nimport tEXt from \"png-chunk-text\";\nimport encodePng from \"png-chunks-encode\";\nimport { stringToBase64, encode, decode, base64ToString } from \"./encode\";\nimport { EXPORT_DATA_TYPES, MIME_TYPES } from \"../constants\";\nimport { blobToArrayBuffer } from \"./blob\";\n\n// -----------------------------------------------------------------------------\n// PNG\n// -----------------------------------------------------------------------------\n\nexport const getTEXtChunk = async (\n  blob: Blob,\n): Promise<{ keyword: string; text: string } | null> => {\n  const chunks = decodePng(new Uint8Array(await blobToArrayBuffer(blob)));\n  const metadataChunk = chunks.find((chunk) => chunk.name === \"tEXt\");\n  if (metadataChunk) {\n    return tEXt.decode(metadataChunk.data);\n  }\n  return null;\n};\n\nexport const encodePngMetadata = async ({\n  blob,\n  metadata,\n}: {\n  blob: Blob;\n  metadata: string;\n}) => {\n  const chunks = decodePng(new Uint8Array(await blobToArrayBuffer(blob)));\n\n  const metadataChunk = tEXt.encode(\n    MIME_TYPES.excalidraw,\n    JSON.stringify(\n      await encode({\n        text: metadata,\n        compress: true,\n      }),\n    ),\n  );\n  // insert metadata before last chunk (iEND)\n  chunks.splice(-1, 0, metadataChunk);\n\n  return new Blob([encodePng(chunks)], { type: MIME_TYPES.png });\n};\n\nexport const decodePngMetadata = async (blob: Blob) => {\n  const metadata = await getTEXtChunk(blob);\n  if (metadata?.keyword === MIME_TYPES.excalidraw) {\n    try {\n      const encodedData = JSON.parse(metadata.text);\n      if (!(\"encoded\" in encodedData)) {\n        // legacy, un-encoded scene JSON\n        if (\n          \"type\" in encodedData &&\n          encodedData.type === EXPORT_DATA_TYPES.excalidraw\n        ) {\n          return metadata.text;\n        }\n        throw new Error(\"FAILED\");\n      }\n      return await decode(encodedData);\n    } catch (error: any) {\n      console.error(error);\n      throw new Error(\"FAILED\");\n    }\n  }\n  throw new Error(\"INVALID\");\n};\n\n// -----------------------------------------------------------------------------\n// SVG\n// -----------------------------------------------------------------------------\n\nexport const encodeSvgMetadata = async ({ text }: { text: string }) => {\n  const base64 = await stringToBase64(\n    JSON.stringify(await encode({ text })),\n    true /* is already byte string */,\n  );\n\n  let metadata = \"\";\n  metadata += `<!-- payload-type:${MIME_TYPES.excalidraw} -->`;\n  metadata += `<!-- payload-version:2 -->`;\n  metadata += \"<!-- payload-start -->\";\n  metadata += base64;\n  metadata += \"<!-- payload-end -->\";\n  return metadata;\n};\n\nexport const decodeSvgMetadata = async ({ svg }: { svg: string }) => {\n  if (svg.includes(`payload-type:${MIME_TYPES.excalidraw}`)) {\n    const match = svg.match(\n      /<!-- payload-start -->\\s*(.+?)\\s*<!-- payload-end -->/,\n    );\n    if (!match) {\n      throw new Error(\"INVALID\");\n    }\n    const versionMatch = svg.match(/<!-- payload-version:(\\d+) -->/);\n    const version = versionMatch?.[1] || \"1\";\n    const isByteString = version !== \"1\";\n\n    try {\n      const json = await base64ToString(match[1], isByteString);\n      const encodedData = JSON.parse(json);\n      if (!(\"encoded\" in encodedData)) {\n        // legacy, un-encoded scene JSON\n        if (\n          \"type\" in encodedData &&\n          encodedData.type === EXPORT_DATA_TYPES.excalidraw\n        ) {\n          return json;\n        }\n        throw new Error(\"FAILED\");\n      }\n      return await decode(encodedData);\n    } catch (error: any) {\n      console.error(error);\n      throw new Error(\"FAILED\");\n    }\n  }\n  throw new Error(\"INVALID\");\n};\n", "import { nanoid } from \"nanoid\";\nimport { cleanAppStateForExport } from \"../appState\";\nimport { IMAGE_MIME_TYPES, MIME_TYPES } from \"../constants\";\nimport { clearElementsForExport } from \"../element\";\nimport { ExcalidrawElement, FileId } from \"../element/types\";\nimport { CanvasError, ImageSceneDataError } from \"../errors\";\nimport { t } from \"../i18n\";\nimport { calculateScrollCenter } from \"../scene\";\nimport { AppState, DataURL, LibraryItem } from \"../types\";\nimport { ValueOf } from \"../utility-types\";\nimport { bytesToHexString, isPromiseLike } from \"../utils\";\nimport { FileSystemHandle, nativeFileSystemSupported } from \"./filesystem\";\nimport { isValidExcalidrawData, isValidLibrary } from \"./json\";\nimport { restore, restoreLibraryItems } from \"./restore\";\nimport { ImportedLibraryData } from \"./types\";\n\nconst parseFileContents = async (blob: Blob | File) => {\n  let contents: string;\n\n  if (blob.type === MIME_TYPES.png) {\n    try {\n      return await (await import(\"./image\")).decodePngMetadata(blob);\n    } catch (error: any) {\n      if (error.message === \"INVALID\") {\n        throw new ImageSceneDataError(\n          t(\"alerts.imageDoesNotContainScene\"),\n          \"IMAGE_NOT_CONTAINS_SCENE_DATA\",\n        );\n      } else {\n        throw new ImageSceneDataError(t(\"alerts.cannotRestoreFromImage\"));\n      }\n    }\n  } else {\n    if (\"text\" in Blob) {\n      contents = await blob.text();\n    } else {\n      contents = await new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.readAsText(blob, \"utf8\");\n        reader.onloadend = () => {\n          if (reader.readyState === FileReader.DONE) {\n            resolve(reader.result as string);\n          }\n        };\n      });\n    }\n    if (blob.type === MIME_TYPES.svg) {\n      try {\n        return await (\n          await import(\"./image\")\n        ).decodeSvgMetadata({\n          svg: contents,\n        });\n      } catch (error: any) {\n        if (error.message === \"INVALID\") {\n          throw new ImageSceneDataError(\n            t(\"alerts.imageDoesNotContainScene\"),\n            \"IMAGE_NOT_CONTAINS_SCENE_DATA\",\n          );\n        } else {\n          throw new ImageSceneDataError(t(\"alerts.cannotRestoreFromImage\"));\n        }\n      }\n    }\n  }\n  return contents;\n};\n\nexport const getMimeType = (blob: Blob | string): string => {\n  let name: string;\n  if (typeof blob === \"string\") {\n    name = blob;\n  } else {\n    if (blob.type) {\n      return blob.type;\n    }\n    name = blob.name || \"\";\n  }\n  if (/\\.(excalidraw|json)$/.test(name)) {\n    return MIME_TYPES.json;\n  } else if (/\\.png$/.test(name)) {\n    return MIME_TYPES.png;\n  } else if (/\\.jpe?g$/.test(name)) {\n    return MIME_TYPES.jpg;\n  } else if (/\\.svg$/.test(name)) {\n    return MIME_TYPES.svg;\n  }\n  return \"\";\n};\n\nexport const getFileHandleType = (handle: FileSystemHandle | null) => {\n  if (!handle) {\n    return null;\n  }\n\n  return handle.name.match(/\\.(json|excalidraw|png|svg)$/)?.[1] || null;\n};\n\nexport const isImageFileHandleType = (\n  type: string | null,\n): type is \"png\" | \"svg\" => {\n  return type === \"png\" || type === \"svg\";\n};\n\nexport const isImageFileHandle = (handle: FileSystemHandle | null) => {\n  const type = getFileHandleType(handle);\n  return type === \"png\" || type === \"svg\";\n};\n\nexport const isSupportedImageFile = (\n  blob: Blob | null | undefined,\n): blob is Blob & { type: ValueOf<typeof IMAGE_MIME_TYPES> } => {\n  const { type } = blob || {};\n  return !!type && (Object.values(IMAGE_MIME_TYPES) as string[]).includes(type);\n};\n\nexport const loadSceneOrLibraryFromBlob = async (\n  blob: Blob | File,\n  /** @see restore.localAppState */\n  localAppState: AppState | null,\n  localElements: readonly ExcalidrawElement[] | null,\n  /** FileSystemHandle. Defaults to `blob.handle` if defined, otherwise null. */\n  fileHandle?: FileSystemHandle | null,\n) => {\n  const contents = await parseFileContents(blob);\n  let data;\n  try {\n    try {\n      data = JSON.parse(contents);\n    } catch (error: any) {\n      if (isSupportedImageFile(blob)) {\n        throw new ImageSceneDataError(\n          t(\"alerts.imageDoesNotContainScene\"),\n          \"IMAGE_NOT_CONTAINS_SCENE_DATA\",\n        );\n      }\n      throw error;\n    }\n    if (isValidExcalidrawData(data)) {\n      return {\n        type: MIME_TYPES.excalidraw,\n        data: restore(\n          {\n            elements: clearElementsForExport(data.elements || []),\n            appState: {\n              theme: localAppState?.theme,\n              fileHandle: fileHandle || blob.handle || null,\n              ...cleanAppStateForExport(data.appState || {}),\n              ...(localAppState\n                ? calculateScrollCenter(data.elements || [], localAppState)\n                : {}),\n            },\n            files: data.files,\n          },\n          localAppState,\n          localElements,\n          { repairBindings: true, refreshDimensions: false },\n        ),\n      };\n    } else if (isValidLibrary(data)) {\n      return {\n        type: MIME_TYPES.excalidrawlib,\n        data,\n      };\n    }\n    throw new Error(t(\"alerts.couldNotLoadInvalidFile\"));\n  } catch (error: any) {\n    if (error instanceof ImageSceneDataError) {\n      throw error;\n    }\n    throw new Error(t(\"alerts.couldNotLoadInvalidFile\"));\n  }\n};\n\nexport const loadFromBlob = async (\n  blob: Blob,\n  /** @see restore.localAppState */\n  localAppState: AppState | null,\n  localElements: readonly ExcalidrawElement[] | null,\n  /** FileSystemHandle. Defaults to `blob.handle` if defined, otherwise null. */\n  fileHandle?: FileSystemHandle | null,\n) => {\n  const ret = await loadSceneOrLibraryFromBlob(\n    blob,\n    localAppState,\n    localElements,\n    fileHandle,\n  );\n  if (ret.type !== MIME_TYPES.excalidraw) {\n    throw new Error(t(\"alerts.couldNotLoadInvalidFile\"));\n  }\n  return ret.data;\n};\n\nexport const parseLibraryJSON = (\n  json: string,\n  defaultStatus: LibraryItem[\"status\"] = \"unpublished\",\n) => {\n  const data: ImportedLibraryData | undefined = JSON.parse(json);\n  if (!isValidLibrary(data)) {\n    throw new Error(\"Invalid library\");\n  }\n  const libraryItems = data.libraryItems || data.library;\n  return restoreLibraryItems(libraryItems, defaultStatus);\n};\n\nexport const loadLibraryFromBlob = async (\n  blob: Blob,\n  defaultStatus: LibraryItem[\"status\"] = \"unpublished\",\n) => {\n  return parseLibraryJSON(await parseFileContents(blob), defaultStatus);\n};\n\nexport const canvasToBlob = async (\n  canvas: HTMLCanvasElement | Promise<HTMLCanvasElement>,\n): Promise<Blob> => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      if (isPromiseLike(canvas)) {\n        canvas = await canvas;\n      }\n      canvas.toBlob((blob) => {\n        if (!blob) {\n          return reject(\n            new CanvasError(\n              t(\"canvasError.canvasTooBig\"),\n              \"CANVAS_POSSIBLY_TOO_BIG\",\n            ),\n          );\n        }\n        resolve(blob);\n      });\n    } catch (error: any) {\n      reject(error);\n    }\n  });\n};\n\n/** generates SHA-1 digest from supplied file (if not supported, falls back\n    to a 40-char base64 random id) */\nexport const generateIdFromFile = async (file: File): Promise<FileId> => {\n  try {\n    const hashBuffer = await window.crypto.subtle.digest(\n      \"SHA-1\",\n      await blobToArrayBuffer(file),\n    );\n    return bytesToHexString(new Uint8Array(hashBuffer)) as FileId;\n  } catch (error: any) {\n    console.error(error);\n    // length 40 to align with the HEX length of SHA-1 (which is 160 bit)\n    return nanoid(40) as FileId;\n  }\n};\n\nexport const getDataURL = async (file: Blob | File): Promise<DataURL> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const dataURL = reader.result as DataURL;\n      resolve(dataURL);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(file);\n  });\n};\n\nexport const dataURLToFile = (dataURL: DataURL, filename = \"\") => {\n  const dataIndexStart = dataURL.indexOf(\",\");\n  const byteString = atob(dataURL.slice(dataIndexStart + 1));\n  const mimeType = dataURL.slice(0, dataIndexStart).split(\":\")[1].split(\";\")[0];\n\n  const ab = new ArrayBuffer(byteString.length);\n  const ia = new Uint8Array(ab);\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n  return new File([ab], filename, { type: mimeType });\n};\n\nexport const resizeImageFile = async (\n  file: File,\n  opts: {\n    /** undefined indicates auto */\n    outputType?: typeof MIME_TYPES[\"jpg\"];\n    maxWidthOrHeight: number;\n  },\n): Promise<File> => {\n  // SVG files shouldn't a can't be resized\n  if (file.type === MIME_TYPES.svg) {\n    return file;\n  }\n\n  const [pica, imageBlobReduce] = await Promise.all([\n    import(\"pica\").then((res) => res.default),\n    // a wrapper for pica for better API\n    import(\"image-blob-reduce\").then((res) => res.default),\n  ]);\n\n  // CRA's minification settings break pica in WebWorkers, so let's disable\n  // them for now\n  // https://github.com/nodeca/image-blob-reduce/issues/21#issuecomment-757365513\n  const reduce = imageBlobReduce({\n    pica: pica({ features: [\"js\", \"wasm\"] }),\n  });\n\n  if (opts.outputType) {\n    const { outputType } = opts;\n    reduce._create_blob = function (env) {\n      return this.pica.toBlob(env.out_canvas, outputType, 0.8).then((blob) => {\n        env.out_blob = blob;\n        return env;\n      });\n    };\n  }\n\n  if (!isSupportedImageFile(file)) {\n    throw new Error(t(\"errors.unsupportedFileType\"));\n  }\n\n  return new File(\n    [await reduce.toBlob(file, { max: opts.maxWidthOrHeight })],\n    file.name,\n    {\n      type: opts.outputType || file.type,\n    },\n  );\n};\n\nexport const SVGStringToFile = (SVGString: string, filename: string = \"\") => {\n  return new File([new TextEncoder().encode(SVGString)], filename, {\n    type: MIME_TYPES.svg,\n  }) as File & { type: typeof MIME_TYPES.svg };\n};\n\nexport const ImageURLToFile = async (\n  imageUrl: string,\n  filename: string = \"\",\n): Promise<File | undefined> => {\n  let response;\n  try {\n    response = await fetch(imageUrl);\n  } catch (error: any) {\n    throw new Error(t(\"errors.failedToFetchImage\"));\n  }\n\n  if (!response.ok) {\n    throw new Error(t(\"errors.failedToFetchImage\"));\n  }\n\n  const blob = await response.blob();\n\n  if (blob.type && isSupportedImageFile(blob)) {\n    const name = filename || blob.name || \"\";\n    return new File([blob], name, { type: blob.type });\n  }\n\n  throw new Error(t(\"errors.unsupportedFileType\"));\n};\n\nexport const getFileFromEvent = async (\n  event: React.DragEvent<HTMLDivElement>,\n) => {\n  const file = event.dataTransfer.files.item(0);\n  const fileHandle = await getFileHandle(event);\n\n  return { file: file ? await normalizeFile(file) : null, fileHandle };\n};\n\nexport const getFileHandle = async (\n  event: React.DragEvent<HTMLDivElement>,\n): Promise<FileSystemHandle | null> => {\n  if (nativeFileSystemSupported) {\n    try {\n      const item = event.dataTransfer.items[0];\n      const handle: FileSystemHandle | null =\n        (await (item as any).getAsFileSystemHandle()) || null;\n\n      return handle;\n    } catch (error: any) {\n      console.warn(error.name, error.message);\n      return null;\n    }\n  }\n  return null;\n};\n\n/**\n * attempts to detect if a buffer is a valid image by checking its leading bytes\n */\nconst getActualMimeTypeFromImage = (buffer: ArrayBuffer) => {\n  let mimeType: ValueOf<Pick<typeof MIME_TYPES, \"png\" | \"jpg\" | \"gif\">> | null =\n    null;\n\n  const first8Bytes = `${[...new Uint8Array(buffer).slice(0, 8)].join(\" \")} `;\n\n  // uint8 leading bytes\n  const headerBytes = {\n    // https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n    png: \"137 80 78 71 13 10 26 10 \",\n    // https://en.wikipedia.org/wiki/JPEG#Syntax_and_structure\n    // jpg is a bit wonky. Checking the first three bytes should be enough,\n    // but may yield false positives. (https://stackoverflow.com/a/23360709/927631)\n    jpg: \"255 216 255 \",\n    // https://en.wikipedia.org/wiki/GIF#Example_GIF_file\n    gif: \"71 73 70 56 57 97 \",\n  };\n\n  if (first8Bytes === headerBytes.png) {\n    mimeType = MIME_TYPES.png;\n  } else if (first8Bytes.startsWith(headerBytes.jpg)) {\n    mimeType = MIME_TYPES.jpg;\n  } else if (first8Bytes.startsWith(headerBytes.gif)) {\n    mimeType = MIME_TYPES.gif;\n  }\n  return mimeType;\n};\n\nexport const createFile = (\n  blob: File | Blob | ArrayBuffer,\n  mimeType: ValueOf<typeof MIME_TYPES>,\n  name: string | undefined,\n) => {\n  return new File([blob], name || \"\", {\n    type: mimeType,\n  });\n};\n\n/** attempts to detect correct mimeType if none is set, or if an image\n * has an incorrect extension.\n * Note: doesn't handle missing .excalidraw/.excalidrawlib extension  */\nexport const normalizeFile = async (file: File) => {\n  if (!file.type) {\n    if (file?.name?.endsWith(\".excalidrawlib\")) {\n      file = createFile(\n        await blobToArrayBuffer(file),\n        MIME_TYPES.excalidrawlib,\n        file.name,\n      );\n    } else if (file?.name?.endsWith(\".excalidraw\")) {\n      file = createFile(\n        await blobToArrayBuffer(file),\n        MIME_TYPES.excalidraw,\n        file.name,\n      );\n    } else {\n      const buffer = await blobToArrayBuffer(file);\n      const mimeType = getActualMimeTypeFromImage(buffer);\n      if (mimeType) {\n        file = createFile(buffer, mimeType, file.name);\n      }\n    }\n    // when the file is an image, make sure the extension corresponds to the\n    // actual mimeType (this is an edge case, but happens sometime)\n  } else if (isSupportedImageFile(file)) {\n    const buffer = await blobToArrayBuffer(file);\n    const mimeType = getActualMimeTypeFromImage(buffer);\n    if (mimeType && mimeType !== file.type) {\n      file = createFile(buffer, mimeType, file.name);\n    }\n  }\n\n  return file;\n};\n\nexport const blobToArrayBuffer = (blob: Blob): Promise<ArrayBuffer> => {\n  if (\"arrayBuffer\" in blob) {\n    return blob.arrayBuffer();\n  }\n  // Safari\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      if (!event.target?.result) {\n        return reject(new Error(\"Couldn't convert blob to ArrayBuffer\"));\n      }\n      resolve(event.target.result as ArrayBuffer);\n    };\n    reader.readAsArrayBuffer(blob);\n  });\n};\n", "import { fileOpen, fileSave } from \"./filesystem\";\nimport { cleanAppStateForExport, clearAppStateForDatabase } from \"../appState\";\nimport {\n  DEFAULT_FILENAME,\n  EXPORT_DATA_TYPES,\n  EXPORT_SOURCE,\n  MIME_TYPES,\n  VERSIONS,\n} from \"../constants\";\nimport { clearElementsForDatabase, clearElementsForExport } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { AppState, BinaryFiles, LibraryItems } from \"../types\";\nimport { isImageFileHandle, loadFromBlob, normalizeFile } from \"./blob\";\n\nimport {\n  ExportedDataState,\n  ImportedDataState,\n  ExportedLibraryData,\n  ImportedLibraryData,\n} from \"./types\";\n\n/**\n * Strips out files which are only referenced by deleted elements\n */\nconst filterOutDeletedFiles = (\n  elements: readonly ExcalidrawElement[],\n  files: BinaryFiles,\n) => {\n  const nextFiles: BinaryFiles = {};\n  for (const element of elements) {\n    if (\n      !element.isDeleted &&\n      \"fileId\" in element &&\n      element.fileId &&\n      files[element.fileId]\n    ) {\n      nextFiles[element.fileId] = files[element.fileId];\n    }\n  }\n  return nextFiles;\n};\n\nexport const serializeAsJSON = (\n  elements: readonly ExcalidrawElement[],\n  appState: Partial<AppState>,\n  files: BinaryFiles,\n  type: \"local\" | \"database\",\n): string => {\n  const data: ExportedDataState = {\n    type: EXPORT_DATA_TYPES.excalidraw,\n    version: VERSIONS.excalidraw,\n    source: EXPORT_SOURCE,\n    elements:\n      type === \"local\"\n        ? clearElementsForExport(elements)\n        : clearElementsForDatabase(elements),\n    appState:\n      type === \"local\"\n        ? cleanAppStateForExport(appState)\n        : clearAppStateForDatabase(appState),\n    files:\n      type === \"local\"\n        ? filterOutDeletedFiles(elements, files)\n        : // will be stripped from JSON\n          undefined,\n  };\n\n  return JSON.stringify(data, null, 2);\n};\n\nexport const saveAsJSON = async (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  files: BinaryFiles,\n  /** filename */\n  name: string = appState.name || DEFAULT_FILENAME,\n) => {\n  const serialized = serializeAsJSON(elements, appState, files, \"local\");\n  const blob = new Blob([serialized], {\n    type: MIME_TYPES.excalidraw,\n  });\n\n  const fileHandle = await fileSave(blob, {\n    name,\n    extension: \"excalidraw\",\n    description: \"Excalidraw file\",\n    fileHandle: isImageFileHandle(appState.fileHandle)\n      ? null\n      : appState.fileHandle,\n  });\n  return { fileHandle };\n};\n\nexport const loadFromJSON = async (\n  localAppState: AppState,\n  localElements: readonly ExcalidrawElement[] | null,\n) => {\n  const file = await fileOpen({\n    description: \"Excalidraw files\",\n    // ToDo: Be over-permissive until https://bugs.webkit.org/show_bug.cgi?id=34442\n    // gets resolved. Else, iOS users cannot open `.excalidraw` files.\n    // extensions: [\"json\", \"excalidraw\", \"png\", \"svg\"],\n  });\n  return loadFromBlob(\n    await normalizeFile(file),\n    localAppState,\n    localElements,\n    file.handle,\n  );\n};\n\nexport const isValidExcalidrawData = (data?: {\n  type?: any;\n  elements?: any;\n  appState?: any;\n}): data is ImportedDataState => {\n  return (\n    data?.type === EXPORT_DATA_TYPES.excalidraw &&\n    (!data.elements ||\n      (Array.isArray(data.elements) &&\n        (!data.appState || typeof data.appState === \"object\")))\n  );\n};\n\nexport const isValidLibrary = (json: any): json is ImportedLibraryData => {\n  return (\n    typeof json === \"object\" &&\n    json &&\n    json.type === EXPORT_DATA_TYPES.excalidrawLibrary &&\n    (json.version === 1 || json.version === 2)\n  );\n};\n\nexport const serializeLibraryAsJSON = (libraryItems: LibraryItems) => {\n  const data: ExportedLibraryData = {\n    type: EXPORT_DATA_TYPES.excalidrawLibrary,\n    version: VERSIONS.excalidrawLibrary,\n    source: EXPORT_SOURCE,\n    libraryItems,\n  };\n  return JSON.stringify(data, null, 2);\n};\n\nexport const saveLibraryAsJSON = async (libraryItems: LibraryItems) => {\n  const serialized = serializeLibraryAsJSON(libraryItems);\n  await fileSave(\n    new Blob([serialized], {\n      type: MIME_TYPES.excalidrawlib,\n    }),\n    {\n      name: \"library\",\n      extension: \"excalidrawlib\",\n      description: \"Excalidraw library file\",\n    },\n  );\n};\n", "// -----------------------------------------------------------------------------\n// ExcalidrawImageElement & related helpers\n// -----------------------------------------------------------------------------\n\nimport { MIME_TYPES, SVG_NS } from \"../constants\";\nimport { t } from \"../i18n\";\nimport { AppClassProperties, DataURL, BinaryFiles } from \"../types\";\nimport { isInitializedImageElement } from \"./typeChecks\";\nimport {\n  ExcalidrawElement,\n  FileId,\n  InitializedExcalidrawImageElement,\n} from \"./types\";\n\nexport const loadHTMLImageElement = (dataURL: DataURL) => {\n  return new Promise<HTMLImageElement>((resolve, reject) => {\n    const image = new Image();\n    image.onload = () => {\n      resolve(image);\n    };\n    image.onerror = (error) => {\n      reject(error);\n    };\n    image.src = dataURL;\n  });\n};\n\n/** NOTE: updates cache even if already populated with given image. Thus,\n * you should filter out the images upstream if you want to optimize this. */\nexport const updateImageCache = async ({\n  fileIds,\n  files,\n  imageCache,\n}: {\n  fileIds: FileId[];\n  files: BinaryFiles;\n  imageCache: AppClassProperties[\"imageCache\"];\n}) => {\n  const updatedFiles = new Map<FileId, true>();\n  const erroredFiles = new Map<FileId, true>();\n\n  await Promise.all(\n    fileIds.reduce((promises, fileId) => {\n      const fileData = files[fileId as string];\n      if (fileData && !updatedFiles.has(fileId)) {\n        updatedFiles.set(fileId, true);\n        return promises.concat(\n          (async () => {\n            try {\n              if (fileData.mimeType === MIME_TYPES.binary) {\n                throw new Error(\"Only images can be added to ImageCache\");\n              }\n\n              const imagePromise = loadHTMLImageElement(fileData.dataURL);\n              const data = {\n                image: imagePromise,\n                mimeType: fileData.mimeType,\n              } as const;\n              // store the promise immediately to indicate there's an in-progress\n              // initialization\n              imageCache.set(fileId, data);\n\n              const image = await imagePromise;\n\n              imageCache.set(fileId, { ...data, image });\n            } catch (error: any) {\n              erroredFiles.set(fileId, true);\n            }\n          })(),\n        );\n      }\n      return promises;\n    }, [] as Promise<any>[]),\n  );\n\n  return {\n    imageCache,\n    /** includes errored files because they cache was updated nonetheless */\n    updatedFiles,\n    /** files that failed when creating HTMLImageElement */\n    erroredFiles,\n  };\n};\n\nexport const getInitializedImageElements = (\n  elements: readonly ExcalidrawElement[],\n) =>\n  elements.filter((element) =>\n    isInitializedImageElement(element),\n  ) as InitializedExcalidrawImageElement[];\n\nexport const isHTMLSVGElement = (node: Node | null): node is SVGElement => {\n  // lower-casing due to XML/HTML convention differences\n  // https://johnresig.com/blog/nodename-case-sensitivity\n  return node?.nodeName.toLowerCase() === \"svg\";\n};\n\nexport const normalizeSVG = async (SVGString: string) => {\n  const doc = new DOMParser().parseFromString(SVGString, MIME_TYPES.svg);\n  const svg = doc.querySelector(\"svg\");\n  const errorNode = doc.querySelector(\"parsererror\");\n  if (errorNode || !isHTMLSVGElement(svg)) {\n    throw new Error(t(\"errors.invalidSVGString\"));\n  } else {\n    if (!svg.hasAttribute(\"xmlns\")) {\n      svg.setAttribute(\"xmlns\", SVG_NS);\n    }\n\n    if (!svg.hasAttribute(\"width\") || !svg.hasAttribute(\"height\")) {\n      const viewBox = svg.getAttribute(\"viewBox\");\n      let width = svg.getAttribute(\"width\") || \"50\";\n      let height = svg.getAttribute(\"height\") || \"50\";\n      if (viewBox) {\n        const match = viewBox.match(/\\d+ +\\d+ +(\\d+) +(\\d+)/);\n        if (match) {\n          [, width, height] = match;\n        }\n      }\n      svg.setAttribute(\"width\", width);\n      svg.setAttribute(\"height\", height);\n    }\n\n    return svg.outerHTML;\n  }\n};\n", "import rough from \"roughjs/bin/rough\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawFrameLikeElement,\n  ExcalidrawTextElement,\n  NonDeletedExcalidrawElement,\n  NonDeletedSceneElementsMap,\n} from \"../element/types\";\nimport {\n  Bounds,\n  getCommonBounds,\n  getElementAbsoluteCoords,\n} from \"../element/bounds\";\nimport { renderSceneToSvg, renderStaticScene } from \"../renderer/renderScene\";\nimport {\n  arrayToMap,\n  cloneJSON,\n  distance,\n  getFontString,\n  toBrandedType,\n} from \"../utils\";\nimport { AppState, BinaryFiles } from \"../types\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  FONT_FAMILY,\n  FRAME_STYLE,\n  SVG_NS,\n  THEME_FILTER,\n} from \"../constants\";\nimport { getDefaultAppState } from \"../appState\";\nimport { serializeAsJSON } from \"../data/json\";\nimport {\n  getInitializedImageElements,\n  updateImageCache,\n} from \"../element/image\";\nimport {\n  getElementsOverlappingFrame,\n  getFrameLikeElements,\n  getFrameLikeTitle,\n  getRootElements,\n} from \"../frame\";\nimport { newTextElement } from \"../element\";\nimport { Mutable } from \"../utility-types\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport Scene from \"./Scene\";\nimport { isFrameElement, isFrameLikeElement } from \"../element/typeChecks\";\nimport { RenderableElementsMap } from \"./types\";\n\nconst SVG_EXPORT_TAG = `<!-- svg-source:excalidraw -->`;\n\n// getContainerElement and getBoundTextElement and potentially other helpers\n// depend on `Scene` which will not be available when these pure utils are\n// called outside initialized Excalidraw editor instance or even if called\n// from inside Excalidraw if the elements were never cached by Scene (e.g.\n// for library elements).\n//\n// As such, before passing the elements down, we need to initialize a custom\n// Scene instance and assign them to it.\n//\n// FIXME This is a super hacky workaround and we'll need to rewrite this soon.\nconst __createSceneForElementsHack__ = (\n  elements: readonly ExcalidrawElement[],\n) => {\n  const scene = new Scene();\n  // we can't duplicate elements to regenerate ids because we need the\n  // orig ids when embedding. So we do another hack of not mapping element\n  // ids to Scene instances so that we don't override the editor elements\n  // mapping.\n  // We still need to clone the objects themselves to regen references.\n  scene.replaceAllElements(cloneJSON(elements), false);\n  return scene;\n};\n\nconst truncateText = (element: ExcalidrawTextElement, maxWidth: number) => {\n  if (element.width <= maxWidth) {\n    return element;\n  }\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\")!;\n  ctx.font = getFontString({\n    fontFamily: element.fontFamily,\n    fontSize: element.fontSize,\n  });\n\n  let text = element.text;\n\n  const metrics = ctx.measureText(text);\n\n  if (metrics.width > maxWidth) {\n    // we iterate from the right, removing characters one by one instead\n    // of bulding the string up. This assumes that it's more likely\n    // your frame names will overflow by not that many characters\n    // (if ever), so it sohuld be faster this way.\n    for (let i = text.length; i > 0; i--) {\n      const newText = `${text.slice(0, i)}...`;\n      if (ctx.measureText(newText).width <= maxWidth) {\n        text = newText;\n        break;\n      }\n    }\n  }\n  return newElementWith(element, { text, width: maxWidth });\n};\n\n/**\n * When exporting frames, we need to render frame labels which are currently\n * being rendered in DOM when editing. Adding the labels as regular text\n * elements seems like a simple hack. In the future we'll want to move to\n * proper canvas rendering, even within editor (instead of DOM).\n */\nconst addFrameLabelsAsTextElements = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  opts: Pick<AppState, \"exportWithDarkMode\">,\n) => {\n  const nextElements: NonDeletedExcalidrawElement[] = [];\n  let frameIndex = 0;\n  let magicFrameIndex = 0;\n  for (const element of elements) {\n    if (isFrameLikeElement(element)) {\n      if (isFrameElement(element)) {\n        frameIndex++;\n      } else {\n        magicFrameIndex++;\n      }\n      let textElement: Mutable<ExcalidrawTextElement> = newTextElement({\n        x: element.x,\n        y: element.y - FRAME_STYLE.nameOffsetY,\n        fontFamily: FONT_FAMILY.Assistant,\n        fontSize: FRAME_STYLE.nameFontSize,\n        lineHeight:\n          FRAME_STYLE.nameLineHeight as ExcalidrawTextElement[\"lineHeight\"],\n        strokeColor: opts.exportWithDarkMode\n          ? FRAME_STYLE.nameColorDarkTheme\n          : FRAME_STYLE.nameColorLightTheme,\n        text: getFrameLikeTitle(\n          element,\n          isFrameElement(element) ? frameIndex : magicFrameIndex,\n        ),\n      });\n      textElement.y -= textElement.height;\n\n      textElement = truncateText(textElement, element.width);\n\n      nextElements.push(textElement);\n    }\n    nextElements.push(element);\n  }\n\n  return nextElements;\n};\n\nconst getFrameRenderingConfig = (\n  exportingFrame: ExcalidrawFrameLikeElement | null,\n  frameRendering: AppState[\"frameRendering\"] | null,\n): AppState[\"frameRendering\"] => {\n  frameRendering = frameRendering || getDefaultAppState().frameRendering;\n  return {\n    enabled: exportingFrame ? true : frameRendering.enabled,\n    outline: exportingFrame ? false : frameRendering.outline,\n    name: exportingFrame ? false : frameRendering.name,\n    clip: exportingFrame ? true : frameRendering.clip,\n  };\n};\n\nconst prepareElementsForRender = ({\n  elements,\n  exportingFrame,\n  frameRendering,\n  exportWithDarkMode,\n}: {\n  elements: readonly ExcalidrawElement[];\n  exportingFrame: ExcalidrawFrameLikeElement | null | undefined;\n  frameRendering: AppState[\"frameRendering\"];\n  exportWithDarkMode: AppState[\"exportWithDarkMode\"];\n}) => {\n  let nextElements: readonly ExcalidrawElement[];\n\n  if (exportingFrame) {\n    nextElements = getElementsOverlappingFrame(elements, exportingFrame);\n  } else if (frameRendering.enabled && frameRendering.name) {\n    nextElements = addFrameLabelsAsTextElements(elements, {\n      exportWithDarkMode,\n    });\n  } else {\n    nextElements = elements;\n  }\n\n  return nextElements;\n};\n\nexport const exportToCanvas = async (\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: AppState,\n  files: BinaryFiles,\n  {\n    exportBackground,\n    exportPadding = DEFAULT_EXPORT_PADDING,\n    viewBackgroundColor,\n    exportingFrame,\n  }: {\n    exportBackground: boolean;\n    exportPadding?: number;\n    viewBackgroundColor: string;\n    exportingFrame?: ExcalidrawFrameLikeElement | null;\n  },\n  createCanvas: (\n    width: number,\n    height: number,\n  ) => { canvas: HTMLCanvasElement; scale: number } = (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width * appState.exportScale;\n    canvas.height = height * appState.exportScale;\n    return { canvas, scale: appState.exportScale };\n  },\n) => {\n  const tempScene = __createSceneForElementsHack__(elements);\n  elements = tempScene.getNonDeletedElements();\n\n  const frameRendering = getFrameRenderingConfig(\n    exportingFrame ?? null,\n    appState.frameRendering ?? null,\n  );\n\n  const elementsForRender = prepareElementsForRender({\n    elements,\n    exportingFrame,\n    exportWithDarkMode: appState.exportWithDarkMode,\n    frameRendering,\n  });\n\n  if (exportingFrame) {\n    exportPadding = 0;\n  }\n\n  const [minX, minY, width, height] = getCanvasSize(\n    exportingFrame ? [exportingFrame] : getRootElements(elementsForRender),\n    exportPadding,\n  );\n\n  const { canvas, scale = 1 } = createCanvas(width, height);\n\n  const defaultAppState = getDefaultAppState();\n\n  const { imageCache } = await updateImageCache({\n    imageCache: new Map(),\n    fileIds: getInitializedImageElements(elementsForRender).map(\n      (element) => element.fileId,\n    ),\n    files,\n  });\n\n  renderStaticScene({\n    canvas,\n    rc: rough.canvas(canvas),\n    elementsMap: toBrandedType<RenderableElementsMap>(\n      arrayToMap(elementsForRender),\n    ),\n    allElementsMap: toBrandedType<NonDeletedSceneElementsMap>(\n      arrayToMap(elements),\n    ),\n    visibleElements: elementsForRender,\n    scale,\n    appState: {\n      ...appState,\n      frameRendering,\n      viewBackgroundColor: exportBackground ? viewBackgroundColor : null,\n      scrollX: -minX + exportPadding,\n      scrollY: -minY + exportPadding,\n      zoom: defaultAppState.zoom,\n      shouldCacheIgnoreZoom: false,\n      theme: appState.exportWithDarkMode ? \"dark\" : \"light\",\n    },\n    renderConfig: {\n      canvasBackgroundColor: viewBackgroundColor,\n      imageCache,\n      renderGrid: false,\n      isExporting: true,\n      // empty disables embeddable rendering\n      embedsValidationStatus: new Map(),\n      elementsPendingErasure: new Set(),\n    },\n  });\n\n  tempScene.destroy();\n\n  return canvas;\n};\n\nexport const exportToSvg = async (\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: {\n    exportBackground: boolean;\n    exportPadding?: number;\n    exportScale?: number;\n    viewBackgroundColor: string;\n    exportWithDarkMode?: boolean;\n    exportEmbedScene?: boolean;\n    frameRendering?: AppState[\"frameRendering\"];\n  },\n  files: BinaryFiles | null,\n  opts?: {\n    /**\n     * if true, all embeddables passed in will be rendered when possible.\n     */\n    renderEmbeddables?: boolean;\n    exportingFrame?: ExcalidrawFrameLikeElement | null;\n  },\n): Promise<SVGSVGElement> => {\n  const tempScene = __createSceneForElementsHack__(elements);\n  elements = tempScene.getNonDeletedElements();\n\n  const frameRendering = getFrameRenderingConfig(\n    opts?.exportingFrame ?? null,\n    appState.frameRendering ?? null,\n  );\n\n  let {\n    exportPadding = DEFAULT_EXPORT_PADDING,\n    exportWithDarkMode = false,\n    viewBackgroundColor,\n    exportScale = 1,\n    exportEmbedScene,\n  } = appState;\n\n  const { exportingFrame = null } = opts || {};\n\n  const elementsForRender = prepareElementsForRender({\n    elements,\n    exportingFrame,\n    exportWithDarkMode,\n    frameRendering,\n  });\n\n  if (exportingFrame) {\n    exportPadding = 0;\n  }\n\n  let metadata = \"\";\n\n  // we need to serialize the \"original\" elements before we put them through\n  // the tempScene hack which duplicates and regenerates ids\n  if (exportEmbedScene) {\n    try {\n      metadata = await (\n        await import(\"../data/image\")\n      ).encodeSvgMetadata({\n        // when embedding scene, we want to embed the origionally supplied\n        // elements which don't contain the temp frame labels.\n        // But it also requires that the exportToSvg is being supplied with\n        // only the elements that we're exporting, and no extra.\n        text: serializeAsJSON(elements, appState, files || {}, \"local\"),\n      });\n    } catch (error: any) {\n      console.error(error);\n    }\n  }\n\n  const [minX, minY, width, height] = getCanvasSize(\n    exportingFrame ? [exportingFrame] : getRootElements(elementsForRender),\n    exportPadding,\n  );\n\n  // initialize SVG root\n  const svgRoot = document.createElementNS(SVG_NS, \"svg\");\n  svgRoot.setAttribute(\"version\", \"1.1\");\n  svgRoot.setAttribute(\"xmlns\", SVG_NS);\n  svgRoot.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n  svgRoot.setAttribute(\"width\", `${width * exportScale}`);\n  svgRoot.setAttribute(\"height\", `${height * exportScale}`);\n  if (exportWithDarkMode) {\n    svgRoot.setAttribute(\"filter\", THEME_FILTER);\n  }\n\n  let assetPath = \"https://excalidraw.com/\";\n  // Asset path needs to be determined only when using package\n  if (import.meta.env.VITE_IS_EXCALIDRAW_NPM_PACKAGE) {\n    assetPath =\n      window.EXCALIDRAW_ASSET_PATH ||\n      `https://unpkg.com/${import.meta.env.VITE_PKG_NAME}@${\n        import.meta.env.PKG_VERSION\n      }`;\n\n    if (assetPath?.startsWith(\"/\")) {\n      assetPath = assetPath.replace(\"/\", `${window.location.origin}/`);\n    }\n    assetPath = `${assetPath}/dist/excalidraw-assets/`;\n  }\n\n  const offsetX = -minX + exportPadding;\n  const offsetY = -minY + exportPadding;\n\n  const frameElements = getFrameLikeElements(elements);\n\n  let exportingFrameClipPath = \"\";\n  const elementsMap = arrayToMap(elements);\n  for (const frame of frameElements) {\n    const [x1, y1, x2, y2] = getElementAbsoluteCoords(frame, elementsMap);\n    const cx = (x2 - x1) / 2 - (frame.x - x1);\n    const cy = (y2 - y1) / 2 - (frame.y - y1);\n\n    exportingFrameClipPath += `<clipPath id=${frame.id}>\n            <rect transform=\"translate(${frame.x + offsetX} ${\n      frame.y + offsetY\n    }) rotate(${frame.angle} ${cx} ${cy})\"\n          width=\"${frame.width}\"\n          height=\"${frame.height}\"\n          >\n          </rect>\n        </clipPath>`;\n  }\n\n  svgRoot.innerHTML = `\n  ${SVG_EXPORT_TAG}\n  ${metadata}\n  <defs>\n    <style class=\"style-fonts\">\n      @font-face {\n        font-family: \"Virgil\";\n        src: url(\"${assetPath}Virgil.woff2\");\n      }\n      @font-face {\n        font-family: \"Cascadia\";\n        src: url(\"${assetPath}Cascadia.woff2\");\n      }\n      @font-face {\n        font-family: \"Assistant\";\n        src: url(\"${assetPath}Assistant-Regular.woff2\");\n      }\n    </style>\n    ${exportingFrameClipPath}\n  </defs>\n  `;\n\n  // render background rect\n  if (appState.exportBackground && viewBackgroundColor) {\n    const rect = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"rect\");\n    rect.setAttribute(\"x\", \"0\");\n    rect.setAttribute(\"y\", \"0\");\n    rect.setAttribute(\"width\", `${width}`);\n    rect.setAttribute(\"height\", `${height}`);\n    rect.setAttribute(\"fill\", viewBackgroundColor);\n    svgRoot.appendChild(rect);\n  }\n\n  const rsvg = rough.svg(svgRoot);\n\n  const renderEmbeddables = opts?.renderEmbeddables ?? false;\n\n  renderSceneToSvg(\n    elementsForRender,\n    toBrandedType<RenderableElementsMap>(arrayToMap(elementsForRender)),\n    rsvg,\n    svgRoot,\n    files || {},\n    {\n      offsetX,\n      offsetY,\n      isExporting: true,\n      exportWithDarkMode,\n      renderEmbeddables,\n      frameRendering,\n      canvasBackgroundColor: viewBackgroundColor,\n      embedsValidationStatus: renderEmbeddables\n        ? new Map(\n            elementsForRender\n              .filter((element) => isFrameLikeElement(element))\n              .map((element) => [element.id, true]),\n          )\n        : new Map(),\n    },\n  );\n\n  tempScene.destroy();\n\n  return svgRoot;\n};\n\n// calculate smallest area to fit the contents in\nconst getCanvasSize = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  exportPadding: number,\n): Bounds => {\n  const [minX, minY, maxX, maxY] = getCommonBounds(elements);\n  const width = distance(minX, maxX) + exportPadding * 2;\n  const height = distance(minY, maxY) + exportPadding * 2;\n\n  return [minX, minY, width, height];\n};\n\nexport const getExportSize = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  exportPadding: number,\n  scale: number,\n): [number, number] => {\n  const [, , width, height] = getCanvasSize(elements, exportPadding).map(\n    (dimension) => Math.trunc(dimension * scale),\n  );\n\n  return [width, height];\n};\n", "import {\n  COLOR_PALETTE,\n  DEFAULT_CHART_COLOR_INDEX,\n  getAllColorsSpecificShade,\n} from \"./colors\";\nimport {\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  VERTICAL_ALIGN,\n} from \"./constants\";\nimport { newElement, newLinearElement, newTextElement } from \"./element\";\nimport { NonDeletedExcalidrawElement } from \"./element/types\";\nimport { randomId } from \"./random\";\n\nexport type ChartElements = readonly NonDeletedExcalidrawElement[];\n\nconst BAR_WIDTH = 32;\nconst BAR_GAP = 12;\nconst BAR_HEIGHT = 256;\nconst GRID_OPACITY = 50;\n\nexport interface Spreadsheet {\n  title: string | null;\n  labels: string[] | null;\n  values: number[];\n}\n\nexport const NOT_SPREADSHEET = \"NOT_SPREADSHEET\";\nexport const VALID_SPREADSHEET = \"VALID_SPREADSHEET\";\n\ntype ParseSpreadsheetResult =\n  | { type: typeof NOT_SPREADSHEET; reason: string }\n  | { type: typeof VALID_SPREADSHEET; spreadsheet: Spreadsheet };\n\n/**\n * @private exported for testing\n */\nexport const tryParseNumber = (s: string): number | null => {\n  const match = /^([-+]?)[$\u20AC\u00A3\u00A5\u20A9]?([-+]?)([\\d.,]+)[%]?$/.exec(s);\n  if (!match) {\n    return null;\n  }\n  return parseFloat(`${(match[1] || match[2]) + match[3]}`.replace(/,/g, \"\"));\n};\n\nconst isNumericColumn = (lines: string[][], columnIndex: number) =>\n  lines.slice(1).every((line) => tryParseNumber(line[columnIndex]) !== null);\n\n/**\n * @private exported for testing\n */\nexport const tryParseCells = (cells: string[][]): ParseSpreadsheetResult => {\n  const numCols = cells[0].length;\n\n  if (numCols > 2) {\n    return { type: NOT_SPREADSHEET, reason: \"More than 2 columns\" };\n  }\n\n  if (numCols === 1) {\n    if (!isNumericColumn(cells, 0)) {\n      return { type: NOT_SPREADSHEET, reason: \"Value is not numeric\" };\n    }\n\n    const hasHeader = tryParseNumber(cells[0][0]) === null;\n    const values = (hasHeader ? cells.slice(1) : cells).map((line) =>\n      tryParseNumber(line[0]),\n    );\n\n    if (values.length < 2) {\n      return { type: NOT_SPREADSHEET, reason: \"Less than two rows\" };\n    }\n\n    return {\n      type: VALID_SPREADSHEET,\n      spreadsheet: {\n        title: hasHeader ? cells[0][0] : null,\n        labels: null,\n        values: values as number[],\n      },\n    };\n  }\n\n  const labelColumnNumeric = isNumericColumn(cells, 0);\n  const valueColumnNumeric = isNumericColumn(cells, 1);\n\n  if (!labelColumnNumeric && !valueColumnNumeric) {\n    return { type: NOT_SPREADSHEET, reason: \"Value is not numeric\" };\n  }\n\n  const [labelColumnIndex, valueColumnIndex] = valueColumnNumeric\n    ? [0, 1]\n    : [1, 0];\n  const hasHeader = tryParseNumber(cells[0][valueColumnIndex]) === null;\n  const rows = hasHeader ? cells.slice(1) : cells;\n\n  if (rows.length < 2) {\n    return { type: NOT_SPREADSHEET, reason: \"Less than 2 rows\" };\n  }\n\n  return {\n    type: VALID_SPREADSHEET,\n    spreadsheet: {\n      title: hasHeader ? cells[0][valueColumnIndex] : null,\n      labels: rows.map((row) => row[labelColumnIndex]),\n      values: rows.map((row) => tryParseNumber(row[valueColumnIndex])!),\n    },\n  };\n};\n\nconst transposeCells = (cells: string[][]) => {\n  const nextCells: string[][] = [];\n  for (let col = 0; col < cells[0].length; col++) {\n    const nextCellRow: string[] = [];\n    for (let row = 0; row < cells.length; row++) {\n      nextCellRow.push(cells[row][col]);\n    }\n    nextCells.push(nextCellRow);\n  }\n  return nextCells;\n};\n\nexport const tryParseSpreadsheet = (text: string): ParseSpreadsheetResult => {\n  // Copy/paste from excel, spreadsheets, tsv, csv.\n  // For now we only accept 2 columns with an optional header\n\n  // Check for tab separated values\n  let lines = text\n    .trim()\n    .split(\"\\n\")\n    .map((line) => line.trim().split(\"\\t\"));\n\n  // Check for comma separated files\n  if (lines.length && lines[0].length !== 2) {\n    lines = text\n      .trim()\n      .split(\"\\n\")\n      .map((line) => line.trim().split(\",\"));\n  }\n\n  if (lines.length === 0) {\n    return { type: NOT_SPREADSHEET, reason: \"No values\" };\n  }\n\n  const numColsFirstLine = lines[0].length;\n  const isSpreadsheet = lines.every((line) => line.length === numColsFirstLine);\n\n  if (!isSpreadsheet) {\n    return {\n      type: NOT_SPREADSHEET,\n      reason: \"All rows don't have same number of columns\",\n    };\n  }\n\n  const result = tryParseCells(lines);\n  if (result.type !== VALID_SPREADSHEET) {\n    const transposedResults = tryParseCells(transposeCells(lines));\n    if (transposedResults.type === VALID_SPREADSHEET) {\n      return transposedResults;\n    }\n  }\n  return result;\n};\n\nconst bgColors = getAllColorsSpecificShade(DEFAULT_CHART_COLOR_INDEX);\n\n// Put all the common properties here so when the whole chart is selected\n// the properties dialog shows the correct selected values\nconst commonProps = {\n  fillStyle: \"hachure\",\n  fontFamily: DEFAULT_FONT_FAMILY,\n  fontSize: DEFAULT_FONT_SIZE,\n  opacity: 100,\n  roughness: 1,\n  strokeColor: COLOR_PALETTE.black,\n  roundness: null,\n  strokeStyle: \"solid\",\n  strokeWidth: 1,\n  verticalAlign: VERTICAL_ALIGN.MIDDLE,\n  locked: false,\n} as const;\n\nconst getChartDimensions = (spreadsheet: Spreadsheet) => {\n  const chartWidth =\n    (BAR_WIDTH + BAR_GAP) * spreadsheet.values.length + BAR_GAP;\n  const chartHeight = BAR_HEIGHT + BAR_GAP * 2;\n  return { chartWidth, chartHeight };\n};\n\nconst chartXLabels = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n  groupId: string,\n  backgroundColor: string,\n): ChartElements => {\n  return (\n    spreadsheet.labels?.map((label, index) => {\n      return newTextElement({\n        groupIds: [groupId],\n        backgroundColor,\n        ...commonProps,\n        text: label.length > 8 ? `${label.slice(0, 5)}...` : label,\n        x: x + index * (BAR_WIDTH + BAR_GAP) + BAR_GAP * 2,\n        y: y + BAR_GAP / 2,\n        width: BAR_WIDTH,\n        angle: 5.87,\n        fontSize: 16,\n        textAlign: \"center\",\n        verticalAlign: \"top\",\n      });\n    }) || []\n  );\n};\n\nconst chartYLabels = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n  groupId: string,\n  backgroundColor: string,\n): ChartElements => {\n  const minYLabel = newTextElement({\n    groupIds: [groupId],\n    backgroundColor,\n    ...commonProps,\n    x: x - BAR_GAP,\n    y: y - BAR_GAP,\n    text: \"0\",\n    textAlign: \"right\",\n  });\n\n  const maxYLabel = newTextElement({\n    groupIds: [groupId],\n    backgroundColor,\n    ...commonProps,\n    x: x - BAR_GAP,\n    y: y - BAR_HEIGHT - minYLabel.height / 2,\n    text: Math.max(...spreadsheet.values).toLocaleString(),\n    textAlign: \"right\",\n  });\n\n  return [minYLabel, maxYLabel];\n};\n\nconst chartLines = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n  groupId: string,\n  backgroundColor: string,\n): ChartElements => {\n  const { chartWidth, chartHeight } = getChartDimensions(spreadsheet);\n  const xLine = newLinearElement({\n    backgroundColor,\n    groupIds: [groupId],\n    ...commonProps,\n    type: \"line\",\n    x,\n    y,\n    startArrowhead: null,\n    endArrowhead: null,\n    width: chartWidth,\n    points: [\n      [0, 0],\n      [chartWidth, 0],\n    ],\n  });\n\n  const yLine = newLinearElement({\n    backgroundColor,\n    groupIds: [groupId],\n    ...commonProps,\n    type: \"line\",\n    x,\n    y,\n    startArrowhead: null,\n    endArrowhead: null,\n    height: chartHeight,\n    points: [\n      [0, 0],\n      [0, -chartHeight],\n    ],\n  });\n\n  const maxLine = newLinearElement({\n    backgroundColor,\n    groupIds: [groupId],\n    ...commonProps,\n    type: \"line\",\n    x,\n    y: y - BAR_HEIGHT - BAR_GAP,\n    startArrowhead: null,\n    endArrowhead: null,\n    strokeStyle: \"dotted\",\n    width: chartWidth,\n    opacity: GRID_OPACITY,\n    points: [\n      [0, 0],\n      [chartWidth, 0],\n    ],\n  });\n\n  return [xLine, yLine, maxLine];\n};\n\n// For the maths behind it https://excalidraw.com/#json=6320864370884608,O_5xfD-Agh32tytHpRJx1g\nconst chartBaseElements = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n  groupId: string,\n  backgroundColor: string,\n  debug?: boolean,\n): ChartElements => {\n  const { chartWidth, chartHeight } = getChartDimensions(spreadsheet);\n\n  const title = spreadsheet.title\n    ? newTextElement({\n        backgroundColor,\n        groupIds: [groupId],\n        ...commonProps,\n        text: spreadsheet.title,\n        x: x + chartWidth / 2,\n        y: y - BAR_HEIGHT - BAR_GAP * 2 - DEFAULT_FONT_SIZE,\n        roundness: null,\n        textAlign: \"center\",\n      })\n    : null;\n\n  const debugRect = debug\n    ? newElement({\n        backgroundColor,\n        groupIds: [groupId],\n        ...commonProps,\n        type: \"rectangle\",\n        x,\n        y: y - chartHeight,\n        width: chartWidth,\n        height: chartHeight,\n        strokeColor: COLOR_PALETTE.black,\n        fillStyle: \"solid\",\n        opacity: 6,\n      })\n    : null;\n\n  return [\n    ...(debugRect ? [debugRect] : []),\n    ...(title ? [title] : []),\n    ...chartXLabels(spreadsheet, x, y, groupId, backgroundColor),\n    ...chartYLabels(spreadsheet, x, y, groupId, backgroundColor),\n    ...chartLines(spreadsheet, x, y, groupId, backgroundColor),\n  ];\n};\n\nconst chartTypeBar = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n): ChartElements => {\n  const max = Math.max(...spreadsheet.values);\n  const groupId = randomId();\n  const backgroundColor = bgColors[Math.floor(Math.random() * bgColors.length)];\n\n  const bars = spreadsheet.values.map((value, index) => {\n    const barHeight = (value / max) * BAR_HEIGHT;\n    return newElement({\n      backgroundColor,\n      groupIds: [groupId],\n      ...commonProps,\n      type: \"rectangle\",\n      x: x + index * (BAR_WIDTH + BAR_GAP) + BAR_GAP,\n      y: y - barHeight - BAR_GAP,\n      width: BAR_WIDTH,\n      height: barHeight,\n    });\n  });\n\n  return [\n    ...bars,\n    ...chartBaseElements(\n      spreadsheet,\n      x,\n      y,\n      groupId,\n      backgroundColor,\n      import.meta.env.DEV,\n    ),\n  ];\n};\n\nconst chartTypeLine = (\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n): ChartElements => {\n  const max = Math.max(...spreadsheet.values);\n  const groupId = randomId();\n  const backgroundColor = bgColors[Math.floor(Math.random() * bgColors.length)];\n\n  let index = 0;\n  const points = [];\n  for (const value of spreadsheet.values) {\n    const cx = index * (BAR_WIDTH + BAR_GAP);\n    const cy = -(value / max) * BAR_HEIGHT;\n    points.push([cx, cy]);\n    index++;\n  }\n\n  const maxX = Math.max(...points.map((element) => element[0]));\n  const maxY = Math.max(...points.map((element) => element[1]));\n  const minX = Math.min(...points.map((element) => element[0]));\n  const minY = Math.min(...points.map((element) => element[1]));\n\n  const line = newLinearElement({\n    backgroundColor,\n    groupIds: [groupId],\n    ...commonProps,\n    type: \"line\",\n    x: x + BAR_GAP + BAR_WIDTH / 2,\n    y: y - BAR_GAP,\n    startArrowhead: null,\n    endArrowhead: null,\n    height: maxY - minY,\n    width: maxX - minX,\n    strokeWidth: 2,\n    points: points as any,\n  });\n\n  const dots = spreadsheet.values.map((value, index) => {\n    const cx = index * (BAR_WIDTH + BAR_GAP) + BAR_GAP / 2;\n    const cy = -(value / max) * BAR_HEIGHT + BAR_GAP / 2;\n    return newElement({\n      backgroundColor,\n      groupIds: [groupId],\n      ...commonProps,\n      fillStyle: \"solid\",\n      strokeWidth: 2,\n      type: \"ellipse\",\n      x: x + cx + BAR_WIDTH / 2,\n      y: y + cy - BAR_GAP * 2,\n      width: BAR_GAP,\n      height: BAR_GAP,\n    });\n  });\n\n  const lines = spreadsheet.values.map((value, index) => {\n    const cx = index * (BAR_WIDTH + BAR_GAP) + BAR_GAP / 2;\n    const cy = (value / max) * BAR_HEIGHT + BAR_GAP / 2 + BAR_GAP;\n    return newLinearElement({\n      backgroundColor,\n      groupIds: [groupId],\n      ...commonProps,\n      type: \"line\",\n      x: x + cx + BAR_WIDTH / 2 + BAR_GAP / 2,\n      y: y - cy,\n      startArrowhead: null,\n      endArrowhead: null,\n      height: cy,\n      strokeStyle: \"dotted\",\n      opacity: GRID_OPACITY,\n      points: [\n        [0, 0],\n        [0, cy],\n      ],\n    });\n  });\n\n  return [\n    ...chartBaseElements(\n      spreadsheet,\n      x,\n      y,\n      groupId,\n      backgroundColor,\n      import.meta.env.DEV,\n    ),\n    line,\n    ...lines,\n    ...dots,\n  ];\n};\n\nexport const renderSpreadsheet = (\n  chartType: string,\n  spreadsheet: Spreadsheet,\n  x: number,\n  y: number,\n): ChartElements => {\n  if (chartType === \"line\") {\n    return chartTypeLine(spreadsheet, x, y);\n  }\n  return chartTypeBar(spreadsheet, x, y);\n};\n", "import {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n} from \"./element/types\";\nimport { BinaryFiles } from \"./types\";\nimport { tryParseSpreadsheet, Spreadsheet, VALID_SPREADSHEET } from \"./charts\";\nimport {\n  ALLOWED_PASTE_MIME_TYPES,\n  EXPORT_DATA_TYPES,\n  MIME_TYPES,\n} from \"./constants\";\nimport {\n  isFrameLikeElement,\n  isInitializedImageElement,\n} from \"./element/typeChecks\";\nimport { deepCopyElement } from \"./element/newElement\";\nimport { mutateElement } from \"./element/mutateElement\";\nimport { getContainingFrame } from \"./frame\";\nimport { isMemberOf, isPromiseLike } from \"./utils\";\nimport { t } from \"./i18n\";\n\ntype ElementsClipboard = {\n  type: typeof EXPORT_DATA_TYPES.excalidrawClipboard;\n  elements: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles | undefined;\n};\n\nexport type PastedMixedContent = { type: \"text\" | \"imageUrl\"; value: string }[];\n\nexport interface ClipboardData {\n  spreadsheet?: Spreadsheet;\n  elements?: readonly ExcalidrawElement[];\n  files?: BinaryFiles;\n  text?: string;\n  mixedContent?: PastedMixedContent;\n  errorMessage?: string;\n  programmaticAPI?: boolean;\n}\n\ntype AllowedPasteMimeTypes = typeof ALLOWED_PASTE_MIME_TYPES[number];\n\ntype ParsedClipboardEvent =\n  | { type: \"text\"; value: string }\n  | { type: \"mixedContent\"; value: PastedMixedContent };\n\nexport const probablySupportsClipboardReadText =\n  \"clipboard\" in navigator && \"readText\" in navigator.clipboard;\n\nexport const probablySupportsClipboardWriteText =\n  \"clipboard\" in navigator && \"writeText\" in navigator.clipboard;\n\nexport const probablySupportsClipboardBlob =\n  \"clipboard\" in navigator &&\n  \"write\" in navigator.clipboard &&\n  \"ClipboardItem\" in window &&\n  \"toBlob\" in HTMLCanvasElement.prototype;\n\nconst clipboardContainsElements = (\n  contents: any,\n): contents is { elements: ExcalidrawElement[]; files?: BinaryFiles } => {\n  if (\n    [\n      EXPORT_DATA_TYPES.excalidraw,\n      EXPORT_DATA_TYPES.excalidrawClipboard,\n      EXPORT_DATA_TYPES.excalidrawClipboardWithAPI,\n    ].includes(contents?.type) &&\n    Array.isArray(contents.elements)\n  ) {\n    return true;\n  }\n  return false;\n};\n\nexport const createPasteEvent = ({\n  types,\n  files,\n}: {\n  types?: { [key in AllowedPasteMimeTypes]?: string };\n  files?: File[];\n}) => {\n  if (!types && !files) {\n    console.warn(\"createPasteEvent: no types or files provided\");\n  }\n\n  const event = new ClipboardEvent(\"paste\", {\n    clipboardData: new DataTransfer(),\n  });\n\n  if (types) {\n    for (const [type, value] of Object.entries(types)) {\n      try {\n        event.clipboardData?.setData(type, value);\n        if (event.clipboardData?.getData(type) !== value) {\n          throw new Error(`Failed to set \"${type}\" as clipboardData item`);\n        }\n      } catch (error: any) {\n        throw new Error(error.message);\n      }\n    }\n  }\n\n  if (files) {\n    let idx = -1;\n    for (const file of files) {\n      idx++;\n      try {\n        event.clipboardData?.items.add(file);\n        if (event.clipboardData?.files[idx] !== file) {\n          throw new Error(\n            `Failed to set file \"${file.name}\" as clipboardData item`,\n          );\n        }\n      } catch (error: any) {\n        throw new Error(error.message);\n      }\n    }\n  }\n\n  return event;\n};\n\nexport const serializeAsClipboardJSON = ({\n  elements,\n  files,\n}: {\n  elements: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles | null;\n}) => {\n  const framesToCopy = new Set(\n    elements.filter((element) => isFrameLikeElement(element)),\n  );\n  let foundFile = false;\n\n  const _files = elements.reduce((acc, element) => {\n    if (isInitializedImageElement(element)) {\n      foundFile = true;\n      if (files && files[element.fileId]) {\n        acc[element.fileId] = files[element.fileId];\n      }\n    }\n    return acc;\n  }, {} as BinaryFiles);\n\n  if (foundFile && !files) {\n    console.warn(\n      \"copyToClipboard: attempting to file element(s) without providing associated `files` object.\",\n    );\n  }\n\n  // select bound text elements when copying\n  const contents: ElementsClipboard = {\n    type: EXPORT_DATA_TYPES.excalidrawClipboard,\n    elements: elements.map((element) => {\n      if (\n        getContainingFrame(element) &&\n        !framesToCopy.has(getContainingFrame(element)!)\n      ) {\n        const copiedElement = deepCopyElement(element);\n        mutateElement(copiedElement, {\n          frameId: null,\n        });\n        return copiedElement;\n      }\n\n      return element;\n    }),\n    files: files ? _files : undefined,\n  };\n\n  return JSON.stringify(contents);\n};\n\nexport const copyToClipboard = async (\n  elements: readonly NonDeletedExcalidrawElement[],\n  files: BinaryFiles | null,\n  /** supply if available to make the operation more certain to succeed */\n  clipboardEvent?: ClipboardEvent | null,\n) => {\n  await copyTextToSystemClipboard(\n    serializeAsClipboardJSON({ elements, files }),\n    clipboardEvent,\n  );\n};\n\nconst parsePotentialSpreadsheet = (\n  text: string,\n): { spreadsheet: Spreadsheet } | { errorMessage: string } | null => {\n  const result = tryParseSpreadsheet(text);\n  if (result.type === VALID_SPREADSHEET) {\n    return { spreadsheet: result.spreadsheet };\n  }\n  return null;\n};\n\n/** internal, specific to parsing paste events. Do not reuse. */\nfunction parseHTMLTree(el: ChildNode) {\n  let result: PastedMixedContent = [];\n  for (const node of el.childNodes) {\n    if (node.nodeType === 3) {\n      const text = node.textContent?.trim();\n      if (text) {\n        result.push({ type: \"text\", value: text });\n      }\n    } else if (node instanceof HTMLImageElement) {\n      const url = node.getAttribute(\"src\");\n      if (url && url.startsWith(\"http\")) {\n        result.push({ type: \"imageUrl\", value: url });\n      }\n    } else {\n      result = result.concat(parseHTMLTree(node));\n    }\n  }\n  return result;\n}\n\nconst maybeParseHTMLPaste = (\n  event: ClipboardEvent,\n): { type: \"mixedContent\"; value: PastedMixedContent } | null => {\n  const html = event.clipboardData?.getData(\"text/html\");\n\n  if (!html) {\n    return null;\n  }\n\n  try {\n    const doc = new DOMParser().parseFromString(html, \"text/html\");\n\n    const content = parseHTMLTree(doc.body);\n\n    if (content.length) {\n      return { type: \"mixedContent\", value: content };\n    }\n  } catch (error: any) {\n    console.error(`error in parseHTMLFromPaste: ${error.message}`);\n  }\n\n  return null;\n};\n\nexport const readSystemClipboard = async () => {\n  const types: { [key in AllowedPasteMimeTypes]?: string } = {};\n\n  try {\n    if (navigator.clipboard?.readText) {\n      return { \"text/plain\": await navigator.clipboard?.readText() };\n    }\n  } catch (error: any) {\n    // @ts-ignore\n    if (navigator.clipboard?.read) {\n      console.warn(\n        `navigator.clipboard.readText() failed (${error.message}). Failling back to navigator.clipboard.read()`,\n      );\n    } else {\n      throw error;\n    }\n  }\n\n  let clipboardItems: ClipboardItems;\n\n  try {\n    clipboardItems = await navigator.clipboard?.read();\n  } catch (error: any) {\n    if (error.name === \"DataError\") {\n      console.warn(\n        `navigator.clipboard.read() error, clipboard is probably empty: ${error.message}`,\n      );\n      return types;\n    }\n    throw error;\n  }\n\n  for (const item of clipboardItems) {\n    for (const type of item.types) {\n      if (!isMemberOf(ALLOWED_PASTE_MIME_TYPES, type)) {\n        continue;\n      }\n      try {\n        types[type] = await (await item.getType(type)).text();\n      } catch (error: any) {\n        console.warn(\n          `Cannot retrieve ${type} from clipboardItem: ${error.message}`,\n        );\n      }\n    }\n  }\n\n  if (Object.keys(types).length === 0) {\n    console.warn(\"No clipboard data found from clipboard.read().\");\n    return types;\n  }\n\n  return types;\n};\n\n/**\n * Parses \"paste\" ClipboardEvent.\n */\nconst parseClipboardEvent = async (\n  event: ClipboardEvent,\n  isPlainPaste = false,\n): Promise<ParsedClipboardEvent> => {\n  try {\n    const mixedContent = !isPlainPaste && event && maybeParseHTMLPaste(event);\n\n    if (mixedContent) {\n      if (mixedContent.value.every((item) => item.type === \"text\")) {\n        return {\n          type: \"text\",\n          value:\n            event.clipboardData?.getData(\"text/plain\") ||\n            mixedContent.value\n              .map((item) => item.value)\n              .join(\"\\n\")\n              .trim(),\n        };\n      }\n\n      return mixedContent;\n    }\n\n    const text = event.clipboardData?.getData(\"text/plain\");\n\n    return { type: \"text\", value: (text || \"\").trim() };\n  } catch {\n    return { type: \"text\", value: \"\" };\n  }\n};\n\n/**\n * Attempts to parse clipboard. Prefers system clipboard.\n */\nexport const parseClipboard = async (\n  event: ClipboardEvent,\n  isPlainPaste = false,\n): Promise<ClipboardData> => {\n  const parsedEventData = await parseClipboardEvent(event, isPlainPaste);\n\n  if (parsedEventData.type === \"mixedContent\") {\n    return {\n      mixedContent: parsedEventData.value,\n    };\n  }\n\n  try {\n    // if system clipboard contains spreadsheet, use it even though it's\n    // technically possible it's staler than in-app clipboard\n    const spreadsheetResult =\n      !isPlainPaste && parsePotentialSpreadsheet(parsedEventData.value);\n\n    if (spreadsheetResult) {\n      return spreadsheetResult;\n    }\n  } catch (error: any) {\n    console.error(error);\n  }\n\n  try {\n    const systemClipboardData = JSON.parse(parsedEventData.value);\n    const programmaticAPI =\n      systemClipboardData.type === EXPORT_DATA_TYPES.excalidrawClipboardWithAPI;\n    if (clipboardContainsElements(systemClipboardData)) {\n      return {\n        elements: systemClipboardData.elements,\n        files: systemClipboardData.files,\n        text: isPlainPaste\n          ? JSON.stringify(systemClipboardData.elements, null, 2)\n          : undefined,\n        programmaticAPI,\n      };\n    }\n  } catch {}\n\n  return { text: parsedEventData.value };\n};\n\nexport const copyBlobToClipboardAsPng = async (blob: Blob | Promise<Blob>) => {\n  try {\n    // in Safari so far we need to construct the ClipboardItem synchronously\n    // (i.e. in the same tick) otherwise browser will complain for lack of\n    // user intent. Using a Promise ClipboardItem constructor solves this.\n    // https://bugs.webkit.org/show_bug.cgi?id=222262\n    //\n    // Note that Firefox (and potentially others) seems to support Promise\n    // ClipboardItem constructor, but throws on an unrelated MIME type error.\n    // So we need to await this and fallback to awaiting the blob if applicable.\n    await navigator.clipboard.write([\n      new window.ClipboardItem({\n        [MIME_TYPES.png]: blob,\n      }),\n    ]);\n  } catch (error: any) {\n    // if we're using a Promise ClipboardItem, let's try constructing\n    // with resolution value instead\n    if (isPromiseLike(blob)) {\n      await navigator.clipboard.write([\n        new window.ClipboardItem({\n          [MIME_TYPES.png]: await blob,\n        }),\n      ]);\n    } else {\n      throw error;\n    }\n  }\n};\n\nexport const copyTextToSystemClipboard = async (\n  text: string | null,\n  clipboardEvent?: ClipboardEvent | null,\n) => {\n  // (1) first try using Async Clipboard API\n  if (probablySupportsClipboardWriteText) {\n    try {\n      // NOTE: doesn't work on FF on non-HTTPS domains, or when document\n      // not focused\n      await navigator.clipboard.writeText(text || \"\");\n      return;\n    } catch (error: any) {\n      console.error(error);\n    }\n  }\n\n  // (2) if fails and we have access to ClipboardEvent, use plain old setData()\n  try {\n    if (clipboardEvent) {\n      clipboardEvent.clipboardData?.setData(\"text/plain\", text || \"\");\n      if (clipboardEvent.clipboardData?.getData(\"text/plain\") !== text) {\n        throw new Error(\"Failed to setData on clipboardEvent\");\n      }\n      return;\n    }\n  } catch (error: any) {\n    console.error(error);\n  }\n\n  // (3) if that fails, use document.execCommand\n  if (!copyTextViaExecCommand(text)) {\n    throw new Error(t(\"errors.copyToSystemClipboardFailed\"));\n  }\n};\n\n// adapted from https://github.com/zenorocha/clipboard.js/blob/ce79f170aa655c408b6aab33c9472e8e4fa52e19/src/clipboard-action.js#L48\nconst copyTextViaExecCommand = (text: string | null) => {\n  // execCommand doesn't allow copying empty strings, so if we're\n  // clearing clipboard using this API, we must copy at least an empty char\n  if (!text) {\n    text = \" \";\n  }\n\n  const isRTL = document.documentElement.getAttribute(\"dir\") === \"rtl\";\n\n  const textarea = document.createElement(\"textarea\");\n\n  textarea.style.border = \"0\";\n  textarea.style.padding = \"0\";\n  textarea.style.margin = \"0\";\n  textarea.style.position = \"absolute\";\n  textarea.style[isRTL ? \"right\" : \"left\"] = \"-9999px\";\n  const yPosition = window.pageYOffset || document.documentElement.scrollTop;\n  textarea.style.top = `${yPosition}px`;\n  // Prevent zooming on iOS\n  textarea.style.fontSize = \"12pt\";\n\n  textarea.setAttribute(\"readonly\", \"\");\n  textarea.value = text;\n\n  document.body.appendChild(textarea);\n\n  let success = false;\n\n  try {\n    textarea.select();\n    textarea.setSelectionRange(0, textarea.value.length);\n\n    success = document.execCommand(\"copy\");\n  } catch (error: any) {\n    console.error(error);\n  }\n\n  textarea.remove();\n\n  return success;\n};\n", "import { Bounds } from \"../excalidraw/element/bounds\";\nimport { Point } from \"../excalidraw/types\";\n\nexport type LineSegment = [Point, Point];\n\nexport function getBBox(line: LineSegment): Bounds {\n  return [\n    Math.min(line[0][0], line[1][0]),\n    Math.min(line[0][1], line[1][1]),\n    Math.max(line[0][0], line[1][0]),\n    Math.max(line[0][1], line[1][1]),\n  ];\n}\n\nexport function crossProduct(a: Point, b: Point) {\n  return a[0] * b[1] - b[0] * a[1];\n}\n\nexport function doBBoxesIntersect(a: Bounds, b: Bounds) {\n  return a[0] <= b[2] && a[2] >= b[0] && a[1] <= b[3] && a[3] >= b[1];\n}\n\nexport function translate(a: Point, b: Point): Point {\n  return [a[0] - b[0], a[1] - b[1]];\n}\n\nconst EPSILON = 0.000001;\n\nexport function isPointOnLine(l: LineSegment, p: Point) {\n  const p1 = translate(l[1], l[0]);\n  const p2 = translate(p, l[0]);\n\n  const r = crossProduct(p1, p2);\n\n  return Math.abs(r) < EPSILON;\n}\n\nexport function isPointRightOfLine(l: LineSegment, p: Point) {\n  const p1 = translate(l[1], l[0]);\n  const p2 = translate(p, l[0]);\n\n  return crossProduct(p1, p2) < 0;\n}\n\nexport function isLineSegmentTouchingOrCrossingLine(\n  a: LineSegment,\n  b: LineSegment,\n) {\n  return (\n    isPointOnLine(a, b[0]) ||\n    isPointOnLine(a, b[1]) ||\n    (isPointRightOfLine(a, b[0])\n      ? !isPointRightOfLine(a, b[1])\n      : isPointRightOfLine(a, b[1]))\n  );\n}\n\n// https://martin-thoma.com/how-to-check-if-two-line-segments-intersect/\nexport function doLineSegmentsIntersect(a: LineSegment, b: LineSegment) {\n  return (\n    doBBoxesIntersect(getBBox(a), getBBox(b)) &&\n    isLineSegmentTouchingOrCrossingLine(a, b) &&\n    isLineSegmentTouchingOrCrossingLine(b, a)\n  );\n}\n", "import type {\n  ExcalidrawElement,\n  ExcalidrawFreeDrawElement,\n  ExcalidrawLinearElement,\n  NonDeletedExcalidrawElement,\n} from \"../excalidraw/element/types\";\nimport {\n  isArrowElement,\n  isExcalidrawElement,\n  isFreeDrawElement,\n  isLinearElement,\n  isTextElement,\n} from \"../excalidraw/element/typeChecks\";\nimport { isValueInRange, rotatePoint } from \"../excalidraw/math\";\nimport type { Point } from \"../excalidraw/types\";\nimport { Bounds, getElementBounds } from \"../excalidraw/element/bounds\";\nimport { arrayToMap } from \"../excalidraw/utils\";\n\ntype Element = NonDeletedExcalidrawElement;\ntype Elements = readonly NonDeletedExcalidrawElement[];\n\ntype Points = readonly Point[];\n\n/** @returns vertices relative to element's top-left [0,0] position  */\nconst getNonLinearElementRelativePoints = (\n  element: Exclude<\n    Element,\n    ExcalidrawLinearElement | ExcalidrawFreeDrawElement\n  >,\n): [TopLeft: Point, TopRight: Point, BottomRight: Point, BottomLeft: Point] => {\n  if (element.type === \"diamond\") {\n    return [\n      [element.width / 2, 0],\n      [element.width, element.height / 2],\n      [element.width / 2, element.height],\n      [0, element.height / 2],\n    ];\n  }\n  return [\n    [0, 0],\n    [0 + element.width, 0],\n    [0 + element.width, element.height],\n    [0, element.height],\n  ];\n};\n\n/** @returns vertices relative to element's top-left [0,0] position  */\nconst getElementRelativePoints = (element: ExcalidrawElement): Points => {\n  if (isLinearElement(element) || isFreeDrawElement(element)) {\n    return element.points;\n  }\n  return getNonLinearElementRelativePoints(element);\n};\n\nconst getMinMaxPoints = (points: Points) => {\n  const ret = points.reduce(\n    (limits, [x, y]) => {\n      limits.minY = Math.min(limits.minY, y);\n      limits.minX = Math.min(limits.minX, x);\n\n      limits.maxX = Math.max(limits.maxX, x);\n      limits.maxY = Math.max(limits.maxY, y);\n\n      return limits;\n    },\n    {\n      minX: Infinity,\n      minY: Infinity,\n      maxX: -Infinity,\n      maxY: -Infinity,\n      cx: 0,\n      cy: 0,\n    },\n  );\n\n  ret.cx = (ret.maxX + ret.minX) / 2;\n  ret.cy = (ret.maxY + ret.minY) / 2;\n\n  return ret;\n};\n\nconst getRotatedBBox = (element: Element): Bounds => {\n  const points = getElementRelativePoints(element);\n\n  const { cx, cy } = getMinMaxPoints(points);\n  const centerPoint: Point = [cx, cy];\n\n  const rotatedPoints = points.map((point) =>\n    rotatePoint([point[0], point[1]], centerPoint, element.angle),\n  );\n  const { minX, minY, maxX, maxY } = getMinMaxPoints(rotatedPoints);\n\n  return [\n    minX + element.x,\n    minY + element.y,\n    maxX + element.x,\n    maxY + element.y,\n  ];\n};\n\nexport const isElementInsideBBox = (\n  element: Element,\n  bbox: Bounds,\n  eitherDirection = false,\n): boolean => {\n  const elementBBox = getRotatedBBox(element);\n\n  const elementInsideBbox =\n    bbox[0] <= elementBBox[0] &&\n    bbox[2] >= elementBBox[2] &&\n    bbox[1] <= elementBBox[1] &&\n    bbox[3] >= elementBBox[3];\n\n  if (!eitherDirection) {\n    return elementInsideBbox;\n  }\n\n  if (elementInsideBbox) {\n    return true;\n  }\n\n  return (\n    elementBBox[0] <= bbox[0] &&\n    elementBBox[2] >= bbox[2] &&\n    elementBBox[1] <= bbox[1] &&\n    elementBBox[3] >= bbox[3]\n  );\n};\n\nexport const elementPartiallyOverlapsWithOrContainsBBox = (\n  element: Element,\n  bbox: Bounds,\n): boolean => {\n  const elementBBox = getRotatedBBox(element);\n\n  return (\n    (isValueInRange(elementBBox[0], bbox[0], bbox[2]) ||\n      isValueInRange(bbox[0], elementBBox[0], elementBBox[2])) &&\n    (isValueInRange(elementBBox[1], bbox[1], bbox[3]) ||\n      isValueInRange(bbox[1], elementBBox[1], elementBBox[3]))\n  );\n};\n\nexport const elementsOverlappingBBox = ({\n  elements,\n  bounds,\n  type,\n  errorMargin = 0,\n}: {\n  elements: Elements;\n  bounds: Bounds | ExcalidrawElement;\n  /** safety offset. Defaults to 0. */\n  errorMargin?: number;\n  /**\n   * - overlap: elements overlapping or inside bounds\n   * - contain: elements inside bounds or bounds inside elements\n   * - inside: elements inside bounds\n   **/\n  type: \"overlap\" | \"contain\" | \"inside\";\n}) => {\n  if (isExcalidrawElement(bounds)) {\n    bounds = getElementBounds(bounds, arrayToMap(elements));\n  }\n  const adjustedBBox: Bounds = [\n    bounds[0] - errorMargin,\n    bounds[1] - errorMargin,\n    bounds[2] + errorMargin,\n    bounds[3] + errorMargin,\n  ];\n\n  const includedElementSet = new Set<string>();\n\n  for (const element of elements) {\n    if (includedElementSet.has(element.id)) {\n      continue;\n    }\n\n    const isOverlaping =\n      type === \"overlap\"\n        ? elementPartiallyOverlapsWithOrContainsBBox(element, adjustedBBox)\n        : type === \"inside\"\n        ? isElementInsideBBox(element, adjustedBBox)\n        : isElementInsideBBox(element, adjustedBBox, true);\n\n    if (isOverlaping) {\n      includedElementSet.add(element.id);\n\n      if (element.boundElements) {\n        for (const boundElement of element.boundElements) {\n          includedElementSet.add(boundElement.id);\n        }\n      }\n\n      if (isTextElement(element) && element.containerId) {\n        includedElementSet.add(element.containerId);\n      }\n\n      if (isArrowElement(element)) {\n        if (element.startBinding) {\n          includedElementSet.add(element.startBinding.elementId);\n        }\n\n        if (element.endBinding) {\n          includedElementSet.add(element.endBinding?.elementId);\n        }\n      }\n    }\n  }\n\n  return elements.filter((element) => includedElementSet.has(element.id));\n};\n", "import { atom, useAtom } from \"jotai\";\nimport { useEffect, useState } from \"react\";\nimport { COLOR_PALETTE } from \"../colors\";\nimport { jotaiScope } from \"../jotai\";\nimport { exportToSvg } from \"../../utils/export\";\nimport { LibraryItem } from \"../types\";\n\nexport type SvgCache = Map<LibraryItem[\"id\"], SVGSVGElement>;\n\nexport const libraryItemSvgsCache = atom<SvgCache>(new Map());\n\nconst exportLibraryItemToSvg = async (elements: LibraryItem[\"elements\"]) => {\n  return await exportToSvg({\n    elements,\n    appState: {\n      exportBackground: false,\n      viewBackgroundColor: COLOR_PALETTE.white,\n    },\n    files: null,\n    renderEmbeddables: false,\n  });\n};\n\nexport const useLibraryItemSvg = (\n  id: LibraryItem[\"id\"] | null,\n  elements: LibraryItem[\"elements\"] | undefined,\n  svgCache: SvgCache,\n): SVGSVGElement | undefined => {\n  const [svg, setSvg] = useState<SVGSVGElement>();\n\n  useEffect(() => {\n    if (elements) {\n      if (id) {\n        // Try to load cached svg\n        const cachedSvg = svgCache.get(id);\n\n        if (cachedSvg) {\n          setSvg(cachedSvg);\n        } else {\n          // When there is no svg in cache export it and save to cache\n          (async () => {\n            const exportedSvg = await exportLibraryItemToSvg(elements);\n            exportedSvg.querySelector(\".style-fonts\")?.remove();\n\n            if (exportedSvg) {\n              svgCache.set(id, exportedSvg);\n              setSvg(exportedSvg);\n            }\n          })();\n        }\n      } else {\n        // When we have no id (usualy selected items from canvas) just export the svg\n        (async () => {\n          const exportedSvg = await exportLibraryItemToSvg(elements);\n          setSvg(exportedSvg);\n        })();\n      }\n    }\n  }, [id, elements, svgCache, setSvg]);\n\n  return svg;\n};\n\nexport const useLibraryCache = () => {\n  const [svgCache] = useAtom(libraryItemSvgsCache, jotaiScope);\n\n  const clearLibraryCache = () => svgCache.clear();\n\n  const deleteItemsFromLibraryCache = (items: LibraryItem[\"id\"][]) => {\n    items.forEach((item) => svgCache.delete(item));\n  };\n\n  return {\n    clearLibraryCache,\n    deleteItemsFromLibraryCache,\n    svgCache,\n  };\n};\n", "import { loadLibraryFromBlob } from \"./blob\";\nimport {\n  LibraryItems,\n  LibraryItem,\n  ExcalidrawImperativeAPI,\n  LibraryItemsSource,\n} from \"../types\";\nimport { restoreLibraryItems } from \"./restore\";\nimport type App from \"../components/App\";\nimport { atom } from \"jotai\";\nimport { jotaiStore } from \"../jotai\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { getCommonBoundingBox } from \"../element/bounds\";\nimport { AbortError } from \"../errors\";\nimport { t } from \"../i18n\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  URL_HASH_KEYS,\n  URL_QUERY_KEYS,\n  APP_NAME,\n  EVENT,\n  DEFAULT_SIDEBAR,\n  LIBRARY_SIDEBAR_TAB,\n} from \"../constants\";\nimport { libraryItemSvgsCache } from \"../hooks/useLibraryItemSvg\";\nimport { cloneJSON } from \"../utils\";\n\nexport const libraryItemsAtom = atom<{\n  status: \"loading\" | \"loaded\";\n  isInitialized: boolean;\n  libraryItems: LibraryItems;\n}>({ status: \"loaded\", isInitialized: true, libraryItems: [] });\n\nconst cloneLibraryItems = (libraryItems: LibraryItems): LibraryItems =>\n  cloneJSON(libraryItems);\n\n/**\n * checks if library item does not exist already in current library\n */\nconst isUniqueItem = (\n  existingLibraryItems: LibraryItems,\n  targetLibraryItem: LibraryItem,\n) => {\n  return !existingLibraryItems.find((libraryItem) => {\n    if (libraryItem.elements.length !== targetLibraryItem.elements.length) {\n      return false;\n    }\n\n    // detect z-index difference by checking the excalidraw elements\n    // are in order\n    return libraryItem.elements.every((libItemExcalidrawItem, idx) => {\n      return (\n        libItemExcalidrawItem.id === targetLibraryItem.elements[idx].id &&\n        libItemExcalidrawItem.versionNonce ===\n          targetLibraryItem.elements[idx].versionNonce\n      );\n    });\n  });\n};\n\n/** Merges otherItems into localItems. Unique items in otherItems array are\n    sorted first. */\nexport const mergeLibraryItems = (\n  localItems: LibraryItems,\n  otherItems: LibraryItems,\n): LibraryItems => {\n  const newItems = [];\n  for (const item of otherItems) {\n    if (isUniqueItem(localItems, item)) {\n      newItems.push(item);\n    }\n  }\n\n  return [...newItems, ...localItems];\n};\n\nclass Library {\n  /** latest libraryItems */\n  private lastLibraryItems: LibraryItems = [];\n  /** indicates whether library is initialized with library items (has gone\n   * though at least one update) */\n  private isInitialized = false;\n\n  private app: App;\n\n  constructor(app: App) {\n    this.app = app;\n  }\n\n  private updateQueue: Promise<LibraryItems>[] = [];\n\n  private getLastUpdateTask = (): Promise<LibraryItems> | undefined => {\n    return this.updateQueue[this.updateQueue.length - 1];\n  };\n\n  private notifyListeners = () => {\n    if (this.updateQueue.length > 0) {\n      jotaiStore.set(libraryItemsAtom, {\n        status: \"loading\",\n        libraryItems: this.lastLibraryItems,\n        isInitialized: this.isInitialized,\n      });\n    } else {\n      this.isInitialized = true;\n      jotaiStore.set(libraryItemsAtom, {\n        status: \"loaded\",\n        libraryItems: this.lastLibraryItems,\n        isInitialized: this.isInitialized,\n      });\n      try {\n        this.app.props.onLibraryChange?.(\n          cloneLibraryItems(this.lastLibraryItems),\n        );\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  /** call on excalidraw instance unmount */\n  destroy = () => {\n    this.isInitialized = false;\n    this.updateQueue = [];\n    this.lastLibraryItems = [];\n    jotaiStore.set(libraryItemSvgsCache, new Map());\n    // TODO uncomment after/if we make jotai store scoped to each excal instance\n    // jotaiStore.set(libraryItemsAtom, {\n    //   status: \"loading\",\n    //   isInitialized: false,\n    //   libraryItems: [],\n    // });\n  };\n\n  resetLibrary = () => {\n    return this.setLibrary([]);\n  };\n\n  /**\n   * @returns latest cloned libraryItems. Awaits all in-progress updates first.\n   */\n  getLatestLibrary = (): Promise<LibraryItems> => {\n    return new Promise(async (resolve) => {\n      try {\n        const libraryItems = await (this.getLastUpdateTask() ||\n          this.lastLibraryItems);\n        if (this.updateQueue.length > 0) {\n          resolve(this.getLatestLibrary());\n        } else {\n          resolve(cloneLibraryItems(libraryItems));\n        }\n      } catch (error) {\n        return resolve(this.lastLibraryItems);\n      }\n    });\n  };\n\n  // NOTE this is a high-level public API (exposed on ExcalidrawAPI) with\n  // a slight overhead (always restoring library items). For internal use\n  // where merging isn't needed, use `library.setLibrary()` directly.\n  updateLibrary = async ({\n    libraryItems,\n    prompt = false,\n    merge = false,\n    openLibraryMenu = false,\n    defaultStatus = \"unpublished\",\n  }: {\n    libraryItems: LibraryItemsSource;\n    merge?: boolean;\n    prompt?: boolean;\n    openLibraryMenu?: boolean;\n    defaultStatus?: \"unpublished\" | \"published\";\n  }): Promise<LibraryItems> => {\n    if (openLibraryMenu) {\n      this.app.setState({\n        openSidebar: { name: DEFAULT_SIDEBAR.name, tab: LIBRARY_SIDEBAR_TAB },\n      });\n    }\n\n    return this.setLibrary(() => {\n      return new Promise<LibraryItems>(async (resolve, reject) => {\n        try {\n          const source = await (typeof libraryItems === \"function\" &&\n          !(libraryItems instanceof Blob)\n            ? libraryItems(this.lastLibraryItems)\n            : libraryItems);\n\n          let nextItems;\n\n          if (source instanceof Blob) {\n            nextItems = await loadLibraryFromBlob(source, defaultStatus);\n          } else {\n            nextItems = restoreLibraryItems(source, defaultStatus);\n          }\n          if (\n            !prompt ||\n            window.confirm(\n              t(\"alerts.confirmAddLibrary\", {\n                numShapes: nextItems.length,\n              }),\n            )\n          ) {\n            if (prompt) {\n              // focus container if we've prompted. We focus conditionally\n              // lest `props.autoFocus` is disabled (in which case we should\n              // focus only on user action such as prompt confirm)\n              this.app.focusContainer();\n            }\n\n            if (merge) {\n              resolve(mergeLibraryItems(this.lastLibraryItems, nextItems));\n            } else {\n              resolve(nextItems);\n            }\n          } else {\n            reject(new AbortError());\n          }\n        } catch (error: any) {\n          reject(error);\n        }\n      });\n    });\n  };\n\n  setLibrary = (\n    /**\n     * LibraryItems that will replace current items. Can be a function which\n     * will be invoked after all previous tasks are resolved\n     * (this is the prefered way to update the library to avoid race conditions,\n     * but you'll want to manually merge the library items in the callback\n     *  - which is what we're doing in Library.importLibrary()).\n     *\n     * If supplied promise is rejected with AbortError, we swallow it and\n     * do not update the library.\n     */\n    libraryItems:\n      | LibraryItems\n      | Promise<LibraryItems>\n      | ((\n          latestLibraryItems: LibraryItems,\n        ) => LibraryItems | Promise<LibraryItems>),\n  ): Promise<LibraryItems> => {\n    const task = new Promise<LibraryItems>(async (resolve, reject) => {\n      try {\n        await this.getLastUpdateTask();\n\n        if (typeof libraryItems === \"function\") {\n          libraryItems = libraryItems(this.lastLibraryItems);\n        }\n\n        this.lastLibraryItems = cloneLibraryItems(await libraryItems);\n\n        resolve(this.lastLibraryItems);\n      } catch (error: any) {\n        reject(error);\n      }\n    })\n      .catch((error) => {\n        if (error.name === \"AbortError\") {\n          console.warn(\"Library update aborted by user\");\n          return this.lastLibraryItems;\n        }\n        throw error;\n      })\n      .finally(() => {\n        this.updateQueue = this.updateQueue.filter((_task) => _task !== task);\n        this.notifyListeners();\n      });\n\n    this.updateQueue.push(task);\n    this.notifyListeners();\n\n    return task;\n  };\n}\n\nexport default Library;\n\nexport const distributeLibraryItemsOnSquareGrid = (\n  libraryItems: LibraryItems,\n) => {\n  const PADDING = 50;\n  const ITEMS_PER_ROW = Math.ceil(Math.sqrt(libraryItems.length));\n\n  const resElements: ExcalidrawElement[] = [];\n\n  const getMaxHeightPerRow = (row: number) => {\n    const maxHeight = libraryItems\n      .slice(row * ITEMS_PER_ROW, row * ITEMS_PER_ROW + ITEMS_PER_ROW)\n      .reduce((acc, item) => {\n        const { height } = getCommonBoundingBox(item.elements);\n        return Math.max(acc, height);\n      }, 0);\n    return maxHeight;\n  };\n\n  const getMaxWidthPerCol = (targetCol: number) => {\n    let index = 0;\n    let currCol = 0;\n    let maxWidth = 0;\n    for (const item of libraryItems) {\n      if (index % ITEMS_PER_ROW === 0) {\n        currCol = 0;\n      }\n      if (currCol === targetCol) {\n        const { width } = getCommonBoundingBox(item.elements);\n        maxWidth = Math.max(maxWidth, width);\n      }\n      index++;\n      currCol++;\n    }\n    return maxWidth;\n  };\n\n  let colOffsetX = 0;\n  let rowOffsetY = 0;\n\n  let maxHeightCurrRow = 0;\n  let maxWidthCurrCol = 0;\n\n  let index = 0;\n  let col = 0;\n  let row = 0;\n\n  for (const item of libraryItems) {\n    if (index && index % ITEMS_PER_ROW === 0) {\n      rowOffsetY += maxHeightCurrRow + PADDING;\n      colOffsetX = 0;\n      col = 0;\n      row++;\n    }\n\n    if (col === 0) {\n      maxHeightCurrRow = getMaxHeightPerRow(row);\n    }\n    maxWidthCurrCol = getMaxWidthPerCol(col);\n\n    const { minX, minY, width, height } = getCommonBoundingBox(item.elements);\n    const offsetCenterX = (maxWidthCurrCol - width) / 2;\n    const offsetCenterY = (maxHeightCurrRow - height) / 2;\n    resElements.push(\n      // eslint-disable-next-line no-loop-func\n      ...item.elements.map((element) => ({\n        ...element,\n        x:\n          element.x +\n          // offset for column\n          colOffsetX +\n          // offset to center in given square grid\n          offsetCenterX -\n          // subtract minX so that given item starts at 0 coord\n          minX,\n        y:\n          element.y +\n          // offset for row\n          rowOffsetY +\n          // offset to center in given square grid\n          offsetCenterY -\n          // subtract minY so that given item starts at 0 coord\n          minY,\n      })),\n    );\n    colOffsetX += maxWidthCurrCol + PADDING;\n    index++;\n    col++;\n  }\n\n  return resElements;\n};\n\nexport const parseLibraryTokensFromUrl = () => {\n  const libraryUrl =\n    // current\n    new URLSearchParams(window.location.hash.slice(1)).get(\n      URL_HASH_KEYS.addLibrary,\n    ) ||\n    // legacy, kept for compat reasons\n    new URLSearchParams(window.location.search).get(URL_QUERY_KEYS.addLibrary);\n  const idToken = libraryUrl\n    ? new URLSearchParams(window.location.hash.slice(1)).get(\"token\")\n    : null;\n\n  return libraryUrl ? { libraryUrl, idToken } : null;\n};\n\nexport const useHandleLibrary = ({\n  excalidrawAPI,\n  getInitialLibraryItems,\n}: {\n  excalidrawAPI: ExcalidrawImperativeAPI | null;\n  getInitialLibraryItems?: () => LibraryItemsSource;\n}) => {\n  const getInitialLibraryRef = useRef(getInitialLibraryItems);\n\n  useEffect(() => {\n    if (!excalidrawAPI) {\n      return;\n    }\n\n    const importLibraryFromURL = async ({\n      libraryUrl,\n      idToken,\n    }: {\n      libraryUrl: string;\n      idToken: string | null;\n    }) => {\n      const libraryPromise = new Promise<Blob>(async (resolve, reject) => {\n        try {\n          const request = await fetch(decodeURIComponent(libraryUrl));\n          const blob = await request.blob();\n          resolve(blob);\n        } catch (error: any) {\n          reject(error);\n        }\n      });\n\n      const shouldPrompt = idToken !== excalidrawAPI.id;\n\n      // wait for the tab to be focused before continuing in case we'll prompt\n      // for confirmation\n      await (shouldPrompt && document.hidden\n        ? new Promise<void>((resolve) => {\n            window.addEventListener(\"focus\", () => resolve(), {\n              once: true,\n            });\n          })\n        : null);\n\n      try {\n        await excalidrawAPI.updateLibrary({\n          libraryItems: libraryPromise,\n          prompt: shouldPrompt,\n          merge: true,\n          defaultStatus: \"published\",\n          openLibraryMenu: true,\n        });\n      } catch (error) {\n        throw error;\n      } finally {\n        if (window.location.hash.includes(URL_HASH_KEYS.addLibrary)) {\n          const hash = new URLSearchParams(window.location.hash.slice(1));\n          hash.delete(URL_HASH_KEYS.addLibrary);\n          window.history.replaceState({}, APP_NAME, `#${hash.toString()}`);\n        } else if (window.location.search.includes(URL_QUERY_KEYS.addLibrary)) {\n          const query = new URLSearchParams(window.location.search);\n          query.delete(URL_QUERY_KEYS.addLibrary);\n          window.history.replaceState({}, APP_NAME, `?${query.toString()}`);\n        }\n      }\n    };\n    const onHashChange = (event: HashChangeEvent) => {\n      event.preventDefault();\n      const libraryUrlTokens = parseLibraryTokensFromUrl();\n      if (libraryUrlTokens) {\n        event.stopImmediatePropagation();\n        // If hash changed and it contains library url, import it and replace\n        // the url to its previous state (important in case of collaboration\n        // and similar).\n        // Using history API won't trigger another hashchange.\n        window.history.replaceState({}, \"\", event.oldURL);\n\n        importLibraryFromURL(libraryUrlTokens);\n      }\n    };\n\n    // -------------------------------------------------------------------------\n    // ------ init load --------------------------------------------------------\n    if (getInitialLibraryRef.current) {\n      excalidrawAPI.updateLibrary({\n        libraryItems: getInitialLibraryRef.current(),\n      });\n    }\n\n    const libraryUrlTokens = parseLibraryTokensFromUrl();\n\n    if (libraryUrlTokens) {\n      importLibraryFromURL(libraryUrlTokens);\n    }\n    // --------------------------------------------------------- init load -----\n\n    window.addEventListener(EVENT.HASHCHANGE, onHashChange);\n    return () => {\n      window.removeEventListener(EVENT.HASHCHANGE, onHashChange);\n    };\n  }, [excalidrawAPI]);\n};\n", "import {\n  exportToCanvas as _exportToCanvas,\n  exportToSvg as _exportToSvg,\n} from \"../excalidraw/scene/export\";\nimport { getDefaultAppState } from \"../excalidraw/appState\";\nimport { AppState, BinaryFiles } from \"../excalidraw/types\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawFrameLikeElement,\n  NonDeleted,\n} from \"../excalidraw/element/types\";\nimport { restore } from \"../excalidraw/data/restore\";\nimport { MIME_TYPES } from \"../excalidraw/constants\";\nimport { encodePngMetadata } from \"../excalidraw/data/image\";\nimport { serializeAsJSON } from \"../excalidraw/data/json\";\nimport {\n  copyBlobToClipboardAsPng,\n  copyTextToSystemClipboard,\n  copyToClipboard,\n} from \"../excalidraw/clipboard\";\n\nexport { MIME_TYPES };\n\ntype ExportOpts = {\n  elements: readonly NonDeleted<ExcalidrawElement>[];\n  appState?: Partial<Omit<AppState, \"offsetTop\" | \"offsetLeft\">>;\n  files: BinaryFiles | null;\n  maxWidthOrHeight?: number;\n  exportingFrame?: ExcalidrawFrameLikeElement | null;\n  getDimensions?: (\n    width: number,\n    height: number,\n  ) => { width: number; height: number; scale?: number };\n};\n\nexport const exportToCanvas = ({\n  elements,\n  appState,\n  files,\n  maxWidthOrHeight,\n  getDimensions,\n  exportPadding,\n  exportingFrame,\n}: ExportOpts & {\n  exportPadding?: number;\n}) => {\n  const { elements: restoredElements, appState: restoredAppState } = restore(\n    { elements, appState },\n    null,\n    null,\n  );\n  const { exportBackground, viewBackgroundColor } = restoredAppState;\n  return _exportToCanvas(\n    restoredElements,\n    { ...restoredAppState, offsetTop: 0, offsetLeft: 0, width: 0, height: 0 },\n    files || {},\n    { exportBackground, exportPadding, viewBackgroundColor, exportingFrame },\n    (width: number, height: number) => {\n      const canvas = document.createElement(\"canvas\");\n\n      if (maxWidthOrHeight) {\n        if (typeof getDimensions === \"function\") {\n          console.warn(\n            \"`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.\",\n          );\n        }\n\n        const max = Math.max(width, height);\n\n        // if content is less then maxWidthOrHeight, fallback on supplied scale\n        const scale =\n          maxWidthOrHeight < max\n            ? maxWidthOrHeight / max\n            : appState?.exportScale ?? 1;\n\n        canvas.width = width * scale;\n        canvas.height = height * scale;\n\n        return {\n          canvas,\n          scale,\n        };\n      }\n\n      const ret = getDimensions?.(width, height) || { width, height };\n\n      canvas.width = ret.width;\n      canvas.height = ret.height;\n\n      return {\n        canvas,\n        scale: ret.scale ?? 1,\n      };\n    },\n  );\n};\n\nexport const exportToBlob = async (\n  opts: ExportOpts & {\n    mimeType?: string;\n    quality?: number;\n    exportPadding?: number;\n  },\n): Promise<Blob> => {\n  let { mimeType = MIME_TYPES.png, quality } = opts;\n\n  if (mimeType === MIME_TYPES.png && typeof quality === \"number\") {\n    console.warn(`\"quality\" will be ignored for \"${MIME_TYPES.png}\" mimeType`);\n  }\n\n  // typo in MIME type (should be \"jpeg\")\n  if (mimeType === \"image/jpg\") {\n    mimeType = MIME_TYPES.jpg;\n  }\n\n  if (mimeType === MIME_TYPES.jpg && !opts.appState?.exportBackground) {\n    console.warn(\n      `Defaulting \"exportBackground\" to \"true\" for \"${MIME_TYPES.jpg}\" mimeType`,\n    );\n    opts = {\n      ...opts,\n      appState: { ...opts.appState, exportBackground: true },\n    };\n  }\n\n  const canvas = await exportToCanvas(opts);\n\n  quality = quality ? quality : /image\\/jpe?g/.test(mimeType) ? 0.92 : 0.8;\n\n  return new Promise((resolve, reject) => {\n    canvas.toBlob(\n      async (blob) => {\n        if (!blob) {\n          return reject(new Error(\"couldn't export to blob\"));\n        }\n        if (\n          blob &&\n          mimeType === MIME_TYPES.png &&\n          opts.appState?.exportEmbedScene\n        ) {\n          blob = await encodePngMetadata({\n            blob,\n            metadata: serializeAsJSON(\n              // NOTE as long as we're using the Scene hack, we need to ensure\n              // we pass the original, uncloned elements when serializing\n              // so that we keep ids stable\n              opts.elements,\n              opts.appState,\n              opts.files || {},\n              \"local\",\n            ),\n          });\n        }\n        resolve(blob);\n      },\n      mimeType,\n      quality,\n    );\n  });\n};\n\nexport const exportToSvg = async ({\n  elements,\n  appState = getDefaultAppState(),\n  files = {},\n  exportPadding,\n  renderEmbeddables,\n  exportingFrame,\n}: Omit<ExportOpts, \"getDimensions\"> & {\n  exportPadding?: number;\n  renderEmbeddables?: boolean;\n}): Promise<SVGSVGElement> => {\n  const { elements: restoredElements, appState: restoredAppState } = restore(\n    { elements, appState },\n    null,\n    null,\n  );\n\n  const exportAppState = {\n    ...restoredAppState,\n    exportPadding,\n  };\n\n  return _exportToSvg(restoredElements, exportAppState, files, {\n    exportingFrame,\n    renderEmbeddables,\n  });\n};\n\nexport const exportToClipboard = async (\n  opts: ExportOpts & {\n    mimeType?: string;\n    quality?: number;\n    type: \"png\" | \"svg\" | \"json\";\n  },\n) => {\n  if (opts.type === \"svg\") {\n    const svg = await exportToSvg(opts);\n    await copyTextToSystemClipboard(svg.outerHTML);\n  } else if (opts.type === \"png\") {\n    await copyBlobToClipboardAsPng(exportToBlob(opts));\n  } else if (opts.type === \"json\") {\n    await copyToClipboard(opts.elements, opts.files);\n  } else {\n    throw new Error(\"Invalid export type\");\n  }\n};\n\nexport * from \"./bbox\";\nexport {\n  elementsOverlappingBBox,\n  isElementInsideBBox,\n  elementPartiallyOverlapsWithOrContainsBBox,\n} from \"./withinBounds\";\nexport {\n  serializeAsJSON,\n  serializeLibraryAsJSON,\n} from \"../excalidraw/data/json\";\nexport {\n  loadFromBlob,\n  loadSceneOrLibraryFromBlob,\n  loadLibraryFromBlob,\n} from \"../excalidraw/data/blob\";\nexport { getFreeDrawSvgPath } from \"../excalidraw/renderer/renderElement\";\nexport { mergeLibraryItems } from \"../excalidraw/data/library\";\n", "import {\n  getCommonBounds,\n  getElementAbsoluteCoords,\n  isTextElement,\n} from \"./element\";\nimport {\n  ElementsMap,\n  ElementsMapOrArray,\n  ExcalidrawElement,\n  ExcalidrawFrameLikeElement,\n  NonDeleted,\n  NonDeletedExcalidrawElement,\n} from \"./element/types\";\nimport { isPointWithinBounds } from \"./math\";\nimport {\n  getBoundTextElement,\n  getContainerElement,\n} from \"./element/textElement\";\nimport { arrayToMap } from \"./utils\";\nimport { mutateElement } from \"./element/mutateElement\";\nimport { AppClassProperties, AppState, StaticCanvasAppState } from \"./types\";\nimport { getElementsWithinSelection, getSelectedElements } from \"./scene\";\nimport { getElementsInGroup, selectGroupsFromGivenElements } from \"./groups\";\nimport Scene, { ExcalidrawElementsIncludingDeleted } from \"./scene/Scene\";\nimport { getElementLineSegments } from \"./element/bounds\";\nimport {\n  doLineSegmentsIntersect,\n  elementsOverlappingBBox,\n} from \"../utils/export\";\nimport { isFrameElement, isFrameLikeElement } from \"./element/typeChecks\";\nimport { ReadonlySetLike } from \"./utility-types\";\n\n// --------------------------- Frame State ------------------------------------\nexport const bindElementsToFramesAfterDuplication = (\n  nextElements: ExcalidrawElement[],\n  oldElements: readonly ExcalidrawElement[],\n  oldIdToDuplicatedId: Map<ExcalidrawElement[\"id\"], ExcalidrawElement[\"id\"]>,\n) => {\n  const nextElementMap = arrayToMap(nextElements) as Map<\n    ExcalidrawElement[\"id\"],\n    ExcalidrawElement\n  >;\n\n  for (const element of oldElements) {\n    if (element.frameId) {\n      // use its frameId to get the new frameId\n      const nextElementId = oldIdToDuplicatedId.get(element.id);\n      const nextFrameId = oldIdToDuplicatedId.get(element.frameId);\n      if (nextElementId) {\n        const nextElement = nextElementMap.get(nextElementId);\n        if (nextElement) {\n          mutateElement(\n            nextElement,\n            {\n              frameId: nextFrameId ?? element.frameId,\n            },\n            false,\n          );\n        }\n      }\n    }\n  }\n};\n\nexport function isElementIntersectingFrame(\n  element: ExcalidrawElement,\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) {\n  const frameLineSegments = getElementLineSegments(frame, elementsMap);\n\n  const elementLineSegments = getElementLineSegments(element, elementsMap);\n\n  const intersecting = frameLineSegments.some((frameLineSegment) =>\n    elementLineSegments.some((elementLineSegment) =>\n      doLineSegmentsIntersect(frameLineSegment, elementLineSegment),\n    ),\n  );\n\n  return intersecting;\n}\n\nexport const getElementsCompletelyInFrame = (\n  elements: readonly ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) =>\n  omitGroupsContainingFrameLikes(\n    getElementsWithinSelection(elements, frame, elementsMap, false),\n  ).filter(\n    (element) =>\n      (!isFrameLikeElement(element) && !element.frameId) ||\n      element.frameId === frame.id,\n  );\n\nexport const isElementContainingFrame = (\n  elements: readonly ExcalidrawElement[],\n  element: ExcalidrawElement,\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) => {\n  return getElementsWithinSelection(elements, element, elementsMap).some(\n    (e) => e.id === frame.id,\n  );\n};\n\nexport const getElementsIntersectingFrame = (\n  elements: readonly ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  const elementsMap = arrayToMap(elements);\n  return elements.filter((element) =>\n    isElementIntersectingFrame(element, frame, elementsMap),\n  );\n};\n\nexport const elementsAreInFrameBounds = (\n  elements: readonly ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) => {\n  const [frameX1, frameY1, frameX2, frameY2] = getElementAbsoluteCoords(\n    frame,\n    elementsMap,\n  );\n\n  const [elementX1, elementY1, elementX2, elementY2] =\n    getCommonBounds(elements);\n\n  return (\n    frameX1 <= elementX1 &&\n    frameY1 <= elementY1 &&\n    frameX2 >= elementX2 &&\n    frameY2 >= elementY2\n  );\n};\n\nexport const elementOverlapsWithFrame = (\n  element: ExcalidrawElement,\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) => {\n  return (\n    elementsAreInFrameBounds([element], frame, elementsMap) ||\n    isElementIntersectingFrame(element, frame, elementsMap) ||\n    isElementContainingFrame([frame], element, frame, elementsMap)\n  );\n};\n\nexport const isCursorInFrame = (\n  cursorCoords: {\n    x: number;\n    y: number;\n  },\n  frame: NonDeleted<ExcalidrawFrameLikeElement>,\n  elementsMap: ElementsMap,\n) => {\n  const [fx1, fy1, fx2, fy2] = getElementAbsoluteCoords(frame, elementsMap);\n\n  return isPointWithinBounds(\n    [fx1, fy1],\n    [cursorCoords.x, cursorCoords.y],\n    [fx2, fy2],\n  );\n};\n\nexport const groupsAreAtLeastIntersectingTheFrame = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  groupIds: readonly string[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  const elementsMap = arrayToMap(elements);\n  const elementsInGroup = groupIds.flatMap((groupId) =>\n    getElementsInGroup(elements, groupId),\n  );\n\n  if (elementsInGroup.length === 0) {\n    return true;\n  }\n\n  return !!elementsInGroup.find(\n    (element) =>\n      elementsAreInFrameBounds([element], frame, elementsMap) ||\n      isElementIntersectingFrame(element, frame, elementsMap),\n  );\n};\n\nexport const groupsAreCompletelyOutOfFrame = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  groupIds: readonly string[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  const elementsMap = arrayToMap(elements);\n  const elementsInGroup = groupIds.flatMap((groupId) =>\n    getElementsInGroup(elements, groupId),\n  );\n\n  if (elementsInGroup.length === 0) {\n    return true;\n  }\n\n  return (\n    elementsInGroup.find(\n      (element) =>\n        elementsAreInFrameBounds([element], frame, elementsMap) ||\n        isElementIntersectingFrame(element, frame, elementsMap),\n    ) === undefined\n  );\n};\n\n// --------------------------- Frame Utils ------------------------------------\n\n/**\n * Returns a map of frameId to frame elements. Includes empty frames.\n */\nexport const groupByFrameLikes = (elements: readonly ExcalidrawElement[]) => {\n  const frameElementsMap = new Map<\n    ExcalidrawElement[\"id\"],\n    ExcalidrawElement[]\n  >();\n\n  for (const element of elements) {\n    const frameId = isFrameLikeElement(element) ? element.id : element.frameId;\n    if (frameId && !frameElementsMap.has(frameId)) {\n      frameElementsMap.set(frameId, getFrameChildren(elements, frameId));\n    }\n  }\n\n  return frameElementsMap;\n};\n\nexport const getFrameChildren = (\n  allElements: ElementsMapOrArray,\n  frameId: string,\n) => {\n  const frameChildren: ExcalidrawElement[] = [];\n  for (const element of allElements.values()) {\n    if (element.frameId === frameId) {\n      frameChildren.push(element);\n    }\n  }\n  return frameChildren;\n};\n\nexport const getFrameLikeElements = (\n  allElements: ExcalidrawElementsIncludingDeleted,\n): ExcalidrawFrameLikeElement[] => {\n  return allElements.filter((element): element is ExcalidrawFrameLikeElement =>\n    isFrameLikeElement(element),\n  );\n};\n\n/**\n * Returns ExcalidrawFrameElements and non-frame-children elements.\n *\n * Considers children as root elements if they point to a frame parent\n * non-existing in the elements set.\n *\n * Considers non-frame bound elements (container or arrow labels) as root.\n */\nexport const getRootElements = (\n  allElements: ExcalidrawElementsIncludingDeleted,\n) => {\n  const frameElements = arrayToMap(getFrameLikeElements(allElements));\n  return allElements.filter(\n    (element) =>\n      frameElements.has(element.id) ||\n      !element.frameId ||\n      !frameElements.has(element.frameId),\n  );\n};\n\nexport const getElementsInResizingFrame = (\n  allElements: ExcalidrawElementsIncludingDeleted,\n  frame: ExcalidrawFrameLikeElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n): ExcalidrawElement[] => {\n  const prevElementsInFrame = getFrameChildren(allElements, frame.id);\n  const nextElementsInFrame = new Set<ExcalidrawElement>(prevElementsInFrame);\n\n  const elementsCompletelyInFrame = new Set([\n    ...getElementsCompletelyInFrame(allElements, frame, elementsMap),\n    ...prevElementsInFrame.filter((element) =>\n      isElementContainingFrame(allElements, element, frame, elementsMap),\n    ),\n  ]);\n\n  const elementsNotCompletelyInFrame = prevElementsInFrame.filter(\n    (element) => !elementsCompletelyInFrame.has(element),\n  );\n\n  // for elements that are completely in the frame\n  // if they are part of some groups, then those groups are still\n  // considered to belong to the frame\n  const groupsToKeep = new Set<string>(\n    Array.from(elementsCompletelyInFrame).flatMap(\n      (element) => element.groupIds,\n    ),\n  );\n\n  for (const element of elementsNotCompletelyInFrame) {\n    if (!isElementIntersectingFrame(element, frame, elementsMap)) {\n      if (element.groupIds.length === 0) {\n        nextElementsInFrame.delete(element);\n      }\n    } else if (element.groupIds.length > 0) {\n      // group element intersects with the frame, we should keep the groups\n      // that this element is part of\n      for (const id of element.groupIds) {\n        groupsToKeep.add(id);\n      }\n    }\n  }\n\n  for (const element of elementsNotCompletelyInFrame) {\n    if (element.groupIds.length > 0) {\n      let shouldRemoveElement = true;\n\n      for (const id of element.groupIds) {\n        if (groupsToKeep.has(id)) {\n          shouldRemoveElement = false;\n        }\n      }\n\n      if (shouldRemoveElement) {\n        nextElementsInFrame.delete(element);\n      }\n    }\n  }\n\n  const individualElementsCompletelyInFrame = Array.from(\n    elementsCompletelyInFrame,\n  ).filter((element) => element.groupIds.length === 0);\n\n  for (const element of individualElementsCompletelyInFrame) {\n    nextElementsInFrame.add(element);\n  }\n\n  const newGroupElementsCompletelyInFrame = Array.from(\n    elementsCompletelyInFrame,\n  ).filter((element) => element.groupIds.length > 0);\n\n  const groupIds = selectGroupsFromGivenElements(\n    newGroupElementsCompletelyInFrame,\n    appState,\n  );\n\n  // new group elements\n  for (const [id, isSelected] of Object.entries(groupIds)) {\n    if (isSelected) {\n      const elementsInGroup = getElementsInGroup(allElements, id);\n\n      if (elementsAreInFrameBounds(elementsInGroup, frame, elementsMap)) {\n        for (const element of elementsInGroup) {\n          nextElementsInFrame.add(element);\n        }\n      }\n    }\n  }\n\n  return [...nextElementsInFrame].filter((element) => {\n    return !(isTextElement(element) && element.containerId);\n  });\n};\n\nexport const getElementsInNewFrame = (\n  elements: ExcalidrawElementsIncludingDeleted,\n  frame: ExcalidrawFrameLikeElement,\n  elementsMap: ElementsMap,\n) => {\n  return omitGroupsContainingFrameLikes(\n    elements,\n    getElementsCompletelyInFrame(elements, frame, elementsMap),\n  );\n};\n\nexport const getContainingFrame = (\n  element: ExcalidrawElement,\n  /**\n   * Optionally an elements map, in case the elements aren't in the Scene yet.\n   * Takes precedence over Scene elements, even if the element exists\n   * in Scene elements and not the supplied elements map.\n   */\n  elementsMap?: Map<string, ExcalidrawElement>,\n) => {\n  if (element.frameId) {\n    if (elementsMap) {\n      return (elementsMap.get(element.frameId) ||\n        null) as null | ExcalidrawFrameLikeElement;\n    }\n    return (\n      (Scene.getScene(element)?.getElement(\n        element.frameId,\n      ) as ExcalidrawFrameLikeElement) || null\n    );\n  }\n  return null;\n};\n\n// --------------------------- Frame Operations -------------------------------\n\n/** */\nexport const filterElementsEligibleAsFrameChildren = (\n  elements: readonly ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  const otherFrames = new Set<ExcalidrawFrameLikeElement[\"id\"]>();\n  const elementsMap = arrayToMap(elements);\n  elements = omitGroupsContainingFrameLikes(elements);\n\n  for (const element of elements) {\n    if (isFrameLikeElement(element) && element.id !== frame.id) {\n      otherFrames.add(element.id);\n    }\n  }\n\n  const processedGroups = new Set<ExcalidrawElement[\"id\"]>();\n\n  const eligibleElements: ExcalidrawElement[] = [];\n\n  for (const element of elements) {\n    // don't add frames or their children\n    if (\n      isFrameLikeElement(element) ||\n      (element.frameId && otherFrames.has(element.frameId))\n    ) {\n      continue;\n    }\n\n    if (element.groupIds.length) {\n      const shallowestGroupId = element.groupIds.at(-1)!;\n      if (!processedGroups.has(shallowestGroupId)) {\n        processedGroups.add(shallowestGroupId);\n        const groupElements = getElementsInGroup(elements, shallowestGroupId);\n        if (\n          groupElements.some((el) =>\n            elementOverlapsWithFrame(el, frame, elementsMap),\n          )\n        ) {\n          for (const child of groupElements) {\n            eligibleElements.push(child);\n          }\n        }\n      }\n    } else {\n      const overlaps = elementOverlapsWithFrame(element, frame, elementsMap);\n      if (overlaps) {\n        eligibleElements.push(element);\n      }\n    }\n  }\n\n  return eligibleElements;\n};\n\n/**\n * Retains (or repairs for target frame) the ordering invriant where children\n * elements come right before the parent frame:\n * [el, el, child, child, frame, el]\n *\n * @returns mutated allElements (same data structure)\n */\nexport const addElementsToFrame = <T extends ElementsMapOrArray>(\n  allElements: T,\n  elementsToAdd: NonDeletedExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n): T => {\n  const elementsMap = arrayToMap(allElements);\n  const currTargetFrameChildrenMap = new Map<ExcalidrawElement[\"id\"], true>();\n  for (const element of allElements.values()) {\n    if (element.frameId === frame.id) {\n      currTargetFrameChildrenMap.set(element.id, true);\n    }\n  }\n\n  const suppliedElementsToAddSet = new Set(elementsToAdd.map((el) => el.id));\n\n  const finalElementsToAdd: ExcalidrawElement[] = [];\n\n  const otherFrames = new Set<ExcalidrawFrameLikeElement[\"id\"]>();\n\n  for (const element of elementsToAdd) {\n    if (isFrameLikeElement(element) && element.id !== frame.id) {\n      otherFrames.add(element.id);\n    }\n  }\n\n  // - add bound text elements if not already in the array\n  // - filter out elements that are already in the frame\n  for (const element of omitGroupsContainingFrameLikes(\n    allElements,\n    elementsToAdd,\n  )) {\n    // don't add frames or their children\n    if (\n      isFrameLikeElement(element) ||\n      (element.frameId && otherFrames.has(element.frameId))\n    ) {\n      continue;\n    }\n\n    if (!currTargetFrameChildrenMap.has(element.id)) {\n      finalElementsToAdd.push(element);\n    }\n\n    const boundTextElement = getBoundTextElement(element, elementsMap);\n    if (\n      boundTextElement &&\n      !suppliedElementsToAddSet.has(boundTextElement.id) &&\n      !currTargetFrameChildrenMap.has(boundTextElement.id)\n    ) {\n      finalElementsToAdd.push(boundTextElement);\n    }\n  }\n\n  for (const element of finalElementsToAdd) {\n    mutateElement(\n      element,\n      {\n        frameId: frame.id,\n      },\n      false,\n    );\n  }\n\n  return allElements;\n};\n\nexport const removeElementsFromFrame = (\n  elementsToRemove: ReadonlySetLike<NonDeletedExcalidrawElement>,\n  elementsMap: ElementsMap,\n) => {\n  const _elementsToRemove = new Map<\n    ExcalidrawElement[\"id\"],\n    ExcalidrawElement\n  >();\n\n  const toRemoveElementsByFrame = new Map<\n    ExcalidrawFrameLikeElement[\"id\"],\n    ExcalidrawElement[]\n  >();\n\n  for (const element of elementsToRemove) {\n    if (element.frameId) {\n      _elementsToRemove.set(element.id, element);\n\n      const arr = toRemoveElementsByFrame.get(element.frameId) || [];\n      arr.push(element);\n\n      const boundTextElement = getBoundTextElement(element, elementsMap);\n      if (boundTextElement) {\n        _elementsToRemove.set(boundTextElement.id, boundTextElement);\n        arr.push(boundTextElement);\n      }\n\n      toRemoveElementsByFrame.set(element.frameId, arr);\n    }\n  }\n\n  for (const [, element] of _elementsToRemove) {\n    mutateElement(\n      element,\n      {\n        frameId: null,\n      },\n      false,\n    );\n  }\n};\n\nexport const removeAllElementsFromFrame = <T extends ExcalidrawElement>(\n  allElements: readonly T[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  const elementsInFrame = getFrameChildren(allElements, frame.id);\n  removeElementsFromFrame(elementsInFrame, arrayToMap(allElements));\n  return allElements;\n};\n\nexport const replaceAllElementsInFrame = <T extends ExcalidrawElement>(\n  allElements: readonly T[],\n  nextElementsInFrame: ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n  app: AppClassProperties,\n): T[] => {\n  return addElementsToFrame(\n    removeAllElementsFromFrame(allElements, frame),\n    nextElementsInFrame,\n    frame,\n  ).slice();\n};\n\n/** does not mutate elements, but returns new ones */\nexport const updateFrameMembershipOfSelectedElements = <\n  T extends ElementsMapOrArray,\n>(\n  allElements: T,\n  appState: AppState,\n  app: AppClassProperties,\n) => {\n  const selectedElements = app.scene.getSelectedElements({\n    selectedElementIds: appState.selectedElementIds,\n    // supplying elements explicitly in case we're passed non-state elements\n    elements: allElements,\n  });\n  const elementsToFilter = new Set<ExcalidrawElement>(selectedElements);\n\n  if (appState.editingGroupId) {\n    for (const element of selectedElements) {\n      if (element.groupIds.length === 0) {\n        elementsToFilter.add(element);\n      } else {\n        element.groupIds\n          .flatMap((gid) => getElementsInGroup(allElements, gid))\n          .forEach((element) => elementsToFilter.add(element));\n      }\n    }\n  }\n\n  const elementsToRemove = new Set<ExcalidrawElement>();\n\n  const elementsMap = arrayToMap(allElements);\n\n  elementsToFilter.forEach((element) => {\n    if (\n      element.frameId &&\n      !isFrameLikeElement(element) &&\n      !isElementInFrame(element, elementsMap, appState)\n    ) {\n      elementsToRemove.add(element);\n    }\n  });\n\n  if (elementsToRemove.size > 0) {\n    removeElementsFromFrame(elementsToRemove, elementsMap);\n  }\n  return allElements;\n};\n\n/**\n * filters out elements that are inside groups that contain a frame element\n * anywhere in the group tree\n */\nexport const omitGroupsContainingFrameLikes = (\n  allElements: ElementsMapOrArray,\n  /** subset of elements you want to filter. Optional perf optimization so we\n   * don't have to filter all elements unnecessarily\n   */\n  selectedElements?: readonly ExcalidrawElement[],\n) => {\n  const uniqueGroupIds = new Set<string>();\n  const elements = selectedElements || allElements;\n\n  for (const el of elements.values()) {\n    const topMostGroupId = el.groupIds[el.groupIds.length - 1];\n    if (topMostGroupId) {\n      uniqueGroupIds.add(topMostGroupId);\n    }\n  }\n\n  const rejectedGroupIds = new Set<string>();\n  for (const groupId of uniqueGroupIds) {\n    if (\n      getElementsInGroup(allElements, groupId).some((el) =>\n        isFrameLikeElement(el),\n      )\n    ) {\n      rejectedGroupIds.add(groupId);\n    }\n  }\n\n  const ret: ExcalidrawElement[] = [];\n\n  for (const element of elements.values()) {\n    if (!rejectedGroupIds.has(element.groupIds[element.groupIds.length - 1])) {\n      ret.push(element);\n    }\n  }\n\n  return ret;\n};\n\n/**\n * depending on the appState, return target frame, which is the frame the given element\n * is going to be added to or remove from\n */\nexport const getTargetFrame = (\n  element: ExcalidrawElement,\n  elementsMap: ElementsMap,\n  appState: StaticCanvasAppState,\n) => {\n  const _element = isTextElement(element)\n    ? getContainerElement(element, elementsMap) || element\n    : element;\n\n  return appState.selectedElementIds[_element.id] &&\n    appState.selectedElementsAreBeingDragged\n    ? appState.frameToHighlight\n    : getContainingFrame(_element);\n};\n\n// TODO: this a huge bottleneck for large scenes, optimise\n// given an element, return if the element is in some frame\nexport const isElementInFrame = (\n  element: ExcalidrawElement,\n  allElementsMap: ElementsMap,\n  appState: StaticCanvasAppState,\n) => {\n  const frame = getTargetFrame(element, allElementsMap, appState);\n  const _element = isTextElement(element)\n    ? getContainerElement(element, allElementsMap) || element\n    : element;\n\n  if (frame) {\n    // Perf improvement:\n    // For an element that's already in a frame, if it's not being dragged\n    // then there is no need to refer to geometry (which, yes, is slow) to check if it's in a frame.\n    // It has to be in its containing frame.\n    if (\n      !appState.selectedElementIds[element.id] ||\n      !appState.selectedElementsAreBeingDragged\n    ) {\n      return true;\n    }\n\n    if (_element.groupIds.length === 0) {\n      return elementOverlapsWithFrame(_element, frame, allElementsMap);\n    }\n\n    const allElementsInGroup = new Set(\n      _element.groupIds.flatMap((gid) =>\n        getElementsInGroup(allElementsMap, gid),\n      ),\n    );\n\n    if (appState.editingGroupId && appState.selectedElementsAreBeingDragged) {\n      const selectedElements = new Set(\n        getSelectedElements(allElementsMap, appState),\n      );\n\n      const editingGroupOverlapsFrame = appState.frameToHighlight !== null;\n\n      if (editingGroupOverlapsFrame) {\n        return true;\n      }\n\n      selectedElements.forEach((selectedElement) => {\n        allElementsInGroup.delete(selectedElement);\n      });\n    }\n\n    for (const elementInGroup of allElementsInGroup) {\n      if (isFrameLikeElement(elementInGroup)) {\n        return false;\n      }\n    }\n\n    for (const elementInGroup of allElementsInGroup) {\n      if (elementOverlapsWithFrame(elementInGroup, frame, allElementsMap)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nexport const getFrameLikeTitle = (\n  element: ExcalidrawFrameLikeElement,\n  frameIdx: number,\n) => {\n  // TODO name frames \"AI\" only if specific to AI frames\n  return element.name === null\n    ? isFrameElement(element)\n      ? `Frame ${frameIdx}`\n      : `AI Frame $${frameIdx}`\n    : element.name;\n};\n\nexport const getElementsOverlappingFrame = (\n  elements: readonly ExcalidrawElement[],\n  frame: ExcalidrawFrameLikeElement,\n) => {\n  return (\n    elementsOverlappingBBox({\n      elements,\n      bounds: frame,\n      type: \"overlap\",\n    })\n      // removes elements who are overlapping, but are in a different frame,\n      // and thus invisible in target frame\n      .filter((el) => !el.frameId || el.frameId === frame.id)\n  );\n};\n", "import {\n  ExcalidrawElement,\n  ExcalidrawTextElement,\n  NonDeletedExcalidrawElement,\n  ExcalidrawFreeDrawElement,\n  ExcalidrawImageElement,\n  ExcalidrawTextElementWithContainer,\n  ExcalidrawFrameLikeElement,\n  NonDeletedSceneElementsMap,\n  ElementsMap,\n} from \"../element/types\";\nimport {\n  isTextElement,\n  isLinearElement,\n  isFreeDrawElement,\n  isInitializedImageElement,\n  isArrowElement,\n  hasBoundTextElement,\n  isMagicFrameElement,\n} from \"../element/typeChecks\";\nimport { getElementAbsoluteCoords } from \"../element/bounds\";\nimport type { RoughCanvas } from \"roughjs/bin/canvas\";\nimport type { Drawable } from \"roughjs/bin/core\";\nimport type { RoughSVG } from \"roughjs/bin/svg\";\n\nimport {\n  SVGRenderConfig,\n  StaticCanvasRenderConfig,\n  RenderableElementsMap,\n} from \"../scene/types\";\nimport {\n  distance,\n  getFontString,\n  getFontFamilyString,\n  isRTL,\n  isTestEnv,\n} from \"../utils\";\nimport { getCornerRadius, isPathALoop, isRightAngle } from \"../math\";\nimport rough from \"roughjs/bin/rough\";\nimport {\n  AppState,\n  StaticCanvasAppState,\n  BinaryFiles,\n  Zoom,\n  InteractiveCanvasAppState,\n  ElementsPendingErasure,\n} from \"../types\";\nimport { getDefaultAppState } from \"../appState\";\nimport {\n  BOUND_TEXT_PADDING,\n  ELEMENT_READY_TO_ERASE_OPACITY,\n  FRAME_STYLE,\n  MAX_DECIMALS_FOR_SVG_EXPORT,\n  MIME_TYPES,\n  SVG_NS,\n} from \"../constants\";\nimport { getStroke, StrokeOptions } from \"perfect-freehand\";\nimport {\n  getBoundTextElement,\n  getContainerCoords,\n  getContainerElement,\n  getLineHeightInPx,\n  getBoundTextMaxHeight,\n  getBoundTextMaxWidth,\n} from \"../element/textElement\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport {\n  createPlaceholderEmbeddableLabel,\n  getEmbedLink,\n} from \"../element/embeddable\";\nimport { getContainingFrame } from \"../frame\";\nimport { normalizeLink, toValidURL } from \"../data/url\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\n\n// using a stronger invert (100% vs our regular 93%) and saturate\n// as a temp hack to make images in dark theme look closer to original\n// color scheme (it's still not quite there and the colors look slightly\n// desatured, alas...)\nconst IMAGE_INVERT_FILTER = \"invert(100%) hue-rotate(180deg) saturate(1.25)\";\n\nconst defaultAppState = getDefaultAppState();\n\nconst isPendingImageElement = (\n  element: ExcalidrawElement,\n  renderConfig: StaticCanvasRenderConfig,\n) =>\n  isInitializedImageElement(element) &&\n  !renderConfig.imageCache.has(element.fileId);\n\nconst shouldResetImageFilter = (\n  element: ExcalidrawElement,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n) => {\n  return (\n    appState.theme === \"dark\" &&\n    isInitializedImageElement(element) &&\n    !isPendingImageElement(element, renderConfig) &&\n    renderConfig.imageCache.get(element.fileId)?.mimeType !== MIME_TYPES.svg\n  );\n};\n\nconst getCanvasPadding = (element: ExcalidrawElement) =>\n  element.type === \"freedraw\" ? element.strokeWidth * 12 : 20;\n\nexport const getRenderOpacity = (\n  element: ExcalidrawElement,\n  containingFrame: ExcalidrawFrameLikeElement | null,\n  elementsPendingErasure: ElementsPendingErasure,\n) => {\n  // multiplying frame opacity with element opacity to combine them\n  // (e.g. frame 50% and element 50% opacity should result in 25% opacity)\n  let opacity = ((containingFrame?.opacity ?? 100) * element.opacity) / 10000;\n\n  // if pending erasure, multiply again to combine further\n  // (so that erasing always results in lower opacity than original)\n  if (\n    elementsPendingErasure.has(element.id) ||\n    (containingFrame && elementsPendingErasure.has(containingFrame.id))\n  ) {\n    opacity *= ELEMENT_READY_TO_ERASE_OPACITY / 100;\n  }\n\n  return opacity;\n};\n\nexport interface ExcalidrawElementWithCanvas {\n  element: ExcalidrawElement | ExcalidrawTextElement;\n  canvas: HTMLCanvasElement;\n  theme: AppState[\"theme\"];\n  scale: number;\n  zoomValue: AppState[\"zoom\"][\"value\"];\n  canvasOffsetX: number;\n  canvasOffsetY: number;\n  boundTextElementVersion: number | null;\n  containingFrameOpacity: number;\n}\n\nconst cappedElementCanvasSize = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  zoom: Zoom,\n): {\n  width: number;\n  height: number;\n  scale: number;\n} => {\n  // these limits are ballpark, they depend on specific browsers and device.\n  // We've chosen lower limits to be safe. We might want to change these limits\n  // based on browser/device type, if we get reports of low quality rendering\n  // on zoom.\n  //\n  // ~ safari mobile canvas area limit\n  const AREA_LIMIT = 16777216;\n  // ~ safari width/height limit based on developer.mozilla.org.\n  const WIDTH_HEIGHT_LIMIT = 32767;\n\n  const padding = getCanvasPadding(element);\n\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const elementWidth =\n    isLinearElement(element) || isFreeDrawElement(element)\n      ? distance(x1, x2)\n      : element.width;\n  const elementHeight =\n    isLinearElement(element) || isFreeDrawElement(element)\n      ? distance(y1, y2)\n      : element.height;\n\n  let width = elementWidth * window.devicePixelRatio + padding * 2;\n  let height = elementHeight * window.devicePixelRatio + padding * 2;\n\n  let scale: number = zoom.value;\n\n  // rescale to ensure width and height is within limits\n  if (\n    width * scale > WIDTH_HEIGHT_LIMIT ||\n    height * scale > WIDTH_HEIGHT_LIMIT\n  ) {\n    scale = Math.min(WIDTH_HEIGHT_LIMIT / width, WIDTH_HEIGHT_LIMIT / height);\n  }\n\n  // rescale to ensure canvas area is within limits\n  if (width * height * scale * scale > AREA_LIMIT) {\n    scale = Math.sqrt(AREA_LIMIT / (width * height));\n  }\n\n  width = Math.floor(width * scale);\n  height = Math.floor(height * scale);\n\n  return { width, height, scale };\n};\n\nconst generateElementCanvas = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: RenderableElementsMap,\n  zoom: Zoom,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n): ExcalidrawElementWithCanvas => {\n  const canvas = document.createElement(\"canvas\");\n  const context = canvas.getContext(\"2d\")!;\n  const padding = getCanvasPadding(element);\n\n  const { width, height, scale } = cappedElementCanvasSize(\n    element,\n    elementsMap,\n    zoom,\n  );\n\n  canvas.width = width;\n  canvas.height = height;\n\n  let canvasOffsetX = 0;\n  let canvasOffsetY = 0;\n\n  if (isLinearElement(element) || isFreeDrawElement(element)) {\n    const [x1, y1] = getElementAbsoluteCoords(element, elementsMap);\n\n    canvasOffsetX =\n      element.x > x1\n        ? distance(element.x, x1) * window.devicePixelRatio * scale\n        : 0;\n\n    canvasOffsetY =\n      element.y > y1\n        ? distance(element.y, y1) * window.devicePixelRatio * scale\n        : 0;\n\n    context.translate(canvasOffsetX, canvasOffsetY);\n  }\n\n  context.save();\n  context.translate(padding * scale, padding * scale);\n  context.scale(\n    window.devicePixelRatio * scale,\n    window.devicePixelRatio * scale,\n  );\n\n  const rc = rough.canvas(canvas);\n\n  // in dark theme, revert the image color filter\n  if (shouldResetImageFilter(element, renderConfig, appState)) {\n    context.filter = IMAGE_INVERT_FILTER;\n  }\n\n  drawElementOnCanvas(element, rc, context, renderConfig, appState);\n  context.restore();\n\n  return {\n    element,\n    canvas,\n    theme: appState.theme,\n    scale,\n    zoomValue: zoom.value,\n    canvasOffsetX,\n    canvasOffsetY,\n    boundTextElementVersion:\n      getBoundTextElement(element, elementsMap)?.version || null,\n    containingFrameOpacity: getContainingFrame(element)?.opacity || 100,\n  };\n};\n\nexport const DEFAULT_LINK_SIZE = 14;\n\nconst IMAGE_PLACEHOLDER_IMG = document.createElement(\"img\");\nIMAGE_PLACEHOLDER_IMG.src = `data:${MIME_TYPES.svg},${encodeURIComponent(\n  `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"image\" class=\"svg-inline--fa fa-image fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"#888\" d=\"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z\"></path></svg>`,\n)}`;\n\nconst IMAGE_ERROR_PLACEHOLDER_IMG = document.createElement(\"img\");\nIMAGE_ERROR_PLACEHOLDER_IMG.src = `data:${MIME_TYPES.svg},${encodeURIComponent(\n  `<svg viewBox=\"0 0 668 668\" xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2\"><path d=\"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z\" style=\"fill:#888;fill-rule:nonzero\" transform=\"matrix(.81709 0 0 .81709 124.825 145.825)\"/><path d=\"M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z\" style=\"fill:#888;fill-rule:nonzero\" transform=\"matrix(.30366 0 0 .30366 506.822 60.065)\"/></svg>`,\n)}`;\n\nconst drawImagePlaceholder = (\n  element: ExcalidrawImageElement,\n  context: CanvasRenderingContext2D,\n  zoomValue: AppState[\"zoom\"][\"value\"],\n) => {\n  context.fillStyle = \"#E7E7E7\";\n  context.fillRect(0, 0, element.width, element.height);\n\n  const imageMinWidthOrHeight = Math.min(element.width, element.height);\n\n  const size = Math.min(\n    imageMinWidthOrHeight,\n    Math.min(imageMinWidthOrHeight * 0.4, 100),\n  );\n\n  context.drawImage(\n    element.status === \"error\"\n      ? IMAGE_ERROR_PLACEHOLDER_IMG\n      : IMAGE_PLACEHOLDER_IMG,\n    element.width / 2 - size / 2,\n    element.height / 2 - size / 2,\n    size,\n    size,\n  );\n};\n\nconst drawElementOnCanvas = (\n  element: NonDeletedExcalidrawElement,\n  rc: RoughCanvas,\n  context: CanvasRenderingContext2D,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n) => {\n  switch (element.type) {\n    case \"rectangle\":\n    case \"iframe\":\n    case \"embeddable\":\n    case \"diamond\":\n    case \"ellipse\": {\n      context.lineJoin = \"round\";\n      context.lineCap = \"round\";\n      rc.draw(ShapeCache.get(element)!);\n      break;\n    }\n    case \"arrow\":\n    case \"line\": {\n      context.lineJoin = \"round\";\n      context.lineCap = \"round\";\n\n      ShapeCache.get(element)!.forEach((shape) => {\n        rc.draw(shape);\n      });\n      break;\n    }\n    case \"freedraw\": {\n      // Draw directly to canvas\n      context.save();\n      context.fillStyle = element.strokeColor;\n\n      const path = getFreeDrawPath2D(element) as Path2D;\n      const fillShape = ShapeCache.get(element);\n\n      if (fillShape) {\n        rc.draw(fillShape);\n      }\n\n      context.fillStyle = element.strokeColor;\n      context.fill(path);\n\n      context.restore();\n      break;\n    }\n    case \"image\": {\n      const img = isInitializedImageElement(element)\n        ? renderConfig.imageCache.get(element.fileId)?.image\n        : undefined;\n      if (img != null && !(img instanceof Promise)) {\n        if (element.roundness && context.roundRect) {\n          context.beginPath();\n          context.roundRect(\n            0,\n            0,\n            element.width,\n            element.height,\n            getCornerRadius(Math.min(element.width, element.height), element),\n          );\n          context.clip();\n        }\n        context.drawImage(\n          img,\n          0 /* hardcoded for the selection box*/,\n          0,\n          element.width,\n          element.height,\n        );\n      } else {\n        drawImagePlaceholder(element, context, appState.zoom.value);\n      }\n      break;\n    }\n    default: {\n      if (isTextElement(element)) {\n        const rtl = isRTL(element.text);\n        const shouldTemporarilyAttach = rtl && !context.canvas.isConnected;\n        if (shouldTemporarilyAttach) {\n          // to correctly render RTL text mixed with LTR, we have to append it\n          // to the DOM\n          document.body.appendChild(context.canvas);\n        }\n        context.canvas.setAttribute(\"dir\", rtl ? \"rtl\" : \"ltr\");\n        context.save();\n        context.font = getFontString(element);\n        context.fillStyle = element.strokeColor;\n        context.textAlign = element.textAlign as CanvasTextAlign;\n\n        // Canvas does not support multiline text by default\n        const lines = element.text.replace(/\\r\\n?/g, \"\\n\").split(\"\\n\");\n\n        const horizontalOffset =\n          element.textAlign === \"center\"\n            ? element.width / 2\n            : element.textAlign === \"right\"\n            ? element.width\n            : 0;\n        const lineHeightPx = getLineHeightInPx(\n          element.fontSize,\n          element.lineHeight,\n        );\n        const verticalOffset = element.height - element.baseline;\n        for (let index = 0; index < lines.length; index++) {\n          context.fillText(\n            lines[index],\n            horizontalOffset,\n            (index + 1) * lineHeightPx - verticalOffset,\n          );\n        }\n        context.restore();\n        if (shouldTemporarilyAttach) {\n          context.canvas.remove();\n        }\n      } else {\n        throw new Error(`Unimplemented type ${element.type}`);\n      }\n    }\n  }\n};\n\nexport const elementWithCanvasCache = new WeakMap<\n  ExcalidrawElement,\n  ExcalidrawElementWithCanvas\n>();\n\nconst generateElementWithCanvas = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: RenderableElementsMap,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n) => {\n  const zoom: Zoom = renderConfig ? appState.zoom : defaultAppState.zoom;\n  const prevElementWithCanvas = elementWithCanvasCache.get(element);\n  const shouldRegenerateBecauseZoom =\n    prevElementWithCanvas &&\n    prevElementWithCanvas.zoomValue !== zoom.value &&\n    !appState?.shouldCacheIgnoreZoom;\n  const boundTextElementVersion =\n    getBoundTextElement(element, elementsMap)?.version || null;\n\n  const containingFrameOpacity = getContainingFrame(element)?.opacity || 100;\n\n  if (\n    !prevElementWithCanvas ||\n    shouldRegenerateBecauseZoom ||\n    prevElementWithCanvas.theme !== appState.theme ||\n    prevElementWithCanvas.boundTextElementVersion !== boundTextElementVersion ||\n    prevElementWithCanvas.containingFrameOpacity !== containingFrameOpacity\n  ) {\n    const elementWithCanvas = generateElementCanvas(\n      element,\n      elementsMap,\n      zoom,\n      renderConfig,\n      appState,\n    );\n\n    elementWithCanvasCache.set(element, elementWithCanvas);\n\n    return elementWithCanvas;\n  }\n  return prevElementWithCanvas;\n};\n\nconst drawElementFromCanvas = (\n  elementWithCanvas: ExcalidrawElementWithCanvas,\n  context: CanvasRenderingContext2D,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n  allElementsMap: NonDeletedSceneElementsMap,\n) => {\n  const element = elementWithCanvas.element;\n  const padding = getCanvasPadding(element);\n  const zoom = elementWithCanvas.scale;\n  let [x1, y1, x2, y2] = getElementAbsoluteCoords(element, allElementsMap);\n\n  // Free draw elements will otherwise \"shuffle\" as the min x and y change\n  if (isFreeDrawElement(element)) {\n    x1 = Math.floor(x1);\n    x2 = Math.ceil(x2);\n    y1 = Math.floor(y1);\n    y2 = Math.ceil(y2);\n  }\n\n  const cx = ((x1 + x2) / 2 + appState.scrollX) * window.devicePixelRatio;\n  const cy = ((y1 + y2) / 2 + appState.scrollY) * window.devicePixelRatio;\n\n  context.save();\n  context.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio);\n\n  const boundTextElement = getBoundTextElement(element, allElementsMap);\n\n  if (isArrowElement(element) && boundTextElement) {\n    const tempCanvas = document.createElement(\"canvas\");\n    const tempCanvasContext = tempCanvas.getContext(\"2d\")!;\n\n    // Take max dimensions of arrow canvas so that when canvas is rotated\n    // the arrow doesn't get clipped\n    const maxDim = Math.max(distance(x1, x2), distance(y1, y2));\n    tempCanvas.width =\n      maxDim * window.devicePixelRatio * zoom +\n      padding * elementWithCanvas.scale * 10;\n    tempCanvas.height =\n      maxDim * window.devicePixelRatio * zoom +\n      padding * elementWithCanvas.scale * 10;\n    const offsetX = (tempCanvas.width - elementWithCanvas.canvas!.width) / 2;\n    const offsetY = (tempCanvas.height - elementWithCanvas.canvas!.height) / 2;\n\n    tempCanvasContext.translate(tempCanvas.width / 2, tempCanvas.height / 2);\n    tempCanvasContext.rotate(element.angle);\n\n    tempCanvasContext.drawImage(\n      elementWithCanvas.canvas!,\n      -elementWithCanvas.canvas.width / 2,\n      -elementWithCanvas.canvas.height / 2,\n      elementWithCanvas.canvas.width,\n      elementWithCanvas.canvas.height,\n    );\n\n    const [, , , , boundTextCx, boundTextCy] = getElementAbsoluteCoords(\n      boundTextElement,\n      allElementsMap,\n    );\n\n    tempCanvasContext.rotate(-element.angle);\n\n    // Shift the canvas to the center of the bound text element\n    const shiftX =\n      tempCanvas.width / 2 -\n      (boundTextCx - x1) * window.devicePixelRatio * zoom -\n      offsetX -\n      padding * zoom;\n\n    const shiftY =\n      tempCanvas.height / 2 -\n      (boundTextCy - y1) * window.devicePixelRatio * zoom -\n      offsetY -\n      padding * zoom;\n    tempCanvasContext.translate(-shiftX, -shiftY);\n    // Clear the bound text area\n    tempCanvasContext.clearRect(\n      -(boundTextElement.width / 2 + BOUND_TEXT_PADDING) *\n        window.devicePixelRatio *\n        zoom,\n      -(boundTextElement.height / 2 + BOUND_TEXT_PADDING) *\n        window.devicePixelRatio *\n        zoom,\n      (boundTextElement.width + BOUND_TEXT_PADDING * 2) *\n        window.devicePixelRatio *\n        zoom,\n      (boundTextElement.height + BOUND_TEXT_PADDING * 2) *\n        window.devicePixelRatio *\n        zoom,\n    );\n\n    context.translate(cx, cy);\n    context.drawImage(\n      tempCanvas,\n      (-(x2 - x1) / 2) * window.devicePixelRatio - offsetX / zoom - padding,\n      (-(y2 - y1) / 2) * window.devicePixelRatio - offsetY / zoom - padding,\n      tempCanvas.width / zoom,\n      tempCanvas.height / zoom,\n    );\n  } else {\n    // we translate context to element center so that rotation and scale\n    // originates from the element center\n    context.translate(cx, cy);\n\n    context.rotate(element.angle);\n\n    if (\n      \"scale\" in elementWithCanvas.element &&\n      !isPendingImageElement(element, renderConfig)\n    ) {\n      context.scale(\n        elementWithCanvas.element.scale[0],\n        elementWithCanvas.element.scale[1],\n      );\n    }\n\n    // revert afterwards we don't have account for it during drawing\n    context.translate(-cx, -cy);\n\n    context.drawImage(\n      elementWithCanvas.canvas!,\n      (x1 + appState.scrollX) * window.devicePixelRatio -\n        (padding * elementWithCanvas.scale) / elementWithCanvas.scale,\n      (y1 + appState.scrollY) * window.devicePixelRatio -\n        (padding * elementWithCanvas.scale) / elementWithCanvas.scale,\n      elementWithCanvas.canvas!.width / elementWithCanvas.scale,\n      elementWithCanvas.canvas!.height / elementWithCanvas.scale,\n    );\n\n    if (\n      import.meta.env.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX ===\n        \"true\" &&\n      hasBoundTextElement(element)\n    ) {\n      const textElement = getBoundTextElement(\n        element,\n        allElementsMap,\n      ) as ExcalidrawTextElementWithContainer;\n      const coords = getContainerCoords(element);\n      context.strokeStyle = \"#c92a2a\";\n      context.lineWidth = 3;\n      context.strokeRect(\n        (coords.x + appState.scrollX) * window.devicePixelRatio,\n        (coords.y + appState.scrollY) * window.devicePixelRatio,\n        getBoundTextMaxWidth(element, textElement) * window.devicePixelRatio,\n        getBoundTextMaxHeight(element, textElement) * window.devicePixelRatio,\n      );\n    }\n  }\n  context.restore();\n\n  // Clear the nested element we appended to the DOM\n};\n\nexport const renderSelectionElement = (\n  element: NonDeletedExcalidrawElement,\n  context: CanvasRenderingContext2D,\n  appState: InteractiveCanvasAppState,\n) => {\n  context.save();\n  context.translate(element.x + appState.scrollX, element.y + appState.scrollY);\n  context.fillStyle = \"rgba(0, 0, 200, 0.04)\";\n\n  // render from 0.5px offset  to get 1px wide line\n  // https://stackoverflow.com/questions/7530593/html5-canvas-and-line-width/7531540#7531540\n  // TODO can be be improved by offseting to the negative when user selects\n  // from right to left\n  const offset = 0.5 / appState.zoom.value;\n\n  context.fillRect(offset, offset, element.width, element.height);\n  context.lineWidth = 1 / appState.zoom.value;\n  context.strokeStyle = \" rgb(105, 101, 219)\";\n  context.strokeRect(offset, offset, element.width, element.height);\n\n  context.restore();\n};\n\nexport const renderElement = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: RenderableElementsMap,\n  allElementsMap: NonDeletedSceneElementsMap,\n  rc: RoughCanvas,\n  context: CanvasRenderingContext2D,\n  renderConfig: StaticCanvasRenderConfig,\n  appState: StaticCanvasAppState,\n) => {\n  context.globalAlpha = getRenderOpacity(\n    element,\n    getContainingFrame(element),\n    renderConfig.elementsPendingErasure,\n  );\n\n  switch (element.type) {\n    case \"magicframe\":\n    case \"frame\": {\n      if (appState.frameRendering.enabled && appState.frameRendering.outline) {\n        context.save();\n        context.translate(\n          element.x + appState.scrollX,\n          element.y + appState.scrollY,\n        );\n        context.fillStyle = \"rgba(0, 0, 200, 0.04)\";\n\n        context.lineWidth = FRAME_STYLE.strokeWidth / appState.zoom.value;\n        context.strokeStyle = FRAME_STYLE.strokeColor;\n\n        // TODO change later to only affect AI frames\n        if (isMagicFrameElement(element)) {\n          context.strokeStyle =\n            appState.theme === \"light\" ? \"#7affd7\" : \"#1d8264\";\n        }\n\n        if (FRAME_STYLE.radius && context.roundRect) {\n          context.beginPath();\n          context.roundRect(\n            0,\n            0,\n            element.width,\n            element.height,\n            FRAME_STYLE.radius / appState.zoom.value,\n          );\n          context.stroke();\n          context.closePath();\n        } else {\n          context.strokeRect(0, 0, element.width, element.height);\n        }\n\n        context.restore();\n      }\n      break;\n    }\n    case \"freedraw\": {\n      // TODO investigate if we can do this in situ. Right now we need to call\n      // beforehand because math helpers (such as getElementAbsoluteCoords)\n      // rely on existing shapes\n      ShapeCache.generateElementShape(element, null);\n\n      if (renderConfig.isExporting) {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n        const cx = (x1 + x2) / 2 + appState.scrollX;\n        const cy = (y1 + y2) / 2 + appState.scrollY;\n        const shiftX = (x2 - x1) / 2 - (element.x - x1);\n        const shiftY = (y2 - y1) / 2 - (element.y - y1);\n        context.save();\n        context.translate(cx, cy);\n        context.rotate(element.angle);\n        context.translate(-shiftX, -shiftY);\n        drawElementOnCanvas(element, rc, context, renderConfig, appState);\n        context.restore();\n      } else {\n        const elementWithCanvas = generateElementWithCanvas(\n          element,\n          elementsMap,\n          renderConfig,\n          appState,\n        );\n        drawElementFromCanvas(\n          elementWithCanvas,\n          context,\n          renderConfig,\n          appState,\n          allElementsMap,\n        );\n      }\n\n      break;\n    }\n    case \"rectangle\":\n    case \"diamond\":\n    case \"ellipse\":\n    case \"line\":\n    case \"arrow\":\n    case \"image\":\n    case \"text\":\n    case \"iframe\":\n    case \"embeddable\": {\n      // TODO investigate if we can do this in situ. Right now we need to call\n      // beforehand because math helpers (such as getElementAbsoluteCoords)\n      // rely on existing shapes\n      ShapeCache.generateElementShape(element, renderConfig);\n      if (renderConfig.isExporting) {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n        const cx = (x1 + x2) / 2 + appState.scrollX;\n        const cy = (y1 + y2) / 2 + appState.scrollY;\n        let shiftX = (x2 - x1) / 2 - (element.x - x1);\n        let shiftY = (y2 - y1) / 2 - (element.y - y1);\n        if (isTextElement(element)) {\n          const container = getContainerElement(element, elementsMap);\n          if (isArrowElement(container)) {\n            const boundTextCoords =\n              LinearElementEditor.getBoundTextElementPosition(\n                container,\n                element as ExcalidrawTextElementWithContainer,\n                elementsMap,\n              );\n            shiftX = (x2 - x1) / 2 - (boundTextCoords.x - x1);\n            shiftY = (y2 - y1) / 2 - (boundTextCoords.y - y1);\n          }\n        }\n        context.save();\n        context.translate(cx, cy);\n\n        if (shouldResetImageFilter(element, renderConfig, appState)) {\n          context.filter = \"none\";\n        }\n        const boundTextElement = getBoundTextElement(element, elementsMap);\n\n        if (isArrowElement(element) && boundTextElement) {\n          const tempCanvas = document.createElement(\"canvas\");\n\n          const tempCanvasContext = tempCanvas.getContext(\"2d\")!;\n\n          // Take max dimensions of arrow canvas so that when canvas is rotated\n          // the arrow doesn't get clipped\n          const maxDim = Math.max(distance(x1, x2), distance(y1, y2));\n          const padding = getCanvasPadding(element);\n          tempCanvas.width =\n            maxDim * appState.exportScale + padding * 10 * appState.exportScale;\n          tempCanvas.height =\n            maxDim * appState.exportScale + padding * 10 * appState.exportScale;\n\n          tempCanvasContext.translate(\n            tempCanvas.width / 2,\n            tempCanvas.height / 2,\n          );\n          tempCanvasContext.scale(appState.exportScale, appState.exportScale);\n\n          // Shift the canvas to left most point of the arrow\n          shiftX = element.width / 2 - (element.x - x1);\n          shiftY = element.height / 2 - (element.y - y1);\n\n          tempCanvasContext.rotate(element.angle);\n          const tempRc = rough.canvas(tempCanvas);\n\n          tempCanvasContext.translate(-shiftX, -shiftY);\n\n          drawElementOnCanvas(\n            element,\n            tempRc,\n            tempCanvasContext,\n            renderConfig,\n            appState,\n          );\n\n          tempCanvasContext.translate(shiftX, shiftY);\n\n          tempCanvasContext.rotate(-element.angle);\n\n          // Shift the canvas to center of bound text\n          const [, , , , boundTextCx, boundTextCy] = getElementAbsoluteCoords(\n            boundTextElement,\n            elementsMap,\n          );\n          const boundTextShiftX = (x1 + x2) / 2 - boundTextCx;\n          const boundTextShiftY = (y1 + y2) / 2 - boundTextCy;\n          tempCanvasContext.translate(-boundTextShiftX, -boundTextShiftY);\n\n          // Clear the bound text area\n          tempCanvasContext.clearRect(\n            -boundTextElement.width / 2,\n            -boundTextElement.height / 2,\n            boundTextElement.width,\n            boundTextElement.height,\n          );\n          context.scale(1 / appState.exportScale, 1 / appState.exportScale);\n          context.drawImage(\n            tempCanvas,\n            -tempCanvas.width / 2,\n            -tempCanvas.height / 2,\n            tempCanvas.width,\n            tempCanvas.height,\n          );\n        } else {\n          context.rotate(element.angle);\n\n          if (element.type === \"image\") {\n            // note: scale must be applied *after* rotating\n            context.scale(element.scale[0], element.scale[1]);\n          }\n\n          context.translate(-shiftX, -shiftY);\n          drawElementOnCanvas(element, rc, context, renderConfig, appState);\n        }\n\n        context.restore();\n        // not exporting \u2192 optimized rendering (cache & render from element\n        // canvases)\n      } else {\n        const elementWithCanvas = generateElementWithCanvas(\n          element,\n          elementsMap,\n          renderConfig,\n          appState,\n        );\n\n        const currentImageSmoothingStatus = context.imageSmoothingEnabled;\n\n        if (\n          // do not disable smoothing during zoom as blurry shapes look better\n          // on low resolution (while still zooming in) than sharp ones\n          !appState?.shouldCacheIgnoreZoom &&\n          // angle is 0 -> always disable smoothing\n          (!element.angle ||\n            // or check if angle is a right angle in which case we can still\n            // disable smoothing without adversely affecting the result\n            isRightAngle(element.angle))\n        ) {\n          // Disabling smoothing makes output much sharper, especially for\n          // text. Unless for non-right angles, where the aliasing is really\n          // terrible on Chromium.\n          //\n          // Note that `context.imageSmoothingQuality=\"high\"` has almost\n          // zero effect.\n          //\n          context.imageSmoothingEnabled = false;\n        }\n\n        drawElementFromCanvas(\n          elementWithCanvas,\n          context,\n          renderConfig,\n          appState,\n          allElementsMap,\n        );\n\n        // reset\n        context.imageSmoothingEnabled = currentImageSmoothingStatus;\n      }\n      break;\n    }\n    default: {\n      // @ts-ignore\n      throw new Error(`Unimplemented type ${element.type}`);\n    }\n  }\n\n  context.globalAlpha = 1;\n};\n\nconst roughSVGDrawWithPrecision = (\n  rsvg: RoughSVG,\n  drawable: Drawable,\n  precision?: number,\n) => {\n  if (typeof precision === \"undefined\") {\n    return rsvg.draw(drawable);\n  }\n  const pshape: Drawable = {\n    sets: drawable.sets,\n    shape: drawable.shape,\n    options: { ...drawable.options, fixedDecimalPlaceDigits: precision },\n  };\n  return rsvg.draw(pshape);\n};\n\nconst maybeWrapNodesInFrameClipPath = (\n  element: NonDeletedExcalidrawElement,\n  root: SVGElement,\n  nodes: SVGElement[],\n  frameRendering: AppState[\"frameRendering\"],\n) => {\n  if (!frameRendering.enabled || !frameRendering.clip) {\n    return null;\n  }\n  const frame = getContainingFrame(element);\n  if (frame) {\n    const g = root.ownerDocument!.createElementNS(SVG_NS, \"g\");\n    g.setAttributeNS(SVG_NS, \"clip-path\", `url(#${frame.id})`);\n    nodes.forEach((node) => g.appendChild(node));\n    return g;\n  }\n\n  return null;\n};\n\nexport const renderElementToSvg = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: RenderableElementsMap,\n  rsvg: RoughSVG,\n  svgRoot: SVGElement,\n  files: BinaryFiles,\n  offsetX: number,\n  offsetY: number,\n  renderConfig: SVGRenderConfig,\n) => {\n  const offset = { x: offsetX, y: offsetY };\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  let cx = (x2 - x1) / 2 - (element.x - x1);\n  let cy = (y2 - y1) / 2 - (element.y - y1);\n  if (isTextElement(element)) {\n    const container = getContainerElement(element, elementsMap);\n    if (isArrowElement(container)) {\n      const [x1, y1, x2, y2] = getElementAbsoluteCoords(container, elementsMap);\n\n      const boundTextCoords = LinearElementEditor.getBoundTextElementPosition(\n        container,\n        element as ExcalidrawTextElementWithContainer,\n        elementsMap,\n      );\n      cx = (x2 - x1) / 2 - (boundTextCoords.x - x1);\n      cy = (y2 - y1) / 2 - (boundTextCoords.y - y1);\n      offsetX = offsetX + boundTextCoords.x - element.x;\n      offsetY = offsetY + boundTextCoords.y - element.y;\n    }\n  }\n  const degree = (180 * element.angle) / Math.PI;\n\n  // element to append node to, most of the time svgRoot\n  let root = svgRoot;\n\n  // if the element has a link, create an anchor tag and make that the new root\n  if (element.link) {\n    const anchorTag = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"a\");\n    anchorTag.setAttribute(\"href\", normalizeLink(element.link));\n    root.appendChild(anchorTag);\n    root = anchorTag;\n  }\n\n  const addToRoot = (node: SVGElement, element: ExcalidrawElement) => {\n    if (isTestEnv()) {\n      node.setAttribute(\"data-id\", element.id);\n    }\n    root.appendChild(node);\n  };\n\n  const opacity =\n    ((getContainingFrame(element)?.opacity ?? 100) * element.opacity) / 10000;\n\n  switch (element.type) {\n    case \"selection\": {\n      // Since this is used only during editing experience, which is canvas based,\n      // this should not happen\n      throw new Error(\"Selection rendering is not supported for SVG\");\n    }\n    case \"rectangle\":\n    case \"diamond\":\n    case \"ellipse\": {\n      const shape = ShapeCache.generateElementShape(element, null);\n      const node = roughSVGDrawWithPrecision(\n        rsvg,\n        shape,\n        MAX_DECIMALS_FOR_SVG_EXPORT,\n      );\n      if (opacity !== 1) {\n        node.setAttribute(\"stroke-opacity\", `${opacity}`);\n        node.setAttribute(\"fill-opacity\", `${opacity}`);\n      }\n      node.setAttribute(\"stroke-linecap\", \"round\");\n      node.setAttribute(\n        \"transform\",\n        `translate(${offsetX || 0} ${\n          offsetY || 0\n        }) rotate(${degree} ${cx} ${cy})`,\n      );\n\n      const g = maybeWrapNodesInFrameClipPath(\n        element,\n        root,\n        [node],\n        renderConfig.frameRendering,\n      );\n\n      addToRoot(g || node, element);\n      break;\n    }\n    case \"iframe\":\n    case \"embeddable\": {\n      // render placeholder rectangle\n      const shape = ShapeCache.generateElementShape(element, renderConfig);\n      const node = roughSVGDrawWithPrecision(\n        rsvg,\n        shape,\n        MAX_DECIMALS_FOR_SVG_EXPORT,\n      );\n      const opacity = element.opacity / 100;\n      if (opacity !== 1) {\n        node.setAttribute(\"stroke-opacity\", `${opacity}`);\n        node.setAttribute(\"fill-opacity\", `${opacity}`);\n      }\n      node.setAttribute(\"stroke-linecap\", \"round\");\n      node.setAttribute(\n        \"transform\",\n        `translate(${offsetX || 0} ${\n          offsetY || 0\n        }) rotate(${degree} ${cx} ${cy})`,\n      );\n      addToRoot(node, element);\n\n      const label: ExcalidrawElement =\n        createPlaceholderEmbeddableLabel(element);\n      renderElementToSvg(\n        label,\n        elementsMap,\n        rsvg,\n        root,\n        files,\n        label.x + offset.x - element.x,\n        label.y + offset.y - element.y,\n        renderConfig,\n      );\n\n      // render embeddable element + iframe\n      const embeddableNode = roughSVGDrawWithPrecision(\n        rsvg,\n        shape,\n        MAX_DECIMALS_FOR_SVG_EXPORT,\n      );\n      embeddableNode.setAttribute(\"stroke-linecap\", \"round\");\n      embeddableNode.setAttribute(\n        \"transform\",\n        `translate(${offsetX || 0} ${\n          offsetY || 0\n        }) rotate(${degree} ${cx} ${cy})`,\n      );\n      while (embeddableNode.firstChild) {\n        embeddableNode.removeChild(embeddableNode.firstChild);\n      }\n      const radius = getCornerRadius(\n        Math.min(element.width, element.height),\n        element,\n      );\n\n      const embedLink = getEmbedLink(toValidURL(element.link || \"\"));\n\n      // if rendering embeddables explicitly disabled or\n      // embedding documents via srcdoc (which doesn't seem to work for SVGs)\n      // replace with a link instead\n      if (\n        renderConfig.renderEmbeddables === false ||\n        embedLink?.type === \"document\"\n      ) {\n        const anchorTag = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"a\");\n        anchorTag.setAttribute(\"href\", normalizeLink(element.link || \"\"));\n        anchorTag.setAttribute(\"target\", \"_blank\");\n        anchorTag.setAttribute(\"rel\", \"noopener noreferrer\");\n        anchorTag.style.borderRadius = `${radius}px`;\n\n        embeddableNode.appendChild(anchorTag);\n      } else {\n        const foreignObject = svgRoot.ownerDocument!.createElementNS(\n          SVG_NS,\n          \"foreignObject\",\n        );\n        foreignObject.style.width = `${element.width}px`;\n        foreignObject.style.height = `${element.height}px`;\n        foreignObject.style.border = \"none\";\n        const div = foreignObject.ownerDocument!.createElementNS(SVG_NS, \"div\");\n        div.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n        div.style.width = \"100%\";\n        div.style.height = \"100%\";\n        const iframe = div.ownerDocument!.createElement(\"iframe\");\n        iframe.src = embedLink?.link ?? \"\";\n        iframe.style.width = \"100%\";\n        iframe.style.height = \"100%\";\n        iframe.style.border = \"none\";\n        iframe.style.borderRadius = `${radius}px`;\n        iframe.style.top = \"0\";\n        iframe.style.left = \"0\";\n        iframe.allowFullscreen = true;\n        div.appendChild(iframe);\n        foreignObject.appendChild(div);\n\n        embeddableNode.appendChild(foreignObject);\n      }\n      addToRoot(embeddableNode, element);\n      break;\n    }\n    case \"line\":\n    case \"arrow\": {\n      const boundText = getBoundTextElement(element, elementsMap);\n      const maskPath = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"mask\");\n      if (boundText) {\n        maskPath.setAttribute(\"id\", `mask-${element.id}`);\n        const maskRectVisible = svgRoot.ownerDocument!.createElementNS(\n          SVG_NS,\n          \"rect\",\n        );\n        offsetX = offsetX || 0;\n        offsetY = offsetY || 0;\n        maskRectVisible.setAttribute(\"x\", \"0\");\n        maskRectVisible.setAttribute(\"y\", \"0\");\n        maskRectVisible.setAttribute(\"fill\", \"#fff\");\n        maskRectVisible.setAttribute(\n          \"width\",\n          `${element.width + 100 + offsetX}`,\n        );\n        maskRectVisible.setAttribute(\n          \"height\",\n          `${element.height + 100 + offsetY}`,\n        );\n\n        maskPath.appendChild(maskRectVisible);\n        const maskRectInvisible = svgRoot.ownerDocument!.createElementNS(\n          SVG_NS,\n          \"rect\",\n        );\n        const boundTextCoords = LinearElementEditor.getBoundTextElementPosition(\n          element,\n          boundText,\n          elementsMap,\n        );\n\n        const maskX = offsetX + boundTextCoords.x - element.x;\n        const maskY = offsetY + boundTextCoords.y - element.y;\n\n        maskRectInvisible.setAttribute(\"x\", maskX.toString());\n        maskRectInvisible.setAttribute(\"y\", maskY.toString());\n        maskRectInvisible.setAttribute(\"fill\", \"#000\");\n        maskRectInvisible.setAttribute(\"width\", `${boundText.width}`);\n        maskRectInvisible.setAttribute(\"height\", `${boundText.height}`);\n        maskRectInvisible.setAttribute(\"opacity\", \"1\");\n        maskPath.appendChild(maskRectInvisible);\n      }\n      const group = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"g\");\n      if (boundText) {\n        group.setAttribute(\"mask\", `url(#mask-${element.id})`);\n      }\n      group.setAttribute(\"stroke-linecap\", \"round\");\n\n      const shapes = ShapeCache.generateElementShape(element, renderConfig);\n      shapes.forEach((shape) => {\n        const node = roughSVGDrawWithPrecision(\n          rsvg,\n          shape,\n          MAX_DECIMALS_FOR_SVG_EXPORT,\n        );\n        if (opacity !== 1) {\n          node.setAttribute(\"stroke-opacity\", `${opacity}`);\n          node.setAttribute(\"fill-opacity\", `${opacity}`);\n        }\n        node.setAttribute(\n          \"transform\",\n          `translate(${offsetX || 0} ${\n            offsetY || 0\n          }) rotate(${degree} ${cx} ${cy})`,\n        );\n        if (\n          element.type === \"line\" &&\n          isPathALoop(element.points) &&\n          element.backgroundColor !== \"transparent\"\n        ) {\n          node.setAttribute(\"fill-rule\", \"evenodd\");\n        }\n        group.appendChild(node);\n      });\n\n      const g = maybeWrapNodesInFrameClipPath(\n        element,\n        root,\n        [group, maskPath],\n        renderConfig.frameRendering,\n      );\n      if (g) {\n        addToRoot(g, element);\n        root.appendChild(g);\n      } else {\n        addToRoot(group, element);\n        root.append(maskPath);\n      }\n      break;\n    }\n    case \"freedraw\": {\n      const backgroundFillShape = ShapeCache.generateElementShape(\n        element,\n        renderConfig,\n      );\n      const node = backgroundFillShape\n        ? roughSVGDrawWithPrecision(\n            rsvg,\n            backgroundFillShape,\n            MAX_DECIMALS_FOR_SVG_EXPORT,\n          )\n        : svgRoot.ownerDocument!.createElementNS(SVG_NS, \"g\");\n      if (opacity !== 1) {\n        node.setAttribute(\"stroke-opacity\", `${opacity}`);\n        node.setAttribute(\"fill-opacity\", `${opacity}`);\n      }\n      node.setAttribute(\n        \"transform\",\n        `translate(${offsetX || 0} ${\n          offsetY || 0\n        }) rotate(${degree} ${cx} ${cy})`,\n      );\n      node.setAttribute(\"stroke\", \"none\");\n      const path = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"path\");\n      path.setAttribute(\"fill\", element.strokeColor);\n      path.setAttribute(\"d\", getFreeDrawSvgPath(element));\n      node.appendChild(path);\n\n      const g = maybeWrapNodesInFrameClipPath(\n        element,\n        root,\n        [node],\n        renderConfig.frameRendering,\n      );\n\n      addToRoot(g || node, element);\n      break;\n    }\n    case \"image\": {\n      const width = Math.round(element.width);\n      const height = Math.round(element.height);\n      const fileData =\n        isInitializedImageElement(element) && files[element.fileId];\n      if (fileData) {\n        const symbolId = `image-${fileData.id}`;\n        let symbol = svgRoot.querySelector(`#${symbolId}`);\n        if (!symbol) {\n          symbol = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"symbol\");\n          symbol.id = symbolId;\n\n          const image = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"image\");\n\n          image.setAttribute(\"width\", \"100%\");\n          image.setAttribute(\"height\", \"100%\");\n          image.setAttribute(\"href\", fileData.dataURL);\n\n          symbol.appendChild(image);\n\n          root.prepend(symbol);\n        }\n\n        const use = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"use\");\n        use.setAttribute(\"href\", `#${symbolId}`);\n\n        // in dark theme, revert the image color filter\n        if (\n          renderConfig.exportWithDarkMode &&\n          fileData.mimeType !== MIME_TYPES.svg\n        ) {\n          use.setAttribute(\"filter\", IMAGE_INVERT_FILTER);\n        }\n\n        use.setAttribute(\"width\", `${width}`);\n        use.setAttribute(\"height\", `${height}`);\n        use.setAttribute(\"opacity\", `${opacity}`);\n\n        // We first apply `scale` transforms (horizontal/vertical mirroring)\n        // on the <use> element, then apply translation and rotation\n        // on the <g> element which wraps the <use>.\n        // Doing this separately is a quick hack to to work around compositing\n        // the transformations correctly (the transform-origin was not being\n        // applied correctly).\n        if (element.scale[0] !== 1 || element.scale[1] !== 1) {\n          const translateX = element.scale[0] !== 1 ? -width : 0;\n          const translateY = element.scale[1] !== 1 ? -height : 0;\n          use.setAttribute(\n            \"transform\",\n            `scale(${element.scale[0]}, ${element.scale[1]}) translate(${translateX} ${translateY})`,\n          );\n        }\n\n        const g = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"g\");\n        g.appendChild(use);\n        g.setAttribute(\n          \"transform\",\n          `translate(${offsetX || 0} ${\n            offsetY || 0\n          }) rotate(${degree} ${cx} ${cy})`,\n        );\n\n        if (element.roundness) {\n          const clipPath = svgRoot.ownerDocument!.createElementNS(\n            SVG_NS,\n            \"clipPath\",\n          );\n          clipPath.id = `image-clipPath-${element.id}`;\n\n          const clipRect = svgRoot.ownerDocument!.createElementNS(\n            SVG_NS,\n            \"rect\",\n          );\n          const radius = getCornerRadius(\n            Math.min(element.width, element.height),\n            element,\n          );\n          clipRect.setAttribute(\"width\", `${element.width}`);\n          clipRect.setAttribute(\"height\", `${element.height}`);\n          clipRect.setAttribute(\"rx\", `${radius}`);\n          clipRect.setAttribute(\"ry\", `${radius}`);\n          clipPath.appendChild(clipRect);\n          addToRoot(clipPath, element);\n\n          g.setAttributeNS(SVG_NS, \"clip-path\", `url(#${clipPath.id})`);\n        }\n\n        const clipG = maybeWrapNodesInFrameClipPath(\n          element,\n          root,\n          [g],\n          renderConfig.frameRendering,\n        );\n        addToRoot(clipG || g, element);\n      }\n      break;\n    }\n    // frames are not rendered and only acts as a container\n    case \"frame\":\n    case \"magicframe\": {\n      if (\n        renderConfig.frameRendering.enabled &&\n        renderConfig.frameRendering.outline\n      ) {\n        const rect = document.createElementNS(SVG_NS, \"rect\");\n\n        rect.setAttribute(\n          \"transform\",\n          `translate(${offsetX || 0} ${\n            offsetY || 0\n          }) rotate(${degree} ${cx} ${cy})`,\n        );\n\n        rect.setAttribute(\"width\", `${element.width}px`);\n        rect.setAttribute(\"height\", `${element.height}px`);\n        // Rounded corners\n        rect.setAttribute(\"rx\", FRAME_STYLE.radius.toString());\n        rect.setAttribute(\"ry\", FRAME_STYLE.radius.toString());\n\n        rect.setAttribute(\"fill\", \"none\");\n        rect.setAttribute(\"stroke\", FRAME_STYLE.strokeColor);\n        rect.setAttribute(\"stroke-width\", FRAME_STYLE.strokeWidth.toString());\n\n        addToRoot(rect, element);\n      }\n      break;\n    }\n    default: {\n      if (isTextElement(element)) {\n        const node = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"g\");\n        if (opacity !== 1) {\n          node.setAttribute(\"stroke-opacity\", `${opacity}`);\n          node.setAttribute(\"fill-opacity\", `${opacity}`);\n        }\n\n        node.setAttribute(\n          \"transform\",\n          `translate(${offsetX || 0} ${\n            offsetY || 0\n          }) rotate(${degree} ${cx} ${cy})`,\n        );\n        const lines = element.text.replace(/\\r\\n?/g, \"\\n\").split(\"\\n\");\n        const lineHeightPx = getLineHeightInPx(\n          element.fontSize,\n          element.lineHeight,\n        );\n        const horizontalOffset =\n          element.textAlign === \"center\"\n            ? element.width / 2\n            : element.textAlign === \"right\"\n            ? element.width\n            : 0;\n        const direction = isRTL(element.text) ? \"rtl\" : \"ltr\";\n        const textAnchor =\n          element.textAlign === \"center\"\n            ? \"middle\"\n            : element.textAlign === \"right\" || direction === \"rtl\"\n            ? \"end\"\n            : \"start\";\n        for (let i = 0; i < lines.length; i++) {\n          const text = svgRoot.ownerDocument!.createElementNS(SVG_NS, \"text\");\n          text.textContent = lines[i];\n          text.setAttribute(\"x\", `${horizontalOffset}`);\n          text.setAttribute(\"y\", `${i * lineHeightPx}`);\n          text.setAttribute(\"font-family\", getFontFamilyString(element));\n          text.setAttribute(\"font-size\", `${element.fontSize}px`);\n          text.setAttribute(\"fill\", element.strokeColor);\n          text.setAttribute(\"text-anchor\", textAnchor);\n          text.setAttribute(\"style\", \"white-space: pre;\");\n          text.setAttribute(\"direction\", direction);\n          text.setAttribute(\"dominant-baseline\", \"text-before-edge\");\n          node.appendChild(text);\n        }\n\n        const g = maybeWrapNodesInFrameClipPath(\n          element,\n          root,\n          [node],\n          renderConfig.frameRendering,\n        );\n\n        addToRoot(g || node, element);\n      } else {\n        // @ts-ignore\n        throw new Error(`Unimplemented type ${element.type}`);\n      }\n    }\n  }\n};\n\nexport const pathsCache = new WeakMap<ExcalidrawFreeDrawElement, Path2D>([]);\n\nexport function generateFreeDrawShape(element: ExcalidrawFreeDrawElement) {\n  const svgPathData = getFreeDrawSvgPath(element);\n  const path = new Path2D(svgPathData);\n  pathsCache.set(element, path);\n  return path;\n}\n\nexport function getFreeDrawPath2D(element: ExcalidrawFreeDrawElement) {\n  return pathsCache.get(element);\n}\n\nexport function getFreeDrawSvgPath(element: ExcalidrawFreeDrawElement) {\n  // If input points are empty (should they ever be?) return a dot\n  const inputPoints = element.simulatePressure\n    ? element.points\n    : element.points.length\n    ? element.points.map(([x, y], i) => [x, y, element.pressures[i]])\n    : [[0, 0, 0.5]];\n\n  // Consider changing the options for simulated pressure vs real pressure\n  const options: StrokeOptions = {\n    simulatePressure: element.simulatePressure,\n    size: element.strokeWidth * 4.25,\n    thinning: 0.6,\n    smoothing: 0.5,\n    streamline: 0.5,\n    easing: (t) => Math.sin((t * Math.PI) / 2), // https://easings.net/#easeOutSine\n    last: !!element.lastCommittedPoint, // LastCommittedPoint is added on pointerup\n  };\n\n  return getSvgPathFromStroke(getStroke(inputPoints as number[][], options));\n}\n\nfunction med(A: number[], B: number[]) {\n  return [(A[0] + B[0]) / 2, (A[1] + B[1]) / 2];\n}\n\n// Trim SVG path data so number are each two decimal points. This\n// improves SVG exports, and prevents rendering errors on points\n// with long decimals.\nconst TO_FIXED_PRECISION = /(\\s?[A-Z]?,?-?[0-9]*\\.[0-9]{0,2})(([0-9]|e|-)*)/g;\n\nfunction getSvgPathFromStroke(points: number[][]): string {\n  if (!points.length) {\n    return \"\";\n  }\n\n  const max = points.length - 1;\n\n  return points\n    .reduce(\n      (acc, point, i, arr) => {\n        if (i === max) {\n          acc.push(point, med(point, arr[0]), \"L\", arr[0], \"Z\");\n        } else {\n          acc.push(point, med(point, arr[i + 1]));\n        }\n        return acc;\n      },\n      [\"M\", points[0], \"Q\"],\n    )\n    .join(\" \")\n    .replace(TO_FIXED_PRECISION, \"$1\");\n}\n", "import { Drawable } from \"roughjs/bin/core\";\nimport { RoughGenerator } from \"roughjs/bin/generator\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawSelectionElement,\n} from \"../element/types\";\nimport { elementWithCanvasCache } from \"../renderer/renderElement\";\nimport { _generateElementShape } from \"./Shape\";\nimport { ElementShape, ElementShapes } from \"./types\";\nimport { COLOR_PALETTE } from \"../colors\";\nimport { AppState, EmbedsValidationStatus } from \"../types\";\n\nexport class ShapeCache {\n  private static rg = new RoughGenerator();\n  private static cache = new WeakMap<ExcalidrawElement, ElementShape>();\n\n  /**\n   * Retrieves shape from cache if available. Use this only if shape\n   * is optional and you have a fallback in case it's not cached.\n   */\n  public static get = <T extends ExcalidrawElement>(element: T) => {\n    return ShapeCache.cache.get(\n      element,\n    ) as T[\"type\"] extends keyof ElementShapes\n      ? ElementShapes[T[\"type\"]] | undefined\n      : ElementShape | undefined;\n  };\n\n  public static set = <T extends ExcalidrawElement>(\n    element: T,\n    shape: T[\"type\"] extends keyof ElementShapes\n      ? ElementShapes[T[\"type\"]]\n      : Drawable,\n  ) => ShapeCache.cache.set(element, shape);\n\n  public static delete = (element: ExcalidrawElement) =>\n    ShapeCache.cache.delete(element);\n\n  public static destroy = () => {\n    ShapeCache.cache = new WeakMap();\n  };\n\n  /**\n   * Generates & caches shape for element if not already cached, otherwise\n   * returns cached shape.\n   */\n  public static generateElementShape = <\n    T extends Exclude<ExcalidrawElement, ExcalidrawSelectionElement>,\n  >(\n    element: T,\n    renderConfig: {\n      isExporting: boolean;\n      canvasBackgroundColor: AppState[\"viewBackgroundColor\"];\n      embedsValidationStatus: EmbedsValidationStatus;\n    } | null,\n  ) => {\n    // when exporting, always regenerated to guarantee the latest shape\n    const cachedShape = renderConfig?.isExporting\n      ? undefined\n      : ShapeCache.get(element);\n\n    // `null` indicates no rc shape applicable for this element type,\n    // but it's considered a valid cache value (= do not regenerate)\n    if (cachedShape !== undefined) {\n      return cachedShape;\n    }\n\n    elementWithCanvasCache.delete(element);\n\n    const shape = _generateElementShape(\n      element,\n      ShapeCache.rg,\n      renderConfig || {\n        isExporting: false,\n        canvasBackgroundColor: COLOR_PALETTE.white,\n        embedsValidationStatus: null,\n      },\n    ) as T[\"type\"] extends keyof ElementShapes\n      ? ElementShapes[T[\"type\"]]\n      : Drawable | null;\n\n    ShapeCache.cache.set(element, shape);\n\n    return shape;\n  };\n}\n", "import { ExcalidrawElement } from \"./types\";\nimport Scene from \"../scene/Scene\";\nimport { getSizeFromPoints } from \"../points\";\nimport { randomInteger } from \"../random\";\nimport { Point } from \"../types\";\nimport { getUpdatedTimestamp } from \"../utils\";\nimport { Mutable } from \"../utility-types\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\n\ntype ElementUpdate<TElement extends ExcalidrawElement> = Omit<\n  Partial<TElement>,\n  \"id\" | \"version\" | \"versionNonce\"\n>;\n\n// This function tracks updates of text elements for the purposes for collaboration.\n// The version is used to compare updates when more than one user is working in\n// the same drawing. Note: this will trigger the component to update. Make sure you\n// are calling it either from a React event handler or within unstable_batchedUpdates().\nexport const mutateElement = <TElement extends Mutable<ExcalidrawElement>>(\n  element: TElement,\n  updates: ElementUpdate<TElement>,\n  informMutation = true,\n): TElement => {\n  let didChange = false;\n\n  // casting to any because can't use `in` operator\n  // (see https://github.com/microsoft/TypeScript/issues/21732)\n  const { points, fileId } = updates as any;\n\n  if (typeof points !== \"undefined\") {\n    updates = { ...getSizeFromPoints(points), ...updates };\n  }\n\n  for (const key in updates) {\n    const value = (updates as any)[key];\n    if (typeof value !== \"undefined\") {\n      if (\n        (element as any)[key] === value &&\n        // if object, always update because its attrs could have changed\n        // (except for specific keys we handle below)\n        (typeof value !== \"object\" ||\n          value === null ||\n          key === \"groupIds\" ||\n          key === \"scale\")\n      ) {\n        continue;\n      }\n\n      if (key === \"scale\") {\n        const prevScale = (element as any)[key];\n        const nextScale = value;\n        if (prevScale[0] === nextScale[0] && prevScale[1] === nextScale[1]) {\n          continue;\n        }\n      } else if (key === \"points\") {\n        const prevPoints = (element as any)[key];\n        const nextPoints = value;\n        if (prevPoints.length === nextPoints.length) {\n          let didChangePoints = false;\n          let index = prevPoints.length;\n          while (--index) {\n            const prevPoint: Point = prevPoints[index];\n            const nextPoint: Point = nextPoints[index];\n            if (\n              prevPoint[0] !== nextPoint[0] ||\n              prevPoint[1] !== nextPoint[1]\n            ) {\n              didChangePoints = true;\n              break;\n            }\n          }\n          if (!didChangePoints) {\n            continue;\n          }\n        }\n      }\n\n      (element as any)[key] = value;\n      didChange = true;\n    }\n  }\n  if (!didChange) {\n    return element;\n  }\n\n  if (\n    typeof updates.height !== \"undefined\" ||\n    typeof updates.width !== \"undefined\" ||\n    typeof fileId != \"undefined\" ||\n    typeof points !== \"undefined\"\n  ) {\n    ShapeCache.delete(element);\n  }\n\n  element.version++;\n  element.versionNonce = randomInteger();\n  element.updated = getUpdatedTimestamp();\n\n  if (informMutation) {\n    Scene.getScene(element)?.informMutation();\n  }\n\n  return element;\n};\n\nexport const newElementWith = <TElement extends ExcalidrawElement>(\n  element: TElement,\n  updates: ElementUpdate<TElement>,\n): TElement => {\n  let didChange = false;\n  for (const key in updates) {\n    const value = (updates as any)[key];\n    if (typeof value !== \"undefined\") {\n      if (\n        (element as any)[key] === value &&\n        // if object, always update because its attrs could have changed\n        (typeof value !== \"object\" || value === null)\n      ) {\n        continue;\n      }\n      didChange = true;\n    }\n  }\n\n  if (!didChange) {\n    return element;\n  }\n\n  return {\n    ...element,\n    ...updates,\n    updated: getUpdatedTimestamp(),\n    version: element.version + 1,\n    versionNonce: randomInteger(),\n  };\n};\n\n/**\n * Mutates element, bumping `version`, `versionNonce`, and `updated`.\n *\n * NOTE: does not trigger re-render.\n */\nexport const bumpVersion = <T extends Mutable<ExcalidrawElement>>(\n  element: T,\n  version?: ExcalidrawElement[\"version\"],\n) => {\n  element.version = (version ?? element.version) + 1;\n  element.versionNonce = randomInteger();\n  element.updated = getUpdatedTimestamp();\n  return element;\n};\n", "import { ElementsMap, ExcalidrawElement } from \"./types\";\nimport { mutateElement } from \"./mutateElement\";\nimport { isFreeDrawElement, isLinearElement } from \"./typeChecks\";\nimport { SHIFT_LOCKING_ANGLE } from \"../constants\";\nimport { AppState, Zoom } from \"../types\";\nimport { getElementBounds } from \"./bounds\";\nimport { viewportCoordsToSceneCoords } from \"../utils\";\n\nexport const isInvisiblySmallElement = (\n  element: ExcalidrawElement,\n): boolean => {\n  if (isLinearElement(element) || isFreeDrawElement(element)) {\n    return element.points.length < 2;\n  }\n  return element.width === 0 && element.height === 0;\n};\n\nexport const isElementInViewport = (\n  element: ExcalidrawElement,\n  width: number,\n  height: number,\n  viewTransformations: {\n    zoom: Zoom;\n    offsetLeft: number;\n    offsetTop: number;\n    scrollX: number;\n    scrollY: number;\n  },\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1, x2, y2] = getElementBounds(element, elementsMap); // scene coordinates\n  const topLeftSceneCoords = viewportCoordsToSceneCoords(\n    {\n      clientX: viewTransformations.offsetLeft,\n      clientY: viewTransformations.offsetTop,\n    },\n    viewTransformations,\n  );\n  const bottomRightSceneCoords = viewportCoordsToSceneCoords(\n    {\n      clientX: viewTransformations.offsetLeft + width,\n      clientY: viewTransformations.offsetTop + height,\n    },\n    viewTransformations,\n  );\n\n  return (\n    topLeftSceneCoords.x <= x2 &&\n    topLeftSceneCoords.y <= y2 &&\n    bottomRightSceneCoords.x >= x1 &&\n    bottomRightSceneCoords.y >= y1\n  );\n};\n\n/**\n * Makes a perfect shape or diagonal/horizontal/vertical line\n */\nexport const getPerfectElementSize = (\n  elementType: AppState[\"activeTool\"][\"type\"],\n  width: number,\n  height: number,\n): { width: number; height: number } => {\n  const absWidth = Math.abs(width);\n  const absHeight = Math.abs(height);\n\n  if (\n    elementType === \"line\" ||\n    elementType === \"arrow\" ||\n    elementType === \"freedraw\"\n  ) {\n    const lockedAngle =\n      Math.round(Math.atan(absHeight / absWidth) / SHIFT_LOCKING_ANGLE) *\n      SHIFT_LOCKING_ANGLE;\n    if (lockedAngle === 0) {\n      height = 0;\n    } else if (lockedAngle === Math.PI / 2) {\n      width = 0;\n    } else {\n      height = absWidth * Math.tan(lockedAngle) * Math.sign(height) || height;\n    }\n  } else if (elementType !== \"selection\") {\n    height = absWidth * Math.sign(height);\n  }\n  return { width, height };\n};\n\nexport const getLockedLinearCursorAlignSize = (\n  originX: number,\n  originY: number,\n  x: number,\n  y: number,\n) => {\n  let width = x - originX;\n  let height = y - originY;\n\n  const lockedAngle =\n    Math.round(Math.atan(height / width) / SHIFT_LOCKING_ANGLE) *\n    SHIFT_LOCKING_ANGLE;\n\n  if (lockedAngle === 0) {\n    height = 0;\n  } else if (lockedAngle === Math.PI / 2) {\n    width = 0;\n  } else {\n    // locked angle line, y = mx + b => mx - y + b = 0\n    const a1 = Math.tan(lockedAngle);\n    const b1 = -1;\n    const c1 = originY - a1 * originX;\n\n    // line through cursor, perpendicular to locked angle line\n    const a2 = -1 / a1;\n    const b2 = -1;\n    const c2 = y - a2 * x;\n\n    // intersection of the two lines above\n    const intersectX = (b1 * c2 - b2 * c1) / (a1 * b2 - a2 * b1);\n    const intersectY = (c1 * a2 - c2 * a1) / (a1 * b2 - a2 * b1);\n\n    // delta\n    width = intersectX - originX;\n    height = intersectY - originY;\n  }\n\n  return { width, height };\n};\n\nexport const resizePerfectLineForNWHandler = (\n  element: ExcalidrawElement,\n  x: number,\n  y: number,\n) => {\n  const anchorX = element.x + element.width;\n  const anchorY = element.y + element.height;\n  const distanceToAnchorX = x - anchorX;\n  const distanceToAnchorY = y - anchorY;\n  if (Math.abs(distanceToAnchorX) < Math.abs(distanceToAnchorY) / 2) {\n    mutateElement(element, {\n      x: anchorX,\n      width: 0,\n      y,\n      height: -distanceToAnchorY,\n    });\n  } else if (Math.abs(distanceToAnchorY) < Math.abs(element.width) / 2) {\n    mutateElement(element, {\n      y: anchorY,\n      height: 0,\n    });\n  } else {\n    const nextHeight =\n      Math.sign(distanceToAnchorY) *\n      Math.sign(distanceToAnchorX) *\n      element.width;\n    mutateElement(element, {\n      x,\n      y: anchorY - nextHeight,\n      width: -distanceToAnchorX,\n      height: nextHeight,\n    });\n  }\n};\n\nexport const getNormalizedDimensions = (\n  element: Pick<ExcalidrawElement, \"width\" | \"height\" | \"x\" | \"y\">,\n): {\n  width: ExcalidrawElement[\"width\"];\n  height: ExcalidrawElement[\"height\"];\n  x: ExcalidrawElement[\"x\"];\n  y: ExcalidrawElement[\"y\"];\n} => {\n  const ret = {\n    width: element.width,\n    height: element.height,\n    x: element.x,\n    y: element.y,\n  };\n\n  if (element.width < 0) {\n    const nextWidth = Math.abs(element.width);\n    ret.width = nextWidth;\n    ret.x = element.x - nextWidth;\n  }\n\n  if (element.height < 0) {\n    const nextHeight = Math.abs(element.height);\n    ret.height = nextHeight;\n    ret.y = element.y - nextHeight;\n  }\n\n  return ret;\n};\n", "import {\n  ExcalidrawElement,\n  PointerType,\n  NonDeletedExcalidrawElement,\n  ElementsMap,\n} from \"./types\";\n\nimport {\n  OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  getTransformHandlesFromCoords,\n  getTransformHandles,\n  TransformHandleType,\n  TransformHandle,\n  MaybeTransformHandleType,\n} from \"./transformHandles\";\nimport { AppState, Zoom } from \"../types\";\nimport { Bounds } from \"./bounds\";\n\nconst isInsideTransformHandle = (\n  transformHandle: TransformHandle,\n  x: number,\n  y: number,\n) =>\n  x >= transformHandle[0] &&\n  x <= transformHandle[0] + transformHandle[2] &&\n  y >= transformHandle[1] &&\n  y <= transformHandle[1] + transformHandle[3];\n\nexport const resizeTest = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  appState: AppState,\n  x: number,\n  y: number,\n  zoom: Zoom,\n  pointerType: PointerType,\n): MaybeTransformHandleType => {\n  if (!appState.selectedElementIds[element.id]) {\n    return false;\n  }\n\n  const { rotation: rotationTransformHandle, ...transformHandles } =\n    getTransformHandles(element, zoom, elementsMap, pointerType);\n\n  if (\n    rotationTransformHandle &&\n    isInsideTransformHandle(rotationTransformHandle, x, y)\n  ) {\n    return \"rotation\" as TransformHandleType;\n  }\n\n  const filter = Object.keys(transformHandles).filter((key) => {\n    const transformHandle =\n      transformHandles[key as Exclude<TransformHandleType, \"rotation\">]!;\n    if (!transformHandle) {\n      return false;\n    }\n    return isInsideTransformHandle(transformHandle, x, y);\n  });\n\n  if (filter.length > 0) {\n    return filter[0] as TransformHandleType;\n  }\n\n  return false;\n};\n\nexport const getElementWithTransformHandleType = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: AppState,\n  scenePointerX: number,\n  scenePointerY: number,\n  zoom: Zoom,\n  pointerType: PointerType,\n  elementsMap: ElementsMap,\n) => {\n  return elements.reduce((result, element) => {\n    if (result) {\n      return result;\n    }\n    const transformHandleType = resizeTest(\n      element,\n      elementsMap,\n      appState,\n      scenePointerX,\n      scenePointerY,\n      zoom,\n      pointerType,\n    );\n    return transformHandleType ? { element, transformHandleType } : null;\n  }, null as { element: NonDeletedExcalidrawElement; transformHandleType: MaybeTransformHandleType } | null);\n};\n\nexport const getTransformHandleTypeFromCoords = (\n  [x1, y1, x2, y2]: Bounds,\n  scenePointerX: number,\n  scenePointerY: number,\n  zoom: Zoom,\n  pointerType: PointerType,\n): MaybeTransformHandleType => {\n  const transformHandles = getTransformHandlesFromCoords(\n    [x1, y1, x2, y2, (x1 + x2) / 2, (y1 + y2) / 2],\n    0,\n    zoom,\n    pointerType,\n    OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  );\n\n  const found = Object.keys(transformHandles).find((key) => {\n    const transformHandle =\n      transformHandles[key as Exclude<TransformHandleType, \"rotation\">]!;\n    return (\n      transformHandle &&\n      isInsideTransformHandle(transformHandle, scenePointerX, scenePointerY)\n    );\n  });\n  return (found || false) as MaybeTransformHandleType;\n};\n\nconst RESIZE_CURSORS = [\"ns\", \"nesw\", \"ew\", \"nwse\"];\nconst rotateResizeCursor = (cursor: string, angle: number) => {\n  const index = RESIZE_CURSORS.indexOf(cursor);\n  if (index >= 0) {\n    const a = Math.round(angle / (Math.PI / 4));\n    cursor = RESIZE_CURSORS[(index + a) % RESIZE_CURSORS.length];\n  }\n  return cursor;\n};\n\n/*\n * Returns bi-directional cursor for the element being resized\n */\nexport const getCursorForResizingElement = (resizingElement: {\n  element?: ExcalidrawElement;\n  transformHandleType: MaybeTransformHandleType;\n}): string => {\n  const { element, transformHandleType } = resizingElement;\n  const shouldSwapCursors =\n    element && Math.sign(element.height) * Math.sign(element.width) === -1;\n  let cursor = null;\n\n  switch (transformHandleType) {\n    case \"n\":\n    case \"s\":\n      cursor = \"ns\";\n      break;\n    case \"w\":\n    case \"e\":\n      cursor = \"ew\";\n      break;\n    case \"nw\":\n    case \"se\":\n      if (shouldSwapCursors) {\n        cursor = \"nesw\";\n      } else {\n        cursor = \"nwse\";\n      }\n      break;\n    case \"ne\":\n    case \"sw\":\n      if (shouldSwapCursors) {\n        cursor = \"nwse\";\n      } else {\n        cursor = \"nesw\";\n      }\n      break;\n    case \"rotation\":\n      return \"grab\";\n  }\n\n  if (cursor && element) {\n    cursor = rotateResizeCursor(cursor, element.angle);\n  }\n\n  return cursor ? `${cursor}-resize` : \"\";\n};\n", "import { MIN_FONT_SIZE, SHIFT_LOCKING_ANGLE } from \"../constants\";\nimport { rescalePoints } from \"../points\";\n\nimport {\n  rotate,\n  adjustXYWithRotation,\n  centerPoint,\n  rotatePoint,\n} from \"../math\";\nimport {\n  ExcalidrawLinearElement,\n  ExcalidrawTextElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n  ExcalidrawElement,\n  ExcalidrawTextElementWithContainer,\n  ExcalidrawImageElement,\n  ElementsMap,\n} from \"./types\";\nimport type { Mutable } from \"../utility-types\";\nimport {\n  getElementAbsoluteCoords,\n  getCommonBounds,\n  getResizedElementAbsoluteCoords,\n  getCommonBoundingBox,\n  getElementPointsCoords,\n} from \"./bounds\";\nimport {\n  isArrowElement,\n  isBoundToContainer,\n  isFrameLikeElement,\n  isFreeDrawElement,\n  isImageElement,\n  isLinearElement,\n  isTextElement,\n} from \"./typeChecks\";\nimport { mutateElement } from \"./mutateElement\";\nimport { getFontString } from \"../utils\";\nimport { updateBoundElements } from \"./binding\";\nimport {\n  TransformHandleType,\n  MaybeTransformHandleType,\n  TransformHandleDirection,\n} from \"./transformHandles\";\nimport { Point, PointerDownState } from \"../types\";\nimport Scene from \"../scene/Scene\";\nimport {\n  getApproxMinLineWidth,\n  getBoundTextElement,\n  getBoundTextElementId,\n  getContainerElement,\n  handleBindTextResize,\n  getBoundTextMaxWidth,\n  getApproxMinLineHeight,\n  measureText,\n  getBoundTextMaxHeight,\n} from \"./textElement\";\nimport { LinearElementEditor } from \"./linearElementEditor\";\n\nexport const normalizeAngle = (angle: number): number => {\n  if (angle < 0) {\n    return angle + 2 * Math.PI;\n  }\n  if (angle >= 2 * Math.PI) {\n    return angle - 2 * Math.PI;\n  }\n  return angle;\n};\n\n// Returns true when transform (resizing/rotation) happened\nexport const transformElements = (\n  originalElements: PointerDownState[\"originalElements\"],\n  transformHandleType: MaybeTransformHandleType,\n  selectedElements: readonly NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n  shouldRotateWithDiscreteAngle: boolean,\n  shouldResizeFromCenter: boolean,\n  shouldMaintainAspectRatio: boolean,\n  pointerX: number,\n  pointerY: number,\n  centerX: number,\n  centerY: number,\n) => {\n  if (selectedElements.length === 1) {\n    const [element] = selectedElements;\n    if (transformHandleType === \"rotation\") {\n      rotateSingleElement(\n        element,\n        elementsMap,\n        pointerX,\n        pointerY,\n        shouldRotateWithDiscreteAngle,\n      );\n      updateBoundElements(element, elementsMap);\n    } else if (\n      isTextElement(element) &&\n      (transformHandleType === \"nw\" ||\n        transformHandleType === \"ne\" ||\n        transformHandleType === \"sw\" ||\n        transformHandleType === \"se\")\n    ) {\n      resizeSingleTextElement(\n        element,\n        elementsMap,\n        transformHandleType,\n        shouldResizeFromCenter,\n        pointerX,\n        pointerY,\n      );\n      updateBoundElements(element, elementsMap);\n    } else if (transformHandleType) {\n      resizeSingleElement(\n        originalElements,\n        shouldMaintainAspectRatio,\n        element,\n        elementsMap,\n        transformHandleType,\n        shouldResizeFromCenter,\n        pointerX,\n        pointerY,\n      );\n    }\n\n    return true;\n  } else if (selectedElements.length > 1) {\n    if (transformHandleType === \"rotation\") {\n      rotateMultipleElements(\n        originalElements,\n        selectedElements,\n        elementsMap,\n        pointerX,\n        pointerY,\n        shouldRotateWithDiscreteAngle,\n        centerX,\n        centerY,\n      );\n      return true;\n    } else if (\n      transformHandleType === \"nw\" ||\n      transformHandleType === \"ne\" ||\n      transformHandleType === \"sw\" ||\n      transformHandleType === \"se\"\n    ) {\n      resizeMultipleElements(\n        originalElements,\n        selectedElements,\n        elementsMap,\n        transformHandleType,\n        shouldResizeFromCenter,\n        pointerX,\n        pointerY,\n      );\n      return true;\n    }\n  }\n  return false;\n};\n\nconst rotateSingleElement = (\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  pointerX: number,\n  pointerY: number,\n  shouldRotateWithDiscreteAngle: boolean,\n) => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const cx = (x1 + x2) / 2;\n  const cy = (y1 + y2) / 2;\n  let angle: number;\n  if (isFrameLikeElement(element)) {\n    angle = 0;\n  } else {\n    angle = (5 * Math.PI) / 2 + Math.atan2(pointerY - cy, pointerX - cx);\n    if (shouldRotateWithDiscreteAngle) {\n      angle += SHIFT_LOCKING_ANGLE / 2;\n      angle -= angle % SHIFT_LOCKING_ANGLE;\n    }\n    angle = normalizeAngle(angle);\n  }\n  const boundTextElementId = getBoundTextElementId(element);\n\n  mutateElement(element, { angle });\n  if (boundTextElementId) {\n    const textElement =\n      Scene.getScene(element)?.getElement<ExcalidrawTextElementWithContainer>(\n        boundTextElementId,\n      );\n\n    if (textElement && !isArrowElement(element)) {\n      mutateElement(textElement, { angle });\n    }\n  }\n};\n\nconst rescalePointsInElement = (\n  element: NonDeletedExcalidrawElement,\n  width: number,\n  height: number,\n  normalizePoints: boolean,\n) =>\n  isLinearElement(element) || isFreeDrawElement(element)\n    ? {\n        points: rescalePoints(\n          0,\n          width,\n          rescalePoints(1, height, element.points, normalizePoints),\n          normalizePoints,\n        ),\n      }\n    : {};\n\nconst measureFontSizeFromWidth = (\n  element: NonDeleted<ExcalidrawTextElement>,\n  elementsMap: ElementsMap,\n  nextWidth: number,\n  nextHeight: number,\n): { size: number; baseline: number } | null => {\n  // We only use width to scale font on resize\n  let width = element.width;\n\n  const hasContainer = isBoundToContainer(element);\n  if (hasContainer) {\n    const container = getContainerElement(element, elementsMap);\n    if (container) {\n      width = getBoundTextMaxWidth(container, element);\n    }\n  }\n  const nextFontSize = element.fontSize * (nextWidth / width);\n  if (nextFontSize < MIN_FONT_SIZE) {\n    return null;\n  }\n  const metrics = measureText(\n    element.text,\n    getFontString({ fontSize: nextFontSize, fontFamily: element.fontFamily }),\n    element.lineHeight,\n  );\n  return {\n    size: nextFontSize,\n    baseline: metrics.baseline + (nextHeight - metrics.height),\n  };\n};\n\nconst getSidesForTransformHandle = (\n  transformHandleType: TransformHandleType,\n  shouldResizeFromCenter: boolean,\n) => {\n  return {\n    n:\n      /^(n|ne|nw)$/.test(transformHandleType) ||\n      (shouldResizeFromCenter && /^(s|se|sw)$/.test(transformHandleType)),\n    s:\n      /^(s|se|sw)$/.test(transformHandleType) ||\n      (shouldResizeFromCenter && /^(n|ne|nw)$/.test(transformHandleType)),\n    w:\n      /^(w|nw|sw)$/.test(transformHandleType) ||\n      (shouldResizeFromCenter && /^(e|ne|se)$/.test(transformHandleType)),\n    e:\n      /^(e|ne|se)$/.test(transformHandleType) ||\n      (shouldResizeFromCenter && /^(w|nw|sw)$/.test(transformHandleType)),\n  };\n};\n\nconst resizeSingleTextElement = (\n  element: NonDeleted<ExcalidrawTextElement>,\n  elementsMap: ElementsMap,\n  transformHandleType: \"nw\" | \"ne\" | \"sw\" | \"se\",\n  shouldResizeFromCenter: boolean,\n  pointerX: number,\n  pointerY: number,\n) => {\n  const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n  const cx = (x1 + x2) / 2;\n  const cy = (y1 + y2) / 2;\n  // rotation pointer with reverse angle\n  const [rotatedX, rotatedY] = rotate(\n    pointerX,\n    pointerY,\n    cx,\n    cy,\n    -element.angle,\n  );\n  let scale: number;\n  switch (transformHandleType) {\n    case \"se\":\n      scale = Math.max(\n        (rotatedX - x1) / (x2 - x1),\n        (rotatedY - y1) / (y2 - y1),\n      );\n      break;\n    case \"nw\":\n      scale = Math.max(\n        (x2 - rotatedX) / (x2 - x1),\n        (y2 - rotatedY) / (y2 - y1),\n      );\n      break;\n    case \"ne\":\n      scale = Math.max(\n        (rotatedX - x1) / (x2 - x1),\n        (y2 - rotatedY) / (y2 - y1),\n      );\n      break;\n    case \"sw\":\n      scale = Math.max(\n        (x2 - rotatedX) / (x2 - x1),\n        (rotatedY - y1) / (y2 - y1),\n      );\n      break;\n  }\n  if (scale > 0) {\n    const nextWidth = element.width * scale;\n    const nextHeight = element.height * scale;\n    const metrics = measureFontSizeFromWidth(\n      element,\n      elementsMap,\n      nextWidth,\n      nextHeight,\n    );\n    if (metrics === null) {\n      return;\n    }\n    const [nextX1, nextY1, nextX2, nextY2] = getResizedElementAbsoluteCoords(\n      element,\n      nextWidth,\n      nextHeight,\n      false,\n    );\n    const deltaX1 = (x1 - nextX1) / 2;\n    const deltaY1 = (y1 - nextY1) / 2;\n    const deltaX2 = (x2 - nextX2) / 2;\n    const deltaY2 = (y2 - nextY2) / 2;\n    const [nextElementX, nextElementY] = adjustXYWithRotation(\n      getSidesForTransformHandle(transformHandleType, shouldResizeFromCenter),\n      element.x,\n      element.y,\n      element.angle,\n      deltaX1,\n      deltaY1,\n      deltaX2,\n      deltaY2,\n    );\n    mutateElement(element, {\n      fontSize: metrics.size,\n      width: nextWidth,\n      height: nextHeight,\n      baseline: metrics.baseline,\n      x: nextElementX,\n      y: nextElementY,\n    });\n  }\n};\n\nexport const resizeSingleElement = (\n  originalElements: PointerDownState[\"originalElements\"],\n  shouldMaintainAspectRatio: boolean,\n  element: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  transformHandleDirection: TransformHandleDirection,\n  shouldResizeFromCenter: boolean,\n  pointerX: number,\n  pointerY: number,\n) => {\n  const stateAtResizeStart = originalElements.get(element.id)!;\n  // Gets bounds corners\n  const [x1, y1, x2, y2] = getResizedElementAbsoluteCoords(\n    stateAtResizeStart,\n    stateAtResizeStart.width,\n    stateAtResizeStart.height,\n    true,\n  );\n  const startTopLeft: Point = [x1, y1];\n  const startBottomRight: Point = [x2, y2];\n  const startCenter: Point = centerPoint(startTopLeft, startBottomRight);\n\n  // Calculate new dimensions based on cursor position\n  const rotatedPointer = rotatePoint(\n    [pointerX, pointerY],\n    startCenter,\n    -stateAtResizeStart.angle,\n  );\n\n  // Get bounds corners rendered on screen\n  const [esx1, esy1, esx2, esy2] = getResizedElementAbsoluteCoords(\n    element,\n    element.width,\n    element.height,\n    true,\n  );\n\n  const boundsCurrentWidth = esx2 - esx1;\n  const boundsCurrentHeight = esy2 - esy1;\n\n  // It's important we set the initial scale value based on the width and height at resize start,\n  // otherwise previous dimensions affected by modifiers will be taken into account.\n  const atStartBoundsWidth = startBottomRight[0] - startTopLeft[0];\n  const atStartBoundsHeight = startBottomRight[1] - startTopLeft[1];\n  let scaleX = atStartBoundsWidth / boundsCurrentWidth;\n  let scaleY = atStartBoundsHeight / boundsCurrentHeight;\n\n  let boundTextFont: { fontSize?: number; baseline?: number } = {};\n  const boundTextElement = getBoundTextElement(element, elementsMap);\n\n  if (transformHandleDirection.includes(\"e\")) {\n    scaleX = (rotatedPointer[0] - startTopLeft[0]) / boundsCurrentWidth;\n  }\n  if (transformHandleDirection.includes(\"s\")) {\n    scaleY = (rotatedPointer[1] - startTopLeft[1]) / boundsCurrentHeight;\n  }\n  if (transformHandleDirection.includes(\"w\")) {\n    scaleX = (startBottomRight[0] - rotatedPointer[0]) / boundsCurrentWidth;\n  }\n  if (transformHandleDirection.includes(\"n\")) {\n    scaleY = (startBottomRight[1] - rotatedPointer[1]) / boundsCurrentHeight;\n  }\n\n  // Linear elements dimensions differ from bounds dimensions\n  const eleInitialWidth = stateAtResizeStart.width;\n  const eleInitialHeight = stateAtResizeStart.height;\n  // We have to use dimensions of element on screen, otherwise the scaling of the\n  // dimensions won't match the cursor for linear elements.\n  let eleNewWidth = element.width * scaleX;\n  let eleNewHeight = element.height * scaleY;\n\n  // adjust dimensions for resizing from center\n  if (shouldResizeFromCenter) {\n    eleNewWidth = 2 * eleNewWidth - eleInitialWidth;\n    eleNewHeight = 2 * eleNewHeight - eleInitialHeight;\n  }\n\n  // adjust dimensions to keep sides ratio\n  if (shouldMaintainAspectRatio) {\n    const widthRatio = Math.abs(eleNewWidth) / eleInitialWidth;\n    const heightRatio = Math.abs(eleNewHeight) / eleInitialHeight;\n    if (transformHandleDirection.length === 1) {\n      eleNewHeight *= widthRatio;\n      eleNewWidth *= heightRatio;\n    }\n    if (transformHandleDirection.length === 2) {\n      const ratio = Math.max(widthRatio, heightRatio);\n      eleNewWidth = eleInitialWidth * ratio * Math.sign(eleNewWidth);\n      eleNewHeight = eleInitialHeight * ratio * Math.sign(eleNewHeight);\n    }\n  }\n\n  if (boundTextElement) {\n    const stateOfBoundTextElementAtResize = originalElements.get(\n      boundTextElement.id,\n    ) as typeof boundTextElement | undefined;\n    if (stateOfBoundTextElementAtResize) {\n      boundTextFont = {\n        fontSize: stateOfBoundTextElementAtResize.fontSize,\n        baseline: stateOfBoundTextElementAtResize.baseline,\n      };\n    }\n    if (shouldMaintainAspectRatio) {\n      const updatedElement = {\n        ...element,\n        width: eleNewWidth,\n        height: eleNewHeight,\n      };\n\n      const nextFont = measureFontSizeFromWidth(\n        boundTextElement,\n        elementsMap,\n        getBoundTextMaxWidth(updatedElement, boundTextElement),\n        getBoundTextMaxHeight(updatedElement, boundTextElement),\n      );\n      if (nextFont === null) {\n        return;\n      }\n      boundTextFont = {\n        fontSize: nextFont.size,\n        baseline: nextFont.baseline,\n      };\n    } else {\n      const minWidth = getApproxMinLineWidth(\n        getFontString(boundTextElement),\n        boundTextElement.lineHeight,\n      );\n      const minHeight = getApproxMinLineHeight(\n        boundTextElement.fontSize,\n        boundTextElement.lineHeight,\n      );\n      eleNewWidth = Math.max(eleNewWidth, minWidth);\n      eleNewHeight = Math.max(eleNewHeight, minHeight);\n    }\n  }\n\n  const [newBoundsX1, newBoundsY1, newBoundsX2, newBoundsY2] =\n    getResizedElementAbsoluteCoords(\n      stateAtResizeStart,\n      eleNewWidth,\n      eleNewHeight,\n      true,\n    );\n  const newBoundsWidth = newBoundsX2 - newBoundsX1;\n  const newBoundsHeight = newBoundsY2 - newBoundsY1;\n\n  // Calculate new topLeft based on fixed corner during resize\n  let newTopLeft = [...startTopLeft] as [number, number];\n  if ([\"n\", \"w\", \"nw\"].includes(transformHandleDirection)) {\n    newTopLeft = [\n      startBottomRight[0] - Math.abs(newBoundsWidth),\n      startBottomRight[1] - Math.abs(newBoundsHeight),\n    ];\n  }\n  if (transformHandleDirection === \"ne\") {\n    const bottomLeft = [startTopLeft[0], startBottomRight[1]];\n    newTopLeft = [bottomLeft[0], bottomLeft[1] - Math.abs(newBoundsHeight)];\n  }\n  if (transformHandleDirection === \"sw\") {\n    const topRight = [startBottomRight[0], startTopLeft[1]];\n    newTopLeft = [topRight[0] - Math.abs(newBoundsWidth), topRight[1]];\n  }\n\n  // Keeps opposite handle fixed during resize\n  if (shouldMaintainAspectRatio) {\n    if ([\"s\", \"n\"].includes(transformHandleDirection)) {\n      newTopLeft[0] = startCenter[0] - newBoundsWidth / 2;\n    }\n    if ([\"e\", \"w\"].includes(transformHandleDirection)) {\n      newTopLeft[1] = startCenter[1] - newBoundsHeight / 2;\n    }\n  }\n\n  const flipX = eleNewWidth < 0;\n  const flipY = eleNewHeight < 0;\n\n  // Flip horizontally\n  if (flipX) {\n    if (transformHandleDirection.includes(\"e\")) {\n      newTopLeft[0] -= Math.abs(newBoundsWidth);\n    }\n    if (transformHandleDirection.includes(\"w\")) {\n      newTopLeft[0] += Math.abs(newBoundsWidth);\n    }\n  }\n\n  // Flip vertically\n  if (flipY) {\n    if (transformHandleDirection.includes(\"s\")) {\n      newTopLeft[1] -= Math.abs(newBoundsHeight);\n    }\n    if (transformHandleDirection.includes(\"n\")) {\n      newTopLeft[1] += Math.abs(newBoundsHeight);\n    }\n  }\n\n  if (shouldResizeFromCenter) {\n    newTopLeft[0] = startCenter[0] - Math.abs(newBoundsWidth) / 2;\n    newTopLeft[1] = startCenter[1] - Math.abs(newBoundsHeight) / 2;\n  }\n\n  // adjust topLeft to new rotation point\n  const angle = stateAtResizeStart.angle;\n  const rotatedTopLeft = rotatePoint(newTopLeft, startCenter, angle);\n  const newCenter: Point = [\n    newTopLeft[0] + Math.abs(newBoundsWidth) / 2,\n    newTopLeft[1] + Math.abs(newBoundsHeight) / 2,\n  ];\n  const rotatedNewCenter = rotatePoint(newCenter, startCenter, angle);\n  newTopLeft = rotatePoint(rotatedTopLeft, rotatedNewCenter, -angle);\n\n  // For linear elements (x,y) are the coordinates of the first drawn point not the top-left corner\n  // So we need to readjust (x,y) to be where the first point should be\n  const newOrigin = [...newTopLeft];\n  const linearElementXOffset = stateAtResizeStart.x - newBoundsX1;\n  const linearElementYOffset = stateAtResizeStart.y - newBoundsY1;\n  newOrigin[0] += linearElementXOffset;\n  newOrigin[1] += linearElementYOffset;\n\n  const nextX = newOrigin[0];\n  const nextY = newOrigin[1];\n\n  // Readjust points for linear elements\n  let rescaledElementPointsY;\n  let rescaledPoints;\n  if (isLinearElement(element) || isFreeDrawElement(element)) {\n    rescaledElementPointsY = rescalePoints(\n      1,\n      eleNewHeight,\n      (stateAtResizeStart as ExcalidrawLinearElement).points,\n      true,\n    );\n\n    rescaledPoints = rescalePoints(\n      0,\n      eleNewWidth,\n      rescaledElementPointsY,\n      true,\n    );\n  }\n\n  const resizedElement = {\n    width: Math.abs(eleNewWidth),\n    height: Math.abs(eleNewHeight),\n    x: nextX,\n    y: nextY,\n    points: rescaledPoints,\n  };\n\n  if (\"scale\" in element && \"scale\" in stateAtResizeStart) {\n    mutateElement(element, {\n      scale: [\n        // defaulting because scaleX/Y can be 0/-0\n        (Math.sign(newBoundsX2 - stateAtResizeStart.x) ||\n          stateAtResizeStart.scale[0]) * stateAtResizeStart.scale[0],\n        (Math.sign(newBoundsY2 - stateAtResizeStart.y) ||\n          stateAtResizeStart.scale[1]) * stateAtResizeStart.scale[1],\n      ],\n    });\n  }\n\n  if (\n    isArrowElement(element) &&\n    boundTextElement &&\n    shouldMaintainAspectRatio\n  ) {\n    const fontSize =\n      (resizedElement.width / element.width) * boundTextElement.fontSize;\n    if (fontSize < MIN_FONT_SIZE) {\n      return;\n    }\n    boundTextFont.fontSize = fontSize;\n  }\n\n  if (\n    resizedElement.width !== 0 &&\n    resizedElement.height !== 0 &&\n    Number.isFinite(resizedElement.x) &&\n    Number.isFinite(resizedElement.y)\n  ) {\n    mutateElement(element, resizedElement);\n\n    updateBoundElements(element, elementsMap, {\n      newSize: { width: resizedElement.width, height: resizedElement.height },\n    });\n\n    if (boundTextElement && boundTextFont != null) {\n      mutateElement(boundTextElement, {\n        fontSize: boundTextFont.fontSize,\n        baseline: boundTextFont.baseline,\n      });\n    }\n    handleBindTextResize(\n      element,\n      elementsMap,\n      transformHandleDirection,\n      shouldMaintainAspectRatio,\n    );\n  }\n};\n\nexport const resizeMultipleElements = (\n  originalElements: PointerDownState[\"originalElements\"],\n  selectedElements: readonly NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n  transformHandleType: \"nw\" | \"ne\" | \"sw\" | \"se\",\n  shouldResizeFromCenter: boolean,\n  pointerX: number,\n  pointerY: number,\n) => {\n  // map selected elements to the original elements. While it never should\n  // happen that pointerDownState.originalElements won't contain the selected\n  // elements during resize, this coupling isn't guaranteed, so to ensure\n  // type safety we need to transform only those elements we filter.\n  const targetElements = selectedElements.reduce(\n    (\n      acc: {\n        /** element at resize start */\n        orig: NonDeletedExcalidrawElement;\n        /** latest element */\n        latest: NonDeletedExcalidrawElement;\n      }[],\n      element,\n    ) => {\n      const origElement = originalElements.get(element.id);\n      if (origElement) {\n        acc.push({ orig: origElement, latest: element });\n      }\n      return acc;\n    },\n    [],\n  );\n\n  // getCommonBoundingBox() uses getBoundTextElement() which returns null for\n  // original elements from pointerDownState, so we have to find and add these\n  // bound text elements manually. Additionally, the coordinates of bound text\n  // elements aren't always up to date.\n  const boundTextElements = targetElements.reduce((acc, { orig }) => {\n    if (!isLinearElement(orig)) {\n      return acc;\n    }\n    const textId = getBoundTextElementId(orig);\n    if (!textId) {\n      return acc;\n    }\n    const text = originalElements.get(textId) ?? null;\n    if (!isBoundToContainer(text)) {\n      return acc;\n    }\n    const xy = LinearElementEditor.getBoundTextElementPosition(\n      orig,\n      text,\n      elementsMap,\n    );\n    return [...acc, { ...text, ...xy }];\n  }, [] as ExcalidrawTextElementWithContainer[]);\n\n  const { minX, minY, maxX, maxY, midX, midY } = getCommonBoundingBox(\n    targetElements.map(({ orig }) => orig).concat(boundTextElements),\n  );\n\n  // const originalHeight = maxY - minY;\n  // const originalWidth = maxX - minX;\n\n  const direction = transformHandleType;\n\n  const mapDirectionsToAnchors: Record<typeof direction, Point> = {\n    ne: [minX, maxY],\n    se: [minX, minY],\n    sw: [maxX, minY],\n    nw: [maxX, maxY],\n  };\n\n  // anchor point must be on the opposite side of the dragged selection handle\n  // or be the center of the selection if shouldResizeFromCenter\n  const [anchorX, anchorY]: Point = shouldResizeFromCenter\n    ? [midX, midY]\n    : mapDirectionsToAnchors[direction];\n\n  const scale =\n    Math.max(\n      Math.abs(pointerX - anchorX) / (maxX - minX) || 0,\n      Math.abs(pointerY - anchorY) / (maxY - minY) || 0,\n    ) * (shouldResizeFromCenter ? 2 : 1);\n\n  if (scale === 0) {\n    return;\n  }\n\n  const mapDirectionsToPointerPositions: Record<\n    typeof direction,\n    [x: boolean, y: boolean]\n  > = {\n    ne: [pointerX >= anchorX, pointerY <= anchorY],\n    se: [pointerX >= anchorX, pointerY >= anchorY],\n    sw: [pointerX <= anchorX, pointerY >= anchorY],\n    nw: [pointerX <= anchorX, pointerY <= anchorY],\n  };\n\n  /**\n   * to flip an element:\n   * 1. determine over which axis is the element being flipped\n   *    (could be x, y, or both) indicated by `flipFactorX` & `flipFactorY`\n   * 2. shift element's position by the amount of width or height (or both) or\n   *    mirror points in the case of linear & freedraw elemenets\n   * 3. adjust element angle\n   */\n  const [flipFactorX, flipFactorY] = mapDirectionsToPointerPositions[\n    direction\n  ].map((condition) => (condition ? 1 : -1));\n  const isFlippedByX = flipFactorX < 0;\n  const isFlippedByY = flipFactorY < 0;\n\n  const elementsAndUpdates: {\n    element: NonDeletedExcalidrawElement;\n    update: Mutable<\n      Pick<ExcalidrawElement, \"x\" | \"y\" | \"width\" | \"height\" | \"angle\">\n    > & {\n      points?: ExcalidrawLinearElement[\"points\"];\n      fontSize?: ExcalidrawTextElement[\"fontSize\"];\n      baseline?: ExcalidrawTextElement[\"baseline\"];\n      scale?: ExcalidrawImageElement[\"scale\"];\n      boundTextFontSize?: ExcalidrawTextElement[\"fontSize\"];\n    };\n  }[] = [];\n\n  for (const { orig, latest } of targetElements) {\n    // bounded text elements are updated along with their container elements\n    if (isTextElement(orig) && isBoundToContainer(orig)) {\n      continue;\n    }\n\n    const width = orig.width * scale;\n    const height = orig.height * scale;\n    const angle = normalizeAngle(orig.angle * flipFactorX * flipFactorY);\n\n    const isLinearOrFreeDraw = isLinearElement(orig) || isFreeDrawElement(orig);\n    const offsetX = orig.x - anchorX;\n    const offsetY = orig.y - anchorY;\n    const shiftX = isFlippedByX && !isLinearOrFreeDraw ? width : 0;\n    const shiftY = isFlippedByY && !isLinearOrFreeDraw ? height : 0;\n    const x = anchorX + flipFactorX * (offsetX * scale + shiftX);\n    const y = anchorY + flipFactorY * (offsetY * scale + shiftY);\n\n    const rescaledPoints = rescalePointsInElement(\n      orig,\n      width * flipFactorX,\n      height * flipFactorY,\n      false,\n    );\n\n    const update: typeof elementsAndUpdates[0][\"update\"] = {\n      x,\n      y,\n      width,\n      height,\n      angle,\n      ...rescaledPoints,\n    };\n\n    if (isImageElement(orig) && targetElements.length === 1) {\n      update.scale = [orig.scale[0] * flipFactorX, orig.scale[1] * flipFactorY];\n    }\n\n    if (isLinearElement(orig) && (isFlippedByX || isFlippedByY)) {\n      const origBounds = getElementPointsCoords(orig, orig.points);\n      const newBounds = getElementPointsCoords(\n        { ...orig, x, y },\n        rescaledPoints.points!,\n      );\n      const origXY = [orig.x, orig.y];\n      const newXY = [x, y];\n\n      const linearShift = (axis: \"x\" | \"y\") => {\n        const i = axis === \"x\" ? 0 : 1;\n        return (\n          (newBounds[i + 2] -\n            newXY[i] -\n            (origXY[i] - origBounds[i]) * scale +\n            (origBounds[i + 2] - origXY[i]) * scale -\n            (newXY[i] - newBounds[i])) /\n          2\n        );\n      };\n\n      if (isFlippedByX) {\n        update.x -= linearShift(\"x\");\n      }\n\n      if (isFlippedByY) {\n        update.y -= linearShift(\"y\");\n      }\n    }\n\n    if (isTextElement(orig)) {\n      const metrics = measureFontSizeFromWidth(\n        orig,\n        elementsMap,\n        width,\n        height,\n      );\n      if (!metrics) {\n        return;\n      }\n      update.fontSize = metrics.size;\n      update.baseline = metrics.baseline;\n    }\n\n    const boundTextElement = originalElements.get(\n      getBoundTextElementId(orig) ?? \"\",\n    ) as ExcalidrawTextElementWithContainer | undefined;\n\n    if (boundTextElement) {\n      const newFontSize = boundTextElement.fontSize * scale;\n      if (newFontSize < MIN_FONT_SIZE) {\n        return;\n      }\n      update.boundTextFontSize = newFontSize;\n    }\n\n    elementsAndUpdates.push({\n      element: latest,\n      update,\n    });\n  }\n\n  const elementsToUpdate = elementsAndUpdates.map(({ element }) => element);\n\n  for (const {\n    element,\n    update: { boundTextFontSize, ...update },\n  } of elementsAndUpdates) {\n    const { width, height, angle } = update;\n\n    mutateElement(element, update, false);\n\n    updateBoundElements(element, elementsMap, {\n      simultaneouslyUpdated: elementsToUpdate,\n      newSize: { width, height },\n    });\n\n    const boundTextElement = getBoundTextElement(element, elementsMap);\n    if (boundTextElement && boundTextFontSize) {\n      mutateElement(\n        boundTextElement,\n        {\n          fontSize: boundTextFontSize,\n          angle: isLinearElement(element) ? undefined : angle,\n        },\n        false,\n      );\n      handleBindTextResize(element, elementsMap, transformHandleType, true);\n    }\n  }\n\n  Scene.getScene(elementsAndUpdates[0].element)?.informMutation();\n};\n\nconst rotateMultipleElements = (\n  originalElements: PointerDownState[\"originalElements\"],\n  elements: readonly NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n  pointerX: number,\n  pointerY: number,\n  shouldRotateWithDiscreteAngle: boolean,\n  centerX: number,\n  centerY: number,\n) => {\n  let centerAngle =\n    (5 * Math.PI) / 2 + Math.atan2(pointerY - centerY, pointerX - centerX);\n  if (shouldRotateWithDiscreteAngle) {\n    centerAngle += SHIFT_LOCKING_ANGLE / 2;\n    centerAngle -= centerAngle % SHIFT_LOCKING_ANGLE;\n  }\n\n  elements\n    .filter((element) => !isFrameLikeElement(element))\n    .forEach((element) => {\n      const [x1, y1, x2, y2] = getElementAbsoluteCoords(element, elementsMap);\n      const cx = (x1 + x2) / 2;\n      const cy = (y1 + y2) / 2;\n      const origAngle =\n        originalElements.get(element.id)?.angle ?? element.angle;\n      const [rotatedCX, rotatedCY] = rotate(\n        cx,\n        cy,\n        centerX,\n        centerY,\n        centerAngle + origAngle - element.angle,\n      );\n      mutateElement(\n        element,\n        {\n          x: element.x + (rotatedCX - cx),\n          y: element.y + (rotatedCY - cy),\n          angle: normalizeAngle(centerAngle + origAngle),\n        },\n        false,\n      );\n      updateBoundElements(element, elementsMap, {\n        simultaneouslyUpdated: elements,\n      });\n\n      const boundText = getBoundTextElement(element, elementsMap);\n      if (boundText && !isArrowElement(element)) {\n        mutateElement(\n          boundText,\n          {\n            x: boundText.x + (rotatedCX - cx),\n            y: boundText.y + (rotatedCY - cy),\n            angle: normalizeAngle(centerAngle + origAngle),\n          },\n          false,\n        );\n      }\n    });\n\n  Scene.getScene(elements[0])?.informMutation();\n};\n\nexport const getResizeOffsetXY = (\n  transformHandleType: MaybeTransformHandleType,\n  selectedElements: NonDeletedExcalidrawElement[],\n  elementsMap: ElementsMap,\n  x: number,\n  y: number,\n): [number, number] => {\n  const [x1, y1, x2, y2] =\n    selectedElements.length === 1\n      ? getElementAbsoluteCoords(selectedElements[0], elementsMap)\n      : getCommonBounds(selectedElements);\n  const cx = (x1 + x2) / 2;\n  const cy = (y1 + y2) / 2;\n  const angle = selectedElements.length === 1 ? selectedElements[0].angle : 0;\n  [x, y] = rotate(x, y, cx, cy, -angle);\n  switch (transformHandleType) {\n    case \"n\":\n      return rotate(x - (x1 + x2) / 2, y - y1, 0, 0, angle);\n    case \"s\":\n      return rotate(x - (x1 + x2) / 2, y - y2, 0, 0, angle);\n    case \"w\":\n      return rotate(x - x1, y - (y1 + y2) / 2, 0, 0, angle);\n    case \"e\":\n      return rotate(x - x2, y - (y1 + y2) / 2, 0, 0, angle);\n    case \"nw\":\n      return rotate(x - x1, y - y1, 0, 0, angle);\n    case \"ne\":\n      return rotate(x - x2, y - y1, 0, 0, angle);\n    case \"sw\":\n      return rotate(x - x1, y - y2, 0, 0, angle);\n    case \"se\":\n      return rotate(x - x2, y - y2, 0, 0, angle);\n    default:\n      return [0, 0];\n  }\n};\n\nexport const getResizeArrowDirection = (\n  transformHandleType: MaybeTransformHandleType,\n  element: NonDeleted<ExcalidrawLinearElement>,\n): \"origin\" | \"end\" => {\n  const [, [px, py]] = element.points;\n  const isResizeEnd =\n    (transformHandleType === \"nw\" && (px < 0 || py < 0)) ||\n    (transformHandleType === \"ne\" && px >= 0) ||\n    (transformHandleType === \"sw\" && px <= 0) ||\n    (transformHandleType === \"se\" && (px > 0 || py > 0));\n  return isResizeEnd ? \"end\" : \"origin\";\n};\n", "import { updateBoundElements } from \"./binding\";\nimport { Bounds, getCommonBounds } from \"./bounds\";\nimport { mutateElement } from \"./mutateElement\";\nimport { getPerfectElementSize } from \"./sizeHelpers\";\nimport { NonDeletedExcalidrawElement } from \"./types\";\nimport { AppState, PointerDownState } from \"../types\";\nimport { getBoundTextElement } from \"./textElement\";\nimport { getGridPoint } from \"../math\";\nimport Scene from \"../scene/Scene\";\nimport { isArrowElement, isFrameLikeElement } from \"./typeChecks\";\n\nexport const dragSelectedElements = (\n  pointerDownState: PointerDownState,\n  selectedElements: NonDeletedExcalidrawElement[],\n  offset: { x: number; y: number },\n  appState: AppState,\n  scene: Scene,\n  snapOffset: {\n    x: number;\n    y: number;\n  },\n  gridSize: AppState[\"gridSize\"],\n) => {\n  // we do not want a frame and its elements to be selected at the same time\n  // but when it happens (due to some bug), we want to avoid updating element\n  // in the frame twice, hence the use of set\n  const elementsToUpdate = new Set<NonDeletedExcalidrawElement>(\n    selectedElements,\n  );\n  const frames = selectedElements\n    .filter((e) => isFrameLikeElement(e))\n    .map((f) => f.id);\n\n  if (frames.length > 0) {\n    for (const element of scene.getNonDeletedElements()) {\n      if (element.frameId !== null && frames.includes(element.frameId)) {\n        elementsToUpdate.add(element);\n      }\n    }\n  }\n\n  const commonBounds = getCommonBounds(\n    Array.from(elementsToUpdate).map(\n      (el) => pointerDownState.originalElements.get(el.id) ?? el,\n    ),\n  );\n  const adjustedOffset = calculateOffset(\n    commonBounds,\n    offset,\n    snapOffset,\n    gridSize,\n  );\n\n  elementsToUpdate.forEach((element) => {\n    updateElementCoords(pointerDownState, element, adjustedOffset);\n    if (\n      // skip arrow labels since we calculate its position during render\n      !isArrowElement(element)\n    ) {\n      const textElement = getBoundTextElement(\n        element,\n        scene.getNonDeletedElementsMap(),\n      );\n      if (textElement) {\n        updateElementCoords(pointerDownState, textElement, adjustedOffset);\n      }\n    }\n    updateBoundElements(element, scene.getElementsMapIncludingDeleted(), {\n      simultaneouslyUpdated: Array.from(elementsToUpdate),\n    });\n  });\n};\n\nconst calculateOffset = (\n  commonBounds: Bounds,\n  dragOffset: { x: number; y: number },\n  snapOffset: { x: number; y: number },\n  gridSize: AppState[\"gridSize\"],\n): { x: number; y: number } => {\n  const [x, y] = commonBounds;\n  let nextX = x + dragOffset.x + snapOffset.x;\n  let nextY = y + dragOffset.y + snapOffset.y;\n\n  if (snapOffset.x === 0 || snapOffset.y === 0) {\n    const [nextGridX, nextGridY] = getGridPoint(\n      x + dragOffset.x,\n      y + dragOffset.y,\n      gridSize,\n    );\n\n    if (snapOffset.x === 0) {\n      nextX = nextGridX;\n    }\n\n    if (snapOffset.y === 0) {\n      nextY = nextGridY;\n    }\n  }\n  return {\n    x: nextX - x,\n    y: nextY - y,\n  };\n};\n\nconst updateElementCoords = (\n  pointerDownState: PointerDownState,\n  element: NonDeletedExcalidrawElement,\n  dragOffset: { x: number; y: number },\n) => {\n  const originalElement =\n    pointerDownState.originalElements.get(element.id) ?? element;\n\n  const nextX = originalElement.x + dragOffset.x;\n  const nextY = originalElement.y + dragOffset.y;\n\n  mutateElement(element, {\n    x: nextX,\n    y: nextY,\n  });\n};\n\nexport const getDragOffsetXY = (\n  selectedElements: NonDeletedExcalidrawElement[],\n  x: number,\n  y: number,\n): [number, number] => {\n  const [x1, y1] = getCommonBounds(selectedElements);\n  return [x - x1, y - y1];\n};\n\nexport const dragNewElement = (\n  draggingElement: NonDeletedExcalidrawElement,\n  elementType: AppState[\"activeTool\"][\"type\"],\n  originX: number,\n  originY: number,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  shouldMaintainAspectRatio: boolean,\n  shouldResizeFromCenter: boolean,\n  /** whether to keep given aspect ratio when `isResizeWithSidesSameLength` is\n      true */\n  widthAspectRatio?: number | null,\n  originOffset: {\n    x: number;\n    y: number;\n  } | null = null,\n) => {\n  if (shouldMaintainAspectRatio && draggingElement.type !== \"selection\") {\n    if (widthAspectRatio) {\n      height = width / widthAspectRatio;\n    } else {\n      // Depending on where the cursor is at (x, y) relative to where the starting point is\n      // (originX, originY), we use ONLY width or height to control size increase.\n      // This allows the cursor to always \"stick\" to one of the sides of the bounding box.\n      if (Math.abs(y - originY) > Math.abs(x - originX)) {\n        ({ width, height } = getPerfectElementSize(\n          elementType,\n          height,\n          x < originX ? -width : width,\n        ));\n      } else {\n        ({ width, height } = getPerfectElementSize(\n          elementType,\n          width,\n          y < originY ? -height : height,\n        ));\n      }\n\n      if (height < 0) {\n        height = -height;\n      }\n    }\n  }\n\n  let newX = x < originX ? originX - width : originX;\n  let newY = y < originY ? originY - height : originY;\n\n  if (shouldResizeFromCenter) {\n    width += width;\n    height += height;\n    newX = originX - width / 2;\n    newY = originY - height / 2;\n  }\n\n  if (width !== 0 && height !== 0) {\n    mutateElement(draggingElement, {\n      x: newX + (originOffset?.x ?? 0),\n      y: newY + (originOffset?.y ?? 0),\n      width,\n      height,\n    });\n  }\n};\n", "import { NonDeletedExcalidrawElement } from \"./types\";\nimport { getSelectedElements } from \"../scene\";\nimport { UIAppState } from \"../types\";\n\nexport const showSelectedShapeActions = (\n  appState: UIAppState,\n  elements: readonly NonDeletedExcalidrawElement[],\n) =>\n  Boolean(\n    !appState.viewModeEnabled &&\n      ((appState.activeTool.type !== \"custom\" &&\n        (appState.editingElement ||\n          (appState.activeTool.type !== \"selection\" &&\n            appState.activeTool.type !== \"eraser\" &&\n            appState.activeTool.type !== \"hand\" &&\n            appState.activeTool.type !== \"laser\"))) ||\n        getSelectedElements(elements, appState).length),\n  );\n", "import {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n} from \"./types\";\nimport { isInvisiblySmallElement } from \"./sizeHelpers\";\nimport { isLinearElementType } from \"./typeChecks\";\n\nexport {\n  newElement,\n  newTextElement,\n  updateTextElement,\n  refreshTextDimensions,\n  newLinearElement,\n  newImageElement,\n  duplicateElement,\n} from \"./newElement\";\nexport {\n  getElementAbsoluteCoords,\n  getElementBounds,\n  getCommonBounds,\n  getDiamondPoints,\n  getArrowheadPoints,\n  getClosestElementBounds,\n} from \"./bounds\";\n\nexport {\n  OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  getTransformHandlesFromCoords,\n  getTransformHandles,\n} from \"./transformHandles\";\nexport {\n  hitTest,\n  isHittingElementBoundingBoxWithoutHittingElement,\n} from \"./collision\";\nexport {\n  resizeTest,\n  getCursorForResizingElement,\n  getElementWithTransformHandleType,\n  getTransformHandleTypeFromCoords,\n} from \"./resizeTest\";\nexport {\n  transformElements,\n  getResizeOffsetXY,\n  getResizeArrowDirection,\n} from \"./resizeElements\";\nexport {\n  dragSelectedElements,\n  getDragOffsetXY,\n  dragNewElement,\n} from \"./dragElements\";\nexport { isTextElement, isExcalidrawElement } from \"./typeChecks\";\nexport { redrawTextBoundingBox } from \"./textElement\";\nexport {\n  getPerfectElementSize,\n  getLockedLinearCursorAlignSize,\n  isInvisiblySmallElement,\n  resizePerfectLineForNWHandler,\n  getNormalizedDimensions,\n} from \"./sizeHelpers\";\nexport { showSelectedShapeActions } from \"./showSelectedShapeActions\";\n\nexport const getSceneVersion = (elements: readonly ExcalidrawElement[]) =>\n  elements.reduce((acc, el) => acc + el.version, 0);\n\nexport const getVisibleElements = (elements: readonly ExcalidrawElement[]) =>\n  elements.filter(\n    (el) => !el.isDeleted && !isInvisiblySmallElement(el),\n  ) as readonly NonDeletedExcalidrawElement[];\n\nexport const getNonDeletedElements = <T extends ExcalidrawElement>(\n  elements: readonly T[],\n) =>\n  elements.filter((element) => !element.isDeleted) as readonly NonDeleted<T>[];\n\nexport const isNonDeletedElement = <T extends ExcalidrawElement>(\n  element: T,\n): element is NonDeleted<T> => !element.isDeleted;\n\nconst _clearElements = (\n  elements: readonly ExcalidrawElement[],\n): ExcalidrawElement[] =>\n  getNonDeletedElements(elements).map((element) =>\n    isLinearElementType(element.type)\n      ? { ...element, lastCommittedPoint: null }\n      : element,\n  );\n\nexport const clearElementsForDatabase = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForExport = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForLocalStorage = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n", "import {\n  ElementsMap,\n  ElementsMapOrArray,\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n} from \"../element/types\";\nimport { getElementAbsoluteCoords, getElementBounds } from \"../element\";\nimport { AppState, InteractiveCanvasAppState } from \"../types\";\nimport { isBoundToContainer, isFrameLikeElement } from \"../element/typeChecks\";\nimport {\n  elementOverlapsWithFrame,\n  getContainingFrame,\n  getFrameChildren,\n} from \"../frame\";\nimport { isShallowEqual } from \"../utils\";\nimport { isElementInViewport } from \"../element/sizeHelpers\";\n\n/**\n * Frames and their containing elements are not to be selected at the same time.\n * Given an array of selected elements, if there are frames and their containing elements\n * we only keep the frames.\n * @param selectedElements\n */\nexport const excludeElementsInFramesFromSelection = <\n  T extends ExcalidrawElement,\n>(\n  selectedElements: readonly T[],\n) => {\n  const framesInSelection = new Set<T[\"id\"]>();\n\n  selectedElements.forEach((element) => {\n    if (isFrameLikeElement(element)) {\n      framesInSelection.add(element.id);\n    }\n  });\n\n  return selectedElements.filter((element) => {\n    if (element.frameId && framesInSelection.has(element.frameId)) {\n      return false;\n    }\n    return true;\n  });\n};\n\nexport const getElementsWithinSelection = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  selection: NonDeletedExcalidrawElement,\n  elementsMap: ElementsMap,\n  excludeElementsInFrames: boolean = true,\n) => {\n  const [selectionX1, selectionY1, selectionX2, selectionY2] =\n    getElementAbsoluteCoords(selection, elementsMap);\n\n  let elementsInSelection = elements.filter((element) => {\n    let [elementX1, elementY1, elementX2, elementY2] = getElementBounds(\n      element,\n      elementsMap,\n    );\n\n    const containingFrame = getContainingFrame(element);\n    if (containingFrame) {\n      const [fx1, fy1, fx2, fy2] = getElementBounds(\n        containingFrame,\n        elementsMap,\n      );\n\n      elementX1 = Math.max(fx1, elementX1);\n      elementY1 = Math.max(fy1, elementY1);\n      elementX2 = Math.min(fx2, elementX2);\n      elementY2 = Math.min(fy2, elementY2);\n    }\n\n    return (\n      element.locked === false &&\n      element.type !== \"selection\" &&\n      !isBoundToContainer(element) &&\n      selectionX1 <= elementX1 &&\n      selectionY1 <= elementY1 &&\n      selectionX2 >= elementX2 &&\n      selectionY2 >= elementY2\n    );\n  });\n\n  elementsInSelection = excludeElementsInFrames\n    ? excludeElementsInFramesFromSelection(elementsInSelection)\n    : elementsInSelection;\n\n  elementsInSelection = elementsInSelection.filter((element) => {\n    const containingFrame = getContainingFrame(element);\n\n    if (containingFrame) {\n      return elementOverlapsWithFrame(element, containingFrame, elementsMap);\n    }\n\n    return true;\n  });\n\n  return elementsInSelection;\n};\n\nexport const getVisibleAndNonSelectedElements = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  selectedElements: readonly NonDeletedExcalidrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const selectedElementsSet = new Set(\n    selectedElements.map((element) => element.id),\n  );\n  return elements.filter((element) => {\n    const isVisible = isElementInViewport(\n      element,\n      appState.width,\n      appState.height,\n      appState,\n      elementsMap,\n    );\n\n    return !selectedElementsSet.has(element.id) && isVisible;\n  });\n};\n\n// FIXME move this into the editor instance to keep utility methods stateless\nexport const isSomeElementSelected = (function () {\n  let lastElements: readonly NonDeletedExcalidrawElement[] | null = null;\n  let lastSelectedElementIds: AppState[\"selectedElementIds\"] | null = null;\n  let isSelected: boolean | null = null;\n\n  const ret = (\n    elements: readonly NonDeletedExcalidrawElement[],\n    appState: Pick<AppState, \"selectedElementIds\">,\n  ): boolean => {\n    if (\n      isSelected != null &&\n      elements === lastElements &&\n      appState.selectedElementIds === lastSelectedElementIds\n    ) {\n      return isSelected;\n    }\n\n    isSelected = elements.some(\n      (element) => appState.selectedElementIds[element.id],\n    );\n    lastElements = elements;\n    lastSelectedElementIds = appState.selectedElementIds;\n\n    return isSelected;\n  };\n\n  ret.clearCache = () => {\n    lastElements = null;\n    lastSelectedElementIds = null;\n    isSelected = null;\n  };\n\n  return ret;\n})();\n\n/**\n * Returns common attribute (picked by `getAttribute` callback) of selected\n *  elements. If elements don't share the same value, returns `null`.\n */\nexport const getCommonAttributeOfSelectedElements = <T>(\n  elements: readonly NonDeletedExcalidrawElement[],\n  appState: Pick<AppState, \"selectedElementIds\">,\n  getAttribute: (element: ExcalidrawElement) => T,\n): T | null => {\n  const attributes = Array.from(\n    new Set(\n      getSelectedElements(elements, appState).map((element) =>\n        getAttribute(element),\n      ),\n    ),\n  );\n  return attributes.length === 1 ? attributes[0] : null;\n};\n\nexport const getSelectedElements = (\n  elements: ElementsMapOrArray,\n  appState: Pick<InteractiveCanvasAppState, \"selectedElementIds\">,\n  opts?: {\n    includeBoundTextElement?: boolean;\n    includeElementsInFrames?: boolean;\n  },\n) => {\n  const selectedElements: ExcalidrawElement[] = [];\n  for (const element of elements.values()) {\n    if (appState.selectedElementIds[element.id]) {\n      selectedElements.push(element);\n      continue;\n    }\n    if (\n      opts?.includeBoundTextElement &&\n      isBoundToContainer(element) &&\n      appState.selectedElementIds[element?.containerId]\n    ) {\n      selectedElements.push(element);\n      continue;\n    }\n  }\n\n  if (opts?.includeElementsInFrames) {\n    const elementsToInclude: ExcalidrawElement[] = [];\n    selectedElements.forEach((element) => {\n      if (isFrameLikeElement(element)) {\n        getFrameChildren(elements, element.id).forEach((e) =>\n          elementsToInclude.push(e),\n        );\n      }\n      elementsToInclude.push(element);\n    });\n\n    return elementsToInclude;\n  }\n\n  return selectedElements;\n};\n\nexport const getTargetElements = (\n  elements: ElementsMapOrArray,\n  appState: Pick<AppState, \"selectedElementIds\" | \"editingElement\">,\n) =>\n  appState.editingElement\n    ? [appState.editingElement]\n    : getSelectedElements(elements, appState, {\n        includeBoundTextElement: true,\n      });\n\n/**\n * returns prevState's selectedElementids if no change from previous, so as to\n * retain reference identity for memoization\n */\nexport const makeNextSelectedElementIds = (\n  nextSelectedElementIds: AppState[\"selectedElementIds\"],\n  prevState: Pick<AppState, \"selectedElementIds\">,\n) => {\n  if (isShallowEqual(prevState.selectedElementIds, nextSelectedElementIds)) {\n    return prevState.selectedElementIds;\n  }\n\n  return nextSelectedElementIds;\n};\n", "import { AppState, PointerCoords, Zoom } from \"../types\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport {\n  getCommonBounds,\n  getClosestElementBounds,\n  getVisibleElements,\n} from \"../element\";\n\nimport {\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n} from \"../utils\";\n\nconst isOutsideViewPort = (appState: AppState, cords: Array<number>) => {\n  const [x1, y1, x2, y2] = cords;\n  const { x: viewportX1, y: viewportY1 } = sceneCoordsToViewportCoords(\n    { sceneX: x1, sceneY: y1 },\n    appState,\n  );\n  const { x: viewportX2, y: viewportY2 } = sceneCoordsToViewportCoords(\n    { sceneX: x2, sceneY: y2 },\n    appState,\n  );\n  return (\n    viewportX2 - viewportX1 > appState.width ||\n    viewportY2 - viewportY1 > appState.height\n  );\n};\n\nexport const centerScrollOn = ({\n  scenePoint,\n  viewportDimensions,\n  zoom,\n}: {\n  scenePoint: PointerCoords;\n  viewportDimensions: { height: number; width: number };\n  zoom: Zoom;\n}) => {\n  return {\n    scrollX: viewportDimensions.width / 2 / zoom.value - scenePoint.x,\n    scrollY: viewportDimensions.height / 2 / zoom.value - scenePoint.y,\n  };\n};\n\nexport const calculateScrollCenter = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n): { scrollX: number; scrollY: number } => {\n  elements = getVisibleElements(elements);\n\n  if (!elements.length) {\n    return {\n      scrollX: 0,\n      scrollY: 0,\n    };\n  }\n  let [x1, y1, x2, y2] = getCommonBounds(elements);\n\n  if (isOutsideViewPort(appState, [x1, y1, x2, y2])) {\n    [x1, y1, x2, y2] = getClosestElementBounds(\n      elements,\n      viewportCoordsToSceneCoords(\n        { clientX: appState.scrollX, clientY: appState.scrollY },\n        appState,\n      ),\n    );\n  }\n\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n\n  return centerScrollOn({\n    scenePoint: { x: centerX, y: centerY },\n    viewportDimensions: { width: appState.width, height: appState.height },\n    zoom: appState.zoom,\n  });\n};\n", "import { MIN_ZOOM } from \"../constants\";\nimport { AppState, NormalizedZoomValue } from \"../types\";\n\nexport const getNormalizedZoom = (zoom: number): NormalizedZoomValue => {\n  return Math.max(MIN_ZOOM, Math.min(zoom, 30)) as NormalizedZoomValue;\n};\n\nexport const getStateForZoom = (\n  {\n    viewportX,\n    viewportY,\n    nextZoom,\n  }: {\n    viewportX: number;\n    viewportY: number;\n    nextZoom: NormalizedZoomValue;\n  },\n  appState: AppState,\n) => {\n  const appLayerX = viewportX - appState.offsetLeft;\n  const appLayerY = viewportY - appState.offsetTop;\n\n  const currentZoom = appState.zoom.value;\n\n  // get original scroll position without zoom\n  const baseScrollX = appState.scrollX + (appLayerX - appLayerX / currentZoom);\n  const baseScrollY = appState.scrollY + (appLayerY - appLayerY / currentZoom);\n\n  // get scroll offsets for target zoom level\n  const zoomOffsetScrollX = -(appLayerX - appLayerX / nextZoom);\n  const zoomOffsetScrollY = -(appLayerY - appLayerY / nextZoom);\n\n  return {\n    scrollX: baseScrollX + zoomOffsetScrollX,\n    scrollY: baseScrollY + zoomOffsetScrollY,\n    zoom: {\n      value: nextZoom,\n    },\n  };\n};\n", "export {\n  isSomeElementSelected,\n  getElementsWithinSelection,\n  getCommonAttributeOfSelectedElements,\n  getSelectedElements,\n  getTargetElements,\n} from \"./selection\";\nexport { calculateScrollCenter } from \"./scroll\";\nexport {\n  hasBackground,\n  hasStrokeWidth,\n  hasStrokeStyle,\n  canHaveArrowheads,\n  canChangeRoundness,\n  getElementAtPosition,\n  getElementsAtPosition,\n} from \"./comparisons\";\nexport { getNormalizedZoom } from \"./zoom\";\n", "import { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport { KEYS } from \"../keys\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { t } from \"../i18n\";\nimport { register } from \"./register\";\nimport { getNonDeletedElements } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { AppState } from \"../types\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport { getElementsInGroup } from \"../groups\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { fixBindingsAfterDeletion } from \"../element/binding\";\nimport { isBoundToContainer, isFrameLikeElement } from \"../element/typeChecks\";\nimport { updateActiveTool } from \"../utils\";\nimport { TrashIcon } from \"../components/icons\";\n\nconst deleteSelectedElements = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n) => {\n  const framesToBeDeleted = new Set(\n    getSelectedElements(\n      elements.filter((el) => isFrameLikeElement(el)),\n      appState,\n    ).map((el) => el.id),\n  );\n\n  return {\n    elements: elements.map((el) => {\n      if (appState.selectedElementIds[el.id]) {\n        return newElementWith(el, { isDeleted: true });\n      }\n\n      if (el.frameId && framesToBeDeleted.has(el.frameId)) {\n        return newElementWith(el, { isDeleted: true });\n      }\n\n      if (\n        isBoundToContainer(el) &&\n        appState.selectedElementIds[el.containerId]\n      ) {\n        return newElementWith(el, { isDeleted: true });\n      }\n      return el;\n    }),\n    appState: {\n      ...appState,\n      selectedElementIds: {},\n      selectedGroupIds: {},\n    },\n  };\n};\n\nconst handleGroupEditingState = (\n  appState: AppState,\n  elements: readonly ExcalidrawElement[],\n): AppState => {\n  if (appState.editingGroupId) {\n    const siblingElements = getElementsInGroup(\n      getNonDeletedElements(elements),\n      appState.editingGroupId!,\n    );\n    if (siblingElements.length) {\n      return {\n        ...appState,\n        selectedElementIds: { [siblingElements[0].id]: true },\n      };\n    }\n  }\n  return appState;\n};\n\nexport const actionDeleteSelected = register({\n  name: \"deleteSelectedElements\",\n  trackEvent: { category: \"element\", action: \"delete\" },\n  perform: (elements, appState, formData, app) => {\n    if (appState.editingLinearElement) {\n      const {\n        elementId,\n        selectedPointsIndices,\n        startBindingElement,\n        endBindingElement,\n      } = appState.editingLinearElement;\n      const elementsMap = app.scene.getNonDeletedElementsMap();\n      const element = LinearElementEditor.getElement(elementId, elementsMap);\n      if (!element) {\n        return false;\n      }\n      // case: no point selected \u2192 do nothing, as deleting the whole element\n      // is most likely a mistake, where you wanted to delete a specific point\n      // but failed to select it (or you thought it's selected, while it was\n      // only in a hover state)\n      if (selectedPointsIndices == null) {\n        return false;\n      }\n\n      // case: deleting last remaining point\n      if (element.points.length < 2) {\n        const nextElements = elements.map((el) => {\n          if (el.id === element.id) {\n            return newElementWith(el, { isDeleted: true });\n          }\n          return el;\n        });\n        const nextAppState = handleGroupEditingState(appState, nextElements);\n\n        return {\n          elements: nextElements,\n          appState: {\n            ...nextAppState,\n            editingLinearElement: null,\n          },\n          commitToHistory: false,\n        };\n      }\n\n      // We cannot do this inside `movePoint` because it is also called\n      // when deleting the uncommitted point (which hasn't caused any binding)\n      const binding = {\n        startBindingElement: selectedPointsIndices?.includes(0)\n          ? null\n          : startBindingElement,\n        endBindingElement: selectedPointsIndices?.includes(\n          element.points.length - 1,\n        )\n          ? null\n          : endBindingElement,\n      };\n\n      LinearElementEditor.deletePoints(element, selectedPointsIndices);\n\n      return {\n        elements,\n        appState: {\n          ...appState,\n          editingLinearElement: {\n            ...appState.editingLinearElement,\n            ...binding,\n            selectedPointsIndices:\n              selectedPointsIndices?.[0] > 0\n                ? [selectedPointsIndices[0] - 1]\n                : [0],\n          },\n        },\n        commitToHistory: true,\n      };\n    }\n    let { elements: nextElements, appState: nextAppState } =\n      deleteSelectedElements(elements, appState);\n    fixBindingsAfterDeletion(\n      nextElements,\n      elements.filter(({ id }) => appState.selectedElementIds[id]),\n    );\n\n    nextAppState = handleGroupEditingState(nextAppState, nextElements);\n\n    return {\n      elements: nextElements,\n      appState: {\n        ...nextAppState,\n        activeTool: updateActiveTool(appState, { type: \"selection\" }),\n        multiElement: null,\n        activeEmbeddable: null,\n      },\n      commitToHistory: isSomeElementSelected(\n        getNonDeletedElements(elements),\n        appState,\n      ),\n    };\n  },\n  contextItemLabel: \"labels.delete\",\n  keyTest: (event, appState, elements) =>\n    (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE) &&\n    !event[KEYS.CTRL_OR_CMD],\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={TrashIcon}\n      title={t(\"labels.delete\")}\n      aria-label={t(\"labels.delete\")}\n      onClick={() => updateData(null)}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n", "import { bumpVersion } from \"./element/mutateElement\";\nimport { isFrameLikeElement } from \"./element/typeChecks\";\nimport { ExcalidrawElement, ExcalidrawFrameLikeElement } from \"./element/types\";\nimport { getElementsInGroup } from \"./groups\";\nimport { getSelectedElements } from \"./scene\";\nimport Scene from \"./scene/Scene\";\nimport { AppState } from \"./types\";\nimport { arrayToMap, findIndex, findLastIndex } from \"./utils\";\n\nconst isOfTargetFrame = (element: ExcalidrawElement, frameId: string) => {\n  return element.frameId === frameId || element.id === frameId;\n};\n\n/**\n * Returns indices of elements to move based on selected elements.\n * Includes contiguous deleted elements that are between two selected elements,\n *  e.g.: [0 (selected), 1 (deleted), 2 (deleted), 3 (selected)]\n *\n * Specified elements (elementsToBeMoved) take precedence over\n * appState.selectedElementsIds\n */\nconst getIndicesToMove = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  elementsToBeMoved?: readonly ExcalidrawElement[],\n) => {\n  let selectedIndices: number[] = [];\n  let deletedIndices: number[] = [];\n  let includeDeletedIndex = null;\n  let index = -1;\n  const selectedElementIds = arrayToMap(\n    elementsToBeMoved\n      ? elementsToBeMoved\n      : getSelectedElements(elements, appState, {\n          includeBoundTextElement: true,\n          includeElementsInFrames: true,\n        }),\n  );\n  while (++index < elements.length) {\n    const element = elements[index];\n    if (selectedElementIds.get(element.id)) {\n      if (deletedIndices.length) {\n        selectedIndices = selectedIndices.concat(deletedIndices);\n        deletedIndices = [];\n      }\n      selectedIndices.push(index);\n      includeDeletedIndex = index + 1;\n    } else if (element.isDeleted && includeDeletedIndex === index) {\n      includeDeletedIndex = index + 1;\n      deletedIndices.push(index);\n    } else {\n      deletedIndices = [];\n    }\n  }\n  return selectedIndices;\n};\n\nconst toContiguousGroups = (array: number[]) => {\n  let cursor = 0;\n  return array.reduce((acc, value, index) => {\n    if (index > 0 && array[index - 1] !== value - 1) {\n      cursor = ++cursor;\n    }\n    (acc[cursor] || (acc[cursor] = [])).push(value);\n    return acc;\n  }, [] as number[][]);\n};\n\n/**\n * @returns index of target element, consindering tightly-bound elements\n * (currently non-linear elements bound to a container) as a one unit.\n * If no binding present, returns `undefined`.\n */\nconst getTargetIndexAccountingForBinding = (\n  nextElement: ExcalidrawElement,\n  elements: readonly ExcalidrawElement[],\n  direction: \"left\" | \"right\",\n) => {\n  if (\"containerId\" in nextElement && nextElement.containerId) {\n    if (direction === \"left\") {\n      const containerElement = Scene.getScene(nextElement)!.getElement(\n        nextElement.containerId,\n      );\n      if (containerElement) {\n        return elements.indexOf(containerElement);\n      }\n    } else {\n      return elements.indexOf(nextElement);\n    }\n  } else {\n    const boundElementId = nextElement.boundElements?.find(\n      (binding) => binding.type !== \"arrow\",\n    )?.id;\n    if (boundElementId) {\n      if (direction === \"left\") {\n        return elements.indexOf(nextElement);\n      }\n\n      const boundTextElement =\n        Scene.getScene(nextElement)!.getElement(boundElementId);\n      if (boundTextElement) {\n        return elements.indexOf(boundTextElement);\n      }\n    }\n  }\n};\n\nconst getContiguousFrameRangeElements = (\n  allElements: readonly ExcalidrawElement[],\n  frameId: ExcalidrawFrameLikeElement[\"id\"],\n) => {\n  let rangeStart = -1;\n  let rangeEnd = -1;\n  allElements.forEach((element, index) => {\n    if (isOfTargetFrame(element, frameId)) {\n      if (rangeStart === -1) {\n        rangeStart = index;\n      }\n      rangeEnd = index;\n    }\n  });\n  if (rangeStart === -1) {\n    return [];\n  }\n  return allElements.slice(rangeStart, rangeEnd + 1);\n};\n\n/**\n * Returns next candidate index that's available to be moved to. Currently that\n *  is a non-deleted element, and not inside a group (unless we're editing it).\n */\nconst getTargetIndex = (\n  appState: AppState,\n  elements: readonly ExcalidrawElement[],\n  boundaryIndex: number,\n  direction: \"left\" | \"right\",\n  /**\n   * Frame id if moving frame children.\n   * If whole frame (including all children) is being moved, supply `null`.\n   */\n  containingFrame: ExcalidrawFrameLikeElement[\"id\"] | null,\n) => {\n  const sourceElement = elements[boundaryIndex];\n\n  const indexFilter = (element: ExcalidrawElement) => {\n    if (element.isDeleted) {\n      return false;\n    }\n    if (containingFrame) {\n      return element.frameId === containingFrame;\n    }\n    // if we're editing group, find closest sibling irrespective of whether\n    // there's a different-group element between them (for legacy reasons)\n    if (appState.editingGroupId) {\n      return element.groupIds.includes(appState.editingGroupId);\n    }\n    return true;\n  };\n\n  const candidateIndex =\n    direction === \"left\"\n      ? findLastIndex(\n          elements,\n          (el) => indexFilter(el),\n          Math.max(0, boundaryIndex - 1),\n        )\n      : findIndex(elements, (el) => indexFilter(el), boundaryIndex + 1);\n\n  const nextElement = elements[candidateIndex];\n\n  if (!nextElement) {\n    return -1;\n  }\n\n  if (appState.editingGroupId) {\n    if (\n      // candidate element is a sibling in current editing group \u2192 return\n      sourceElement?.groupIds.join(\"\") === nextElement?.groupIds.join(\"\")\n    ) {\n      return (\n        getTargetIndexAccountingForBinding(nextElement, elements, direction) ??\n        candidateIndex\n      );\n    } else if (!nextElement?.groupIds.includes(appState.editingGroupId)) {\n      // candidate element is outside current editing group \u2192 prevent\n      return -1;\n    }\n  }\n\n  if (\n    !containingFrame &&\n    (nextElement.frameId || isFrameLikeElement(nextElement))\n  ) {\n    const frameElements = getContiguousFrameRangeElements(\n      elements,\n      nextElement.frameId || nextElement.id,\n    );\n    return direction === \"left\"\n      ? elements.indexOf(frameElements[0])\n      : elements.indexOf(frameElements[frameElements.length - 1]);\n  }\n\n  if (!nextElement.groupIds.length) {\n    return (\n      getTargetIndexAccountingForBinding(nextElement, elements, direction) ??\n      candidateIndex\n    );\n  }\n\n  const siblingGroupId = appState.editingGroupId\n    ? nextElement.groupIds[\n        nextElement.groupIds.indexOf(appState.editingGroupId) - 1\n      ]\n    : nextElement.groupIds[nextElement.groupIds.length - 1];\n\n  const elementsInSiblingGroup = getElementsInGroup(elements, siblingGroupId);\n\n  if (elementsInSiblingGroup.length) {\n    // assumes getElementsInGroup() returned elements are sorted\n    // by zIndex (ascending)\n    return direction === \"left\"\n      ? elements.indexOf(elementsInSiblingGroup[0])\n      : elements.indexOf(\n          elementsInSiblingGroup[elementsInSiblingGroup.length - 1],\n        );\n  }\n\n  return candidateIndex;\n};\n\nconst getTargetElementsMap = <T extends ExcalidrawElement>(\n  elements: readonly T[],\n  indices: number[],\n) => {\n  return indices.reduce((acc, index) => {\n    const element = elements[index];\n    acc[element.id] = element;\n    return acc;\n  }, {} as Record<string, ExcalidrawElement>);\n};\n\nconst shiftElementsByOne = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  direction: \"left\" | \"right\",\n) => {\n  const indicesToMove = getIndicesToMove(elements, appState);\n  const targetElementsMap = getTargetElementsMap(elements, indicesToMove);\n  let groupedIndices = toContiguousGroups(indicesToMove);\n\n  if (direction === \"right\") {\n    groupedIndices = groupedIndices.reverse();\n  }\n\n  const selectedFrames = new Set<ExcalidrawFrameLikeElement[\"id\"]>(\n    indicesToMove\n      .filter((idx) => isFrameLikeElement(elements[idx]))\n      .map((idx) => elements[idx].id),\n  );\n\n  groupedIndices.forEach((indices, i) => {\n    const leadingIndex = indices[0];\n    const trailingIndex = indices[indices.length - 1];\n    const boundaryIndex = direction === \"left\" ? leadingIndex : trailingIndex;\n\n    const containingFrame = indices.some((idx) => {\n      const el = elements[idx];\n      return el.frameId && selectedFrames.has(el.frameId);\n    })\n      ? null\n      : elements[boundaryIndex]?.frameId;\n\n    const targetIndex = getTargetIndex(\n      appState,\n      elements,\n      boundaryIndex,\n      direction,\n      containingFrame,\n    );\n\n    if (targetIndex === -1 || boundaryIndex === targetIndex) {\n      return;\n    }\n\n    const leadingElements =\n      direction === \"left\"\n        ? elements.slice(0, targetIndex)\n        : elements.slice(0, leadingIndex);\n    const targetElements = elements.slice(leadingIndex, trailingIndex + 1);\n    const displacedElements =\n      direction === \"left\"\n        ? elements.slice(targetIndex, leadingIndex)\n        : elements.slice(trailingIndex + 1, targetIndex + 1);\n    const trailingElements =\n      direction === \"left\"\n        ? elements.slice(trailingIndex + 1)\n        : elements.slice(targetIndex + 1);\n\n    elements =\n      direction === \"left\"\n        ? [\n            ...leadingElements,\n            ...targetElements,\n            ...displacedElements,\n            ...trailingElements,\n          ]\n        : [\n            ...leadingElements,\n            ...displacedElements,\n            ...targetElements,\n            ...trailingElements,\n          ];\n  });\n\n  return elements.map((element) => {\n    if (targetElementsMap[element.id]) {\n      return bumpVersion(element);\n    }\n    return element;\n  });\n};\n\nconst shiftElementsToEnd = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  direction: \"left\" | \"right\",\n  containingFrame: ExcalidrawFrameLikeElement[\"id\"] | null,\n  elementsToBeMoved?: readonly ExcalidrawElement[],\n) => {\n  const indicesToMove = getIndicesToMove(elements, appState, elementsToBeMoved);\n  const targetElementsMap = getTargetElementsMap(elements, indicesToMove);\n  const displacedElements: ExcalidrawElement[] = [];\n\n  let leadingIndex: number;\n  let trailingIndex: number;\n  if (direction === \"left\") {\n    if (containingFrame) {\n      leadingIndex = findIndex(elements, (el) =>\n        isOfTargetFrame(el, containingFrame),\n      );\n    } else if (appState.editingGroupId) {\n      const groupElements = getElementsInGroup(\n        elements,\n        appState.editingGroupId,\n      );\n      if (!groupElements.length) {\n        return elements;\n      }\n      leadingIndex = elements.indexOf(groupElements[0]);\n    } else {\n      leadingIndex = 0;\n    }\n\n    trailingIndex = indicesToMove[indicesToMove.length - 1];\n  } else {\n    if (containingFrame) {\n      trailingIndex = findLastIndex(elements, (el) =>\n        isOfTargetFrame(el, containingFrame),\n      );\n    } else if (appState.editingGroupId) {\n      const groupElements = getElementsInGroup(\n        elements,\n        appState.editingGroupId,\n      );\n      if (!groupElements.length) {\n        return elements;\n      }\n      trailingIndex = elements.indexOf(groupElements[groupElements.length - 1]);\n    } else {\n      trailingIndex = elements.length - 1;\n    }\n\n    leadingIndex = indicesToMove[0];\n  }\n\n  if (leadingIndex === -1) {\n    leadingIndex = 0;\n  }\n\n  for (let index = leadingIndex; index < trailingIndex + 1; index++) {\n    if (!indicesToMove.includes(index)) {\n      displacedElements.push(elements[index]);\n    }\n  }\n\n  const targetElements = Object.values(targetElementsMap).map((element) => {\n    return bumpVersion(element);\n  });\n\n  const leadingElements = elements.slice(0, leadingIndex);\n  const trailingElements = elements.slice(trailingIndex + 1);\n\n  return direction === \"left\"\n    ? [\n        ...leadingElements,\n        ...targetElements,\n        ...displacedElements,\n        ...trailingElements,\n      ]\n    : [\n        ...leadingElements,\n        ...displacedElements,\n        ...targetElements,\n        ...trailingElements,\n      ];\n};\n\nfunction shiftElementsAccountingForFrames(\n  allElements: readonly ExcalidrawElement[],\n  appState: AppState,\n  direction: \"left\" | \"right\",\n  shiftFunction: (\n    elements: readonly ExcalidrawElement[],\n    appState: AppState,\n    direction: \"left\" | \"right\",\n    containingFrame: ExcalidrawFrameLikeElement[\"id\"] | null,\n    elementsToBeMoved?: readonly ExcalidrawElement[],\n  ) => ExcalidrawElement[] | readonly ExcalidrawElement[],\n) {\n  const elementsToMove = arrayToMap(\n    getSelectedElements(allElements, appState, {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    }),\n  );\n\n  const frameAwareContiguousElementsToMove: {\n    regularElements: ExcalidrawElement[];\n    frameChildren: Map<ExcalidrawFrameLikeElement[\"id\"], ExcalidrawElement[]>;\n  } = { regularElements: [], frameChildren: new Map() };\n\n  const fullySelectedFrames = new Set<ExcalidrawFrameLikeElement[\"id\"]>();\n\n  for (const element of allElements) {\n    if (elementsToMove.has(element.id) && isFrameLikeElement(element)) {\n      fullySelectedFrames.add(element.id);\n    }\n  }\n\n  for (const element of allElements) {\n    if (elementsToMove.has(element.id)) {\n      if (\n        isFrameLikeElement(element) ||\n        (element.frameId && fullySelectedFrames.has(element.frameId))\n      ) {\n        frameAwareContiguousElementsToMove.regularElements.push(element);\n      } else if (!element.frameId) {\n        frameAwareContiguousElementsToMove.regularElements.push(element);\n      } else {\n        const frameChildren =\n          frameAwareContiguousElementsToMove.frameChildren.get(\n            element.frameId,\n          ) || [];\n        frameChildren.push(element);\n        frameAwareContiguousElementsToMove.frameChildren.set(\n          element.frameId,\n          frameChildren,\n        );\n      }\n    }\n  }\n\n  let nextElements = allElements;\n\n  const frameChildrenSets = Array.from(\n    frameAwareContiguousElementsToMove.frameChildren.entries(),\n  );\n\n  for (const [frameId, children] of frameChildrenSets) {\n    nextElements = shiftFunction(\n      allElements,\n      appState,\n      direction,\n      frameId,\n      children,\n    );\n  }\n\n  return shiftFunction(\n    nextElements,\n    appState,\n    direction,\n    null,\n    frameAwareContiguousElementsToMove.regularElements,\n  );\n}\n\n// public API\n// -----------------------------------------------------------------------------\n\nexport const moveOneLeft = (\n  allElements: readonly ExcalidrawElement[],\n  appState: AppState,\n) => {\n  return shiftElementsByOne(allElements, appState, \"left\");\n};\n\nexport const moveOneRight = (\n  allElements: readonly ExcalidrawElement[],\n  appState: AppState,\n) => {\n  return shiftElementsByOne(allElements, appState, \"right\");\n};\n\nexport const moveAllLeft = (\n  allElements: readonly ExcalidrawElement[],\n  appState: AppState,\n) => {\n  return shiftElementsAccountingForFrames(\n    allElements,\n    appState,\n    \"left\",\n    shiftElementsToEnd,\n  );\n};\n\nexport const moveAllRight = (\n  allElements: readonly ExcalidrawElement[],\n  appState: AppState,\n) => {\n  return shiftElementsAccountingForFrames(\n    allElements,\n    appState,\n    \"right\",\n    shiftElementsToEnd,\n  );\n};\n", "import React from \"react\";\nimport {\n  moveOneLeft,\n  moveOneRight,\n  moveAllLeft,\n  moveAllRight,\n} from \"../zindex\";\nimport { KEYS, CODES } from \"../keys\";\nimport { t } from \"../i18n\";\nimport { getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\nimport {\n  BringForwardIcon,\n  BringToFrontIcon,\n  SendBackwardIcon,\n  SendToBackIcon,\n} from \"../components/icons\";\nimport { isDarwin } from \"../constants\";\n\nexport const actionSendBackward = register({\n  name: \"sendBackward\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState) => {\n    return {\n      elements: moveOneLeft(elements, appState),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.sendBackward\",\n  keyPriority: 40,\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    event.code === CODES.BRACKET_LEFT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.sendBackward\")} \u2014 ${getShortcutKey(\"CtrlOrCmd+[\")}`}\n    >\n      {SendBackwardIcon}\n    </button>\n  ),\n});\n\nexport const actionBringForward = register({\n  name: \"bringForward\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState) => {\n    return {\n      elements: moveOneRight(elements, appState),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.bringForward\",\n  keyPriority: 40,\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    event.code === CODES.BRACKET_RIGHT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.bringForward\")} \u2014 ${getShortcutKey(\"CtrlOrCmd+]\")}`}\n    >\n      {BringForwardIcon}\n    </button>\n  ),\n});\n\nexport const actionSendToBack = register({\n  name: \"sendToBack\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState) => {\n    return {\n      elements: moveAllLeft(elements, appState),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.sendToBack\",\n  keyTest: (event) =>\n    isDarwin\n      ? event[KEYS.CTRL_OR_CMD] &&\n        event.altKey &&\n        event.code === CODES.BRACKET_LEFT\n      : event[KEYS.CTRL_OR_CMD] &&\n        event.shiftKey &&\n        event.code === CODES.BRACKET_LEFT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.sendToBack\")} \u2014 ${\n        isDarwin\n          ? getShortcutKey(\"CtrlOrCmd+Alt+[\")\n          : getShortcutKey(\"CtrlOrCmd+Shift+[\")\n      }`}\n    >\n      {SendToBackIcon}\n    </button>\n  ),\n});\n\nexport const actionBringToFront = register({\n  name: \"bringToFront\",\n  trackEvent: { category: \"element\" },\n\n  perform: (elements, appState) => {\n    return {\n      elements: moveAllRight(elements, appState),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.bringToFront\",\n  keyTest: (event) =>\n    isDarwin\n      ? event[KEYS.CTRL_OR_CMD] &&\n        event.altKey &&\n        event.code === CODES.BRACKET_RIGHT\n      : event[KEYS.CTRL_OR_CMD] &&\n        event.shiftKey &&\n        event.code === CODES.BRACKET_RIGHT,\n  PanelComponent: ({ updateData, appState }) => (\n    <button\n      type=\"button\"\n      className=\"zIndexButton\"\n      onClick={(event) => updateData(null)}\n      title={`${t(\"labels.bringToFront\")} \u2014 ${\n        isDarwin\n          ? getShortcutKey(\"CtrlOrCmd+Alt+]\")\n          : getShortcutKey(\"CtrlOrCmd+Shift+]\")\n      }`}\n    >\n      {BringToFrontIcon}\n    </button>\n  ),\n});\n", "import { KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { selectGroupsForSelectedElements } from \"../groups\";\nimport { getNonDeletedElements, isTextElement } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { isLinearElement } from \"../element/typeChecks\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { excludeElementsInFramesFromSelection } from \"../scene/selection\";\n\nexport const actionSelectAll = register({\n  name: \"selectAll\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, value, app) => {\n    if (appState.editingLinearElement) {\n      return false;\n    }\n\n    const selectedElementIds = excludeElementsInFramesFromSelection(\n      elements.filter(\n        (element) =>\n          !element.isDeleted &&\n          !(isTextElement(element) && element.containerId) &&\n          !element.locked,\n      ),\n    ).reduce((map: Record<ExcalidrawElement[\"id\"], true>, element) => {\n      map[element.id] = true;\n      return map;\n    }, {});\n\n    return {\n      appState: {\n        ...appState,\n        ...selectGroupsForSelectedElements(\n          {\n            editingGroupId: null,\n            selectedElementIds,\n          },\n          getNonDeletedElements(elements),\n          appState,\n          app,\n        ),\n        selectedLinearElement:\n          // single linear element selected\n          Object.keys(selectedElementIds).length === 1 &&\n          isLinearElement(elements[0])\n            ? new LinearElementEditor(elements[0])\n            : null,\n      },\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.selectAll\",\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.A,\n});\n", "import { arrayToMapWithIndex } from \"../utils\";\nimport { ExcalidrawElement } from \"./types\";\n\nconst normalizeGroupElementOrder = (elements: readonly ExcalidrawElement[]) => {\n  const origElements: ExcalidrawElement[] = elements.slice();\n  const sortedElements = new Set<ExcalidrawElement>();\n\n  const orderInnerGroups = (\n    elements: readonly ExcalidrawElement[],\n  ): ExcalidrawElement[] => {\n    const firstGroupSig = elements[0]?.groupIds?.join(\"\");\n    const aGroup: ExcalidrawElement[] = [elements[0]];\n    const bGroup: ExcalidrawElement[] = [];\n    for (const element of elements.slice(1)) {\n      if (element.groupIds?.join(\"\") === firstGroupSig) {\n        aGroup.push(element);\n      } else {\n        bGroup.push(element);\n      }\n    }\n    return bGroup.length ? [...aGroup, ...orderInnerGroups(bGroup)] : aGroup;\n  };\n\n  const groupHandledElements = new Map<string, true>();\n\n  origElements.forEach((element, idx) => {\n    if (groupHandledElements.has(element.id)) {\n      return;\n    }\n    if (element.groupIds?.length) {\n      const topGroup = element.groupIds[element.groupIds.length - 1];\n      const groupElements = origElements.slice(idx).filter((element) => {\n        const ret = element?.groupIds?.some((id) => id === topGroup);\n        if (ret) {\n          groupHandledElements.set(element!.id, true);\n        }\n        return ret;\n      });\n\n      for (const elem of orderInnerGroups(groupElements)) {\n        sortedElements.add(elem);\n      }\n    } else {\n      sortedElements.add(element);\n    }\n  });\n\n  // if there's a bug which resulted in losing some of the elements, return\n  // original instead as that's better than losing data\n  if (sortedElements.size !== elements.length) {\n    console.error(\"normalizeGroupElementOrder: lost some elements... bailing!\");\n    return elements;\n  }\n\n  return [...sortedElements];\n};\n\n/**\n * In theory, when we have text elements bound to a container, they\n * should be right after the container element in the elements array.\n * However, this is not guaranteed due to old and potential future bugs.\n *\n * This function sorts containers and their bound texts together. It prefers\n * original z-index of container (i.e. it moves bound text elements after\n * containers).\n */\nconst normalizeBoundElementsOrder = (\n  elements: readonly ExcalidrawElement[],\n) => {\n  const elementsMap = arrayToMapWithIndex(elements);\n\n  const origElements: (ExcalidrawElement | null)[] = elements.slice();\n  const sortedElements = new Set<ExcalidrawElement>();\n\n  origElements.forEach((element, idx) => {\n    if (!element) {\n      return;\n    }\n    if (element.boundElements?.length) {\n      sortedElements.add(element);\n      origElements[idx] = null;\n      element.boundElements.forEach((boundElement) => {\n        const child = elementsMap.get(boundElement.id);\n        if (child && boundElement.type === \"text\") {\n          sortedElements.add(child[0]);\n          origElements[child[1]] = null;\n        }\n      });\n    } else if (element.type === \"text\" && element.containerId) {\n      const parent = elementsMap.get(element.containerId);\n      if (!parent?.[0].boundElements?.find((x) => x.id === element.id)) {\n        sortedElements.add(element);\n        origElements[idx] = null;\n\n        // if element has a container and container lists it, skip this element\n        // as it'll be taken care of by the container\n      }\n    } else {\n      sortedElements.add(element);\n      origElements[idx] = null;\n    }\n  });\n\n  // if there's a bug which resulted in losing some of the elements, return\n  // original instead as that's better than losing data\n  if (sortedElements.size !== elements.length) {\n    console.error(\n      \"normalizeBoundElementsOrder: lost some elements... bailing!\",\n    );\n    return elements;\n  }\n\n  return [...sortedElements];\n};\n\nexport const normalizeElementOrder = (\n  elements: readonly ExcalidrawElement[],\n) => {\n  // console.time();\n  const ret = normalizeBoundElementsOrder(normalizeGroupElementOrder(elements));\n  // console.timeEnd();\n  return ret;\n};\n", "import { KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { duplicateElement, getNonDeletedElements } from \"../element\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { t } from \"../i18n\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport {\n  selectGroupsForSelectedElements,\n  getSelectedGroupForElement,\n  getElementsInGroup,\n} from \"../groups\";\nimport { AppState } from \"../types\";\nimport { fixBindingsAfterDuplication } from \"../element/binding\";\nimport { ActionResult } from \"./types\";\nimport { GRID_SIZE } from \"../constants\";\nimport {\n  bindTextToShapeAfterDuplication,\n  getBoundTextElement,\n} from \"../element/textElement\";\nimport { isBoundToContainer, isFrameLikeElement } from \"../element/typeChecks\";\nimport { normalizeElementOrder } from \"../element/sortElements\";\nimport { DuplicateIcon } from \"../components/icons\";\nimport {\n  bindElementsToFramesAfterDuplication,\n  getFrameChildren,\n} from \"../frame\";\nimport {\n  excludeElementsInFramesFromSelection,\n  getSelectedElements,\n} from \"../scene/selection\";\n\nexport const actionDuplicateSelection = register({\n  name: \"duplicateSelection\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    // duplicate selected point(s) if editing a line\n    if (appState.editingLinearElement) {\n      const ret = LinearElementEditor.duplicateSelectedPoints(\n        appState,\n        elementsMap,\n      );\n\n      if (!ret) {\n        return false;\n      }\n\n      return {\n        elements,\n        appState: ret.appState,\n        commitToHistory: true,\n      };\n    }\n\n    return {\n      ...duplicateElements(elements, appState),\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.duplicateSelection\",\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.D,\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={DuplicateIcon}\n      title={`${t(\"labels.duplicateSelection\")} \u2014 ${getShortcutKey(\n        \"CtrlOrCmd+D\",\n      )}`}\n      aria-label={t(\"labels.duplicateSelection\")}\n      onClick={() => updateData(null)}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nconst duplicateElements = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n): Partial<ActionResult> => {\n  // ---------------------------------------------------------------------------\n\n  // step (1)\n\n  const sortedElements = normalizeElementOrder(elements);\n  const groupIdMap = new Map();\n  const newElements: ExcalidrawElement[] = [];\n  const oldElements: ExcalidrawElement[] = [];\n  const oldIdToDuplicatedId = new Map();\n\n  const duplicateAndOffsetElement = (element: ExcalidrawElement) => {\n    const newElement = duplicateElement(\n      appState.editingGroupId,\n      groupIdMap,\n      element,\n      {\n        x: element.x + GRID_SIZE / 2,\n        y: element.y + GRID_SIZE / 2,\n      },\n    );\n    oldIdToDuplicatedId.set(element.id, newElement.id);\n    oldElements.push(element);\n    newElements.push(newElement);\n    return newElement;\n  };\n\n  const idsOfElementsToDuplicate = arrayToMap(\n    getSelectedElements(sortedElements, appState, {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    }),\n  );\n\n  // Ids of elements that have already been processed so we don't push them\n  // into the array twice if we end up backtracking when retrieving\n  // discontiguous group of elements (can happen due to a bug, or in edge\n  // cases such as a group containing deleted elements which were not selected).\n  //\n  // This is not enough to prevent duplicates, so we do a second loop afterwards\n  // to remove them.\n  //\n  // For convenience we mark even the newly created ones even though we don't\n  // loop over them.\n  const processedIds = new Map<ExcalidrawElement[\"id\"], true>();\n\n  const markAsProcessed = (elements: ExcalidrawElement[]) => {\n    for (const element of elements) {\n      processedIds.set(element.id, true);\n    }\n    return elements;\n  };\n\n  const elementsWithClones: ExcalidrawElement[] = [];\n\n  let index = -1;\n\n  while (++index < sortedElements.length) {\n    const element = sortedElements[index];\n\n    if (processedIds.get(element.id)) {\n      continue;\n    }\n\n    const boundTextElement = getBoundTextElement(element, arrayToMap(elements));\n    const isElementAFrameLike = isFrameLikeElement(element);\n\n    if (idsOfElementsToDuplicate.get(element.id)) {\n      // if a group or a container/bound-text or frame, duplicate atomically\n      if (element.groupIds.length || boundTextElement || isElementAFrameLike) {\n        const groupId = getSelectedGroupForElement(appState, element);\n        if (groupId) {\n          // TODO:\n          // remove `.flatMap...`\n          // if the elements in a frame are grouped when the frame is grouped\n          const groupElements = getElementsInGroup(\n            sortedElements,\n            groupId,\n          ).flatMap((element) =>\n            isFrameLikeElement(element)\n              ? [...getFrameChildren(elements, element.id), element]\n              : [element],\n          );\n\n          elementsWithClones.push(\n            ...markAsProcessed([\n              ...groupElements,\n              ...groupElements.map((element) =>\n                duplicateAndOffsetElement(element),\n              ),\n            ]),\n          );\n          continue;\n        }\n        if (boundTextElement) {\n          elementsWithClones.push(\n            ...markAsProcessed([\n              element,\n              boundTextElement,\n              duplicateAndOffsetElement(element),\n              duplicateAndOffsetElement(boundTextElement),\n            ]),\n          );\n          continue;\n        }\n        if (isElementAFrameLike) {\n          const elementsInFrame = getFrameChildren(sortedElements, element.id);\n\n          elementsWithClones.push(\n            ...markAsProcessed([\n              ...elementsInFrame,\n              element,\n              ...elementsInFrame.map((e) => duplicateAndOffsetElement(e)),\n              duplicateAndOffsetElement(element),\n            ]),\n          );\n\n          continue;\n        }\n      }\n      // since elements in frames have a lower z-index than the frame itself,\n      // they will be looped first and if their frames are selected as well,\n      // they will have been copied along with the frame atomically in the\n      // above branch, so we must skip those elements here\n      //\n      // now, for elements do not belong any frames or elements whose frames\n      // are selected (or elements that are left out from the above\n      // steps for whatever reason) we (should at least) duplicate them here\n      if (!element.frameId || !idsOfElementsToDuplicate.has(element.frameId)) {\n        elementsWithClones.push(\n          ...markAsProcessed([element, duplicateAndOffsetElement(element)]),\n        );\n      }\n    } else {\n      elementsWithClones.push(...markAsProcessed([element]));\n    }\n  }\n\n  // step (2)\n\n  // second pass to remove duplicates. We loop from the end as it's likelier\n  // that the last elements are in the correct order (contiguous or otherwise).\n  // Thus we need to reverse as the last step (3).\n\n  const finalElementsReversed: ExcalidrawElement[] = [];\n\n  const finalElementIds = new Map<ExcalidrawElement[\"id\"], true>();\n  index = elementsWithClones.length;\n\n  while (--index >= 0) {\n    const element = elementsWithClones[index];\n    if (!finalElementIds.get(element.id)) {\n      finalElementIds.set(element.id, true);\n      finalElementsReversed.push(element);\n    }\n  }\n\n  // step (3)\n\n  const finalElements = finalElementsReversed.reverse();\n\n  // ---------------------------------------------------------------------------\n\n  bindTextToShapeAfterDuplication(\n    elementsWithClones,\n    oldElements,\n    oldIdToDuplicatedId,\n  );\n  fixBindingsAfterDuplication(\n    elementsWithClones,\n    oldElements,\n    oldIdToDuplicatedId,\n  );\n  bindElementsToFramesAfterDuplication(\n    finalElements,\n    oldElements,\n    oldIdToDuplicatedId,\n  );\n\n  const nextElementsToSelect =\n    excludeElementsInFramesFromSelection(newElements);\n\n  return {\n    elements: finalElements,\n    appState: {\n      ...appState,\n      ...selectGroupsForSelectedElements(\n        {\n          editingGroupId: appState.editingGroupId,\n          selectedElementIds: nextElementsToSelect.reduce(\n            (acc: Record<ExcalidrawElement[\"id\"], true>, element) => {\n              if (!isBoundToContainer(element)) {\n                acc[element.id] = true;\n              }\n              return acc;\n            },\n            {},\n          ),\n        },\n        getNonDeletedElements(finalElements),\n        appState,\n        null,\n      ),\n    },\n  };\n};\n", "import clsx from \"clsx\";\n\n// TODO: It might be \"clever\" to add option.icon to the existing component <ButtonSelect />\nexport const ButtonIconSelect = <T extends Object>(\n  props: {\n    options: {\n      value: T;\n      text: string;\n      icon: JSX.Element;\n      testId?: string;\n      /** if not supplied, defaults to value identity check */\n      active?: boolean;\n    }[];\n    value: T | null;\n    type?: \"radio\" | \"button\";\n  } & (\n    | { type?: \"radio\"; group: string; onChange: (value: T) => void }\n    | {\n        type: \"button\";\n        onClick: (\n          value: T,\n          event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n        ) => void;\n      }\n  ),\n) => (\n  <div className=\"buttonList buttonListIcon\">\n    {props.options.map((option) =>\n      props.type === \"button\" ? (\n        <button\n          key={option.text}\n          onClick={(event) => props.onClick(option.value, event)}\n          className={clsx({\n            active: option.active ?? props.value === option.value,\n          })}\n          data-testid={option.testId}\n          title={option.text}\n        >\n          {option.icon}\n        </button>\n      ) : (\n        <label\n          key={option.text}\n          className={clsx({ active: props.value === option.value })}\n          title={option.text}\n        >\n          <input\n            type=\"radio\"\n            name={props.group}\n            onChange={() => props.onChange(option.value)}\n            checked={props.value === option.value}\n            data-testid={option.testId}\n          />\n          {option.icon}\n        </label>\n      ),\n    )}\n  </div>\n);\n", "import clsx from \"clsx\";\nimport { ColorPickerType } from \"./colorPickerUtils\";\nimport {\n  DEFAULT_CANVAS_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_STROKE_PICKS,\n} from \"../../colors\";\n\ninterface TopPicksProps {\n  onChange: (color: string) => void;\n  type: ColorPickerType;\n  activeColor: string;\n  topPicks?: readonly string[];\n}\n\nexport const TopPicks = ({\n  onChange,\n  type,\n  activeColor,\n  topPicks,\n}: TopPicksProps) => {\n  let colors;\n  if (type === \"elementStroke\") {\n    colors = DEFAULT_ELEMENT_STROKE_PICKS;\n  }\n\n  if (type === \"elementBackground\") {\n    colors = DEFAULT_ELEMENT_BACKGROUND_PICKS;\n  }\n\n  if (type === \"canvasBackground\") {\n    colors = DEFAULT_CANVAS_BACKGROUND_PICKS;\n  }\n\n  // this one can overwrite defaults\n  if (topPicks) {\n    colors = topPicks;\n  }\n\n  if (!colors) {\n    console.error(\"Invalid type for TopPicks\");\n    return null;\n  }\n\n  return (\n    <div className=\"color-picker__top-picks\">\n      {colors.map((color: string) => (\n        <button\n          className={clsx(\"color-picker__button\", {\n            active: color === activeColor,\n            \"is-transparent\": color === \"transparent\" || !color,\n          })}\n          style={{ \"--swatch-color\": color }}\n          key={color}\n          type=\"button\"\n          title={color}\n          onClick={() => onChange(color)}\n          data-testid={`color-top-pick-${color}`}\n        >\n          <div className=\"color-picker__button-outline\" />\n        </button>\n      ))}\n    </div>\n  );\n};\n", "import { ExcalidrawElement } from \"../../element/types\";\nimport { atom } from \"jotai\";\nimport {\n  ColorPickerColor,\n  ColorPaletteCustom,\n  MAX_CUSTOM_COLORS_USED_IN_CANVAS,\n} from \"../../colors\";\n\nexport const getColorNameAndShadeFromColor = ({\n  palette,\n  color,\n}: {\n  palette: ColorPaletteCustom;\n  color: string;\n}): {\n  colorName: ColorPickerColor;\n  shade: number | null;\n} | null => {\n  for (const [colorName, colorVal] of Object.entries(palette)) {\n    if (Array.isArray(colorVal)) {\n      const shade = colorVal.indexOf(color);\n      if (shade > -1) {\n        return { colorName: colorName as ColorPickerColor, shade };\n      }\n    } else if (colorVal === color) {\n      return { colorName: colorName as ColorPickerColor, shade: null };\n    }\n  }\n  return null;\n};\n\nexport const colorPickerHotkeyBindings = [\n  [\"q\", \"w\", \"e\", \"r\", \"t\"],\n  [\"a\", \"s\", \"d\", \"f\", \"g\"],\n  [\"z\", \"x\", \"c\", \"v\", \"b\"],\n].flat();\n\nexport const isCustomColor = ({\n  color,\n  palette,\n}: {\n  color: string;\n  palette: ColorPaletteCustom;\n}) => {\n  const paletteValues = Object.values(palette).flat();\n  return !paletteValues.includes(color);\n};\n\nexport const getMostUsedCustomColors = (\n  elements: readonly ExcalidrawElement[],\n  type: \"elementBackground\" | \"elementStroke\",\n  palette: ColorPaletteCustom,\n) => {\n  const elementColorTypeMap = {\n    elementBackground: \"backgroundColor\",\n    elementStroke: \"strokeColor\",\n  };\n\n  const colors = elements.filter((element) => {\n    if (element.isDeleted) {\n      return false;\n    }\n\n    const color =\n      element[elementColorTypeMap[type] as \"backgroundColor\" | \"strokeColor\"];\n\n    return isCustomColor({ color, palette });\n  });\n\n  const colorCountMap = new Map<string, number>();\n  colors.forEach((element) => {\n    const color =\n      element[elementColorTypeMap[type] as \"backgroundColor\" | \"strokeColor\"];\n    if (colorCountMap.has(color)) {\n      colorCountMap.set(color, colorCountMap.get(color)! + 1);\n    } else {\n      colorCountMap.set(color, 1);\n    }\n  });\n\n  return [...colorCountMap.entries()]\n    .sort((a, b) => b[1] - a[1])\n    .map((c) => c[0])\n    .slice(0, MAX_CUSTOM_COLORS_USED_IN_CANVAS);\n};\n\nexport type ActiveColorPickerSectionAtomType =\n  | \"custom\"\n  | \"baseColors\"\n  | \"shades\"\n  | \"hex\"\n  | null;\nexport const activeColorPickerSectionAtom =\n  atom<ActiveColorPickerSectionAtomType>(null);\n\nconst calculateContrast = (r: number, g: number, b: number) => {\n  const yiq = (r * 299 + g * 587 + b * 114) / 1000;\n  return yiq >= 160 ? \"black\" : \"white\";\n};\n\n// inspiration from https://stackoverflow.com/a/11868398\nexport const getContrastYIQ = (bgHex: string, isCustomColor: boolean) => {\n  if (isCustomColor) {\n    const style = new Option().style;\n    style.color = bgHex;\n\n    if (style.color) {\n      const rgb = style.color\n        .replace(/^(rgb|rgba)\\(/, \"\")\n        .replace(/\\)$/, \"\")\n        .replace(/\\s/g, \"\")\n        .split(\",\");\n      const r = parseInt(rgb[0]);\n      const g = parseInt(rgb[1]);\n      const b = parseInt(rgb[2]);\n\n      return calculateContrast(r, g, b);\n    }\n  }\n\n  // TODO: ? is this wanted?\n  if (bgHex === \"transparent\") {\n    return \"black\";\n  }\n\n  const r = parseInt(bgHex.substring(1, 3), 16);\n  const g = parseInt(bgHex.substring(3, 5), 16);\n  const b = parseInt(bgHex.substring(5, 7), 16);\n\n  return calculateContrast(r, g, b);\n};\n\nexport type ColorPickerType =\n  | \"canvasBackground\"\n  | \"elementBackground\"\n  | \"elementStroke\";\n", "import React from \"react\";\nimport { getContrastYIQ } from \"./colorPickerUtils\";\n\ninterface HotkeyLabelProps {\n  color: string;\n  keyLabel: string | number;\n  isCustomColor?: boolean;\n  isShade?: boolean;\n}\nconst HotkeyLabel = ({\n  color,\n  keyLabel,\n  isCustomColor = false,\n  isShade = false,\n}: HotkeyLabelProps) => {\n  return (\n    <div\n      className=\"color-picker__button__hotkey-label\"\n      style={{\n        color: getContrastYIQ(color, isCustomColor),\n      }}\n    >\n      {isShade && \"\u21E7\"}\n      {keyLabel}\n    </div>\n  );\n};\n\nexport default HotkeyLabel;\n", "import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  activeColorPickerSectionAtom,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { t } from \"../../i18n\";\nimport { ColorPaletteCustom } from \"../../colors\";\n\ninterface ShadeListProps {\n  hex: string;\n  onChange: (color: string) => void;\n  palette: ColorPaletteCustom;\n}\n\nexport const ShadeList = ({ hex, onChange, palette }: ShadeListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: hex || \"transparent\",\n    palette,\n  });\n\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"shades\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj, activeColorPickerSection]);\n\n  if (colorObj) {\n    const { colorName, shade } = colorObj;\n\n    const shades = palette[colorName];\n\n    if (Array.isArray(shades)) {\n      return (\n        <div className=\"color-picker-content--default shades\">\n          {shades.map((color, i) => (\n            <button\n              ref={\n                i === shade && activeColorPickerSection === \"shades\"\n                  ? btnRef\n                  : undefined\n              }\n              tabIndex={-1}\n              key={i}\n              type=\"button\"\n              className={clsx(\n                \"color-picker__button color-picker__button--large\",\n                { active: i === shade },\n              )}\n              aria-label=\"Shade\"\n              title={`${colorName} - ${i + 1}`}\n              style={color ? { \"--swatch-color\": color } : undefined}\n              onClick={() => {\n                onChange(color);\n                setActiveColorPickerSection(\"shades\");\n              }}\n            >\n              <div className=\"color-picker__button-outline\" />\n              <HotkeyLabel color={color} keyLabel={i + 1} isShade />\n            </button>\n          ))}\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div\n      className=\"color-picker-content--default\"\n      style={{ position: \"relative\" }}\n      tabIndex={-1}\n    >\n      <button\n        type=\"button\"\n        tabIndex={-1}\n        className=\"color-picker__button color-picker__button--large color-picker__button--no-focus-visible\"\n      />\n      <div\n        tabIndex={-1}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          fontSize: \"0.75rem\",\n        }}\n      >\n        {t(\"colorPicker.noShades\")}\n      </div>\n    </div>\n  );\n};\n", "import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  activeColorPickerSectionAtom,\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { ColorPaletteCustom } from \"../../colors\";\nimport { TranslationKeys, t } from \"../../i18n\";\n\ninterface PickerColorListProps {\n  palette: ColorPaletteCustom;\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  activeShade: number;\n}\n\nconst PickerColorList = ({\n  palette,\n  color,\n  onChange,\n  label,\n  activeShade,\n}: PickerColorListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: color || \"transparent\",\n    palette,\n  });\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"baseColors\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj?.colorName, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {Object.entries(palette).map(([key, value], index) => {\n        const color =\n          (Array.isArray(value) ? value[activeShade] : value) || \"transparent\";\n\n        const keybinding = colorPickerHotkeyBindings[index];\n        const label = t(\n          `colors.${key.replace(/\\d+/, \"\")}` as unknown as TranslationKeys,\n          null,\n          \"\",\n        );\n\n        return (\n          <button\n            ref={colorObj?.colorName === key ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large\",\n              {\n                active: colorObj?.colorName === key,\n                \"is-transparent\": color === \"transparent\" || !color,\n              },\n            )}\n            onClick={() => {\n              onChange(color);\n              setActiveColorPickerSection(\"baseColors\");\n            }}\n            title={`${label}${\n              color.startsWith(\"#\") ? ` ${color}` : \"\"\n            } \u2014 ${keybinding}`}\n            aria-label={`${label} \u2014 ${keybinding}`}\n            style={color ? { \"--swatch-color\": color } : undefined}\n            data-testid={`color-${key}`}\n            key={key}\n          >\n            <div className=\"color-picker__button-outline\" />\n            <HotkeyLabel color={color} keyLabel={keybinding} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PickerColorList;\n", "import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport { activeColorPickerSectionAtom } from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\n\ninterface CustomColorListProps {\n  colors: string[];\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n}\n\nexport const CustomColorList = ({\n  colors,\n  color,\n  onChange,\n  label,\n}: CustomColorListProps) => {\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current) {\n      btnRef.current.focus();\n    }\n  }, [color, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {colors.map((c, i) => {\n        return (\n          <button\n            ref={color === c ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large\",\n              {\n                active: color === c,\n                \"is-transparent\": c === \"transparent\" || !c,\n              },\n            )}\n            onClick={() => {\n              onChange(c);\n              setActiveColorPickerSection(\"custom\");\n            }}\n            title={c}\n            aria-label={label}\n            style={{ \"--swatch-color\": c }}\n            key={i}\n          >\n            <div className=\"color-picker__button-outline\" />\n            <HotkeyLabel color={c} keyLabel={i + 1} isCustomColor />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n", "import { KEYS } from \"../../keys\";\nimport {\n  ColorPickerColor,\n  ColorPalette,\n  ColorPaletteCustom,\n  COLORS_PER_ROW,\n  COLOR_PALETTE,\n} from \"../../colors\";\nimport { ValueOf } from \"../../utility-types\";\nimport {\n  ActiveColorPickerSectionAtomType,\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\n\nconst arrowHandler = (\n  eventKey: string,\n  currentIndex: number | null,\n  length: number,\n) => {\n  const rows = Math.ceil(length / COLORS_PER_ROW);\n\n  currentIndex = currentIndex ?? -1;\n\n  switch (eventKey) {\n    case \"ArrowLeft\": {\n      const prevIndex = currentIndex - 1;\n      return prevIndex < 0 ? length - 1 : prevIndex;\n    }\n    case \"ArrowRight\": {\n      return (currentIndex + 1) % length;\n    }\n    case \"ArrowDown\": {\n      const nextIndex = currentIndex + COLORS_PER_ROW;\n      return nextIndex >= length ? currentIndex % COLORS_PER_ROW : nextIndex;\n    }\n    case \"ArrowUp\": {\n      const prevIndex = currentIndex - COLORS_PER_ROW;\n      const newIndex =\n        prevIndex < 0 ? COLORS_PER_ROW * rows + prevIndex : prevIndex;\n      return newIndex >= length ? undefined : newIndex;\n    }\n  }\n};\n\ninterface HotkeyHandlerProps {\n  e: React.KeyboardEvent;\n  colorObj: { colorName: ColorPickerColor; shade: number | null } | null;\n  onChange: (color: string) => void;\n  palette: ColorPaletteCustom;\n  customColors: string[];\n  setActiveColorPickerSection: (\n    update: React.SetStateAction<ActiveColorPickerSectionAtomType>,\n  ) => void;\n  activeShade: number;\n}\n\n/**\n * @returns true if the event was handled\n */\nconst hotkeyHandler = ({\n  e,\n  colorObj,\n  onChange,\n  palette,\n  customColors,\n  setActiveColorPickerSection,\n  activeShade,\n}: HotkeyHandlerProps): boolean => {\n  if (colorObj?.shade != null) {\n    // shift + numpad is extremely messed up on windows apparently\n    if (\n      [\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\"].includes(e.code) &&\n      e.shiftKey\n    ) {\n      const newShade = Number(e.code.slice(-1)) - 1;\n      onChange(palette[colorObj.colorName][newShade]);\n      setActiveColorPickerSection(\"shades\");\n      return true;\n    }\n  }\n\n  if ([\"1\", \"2\", \"3\", \"4\", \"5\"].includes(e.key)) {\n    const c = customColors[Number(e.key) - 1];\n    if (c) {\n      onChange(customColors[Number(e.key) - 1]);\n      setActiveColorPickerSection(\"custom\");\n      return true;\n    }\n  }\n\n  if (colorPickerHotkeyBindings.includes(e.key)) {\n    const index = colorPickerHotkeyBindings.indexOf(e.key);\n    const paletteKey = Object.keys(palette)[index] as keyof ColorPalette;\n    const paletteValue = palette[paletteKey];\n    const r = Array.isArray(paletteValue)\n      ? paletteValue[activeShade]\n      : paletteValue;\n    onChange(r);\n    setActiveColorPickerSection(\"baseColors\");\n    return true;\n  }\n  return false;\n};\n\ninterface ColorPickerKeyNavHandlerProps {\n  event: React.KeyboardEvent;\n  activeColorPickerSection: ActiveColorPickerSectionAtomType;\n  palette: ColorPaletteCustom;\n  color: string;\n  onChange: (color: string) => void;\n  customColors: string[];\n  setActiveColorPickerSection: (\n    update: React.SetStateAction<ActiveColorPickerSectionAtomType>,\n  ) => void;\n  updateData: (formData?: any) => void;\n  activeShade: number;\n  onEyeDropperToggle: (force?: boolean) => void;\n  onEscape: (event: React.KeyboardEvent | KeyboardEvent) => void;\n}\n\n/**\n * @returns true if the event was handled\n */\nexport const colorPickerKeyNavHandler = ({\n  event,\n  activeColorPickerSection,\n  palette,\n  color,\n  onChange,\n  customColors,\n  setActiveColorPickerSection,\n  updateData,\n  activeShade,\n  onEyeDropperToggle,\n  onEscape,\n}: ColorPickerKeyNavHandlerProps): boolean => {\n  if (event[KEYS.CTRL_OR_CMD]) {\n    return false;\n  }\n\n  if (event.key === KEYS.ESCAPE) {\n    onEscape(event);\n    return true;\n  }\n\n  // checkt using `key` to ignore combos with Alt modifier\n  if (event.key === KEYS.ALT) {\n    onEyeDropperToggle(true);\n    return true;\n  }\n\n  if (event.key === KEYS.I) {\n    onEyeDropperToggle();\n    return true;\n  }\n\n  const colorObj = getColorNameAndShadeFromColor({ color, palette });\n\n  if (event.key === KEYS.TAB) {\n    const sectionsMap: Record<\n      NonNullable<ActiveColorPickerSectionAtomType>,\n      boolean\n    > = {\n      custom: !!customColors.length,\n      baseColors: true,\n      shades: colorObj?.shade != null,\n      hex: true,\n    };\n\n    const sections = Object.entries(sectionsMap).reduce((acc, [key, value]) => {\n      if (value) {\n        acc.push(key as ActiveColorPickerSectionAtomType);\n      }\n      return acc;\n    }, [] as ActiveColorPickerSectionAtomType[]);\n\n    const activeSectionIndex = sections.indexOf(activeColorPickerSection);\n    const indexOffset = event.shiftKey ? -1 : 1;\n    const nextSectionIndex =\n      activeSectionIndex + indexOffset > sections.length - 1\n        ? 0\n        : activeSectionIndex + indexOffset < 0\n        ? sections.length - 1\n        : activeSectionIndex + indexOffset;\n\n    const nextSection = sections[nextSectionIndex];\n\n    if (nextSection) {\n      setActiveColorPickerSection(nextSection);\n    }\n\n    if (nextSection === \"custom\") {\n      onChange(customColors[0]);\n    } else if (nextSection === \"baseColors\") {\n      const baseColorName = (\n        Object.entries(palette) as [string, ValueOf<ColorPalette>][]\n      ).find(([name, shades]) => {\n        if (Array.isArray(shades)) {\n          return shades.includes(color);\n        } else if (shades === color) {\n          return name;\n        }\n        return null;\n      });\n\n      if (!baseColorName) {\n        onChange(COLOR_PALETTE.black);\n      }\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    return true;\n  }\n\n  if (\n    hotkeyHandler({\n      e: event,\n      colorObj,\n      onChange,\n      palette,\n      customColors,\n      setActiveColorPickerSection,\n      activeShade,\n    })\n  ) {\n    return true;\n  }\n\n  if (activeColorPickerSection === \"shades\") {\n    if (colorObj) {\n      const { shade } = colorObj;\n      const newShade = arrowHandler(event.key, shade, COLORS_PER_ROW);\n\n      if (newShade !== undefined) {\n        onChange(palette[colorObj.colorName][newShade]);\n        return true;\n      }\n    }\n  }\n\n  if (activeColorPickerSection === \"baseColors\") {\n    if (colorObj) {\n      const { colorName } = colorObj;\n      const colorNames = Object.keys(palette) as (keyof ColorPalette)[];\n      const indexOfColorName = colorNames.indexOf(colorName);\n\n      const newColorIndex = arrowHandler(\n        event.key,\n        indexOfColorName,\n        colorNames.length,\n      );\n\n      if (newColorIndex !== undefined) {\n        const newColorName = colorNames[newColorIndex];\n        const newColorNameValue = palette[newColorName];\n\n        onChange(\n          Array.isArray(newColorNameValue)\n            ? newColorNameValue[activeShade]\n            : newColorNameValue,\n        );\n        return true;\n      }\n    }\n  }\n\n  if (activeColorPickerSection === \"custom\") {\n    const indexOfColor = customColors.indexOf(color);\n\n    const newColorIndex = arrowHandler(\n      event.key,\n      indexOfColor,\n      customColors.length,\n    );\n\n    if (newColorIndex !== undefined) {\n      const newColor = customColors[newColorIndex];\n      onChange(newColor);\n      return true;\n    }\n  }\n\n  return false;\n};\n", "import { ReactNode } from \"react\";\n\nconst PickerHeading = ({ children }: { children: ReactNode }) => (\n  <div className=\"color-picker__heading\">{children}</div>\n);\n\nexport default PickerHeading;\n", "import React, { useEffect, useState } from \"react\";\nimport { t } from \"../../i18n\";\n\nimport { ExcalidrawElement } from \"../../element/types\";\nimport { ShadeList } from \"./ShadeList\";\n\nimport PickerColorList from \"./PickerColorList\";\nimport { useAtom } from \"jotai\";\nimport { CustomColorList } from \"./CustomColorList\";\nimport { colorPickerKeyNavHandler } from \"./keyboardNavHandlers\";\nimport PickerHeading from \"./PickerHeading\";\nimport {\n  ColorPickerType,\n  activeColorPickerSectionAtom,\n  getColorNameAndShadeFromColor,\n  getMostUsedCustomColors,\n  isCustomColor,\n} from \"./colorPickerUtils\";\nimport {\n  ColorPaletteCustom,\n  DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX,\n  DEFAULT_ELEMENT_STROKE_COLOR_INDEX,\n} from \"../../colors\";\nimport { KEYS } from \"../../keys\";\nimport { EVENT } from \"../../constants\";\n\ninterface PickerProps {\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  type: ColorPickerType;\n  elements: readonly ExcalidrawElement[];\n  palette: ColorPaletteCustom;\n  updateData: (formData?: any) => void;\n  children?: React.ReactNode;\n  onEyeDropperToggle: (force?: boolean) => void;\n  onEscape: (event: React.KeyboardEvent | KeyboardEvent) => void;\n}\n\nexport const Picker = ({\n  color,\n  onChange,\n  label,\n  type,\n  elements,\n  palette,\n  updateData,\n  children,\n  onEyeDropperToggle,\n  onEscape,\n}: PickerProps) => {\n  const [customColors] = React.useState(() => {\n    if (type === \"canvasBackground\") {\n      return [];\n    }\n    return getMostUsedCustomColors(elements, type, palette);\n  });\n\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const colorObj = getColorNameAndShadeFromColor({\n    color,\n    palette,\n  });\n\n  useEffect(() => {\n    if (!activeColorPickerSection) {\n      const isCustom = isCustomColor({ color, palette });\n      const isCustomButNotInList = isCustom && !customColors.includes(color);\n\n      setActiveColorPickerSection(\n        isCustomButNotInList\n          ? \"hex\"\n          : isCustom\n          ? \"custom\"\n          : colorObj?.shade != null\n          ? \"shades\"\n          : \"baseColors\",\n      );\n    }\n  }, [\n    activeColorPickerSection,\n    color,\n    palette,\n    setActiveColorPickerSection,\n    colorObj,\n    customColors,\n  ]);\n\n  const [activeShade, setActiveShade] = useState(\n    colorObj?.shade ??\n      (type === \"elementBackground\"\n        ? DEFAULT_ELEMENT_BACKGROUND_COLOR_INDEX\n        : DEFAULT_ELEMENT_STROKE_COLOR_INDEX),\n  );\n\n  useEffect(() => {\n    if (colorObj?.shade != null) {\n      setActiveShade(colorObj.shade);\n    }\n\n    const keyup = (event: KeyboardEvent) => {\n      if (event.key === KEYS.ALT) {\n        onEyeDropperToggle(false);\n      }\n    };\n    document.addEventListener(EVENT.KEYUP, keyup, { capture: true });\n    return () => {\n      document.removeEventListener(EVENT.KEYUP, keyup, { capture: true });\n    };\n  }, [colorObj, onEyeDropperToggle]);\n\n  const pickerRef = React.useRef<HTMLDivElement>(null);\n\n  return (\n    <div role=\"dialog\" aria-modal=\"true\" aria-label={t(\"labels.colorPicker\")}>\n      <div\n        ref={pickerRef}\n        onKeyDown={(event) => {\n          const handled = colorPickerKeyNavHandler({\n            event,\n            activeColorPickerSection,\n            palette,\n            color,\n            onChange,\n            onEyeDropperToggle,\n            customColors,\n            setActiveColorPickerSection,\n            updateData,\n            activeShade,\n            onEscape,\n          });\n\n          if (handled) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n        }}\n        className=\"color-picker-content\"\n        // to allow focusing by clicking but not by tabbing\n        tabIndex={-1}\n      >\n        {!!customColors.length && (\n          <div>\n            <PickerHeading>\n              {t(\"colorPicker.mostUsedCustomColors\")}\n            </PickerHeading>\n            <CustomColorList\n              colors={customColors}\n              color={color}\n              label={t(\"colorPicker.mostUsedCustomColors\")}\n              onChange={onChange}\n            />\n          </div>\n        )}\n\n        <div>\n          <PickerHeading>{t(\"colorPicker.colors\")}</PickerHeading>\n          <PickerColorList\n            color={color}\n            label={label}\n            palette={palette}\n            onChange={onChange}\n            activeShade={activeShade}\n          />\n        </div>\n\n        <div>\n          <PickerHeading>{t(\"colorPicker.shades\")}</PickerHeading>\n          <ShadeList hex={color} onChange={onChange} palette={palette} />\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n};\n", "import React from \"react\";\nimport { UIAppState } from \"../types\";\n\nexport const UIAppStateContext = React.createContext<UIAppState>(null!);\nexport const useUIAppState = () => React.useContext(UIAppStateContext);\n", "import { useState, useLayoutEffect } from \"react\";\nimport { useDevice, useExcalidrawContainer } from \"../components/App\";\nimport { useUIAppState } from \"../context/ui-appState\";\n\nexport const useCreatePortalContainer = (opts?: {\n  className?: string;\n  parentSelector?: string;\n}) => {\n  const [div, setDiv] = useState<HTMLDivElement | null>(null);\n\n  const device = useDevice();\n  const { theme } = useUIAppState();\n\n  const { container: excalidrawContainer } = useExcalidrawContainer();\n\n  useLayoutEffect(() => {\n    if (div) {\n      div.className = \"\";\n      div.classList.add(\"excalidraw\", ...(opts?.className?.split(/\\s+/) || []));\n      div.classList.toggle(\"excalidraw--mobile\", device.editor.isMobile);\n      div.classList.toggle(\"theme--dark\", theme === \"dark\");\n    }\n  }, [div, theme, device.editor.isMobile, opts?.className]);\n\n  useLayoutEffect(() => {\n    const container = opts?.parentSelector\n      ? excalidrawContainer?.querySelector(opts.parentSelector)\n      : document.body;\n\n    if (!container) {\n      return;\n    }\n\n    const div = document.createElement(\"div\");\n\n    container.appendChild(div);\n\n    setDiv(div);\n\n    return () => {\n      container.removeChild(div);\n    };\n  }, [excalidrawContainer, opts?.parentSelector]);\n\n  return div;\n};\n", "import { useEffect } from \"react\";\nimport { EVENT } from \"../constants\";\n\nexport function useOutsideClick<T extends HTMLElement>(\n  ref: React.RefObject<T>,\n  /** if performance is of concern, memoize the callback */\n  callback: (event: Event) => void,\n  /**\n   * Optional callback which is called on every click.\n   *\n   * Should return `true` if click should be considered as inside the container,\n   * and `false` if it falls outside and should call the `callback`.\n   *\n   * Returning `true` overrides the default behavior and `callback` won't be\n   * called.\n   *\n   * Returning `undefined` will fallback to the default behavior.\n   */\n  isInside?: (\n    event: Event & { target: HTMLElement },\n    /** the element of the passed ref */\n    container: T,\n  ) => boolean | undefined,\n) {\n  useEffect(() => {\n    function onOutsideClick(event: Event) {\n      const _event = event as Event & { target: T };\n\n      if (!ref.current) {\n        return;\n      }\n\n      const isInsideOverride = isInside?.(_event, ref.current);\n\n      if (isInsideOverride === true) {\n        return;\n      } else if (isInsideOverride === false) {\n        return callback(_event);\n      }\n\n      // clicked element is in the descenendant of the target container\n      if (\n        ref.current.contains(_event.target) ||\n        // target is detached from DOM (happens when the element is removed\n        // on a pointerup event fired *before* this handler's pointerup is\n        // dispatched)\n        !document.documentElement.contains(_event.target)\n      ) {\n        return;\n      }\n\n      const isClickOnRadixPortal =\n        _event.target.closest(\"[data-radix-portal]\") ||\n        // when radix popup is in \"modal\" mode, it disables pointer events on\n        // the `body` element, so the target element is going to be the `html`\n        // (note: this won't work if we selectively re-enable pointer events on\n        // specific elements as we do with navbar or excalidraw UI elements)\n        (_event.target === document.documentElement &&\n          document.body.style.pointerEvents === \"none\");\n\n      // if clicking on radix portal, assume it's a popup that\n      // should be considered as part of the UI. Obviously this is a terrible\n      // hack you can end up click on radix popups that outside the tree,\n      // but it works for most cases and the downside is minimal for now\n      if (isClickOnRadixPortal) {\n        return;\n      }\n\n      // clicking on a container that ignores outside clicks\n      if (_event.target.closest(\"[data-prevent-outside-click]\")) {\n        return;\n      }\n\n      callback(_event);\n    }\n\n    // note: don't use `click` because it often reports incorrect `event.target`\n    document.addEventListener(EVENT.POINTER_DOWN, onOutsideClick);\n    document.addEventListener(EVENT.TOUCH_START, onOutsideClick);\n\n    return () => {\n      document.removeEventListener(EVENT.POINTER_DOWN, onOutsideClick);\n      document.removeEventListener(EVENT.TOUCH_START, onOutsideClick);\n    };\n  }, [ref, callback, isInside]);\n}\n", "import { useRef } from \"react\";\n\nexport const useStable = <T extends Record<string, any>>(value: T) => {\n  const ref = useRef<T>(value);\n  Object.assign(ref.current, value);\n  return ref.current;\n};\n", ".excalidraw .excalidraw-eye-dropper-container,\n.excalidraw .excalidraw-eye-dropper-backdrop {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: var(--zIndex-eyeDropperBackdrop);\n  touch-action: none;\n}\n.excalidraw .excalidraw-eye-dropper-container {\n  pointer-events: none;\n}\n.excalidraw .excalidraw-eye-dropper-backdrop {\n  pointer-events: all;\n}\n.excalidraw .excalidraw-eye-dropper-preview {\n  pointer-events: none;\n  width: 3rem;\n  height: 3rem;\n  position: fixed;\n  z-index: var(--zIndex-eyeDropperPreview);\n  border-radius: 1rem;\n  border: 1px solid var(--default-border-color);\n  filter: var(--theme-filter);\n}\n.excalidraw .excalidraw-eye-dropper-trigger {\n  width: 1.25rem;\n  height: 1.25rem;\n  cursor: pointer;\n  padding: 4px;\n  margin-right: -4px;\n  margin-left: -2px;\n  border-radius: 0.5rem;\n  color: var(--icon-fill-color);\n}\n.excalidraw .excalidraw-eye-dropper-trigger:hover {\n  background: var(--button-hover-bg);\n}\n.excalidraw .excalidraw-eye-dropper-trigger.selected {\n  color: var(--color-primary);\n  background: var(--color-primary-light);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkV5ZURyb3BwZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtBQUFBO0VBRUU7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUVGO0VBQ0U7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLmV4Y2FsaWRyYXctZXllLWRyb3BwZXItY29udGFpbmVyLFxuICAuZXhjYWxpZHJhdy1leWUtZHJvcHBlci1iYWNrZHJvcCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB6LWluZGV4OiB2YXIoLS16SW5kZXgtZXllRHJvcHBlckJhY2tkcm9wKTtcbiAgICB0b3VjaC1hY3Rpb246IG5vbmU7XG4gIH1cblxuICAuZXhjYWxpZHJhdy1leWUtZHJvcHBlci1jb250YWluZXIge1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB9XG5cbiAgLmV4Y2FsaWRyYXctZXllLWRyb3BwZXItYmFja2Ryb3Age1xuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gIH1cblxuICAuZXhjYWxpZHJhdy1leWUtZHJvcHBlci1wcmV2aWV3IHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB3aWR0aDogM3JlbTtcbiAgICBoZWlnaHQ6IDNyZW07XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHotaW5kZXg6IHZhcigtLXpJbmRleC1leWVEcm9wcGVyUHJldmlldyk7XG4gICAgYm9yZGVyLXJhZGl1czogMXJlbTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcik7XG4gICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuICB9XG5cbiAgLmV4Y2FsaWRyYXctZXllLWRyb3BwZXItdHJpZ2dlciB7XG4gICAgd2lkdGg6IDEuMjVyZW07XG4gICAgaGVpZ2h0OiAxLjI1cmVtO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAtNHB4O1xuICAgIG1hcmdpbi1sZWZ0OiAtMnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcbiAgICBjb2xvcjogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG4gICAgJi5zZWxlY3RlZCB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1wcmltYXJ5LWxpZ2h0KTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import { atom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { rgbToHex } from \"../colors\";\nimport { EVENT } from \"../constants\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport { useCreatePortalContainer } from \"../hooks/useCreatePortalContainer\";\nimport { useOutsideClick } from \"../hooks/useOutsideClick\";\nimport { KEYS } from \"../keys\";\nimport { getSelectedElements } from \"../scene\";\nimport { useApp, useExcalidrawContainer, useExcalidrawElements } from \"./App\";\nimport { useStable } from \"../hooks/useStable\";\n\nimport \"./EyeDropper.scss\";\nimport { ColorPickerType } from \"./ColorPicker/colorPickerUtils\";\nimport { ExcalidrawElement } from \"../element/types\";\n\nexport type EyeDropperProperties = {\n  keepOpenOnAlt: boolean;\n  swapPreviewOnAlt?: boolean;\n  /** called when user picks color (on pointerup) */\n  onSelect: (color: string, event: PointerEvent) => void;\n  /**\n   * property of selected elements to update live when alt-dragging.\n   * Supply `null` if not applicable (e.g. updating the canvas bg instead of\n   * elements)\n   **/\n  colorPickerType: ColorPickerType;\n};\n\nexport const activeEyeDropperAtom = atom<null | EyeDropperProperties>(null);\n\nexport const EyeDropper: React.FC<{\n  onCancel: () => void;\n  onSelect: EyeDropperProperties[\"onSelect\"];\n  /** called when color changes, on pointerdown for preview */\n  onChange: (\n    type: ColorPickerType,\n    color: string,\n    selectedElements: ExcalidrawElement[],\n    event: { altKey: boolean },\n  ) => void;\n  colorPickerType: EyeDropperProperties[\"colorPickerType\"];\n}> = ({ onCancel, onChange, onSelect, colorPickerType }) => {\n  const eyeDropperContainer = useCreatePortalContainer({\n    className: \"excalidraw-eye-dropper-backdrop\",\n    parentSelector: \".excalidraw-eye-dropper-container\",\n  });\n  const appState = useUIAppState();\n  const elements = useExcalidrawElements();\n  const app = useApp();\n\n  const selectedElements = getSelectedElements(elements, appState);\n\n  const stableProps = useStable({\n    app,\n    onCancel,\n    onChange,\n    onSelect,\n    selectedElements,\n  });\n\n  const { container: excalidrawContainer } = useExcalidrawContainer();\n\n  useEffect(() => {\n    const colorPreviewDiv = ref.current;\n\n    if (!colorPreviewDiv || !app.canvas || !eyeDropperContainer) {\n      return;\n    }\n\n    let isHoldingPointerDown = false;\n\n    const ctx = app.canvas.getContext(\"2d\")!;\n\n    const getCurrentColor = ({\n      clientX,\n      clientY,\n    }: {\n      clientX: number;\n      clientY: number;\n    }) => {\n      const pixel = ctx.getImageData(\n        (clientX - appState.offsetLeft) * window.devicePixelRatio,\n        (clientY - appState.offsetTop) * window.devicePixelRatio,\n        1,\n        1,\n      ).data;\n\n      return rgbToHex(pixel[0], pixel[1], pixel[2]);\n    };\n\n    const mouseMoveListener = ({\n      clientX,\n      clientY,\n      altKey,\n    }: {\n      clientX: number;\n      clientY: number;\n      altKey: boolean;\n    }) => {\n      // FIXME swap offset when the preview gets outside viewport\n      colorPreviewDiv.style.top = `${clientY + 20}px`;\n      colorPreviewDiv.style.left = `${clientX + 20}px`;\n\n      const currentColor = getCurrentColor({ clientX, clientY });\n\n      if (isHoldingPointerDown) {\n        stableProps.onChange(\n          colorPickerType,\n          currentColor,\n          stableProps.selectedElements,\n          { altKey },\n        );\n      }\n\n      colorPreviewDiv.style.background = currentColor;\n    };\n\n    const onCancel = () => {\n      stableProps.onCancel();\n    };\n\n    const onSelect: Required<EyeDropperProperties>[\"onSelect\"] = (\n      color,\n      event,\n    ) => {\n      stableProps.onSelect(color, event);\n    };\n\n    const pointerDownListener = (event: PointerEvent) => {\n      isHoldingPointerDown = true;\n      // NOTE we can't event.preventDefault() as that would stop\n      // pointermove events\n      event.stopImmediatePropagation();\n    };\n\n    const pointerUpListener = (event: PointerEvent) => {\n      isHoldingPointerDown = false;\n\n      // since we're not preventing default on pointerdown, the focus would\n      // goes back to `body` so we want to refocus the editor container instead\n      excalidrawContainer?.focus();\n\n      event.stopImmediatePropagation();\n      event.preventDefault();\n\n      onSelect(getCurrentColor(event), event);\n    };\n\n    const keyDownListener = (event: KeyboardEvent) => {\n      if (event.key === KEYS.ESCAPE) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        onCancel();\n      }\n    };\n\n    // -------------------------------------------------------------------------\n\n    eyeDropperContainer.tabIndex = -1;\n    // focus container so we can listen on keydown events\n    eyeDropperContainer.focus();\n\n    // init color preview else it would show only after the first mouse move\n    mouseMoveListener({\n      clientX: stableProps.app.lastViewportPosition.x,\n      clientY: stableProps.app.lastViewportPosition.y,\n      altKey: false,\n    });\n\n    eyeDropperContainer.addEventListener(EVENT.KEYDOWN, keyDownListener);\n    eyeDropperContainer.addEventListener(\n      EVENT.POINTER_DOWN,\n      pointerDownListener,\n    );\n    eyeDropperContainer.addEventListener(EVENT.POINTER_UP, pointerUpListener);\n    window.addEventListener(\"pointermove\", mouseMoveListener, {\n      passive: true,\n    });\n    window.addEventListener(EVENT.BLUR, onCancel);\n\n    return () => {\n      isHoldingPointerDown = false;\n      eyeDropperContainer.removeEventListener(EVENT.KEYDOWN, keyDownListener);\n      eyeDropperContainer.removeEventListener(\n        EVENT.POINTER_DOWN,\n        pointerDownListener,\n      );\n      eyeDropperContainer.removeEventListener(\n        EVENT.POINTER_UP,\n        pointerUpListener,\n      );\n      window.removeEventListener(\"pointermove\", mouseMoveListener);\n      window.removeEventListener(EVENT.BLUR, onCancel);\n    };\n  }, [\n    stableProps,\n    app.canvas,\n    eyeDropperContainer,\n    colorPickerType,\n    excalidrawContainer,\n    appState.offsetLeft,\n    appState.offsetTop,\n  ]);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useOutsideClick(\n    ref,\n    () => {\n      onCancel();\n    },\n    (event) => {\n      if (\n        event.target.closest(\n          \".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop\",\n        )\n      ) {\n        return true;\n      }\n      // consider all other clicks as outside\n      return false;\n    },\n  );\n\n  if (!eyeDropperContainer) {\n    return null;\n  }\n\n  return createPortal(\n    <div ref={ref} className=\"excalidraw-eye-dropper-preview\" />,\n    eyeDropperContainer,\n  );\n};\n", "import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { getColor } from \"./ColorPicker\";\nimport { useAtom } from \"jotai\";\nimport {\n  ColorPickerType,\n  activeColorPickerSectionAtom,\n} from \"./colorPickerUtils\";\nimport { eyeDropperIcon } from \"../icons\";\nimport { jotaiScope } from \"../../jotai\";\nimport { KEYS } from \"../../keys\";\nimport { activeEyeDropperAtom } from \"../EyeDropper\";\nimport clsx from \"clsx\";\nimport { t } from \"../../i18n\";\nimport { useDevice } from \"../App\";\nimport { getShortcutKey } from \"../../utils\";\n\ninterface ColorInputProps {\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  colorPickerType: ColorPickerType;\n}\n\nexport const ColorInput = ({\n  color,\n  onChange,\n  label,\n  colorPickerType,\n}: ColorInputProps) => {\n  const device = useDevice();\n  const [innerValue, setInnerValue] = useState(color);\n  const [activeSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  useEffect(() => {\n    setInnerValue(color);\n  }, [color]);\n\n  const changeColor = useCallback(\n    (inputValue: string) => {\n      const value = inputValue.toLowerCase();\n      const color = getColor(value);\n\n      if (color) {\n        onChange(color);\n      }\n      setInnerValue(value);\n    },\n    [onChange],\n  );\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const eyeDropperTriggerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [activeSection]);\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(\n    activeEyeDropperAtom,\n    jotaiScope,\n  );\n\n  useEffect(() => {\n    return () => {\n      setEyeDropperState(null);\n    };\n  }, [setEyeDropperState]);\n\n  return (\n    <div className=\"color-picker__input-label\">\n      <div className=\"color-picker__input-hash\">#</div>\n      <input\n        ref={activeSection === \"hex\" ? inputRef : undefined}\n        style={{ border: 0, padding: 0 }}\n        spellCheck={false}\n        className=\"color-picker-input\"\n        aria-label={label}\n        onChange={(event) => {\n          changeColor(event.target.value);\n        }}\n        value={(innerValue || \"\").replace(/^#/, \"\")}\n        onBlur={() => {\n          setInnerValue(color);\n        }}\n        tabIndex={-1}\n        onFocus={() => setActiveColorPickerSection(\"hex\")}\n        onKeyDown={(event) => {\n          if (event.key === KEYS.TAB) {\n            return;\n          } else if (event.key === KEYS.ESCAPE) {\n            eyeDropperTriggerRef.current?.focus();\n          }\n          event.stopPropagation();\n        }}\n      />\n      {/* TODO reenable on mobile with a better UX */}\n      {!device.editor.isMobile && (\n        <>\n          <div\n            style={{\n              width: \"1px\",\n              height: \"1.25rem\",\n              backgroundColor: \"var(--default-border-color)\",\n            }}\n          />\n          <div\n            ref={eyeDropperTriggerRef}\n            className={clsx(\"excalidraw-eye-dropper-trigger\", {\n              selected: eyeDropperState,\n            })}\n            onClick={() =>\n              setEyeDropperState((s) =>\n                s\n                  ? null\n                  : {\n                      keepOpenOnAlt: false,\n                      onSelect: (color) => onChange(color),\n                      colorPickerType,\n                    },\n              )\n            }\n            title={`${t(\n              \"labels.eyeDropper\",\n            )} \u2014 ${KEYS.I.toLocaleUpperCase()} or ${getShortcutKey(\"Alt\")} `}\n          >\n            {eyeDropperIcon}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .focus-visible-none:focus-visible {\n  outline: none !important;\n}\n.excalidraw .color-picker__heading {\n  padding: 0 0.5rem;\n  font-size: 0.75rem;\n  text-align: left;\n}\n.excalidraw .color-picker-container {\n  display: grid;\n  grid-template-columns: 1fr 20px 1.625rem;\n  padding: 0.25rem 0px;\n  align-items: center;\n}\n.excalidraw--mobile.excalidraw .color-picker-container {\n  max-width: 175px;\n}\n\n.excalidraw .color-picker__top-picks {\n  display: flex;\n  justify-content: space-between;\n}\n.excalidraw .color-picker__button {\n  --radius: 0.25rem;\n  padding: 0;\n  margin: 0;\n  width: 1.35rem;\n  height: 1.35rem;\n  border: 1px solid var(--color-gray-30);\n  border-radius: var(--radius);\n  filter: var(--theme-filter);\n  background-color: var(--swatch-color);\n  background-position: left center;\n  position: relative;\n  font-family: inherit;\n  box-sizing: border-box;\n}\n.excalidraw .color-picker__button:hover::after {\n  content: \"\";\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  box-shadow: 0 0 0 1px var(--color-gray-30);\n  border-radius: calc(var(--radius) + 1px);\n  filter: var(--theme-filter);\n}\n.excalidraw .color-picker__button.active .color-picker__button-outline {\n  position: absolute;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  box-shadow: 0 0 0 1px var(--color-primary-darkest);\n  z-index: 1;\n  border-radius: calc(var(--radius) + 1px);\n  filter: var(--theme-filter);\n}\n.excalidraw .color-picker__button:focus-visible {\n  outline: none;\n}\n.excalidraw .color-picker__button:focus-visible::after {\n  content: \"\";\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  bottom: -4px;\n  left: -4px;\n  border: 3px solid var(--focus-highlight-color);\n  border-radius: calc(var(--radius) + 1px);\n}\n.excalidraw .color-picker__button:focus-visible.active .color-picker__button-outline {\n  display: none;\n}\n.excalidraw .color-picker__button--large {\n  --radius: 0.5rem;\n  width: 1.875rem;\n  height: 1.875rem;\n}\n.excalidraw .color-picker__button.is-transparent {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\");\n}\n.excalidraw .color-picker__button--no-focus-visible {\n  border: 0;\n}\n.excalidraw .color-picker__button--no-focus-visible::after {\n  display: none;\n}\n.excalidraw .color-picker__button--no-focus-visible:focus-visible {\n  outline: none !important;\n}\n.excalidraw .color-picker__button.active-color {\n  border-radius: calc(var(--radius) + 1px);\n  width: 1.625rem;\n  height: 1.625rem;\n}\n.excalidraw .color-picker__button__hotkey-label {\n  position: absolute;\n  right: 4px;\n  bottom: 4px;\n  filter: none;\n  font-size: 11px;\n}\n.excalidraw .color-picker {\n  background: var(--popup-bg-color);\n  border: 0 solid rgba(255, 255, 255, 0.25);\n  box-shadow: rgba(0, 0, 0, 0.25) 0 1px 4px;\n  border-radius: 4px;\n  position: absolute;\n}\n:root[dir=ltr] .excalidraw .color-picker {\n  left: -5.5px;\n}\n:root[dir=rtl] .excalidraw .color-picker {\n  right: -5.5px;\n}\n.excalidraw .color-picker-control-container {\n  display: grid;\n  grid-template-columns: auto 1fr;\n  align-items: center;\n  column-gap: 0.5rem;\n}\n.excalidraw .color-picker-control-container + .popover {\n  position: static;\n}\n.excalidraw .color-picker-popover-container {\n  margin-top: -0.25rem;\n}\n:root[dir=ltr] .excalidraw .color-picker-popover-container {\n  margin-left: 0.5rem;\n}\n:root[dir=rtl] .excalidraw .color-picker-popover-container {\n  margin-left: -3rem;\n}\n.excalidraw .color-picker-triangle {\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 0 9px 10px;\n  border-color: transparent transparent var(--popup-bg-color);\n  position: absolute;\n  top: 10px;\n}\n:root[dir=ltr] .excalidraw .color-picker-triangle {\n  transform: rotate(270deg);\n  left: -14px;\n}\n:root[dir=rtl] .excalidraw .color-picker-triangle {\n  transform: rotate(90deg);\n  right: -14px;\n}\n.excalidraw .color-picker-triangle-shadow {\n  border-color: transparent transparent rgba(0, 0, 0, 0.1);\n}\n:root[dir=ltr] .excalidraw .color-picker-triangle-shadow {\n  left: -14px;\n}\n:root[dir=rtl] .excalidraw .color-picker-triangle-shadow {\n  right: -16px;\n}\n.excalidraw .color-picker-content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  outline: none;\n}\n.excalidraw .color-picker-content--default {\n  padding: 0.5rem;\n  display: grid;\n  grid-template-columns: repeat(5, 1.875rem);\n  grid-gap: 0.25rem;\n  border-radius: 4px;\n}\n.excalidraw .color-picker-content--default:focus {\n  outline: none;\n  box-shadow: 0 0 0 2px var(--focus-highlight-color);\n}\n.excalidraw .color-picker-content--canvas {\n  display: flex;\n  flex-direction: column;\n  padding: 0.25rem;\n}\n.excalidraw .color-picker-content--canvas-title {\n  color: #868e96;\n  font-size: 12px;\n  padding: 0 0.25rem;\n}\n.excalidraw .color-picker-content--canvas-colors {\n  padding: 0.5rem 0;\n}\n.excalidraw .color-picker-content--canvas-colors .color-picker-swatch {\n  margin: 0 0.25rem;\n}\n.excalidraw .color-picker-content .color-input-container {\n  grid-column: 1/span 5;\n}\n.excalidraw .color-picker-swatch {\n  position: relative;\n  height: 1.875rem;\n  width: 1.875rem;\n  cursor: pointer;\n  border-radius: 4px;\n  margin: 0;\n  box-sizing: border-box;\n  border: 1px solid #ddd;\n  background-color: currentColor !important;\n  filter: var(--theme-filter);\n}\n.excalidraw .color-picker-swatch:focus {\n  /* TODO: only show the border when the color is too light to see as a shadow */\n  box-shadow: 0 0 4px 1px currentColor;\n  border-color: var(--select-highlight-color);\n}\n.excalidraw .color-picker-transparent {\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 0 1px inset;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.excalidraw .color-picker-transparent,\n.excalidraw .color-picker-label-swatch {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center;\n}\n.excalidraw .color-picker-hash {\n  height: var(--default-button-size);\n  flex-shrink: 0;\n  padding: 0.5rem 0.5rem 0.5rem 0.75rem;\n  border: 1px solid var(--default-border-color);\n  border-right: 0;\n  box-sizing: border-box;\n  color: var(--input-label-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n:root[dir=ltr] .excalidraw .color-picker-hash {\n  border-radius: var(--border-radius-lg) 0 0 var(--border-radius-lg);\n}\n:root[dir=rtl] .excalidraw .color-picker-hash {\n  border-radius: 0 var(--border-radius-lg) var(--border-radius-lg) 0;\n  border-right: 1px solid var(--default-border-color);\n  border-left: 0;\n}\n.excalidraw .color-input-container {\n  display: flex;\n}\n.excalidraw .color-input-container:focus-within {\n  box-shadow: 0 0 0 1px var(--color-primary-darkest);\n  border-radius: var(--border-radius-lg);\n}\n.excalidraw .color-picker__input-label {\n  display: grid;\n  grid-template-columns: auto 1fr auto auto;\n  gap: 8px;\n  align-items: center;\n  border: 1px solid var(--default-border-color);\n  border-radius: 8px;\n  padding: 0 12px;\n  margin: 8px;\n  box-sizing: border-box;\n}\n.excalidraw .color-picker__input-label:focus-within {\n  box-shadow: 0 0 0 1px var(--color-primary-darkest);\n  border-radius: var(--border-radius-lg);\n}\n.excalidraw .color-picker__input-hash {\n  padding: 0 0.25rem;\n}\n.excalidraw .color-picker-input {\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0;\n  font-size: 0.875rem;\n  font-family: inherit;\n  background-color: transparent;\n  color: var(--text-primary-color);\n  border: 0;\n  outline: none;\n  height: var(--default-button-size);\n  border: 1px solid var(--default-border-color);\n  border-left: 0;\n  letter-spacing: 0.4px;\n  padding: 0.5rem;\n  padding-left: 0.25rem;\n  appearance: none;\n}\n:root[dir=ltr] .excalidraw .color-picker-input {\n  border-radius: 0 var(--border-radius-lg) var(--border-radius-lg) 0;\n}\n:root[dir=rtl] .excalidraw .color-picker-input {\n  border-radius: var(--border-radius-lg) 0 0 var(--border-radius-lg);\n  border-left: 1px solid var(--default-border-color);\n  border-right: 0;\n}\n.excalidraw .color-picker-input:focus-visible {\n  box-shadow: none;\n}\n.excalidraw .color-picker-label-swatch-container {\n  border: 1px solid var(--default-border-color);\n  border-radius: var(--border-radius-lg);\n  width: var(--default-button-size);\n  height: var(--default-button-size);\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.excalidraw .color-picker-label-swatch {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  background-color: var(--swatch-color) !important;\n  overflow: hidden;\n  position: relative;\n  filter: var(--theme-filter);\n  border: 0 !important;\n}\n.excalidraw .color-picker-label-swatch svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .color-picker-label-swatch:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .color-picker-label-swatch:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .color-picker-label-swatch.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .color-picker-label-swatch.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .color-picker-label-swatch.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw .color-picker-label-swatch:after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--swatch-color);\n}\n.excalidraw .color-picker-keybinding {\n  position: absolute;\n  bottom: 2px;\n  font-size: 0.7em;\n}\n:root[dir=ltr] .excalidraw .color-picker-keybinding {\n  right: 2px;\n}\n:root[dir=rtl] .excalidraw .color-picker-keybinding {\n  left: 2px;\n}\n.excalidraw--mobile.excalidraw .color-picker-keybinding {\n  display: none;\n}\n\n.excalidraw .color-picker-type-canvasBackground .color-picker-keybinding {\n  color: #aaa;\n}\n.excalidraw .color-picker-type-elementBackground .color-picker-keybinding {\n  color: #ffffff;\n}\n.excalidraw .color-picker-swatch[aria-label=transparent] .color-picker-keybinding {\n  color: #aaa;\n}\n.excalidraw .color-picker-type-elementStroke .color-picker-keybinding {\n  color: #d4d4d4;\n}\n.excalidraw.theme--dark .color-picker-type-elementBackground .color-picker-keybinding {\n  color: #000000;\n}\n.excalidraw.theme--dark .color-picker-swatch[aria-label=transparent] .color-picker-keybinding {\n  color: #000000;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvQ29sb3JQaWNrZXIiLCJzb3VyY2VzIjpbIi4uLy4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJDb2xvclBpY2tlci5zY3NzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQ3pLRTtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FEaEJPO0VDbUJMOzs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFLRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJQTtFQUNFOztBQUtOO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFDQTtFQUNFOztBQUVGO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtFQUNFOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7O0FBRUE7RUFDRSxPQy9MTTtFRGdNTjtFQUNBOztBQUdGO0VBQ0U7O0FBRUE7RUFDRTs7QUFLTjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7QUFDRTtFQUNBO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtBQUFBO0VBRUU7O0FBSUY7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFZQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQWRBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBVUo7RUFDRTs7QUFFQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUlKO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQVlBO0VBQ0E7RUFDQTs7QUFaQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQU9GO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RURuVUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VDdVRFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FEelRGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFJQTs7QUFNRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUlBOztBQUtBO0VBQ0U7O0FBTUY7RUFDRTs7QUNtUkY7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FEclpLO0VDeVpMOzs7QUFJSjtFQUNFOztBQUdGO0VBQ0UsT0MxWmU7O0FENlpqQjtFQUNFOztBQUdGO0VBQ0U7O0FBSUE7RUFDRSxPQ3RhYTs7QUR3YWY7RUFDRSxPQ3phYSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5mb2N1cy12aXNpYmxlLW5vbmUge1xuICAgICY6Zm9jdXMtdmlzaWJsZSB7XG4gICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuICB9XG5cbiAgLmNvbG9yLXBpY2tlcl9faGVhZGluZyB7XG4gICAgcGFkZGluZzogMCAwLjVyZW07XG4gICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyMHB4IDEuNjI1cmVtO1xuICAgIHBhZGRpbmc6IDAuMjVyZW0gMHB4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICBtYXgtd2lkdGg6IDE3NXB4O1xuICAgIH1cbiAgfVxuXG4gIC5jb2xvci1waWNrZXJfX3RvcC1waWNrcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cblxuICAuY29sb3ItcGlja2VyX19idXR0b24ge1xuICAgIC0tcmFkaXVzOiAwLjI1cmVtO1xuXG4gICAgcGFkZGluZzogMDtcbiAgICBtYXJnaW46IDA7XG4gICAgd2lkdGg6IDEuMzVyZW07XG4gICAgaGVpZ2h0OiAxLjM1cmVtO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWdyYXktMzApO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cyk7XG4gICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN3YXRjaC1jb2xvcik7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogbGVmdCBjZW50ZXI7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgICY6OmFmdGVyIHtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1ncmF5LTMwKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1yYWRpdXMpICsgMXB4KTtcbiAgICAgICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgICYuYWN0aXZlIHtcbiAgICAgIC5jb2xvci1waWNrZXJfX2J1dHRvbi1vdXRsaW5lIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpO1xuICAgICAgICB6LWluZGV4OiAxOyAvLyBkdWUgaG92ZXIgc3RhdGUgc28gdGhpcyBoYXMgcHJlZmVyZW5jZVxuICAgICAgICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLXJhZGl1cykgKyAxcHgpO1xuICAgICAgICBmaWx0ZXI6IHZhcigtLXRoZW1lLWZpbHRlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpmb2N1cy12aXNpYmxlIHtcbiAgICAgIG91dGxpbmU6IG5vbmU7XG5cbiAgICAgICY6OmFmdGVyIHtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IC00cHg7XG4gICAgICAgIHJpZ2h0OiAtNHB4O1xuICAgICAgICBib3R0b206IC00cHg7XG4gICAgICAgIGxlZnQ6IC00cHg7XG4gICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHZhcigtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tcmFkaXVzKSArIDFweCk7XG4gICAgICB9XG5cbiAgICAgICYuYWN0aXZlIHtcbiAgICAgICAgLmNvbG9yLXBpY2tlcl9fYnV0dG9uLW91dGxpbmUge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLS1sYXJnZSB7XG4gICAgICAtLXJhZGl1czogMC41cmVtO1xuICAgICAgd2lkdGg6IDEuODc1cmVtO1xuICAgICAgaGVpZ2h0OiAxLjg3NXJlbTtcbiAgICB9XG5cbiAgICAmLmlzLXRyYW5zcGFyZW50IHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFNVWxFUVZRNFQyTmtZR0FRWWNBUDN1Q1RaaHcxZ0dHWWhBR0JaSUEvbllEQ2dCREFtOUJHRFdBQUp5UkNnTGFCQ0FBZ1h3aXh6QVMwcGdBQUFBQkpSVTVFcmtKZ2dnPT1cIik7XG4gICAgfVxuXG4gICAgJi0tbm8tZm9jdXMtdmlzaWJsZSB7XG4gICAgICBib3JkZXI6IDA7XG4gICAgICAmOjphZnRlciB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgICAmOmZvY3VzLXZpc2libGUge1xuICAgICAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi5hY3RpdmUtY29sb3Ige1xuICAgICAgYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1yYWRpdXMpICsgMXB4KTtcbiAgICAgIHdpZHRoOiAxLjYyNXJlbTtcbiAgICAgIGhlaWdodDogMS42MjVyZW07XG4gICAgfVxuICB9XG5cbiAgLmNvbG9yLXBpY2tlcl9fYnV0dG9uX19ob3RrZXktbGFiZWwge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogNHB4O1xuICAgIGJvdHRvbTogNHB4O1xuICAgIGZpbHRlcjogbm9uZTtcbiAgICBmb250LXNpemU6IDExcHg7XG4gIH1cblxuICAuY29sb3ItcGlja2VyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wb3B1cC1iZy1jb2xvcik7XG4gICAgYm9yZGVyOiAwIHNvbGlkIHRyYW5zcGFyZW50aXplKCRvYy13aGl0ZSwgMC43NSk7XG4gICAgYm94LXNoYWRvdzogdHJhbnNwYXJlbnRpemUoJG9jLWJsYWNrLCAwLjc1KSAwIDFweCA0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICAgIDpyb290W2Rpcj1cImx0clwiXSAmIHtcbiAgICAgIGxlZnQ6IC01LjVweDtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICByaWdodDogLTUuNXB4O1xuICAgIH1cbiAgfVxuXG4gIC5jb2xvci1waWNrZXItY29udHJvbC1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGNvbHVtbi1nYXA6IDAuNXJlbTtcbiAgfVxuXG4gIC5jb2xvci1waWNrZXItY29udHJvbC1jb250YWluZXIgKyAucG9wb3ZlciB7XG4gICAgcG9zaXRpb246IHN0YXRpYztcbiAgfVxuXG4gIC5jb2xvci1waWNrZXItcG9wb3Zlci1jb250YWluZXIge1xuICAgIG1hcmdpbi10b3A6IC0wLjI1cmVtO1xuXG4gICAgOnJvb3RbZGlyPVwibHRyXCJdICYge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICBtYXJnaW4tbGVmdDogLTNyZW07XG4gICAgfVxuICB9XG5cbiAgLmNvbG9yLXBpY2tlci10cmlhbmdsZSB7XG4gICAgd2lkdGg6IDA7XG4gICAgaGVpZ2h0OiAwO1xuICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgYm9yZGVyLXdpZHRoOiAwIDlweCAxMHB4O1xuICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdmFyKC0tcG9wdXAtYmctY29sb3IpO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwcHg7XG5cbiAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJiB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyNzBkZWcpO1xuICAgICAgbGVmdDogLTE0cHg7XG4gICAgfVxuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xuICAgICAgcmlnaHQ6IC0xNHB4O1xuICAgIH1cbiAgfVxuXG4gIC5jb2xvci1waWNrZXItdHJpYW5nbGUtc2hhZG93IHtcbiAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50aXplKCRvYy1ibGFjaywgMC45KTtcblxuICAgIDpyb290W2Rpcj1cImx0clwiXSAmIHtcbiAgICAgIGxlZnQ6IC0xNHB4O1xuICAgIH1cblxuICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgIHJpZ2h0OiAtMTZweDtcbiAgICB9XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDAuNzVyZW07XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuXG4gIC5jb2xvci1waWNrZXItY29udGVudC0tZGVmYXVsdCB7XG4gICAgcGFkZGluZzogMC41cmVtO1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNSwgMS44NzVyZW0pO1xuICAgIGdyaWQtZ2FwOiAwLjI1cmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcblxuICAgICY6Zm9jdXMge1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCB2YXIoLS1mb2N1cy1oaWdobGlnaHQtY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIC5jb2xvci1waWNrZXItY29udGVudC0tY2FudmFzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgcGFkZGluZzogMC4yNXJlbTtcblxuICAgICYtdGl0bGUge1xuICAgICAgY29sb3I6ICRvYy1ncmF5LTY7XG4gICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICBwYWRkaW5nOiAwIDAuMjVyZW07XG4gICAgfVxuXG4gICAgJi1jb2xvcnMge1xuICAgICAgcGFkZGluZzogMC41cmVtIDA7XG5cbiAgICAgIC5jb2xvci1waWNrZXItc3dhdGNoIHtcbiAgICAgICAgbWFyZ2luOiAwIDAuMjVyZW07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLmNvbG9yLXBpY2tlci1jb250ZW50IC5jb2xvci1pbnB1dC1jb250YWluZXIge1xuICAgIGdyaWQtY29sdW1uOiAxIC8gc3BhbiA1O1xuICB9XG5cbiAgLmNvbG9yLXBpY2tlci1zd2F0Y2gge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDEuODc1cmVtO1xuICAgIHdpZHRoOiAxLjg3NXJlbTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG1hcmdpbjogMDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yICFpbXBvcnRhbnQ7XG4gICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuXG4gICAgJjpmb2N1cyB7XG4gICAgICAvKiBUT0RPOiBvbmx5IHNob3cgdGhlIGJvcmRlciB3aGVuIHRoZSBjb2xvciBpcyB0b28gbGlnaHQgdG8gc2VlIGFzIGEgc2hhZG93ICovXG4gICAgICBib3gtc2hhZG93OiAwIDAgNHB4IDFweCBjdXJyZW50Q29sb3I7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLXNlbGVjdC1oaWdobGlnaHQtY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIC5jb2xvci1waWNrZXItdHJhbnNwYXJlbnQge1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3gtc2hhZG93OiB0cmFuc3BhcmVudGl6ZSgkb2MtYmxhY2ssIDAuOSkgMCAwIDAgMXB4IGluc2V0O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gIH1cblxuICAuY29sb3ItcGlja2VyLXRyYW5zcGFyZW50LFxuICAuY29sb3ItcGlja2VyLWxhYmVsLXN3YXRjaCB7XG4gICAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQU1VbEVRVlE0VDJOa1lHQVFZY0FQM3VDVFpodzFnR0dZaEFHQlpJQS9uWURDZ0JEQW05QkdEV0FBSnlSQ2dMYUJDQUFnWHdpeHpBUzBwZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKVxuICAgICAgbGVmdCBjZW50ZXI7XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWhhc2gge1xuICAgIGhlaWdodDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgcGFkZGluZzogMC41cmVtIDAuNXJlbSAwLjVyZW0gMC43NXJlbTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJpZ2h0OiAwO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJiB7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAwIDAgdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gICAgfVxuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgYm9yZGVyLXJhZGl1czogMCB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAwO1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpO1xuICAgICAgYm9yZGVyLWxlZnQ6IDA7XG4gICAgfVxuXG4gICAgY29sb3I6IHZhcigtLWlucHV0LWxhYmVsLWNvbG9yKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgLmNvbG9yLWlucHV0LWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcblxuICAgICY6Zm9jdXMtd2l0aGluIHtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpO1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gICAgfVxuICB9XG5cbiAgLmNvbG9yLXBpY2tlcl9faW5wdXQtbGFiZWwge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmciBhdXRvIGF1dG87XG4gICAgZ2FwOiA4cHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICBtYXJnaW46IDhweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gICAgJjpmb2N1cy13aXRoaW4ge1xuICAgICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCk7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICB9XG4gIH1cblxuICAuY29sb3ItcGlja2VyX19pbnB1dC1oYXNoIHtcbiAgICBwYWRkaW5nOiAwIDAuMjVyZW07XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWlucHV0IHtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1hcmdpbjogMDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICAgIGJvcmRlcjogMDtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGhlaWdodDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1sZWZ0OiAwO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjRweDtcblxuICAgIDpyb290W2Rpcj1cImx0clwiXSAmIHtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDAgdmFyKC0tYm9yZGVyLXJhZGl1cy1sZykgdmFyKC0tYm9yZGVyLXJhZGl1cy1sZykgMDtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAwIDAgdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKTtcbiAgICAgIGJvcmRlci1yaWdodDogMDtcbiAgICB9XG5cbiAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgcGFkZGluZy1sZWZ0OiAwLjI1cmVtO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG5cbiAgICAmOmZvY3VzLXZpc2libGUge1xuICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICB9XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWxhYmVsLXN3YXRjaC1jb250YWluZXIge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICB3aWR0aDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWxhYmVsLXN3YXRjaCB7XG4gICAgQGluY2x1ZGUgb3V0bGluZUJ1dHRvblN0eWxlcztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zd2F0Y2gtY29sb3IpICFpbXBvcnRhbnQ7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuICAgIGJvcmRlcjogMCAhaW1wb3J0YW50O1xuXG4gICAgJjphZnRlciB7XG4gICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tc3dhdGNoLWNvbG9yKTtcbiAgICB9XG4gIH1cblxuICAuY29sb3ItcGlja2VyLWtleWJpbmRpbmcge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IDJweDtcbiAgICBmb250LXNpemU6IDAuN2VtO1xuXG4gICAgOnJvb3RbZGlyPVwibHRyXCJdICYge1xuICAgICAgcmlnaHQ6IDJweDtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICBsZWZ0OiAycHg7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cblxuICAuY29sb3ItcGlja2VyLXR5cGUtY2FudmFzQmFja2dyb3VuZCAuY29sb3ItcGlja2VyLWtleWJpbmRpbmcge1xuICAgIGNvbG9yOiAjYWFhO1xuICB9XG5cbiAgLmNvbG9yLXBpY2tlci10eXBlLWVsZW1lbnRCYWNrZ3JvdW5kIC5jb2xvci1waWNrZXIta2V5YmluZGluZyB7XG4gICAgY29sb3I6ICRvYy13aGl0ZTtcbiAgfVxuXG4gIC5jb2xvci1waWNrZXItc3dhdGNoW2FyaWEtbGFiZWw9XCJ0cmFuc3BhcmVudFwiXSAuY29sb3ItcGlja2VyLWtleWJpbmRpbmcge1xuICAgIGNvbG9yOiAjYWFhO1xuICB9XG5cbiAgLmNvbG9yLXBpY2tlci10eXBlLWVsZW1lbnRTdHJva2UgLmNvbG9yLXBpY2tlci1rZXliaW5kaW5nIHtcbiAgICBjb2xvcjogI2Q0ZDRkNDtcbiAgfVxuXG4gICYudGhlbWUtLWRhcmsge1xuICAgIC5jb2xvci1waWNrZXItdHlwZS1lbGVtZW50QmFja2dyb3VuZCAuY29sb3ItcGlja2VyLWtleWJpbmRpbmcge1xuICAgICAgY29sb3I6ICRvYy1ibGFjaztcbiAgICB9XG4gICAgLmNvbG9yLXBpY2tlci1zd2F0Y2hbYXJpYS1sYWJlbD1cInRyYW5zcGFyZW50XCJdIC5jb2xvci1waWNrZXIta2V5YmluZGluZyB7XG4gICAgICBjb2xvcjogJG9jLWJsYWNrO1xuICAgIH1cbiAgfVxufVxuIiwiLy9cbi8vXG4vLyAg8J2XliDwnZeiIPCdl58g8J2XoiDwnZelXG4vLyAgdiAxLjkuMVxuLy9cbi8vICDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblxuXG4vLyAgR2VuZXJhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtd2hpdGU6ICAgICAgICAgI2ZmZmZmZjtcbiRvYy1ibGFjazogICAgICAgICAjMDAwMDAwO1xuXG5cbi8vICBHcmF5XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmF5LWxpc3Q6IChcbiAgXCIwXCI6ICNmOGY5ZmEsXG4gIFwiMVwiOiAjZjFmM2Y1LFxuICBcIjJcIjogI2U5ZWNlZixcbiAgXCIzXCI6ICNkZWUyZTYsXG4gIFwiNFwiOiAjY2VkNGRhLFxuICBcIjVcIjogI2FkYjViZCxcbiAgXCI2XCI6ICM4NjhlOTYsXG4gIFwiN1wiOiAjNDk1MDU3LFxuICBcIjhcIjogIzM0M2E0MCxcbiAgXCI5XCI6ICMyMTI1Mjlcbik7XG5cbiRvYy1ncmF5LTA6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXktMTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjFcIik7XG4kb2MtZ3JheS0yOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMlwiKTtcbiRvYy1ncmF5LTM6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXktNDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjRcIik7XG4kb2MtZ3JheS01OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNVwiKTtcbiRvYy1ncmF5LTY6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXktNzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjdcIik7XG4kb2MtZ3JheS04OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOFwiKTtcbiRvYy1ncmF5LTk6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBSZWRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXJlZC1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNWY1LFxuICBcIjFcIjogI2ZmZTNlMyxcbiAgXCIyXCI6ICNmZmM5YzksXG4gIFwiM1wiOiAjZmZhOGE4LFxuICBcIjRcIjogI2ZmODc4NyxcbiAgXCI1XCI6ICNmZjZiNmIsXG4gIFwiNlwiOiAjZmE1MjUyLFxuICBcIjdcIjogI2YwM2UzZSxcbiAgXCI4XCI6ICNlMDMxMzEsXG4gIFwiOVwiOiAjYzkyYTJhXG4pO1xuXG4kb2MtcmVkLTA6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjBcIik7XG4kb2MtcmVkLTE6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjFcIik7XG4kb2MtcmVkLTI6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjJcIik7XG4kb2MtcmVkLTM6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjNcIik7XG4kb2MtcmVkLTQ6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjRcIik7XG4kb2MtcmVkLTU6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjVcIik7XG4kb2MtcmVkLTY6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjZcIik7XG4kb2MtcmVkLTc6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjdcIik7XG4kb2MtcmVkLTg6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjhcIik7XG4kb2MtcmVkLTk6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjlcIik7XG5cblxuLy8gIFBpbmtcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXBpbmstbGlzdDogKFxuICBcIjBcIjogI2ZmZjBmNixcbiAgXCIxXCI6ICNmZmRlZWIsXG4gIFwiMlwiOiAjZmNjMmQ3LFxuICBcIjNcIjogI2ZhYTJjMSxcbiAgXCI0XCI6ICNmNzgzYWMsXG4gIFwiNVwiOiAjZjA2NTk1LFxuICBcIjZcIjogI2U2NDk4MCxcbiAgXCI3XCI6ICNkNjMzNmMsXG4gIFwiOFwiOiAjYzIyNTVjLFxuICBcIjlcIjogI2E2MWU0ZFxuKTtcblxuJG9jLXBpbmstMDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjBcIik7XG4kb2MtcGluay0xOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMVwiKTtcbiRvYy1waW5rLTI6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIyXCIpO1xuJG9jLXBpbmstMzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjNcIik7XG4kb2MtcGluay00OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNFwiKTtcbiRvYy1waW5rLTU6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI1XCIpO1xuJG9jLXBpbmstNjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjZcIik7XG4kb2MtcGluay03OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiN1wiKTtcbiRvYy1waW5rLTg6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI4XCIpO1xuJG9jLXBpbmstOTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyYXBlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmFwZS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmMGZjLFxuICBcIjFcIjogI2YzZDlmYSxcbiAgXCIyXCI6ICNlZWJlZmEsXG4gIFwiM1wiOiAjZTU5OWY3LFxuICBcIjRcIjogI2RhNzdmMixcbiAgXCI1XCI6ICNjYzVkZTgsXG4gIFwiNlwiOiAjYmU0YmRiLFxuICBcIjdcIjogI2FlM2VjOSxcbiAgXCI4XCI6ICM5YzM2YjUsXG4gIFwiOVwiOiAjODYyZTljXG4pO1xuXG4kb2MtZ3JhcGUtMDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXBlLTE6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmFwZS0yOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjJcIik7XG4kb2MtZ3JhcGUtMzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXBlLTQ6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmFwZS01OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjVcIik7XG4kb2MtZ3JhcGUtNjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXBlLTc6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmFwZS04OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjhcIik7XG4kb2MtZ3JhcGUtOTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBWaW9sZXRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXZpb2xldC1saXN0OiAoXG4gIFwiMFwiOiAjZjNmMGZmLFxuICBcIjFcIjogI2U1ZGJmZixcbiAgXCIyXCI6ICNkMGJmZmYsXG4gIFwiM1wiOiAjYjE5N2ZjLFxuICBcIjRcIjogIzk3NzVmYSxcbiAgXCI1XCI6ICM4NDVlZjcsXG4gIFwiNlwiOiAjNzk1MGYyLFxuICBcIjdcIjogIzcwNDhlOCxcbiAgXCI4XCI6ICM2NzQxZDksXG4gIFwiOVwiOiAjNWYzZGM0XG4pO1xuXG4kb2MtdmlvbGV0LTA6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjBcIik7XG4kb2MtdmlvbGV0LTE6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjFcIik7XG4kb2MtdmlvbGV0LTI6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjJcIik7XG4kb2MtdmlvbGV0LTM6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjNcIik7XG4kb2MtdmlvbGV0LTQ6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjRcIik7XG4kb2MtdmlvbGV0LTU6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjVcIik7XG4kb2MtdmlvbGV0LTY6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjZcIik7XG4kb2MtdmlvbGV0LTc6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjdcIik7XG4kb2MtdmlvbGV0LTg6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjhcIik7XG4kb2MtdmlvbGV0LTk6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEluZGlnb1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtaW5kaWdvLWxpc3Q6IChcbiAgXCIwXCI6ICNlZGYyZmYsXG4gIFwiMVwiOiAjZGJlNGZmLFxuICBcIjJcIjogI2JhYzhmZixcbiAgXCIzXCI6ICM5MWE3ZmYsXG4gIFwiNFwiOiAjNzQ4ZmZjLFxuICBcIjVcIjogIzVjN2NmYSxcbiAgXCI2XCI6ICM0YzZlZjUsXG4gIFwiN1wiOiAjNDI2M2ViLFxuICBcIjhcIjogIzNiNWJkYixcbiAgXCI5XCI6ICMzNjRmYzdcbik7XG5cbiRvYy1pbmRpZ28tMDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMFwiKTtcbiRvYy1pbmRpZ28tMTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMVwiKTtcbiRvYy1pbmRpZ28tMjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMlwiKTtcbiRvYy1pbmRpZ28tMzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiM1wiKTtcbiRvYy1pbmRpZ28tNDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNFwiKTtcbiRvYy1pbmRpZ28tNTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNVwiKTtcbiRvYy1pbmRpZ28tNjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNlwiKTtcbiRvYy1pbmRpZ28tNzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiN1wiKTtcbiRvYy1pbmRpZ28tODogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOFwiKTtcbiRvYy1pbmRpZ28tOTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQmx1ZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtYmx1ZS1saXN0OiAoXG4gIFwiMFwiOiAjZTdmNWZmLFxuICBcIjFcIjogI2QwZWJmZixcbiAgXCIyXCI6ICNhNWQ4ZmYsXG4gIFwiM1wiOiAjNzRjMGZjLFxuICBcIjRcIjogIzRkYWJmNyxcbiAgXCI1XCI6ICMzMzlhZjAsXG4gIFwiNlwiOiAjMjI4YmU2LFxuICBcIjdcIjogIzFjN2VkNixcbiAgXCI4XCI6ICMxOTcxYzIsXG4gIFwiOVwiOiAjMTg2NGFiXG4pO1xuXG4kb2MtYmx1ZS0wOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMFwiKTtcbiRvYy1ibHVlLTE6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIxXCIpO1xuJG9jLWJsdWUtMjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjJcIik7XG4kb2MtYmx1ZS0zOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiM1wiKTtcbiRvYy1ibHVlLTQ6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI0XCIpO1xuJG9jLWJsdWUtNTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjVcIik7XG4kb2MtYmx1ZS02OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNlwiKTtcbiRvYy1ibHVlLTc6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI3XCIpO1xuJG9jLWJsdWUtODogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjhcIik7XG4kb2MtYmx1ZS05OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ3lhblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY3lhbi1saXN0OiAoXG4gIFwiMFwiOiAjZTNmYWZjLFxuICBcIjFcIjogI2M1ZjZmYSxcbiAgXCIyXCI6ICM5OWU5ZjIsXG4gIFwiM1wiOiAjNjZkOWU4LFxuICBcIjRcIjogIzNiYzlkYixcbiAgXCI1XCI6ICMyMmI4Y2YsXG4gIFwiNlwiOiAjMTVhYWJmLFxuICBcIjdcIjogIzEwOThhZCxcbiAgXCI4XCI6ICMwYzg1OTksXG4gIFwiOVwiOiAjMGI3Mjg1XG4pO1xuXG4kb2MtY3lhbi0wOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMFwiKTtcbiRvYy1jeWFuLTE6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIxXCIpO1xuJG9jLWN5YW4tMjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjJcIik7XG4kb2MtY3lhbi0zOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiM1wiKTtcbiRvYy1jeWFuLTQ6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI0XCIpO1xuJG9jLWN5YW4tNTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjVcIik7XG4kb2MtY3lhbi02OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNlwiKTtcbiRvYy1jeWFuLTc6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI3XCIpO1xuJG9jLWN5YW4tODogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjhcIik7XG4kb2MtY3lhbi05OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVGVhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdGVhbC1saXN0OiAoXG4gIFwiMFwiOiAjZTZmY2Y1LFxuICBcIjFcIjogI2MzZmFlOCxcbiAgXCIyXCI6ICM5NmYyZDcsXG4gIFwiM1wiOiAjNjNlNmJlLFxuICBcIjRcIjogIzM4ZDlhOSxcbiAgXCI1XCI6ICMyMGM5OTcsXG4gIFwiNlwiOiAjMTJiODg2LFxuICBcIjdcIjogIzBjYTY3OCxcbiAgXCI4XCI6ICMwOTkyNjgsXG4gIFwiOVwiOiAjMDg3ZjViXG4pO1xuXG4kb2MtdGVhbC0wOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMFwiKTtcbiRvYy10ZWFsLTE6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIxXCIpO1xuJG9jLXRlYWwtMjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjJcIik7XG4kb2MtdGVhbC0zOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiM1wiKTtcbiRvYy10ZWFsLTQ6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI0XCIpO1xuJG9jLXRlYWwtNTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjVcIik7XG4kb2MtdGVhbC02OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNlwiKTtcbiRvYy10ZWFsLTc6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI3XCIpO1xuJG9jLXRlYWwtODogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjhcIik7XG4kb2MtdGVhbC05OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JlZW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyZWVuLWxpc3Q6IChcbiAgXCIwXCI6ICNlYmZiZWUsXG4gIFwiMVwiOiAjZDNmOWQ4LFxuICBcIjJcIjogI2IyZjJiYixcbiAgXCIzXCI6ICM4Y2U5OWEsXG4gIFwiNFwiOiAjNjlkYjdjLFxuICBcIjVcIjogIzUxY2Y2NixcbiAgXCI2XCI6ICM0MGMwNTcsXG4gIFwiN1wiOiAjMzdiMjRkLFxuICBcIjhcIjogIzJmOWU0NCxcbiAgXCI5XCI6ICMyYjhhM2Vcbik7XG5cbiRvYy1ncmVlbi0wOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjBcIik7XG4kb2MtZ3JlZW4tMTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIxXCIpO1xuJG9jLWdyZWVuLTI6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmVlbi0zOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjNcIik7XG4kb2MtZ3JlZW4tNDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI0XCIpO1xuJG9jLWdyZWVuLTU6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmVlbi02OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjZcIik7XG4kb2MtZ3JlZW4tNzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI3XCIpO1xuJG9jLWdyZWVuLTg6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmVlbi05OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIExpbWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWxpbWUtbGlzdDogKFxuICBcIjBcIjogI2Y0ZmNlMyxcbiAgXCIxXCI6ICNlOWZhYzgsXG4gIFwiMlwiOiAjZDhmNWEyLFxuICBcIjNcIjogI2MwZWI3NSxcbiAgXCI0XCI6ICNhOWUzNGIsXG4gIFwiNVwiOiAjOTRkODJkLFxuICBcIjZcIjogIzgyYzkxZSxcbiAgXCI3XCI6ICM3NGI4MTYsXG4gIFwiOFwiOiAjNjZhODBmLFxuICBcIjlcIjogIzVjOTQwZFxuKTtcblxuJG9jLWxpbWUtMDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjBcIik7XG4kb2MtbGltZS0xOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMVwiKTtcbiRvYy1saW1lLTI6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIyXCIpO1xuJG9jLWxpbWUtMzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjNcIik7XG4kb2MtbGltZS00OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNFwiKTtcbiRvYy1saW1lLTU6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI1XCIpO1xuJG9jLWxpbWUtNjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjZcIik7XG4kb2MtbGltZS03OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiN1wiKTtcbiRvYy1saW1lLTg6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI4XCIpO1xuJG9jLWxpbWUtOTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFllbGxvd1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MteWVsbG93LWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY5ZGIsXG4gIFwiMVwiOiAjZmZmM2JmLFxuICBcIjJcIjogI2ZmZWM5OSxcbiAgXCIzXCI6ICNmZmUwNjYsXG4gIFwiNFwiOiAjZmZkNDNiLFxuICBcIjVcIjogI2ZjYzQxOSxcbiAgXCI2XCI6ICNmYWIwMDUsXG4gIFwiN1wiOiAjZjU5ZjAwLFxuICBcIjhcIjogI2YwOGMwMCxcbiAgXCI5XCI6ICNlNjc3MDBcbik7XG5cbiRvYy15ZWxsb3ctMDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMFwiKTtcbiRvYy15ZWxsb3ctMTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMVwiKTtcbiRvYy15ZWxsb3ctMjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMlwiKTtcbiRvYy15ZWxsb3ctMzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiM1wiKTtcbiRvYy15ZWxsb3ctNDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNFwiKTtcbiRvYy15ZWxsb3ctNTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNVwiKTtcbiRvYy15ZWxsb3ctNjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNlwiKTtcbiRvYy15ZWxsb3ctNzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiN1wiKTtcbiRvYy15ZWxsb3ctODogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOFwiKTtcbiRvYy15ZWxsb3ctOTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgT3JhbmdlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1vcmFuZ2UtbGlzdDogKFxuICBcIjBcIjogI2ZmZjRlNixcbiAgXCIxXCI6ICNmZmU4Y2MsXG4gIFwiMlwiOiAjZmZkOGE4LFxuICBcIjNcIjogI2ZmYzA3OCxcbiAgXCI0XCI6ICNmZmE5NGQsXG4gIFwiNVwiOiAjZmY5MjJiLFxuICBcIjZcIjogI2ZkN2UxNCxcbiAgXCI3XCI6ICNmNzY3MDcsXG4gIFwiOFwiOiAjZTg1OTBjLFxuICBcIjlcIjogI2Q5NDgwZlxuKTtcblxuJG9jLW9yYW5nZS0wOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIwXCIpO1xuJG9jLW9yYW5nZS0xOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIxXCIpO1xuJG9jLW9yYW5nZS0yOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIyXCIpO1xuJG9jLW9yYW5nZS0zOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIzXCIpO1xuJG9jLW9yYW5nZS00OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI0XCIpO1xuJG9jLW9yYW5nZS01OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI1XCIpO1xuJG9jLW9yYW5nZS02OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI2XCIpO1xuJG9jLW9yYW5nZS03OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI3XCIpO1xuJG9jLW9yYW5nZS04OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI4XCIpO1xuJG9jLW9yYW5nZS05OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDb2xvciBsaXN0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jb2xvci1zcGVjdHJ1bTogICA5O1xuXG4kb2MtY29sb3ItbGlzdDogKFxuICAkb2MtZ3JheS1saXN0OiAgICAgIFwiZ3JheVwiLFxuICAkb2MtcmVkLWxpc3Q6ICAgICAgXCJyZWRcIixcbiAgJG9jLXBpbmstbGlzdDogICAgICBcInBpbmtcIixcbiAgJG9jLWdyYXBlLWxpc3Q6ICAgICAgXCJncmFwZVwiLFxuICAkb2MtdmlvbGV0LWxpc3Q6ICAgICAgXCJ2aW9sZXRcIixcbiAgJG9jLWluZGlnby1saXN0OiAgICAgIFwiaW5kaWdvXCIsXG4gICRvYy1ibHVlLWxpc3Q6ICAgICAgXCJibHVlXCIsXG4gICRvYy1jeWFuLWxpc3Q6ICAgICAgXCJjeWFuXCIsXG4gICRvYy10ZWFsLWxpc3Q6ICAgICAgXCJ0ZWFsXCIsXG4gICRvYy1ncmVlbi1saXN0OiAgICAgIFwiZ3JlZW5cIixcbiAgJG9jLWxpbWUtbGlzdDogICAgICBcImxpbWVcIixcbiAgJG9jLXllbGxvdy1saXN0OiAgICAgIFwieWVsbG93XCIsXG4gICRvYy1vcmFuZ2UtbGlzdDogICAgICBcIm9yYW5nZVwiXG4pO1xuIl19 */", "import { isInteractive, isTransparent, isWritableElement } from \"../../utils\";\nimport { ExcalidrawElement } from \"../../element/types\";\nimport { AppState } from \"../../types\";\nimport { TopPicks } from \"./TopPicks\";\nimport { Picker } from \"./Picker\";\nimport * as Popover from \"@radix-ui/react-popover\";\nimport { useAtom } from \"jotai\";\nimport {\n  activeColorPickerSectionAtom,\n  ColorPickerType,\n} from \"./colorPickerUtils\";\nimport { useDevice, useExcalidrawContainer } from \"../App\";\nimport { ColorTuple, COLOR_PALETTE, ColorPaletteCustom } from \"../../colors\";\nimport PickerHeading from \"./PickerHeading\";\nimport { t } from \"../../i18n\";\nimport clsx from \"clsx\";\nimport { jotaiScope } from \"../../jotai\";\nimport { ColorInput } from \"./ColorInput\";\nimport { useRef } from \"react\";\nimport { activeEyeDropperAtom } from \"../EyeDropper\";\n\nimport \"./ColorPicker.scss\";\n\nconst isValidColor = (color: string) => {\n  const style = new Option().style;\n  style.color = color;\n  return !!style.color;\n};\n\nexport const getColor = (color: string): string | null => {\n  if (isTransparent(color)) {\n    return color;\n  }\n\n  // testing for `#` first fixes a bug on Electron (more specfically, an\n  // Obsidian popout window), where a hex color without `#` is (incorrectly)\n  // considered valid\n  return isValidColor(`#${color}`)\n    ? `#${color}`\n    : isValidColor(color)\n    ? color\n    : null;\n};\n\ninterface ColorPickerProps {\n  type: ColorPickerType;\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  elements: readonly ExcalidrawElement[];\n  appState: AppState;\n  palette?: ColorPaletteCustom | null;\n  topPicks?: ColorTuple;\n  updateData: (formData?: any) => void;\n}\n\nconst ColorPickerPopupContent = ({\n  type,\n  color,\n  onChange,\n  label,\n  elements,\n  palette = COLOR_PALETTE,\n  updateData,\n}: Pick<\n  ColorPickerProps,\n  | \"type\"\n  | \"color\"\n  | \"onChange\"\n  | \"label\"\n  | \"elements\"\n  | \"palette\"\n  | \"updateData\"\n>) => {\n  const [, setActiveColorPickerSection] = useAtom(activeColorPickerSectionAtom);\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(\n    activeEyeDropperAtom,\n    jotaiScope,\n  );\n\n  const { container } = useExcalidrawContainer();\n  const device = useDevice();\n\n  const colorInputJSX = (\n    <div>\n      <PickerHeading>{t(\"colorPicker.hexCode\")}</PickerHeading>\n      <ColorInput\n        color={color}\n        label={label}\n        onChange={(color) => {\n          onChange(color);\n        }}\n        colorPickerType={type}\n      />\n    </div>\n  );\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  const focusPickerContent = () => {\n    popoverRef.current\n      ?.querySelector<HTMLDivElement>(\".color-picker-content\")\n      ?.focus();\n  };\n\n  return (\n    <Popover.Portal container={container}>\n      <Popover.Content\n        ref={popoverRef}\n        className=\"focus-visible-none\"\n        data-prevent-outside-click\n        onFocusOutside={(event) => {\n          focusPickerContent();\n          event.preventDefault();\n        }}\n        onPointerDownOutside={(event) => {\n          if (eyeDropperState) {\n            // prevent from closing if we click outside the popover\n            // while eyedropping (e.g. click when clicking the sidebar;\n            // the eye-dropper-backdrop is prevented downstream)\n            event.preventDefault();\n          }\n        }}\n        onCloseAutoFocus={(e) => {\n          e.stopPropagation();\n          // prevents focusing the trigger\n          e.preventDefault();\n\n          // return focus to excalidraw container unless\n          // user focuses an interactive element, such as a button, or\n          // enters the text editor by clicking on canvas with the text tool\n          if (container && !isInteractive(document.activeElement)) {\n            container.focus();\n          }\n\n          updateData({ openPopup: null });\n          setActiveColorPickerSection(null);\n        }}\n        side={\n          device.editor.isMobile && !device.viewport.isLandscape\n            ? \"bottom\"\n            : \"right\"\n        }\n        align={\n          device.editor.isMobile && !device.viewport.isLandscape\n            ? \"center\"\n            : \"start\"\n        }\n        alignOffset={-16}\n        sideOffset={20}\n        style={{\n          zIndex: \"var(--zIndex-layerUI)\",\n          backgroundColor: \"var(--popup-bg-color)\",\n          maxWidth: \"208px\",\n          maxHeight: window.innerHeight,\n          padding: \"12px\",\n          borderRadius: \"8px\",\n          boxSizing: \"border-box\",\n          overflowY: \"auto\",\n          boxShadow:\n            \"0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702)\",\n        }}\n      >\n        {palette ? (\n          <Picker\n            palette={palette}\n            color={color}\n            onChange={(changedColor) => {\n              onChange(changedColor);\n            }}\n            onEyeDropperToggle={(force) => {\n              setEyeDropperState((state) => {\n                if (force) {\n                  state = state || {\n                    keepOpenOnAlt: true,\n                    onSelect: onChange,\n                    colorPickerType: type,\n                  };\n                  state.keepOpenOnAlt = true;\n                  return state;\n                }\n\n                return force === false || state\n                  ? null\n                  : {\n                      keepOpenOnAlt: false,\n                      onSelect: onChange,\n                      colorPickerType: type,\n                    };\n              });\n            }}\n            onEscape={(event) => {\n              if (eyeDropperState) {\n                setEyeDropperState(null);\n              } else if (isWritableElement(event.target)) {\n                focusPickerContent();\n              } else {\n                updateData({ openPopup: null });\n              }\n            }}\n            label={label}\n            type={type}\n            elements={elements}\n            updateData={updateData}\n          >\n            {colorInputJSX}\n          </Picker>\n        ) : (\n          colorInputJSX\n        )}\n        <Popover.Arrow\n          width={20}\n          height={10}\n          style={{\n            fill: \"var(--popup-bg-color)\",\n            filter: \"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)\",\n          }}\n        />\n      </Popover.Content>\n    </Popover.Portal>\n  );\n};\n\nconst ColorPickerTrigger = ({\n  label,\n  color,\n  type,\n}: {\n  color: string;\n  label: string;\n  type: ColorPickerType;\n}) => {\n  return (\n    <Popover.Trigger\n      type=\"button\"\n      className={clsx(\"color-picker__button active-color\", {\n        \"is-transparent\": color === \"transparent\" || !color,\n      })}\n      aria-label={label}\n      style={color ? { \"--swatch-color\": color } : undefined}\n      title={\n        type === \"elementStroke\"\n          ? t(\"labels.showStroke\")\n          : t(\"labels.showBackground\")\n      }\n    >\n      <div className=\"color-picker__button-outline\" />\n    </Popover.Trigger>\n  );\n};\n\nexport const ColorPicker = ({\n  type,\n  color,\n  onChange,\n  label,\n  elements,\n  palette = COLOR_PALETTE,\n  topPicks,\n  updateData,\n  appState,\n}: ColorPickerProps) => {\n  return (\n    <div>\n      <div role=\"dialog\" aria-modal=\"true\" className=\"color-picker-container\">\n        <TopPicks\n          activeColor={color}\n          onChange={onChange}\n          type={type}\n          topPicks={topPicks}\n        />\n        <div\n          style={{\n            width: 1,\n            height: \"100%\",\n            backgroundColor: \"var(--default-border-color)\",\n            margin: \"0 auto\",\n          }}\n        />\n        <Popover.Root\n          open={appState.openPopup === type}\n          onOpenChange={(open) => {\n            updateData({ openPopup: open ? type : null });\n          }}\n        >\n          {/* serves as an active color indicator as well */}\n          <ColorPickerTrigger color={color} label={label} type={type} />\n          {/* popup content */}\n          {appState.openPopup === type && (\n            <ColorPickerPopupContent\n              type={type}\n              color={color}\n              onChange={onChange}\n              label={label}\n              elements={elements}\n              palette={palette}\n              updateData={updateData}\n            />\n          )}\n        </Popover.Root>\n      </div>\n    </div>\n  );\n};\n", ".excalidraw .popover {\n  position: absolute;\n  z-index: 10;\n  padding: 5px 0 5px;\n  outline: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIlBvcG92ZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFO0VBQ0E7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4Y2FsaWRyYXcge1xuICAucG9wb3ZlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwO1xuICAgIHBhZGRpbmc6IDVweCAwIDVweDtcbiAgICBvdXRsaW5lOiBub25lO1xuICB9XG59XG4iXX0= */", "import React, { useLayoutEffect, useRef, useEffect } from \"react\";\nimport \"./Popover.scss\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport { queryFocusableElements } from \"../utils\";\nimport { KEYS } from \"../keys\";\n\ntype Props = {\n  top?: number;\n  left?: number;\n  children?: React.ReactNode;\n  onCloseRequest?(event: PointerEvent): void;\n  fitInViewport?: boolean;\n  offsetLeft?: number;\n  offsetTop?: number;\n  viewportWidth?: number;\n  viewportHeight?: number;\n};\n\nexport const Popover = ({\n  children,\n  left,\n  top,\n  onCloseRequest,\n  fitInViewport = false,\n  offsetLeft = 0,\n  offsetTop = 0,\n  viewportWidth = window.innerWidth,\n  viewportHeight = window.innerHeight,\n}: Props) => {\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const container = popoverRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    // focus popover only if the caller didn't focus on something else nested\n    // within the popover, which should take precedence. Fixes cases\n    // like color picker listening to keydown events on containers nested\n    // in the popover.\n    if (!container.contains(document.activeElement)) {\n      container.focus();\n    }\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === KEYS.TAB) {\n        const focusableElements = queryFocusableElements(container);\n        const { activeElement } = document;\n        const currentIndex = focusableElements.findIndex(\n          (element) => element === activeElement,\n        );\n\n        if (activeElement === container) {\n          if (event.shiftKey) {\n            focusableElements[focusableElements.length - 1]?.focus();\n          } else {\n            focusableElements[0].focus();\n          }\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        } else if (currentIndex === 0 && event.shiftKey) {\n          focusableElements[focusableElements.length - 1]?.focus();\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        } else if (\n          currentIndex === focusableElements.length - 1 &&\n          !event.shiftKey\n        ) {\n          focusableElements[0]?.focus();\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        }\n      }\n    };\n\n    container.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => container.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  const lastInitializedPosRef = useRef<{ top: number; left: number } | null>(\n    null,\n  );\n\n  // ensure the popover doesn't overflow the viewport\n  useLayoutEffect(() => {\n    if (fitInViewport && popoverRef.current && top != null && left != null) {\n      const container = popoverRef.current;\n      const { width, height } = container.getBoundingClientRect();\n\n      // hack for StrictMode so this effect only runs once for\n      // the same top/left position, otherwise\n      // we'd potentically reposition twice (once for viewport overflow)\n      // and once for top/left position afterwards\n      if (\n        lastInitializedPosRef.current?.top === top &&\n        lastInitializedPosRef.current?.left === left\n      ) {\n        return;\n      }\n      lastInitializedPosRef.current = { top, left };\n\n      if (width >= viewportWidth) {\n        container.style.width = `${viewportWidth}px`;\n        container.style.left = \"0px\";\n        container.style.overflowX = \"scroll\";\n      } else if (left + width - offsetLeft > viewportWidth) {\n        container.style.left = `${viewportWidth - width - 10}px`;\n      } else {\n        container.style.left = `${left}px`;\n      }\n\n      if (height >= viewportHeight) {\n        container.style.height = `${viewportHeight - 20}px`;\n        container.style.top = \"10px\";\n        container.style.overflowY = \"scroll\";\n      } else if (top + height - offsetTop > viewportHeight) {\n        container.style.top = `${viewportHeight - height}px`;\n      } else {\n        container.style.top = `${top}px`;\n      }\n    }\n  }, [\n    top,\n    left,\n    fitInViewport,\n    viewportWidth,\n    viewportHeight,\n    offsetLeft,\n    offsetTop,\n  ]);\n\n  useEffect(() => {\n    if (onCloseRequest) {\n      const handler = (event: PointerEvent) => {\n        if (!popoverRef.current?.contains(event.target as Node)) {\n          unstable_batchedUpdates(() => onCloseRequest(event));\n        }\n      };\n      document.addEventListener(\"pointerdown\", handler, false);\n      return () => document.removeEventListener(\"pointerdown\", handler, false);\n    }\n  }, [onCloseRequest]);\n\n  return (\n    <div className=\"popover\" ref={popoverRef} tabIndex={-1}>\n      {children}\n    </div>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .picker-container {\n  display: inline-block;\n  box-sizing: border-box;\n  margin-right: 0.25rem;\n}\n.excalidraw .picker {\n  background: var(--popup-bg-color);\n  border: 0 solid rgba(255, 255, 255, 0.25);\n  box-shadow: rgba(0, 0, 0, 0.25) 2px 2px 4px 2px;\n  border-radius: 4px;\n  position: absolute;\n}\n.excalidraw .picker-container button,\n.excalidraw .picker button {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.excalidraw .picker-container button:focus-visible,\n.excalidraw .picker button:focus-visible {\n  outline: transparent;\n  background-color: var(--button-gray-2);\n}\n.excalidraw .picker-container button:focus-visible svg,\n.excalidraw .picker button:focus-visible svg {\n  opacity: 1;\n}\n.excalidraw .picker-container button:hover,\n.excalidraw .picker button:hover {\n  background-color: var(--button-gray-2);\n}\n.excalidraw .picker-container button:active,\n.excalidraw .picker button:active {\n  background-color: var(--button-gray-3);\n}\n.excalidraw .picker-container button:disabled,\n.excalidraw .picker button:disabled {\n  cursor: not-allowed;\n}\n.excalidraw .picker-container button svg,\n.excalidraw .picker button svg {\n  margin: 0;\n  width: 36px;\n  height: 18px;\n  pointer-events: none;\n}\n.excalidraw .picker button {\n  padding: 0.25rem 0.28rem 0.35rem 0.25rem;\n}\n.excalidraw .picker-triangle {\n  width: 0;\n  height: 0;\n  position: relative;\n  top: -10px;\n  z-index: 10;\n}\n:root[dir=ltr] .excalidraw .picker-triangle {\n  left: 12px;\n}\n:root[dir=rtl] .excalidraw .picker-triangle {\n  right: 12px;\n}\n.excalidraw .picker-triangle:before {\n  content: \"\";\n  position: absolute;\n  border-style: solid;\n  border-width: 0 9px 10px;\n  border-color: transparent transparent rgba(0, 0, 0, 0.1);\n  top: -1px;\n}\n.excalidraw .picker-triangle:after {\n  content: \"\";\n  position: absolute;\n  border-style: solid;\n  border-width: 0 9px 10px;\n  border-color: transparent transparent var(--popup-bg-color);\n}\n.excalidraw .picker-content {\n  padding: 0.5rem;\n  display: grid;\n  grid-template-columns: repeat(3, auto);\n  grid-gap: 0.5rem;\n  border-radius: 4px;\n}\n:root[dir=rtl] .excalidraw .picker-content {\n  padding: 0.4rem;\n}\n.excalidraw .picker-keybinding {\n  position: absolute;\n  bottom: 2px;\n  font-size: 0.7em;\n  color: var(--keybinding-color);\n}\n:root[dir=ltr] .excalidraw .picker-keybinding {\n  right: 2px;\n}\n:root[dir=rtl] .excalidraw .picker-keybinding {\n  left: 2px;\n}\n.excalidraw--mobile.excalidraw .picker-keybinding {\n  display: none;\n}\n\n.excalidraw .picker-type-canvasBackground .picker-keybinding {\n  color: #aaa;\n}\n.excalidraw .picker-type-elementBackground .picker-keybinding {\n  color: #ffffff;\n}\n.excalidraw .picker-swatch[aria-label=transparent] .picker-keybinding {\n  color: #aaa;\n}\n.excalidraw .picker-type-elementStroke .picker-keybinding {\n  color: #d4d4d4;\n}\n.excalidraw.theme--dark .picker-type-elementBackground .picker-keybinding {\n  color: #000000;\n}\n.excalidraw.theme--dark .picker-swatch[aria-label=transparent] .picker-keybinding {\n  color: #000000;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJJY29uUGlja2VyLnNjc3MiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUVBO0VBQ0E7RUFDQTs7QUFHRjtBQUFBO0VBRUU7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7QUFBQTtFQUNFO0VBQ0E7O0FBQ0E7QUFBQTtFQUNFOztBQUlKO0FBQUE7RUFDRTs7QUFHRjtBQUFBO0VBQ0U7O0FBR0Y7QUFBQTtFQUNFOztBQUdGO0FBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFRQTs7QUFQQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUY7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFDQTtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBRDVHSztFQytHTDs7O0FBSUo7RUFDRTs7QUFHRjtFQUNFLE9DaEhlOztBRG1IakI7RUFDRTs7QUFHRjtFQUNFOztBQUlBO0VBQ0UsT0M1SGE7O0FEOEhmO0VBQ0UsT0MvSGEiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAucGlja2VyLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgbWFyZ2luLXJpZ2h0OiAwLjI1cmVtO1xuICB9XG5cbiAgLnBpY2tlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tcG9wdXAtYmctY29sb3IpO1xuICAgIGJvcmRlcjogMCBzb2xpZCB0cmFuc3BhcmVudGl6ZSgkb2Mtd2hpdGUsIDAuNzUpO1xuICAgIC8vIMuHy4cgeWVhaCwgaSBkdW5ubywgb3BlbiB0byBzdWdnZXN0aW9ucyBoZXJlIDpEXG4gICAgYm94LXNoYWRvdzogcmdiKDAgMCAwIC8gMjUlKSAycHggMnB4IDRweCAycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgfVxuXG4gIC5waWNrZXItY29udGFpbmVyIGJ1dHRvbixcbiAgLnBpY2tlciBidXR0b24ge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgICAmOmZvY3VzLXZpc2libGUge1xuICAgICAgb3V0bGluZTogdHJhbnNwYXJlbnQ7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tZ3JheS0yKTtcbiAgICAgICYgc3ZnIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ncmF5LTIpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ncmF5LTMpO1xuICAgIH1cblxuICAgICY6ZGlzYWJsZWQge1xuICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgd2lkdGg6IDM2cHg7XG4gICAgICBoZWlnaHQ6IDE4cHg7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG4gIH1cblxuICAucGlja2VyIGJ1dHRvbiB7XG4gICAgcGFkZGluZzogMC4yNXJlbSAwLjI4cmVtIDAuMzVyZW0gMC4yNXJlbTtcbiAgfVxuXG4gIC5waWNrZXItdHJpYW5nbGUge1xuICAgIHdpZHRoOiAwO1xuICAgIGhlaWdodDogMDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAtMTBweDtcbiAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJiB7XG4gICAgICBsZWZ0OiAxMnB4O1xuICAgIH1cblxuICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgIHJpZ2h0OiAxMnB4O1xuICAgIH1cbiAgICB6LWluZGV4OiAxMDtcblxuICAgICY6YmVmb3JlIHtcbiAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgYm9yZGVyLXdpZHRoOiAwIDlweCAxMHB4O1xuICAgICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudGl6ZSgkb2MtYmxhY2ssIDAuOSk7XG4gICAgICB0b3A6IC0xcHg7XG4gICAgfVxuXG4gICAgJjphZnRlciB7XG4gICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgICAgIGJvcmRlci13aWR0aDogMCA5cHggMTBweDtcbiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdmFyKC0tcG9wdXAtYmctY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIC5waWNrZXItY29udGVudCB7XG4gICAgcGFkZGluZzogMC41cmVtO1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgYXV0byk7XG4gICAgZ3JpZC1nYXA6IDAuNXJlbTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgcGFkZGluZzogMC40cmVtO1xuICAgIH1cbiAgfVxuXG4gIC5waWNrZXIta2V5YmluZGluZyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMnB4O1xuICAgIGZvbnQtc2l6ZTogMC43ZW07XG4gICAgY29sb3I6IHZhcigtLWtleWJpbmRpbmctY29sb3IpO1xuXG4gICAgOnJvb3RbZGlyPVwibHRyXCJdICYge1xuICAgICAgcmlnaHQ6IDJweDtcbiAgICB9XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICBsZWZ0OiAycHg7XG4gICAgfVxuICAgIEBpbmNsdWRlIGlzTW9iaWxlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgLnBpY2tlci10eXBlLWNhbnZhc0JhY2tncm91bmQgLnBpY2tlci1rZXliaW5kaW5nIHtcbiAgICBjb2xvcjogI2FhYTtcbiAgfVxuXG4gIC5waWNrZXItdHlwZS1lbGVtZW50QmFja2dyb3VuZCAucGlja2VyLWtleWJpbmRpbmcge1xuICAgIGNvbG9yOiAkb2Mtd2hpdGU7XG4gIH1cblxuICAucGlja2VyLXN3YXRjaFthcmlhLWxhYmVsPVwidHJhbnNwYXJlbnRcIl0gLnBpY2tlci1rZXliaW5kaW5nIHtcbiAgICBjb2xvcjogI2FhYTtcbiAgfVxuXG4gIC5waWNrZXItdHlwZS1lbGVtZW50U3Ryb2tlIC5waWNrZXIta2V5YmluZGluZyB7XG4gICAgY29sb3I6ICNkNGQ0ZDQ7XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAucGlja2VyLXR5cGUtZWxlbWVudEJhY2tncm91bmQgLnBpY2tlci1rZXliaW5kaW5nIHtcbiAgICAgIGNvbG9yOiAkb2MtYmxhY2s7XG4gICAgfVxuICAgIC5waWNrZXItc3dhdGNoW2FyaWEtbGFiZWw9XCJ0cmFuc3BhcmVudFwiXSAucGlja2VyLWtleWJpbmRpbmcge1xuICAgICAgY29sb3I6ICRvYy1ibGFjaztcbiAgICB9XG4gIH1cbn1cbiIsIi8vXG4vL1xuLy8gIPCdl5Yg8J2XoiDwnZefIPCdl6Ig8J2XpVxuLy8gIHYgMS45LjFcbi8vXG4vLyAg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cblxuLy8gIEdlbmVyYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXdoaXRlOiAgICAgICAgICNmZmZmZmY7XG4kb2MtYmxhY2s6ICAgICAgICAgIzAwMDAwMDtcblxuXG4vLyAgR3JheVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JheS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmOWZhLFxuICBcIjFcIjogI2YxZjNmNSxcbiAgXCIyXCI6ICNlOWVjZWYsXG4gIFwiM1wiOiAjZGVlMmU2LFxuICBcIjRcIjogI2NlZDRkYSxcbiAgXCI1XCI6ICNhZGI1YmQsXG4gIFwiNlwiOiAjODY4ZTk2LFxuICBcIjdcIjogIzQ5NTA1NyxcbiAgXCI4XCI6ICMzNDNhNDAsXG4gIFwiOVwiOiAjMjEyNTI5XG4pO1xuXG4kb2MtZ3JheS0wOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMFwiKTtcbiRvYy1ncmF5LTE6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXktMjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjJcIik7XG4kb2MtZ3JheS0zOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiM1wiKTtcbiRvYy1ncmF5LTQ6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXktNTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjVcIik7XG4kb2MtZ3JheS02OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNlwiKTtcbiRvYy1ncmF5LTc6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXktODogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjhcIik7XG4kb2MtZ3JheS05OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUmVkXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1yZWQtbGlzdDogKFxuICBcIjBcIjogI2ZmZjVmNSxcbiAgXCIxXCI6ICNmZmUzZTMsXG4gIFwiMlwiOiAjZmZjOWM5LFxuICBcIjNcIjogI2ZmYThhOCxcbiAgXCI0XCI6ICNmZjg3ODcsXG4gIFwiNVwiOiAjZmY2YjZiLFxuICBcIjZcIjogI2ZhNTI1MixcbiAgXCI3XCI6ICNmMDNlM2UsXG4gIFwiOFwiOiAjZTAzMTMxLFxuICBcIjlcIjogI2M5MmEyYVxuKTtcblxuJG9jLXJlZC0wOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIwXCIpO1xuJG9jLXJlZC0xOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIxXCIpO1xuJG9jLXJlZC0yOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIyXCIpO1xuJG9jLXJlZC0zOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIzXCIpO1xuJG9jLXJlZC00OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI0XCIpO1xuJG9jLXJlZC01OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI1XCIpO1xuJG9jLXJlZC02OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI2XCIpO1xuJG9jLXJlZC03OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI3XCIpO1xuJG9jLXJlZC04OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI4XCIpO1xuJG9jLXJlZC05OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBQaW5rXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1waW5rLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmYwZjYsXG4gIFwiMVwiOiAjZmZkZWViLFxuICBcIjJcIjogI2ZjYzJkNyxcbiAgXCIzXCI6ICNmYWEyYzEsXG4gIFwiNFwiOiAjZjc4M2FjLFxuICBcIjVcIjogI2YwNjU5NSxcbiAgXCI2XCI6ICNlNjQ5ODAsXG4gIFwiN1wiOiAjZDYzMzZjLFxuICBcIjhcIjogI2MyMjU1YyxcbiAgXCI5XCI6ICNhNjFlNGRcbik7XG5cbiRvYy1waW5rLTA6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIwXCIpO1xuJG9jLXBpbmstMTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjFcIik7XG4kb2MtcGluay0yOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMlwiKTtcbiRvYy1waW5rLTM6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIzXCIpO1xuJG9jLXBpbmstNDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjRcIik7XG4kb2MtcGluay01OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNVwiKTtcbiRvYy1waW5rLTY6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI2XCIpO1xuJG9jLXBpbmstNzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjdcIik7XG4kb2MtcGluay04OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOFwiKTtcbiRvYy1waW5rLTk6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmFwZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JhcGUtbGlzdDogKFxuICBcIjBcIjogI2Y4ZjBmYyxcbiAgXCIxXCI6ICNmM2Q5ZmEsXG4gIFwiMlwiOiAjZWViZWZhLFxuICBcIjNcIjogI2U1OTlmNyxcbiAgXCI0XCI6ICNkYTc3ZjIsXG4gIFwiNVwiOiAjY2M1ZGU4LFxuICBcIjZcIjogI2JlNGJkYixcbiAgXCI3XCI6ICNhZTNlYzksXG4gIFwiOFwiOiAjOWMzNmI1LFxuICBcIjlcIjogIzg2MmU5Y1xuKTtcblxuJG9jLWdyYXBlLTA6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmFwZS0xOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjFcIik7XG4kb2MtZ3JhcGUtMjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXBlLTM6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmFwZS00OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjRcIik7XG4kb2MtZ3JhcGUtNTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXBlLTY6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmFwZS03OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjdcIik7XG4kb2MtZ3JhcGUtODogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXBlLTk6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVmlvbGV0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy12aW9sZXQtbGlzdDogKFxuICBcIjBcIjogI2YzZjBmZixcbiAgXCIxXCI6ICNlNWRiZmYsXG4gIFwiMlwiOiAjZDBiZmZmLFxuICBcIjNcIjogI2IxOTdmYyxcbiAgXCI0XCI6ICM5Nzc1ZmEsXG4gIFwiNVwiOiAjODQ1ZWY3LFxuICBcIjZcIjogIzc5NTBmMixcbiAgXCI3XCI6ICM3MDQ4ZTgsXG4gIFwiOFwiOiAjNjc0MWQ5LFxuICBcIjlcIjogIzVmM2RjNFxuKTtcblxuJG9jLXZpb2xldC0wOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIwXCIpO1xuJG9jLXZpb2xldC0xOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIxXCIpO1xuJG9jLXZpb2xldC0yOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIyXCIpO1xuJG9jLXZpb2xldC0zOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIzXCIpO1xuJG9jLXZpb2xldC00OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI0XCIpO1xuJG9jLXZpb2xldC01OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI1XCIpO1xuJG9jLXZpb2xldC02OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI2XCIpO1xuJG9jLXZpb2xldC03OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI3XCIpO1xuJG9jLXZpb2xldC04OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI4XCIpO1xuJG9jLXZpb2xldC05OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBJbmRpZ29cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWluZGlnby1saXN0OiAoXG4gIFwiMFwiOiAjZWRmMmZmLFxuICBcIjFcIjogI2RiZTRmZixcbiAgXCIyXCI6ICNiYWM4ZmYsXG4gIFwiM1wiOiAjOTFhN2ZmLFxuICBcIjRcIjogIzc0OGZmYyxcbiAgXCI1XCI6ICM1YzdjZmEsXG4gIFwiNlwiOiAjNGM2ZWY1LFxuICBcIjdcIjogIzQyNjNlYixcbiAgXCI4XCI6ICMzYjViZGIsXG4gIFwiOVwiOiAjMzY0ZmM3XG4pO1xuXG4kb2MtaW5kaWdvLTA6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjBcIik7XG4kb2MtaW5kaWdvLTE6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjFcIik7XG4kb2MtaW5kaWdvLTI6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjJcIik7XG4kb2MtaW5kaWdvLTM6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjNcIik7XG4kb2MtaW5kaWdvLTQ6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjRcIik7XG4kb2MtaW5kaWdvLTU6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjVcIik7XG4kb2MtaW5kaWdvLTY6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjZcIik7XG4kb2MtaW5kaWdvLTc6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjdcIik7XG4kb2MtaW5kaWdvLTg6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjhcIik7XG4kb2MtaW5kaWdvLTk6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjlcIik7XG5cblxuLy8gIEJsdWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWJsdWUtbGlzdDogKFxuICBcIjBcIjogI2U3ZjVmZixcbiAgXCIxXCI6ICNkMGViZmYsXG4gIFwiMlwiOiAjYTVkOGZmLFxuICBcIjNcIjogIzc0YzBmYyxcbiAgXCI0XCI6ICM0ZGFiZjcsXG4gIFwiNVwiOiAjMzM5YWYwLFxuICBcIjZcIjogIzIyOGJlNixcbiAgXCI3XCI6ICMxYzdlZDYsXG4gIFwiOFwiOiAjMTk3MWMyLFxuICBcIjlcIjogIzE4NjRhYlxuKTtcblxuJG9jLWJsdWUtMDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjBcIik7XG4kb2MtYmx1ZS0xOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMVwiKTtcbiRvYy1ibHVlLTI6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIyXCIpO1xuJG9jLWJsdWUtMzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjNcIik7XG4kb2MtYmx1ZS00OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNFwiKTtcbiRvYy1ibHVlLTU6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI1XCIpO1xuJG9jLWJsdWUtNjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjZcIik7XG4kb2MtYmx1ZS03OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiN1wiKTtcbiRvYy1ibHVlLTg6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI4XCIpO1xuJG9jLWJsdWUtOTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIEN5YW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWN5YW4tbGlzdDogKFxuICBcIjBcIjogI2UzZmFmYyxcbiAgXCIxXCI6ICNjNWY2ZmEsXG4gIFwiMlwiOiAjOTllOWYyLFxuICBcIjNcIjogIzY2ZDllOCxcbiAgXCI0XCI6ICMzYmM5ZGIsXG4gIFwiNVwiOiAjMjJiOGNmLFxuICBcIjZcIjogIzE1YWFiZixcbiAgXCI3XCI6ICMxMDk4YWQsXG4gIFwiOFwiOiAjMGM4NTk5LFxuICBcIjlcIjogIzBiNzI4NVxuKTtcblxuJG9jLWN5YW4tMDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjBcIik7XG4kb2MtY3lhbi0xOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMVwiKTtcbiRvYy1jeWFuLTI6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIyXCIpO1xuJG9jLWN5YW4tMzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjNcIik7XG4kb2MtY3lhbi00OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNFwiKTtcbiRvYy1jeWFuLTU6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI1XCIpO1xuJG9jLWN5YW4tNjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjZcIik7XG4kb2MtY3lhbi03OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiN1wiKTtcbiRvYy1jeWFuLTg6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI4XCIpO1xuJG9jLWN5YW4tOTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIFRlYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXRlYWwtbGlzdDogKFxuICBcIjBcIjogI2U2ZmNmNSxcbiAgXCIxXCI6ICNjM2ZhZTgsXG4gIFwiMlwiOiAjOTZmMmQ3LFxuICBcIjNcIjogIzYzZTZiZSxcbiAgXCI0XCI6ICMzOGQ5YTksXG4gIFwiNVwiOiAjMjBjOTk3LFxuICBcIjZcIjogIzEyYjg4NixcbiAgXCI3XCI6ICMwY2E2NzgsXG4gIFwiOFwiOiAjMDk5MjY4LFxuICBcIjlcIjogIzA4N2Y1YlxuKTtcblxuJG9jLXRlYWwtMDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjBcIik7XG4kb2MtdGVhbC0xOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMVwiKTtcbiRvYy10ZWFsLTI6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIyXCIpO1xuJG9jLXRlYWwtMzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjNcIik7XG4kb2MtdGVhbC00OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNFwiKTtcbiRvYy10ZWFsLTU6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI1XCIpO1xuJG9jLXRlYWwtNjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjZcIik7XG4kb2MtdGVhbC03OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiN1wiKTtcbiRvYy10ZWFsLTg6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI4XCIpO1xuJG9jLXRlYWwtOTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyZWVuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmVlbi1saXN0OiAoXG4gIFwiMFwiOiAjZWJmYmVlLFxuICBcIjFcIjogI2QzZjlkOCxcbiAgXCIyXCI6ICNiMmYyYmIsXG4gIFwiM1wiOiAjOGNlOTlhLFxuICBcIjRcIjogIzY5ZGI3YyxcbiAgXCI1XCI6ICM1MWNmNjYsXG4gIFwiNlwiOiAjNDBjMDU3LFxuICBcIjdcIjogIzM3YjI0ZCxcbiAgXCI4XCI6ICMyZjllNDQsXG4gIFwiOVwiOiAjMmI4YTNlXG4pO1xuXG4kb2MtZ3JlZW4tMDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIwXCIpO1xuJG9jLWdyZWVuLTE6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmVlbi0yOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjJcIik7XG4kb2MtZ3JlZW4tMzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIzXCIpO1xuJG9jLWdyZWVuLTQ6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmVlbi01OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjVcIik7XG4kb2MtZ3JlZW4tNjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI2XCIpO1xuJG9jLWdyZWVuLTc6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmVlbi04OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjhcIik7XG4kb2MtZ3JlZW4tOTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBMaW1lXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1saW1lLWxpc3Q6IChcbiAgXCIwXCI6ICNmNGZjZTMsXG4gIFwiMVwiOiAjZTlmYWM4LFxuICBcIjJcIjogI2Q4ZjVhMixcbiAgXCIzXCI6ICNjMGViNzUsXG4gIFwiNFwiOiAjYTllMzRiLFxuICBcIjVcIjogIzk0ZDgyZCxcbiAgXCI2XCI6ICM4MmM5MWUsXG4gIFwiN1wiOiAjNzRiODE2LFxuICBcIjhcIjogIzY2YTgwZixcbiAgXCI5XCI6ICM1Yzk0MGRcbik7XG5cbiRvYy1saW1lLTA6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIwXCIpO1xuJG9jLWxpbWUtMTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjFcIik7XG4kb2MtbGltZS0yOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMlwiKTtcbiRvYy1saW1lLTM6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIzXCIpO1xuJG9jLWxpbWUtNDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjRcIik7XG4kb2MtbGltZS01OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNVwiKTtcbiRvYy1saW1lLTY6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI2XCIpO1xuJG9jLWxpbWUtNzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjdcIik7XG4kb2MtbGltZS04OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOFwiKTtcbiRvYy1saW1lLTk6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBZZWxsb3dcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXllbGxvdy1saXN0OiAoXG4gIFwiMFwiOiAjZmZmOWRiLFxuICBcIjFcIjogI2ZmZjNiZixcbiAgXCIyXCI6ICNmZmVjOTksXG4gIFwiM1wiOiAjZmZlMDY2LFxuICBcIjRcIjogI2ZmZDQzYixcbiAgXCI1XCI6ICNmY2M0MTksXG4gIFwiNlwiOiAjZmFiMDA1LFxuICBcIjdcIjogI2Y1OWYwMCxcbiAgXCI4XCI6ICNmMDhjMDAsXG4gIFwiOVwiOiAjZTY3NzAwXG4pO1xuXG4kb2MteWVsbG93LTA6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjBcIik7XG4kb2MteWVsbG93LTE6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjFcIik7XG4kb2MteWVsbG93LTI6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjJcIik7XG4kb2MteWVsbG93LTM6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjNcIik7XG4kb2MteWVsbG93LTQ6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjRcIik7XG4kb2MteWVsbG93LTU6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjVcIik7XG4kb2MteWVsbG93LTY6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjZcIik7XG4kb2MteWVsbG93LTc6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjdcIik7XG4kb2MteWVsbG93LTg6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjhcIik7XG4kb2MteWVsbG93LTk6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjlcIik7XG5cblxuLy8gIE9yYW5nZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtb3JhbmdlLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY0ZTYsXG4gIFwiMVwiOiAjZmZlOGNjLFxuICBcIjJcIjogI2ZmZDhhOCxcbiAgXCIzXCI6ICNmZmMwNzgsXG4gIFwiNFwiOiAjZmZhOTRkLFxuICBcIjVcIjogI2ZmOTIyYixcbiAgXCI2XCI6ICNmZDdlMTQsXG4gIFwiN1wiOiAjZjc2NzA3LFxuICBcIjhcIjogI2U4NTkwYyxcbiAgXCI5XCI6ICNkOTQ4MGZcbik7XG5cbiRvYy1vcmFuZ2UtMDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMFwiKTtcbiRvYy1vcmFuZ2UtMTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMVwiKTtcbiRvYy1vcmFuZ2UtMjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMlwiKTtcbiRvYy1vcmFuZ2UtMzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiM1wiKTtcbiRvYy1vcmFuZ2UtNDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNFwiKTtcbiRvYy1vcmFuZ2UtNTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNVwiKTtcbiRvYy1vcmFuZ2UtNjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNlwiKTtcbiRvYy1vcmFuZ2UtNzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiN1wiKTtcbiRvYy1vcmFuZ2UtODogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOFwiKTtcbiRvYy1vcmFuZ2UtOTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ29sb3IgbGlzdFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY29sb3Itc3BlY3RydW06ICAgOTtcblxuJG9jLWNvbG9yLWxpc3Q6IChcbiAgJG9jLWdyYXktbGlzdDogICAgICBcImdyYXlcIixcbiAgJG9jLXJlZC1saXN0OiAgICAgIFwicmVkXCIsXG4gICRvYy1waW5rLWxpc3Q6ICAgICAgXCJwaW5rXCIsXG4gICRvYy1ncmFwZS1saXN0OiAgICAgIFwiZ3JhcGVcIixcbiAgJG9jLXZpb2xldC1saXN0OiAgICAgIFwidmlvbGV0XCIsXG4gICRvYy1pbmRpZ28tbGlzdDogICAgICBcImluZGlnb1wiLFxuICAkb2MtYmx1ZS1saXN0OiAgICAgIFwiYmx1ZVwiLFxuICAkb2MtY3lhbi1saXN0OiAgICAgIFwiY3lhblwiLFxuICAkb2MtdGVhbC1saXN0OiAgICAgIFwidGVhbFwiLFxuICAkb2MtZ3JlZW4tbGlzdDogICAgICBcImdyZWVuXCIsXG4gICRvYy1saW1lLWxpc3Q6ICAgICAgXCJsaW1lXCIsXG4gICRvYy15ZWxsb3ctbGlzdDogICAgICBcInllbGxvd1wiLFxuICAkb2Mtb3JhbmdlLWxpc3Q6ICAgICAgXCJvcmFuZ2VcIlxuKTtcbiJdfQ== */", "import React from \"react\";\nimport { Popover } from \"./Popover\";\n\nimport \"./IconPicker.scss\";\nimport { isArrowKey, KEYS } from \"../keys\";\nimport { getLanguage } from \"../i18n\";\nimport clsx from \"clsx\";\n\nfunction Picker<T>({\n  options,\n  value,\n  label,\n  onChange,\n  onClose,\n}: {\n  label: string;\n  value: T;\n  options: {\n    value: T;\n    text: string;\n    icon: JSX.Element;\n    keyBinding: string | null;\n  }[];\n  onChange: (value: T) => void;\n  onClose: () => void;\n}) {\n  const rFirstItem = React.useRef<HTMLButtonElement>();\n  const rActiveItem = React.useRef<HTMLButtonElement>();\n  const rGallery = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    // After the component is first mounted focus on first input\n    if (rActiveItem.current) {\n      rActiveItem.current.focus();\n    } else if (rGallery.current) {\n      rGallery.current.focus();\n    }\n  }, []);\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    const pressedOption = options.find(\n      (option) => option.keyBinding === event.key.toLowerCase(),\n    )!;\n\n    if (!(event.metaKey || event.altKey || event.ctrlKey) && pressedOption) {\n      // Keybinding navigation\n      const index = options.indexOf(pressedOption);\n      (rGallery!.current!.children![index] as any).focus();\n      event.preventDefault();\n    } else if (event.key === KEYS.TAB) {\n      // Tab navigation cycle through options. If the user tabs\n      // away from the picker, close the picker. We need to use\n      // a timeout here to let the stack clear before checking.\n      setTimeout(() => {\n        const active = rActiveItem.current;\n        const docActive = document.activeElement;\n        if (active !== docActive) {\n          onClose();\n        }\n      }, 0);\n    } else if (isArrowKey(event.key)) {\n      // Arrow navigation\n      const { activeElement } = document;\n      const isRTL = getLanguage().rtl;\n      const index = Array.prototype.indexOf.call(\n        rGallery!.current!.children,\n        activeElement,\n      );\n      if (index !== -1) {\n        const length = options.length;\n        let nextIndex = index;\n\n        switch (event.key) {\n          // Select the next option\n          case isRTL ? KEYS.ARROW_LEFT : KEYS.ARROW_RIGHT:\n          case KEYS.ARROW_DOWN: {\n            nextIndex = (index + 1) % length;\n            break;\n          }\n          // Select the previous option\n          case isRTL ? KEYS.ARROW_RIGHT : KEYS.ARROW_LEFT:\n          case KEYS.ARROW_UP: {\n            nextIndex = (length + index - 1) % length;\n            break;\n          }\n        }\n\n        (rGallery.current!.children![nextIndex] as any).focus();\n      }\n      event.preventDefault();\n    } else if (event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) {\n      // Close on escape or enter\n      event.preventDefault();\n      onClose();\n    }\n    event.nativeEvent.stopImmediatePropagation();\n    event.stopPropagation();\n  };\n\n  return (\n    <div\n      className={`picker`}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-label={label}\n      onKeyDown={handleKeyDown}\n    >\n      <div className=\"picker-content\" ref={rGallery}>\n        {options.map((option, i) => (\n          <button\n            className={clsx(\"picker-option\", {\n              active: value === option.value,\n            })}\n            onClick={(event) => {\n              (event.currentTarget as HTMLButtonElement).focus();\n              onChange(option.value);\n            }}\n            title={`${option.text} ${\n              option.keyBinding && `\u2014 ${option.keyBinding.toUpperCase()}`\n            }`}\n            aria-label={option.text || \"none\"}\n            aria-keyshortcuts={option.keyBinding || undefined}\n            key={option.text}\n            ref={(el) => {\n              if (el && i === 0) {\n                rFirstItem.current = el;\n              }\n              if (el && option.value === value) {\n                rActiveItem.current = el;\n              }\n            }}\n            onFocus={() => {\n              onChange(option.value);\n            }}\n          >\n            {option.icon}\n            {option.keyBinding && (\n              <span className=\"picker-keybinding\">{option.keyBinding}</span>\n            )}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport function IconPicker<T>({\n  value,\n  label,\n  options,\n  onChange,\n  group = \"\",\n}: {\n  label: string;\n  value: T;\n  options: readonly {\n    value: T;\n    text: string;\n    icon: JSX.Element;\n    keyBinding: string | null;\n    showInPicker?: boolean;\n  }[];\n  onChange: (value: T) => void;\n  group?: string;\n}) {\n  const [isActive, setActive] = React.useState(false);\n  const rPickerButton = React.useRef<any>(null);\n  const isRTL = getLanguage().rtl;\n\n  return (\n    <div>\n      <button\n        name={group}\n        className={isActive ? \"active\" : \"\"}\n        aria-label={label}\n        onClick={() => setActive(!isActive)}\n        ref={rPickerButton}\n      >\n        {options.find((option) => option.value === value)?.icon}\n      </button>\n      <React.Suspense fallback=\"\">\n        {isActive ? (\n          <>\n            <Popover\n              onCloseRequest={(event) =>\n                event.target !== rPickerButton.current && setActive(false)\n              }\n              {...(isRTL ? { right: 5.5 } : { left: -5.5 })}\n            >\n              <Picker\n                options={options.filter((opt) => opt.showInPicker !== false)}\n                value={value}\n                label={label}\n                onChange={onChange}\n                onClose={() => {\n                  setActive(false);\n                  rPickerButton.current?.focus();\n                }}\n              />\n            </Popover>\n            <div className=\"picker-triangle\" />\n          </>\n        ) : null}\n      </React.Suspense>\n    </div>\n  );\n}\n", "import { AppClassProperties, AppState, Primitive } from \"../types\";\nimport {\n  DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE,\n  DEFAULT_ELEMENT_BACKGROUND_PICKS,\n  DEFAULT_ELEMENT_STROKE_COLOR_PALETTE,\n  DEFAULT_ELEMENT_STROKE_PICKS,\n} from \"../colors\";\nimport { trackEvent } from \"../analytics\";\nimport { ButtonIconSelect } from \"../components/ButtonIconSelect\";\nimport { ColorPicker } from \"../components/ColorPicker/ColorPicker\";\nimport { IconPicker } from \"../components/IconPicker\";\n// TODO barnabasmolnar/editor-redesign\n// TextAlignTopIcon, TextAlignBottomIcon,TextAlignMiddleIcon,\n// ArrowHead icons\nimport {\n  ArrowheadArrowIcon,\n  ArrowheadBarIcon,\n  ArrowheadCircleIcon,\n  ArrowheadTriangleIcon,\n  ArrowheadNoneIcon,\n  StrokeStyleDashedIcon,\n  StrokeStyleDottedIcon,\n  TextAlignTopIcon,\n  TextAlignBottomIcon,\n  TextAlignMiddleIcon,\n  FillHachureIcon,\n  FillCrossHatchIcon,\n  FillSolidIcon,\n  SloppinessArchitectIcon,\n  SloppinessArtistIcon,\n  SloppinessCartoonistIcon,\n  StrokeWidthBaseIcon,\n  StrokeWidthBoldIcon,\n  StrokeWidthExtraBoldIcon,\n  FontSizeSmallIcon,\n  FontSizeMediumIcon,\n  FontSizeLargeIcon,\n  FontSizeExtraLargeIcon,\n  EdgeSharpIcon,\n  EdgeRoundIcon,\n  FreedrawIcon,\n  FontFamilyNormalIcon,\n  FontFamilyCodeIcon,\n  TextAlignLeftIcon,\n  TextAlignCenterIcon,\n  TextAlignRightIcon,\n  FillZigZagIcon,\n  ArrowheadTriangleOutlineIcon,\n  ArrowheadCircleOutlineIcon,\n  ArrowheadDiamondIcon,\n  ArrowheadDiamondOutlineIcon,\n} from \"../components/icons\";\nimport {\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  FONT_FAMILY,\n  ROUNDNESS,\n  STROKE_WIDTH,\n  VERTICAL_ALIGN,\n} from \"../constants\";\nimport {\n  getNonDeletedElements,\n  isTextElement,\n  redrawTextBoundingBox,\n} from \"../element\";\nimport { mutateElement, newElementWith } from \"../element/mutateElement\";\nimport {\n  getBoundTextElement,\n  getDefaultLineHeight,\n} from \"../element/textElement\";\nimport {\n  isBoundToContainer,\n  isLinearElement,\n  isUsingAdaptiveRadius,\n} from \"../element/typeChecks\";\nimport {\n  Arrowhead,\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  ExcalidrawTextElement,\n  FontFamilyValues,\n  TextAlign,\n  VerticalAlign,\n} from \"../element/types\";\nimport { getLanguage, t } from \"../i18n\";\nimport { KEYS } from \"../keys\";\nimport { randomInteger } from \"../random\";\nimport {\n  canHaveArrowheads,\n  getCommonAttributeOfSelectedElements,\n  getSelectedElements,\n  getTargetElements,\n  isSomeElementSelected,\n} from \"../scene\";\nimport { hasStrokeColor } from \"../scene/comparisons\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\n\nconst FONT_SIZE_RELATIVE_INCREASE_STEP = 0.1;\n\nexport const changeProperty = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  callback: (element: ExcalidrawElement) => ExcalidrawElement,\n  includeBoundText = false,\n) => {\n  const selectedElementIds = arrayToMap(\n    getSelectedElements(elements, appState, {\n      includeBoundTextElement: includeBoundText,\n    }),\n  );\n\n  return elements.map((element) => {\n    if (\n      selectedElementIds.get(element.id) ||\n      element.id === appState.editingElement?.id\n    ) {\n      return callback(element);\n    }\n    return element;\n  });\n};\n\nexport const getFormValue = function <T extends Primitive>(\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  getAttribute: (element: ExcalidrawElement) => T,\n  isRelevantElement: true | ((element: ExcalidrawElement) => boolean),\n  defaultValue: T | ((isSomeElementSelected: boolean) => T),\n): T {\n  const editingElement = appState.editingElement;\n  const nonDeletedElements = getNonDeletedElements(elements);\n\n  let ret: T | null = null;\n\n  if (editingElement) {\n    ret = getAttribute(editingElement);\n  }\n\n  if (!ret) {\n    const hasSelection = isSomeElementSelected(nonDeletedElements, appState);\n\n    if (hasSelection) {\n      ret =\n        getCommonAttributeOfSelectedElements(\n          isRelevantElement === true\n            ? nonDeletedElements\n            : nonDeletedElements.filter((el) => isRelevantElement(el)),\n          appState,\n          getAttribute,\n        ) ??\n        (typeof defaultValue === \"function\"\n          ? defaultValue(true)\n          : defaultValue);\n    } else {\n      ret =\n        typeof defaultValue === \"function\" ? defaultValue(false) : defaultValue;\n    }\n  }\n\n  return ret;\n};\n\nconst offsetElementAfterFontResize = (\n  prevElement: ExcalidrawTextElement,\n  nextElement: ExcalidrawTextElement,\n) => {\n  if (isBoundToContainer(nextElement)) {\n    return nextElement;\n  }\n  return mutateElement(\n    nextElement,\n    {\n      x:\n        prevElement.textAlign === \"left\"\n          ? prevElement.x\n          : prevElement.x +\n            (prevElement.width - nextElement.width) /\n              (prevElement.textAlign === \"center\" ? 2 : 1),\n      // centering vertically is non-standard, but for Excalidraw I think\n      // it makes sense\n      y: prevElement.y + (prevElement.height - nextElement.height) / 2,\n    },\n    false,\n  );\n};\n\nconst changeFontSize = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  app: AppClassProperties,\n  getNewFontSize: (element: ExcalidrawTextElement) => number,\n  fallbackValue?: ExcalidrawTextElement[\"fontSize\"],\n) => {\n  const newFontSizes = new Set<number>();\n\n  return {\n    elements: changeProperty(\n      elements,\n      appState,\n      (oldElement) => {\n        if (isTextElement(oldElement)) {\n          const newFontSize = getNewFontSize(oldElement);\n          newFontSizes.add(newFontSize);\n\n          let newElement: ExcalidrawTextElement = newElementWith(oldElement, {\n            fontSize: newFontSize,\n          });\n          redrawTextBoundingBox(\n            newElement,\n            app.scene.getContainerElement(oldElement),\n            app.scene.getNonDeletedElementsMap(),\n          );\n\n          newElement = offsetElementAfterFontResize(oldElement, newElement);\n\n          return newElement;\n        }\n\n        return oldElement;\n      },\n      true,\n    ),\n    appState: {\n      ...appState,\n      // update state only if we've set all select text elements to\n      // the same font size\n      currentItemFontSize:\n        newFontSizes.size === 1\n          ? [...newFontSizes][0]\n          : fallbackValue ?? appState.currentItemFontSize,\n    },\n    commitToHistory: true,\n  };\n};\n\n// -----------------------------------------------------------------------------\n\nexport const actionChangeStrokeColor = register({\n  name: \"changeStrokeColor\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      ...(value.currentItemStrokeColor && {\n        elements: changeProperty(\n          elements,\n          appState,\n          (el) => {\n            return hasStrokeColor(el.type)\n              ? newElementWith(el, {\n                  strokeColor: value.currentItemStrokeColor,\n                })\n              : el;\n          },\n          true,\n        ),\n      }),\n      appState: {\n        ...appState,\n        ...value,\n      },\n      commitToHistory: !!value.currentItemStrokeColor,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, appProps }) => (\n    <>\n      <h3 aria-hidden=\"true\">{t(\"labels.stroke\")}</h3>\n      <ColorPicker\n        topPicks={DEFAULT_ELEMENT_STROKE_PICKS}\n        palette={DEFAULT_ELEMENT_STROKE_COLOR_PALETTE}\n        type=\"elementStroke\"\n        label={t(\"labels.stroke\")}\n        color={getFormValue(\n          elements,\n          appState,\n          (element) => element.strokeColor,\n          true,\n          appState.currentItemStrokeColor,\n        )}\n        onChange={(color) => updateData({ currentItemStrokeColor: color })}\n        elements={elements}\n        appState={appState}\n        updateData={updateData}\n      />\n    </>\n  ),\n});\n\nexport const actionChangeBackgroundColor = register({\n  name: \"changeBackgroundColor\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      ...(value.currentItemBackgroundColor && {\n        elements: changeProperty(elements, appState, (el) =>\n          newElementWith(el, {\n            backgroundColor: value.currentItemBackgroundColor,\n          }),\n        ),\n      }),\n      appState: {\n        ...appState,\n        ...value,\n      },\n      commitToHistory: !!value.currentItemBackgroundColor,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, appProps }) => (\n    <>\n      <h3 aria-hidden=\"true\">{t(\"labels.background\")}</h3>\n      <ColorPicker\n        topPicks={DEFAULT_ELEMENT_BACKGROUND_PICKS}\n        palette={DEFAULT_ELEMENT_BACKGROUND_COLOR_PALETTE}\n        type=\"elementBackground\"\n        label={t(\"labels.background\")}\n        color={getFormValue(\n          elements,\n          appState,\n          (element) => element.backgroundColor,\n          true,\n          appState.currentItemBackgroundColor,\n        )}\n        onChange={(color) => updateData({ currentItemBackgroundColor: color })}\n        elements={elements}\n        appState={appState}\n        updateData={updateData}\n      />\n    </>\n  ),\n});\n\nexport const actionChangeFillStyle = register({\n  name: \"changeFillStyle\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    trackEvent(\n      \"element\",\n      \"changeFillStyle\",\n      `${value} (${app.device.editor.isMobile ? \"mobile\" : \"desktop\"})`,\n    );\n    return {\n      elements: changeProperty(elements, appState, (el) =>\n        newElementWith(el, {\n          fillStyle: value,\n        }),\n      ),\n      appState: { ...appState, currentItemFillStyle: value },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => {\n    const selectedElements = getSelectedElements(elements, appState);\n    const allElementsZigZag =\n      selectedElements.length > 0 &&\n      selectedElements.every((el) => el.fillStyle === \"zigzag\");\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.fill\")}</legend>\n        <ButtonIconSelect\n          type=\"button\"\n          options={[\n            {\n              value: \"hachure\",\n              text: `${\n                allElementsZigZag ? t(\"labels.zigzag\") : t(\"labels.hachure\")\n              } (${getShortcutKey(\"Alt-Click\")})`,\n              icon: allElementsZigZag ? FillZigZagIcon : FillHachureIcon,\n              active: allElementsZigZag ? true : undefined,\n              testId: `fill-hachure`,\n            },\n            {\n              value: \"cross-hatch\",\n              text: t(\"labels.crossHatch\"),\n              icon: FillCrossHatchIcon,\n              testId: `fill-cross-hatch`,\n            },\n            {\n              value: \"solid\",\n              text: t(\"labels.solid\"),\n              icon: FillSolidIcon,\n              testId: `fill-solid`,\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            appState,\n            (element) => element.fillStyle,\n            (element) => element.hasOwnProperty(\"fillStyle\"),\n            (hasSelection) =>\n              hasSelection ? null : appState.currentItemFillStyle,\n          )}\n          onClick={(value, event) => {\n            const nextValue =\n              event.altKey &&\n              value === \"hachure\" &&\n              selectedElements.every((el) => el.fillStyle === \"hachure\")\n                ? \"zigzag\"\n                : value;\n\n            updateData(nextValue);\n          }}\n        />\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeStrokeWidth = register({\n  name: \"changeStrokeWidth\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, (el) =>\n        newElementWith(el, {\n          strokeWidth: value,\n        }),\n      ),\n      appState: { ...appState, currentItemStrokeWidth: value },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <fieldset>\n      <legend>{t(\"labels.strokeWidth\")}</legend>\n      <ButtonIconSelect\n        group=\"stroke-width\"\n        options={[\n          {\n            value: STROKE_WIDTH.thin,\n            text: t(\"labels.thin\"),\n            icon: StrokeWidthBaseIcon,\n            testId: \"strokeWidth-thin\",\n          },\n          {\n            value: STROKE_WIDTH.bold,\n            text: t(\"labels.bold\"),\n            icon: StrokeWidthBoldIcon,\n            testId: \"strokeWidth-bold\",\n          },\n          {\n            value: STROKE_WIDTH.extraBold,\n            text: t(\"labels.extraBold\"),\n            icon: StrokeWidthExtraBoldIcon,\n            testId: \"strokeWidth-extraBold\",\n          },\n        ]}\n        value={getFormValue(\n          elements,\n          appState,\n          (element) => element.strokeWidth,\n          (element) => element.hasOwnProperty(\"strokeWidth\"),\n          (hasSelection) =>\n            hasSelection ? null : appState.currentItemStrokeWidth,\n        )}\n        onChange={(value) => updateData(value)}\n      />\n    </fieldset>\n  ),\n});\n\nexport const actionChangeSloppiness = register({\n  name: \"changeSloppiness\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, (el) =>\n        newElementWith(el, {\n          seed: randomInteger(),\n          roughness: value,\n        }),\n      ),\n      appState: { ...appState, currentItemRoughness: value },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <fieldset>\n      <legend>{t(\"labels.sloppiness\")}</legend>\n      <ButtonIconSelect\n        group=\"sloppiness\"\n        options={[\n          {\n            value: 0,\n            text: t(\"labels.architect\"),\n            icon: SloppinessArchitectIcon,\n          },\n          {\n            value: 1,\n            text: t(\"labels.artist\"),\n            icon: SloppinessArtistIcon,\n          },\n          {\n            value: 2,\n            text: t(\"labels.cartoonist\"),\n            icon: SloppinessCartoonistIcon,\n          },\n        ]}\n        value={getFormValue(\n          elements,\n          appState,\n          (element) => element.roughness,\n          (element) => element.hasOwnProperty(\"roughness\"),\n          (hasSelection) =>\n            hasSelection ? null : appState.currentItemRoughness,\n        )}\n        onChange={(value) => updateData(value)}\n      />\n    </fieldset>\n  ),\n});\n\nexport const actionChangeStrokeStyle = register({\n  name: \"changeStrokeStyle\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, (el) =>\n        newElementWith(el, {\n          strokeStyle: value,\n        }),\n      ),\n      appState: { ...appState, currentItemStrokeStyle: value },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <fieldset>\n      <legend>{t(\"labels.strokeStyle\")}</legend>\n      <ButtonIconSelect\n        group=\"strokeStyle\"\n        options={[\n          {\n            value: \"solid\",\n            text: t(\"labels.strokeStyle_solid\"),\n            icon: StrokeWidthBaseIcon,\n          },\n          {\n            value: \"dashed\",\n            text: t(\"labels.strokeStyle_dashed\"),\n            icon: StrokeStyleDashedIcon,\n          },\n          {\n            value: \"dotted\",\n            text: t(\"labels.strokeStyle_dotted\"),\n            icon: StrokeStyleDottedIcon,\n          },\n        ]}\n        value={getFormValue(\n          elements,\n          appState,\n          (element) => element.strokeStyle,\n          (element) => element.hasOwnProperty(\"strokeStyle\"),\n          (hasSelection) =>\n            hasSelection ? null : appState.currentItemStrokeStyle,\n        )}\n        onChange={(value) => updateData(value)}\n      />\n    </fieldset>\n  ),\n});\n\nexport const actionChangeOpacity = register({\n  name: \"changeOpacity\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        (el) =>\n          newElementWith(el, {\n            opacity: value,\n          }),\n        true,\n      ),\n      appState: { ...appState, currentItemOpacity: value },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <label className=\"control-label\">\n      {t(\"labels.opacity\")}\n      <input\n        type=\"range\"\n        min=\"0\"\n        max=\"100\"\n        step=\"10\"\n        onChange={(event) => updateData(+event.target.value)}\n        value={\n          getFormValue(\n            elements,\n            appState,\n            (element) => element.opacity,\n            true,\n            appState.currentItemOpacity,\n          ) ?? undefined\n        }\n      />\n    </label>\n  ),\n});\n\nexport const actionChangeFontSize = register({\n  name: \"changeFontSize\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(elements, appState, app, () => value, value);\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <fieldset>\n      <legend>{t(\"labels.fontSize\")}</legend>\n      <ButtonIconSelect\n        group=\"font-size\"\n        options={[\n          {\n            value: 16,\n            text: t(\"labels.small\"),\n            icon: FontSizeSmallIcon,\n            testId: \"fontSize-small\",\n          },\n          {\n            value: 20,\n            text: t(\"labels.medium\"),\n            icon: FontSizeMediumIcon,\n            testId: \"fontSize-medium\",\n          },\n          {\n            value: 28,\n            text: t(\"labels.large\"),\n            icon: FontSizeLargeIcon,\n            testId: \"fontSize-large\",\n          },\n          {\n            value: 36,\n            text: t(\"labels.veryLarge\"),\n            icon: FontSizeExtraLargeIcon,\n            testId: \"fontSize-veryLarge\",\n          },\n        ]}\n        value={getFormValue(\n          elements,\n          appState,\n          (element) => {\n            if (isTextElement(element)) {\n              return element.fontSize;\n            }\n            const boundTextElement = getBoundTextElement(\n              element,\n              app.scene.getNonDeletedElementsMap(),\n            );\n            if (boundTextElement) {\n              return boundTextElement.fontSize;\n            }\n            return null;\n          },\n          (element) =>\n            isTextElement(element) ||\n            getBoundTextElement(\n              element,\n              app.scene.getNonDeletedElementsMap(),\n            ) !== null,\n          (hasSelection) =>\n            hasSelection\n              ? null\n              : appState.currentItemFontSize || DEFAULT_FONT_SIZE,\n        )}\n        onChange={(value) => updateData(value)}\n      />\n    </fieldset>\n  ),\n});\n\nexport const actionDecreaseFontSize = register({\n  name: \"decreaseFontSize\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(elements, appState, app, (element) =>\n      Math.round(\n        // get previous value before relative increase (doesn't work fully\n        // due to rounding and float precision issues)\n        (1 / (1 + FONT_SIZE_RELATIVE_INCREASE_STEP)) * element.fontSize,\n      ),\n    );\n  },\n  keyTest: (event) => {\n    return (\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      // KEYS.COMMA needed for MacOS\n      (event.key === KEYS.CHEVRON_LEFT || event.key === KEYS.COMMA)\n    );\n  },\n});\n\nexport const actionIncreaseFontSize = register({\n  name: \"increaseFontSize\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return changeFontSize(elements, appState, app, (element) =>\n      Math.round(element.fontSize * (1 + FONT_SIZE_RELATIVE_INCREASE_STEP)),\n    );\n  },\n  keyTest: (event) => {\n    return (\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      // KEYS.PERIOD needed for MacOS\n      (event.key === KEYS.CHEVRON_RIGHT || event.key === KEYS.PERIOD)\n    );\n  },\n});\n\nexport const actionChangeFontFamily = register({\n  name: \"changeFontFamily\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        (oldElement) => {\n          if (isTextElement(oldElement)) {\n            const newElement: ExcalidrawTextElement = newElementWith(\n              oldElement,\n              {\n                fontFamily: value,\n                lineHeight: getDefaultLineHeight(value),\n              },\n            );\n            redrawTextBoundingBox(\n              newElement,\n              app.scene.getContainerElement(oldElement),\n              app.scene.getNonDeletedElementsMap(),\n            );\n            return newElement;\n          }\n\n          return oldElement;\n        },\n        true,\n      ),\n      appState: {\n        ...appState,\n        currentItemFontFamily: value,\n      },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const options: {\n      value: FontFamilyValues;\n      text: string;\n      icon: JSX.Element;\n      testId: string;\n    }[] = [\n      {\n        value: FONT_FAMILY.Virgil,\n        text: t(\"labels.handDrawn\"),\n        icon: FreedrawIcon,\n        testId: \"font-family-virgil\",\n      },\n      {\n        value: FONT_FAMILY.Helvetica,\n        text: t(\"labels.normal\"),\n        icon: FontFamilyNormalIcon,\n        testId: \"font-family-normal\",\n      },\n      {\n        value: FONT_FAMILY.Cascadia,\n        text: t(\"labels.code\"),\n        icon: FontFamilyCodeIcon,\n        testId: \"font-family-code\",\n      },\n    ];\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.fontFamily\")}</legend>\n        <ButtonIconSelect<FontFamilyValues | false>\n          group=\"font-family\"\n          options={options}\n          value={getFormValue(\n            elements,\n            appState,\n            (element) => {\n              if (isTextElement(element)) {\n                return element.fontFamily;\n              }\n              const boundTextElement = getBoundTextElement(\n                element,\n                app.scene.getNonDeletedElementsMap(),\n              );\n              if (boundTextElement) {\n                return boundTextElement.fontFamily;\n              }\n              return null;\n            },\n            (element) =>\n              isTextElement(element) ||\n              getBoundTextElement(\n                element,\n                app.scene.getNonDeletedElementsMap(),\n              ) !== null,\n            (hasSelection) =>\n              hasSelection\n                ? null\n                : appState.currentItemFontFamily || DEFAULT_FONT_FAMILY,\n          )}\n          onChange={(value) => updateData(value)}\n        />\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeTextAlign = register({\n  name: \"changeTextAlign\",\n  trackEvent: false,\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        (oldElement) => {\n          if (isTextElement(oldElement)) {\n            const newElement: ExcalidrawTextElement = newElementWith(\n              oldElement,\n              { textAlign: value },\n            );\n            redrawTextBoundingBox(\n              newElement,\n              app.scene.getContainerElement(oldElement),\n              app.scene.getNonDeletedElementsMap(),\n            );\n            return newElement;\n          }\n\n          return oldElement;\n        },\n        true,\n      ),\n      appState: {\n        ...appState,\n        currentItemTextAlign: value,\n      },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    return (\n      <fieldset>\n        <legend>{t(\"labels.textAlign\")}</legend>\n        <ButtonIconSelect<TextAlign | false>\n          group=\"text-align\"\n          options={[\n            {\n              value: \"left\",\n              text: t(\"labels.left\"),\n              icon: TextAlignLeftIcon,\n              testId: \"align-left\",\n            },\n            {\n              value: \"center\",\n              text: t(\"labels.center\"),\n              icon: TextAlignCenterIcon,\n              testId: \"align-horizontal-center\",\n            },\n            {\n              value: \"right\",\n              text: t(\"labels.right\"),\n              icon: TextAlignRightIcon,\n              testId: \"align-right\",\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            appState,\n            (element) => {\n              if (isTextElement(element)) {\n                return element.textAlign;\n              }\n              const boundTextElement = getBoundTextElement(\n                element,\n                elementsMap,\n              );\n              if (boundTextElement) {\n                return boundTextElement.textAlign;\n              }\n              return null;\n            },\n            (element) =>\n              isTextElement(element) ||\n              getBoundTextElement(element, elementsMap) !== null,\n            (hasSelection) =>\n              hasSelection ? null : appState.currentItemTextAlign,\n          )}\n          onChange={(value) => updateData(value)}\n        />\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeVerticalAlign = register({\n  name: \"changeVerticalAlign\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, value, app) => {\n    return {\n      elements: changeProperty(\n        elements,\n        appState,\n        (oldElement) => {\n          if (isTextElement(oldElement)) {\n            const newElement: ExcalidrawTextElement = newElementWith(\n              oldElement,\n              { verticalAlign: value },\n            );\n\n            redrawTextBoundingBox(\n              newElement,\n              app.scene.getContainerElement(oldElement),\n              app.scene.getNonDeletedElementsMap(),\n            );\n            return newElement;\n          }\n\n          return oldElement;\n        },\n        true,\n      ),\n      appState: {\n        ...appState,\n      },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => {\n    return (\n      <fieldset>\n        <ButtonIconSelect<VerticalAlign | false>\n          group=\"text-align\"\n          options={[\n            {\n              value: VERTICAL_ALIGN.TOP,\n              text: t(\"labels.alignTop\"),\n              icon: <TextAlignTopIcon theme={appState.theme} />,\n              testId: \"align-top\",\n            },\n            {\n              value: VERTICAL_ALIGN.MIDDLE,\n              text: t(\"labels.centerVertically\"),\n              icon: <TextAlignMiddleIcon theme={appState.theme} />,\n              testId: \"align-middle\",\n            },\n            {\n              value: VERTICAL_ALIGN.BOTTOM,\n              text: t(\"labels.alignBottom\"),\n              icon: <TextAlignBottomIcon theme={appState.theme} />,\n              testId: \"align-bottom\",\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            appState,\n            (element) => {\n              if (isTextElement(element) && element.containerId) {\n                return element.verticalAlign;\n              }\n              const boundTextElement = getBoundTextElement(\n                element,\n                app.scene.getNonDeletedElementsMap(),\n              );\n              if (boundTextElement) {\n                return boundTextElement.verticalAlign;\n              }\n              return null;\n            },\n            (element) =>\n              isTextElement(element) ||\n              getBoundTextElement(\n                element,\n                app.scene.getNonDeletedElementsMap(),\n              ) !== null,\n            (hasSelection) => (hasSelection ? null : VERTICAL_ALIGN.MIDDLE),\n          )}\n          onChange={(value) => updateData(value)}\n        />\n      </fieldset>\n    );\n  },\n});\n\nexport const actionChangeRoundness = register({\n  name: \"changeRoundness\",\n  trackEvent: false,\n  perform: (elements, appState, value) => {\n    return {\n      elements: changeProperty(elements, appState, (el) =>\n        newElementWith(el, {\n          roundness:\n            value === \"round\"\n              ? {\n                  type: isUsingAdaptiveRadius(el.type)\n                    ? ROUNDNESS.ADAPTIVE_RADIUS\n                    : ROUNDNESS.PROPORTIONAL_RADIUS,\n                }\n              : null,\n        }),\n      ),\n      appState: {\n        ...appState,\n        currentItemRoundness: value,\n      },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => {\n    const targetElements = getTargetElements(\n      getNonDeletedElements(elements),\n      appState,\n    );\n\n    const hasLegacyRoundness = targetElements.some(\n      (el) => el.roundness?.type === ROUNDNESS.LEGACY,\n    );\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.edges\")}</legend>\n        <ButtonIconSelect\n          group=\"edges\"\n          options={[\n            {\n              value: \"sharp\",\n              text: t(\"labels.sharp\"),\n              icon: EdgeSharpIcon,\n            },\n            {\n              value: \"round\",\n              text: t(\"labels.round\"),\n              icon: EdgeRoundIcon,\n            },\n          ]}\n          value={getFormValue(\n            elements,\n            appState,\n            (element) =>\n              hasLegacyRoundness ? null : element.roundness ? \"round\" : \"sharp\",\n            (element) => element.hasOwnProperty(\"roundness\"),\n            (hasSelection) =>\n              hasSelection ? null : appState.currentItemRoundness,\n          )}\n          onChange={(value) => updateData(value)}\n        />\n      </fieldset>\n    );\n  },\n});\n\nconst getArrowheadOptions = (flip: boolean) => {\n  return [\n    {\n      value: null,\n      text: t(\"labels.arrowhead_none\"),\n      keyBinding: \"q\",\n      icon: ArrowheadNoneIcon,\n    },\n    {\n      value: \"arrow\",\n      text: t(\"labels.arrowhead_arrow\"),\n      keyBinding: \"w\",\n      icon: <ArrowheadArrowIcon flip={flip} />,\n    },\n    {\n      value: \"bar\",\n      text: t(\"labels.arrowhead_bar\"),\n      keyBinding: \"e\",\n      icon: <ArrowheadBarIcon flip={flip} />,\n    },\n    {\n      value: \"dot\",\n      text: t(\"labels.arrowhead_circle\"),\n      keyBinding: null,\n      icon: <ArrowheadCircleIcon flip={flip} />,\n      showInPicker: false,\n    },\n    {\n      value: \"circle\",\n      text: t(\"labels.arrowhead_circle\"),\n      keyBinding: \"r\",\n      icon: <ArrowheadCircleIcon flip={flip} />,\n      showInPicker: false,\n    },\n    {\n      value: \"circle_outline\",\n      text: t(\"labels.arrowhead_circle_outline\"),\n      keyBinding: null,\n      icon: <ArrowheadCircleOutlineIcon flip={flip} />,\n      showInPicker: false,\n    },\n    {\n      value: \"triangle\",\n      text: t(\"labels.arrowhead_triangle\"),\n      icon: <ArrowheadTriangleIcon flip={flip} />,\n      keyBinding: \"t\",\n    },\n    {\n      value: \"triangle_outline\",\n      text: t(\"labels.arrowhead_triangle_outline\"),\n      icon: <ArrowheadTriangleOutlineIcon flip={flip} />,\n      keyBinding: null,\n      showInPicker: false,\n    },\n    {\n      value: \"diamond\",\n      text: t(\"labels.arrowhead_diamond\"),\n      icon: <ArrowheadDiamondIcon flip={flip} />,\n      keyBinding: null,\n      showInPicker: false,\n    },\n    {\n      value: \"diamond_outline\",\n      text: t(\"labels.arrowhead_diamond_outline\"),\n      icon: <ArrowheadDiamondOutlineIcon flip={flip} />,\n      keyBinding: null,\n      showInPicker: false,\n    },\n  ] as const;\n};\n\nexport const actionChangeArrowhead = register({\n  name: \"changeArrowhead\",\n  trackEvent: false,\n  perform: (\n    elements,\n    appState,\n    value: { position: \"start\" | \"end\"; type: Arrowhead },\n  ) => {\n    return {\n      elements: changeProperty(elements, appState, (el) => {\n        if (isLinearElement(el)) {\n          const { position, type } = value;\n\n          if (position === \"start\") {\n            const element: ExcalidrawLinearElement = newElementWith(el, {\n              startArrowhead: type,\n            });\n            return element;\n          } else if (position === \"end\") {\n            const element: ExcalidrawLinearElement = newElementWith(el, {\n              endArrowhead: type,\n            });\n            return element;\n          }\n        }\n\n        return el;\n      }),\n      appState: {\n        ...appState,\n        [value.position === \"start\"\n          ? \"currentItemStartArrowhead\"\n          : \"currentItemEndArrowhead\"]: value.type,\n      },\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData }) => {\n    const isRTL = getLanguage().rtl;\n\n    return (\n      <fieldset>\n        <legend>{t(\"labels.arrowheads\")}</legend>\n        <div className=\"iconSelectList buttonList\">\n          <IconPicker\n            label=\"arrowhead_start\"\n            options={getArrowheadOptions(!isRTL)}\n            value={getFormValue<Arrowhead | null>(\n              elements,\n              appState,\n              (element) =>\n                isLinearElement(element) && canHaveArrowheads(element.type)\n                  ? element.startArrowhead\n                  : appState.currentItemStartArrowhead,\n              true,\n              appState.currentItemStartArrowhead,\n            )}\n            onChange={(value) => updateData({ position: \"start\", type: value })}\n          />\n          <IconPicker\n            label=\"arrowhead_end\"\n            group=\"arrowheads\"\n            options={getArrowheadOptions(!!isRTL)}\n            value={getFormValue<Arrowhead | null>(\n              elements,\n              appState,\n              (element) =>\n                isLinearElement(element) && canHaveArrowheads(element.type)\n                  ? element.endArrowhead\n                  : appState.currentItemEndArrowhead,\n              true,\n              appState.currentItemEndArrowhead,\n            )}\n            onChange={(value) => updateData({ position: \"end\", type: value })}\n          />\n        </div>\n      </fieldset>\n    );\n  },\n});\n", "import { ColorPicker } from \"../components/ColorPicker/ColorPicker\";\nimport { ZoomInIcon, ZoomOutIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { CURSOR_TYPE, MIN_ZOOM, THEME, ZOOM_STEP } from \"../constants\";\nimport { getCommonBounds, getNonDeletedElements } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { CODES, KEYS } from \"../keys\";\nimport { getNormalizedZoom } from \"../scene\";\nimport { centerScrollOn } from \"../scene/scroll\";\nimport { getStateForZoom } from \"../scene/zoom\";\nimport { AppState, NormalizedZoomValue } from \"../types\";\nimport { getShortcutKey, updateActiveTool } from \"../utils\";\nimport { register } from \"./register\";\nimport { Tooltip } from \"../components/Tooltip\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport {\n  getDefaultAppState,\n  isEraserActive,\n  isHandToolActive,\n} from \"../appState\";\nimport { DEFAULT_CANVAS_BACKGROUND_PICKS } from \"../colors\";\nimport { SceneBounds } from \"../element/bounds\";\nimport { setCursor } from \"../cursor\";\n\nexport const actionChangeViewBackgroundColor = register({\n  name: \"changeViewBackgroundColor\",\n  trackEvent: false,\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.changeViewBackgroundColor &&\n      !appState.viewModeEnabled\n    );\n  },\n  perform: (_, appState, value) => {\n    return {\n      appState: { ...appState, ...value },\n      commitToHistory: !!value.viewBackgroundColor,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, appProps }) => {\n    // FIXME move me to src/components/mainMenu/DefaultItems.tsx\n    return (\n      <ColorPicker\n        palette={null}\n        topPicks={DEFAULT_CANVAS_BACKGROUND_PICKS}\n        label={t(\"labels.canvasBackground\")}\n        type=\"canvasBackground\"\n        color={appState.viewBackgroundColor}\n        onChange={(color) => updateData({ viewBackgroundColor: color })}\n        data-testid=\"canvas-background-picker\"\n        elements={elements}\n        appState={appState}\n        updateData={updateData}\n      />\n    );\n  },\n});\n\nexport const actionClearCanvas = register({\n  name: \"clearCanvas\",\n  trackEvent: { category: \"canvas\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.clearCanvas &&\n      !appState.viewModeEnabled\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    app.imageCache.clear();\n    return {\n      elements: elements.map((element) =>\n        newElementWith(element, { isDeleted: true }),\n      ),\n      appState: {\n        ...getDefaultAppState(),\n        files: {},\n        theme: appState.theme,\n        penMode: appState.penMode,\n        penDetected: appState.penDetected,\n        exportBackground: appState.exportBackground,\n        exportEmbedScene: appState.exportEmbedScene,\n        gridSize: appState.gridSize,\n        showStats: appState.showStats,\n        pasteDialog: appState.pasteDialog,\n        activeTool:\n          appState.activeTool.type === \"image\"\n            ? { ...appState.activeTool, type: \"selection\" }\n            : appState.activeTool,\n      },\n      commitToHistory: true,\n    };\n  },\n});\n\nexport const actionZoomIn = register({\n  name: \"zoomIn\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(appState.zoom.value + ZOOM_STEP),\n          },\n          appState,\n        ),\n        userToFollow: null,\n      },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ updateData }) => (\n    <ToolButton\n      type=\"button\"\n      className=\"zoom-in-button zoom-button\"\n      icon={ZoomInIcon}\n      title={`${t(\"buttons.zoomIn\")} \u2014 ${getShortcutKey(\"CtrlOrCmd++\")}`}\n      aria-label={t(\"buttons.zoomIn\")}\n      onClick={() => {\n        updateData(null);\n      }}\n    />\n  ),\n  keyTest: (event) =>\n    (event.code === CODES.EQUAL || event.code === CODES.NUM_ADD) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nexport const actionZoomOut = register({\n  name: \"zoomOut\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(appState.zoom.value - ZOOM_STEP),\n          },\n          appState,\n        ),\n        userToFollow: null,\n      },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ updateData }) => (\n    <ToolButton\n      type=\"button\"\n      className=\"zoom-out-button zoom-button\"\n      icon={ZoomOutIcon}\n      title={`${t(\"buttons.zoomOut\")} \u2014 ${getShortcutKey(\"CtrlOrCmd+-\")}`}\n      aria-label={t(\"buttons.zoomOut\")}\n      onClick={() => {\n        updateData(null);\n      }}\n    />\n  ),\n  keyTest: (event) =>\n    (event.code === CODES.MINUS || event.code === CODES.NUM_SUBTRACT) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nexport const actionResetZoom = register({\n  name: \"resetZoom\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_elements, appState, _, app) => {\n    return {\n      appState: {\n        ...appState,\n        ...getStateForZoom(\n          {\n            viewportX: appState.width / 2 + appState.offsetLeft,\n            viewportY: appState.height / 2 + appState.offsetTop,\n            nextZoom: getNormalizedZoom(1),\n          },\n          appState,\n        ),\n        userToFollow: null,\n      },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ updateData, appState }) => (\n    <Tooltip label={t(\"buttons.resetZoom\")} style={{ height: \"100%\" }}>\n      <ToolButton\n        type=\"button\"\n        className=\"reset-zoom-button zoom-button\"\n        title={t(\"buttons.resetZoom\")}\n        aria-label={t(\"buttons.resetZoom\")}\n        onClick={() => {\n          updateData(null);\n        }}\n      >\n        {(appState.zoom.value * 100).toFixed(0)}%\n      </ToolButton>\n    </Tooltip>\n  ),\n  keyTest: (event) =>\n    (event.code === CODES.ZERO || event.code === CODES.NUM_ZERO) &&\n    (event[KEYS.CTRL_OR_CMD] || event.shiftKey),\n});\n\nconst zoomValueToFitBoundsOnViewport = (\n  bounds: SceneBounds,\n  viewportDimensions: { width: number; height: number },\n) => {\n  const [x1, y1, x2, y2] = bounds;\n  const commonBoundsWidth = x2 - x1;\n  const zoomValueForWidth = viewportDimensions.width / commonBoundsWidth;\n  const commonBoundsHeight = y2 - y1;\n  const zoomValueForHeight = viewportDimensions.height / commonBoundsHeight;\n  const smallestZoomValue = Math.min(zoomValueForWidth, zoomValueForHeight);\n  const zoomAdjustedToSteps =\n    Math.floor(smallestZoomValue / ZOOM_STEP) * ZOOM_STEP;\n  const clampedZoomValueToFitElements = Math.min(\n    Math.max(zoomAdjustedToSteps, MIN_ZOOM),\n    1,\n  );\n  return clampedZoomValueToFitElements as NormalizedZoomValue;\n};\n\nexport const zoomToFitBounds = ({\n  bounds,\n  appState,\n  fitToViewport = false,\n  viewportZoomFactor = 0.7,\n}: {\n  bounds: SceneBounds;\n  appState: Readonly<AppState>;\n  /** whether to fit content to viewport (beyond >100%) */\n  fitToViewport: boolean;\n  /** zoom content to cover X of the viewport, when fitToViewport=true */\n  viewportZoomFactor?: number;\n}) => {\n  const [x1, y1, x2, y2] = bounds;\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n\n  let newZoomValue;\n  let scrollX;\n  let scrollY;\n\n  if (fitToViewport) {\n    const commonBoundsWidth = x2 - x1;\n    const commonBoundsHeight = y2 - y1;\n\n    newZoomValue =\n      Math.min(\n        appState.width / commonBoundsWidth,\n        appState.height / commonBoundsHeight,\n      ) * Math.min(1, Math.max(viewportZoomFactor, 0.1));\n\n    // Apply clamping to newZoomValue to be between 10% and 3000%\n    newZoomValue = Math.min(\n      Math.max(newZoomValue, 0.1),\n      30.0,\n    ) as NormalizedZoomValue;\n\n    let appStateWidth = appState.width;\n\n    if (appState.openSidebar) {\n      const sidebarDOMElem = document.querySelector(\n        \".sidebar\",\n      ) as HTMLElement | null;\n      const sidebarWidth = sidebarDOMElem?.offsetWidth ?? 0;\n      const isRTL = document.documentElement.getAttribute(\"dir\") === \"rtl\";\n\n      appStateWidth = !isRTL\n        ? appState.width - sidebarWidth\n        : appState.width + sidebarWidth;\n    }\n\n    scrollX = (appStateWidth / 2) * (1 / newZoomValue) - centerX;\n    scrollY = (appState.height / 2) * (1 / newZoomValue) - centerY;\n  } else {\n    newZoomValue = zoomValueToFitBoundsOnViewport(bounds, {\n      width: appState.width,\n      height: appState.height,\n    });\n\n    const centerScroll = centerScrollOn({\n      scenePoint: { x: centerX, y: centerY },\n      viewportDimensions: {\n        width: appState.width,\n        height: appState.height,\n      },\n      zoom: { value: newZoomValue },\n    });\n\n    scrollX = centerScroll.scrollX;\n    scrollY = centerScroll.scrollY;\n  }\n\n  return {\n    appState: {\n      ...appState,\n      scrollX,\n      scrollY,\n      zoom: { value: newZoomValue },\n    },\n    commitToHistory: false,\n  };\n};\n\nexport const zoomToFit = ({\n  targetElements,\n  appState,\n  fitToViewport,\n  viewportZoomFactor,\n}: {\n  targetElements: readonly ExcalidrawElement[];\n  appState: Readonly<AppState>;\n  /** whether to fit content to viewport (beyond >100%) */\n  fitToViewport: boolean;\n  /** zoom content to cover X of the viewport, when fitToViewport=true */\n  viewportZoomFactor?: number;\n}) => {\n  const commonBounds = getCommonBounds(getNonDeletedElements(targetElements));\n\n  return zoomToFitBounds({\n    bounds: commonBounds,\n    appState,\n    fitToViewport,\n    viewportZoomFactor,\n  });\n};\n\n// Note, this action differs from actionZoomToFitSelection in that it doesn't\n// zoom beyond 100%. In other words, if the content is smaller than viewport\n// size, it won't be zoomed in.\nexport const actionZoomToFitSelectionInViewport = register({\n  name: \"zoomToFitSelectionInViewport\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return zoomToFit({\n      targetElements: selectedElements.length ? selectedElements : elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: false,\n    });\n  },\n  // NOTE shift-2 should have been assigned actionZoomToFitSelection.\n  // TBD on how proceed\n  keyTest: (event) =>\n    event.code === CODES.TWO &&\n    event.shiftKey &&\n    !event.altKey &&\n    !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionZoomToFitSelection = register({\n  name: \"zoomToFitSelection\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return zoomToFit({\n      targetElements: selectedElements.length ? selectedElements : elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: true,\n    });\n  },\n  // NOTE this action should use shift-2 per figma, alas\n  keyTest: (event) =>\n    event.code === CODES.THREE &&\n    event.shiftKey &&\n    !event.altKey &&\n    !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionZoomToFit = register({\n  name: \"zoomToFit\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState) =>\n    zoomToFit({\n      targetElements: elements,\n      appState: {\n        ...appState,\n        userToFollow: null,\n      },\n      fitToViewport: false,\n    }),\n  keyTest: (event) =>\n    event.code === CODES.ONE &&\n    event.shiftKey &&\n    !event.altKey &&\n    !event[KEYS.CTRL_OR_CMD],\n});\n\nexport const actionToggleTheme = register({\n  name: \"toggleTheme\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (_, appState, value) => {\n    return {\n      appState: {\n        ...appState,\n        theme:\n          value || (appState.theme === THEME.LIGHT ? THEME.DARK : THEME.LIGHT),\n      },\n      commitToHistory: false,\n    };\n  },\n  keyTest: (event) => event.altKey && event.shiftKey && event.code === CODES.D,\n  predicate: (elements, appState, props, app) => {\n    return !!app.props.UIOptions.canvasActions.toggleTheme;\n  },\n});\n\nexport const actionToggleEraserTool = register({\n  name: \"toggleEraserTool\",\n  trackEvent: { category: \"toolbar\" },\n  perform: (elements, appState) => {\n    let activeTool: AppState[\"activeTool\"];\n\n    if (isEraserActive(appState)) {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: \"selection\",\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"eraser\",\n        lastActiveToolBeforeEraser: appState.activeTool,\n      });\n    }\n\n    return {\n      appState: {\n        ...appState,\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        activeEmbeddable: null,\n        activeTool,\n      },\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) => event.key === KEYS.E,\n});\n\nexport const actionToggleHandTool = register({\n  name: \"toggleHandTool\",\n  trackEvent: { category: \"toolbar\" },\n  perform: (elements, appState, _, app) => {\n    let activeTool: AppState[\"activeTool\"];\n\n    if (isHandToolActive(appState)) {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: \"selection\",\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"hand\",\n        lastActiveToolBeforeEraser: appState.activeTool,\n      });\n      setCursor(app.interactiveCanvas, CURSOR_TYPE.GRAB);\n    }\n\n    return {\n      appState: {\n        ...appState,\n        selectedElementIds: {},\n        selectedGroupIds: {},\n        activeEmbeddable: null,\n        activeTool,\n      },\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    !event.altKey && !event[KEYS.CTRL_OR_CMD] && event.key === KEYS.H,\n});\n", "import { KEYS } from \"../keys\";\nimport { isInvisiblySmallElement } from \"../element\";\nimport { arrayToMap, updateActiveTool } from \"../utils\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { done } from \"../components/icons\";\nimport { t } from \"../i18n\";\nimport { register } from \"./register\";\nimport { mutateElement } from \"../element/mutateElement\";\nimport { isPathALoop } from \"../math\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport Scene from \"../scene/Scene\";\nimport {\n  maybeBindLinearElement,\n  bindOrUnbindLinearElement,\n} from \"../element/binding\";\nimport { isBindingElement, isLinearElement } from \"../element/typeChecks\";\nimport { AppState } from \"../types\";\nimport { resetCursor } from \"../cursor\";\n\nexport const actionFinalize = register({\n  name: \"finalize\",\n  trackEvent: false,\n  perform: (\n    elements,\n    appState,\n    _,\n    { interactiveCanvas, focusContainer, scene },\n  ) => {\n    const elementsMap = scene.getNonDeletedElementsMap();\n\n    if (appState.editingLinearElement) {\n      const { elementId, startBindingElement, endBindingElement } =\n        appState.editingLinearElement;\n      const element = LinearElementEditor.getElement(elementId, elementsMap);\n\n      if (element) {\n        if (isBindingElement(element)) {\n          bindOrUnbindLinearElement(\n            element,\n            startBindingElement,\n            endBindingElement,\n            elementsMap,\n          );\n        }\n        return {\n          elements:\n            element.points.length < 2 || isInvisiblySmallElement(element)\n              ? elements.filter((el) => el.id !== element.id)\n              : undefined,\n          appState: {\n            ...appState,\n            cursorButton: \"up\",\n            editingLinearElement: null,\n          },\n          commitToHistory: true,\n        };\n      }\n    }\n\n    let newElements = elements;\n\n    const pendingImageElement =\n      appState.pendingImageElementId &&\n      scene.getElement(appState.pendingImageElementId);\n\n    if (pendingImageElement) {\n      mutateElement(pendingImageElement, { isDeleted: true }, false);\n    }\n\n    if (window.document.activeElement instanceof HTMLElement) {\n      focusContainer();\n    }\n\n    const multiPointElement = appState.multiElement\n      ? appState.multiElement\n      : appState.editingElement?.type === \"freedraw\"\n      ? appState.editingElement\n      : null;\n\n    if (multiPointElement) {\n      // pen and mouse have hover\n      if (\n        multiPointElement.type !== \"freedraw\" &&\n        appState.lastPointerDownWith !== \"touch\"\n      ) {\n        const { points, lastCommittedPoint } = multiPointElement;\n        if (\n          !lastCommittedPoint ||\n          points[points.length - 1] !== lastCommittedPoint\n        ) {\n          mutateElement(multiPointElement, {\n            points: multiPointElement.points.slice(0, -1),\n          });\n        }\n      }\n      if (isInvisiblySmallElement(multiPointElement)) {\n        newElements = newElements.filter(\n          (el) => el.id !== multiPointElement.id,\n        );\n      }\n\n      // If the multi point line closes the loop,\n      // set the last point to first point.\n      // This ensures that loop remains closed at different scales.\n      const isLoop = isPathALoop(multiPointElement.points, appState.zoom.value);\n      if (\n        multiPointElement.type === \"line\" ||\n        multiPointElement.type === \"freedraw\"\n      ) {\n        if (isLoop) {\n          const linePoints = multiPointElement.points;\n          const firstPoint = linePoints[0];\n          mutateElement(multiPointElement, {\n            points: linePoints.map((point, index) =>\n              index === linePoints.length - 1\n                ? ([firstPoint[0], firstPoint[1]] as const)\n                : point,\n            ),\n          });\n        }\n      }\n\n      if (\n        isBindingElement(multiPointElement) &&\n        !isLoop &&\n        multiPointElement.points.length > 1\n      ) {\n        const [x, y] = LinearElementEditor.getPointAtIndexGlobalCoordinates(\n          multiPointElement,\n          -1,\n          arrayToMap(elements),\n        );\n        maybeBindLinearElement(\n          multiPointElement,\n          appState,\n          Scene.getScene(multiPointElement)!,\n          { x, y },\n          elementsMap,\n        );\n      }\n    }\n\n    if (\n      (!appState.activeTool.locked &&\n        appState.activeTool.type !== \"freedraw\") ||\n      !multiPointElement\n    ) {\n      resetCursor(interactiveCanvas);\n    }\n\n    let activeTool: AppState[\"activeTool\"];\n    if (appState.activeTool.type === \"eraser\") {\n      activeTool = updateActiveTool(appState, {\n        ...(appState.activeTool.lastActiveTool || {\n          type: \"selection\",\n        }),\n        lastActiveToolBeforeEraser: null,\n      });\n    } else {\n      activeTool = updateActiveTool(appState, {\n        type: \"selection\",\n      });\n    }\n\n    return {\n      elements: newElements,\n      appState: {\n        ...appState,\n        cursorButton: \"up\",\n        activeTool:\n          (appState.activeTool.locked ||\n            appState.activeTool.type === \"freedraw\") &&\n          multiPointElement\n            ? appState.activeTool\n            : activeTool,\n        activeEmbeddable: null,\n        draggingElement: null,\n        multiElement: null,\n        editingElement: null,\n        startBoundElement: null,\n        suggestedBindings: [],\n        selectedElementIds:\n          multiPointElement &&\n          !appState.activeTool.locked &&\n          appState.activeTool.type !== \"freedraw\"\n            ? {\n                ...appState.selectedElementIds,\n                [multiPointElement.id]: true,\n              }\n            : appState.selectedElementIds,\n        // To select the linear element when user has finished mutipoint editing\n        selectedLinearElement:\n          multiPointElement && isLinearElement(multiPointElement)\n            ? new LinearElementEditor(multiPointElement)\n            : appState.selectedLinearElement,\n        pendingImageElementId: null,\n      },\n      commitToHistory: appState.activeTool.type === \"freedraw\",\n    };\n  },\n  keyTest: (event, appState) =>\n    (event.key === KEYS.ESCAPE &&\n      (appState.editingLinearElement !== null ||\n        (!appState.draggingElement && appState.multiElement === null))) ||\n    ((event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) &&\n      appState.multiElement !== null),\n  PanelComponent: ({ appState, updateData, data }) => (\n    <ToolButton\n      type=\"button\"\n      icon={done}\n      title={t(\"buttons.done\")}\n      aria-label={t(\"buttons.done\")}\n      onClick={updateData}\n      visible={appState.multiElement != null}\n      size={data?.size || \"medium\"}\n    />\n  ),\n});\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .TextInput {\n  display: inline-block;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUZXh0SW5wdXQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5UZXh0SW5wdXQge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxufVxuIl19 */", ".ProjectName {\n  margin: auto;\n  display: flex;\n  align-items: center;\n}\n.ProjectName .TextInput {\n  height: calc(1rem - 3px);\n  width: 200px;\n  overflow: hidden;\n  text-align: center;\n  margin-left: 8px;\n  text-overflow: ellipsis;\n}\n.ProjectName .TextInput--readonly {\n  background: none;\n  border: none;\n  width: auto;\n  max-width: 200px;\n  padding-left: 2px;\n}\n.ProjectName .TextInput--readonly:hover {\n  background: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIlByb2plY3ROYW1lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBSUE7RUFDQTtFQUNBOztBQUxBO0VBQ0UiLCJzb3VyY2VzQ29udGVudCI6WyIuUHJvamVjdE5hbWUge1xuICBtYXJnaW46IGF1dG87XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgLlRleHRJbnB1dCB7XG4gICAgaGVpZ2h0OiBjYWxjKDFyZW0gLSAzcHgpO1xuICAgIHdpZHRoOiAyMDBweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuXG4gICAgJi0tcmVhZG9ubHkge1xuICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgfVxuICAgICAgd2lkdGg6IGF1dG87XG4gICAgICBtYXgtd2lkdGg6IDIwMHB4O1xuICAgICAgcGFkZGluZy1sZWZ0OiAycHg7XG4gICAgfVxuICB9XG59XG4iXX0= */", "import \"./TextInput.scss\";\n\nimport React, { useState } from \"react\";\nimport { focusNearestParent } from \"../utils\";\n\nimport \"./ProjectName.scss\";\nimport { useExcalidrawContainer } from \"./App\";\nimport { KEYS } from \"../keys\";\n\ntype Props = {\n  value: string;\n  onChange: (value: string) => void;\n  label: string;\n  ignoreFocus?: boolean;\n};\n\nexport const ProjectName = (props: Props) => {\n  const { id } = useExcalidrawContainer();\n  const [fileName, setFileName] = useState<string>(props.value);\n\n  const handleBlur = (event: any) => {\n    if (!props.ignoreFocus) {\n      focusNearestParent(event.target);\n    }\n    const value = event.target.value;\n    if (value !== props.value) {\n      props.onChange(value);\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\n    if (event.key === KEYS.ENTER) {\n      event.preventDefault();\n      if (event.nativeEvent.isComposing || event.keyCode === 229) {\n        return;\n      }\n      event.currentTarget.blur();\n    }\n  };\n\n  return (\n    <div className=\"ProjectName\">\n      <label className=\"ProjectName-label\" htmlFor=\"filename\">\n        {`${props.label}:`}\n      </label>\n      <input\n        type=\"text\"\n        className=\"TextInput\"\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        id={`${id}-filename`}\n        value={fileName}\n        onChange={(event) => setFileName(event.target.value)}\n      />\n    </div>\n  );\n};\n", "import \"./ToolIcon.scss\";\n\nimport { t } from \"../i18n\";\nimport { ToolButton } from \"./ToolButton\";\nimport { THEME } from \"../constants\";\nimport { Theme } from \"../element/types\";\n\n// We chose to use only explicit toggle and not a third option for system value,\n// but this could be added in the future.\nexport const DarkModeToggle = (props: {\n  value: Theme;\n  onChange: (value: Theme) => void;\n  title?: string;\n}) => {\n  const title =\n    props.title ||\n    (props.value === \"dark\" ? t(\"buttons.lightMode\") : t(\"buttons.darkMode\"));\n\n  return (\n    <ToolButton\n      type=\"icon\"\n      icon={props.value === THEME.LIGHT ? ICONS.MOON : ICONS.SUN}\n      title={title}\n      aria-label={title}\n      onClick={() =>\n        props.onChange(props.value === THEME.DARK ? THEME.LIGHT : THEME.DARK)\n      }\n      data-testid=\"toggle-dark-mode\"\n    />\n  );\n};\n\nconst ICONS = {\n  SUN: (\n    <svg width=\"512\" height=\"512\" className=\"rtl-mirror\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z\"\n      ></path>\n    </svg>\n  ),\n  MOON: (\n    <svg width=\"512\" height=\"512\" className=\"rtl-mirror\" viewBox=\"0 0 512 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z\"\n      ></path>\n    </svg>\n  ),\n};\n", "import {\n  copyBlobToClipboardAsPng,\n  copyTextToSystemClipboard,\n} from \"../clipboard\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  DEFAULT_FILENAME,\n  isFirefox,\n  MIME_TYPES,\n} from \"../constants\";\nimport { getNonDeletedElements } from \"../element\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawFrameLikeElement,\n  NonDeletedExcalidrawElement,\n} from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { isSomeElementSelected, getSelectedElements } from \"../scene\";\nimport { exportToCanvas, exportToSvg } from \"../scene/export\";\nimport { ExportType } from \"../scene/types\";\nimport { AppState, BinaryFiles } from \"../types\";\nimport { cloneJSON } from \"../utils\";\nimport { canvasToBlob } from \"./blob\";\nimport { fileSave, FileSystemHandle } from \"./filesystem\";\nimport { serializeAsJSON } from \"./json\";\nimport { getElementsOverlappingFrame } from \"../frame\";\n\nexport { loadFromBlob } from \"./blob\";\nexport { loadFromJSON, saveAsJSON } from \"./json\";\n\nexport type ExportedElements = readonly NonDeletedExcalidrawElement[] & {\n  _brand: \"exportedElements\";\n};\n\nexport const prepareElementsForExport = (\n  elements: readonly ExcalidrawElement[],\n  { selectedElementIds }: Pick<AppState, \"selectedElementIds\">,\n  exportSelectionOnly: boolean,\n) => {\n  elements = getNonDeletedElements(elements);\n\n  const isExportingSelection =\n    exportSelectionOnly &&\n    isSomeElementSelected(elements, { selectedElementIds });\n\n  let exportingFrame: ExcalidrawFrameLikeElement | null = null;\n  let exportedElements = isExportingSelection\n    ? getSelectedElements(\n        elements,\n        { selectedElementIds },\n        {\n          includeBoundTextElement: true,\n        },\n      )\n    : elements;\n\n  if (isExportingSelection) {\n    if (\n      exportedElements.length === 1 &&\n      isFrameLikeElement(exportedElements[0])\n    ) {\n      exportingFrame = exportedElements[0];\n      exportedElements = getElementsOverlappingFrame(elements, exportingFrame);\n    } else if (exportedElements.length > 1) {\n      exportedElements = getSelectedElements(\n        elements,\n        { selectedElementIds },\n        {\n          includeBoundTextElement: true,\n          includeElementsInFrames: true,\n        },\n      );\n    }\n  }\n\n  return {\n    exportingFrame,\n    exportedElements: cloneJSON(exportedElements) as ExportedElements,\n  };\n};\n\nexport const exportCanvas = async (\n  type: Omit<ExportType, \"backend\">,\n  elements: ExportedElements,\n  appState: AppState,\n  files: BinaryFiles,\n  {\n    exportBackground,\n    exportPadding = DEFAULT_EXPORT_PADDING,\n    viewBackgroundColor,\n    name = appState.name || DEFAULT_FILENAME,\n    fileHandle = null,\n    exportingFrame = null,\n  }: {\n    exportBackground: boolean;\n    exportPadding?: number;\n    viewBackgroundColor: string;\n    /** filename, if applicable */\n    name?: string;\n    fileHandle?: FileSystemHandle | null;\n    exportingFrame: ExcalidrawFrameLikeElement | null;\n  },\n) => {\n  if (elements.length === 0) {\n    throw new Error(t(\"alerts.cannotExportEmptyCanvas\"));\n  }\n  if (type === \"svg\" || type === \"clipboard-svg\") {\n    const svgPromise = exportToSvg(\n      elements,\n      {\n        exportBackground,\n        exportWithDarkMode: appState.exportWithDarkMode,\n        viewBackgroundColor,\n        exportPadding,\n        exportScale: appState.exportScale,\n        exportEmbedScene: appState.exportEmbedScene && type === \"svg\",\n      },\n      files,\n      { exportingFrame },\n    );\n\n    if (type === \"svg\") {\n      return fileSave(\n        svgPromise.then((svg) => {\n          return new Blob([svg.outerHTML], { type: MIME_TYPES.svg });\n        }),\n        {\n          description: \"Export to SVG\",\n          name,\n          extension: appState.exportEmbedScene ? \"excalidraw.svg\" : \"svg\",\n          fileHandle,\n        },\n      );\n    } else if (type === \"clipboard-svg\") {\n      await copyTextToSystemClipboard(\n        await svgPromise.then((svg) => svg.outerHTML),\n      );\n      return;\n    }\n  }\n\n  const tempCanvas = exportToCanvas(elements, appState, files, {\n    exportBackground,\n    viewBackgroundColor,\n    exportPadding,\n    exportingFrame,\n  });\n\n  if (type === \"png\") {\n    let blob = canvasToBlob(tempCanvas);\n\n    if (appState.exportEmbedScene) {\n      blob = blob.then((blob) =>\n        import(\"./image\").then(({ encodePngMetadata }) =>\n          encodePngMetadata({\n            blob,\n            metadata: serializeAsJSON(elements, appState, files, \"local\"),\n          }),\n        ),\n      );\n    }\n\n    return fileSave(blob, {\n      description: \"Export to PNG\",\n      name,\n      // FIXME reintroduce `excalidraw.png` when most people upgrade away\n      // from 111.0.5563.64 (arm64), see #6349\n      extension: /* appState.exportEmbedScene ? \"excalidraw.png\" : */ \"png\",\n      fileHandle,\n    });\n  } else if (type === \"clipboard\") {\n    try {\n      const blob = canvasToBlob(tempCanvas);\n      await copyBlobToClipboardAsPng(blob);\n    } catch (error: any) {\n      console.warn(error);\n      if (error.name === \"CANVAS_POSSIBLY_TOO_BIG\") {\n        throw error;\n      }\n      // TypeError *probably* suggests ClipboardItem not defined, which\n      // people on Firefox can enable through a flag, so let's tell them.\n      if (isFirefox && error.name === \"TypeError\") {\n        throw new Error(\n          `${t(\"alerts.couldNotCopyToClipboard\")}\\n\\n${t(\n            \"hints.firefox_clipboard_write\",\n          )}`,\n        );\n      } else {\n        throw new Error(t(\"alerts.couldNotCopyToClipboard\"));\n      }\n    }\n  } else {\n    // shouldn't happen\n    throw new Error(\"Unsupported export type\");\n  }\n};\n", "import { ExcalidrawElement } from \"../element/types\";\nimport { AppState, BinaryFiles } from \"../types\";\nimport { exportCanvas, prepareElementsForExport } from \".\";\nimport { getFileHandleType, isImageFileHandleType } from \"./blob\";\n\nexport const resaveAsImageWithScene = async (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  files: BinaryFiles,\n  name: string,\n) => {\n  const { exportBackground, viewBackgroundColor, fileHandle } = appState;\n\n  const fileHandleType = getFileHandleType(fileHandle);\n\n  if (!fileHandle || !isImageFileHandleType(fileHandleType)) {\n    throw new Error(\n      \"fileHandle should exist and should be of type svg or png when resaving\",\n    );\n  }\n  appState = {\n    ...appState,\n    exportEmbedScene: true,\n  };\n\n  const { exportedElements, exportingFrame } = prepareElementsForExport(\n    elements,\n    appState,\n    false,\n  );\n\n  await exportCanvas(fileHandleType, exportedElements, appState, files, {\n    exportBackground,\n    viewBackgroundColor,\n    name,\n    fileHandle,\n    exportingFrame,\n  });\n\n  return { fileHandle };\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Checkbox {\n  margin: 4px 0.3em;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus) {\n  box-shadow: 0 0 0 2px #4dabf7;\n}\n.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus) svg {\n  display: block;\n  opacity: 0.3;\n}\n.excalidraw .Checkbox:active .Checkbox-box {\n  box-shadow: 0 0 2px 1px inset #1c7ed6 !important;\n}\n.excalidraw .Checkbox:hover .Checkbox-box {\n  background-color: rgba(208, 235, 255, 0.2);\n}\n.excalidraw .Checkbox.is-checked .Checkbox-box {\n  background-color: #d0ebff;\n}\n.excalidraw .Checkbox.is-checked .Checkbox-box svg {\n  display: block;\n}\n.excalidraw .Checkbox.is-checked:hover .Checkbox-box {\n  background-color: #a5d8ff;\n}\n.excalidraw .Checkbox .Checkbox-box {\n  width: 22px;\n  height: 22px;\n  padding: 0;\n  flex: 0 0 auto;\n  margin: 0 1em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 0 0 2px #1c7ed6;\n  background-color: transparent;\n  border-radius: 4px;\n  color: #1c7ed6;\n  border: 0;\n}\n.excalidraw .Checkbox .Checkbox-box:focus {\n  box-shadow: 0 0 0 3px #1c7ed6;\n}\n.excalidraw .Checkbox .Checkbox-box svg {\n  display: none;\n  width: 16px;\n  height: 16px;\n  stroke-width: 3px;\n}\n.excalidraw .Checkbox .Checkbox-label {\n  display: flex;\n  align-items: center;\n}\n.excalidraw .Checkbox .excalidraw-tooltip-icon {\n  width: 1em;\n  height: 1em;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJDaGVja2JveEl0ZW0uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTs7QUFJQTtFQUNFO0VBQ0E7O0FBS0Y7RUFDRTs7QUFLRjtFQUNFOztBQUtGO0VBQ0U7O0FBQ0E7RUFDRTs7QUFHSjtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUVBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAuQ2hlY2tib3gge1xuICAgIG1hcmdpbjogNHB4IDAuM2VtO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcblxuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgICAmOmhvdmVyOm5vdCguaXMtY2hlY2tlZCkgLkNoZWNrYm94LWJveDpub3QoOmZvY3VzKSB7XG4gICAgICBib3gtc2hhZG93OiAwIDAgMCAycHggI3skb2MtYmx1ZS00fTtcbiAgICB9XG5cbiAgICAmOmhvdmVyOm5vdCguaXMtY2hlY2tlZCkgLkNoZWNrYm94LWJveDpub3QoOmZvY3VzKSB7XG4gICAgICBzdmcge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgfVxuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIC5DaGVja2JveC1ib3gge1xuICAgICAgICBib3gtc2hhZG93OiAwIDAgMnB4IDFweCBpbnNldCAjeyRvYy1ibHVlLTd9ICFpbXBvcnRhbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpob3ZlciB7XG4gICAgICAuQ2hlY2tib3gtYm94IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogZmFkZS1vdXQoJG9jLWJsdWUtMSwgMC44KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLmlzLWNoZWNrZWQge1xuICAgICAgLkNoZWNrYm94LWJveCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICN7JG9jLWJsdWUtMX07XG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICY6aG92ZXIgLkNoZWNrYm94LWJveCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICN7JG9jLWJsdWUtMn07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLkNoZWNrYm94LWJveCB7XG4gICAgICB3aWR0aDogMjJweDtcbiAgICAgIGhlaWdodDogMjJweDtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgICBmbGV4OiAwIDAgYXV0bztcblxuICAgICAgbWFyZ2luOiAwIDFlbTtcblxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICAgYm94LXNoYWRvdzogMCAwIDAgMnB4ICN7JG9jLWJsdWUtN307XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcblxuICAgICAgY29sb3I6ICN7JG9jLWJsdWUtN307XG5cbiAgICAgIGJvcmRlcjogMDtcblxuICAgICAgJjpmb2N1cyB7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDNweCAjeyRvYy1ibHVlLTd9O1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICBzdHJva2Utd2lkdGg6IDNweDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuQ2hlY2tib3gtbGFiZWwge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmV4Y2FsaWRyYXctdG9vbHRpcC1pY29uIHtcbiAgICAgIHdpZHRoOiAxZW07XG4gICAgICBoZWlnaHQ6IDFlbTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import React from \"react\";\nimport clsx from \"clsx\";\nimport { checkIcon } from \"./icons\";\n\nimport \"./CheckboxItem.scss\";\n\nexport const CheckboxItem: React.FC<{\n  checked: boolean;\n  onChange: (checked: boolean, event: React.MouseEvent) => void;\n  className?: string;\n  children?: React.ReactNode;\n}> = ({ children, checked, onChange, className }) => {\n  return (\n    <div\n      className={clsx(\"Checkbox\", className, { \"is-checked\": checked })}\n      onClick={(event) => {\n        onChange(!checked, event);\n        (\n          (event.currentTarget as HTMLDivElement).querySelector(\n            \".Checkbox-box\",\n          ) as HTMLButtonElement\n        ).focus();\n      }}\n    >\n      <button className=\"Checkbox-box\" role=\"checkbox\" aria-checked={checked}>\n        {checkIcon}\n      </button>\n      <div className=\"Checkbox-label\">{children}</div>\n    </div>\n  );\n};\n", "import { questionCircle, saveAs } from \"../components/icons\";\nimport { ProjectName } from \"../components/ProjectName\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { Tooltip } from \"../components/Tooltip\";\nimport { DarkModeToggle } from \"../components/DarkModeToggle\";\nimport { loadFromJSON, saveAsJSON } from \"../data\";\nimport { resaveAsImageWithScene } from \"../data/resave\";\nimport { t } from \"../i18n\";\nimport { useDevice } from \"../components/App\";\nimport { KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { CheckboxItem } from \"../components/CheckboxItem\";\nimport { getExportSize } from \"../scene/export\";\nimport { DEFAULT_EXPORT_PADDING, EXPORT_SCALES, THEME } from \"../constants\";\nimport { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport { getNonDeletedElements } from \"../element\";\nimport { isImageFileHandle } from \"../data/blob\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { Theme } from \"../element/types\";\n\nimport \"../components/ToolIcon.scss\";\n\nexport const actionChangeProjectName = register({\n  name: \"changeProjectName\",\n  trackEvent: false,\n  perform: (_elements, appState, value) => {\n    return { appState: { ...appState, name: value }, commitToHistory: false };\n  },\n  PanelComponent: ({ appState, updateData, appProps, data, app }) => (\n    <ProjectName\n      label={t(\"labels.fileTitle\")}\n      value={app.getName()}\n      onChange={(name: string) => updateData(name)}\n      ignoreFocus={data?.ignoreFocus ?? false}\n    />\n  ),\n});\n\nexport const actionChangeExportScale = register({\n  name: \"changeExportScale\",\n  trackEvent: { category: \"export\", action: \"scale\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportScale: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ elements: allElements, appState, updateData }) => {\n    const elements = getNonDeletedElements(allElements);\n    const exportSelected = isSomeElementSelected(elements, appState);\n    const exportedElements = exportSelected\n      ? getSelectedElements(elements, appState)\n      : elements;\n\n    return (\n      <>\n        {EXPORT_SCALES.map((s) => {\n          const [width, height] = getExportSize(\n            exportedElements,\n            DEFAULT_EXPORT_PADDING,\n            s,\n          );\n\n          const scaleButtonTitle = `${t(\n            \"imageExportDialog.label.scale\",\n          )} ${s}x (${width}x${height})`;\n\n          return (\n            <ToolButton\n              key={s}\n              size=\"small\"\n              type=\"radio\"\n              icon={`${s}x`}\n              name=\"export-canvas-scale\"\n              title={scaleButtonTitle}\n              aria-label={scaleButtonTitle}\n              id=\"export-canvas-scale\"\n              checked={s === appState.exportScale}\n              onChange={() => updateData(s)}\n            />\n          );\n        })}\n      </>\n    );\n  },\n});\n\nexport const actionChangeExportBackground = register({\n  name: \"changeExportBackground\",\n  trackEvent: { category: \"export\", action: \"toggleBackground\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportBackground: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem\n      checked={appState.exportBackground}\n      onChange={(checked) => updateData(checked)}\n    >\n      {t(\"imageExportDialog.label.withBackground\")}\n    </CheckboxItem>\n  ),\n});\n\nexport const actionChangeExportEmbedScene = register({\n  name: \"changeExportEmbedScene\",\n  trackEvent: { category: \"export\", action: \"embedScene\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportEmbedScene: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem\n      checked={appState.exportEmbedScene}\n      onChange={(checked) => updateData(checked)}\n    >\n      {t(\"imageExportDialog.label.embedScene\")}\n      <Tooltip label={t(\"imageExportDialog.tooltip.embedScene\")} long={true}>\n        <div className=\"excalidraw-tooltip-icon\">{questionCircle}</div>\n      </Tooltip>\n    </CheckboxItem>\n  ),\n});\n\nexport const actionSaveToActiveFile = register({\n  name: \"saveToActiveFile\",\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.saveToActiveFile &&\n      !!appState.fileHandle &&\n      !appState.viewModeEnabled\n    );\n  },\n  perform: async (elements, appState, value, app) => {\n    const fileHandleExists = !!appState.fileHandle;\n\n    try {\n      const { fileHandle } = isImageFileHandle(appState.fileHandle)\n        ? await resaveAsImageWithScene(\n            elements,\n            appState,\n            app.files,\n            app.getName(),\n          )\n        : await saveAsJSON(elements, appState, app.files, app.getName());\n\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          fileHandle,\n          toast: fileHandleExists\n            ? {\n                message: fileHandle?.name\n                  ? t(\"toast.fileSavedToFilename\").replace(\n                      \"{filename}\",\n                      `\"${fileHandle.name}\"`,\n                    )\n                  : t(\"toast.fileSaved\"),\n              }\n            : null,\n        },\n      };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { commitToHistory: false };\n    }\n  },\n  keyTest: (event) =>\n    event.key === KEYS.S && event[KEYS.CTRL_OR_CMD] && !event.shiftKey,\n});\n\nexport const actionSaveFileToDisk = register({\n  name: \"saveFileToDisk\",\n  viewMode: true,\n  trackEvent: { category: \"export\" },\n  perform: async (elements, appState, value, app) => {\n    try {\n      const { fileHandle } = await saveAsJSON(\n        elements,\n        {\n          ...appState,\n          fileHandle: null,\n        },\n        app.files,\n        app.getName(),\n      );\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          openDialog: null,\n          fileHandle,\n          toast: { message: t(\"toast.fileSaved\") },\n        },\n      };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { commitToHistory: false };\n    }\n  },\n  keyTest: (event) =>\n    event.key === KEYS.S && event.shiftKey && event[KEYS.CTRL_OR_CMD],\n  PanelComponent: ({ updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={saveAs}\n      title={t(\"buttons.saveAs\")}\n      aria-label={t(\"buttons.saveAs\")}\n      showAriaLabel={useDevice().editor.isMobile}\n      hidden={!nativeFileSystemSupported}\n      onClick={() => updateData(null)}\n      data-testid=\"save-as-button\"\n    />\n  ),\n});\n\nexport const actionLoadScene = register({\n  name: \"loadScene\",\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.loadScene && !appState.viewModeEnabled\n    );\n  },\n  perform: async (elements, appState, _, app) => {\n    try {\n      const {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n      } = await loadFromJSON(appState, elements);\n      return {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n        commitToHistory: true,\n      };\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return false;\n      }\n      return {\n        elements,\n        appState: { ...appState, errorMessage: error.message },\n        files: app.files,\n        commitToHistory: false,\n      };\n    }\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.O,\n});\n\nexport const actionExportWithDarkMode = register({\n  name: \"exportWithDarkMode\",\n  trackEvent: { category: \"export\", action: \"toggleTheme\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportWithDarkMode: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        marginTop: \"-45px\",\n        marginBottom: \"10px\",\n      }}\n    >\n      <DarkModeToggle\n        value={appState.exportWithDarkMode ? THEME.DARK : THEME.LIGHT}\n        onChange={(theme: Theme) => {\n          updateData(theme === THEME.DARK);\n        }}\n        title={t(\"imageExportDialog.label.darkMode\")}\n      />\n    </div>\n  ),\n});\n", "import {\n  isTextElement,\n  isExcalidrawElement,\n  redrawTextBoundingBox,\n} from \"../element\";\nimport { CODES, KEYS } from \"../keys\";\nimport { t } from \"../i18n\";\nimport { register } from \"./register\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport {\n  DEFAULT_FONT_SIZE,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_TEXT_ALIGN,\n} from \"../constants\";\nimport {\n  getBoundTextElement,\n  getDefaultLineHeight,\n} from \"../element/textElement\";\nimport {\n  hasBoundTextElement,\n  canApplyRoundnessTypeToElement,\n  getDefaultRoundnessTypeForElement,\n  isFrameLikeElement,\n  isArrowElement,\n} from \"../element/typeChecks\";\nimport { getSelectedElements } from \"../scene\";\nimport { ExcalidrawTextElement } from \"../element/types\";\n\n// `copiedStyles` is exported only for tests.\nexport let copiedStyles: string = \"{}\";\n\nexport const actionCopyStyles = register({\n  name: \"copyStyles\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    const elementsCopied = [];\n    const element = elements.find((el) => appState.selectedElementIds[el.id]);\n    elementsCopied.push(element);\n    if (element && hasBoundTextElement(element)) {\n      const boundTextElement = getBoundTextElement(\n        element,\n        app.scene.getNonDeletedElementsMap(),\n      );\n      elementsCopied.push(boundTextElement);\n    }\n    if (element) {\n      copiedStyles = JSON.stringify(elementsCopied);\n    }\n    return {\n      appState: {\n        ...appState,\n        toast: { message: t(\"toast.copyStyles\") },\n      },\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.copyStyles\",\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.C,\n});\n\nexport const actionPasteStyles = register({\n  name: \"pasteStyles\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, formData, app) => {\n    const elementsCopied = JSON.parse(copiedStyles);\n    const pastedElement = elementsCopied[0];\n    const boundTextElement = elementsCopied[1];\n    if (!isExcalidrawElement(pastedElement)) {\n      return { elements, commitToHistory: false };\n    }\n\n    const selectedElements = getSelectedElements(elements, appState, {\n      includeBoundTextElement: true,\n    });\n    const selectedElementIds = selectedElements.map((element) => element.id);\n    return {\n      elements: elements.map((element) => {\n        if (selectedElementIds.includes(element.id)) {\n          let elementStylesToCopyFrom = pastedElement;\n          if (isTextElement(element) && element.containerId) {\n            elementStylesToCopyFrom = boundTextElement;\n          }\n          if (!elementStylesToCopyFrom) {\n            return element;\n          }\n          let newElement = newElementWith(element, {\n            backgroundColor: elementStylesToCopyFrom?.backgroundColor,\n            strokeWidth: elementStylesToCopyFrom?.strokeWidth,\n            strokeColor: elementStylesToCopyFrom?.strokeColor,\n            strokeStyle: elementStylesToCopyFrom?.strokeStyle,\n            fillStyle: elementStylesToCopyFrom?.fillStyle,\n            opacity: elementStylesToCopyFrom?.opacity,\n            roughness: elementStylesToCopyFrom?.roughness,\n            roundness: elementStylesToCopyFrom.roundness\n              ? canApplyRoundnessTypeToElement(\n                  elementStylesToCopyFrom.roundness.type,\n                  element,\n                )\n                ? elementStylesToCopyFrom.roundness\n                : getDefaultRoundnessTypeForElement(element)\n              : null,\n          });\n\n          if (isTextElement(newElement)) {\n            const fontSize =\n              (elementStylesToCopyFrom as ExcalidrawTextElement).fontSize ||\n              DEFAULT_FONT_SIZE;\n            const fontFamily =\n              (elementStylesToCopyFrom as ExcalidrawTextElement).fontFamily ||\n              DEFAULT_FONT_FAMILY;\n            newElement = newElementWith(newElement, {\n              fontSize,\n              fontFamily,\n              textAlign:\n                (elementStylesToCopyFrom as ExcalidrawTextElement).textAlign ||\n                DEFAULT_TEXT_ALIGN,\n              lineHeight:\n                (elementStylesToCopyFrom as ExcalidrawTextElement).lineHeight ||\n                getDefaultLineHeight(fontFamily),\n            });\n            let container = null;\n            if (newElement.containerId) {\n              container =\n                selectedElements.find(\n                  (element) =>\n                    isTextElement(newElement) &&\n                    element.id === newElement.containerId,\n                ) || null;\n            }\n            redrawTextBoundingBox(\n              newElement,\n              container,\n              app.scene.getNonDeletedElementsMap(),\n            );\n          }\n\n          if (\n            newElement.type === \"arrow\" &&\n            isArrowElement(elementStylesToCopyFrom)\n          ) {\n            newElement = newElementWith(newElement, {\n              startArrowhead: elementStylesToCopyFrom.startArrowhead,\n              endArrowhead: elementStylesToCopyFrom.endArrowhead,\n            });\n          }\n\n          if (isFrameLikeElement(element)) {\n            newElement = newElementWith(newElement, {\n              roundness: null,\n              backgroundColor: \"transparent\",\n            });\n          }\n\n          return newElement;\n        }\n        return element;\n      }),\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.pasteStyles\",\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.V,\n});\n", "import { HamburgerMenuIcon, palette } from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { t } from \"../i18n\";\nimport { showSelectedShapeActions, getNonDeletedElements } from \"../element\";\nimport { register } from \"./register\";\nimport { KEYS } from \"../keys\";\n\nexport const actionToggleCanvasMenu = register({\n  name: \"toggleCanvasMenu\",\n  trackEvent: { category: \"menu\" },\n  perform: (_, appState) => ({\n    appState: {\n      ...appState,\n      openMenu: appState.openMenu === \"canvas\" ? null : \"canvas\",\n    },\n    commitToHistory: false,\n  }),\n  PanelComponent: ({ appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={HamburgerMenuIcon}\n      aria-label={t(\"buttons.menu\")}\n      onClick={updateData}\n      selected={appState.openMenu === \"canvas\"}\n    />\n  ),\n});\n\nexport const actionToggleEditMenu = register({\n  name: \"toggleEditMenu\",\n  trackEvent: { category: \"menu\" },\n  perform: (_elements, appState) => ({\n    appState: {\n      ...appState,\n      openMenu: appState.openMenu === \"shape\" ? null : \"shape\",\n    },\n    commitToHistory: false,\n  }),\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      visible={showSelectedShapeActions(\n        appState,\n        getNonDeletedElements(elements),\n      )}\n      type=\"button\"\n      icon={palette}\n      aria-label={t(\"buttons.edit\")}\n      onClick={updateData}\n      selected={appState.openMenu === \"shape\"}\n    />\n  ),\n});\n\nexport const actionShortcuts = register({\n  name: \"toggleShortcuts\",\n  viewMode: true,\n  trackEvent: { category: \"menu\", action: \"toggleHelpDialog\" },\n  perform: (_elements, appState, _, { focusContainer }) => {\n    if (appState.openDialog?.name === \"help\") {\n      focusContainer();\n    }\n    return {\n      appState: {\n        ...appState,\n        openDialog:\n          appState.openDialog?.name === \"help\"\n            ? null\n            : {\n                name: \"help\",\n              },\n      },\n      commitToHistory: false,\n    };\n  },\n  keyTest: (event) => event.key === KEYS.QUESTION_MARK,\n});\n", "import { KEYS } from \"../keys\";\nimport { t } from \"../i18n\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\nimport { UngroupIcon, GroupIcon } from \"../components/icons\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport { isSomeElementSelected } from \"../scene\";\nimport {\n  getSelectedGroupIds,\n  selectGroup,\n  selectGroupsForSelectedElements,\n  getElementsInGroup,\n  addToGroup,\n  removeFromSelectedGroups,\n  isElementInGroup,\n} from \"../groups\";\nimport { getNonDeletedElements } from \"../element\";\nimport { randomId } from \"../random\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { ExcalidrawElement, ExcalidrawTextElement } from \"../element/types\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { isBoundToContainer } from \"../element/typeChecks\";\nimport {\n  getElementsInResizingFrame,\n  getFrameLikeElements,\n  groupByFrameLikes,\n  removeElementsFromFrame,\n  replaceAllElementsInFrame,\n} from \"../frame\";\n\nconst allElementsInSameGroup = (elements: readonly ExcalidrawElement[]) => {\n  if (elements.length >= 2) {\n    const groupIds = elements[0].groupIds;\n    for (const groupId of groupIds) {\n      if (\n        elements.reduce(\n          (acc, element) => acc && isElementInGroup(element, groupId),\n          true,\n        )\n      ) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\nconst enableActionGroup = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  app: AppClassProperties,\n) => {\n  const selectedElements = app.scene.getSelectedElements({\n    selectedElementIds: appState.selectedElementIds,\n    includeBoundTextElement: true,\n  });\n  return (\n    selectedElements.length >= 2 && !allElementsInSameGroup(selectedElements)\n  );\n};\n\nexport const actionGroup = register({\n  name: \"group\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    });\n    if (selectedElements.length < 2) {\n      // nothing to group\n      return { appState, elements, commitToHistory: false };\n    }\n    // if everything is already grouped into 1 group, there is nothing to do\n    const selectedGroupIds = getSelectedGroupIds(appState);\n    if (selectedGroupIds.length === 1) {\n      const selectedGroupId = selectedGroupIds[0];\n      const elementIdsInGroup = new Set(\n        getElementsInGroup(elements, selectedGroupId).map(\n          (element) => element.id,\n        ),\n      );\n      const selectedElementIds = new Set(\n        selectedElements.map((element) => element.id),\n      );\n      const combinedSet = new Set([\n        ...Array.from(elementIdsInGroup),\n        ...Array.from(selectedElementIds),\n      ]);\n      if (combinedSet.size === elementIdsInGroup.size) {\n        // no incremental ids in the selected ids\n        return { appState, elements, commitToHistory: false };\n      }\n    }\n\n    let nextElements = [...elements];\n\n    // this includes the case where we are grouping elements inside a frame\n    // and elements outside that frame\n    const groupingElementsFromDifferentFrames =\n      new Set(selectedElements.map((element) => element.frameId)).size > 1;\n    // when it happens, we want to remove elements that are in the frame\n    // and are going to be grouped from the frame (mouthful, I know)\n    if (groupingElementsFromDifferentFrames) {\n      const frameElementsMap = groupByFrameLikes(selectedElements);\n\n      frameElementsMap.forEach((elementsInFrame, frameId) => {\n        removeElementsFromFrame(\n          elementsInFrame,\n          app.scene.getNonDeletedElementsMap(),\n        );\n      });\n    }\n\n    const newGroupId = randomId();\n    const selectElementIds = arrayToMap(selectedElements);\n\n    nextElements = nextElements.map((element) => {\n      if (!selectElementIds.get(element.id)) {\n        return element;\n      }\n      return newElementWith(element, {\n        groupIds: addToGroup(\n          element.groupIds,\n          newGroupId,\n          appState.editingGroupId,\n        ),\n      });\n    });\n    // keep the z order within the group the same, but move them\n    // to the z order of the highest element in the layer stack\n    const elementsInGroup = getElementsInGroup(nextElements, newGroupId);\n    const lastElementInGroup = elementsInGroup[elementsInGroup.length - 1];\n    const lastGroupElementIndex = nextElements.lastIndexOf(lastElementInGroup);\n    const elementsAfterGroup = nextElements.slice(lastGroupElementIndex + 1);\n    const elementsBeforeGroup = nextElements\n      .slice(0, lastGroupElementIndex)\n      .filter(\n        (updatedElement) => !isElementInGroup(updatedElement, newGroupId),\n      );\n    nextElements = [\n      ...elementsBeforeGroup,\n      ...elementsInGroup,\n      ...elementsAfterGroup,\n    ];\n\n    return {\n      appState: {\n        ...appState,\n        ...selectGroup(\n          newGroupId,\n          { ...appState, selectedGroupIds: {} },\n          getNonDeletedElements(nextElements),\n        ),\n      },\n      elements: nextElements,\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.group\",\n  predicate: (elements, appState, _, app) =>\n    enableActionGroup(elements, appState, app),\n  keyTest: (event) =>\n    !event.shiftKey && event[KEYS.CTRL_OR_CMD] && event.key === KEYS.G,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(elements, appState, app)}\n      type=\"button\"\n      icon={<GroupIcon theme={appState.theme} />}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.group\")} \u2014 ${getShortcutKey(\"CtrlOrCmd+G\")}`}\n      aria-label={t(\"labels.group\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    ></ToolButton>\n  ),\n});\n\nexport const actionUngroup = register({\n  name: \"ungroup\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const groupIds = getSelectedGroupIds(appState);\n    const elementsMap = arrayToMap(elements);\n\n    if (groupIds.length === 0) {\n      return { appState, elements, commitToHistory: false };\n    }\n\n    let nextElements = [...elements];\n\n    const boundTextElementIds: ExcalidrawTextElement[\"id\"][] = [];\n    nextElements = nextElements.map((element) => {\n      if (isBoundToContainer(element)) {\n        boundTextElementIds.push(element.id);\n      }\n      const nextGroupIds = removeFromSelectedGroups(\n        element.groupIds,\n        appState.selectedGroupIds,\n      );\n      if (nextGroupIds.length === element.groupIds.length) {\n        return element;\n      }\n      return newElementWith(element, {\n        groupIds: nextGroupIds,\n      });\n    });\n\n    const updateAppState = selectGroupsForSelectedElements(\n      appState,\n      getNonDeletedElements(nextElements),\n      appState,\n      null,\n    );\n\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    const selectedElementFrameIds = new Set(\n      selectedElements\n        .filter((element) => element.frameId)\n        .map((element) => element.frameId!),\n    );\n\n    const targetFrames = getFrameLikeElements(elements).filter((frame) =>\n      selectedElementFrameIds.has(frame.id),\n    );\n\n    targetFrames.forEach((frame) => {\n      if (frame) {\n        nextElements = replaceAllElementsInFrame(\n          nextElements,\n          getElementsInResizingFrame(\n            nextElements,\n            frame,\n            appState,\n            elementsMap,\n          ),\n          frame,\n          app,\n        );\n      }\n    });\n\n    // remove binded text elements from selection\n    updateAppState.selectedElementIds = Object.entries(\n      updateAppState.selectedElementIds,\n    ).reduce(\n      (acc: { [key: ExcalidrawElement[\"id\"]]: true }, [id, selected]) => {\n        if (selected && !boundTextElementIds.includes(id)) {\n          acc[id] = true;\n        }\n        return acc;\n      },\n      {},\n    );\n\n    return {\n      appState: { ...appState, ...updateAppState },\n      elements: nextElements,\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event.shiftKey &&\n    event[KEYS.CTRL_OR_CMD] &&\n    event.key === KEYS.G.toUpperCase(),\n  contextItemLabel: \"labels.ungroup\",\n  predicate: (elements, appState) => getSelectedGroupIds(appState).length > 0,\n\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      hidden={getSelectedGroupIds(appState).length === 0}\n      icon={<UngroupIcon theme={appState.theme} />}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.ungroup\")} \u2014 ${getShortcutKey(\"CtrlOrCmd+Shift+G\")}`}\n      aria-label={t(\"labels.ungroup\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    ></ToolButton>\n  ),\n});\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Avatar {\n  width: 1.25rem;\n  height: 1.25rem;\n  position: relative;\n  border-radius: 100%;\n  outline-offset: 2px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 800;\n  line-height: 1;\n  color: var(--color-gray-90);\n  flex: 0 0 auto;\n}\n.excalidraw .Avatar-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 100%;\n}\n.excalidraw .Avatar::before {\n  content: \"\";\n  position: absolute;\n  top: -3px;\n  right: -3px;\n  bottom: -3px;\n  left: -3px;\n  border: 1px solid var(--avatar-border-color);\n  border-radius: 100%;\n}\n.excalidraw .Avatar--is-followed::before {\n  border-color: var(--color-primary-hover);\n}\n.excalidraw .Avatar--is-current-user {\n  cursor: auto;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJBdmF0YXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RURtSEE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTs7QUFFRjtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLkF2YXRhciB7XG4gICAgQGluY2x1ZGUgYXZhdGFyU3R5bGVzO1xuICB9XG59XG4iXX0= */", "import \"./Avatar.scss\";\n\nimport React, { useState } from \"react\";\nimport { getNameInitial } from \"../clients\";\nimport clsx from \"clsx\";\n\ntype AvatarProps = {\n  onClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  color: string;\n  name: string;\n  src?: string;\n  isBeingFollowed?: boolean;\n  isCurrentUser: boolean;\n};\n\nexport const Avatar = ({\n  color,\n  onClick,\n  name,\n  src,\n  isBeingFollowed,\n  isCurrentUser,\n}: AvatarProps) => {\n  const shortName = getNameInitial(name);\n  const [error, setError] = useState(false);\n  const loadImg = !error && src;\n  const style = loadImg ? undefined : { background: color };\n  return (\n    <div\n      className={clsx(\"Avatar\", {\n        \"Avatar--is-followed\": isBeingFollowed,\n        \"Avatar--is-current-user\": isCurrentUser,\n      })}\n      style={style}\n      onClick={onClick}\n    >\n      {loadImg ? (\n        <img\n          className=\"Avatar-img\"\n          src={src}\n          alt={shortName}\n          referrerPolicy=\"no-referrer\"\n          onError={() => setError(true)}\n        />\n      ) : (\n        shortName\n      )}\n    </div>\n  );\n};\n", "import { getClientColor } from \"../clients\";\nimport { Avatar } from \"../components/Avatar\";\nimport { GoToCollaboratorComponentProps } from \"../components/UserList\";\nimport { eyeIcon } from \"../components/icons\";\nimport { t } from \"../i18n\";\nimport { Collaborator } from \"../types\";\nimport { register } from \"./register\";\n\nexport const actionGoToCollaborator = register({\n  name: \"goToCollaborator\",\n  viewMode: true,\n  trackEvent: { category: \"collab\" },\n  perform: (_elements, appState, collaborator: Collaborator) => {\n    if (\n      !collaborator.socketId ||\n      appState.userToFollow?.socketId === collaborator.socketId ||\n      collaborator.isCurrentUser\n    ) {\n      return {\n        appState: {\n          ...appState,\n          userToFollow: null,\n        },\n        commitToHistory: false,\n      };\n    }\n\n    return {\n      appState: {\n        ...appState,\n        userToFollow: {\n          socketId: collaborator.socketId,\n          username: collaborator.username || \"\",\n        },\n        // Close mobile menu\n        openMenu: appState.openMenu === \"canvas\" ? null : appState.openMenu,\n      },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ updateData, data, appState }) => {\n    const { clientId, collaborator, withName, isBeingFollowed } =\n      data as GoToCollaboratorComponentProps;\n\n    const background = getClientColor(clientId);\n\n    return withName ? (\n      <div\n        className=\"dropdown-menu-item dropdown-menu-item-base UserList__collaborator\"\n        onClick={() => updateData<Collaborator>(collaborator)}\n      >\n        <Avatar\n          color={background}\n          onClick={() => {}}\n          name={collaborator.username || \"\"}\n          src={collaborator.avatarUrl}\n          isBeingFollowed={isBeingFollowed}\n          isCurrentUser={collaborator.isCurrentUser === true}\n        />\n        <div className=\"UserList__collaborator-name\">\n          {collaborator.username}\n        </div>\n        <div\n          className=\"UserList__collaborator-follow-status-icon\"\n          style={{ visibility: isBeingFollowed ? \"visible\" : \"hidden\" }}\n          title={isBeingFollowed ? t(\"userList.hint.followStatus\") : undefined}\n          aria-hidden\n        >\n          {eyeIcon}\n        </div>\n      </div>\n    ) : (\n      <Avatar\n        color={background}\n        onClick={() => {\n          updateData(collaborator);\n        }}\n        name={collaborator.username || \"\"}\n        src={collaborator.avatarUrl}\n        isBeingFollowed={isBeingFollowed}\n        isCurrentUser={collaborator.isCurrentUser === true}\n      />\n    );\n  },\n});\n", "import { register } from \"./register\";\nimport { deepCopyElement } from \"../element/newElement\";\nimport { randomId } from \"../random\";\nimport { t } from \"../i18n\";\nimport { LIBRARY_DISABLED_TYPES } from \"../constants\";\n\nexport const actionAddToLibrary = register({\n  name: \"addToLibrary\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    for (const type of LIBRARY_DISABLED_TYPES) {\n      if (selectedElements.some((element) => element.type === type)) {\n        return {\n          commitToHistory: false,\n          appState: {\n            ...appState,\n            errorMessage: t(`errors.libraryElementTypeError.${type}`),\n          },\n        };\n      }\n    }\n\n    return app.library\n      .getLatestLibrary()\n      .then((items) => {\n        return app.library.setLibrary([\n          {\n            id: randomId(),\n            status: \"unpublished\",\n            elements: selectedElements.map(deepCopyElement),\n            created: Date.now(),\n          },\n          ...items,\n        ]);\n      })\n      .then(() => {\n        return {\n          commitToHistory: false,\n          appState: {\n            ...appState,\n            toast: { message: t(\"toast.addedToLibrary\") },\n          },\n        };\n      })\n      .catch((error) => {\n        return {\n          commitToHistory: false,\n          appState: {\n            ...appState,\n            errorMessage: error.message,\n          },\n        };\n      });\n  },\n  contextItemLabel: \"labels.addToLibrary\",\n});\n", "import { ElementsMap, ExcalidrawElement } from \"./element/types\";\nimport { newElementWith } from \"./element/mutateElement\";\nimport { BoundingBox, getCommonBoundingBox } from \"./element/bounds\";\nimport { getMaximumGroups } from \"./groups\";\n\nexport interface Alignment {\n  position: \"start\" | \"center\" | \"end\";\n  axis: \"x\" | \"y\";\n}\n\nexport const alignElements = (\n  selectedElements: ExcalidrawElement[],\n  elementsMap: ElementsMap,\n  alignment: Alignment,\n): ExcalidrawElement[] => {\n  const groups: ExcalidrawElement[][] = getMaximumGroups(\n    selectedElements,\n    elementsMap,\n  );\n  const selectionBoundingBox = getCommonBoundingBox(selectedElements);\n\n  return groups.flatMap((group) => {\n    const translation = calculateTranslation(\n      group,\n      selectionBoundingBox,\n      alignment,\n    );\n    return group.map((element) =>\n      newElementWith(element, {\n        x: element.x + translation.x,\n        y: element.y + translation.y,\n      }),\n    );\n  });\n};\n\nconst calculateTranslation = (\n  group: ExcalidrawElement[],\n  selectionBoundingBox: BoundingBox,\n  { axis, position }: Alignment,\n): { x: number; y: number } => {\n  const groupBoundingBox = getCommonBoundingBox(group);\n\n  const [min, max]: [\"minX\" | \"minY\", \"maxX\" | \"maxY\"] =\n    axis === \"x\" ? [\"minX\", \"maxX\"] : [\"minY\", \"maxY\"];\n\n  const noTranslation = { x: 0, y: 0 };\n  if (position === \"start\") {\n    return {\n      ...noTranslation,\n      [axis]: selectionBoundingBox[min] - groupBoundingBox[min],\n    };\n  } else if (position === \"end\") {\n    return {\n      ...noTranslation,\n      [axis]: selectionBoundingBox[max] - groupBoundingBox[max],\n    };\n  } // else if (position === \"center\") {\n  return {\n    ...noTranslation,\n    [axis]:\n      (selectionBoundingBox[min] + selectionBoundingBox[max]) / 2 -\n      (groupBoundingBox[min] + groupBoundingBox[max]) / 2,\n  };\n};\n", "import { alignElements, Alignment } from \"../align\";\nimport {\n  AlignBottomIcon,\n  AlignLeftIcon,\n  AlignRightIcon,\n  AlignTopIcon,\n  CenterHorizontallyIcon,\n  CenterVerticallyIcon,\n} from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { getNonDeletedElements } from \"../element\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { updateFrameMembershipOfSelectedElements } from \"../frame\";\nimport { t } from \"../i18n\";\nimport { KEYS } from \"../keys\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\n\nconst alignActionsPredicate = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  _: unknown,\n  app: AppClassProperties,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  return (\n    selectedElements.length > 1 &&\n    // TODO enable aligning frames when implemented properly\n    !selectedElements.some((el) => isFrameLikeElement(el))\n  );\n};\n\nconst alignSelectedElements = (\n  elements: readonly ExcalidrawElement[],\n  appState: Readonly<AppState>,\n  app: AppClassProperties,\n  alignment: Alignment,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  const elementsMap = arrayToMap(elements);\n\n  const updatedElements = alignElements(\n    selectedElements,\n    elementsMap,\n    alignment,\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return updateFrameMembershipOfSelectedElements(\n    elements.map((element) => updatedElementsMap.get(element.id) || element),\n    appState,\n    app,\n  );\n};\n\nexport const actionAlignTop = register({\n  name: \"alignTop\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"start\",\n        axis: \"y\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_UP,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={AlignTopIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignTop\")} \u2014 ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Up\",\n      )}`}\n      aria-label={t(\"labels.alignTop\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignBottom = register({\n  name: \"alignBottom\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"end\",\n        axis: \"y\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_DOWN,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={AlignBottomIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignBottom\")} \u2014 ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Down\",\n      )}`}\n      aria-label={t(\"labels.alignBottom\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignLeft = register({\n  name: \"alignLeft\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"start\",\n        axis: \"x\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_LEFT,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={AlignLeftIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignLeft\")} \u2014 ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Left\",\n      )}`}\n      aria-label={t(\"labels.alignLeft\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignRight = register({\n  name: \"alignRight\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"end\",\n        axis: \"x\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] && event.shiftKey && event.key === KEYS.ARROW_RIGHT,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={AlignRightIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.alignRight\")} \u2014 ${getShortcutKey(\n        \"CtrlOrCmd+Shift+Right\",\n      )}`}\n      aria-label={t(\"labels.alignRight\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignVerticallyCentered = register({\n  name: \"alignVerticallyCentered\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"center\",\n        axis: \"y\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={CenterVerticallyIcon}\n      onClick={() => updateData(null)}\n      title={t(\"labels.centerVertically\")}\n      aria-label={t(\"labels.centerVertically\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const actionAlignHorizontallyCentered = register({\n  name: \"alignHorizontallyCentered\",\n  trackEvent: { category: \"element\" },\n  predicate: alignActionsPredicate,\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: alignSelectedElements(elements, appState, app, {\n        position: \"center\",\n        axis: \"x\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!alignActionsPredicate(elements, appState, null, app)}\n      type=\"button\"\n      icon={CenterHorizontallyIcon}\n      onClick={() => updateData(null)}\n      title={t(\"labels.centerHorizontally\")}\n      aria-label={t(\"labels.centerHorizontally\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n", "import { newElementWith } from \"./element/mutateElement\";\nimport { getMaximumGroups } from \"./groups\";\nimport { getCommonBoundingBox } from \"./element/bounds\";\nimport type { ElementsMap, ExcalidrawElement } from \"./element/types\";\n\nexport interface Distribution {\n  space: \"between\";\n  axis: \"x\" | \"y\";\n}\n\nexport const distributeElements = (\n  selectedElements: ExcalidrawElement[],\n  elementsMap: ElementsMap,\n  distribution: Distribution,\n): ExcalidrawElement[] => {\n  const [start, mid, end, extent] =\n    distribution.axis === \"x\"\n      ? ([\"minX\", \"midX\", \"maxX\", \"width\"] as const)\n      : ([\"minY\", \"midY\", \"maxY\", \"height\"] as const);\n\n  const bounds = getCommonBoundingBox(selectedElements);\n  const groups = getMaximumGroups(selectedElements, elementsMap)\n    .map((group) => [group, getCommonBoundingBox(group)] as const)\n    .sort((a, b) => a[1][mid] - b[1][mid]);\n\n  let span = 0;\n  for (const group of groups) {\n    span += group[1][extent];\n  }\n\n  const step = (bounds[extent] - span) / (groups.length - 1);\n\n  if (step < 0) {\n    // If we have a negative step, we'll need to distribute from centers\n    // rather than from gaps. Buckle up, this is a weird one.\n\n    // Get indices of boxes that define start and end of our bounding box\n    const index0 = groups.findIndex((g) => g[1][start] === bounds[start]);\n    const index1 = groups.findIndex((g) => g[1][end] === bounds[end]);\n\n    // Get our step, based on the distance between the center points of our\n    // start and end boxes\n    const step =\n      (groups[index1][1][mid] - groups[index0][1][mid]) / (groups.length - 1);\n\n    let pos = groups[index0][1][mid];\n\n    return groups.flatMap(([group, box], index) => {\n      const translation = {\n        x: 0,\n        y: 0,\n      };\n\n      // Don't move our start and end boxes\n      if (index !== index0 && index !== index1) {\n        pos += step;\n        translation[distribution.axis] = pos - box[mid];\n      }\n\n      return group.map((element) =>\n        newElementWith(element, {\n          x: element.x + translation.x,\n          y: element.y + translation.y,\n        }),\n      );\n    });\n  }\n\n  // Distribute from gaps\n\n  let pos = bounds[start];\n\n  return groups.flatMap(([group, box]) => {\n    const translation = {\n      x: 0,\n      y: 0,\n    };\n\n    translation[distribution.axis] = pos - box[start];\n\n    pos += step;\n    pos += box[extent];\n\n    return group.map((element) =>\n      newElementWith(element, {\n        x: element.x + translation.x,\n        y: element.y + translation.y,\n      }),\n    );\n  });\n};\n", "import {\n  DistributeHorizontallyIcon,\n  DistributeVerticallyIcon,\n} from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { distributeElements, Distribution } from \"../distribute\";\nimport { getNonDeletedElements } from \"../element\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { updateFrameMembershipOfSelectedElements } from \"../frame\";\nimport { t } from \"../i18n\";\nimport { CODES, KEYS } from \"../keys\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\n\nconst enableActionGroup = (appState: AppState, app: AppClassProperties) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  return (\n    selectedElements.length > 1 &&\n    // TODO enable distributing frames when implemented properly\n    !selectedElements.some((el) => isFrameLikeElement(el))\n  );\n};\n\nconst distributeSelectedElements = (\n  elements: readonly ExcalidrawElement[],\n  appState: Readonly<AppState>,\n  app: AppClassProperties,\n  distribution: Distribution,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  const updatedElements = distributeElements(\n    selectedElements,\n    app.scene.getNonDeletedElementsMap(),\n    distribution,\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return updateFrameMembershipOfSelectedElements(\n    elements.map((element) => updatedElementsMap.get(element.id) || element),\n    appState,\n    app,\n  );\n};\n\nexport const distributeHorizontally = register({\n  name: \"distributeHorizontally\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"x\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.H,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeHorizontallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeHorizontally\")} \u2014 ${getShortcutKey(\n        \"Alt+H\",\n      )}`}\n      aria-label={t(\"labels.distributeHorizontally\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const distributeVertically = register({\n  name: \"distributeVertically\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"y\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.V,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeVerticallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeVertically\")} \u2014 ${getShortcutKey(\"Alt+V\")}`}\n      aria-label={t(\"labels.distributeVertically\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n", "import { register } from \"./register\";\nimport { getSelectedElements } from \"../scene\";\nimport { getNonDeletedElements } from \"../element\";\nimport {\n  ExcalidrawElement,\n  NonDeleted,\n  NonDeletedSceneElementsMap,\n} from \"../element/types\";\nimport { resizeMultipleElements } from \"../element/resizeElements\";\nimport { AppState } from \"../types\";\nimport { arrayToMap } from \"../utils\";\nimport { CODES, KEYS } from \"../keys\";\nimport { getCommonBoundingBox } from \"../element/bounds\";\nimport {\n  bindOrUnbindSelectedElements,\n  isBindingEnabled,\n  unbindLinearElements,\n} from \"../element/binding\";\nimport { updateFrameMembershipOfSelectedElements } from \"../frame\";\n\nexport const actionFlipHorizontal = register({\n  name: \"flipHorizontal\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      elements: updateFrameMembershipOfSelectedElements(\n        flipSelectedElements(\n          elements,\n          app.scene.getNonDeletedElementsMap(),\n          appState,\n          \"horizontal\",\n        ),\n        appState,\n        app,\n      ),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) => event.shiftKey && event.code === CODES.H,\n  contextItemLabel: \"labels.flipHorizontal\",\n});\n\nexport const actionFlipVertical = register({\n  name: \"flipVertical\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      elements: updateFrameMembershipOfSelectedElements(\n        flipSelectedElements(\n          elements,\n          app.scene.getNonDeletedElementsMap(),\n          appState,\n          \"vertical\",\n        ),\n        appState,\n        app,\n      ),\n      appState,\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    event.shiftKey && event.code === CODES.V && !event[KEYS.CTRL_OR_CMD],\n  contextItemLabel: \"labels.flipVertical\",\n});\n\nconst flipSelectedElements = (\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n  appState: Readonly<AppState>,\n  flipDirection: \"horizontal\" | \"vertical\",\n) => {\n  const selectedElements = getSelectedElements(\n    getNonDeletedElements(elements),\n    appState,\n    {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    },\n  );\n\n  const updatedElements = flipElements(\n    selectedElements,\n    elements,\n    elementsMap,\n    appState,\n    flipDirection,\n  );\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return elements.map(\n    (element) => updatedElementsMap.get(element.id) || element,\n  );\n};\n\nconst flipElements = (\n  selectedElements: NonDeleted<ExcalidrawElement>[],\n  elements: readonly ExcalidrawElement[],\n  elementsMap: NonDeletedSceneElementsMap,\n  appState: AppState,\n  flipDirection: \"horizontal\" | \"vertical\",\n): ExcalidrawElement[] => {\n  const { minX, minY, maxX, maxY } = getCommonBoundingBox(selectedElements);\n\n  resizeMultipleElements(\n    elementsMap,\n    selectedElements,\n    elementsMap,\n    \"nw\",\n    true,\n    flipDirection === \"horizontal\" ? maxX : minX,\n    flipDirection === \"horizontal\" ? minY : maxY,\n  );\n\n  isBindingEnabled(appState)\n    ? bindOrUnbindSelectedElements(selectedElements, elements, elementsMap)\n    : unbindLinearElements(selectedElements, elementsMap);\n\n  return selectedElements;\n};\n", "import { CODES, KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport {\n  copyTextToSystemClipboard,\n  copyToClipboard,\n  createPasteEvent,\n  probablySupportsClipboardBlob,\n  probablySupportsClipboardWriteText,\n  readSystemClipboard,\n} from \"../clipboard\";\nimport { actionDeleteSelected } from \"./actionDeleteSelected\";\nimport { exportCanvas, prepareElementsForExport } from \"../data/index\";\nimport { isTextElement } from \"../element\";\nimport { t } from \"../i18n\";\nimport { isFirefox } from \"../constants\";\n\nexport const actionCopy = register({\n  name: \"copy\",\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, event: ClipboardEvent | null, app) => {\n    const elementsToCopy = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    try {\n      await copyToClipboard(elementsToCopy, app.files, event);\n    } catch (error: any) {\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          errorMessage: error.message,\n        },\n      };\n    }\n\n    return {\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.copy\",\n  // don't supply a shortcut since we handle this conditionally via onCopy event\n  keyTest: undefined,\n});\n\nexport const actionPaste = register({\n  name: \"paste\",\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, data, app) => {\n    let types;\n    try {\n      types = await readSystemClipboard();\n    } catch (error: any) {\n      if (error.name === \"AbortError\" || error.name === \"NotAllowedError\") {\n        // user probably aborted the action. Though not 100% sure, it's best\n        // to not annoy them with an error message.\n        return false;\n      }\n\n      console.error(`actionPaste ${error.name}: ${error.message}`);\n\n      if (isFirefox) {\n        return {\n          commitToHistory: false,\n          appState: {\n            ...appState,\n            errorMessage: t(\"hints.firefox_clipboard_write\"),\n          },\n        };\n      }\n\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          errorMessage: t(\"errors.asyncPasteFailedOnRead\"),\n        },\n      };\n    }\n\n    try {\n      app.pasteFromClipboard(createPasteEvent({ types }));\n    } catch (error: any) {\n      console.error(error);\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          errorMessage: t(\"errors.asyncPasteFailedOnParse\"),\n        },\n      };\n    }\n\n    return {\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.paste\",\n  // don't supply a shortcut since we handle this conditionally via onCopy event\n  keyTest: undefined,\n});\n\nexport const actionCut = register({\n  name: \"cut\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, event: ClipboardEvent | null, app) => {\n    actionCopy.perform(elements, appState, event, app);\n    return actionDeleteSelected.perform(elements, appState, null, app);\n  },\n  contextItemLabel: \"labels.cut\",\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.X,\n});\n\nexport const actionCopyAsSvg = register({\n  name: \"copyAsSvg\",\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, _data, app) => {\n    if (!app.canvas) {\n      return {\n        commitToHistory: false,\n      };\n    }\n\n    const { exportedElements, exportingFrame } = prepareElementsForExport(\n      elements,\n      appState,\n      true,\n    );\n\n    try {\n      await exportCanvas(\n        \"clipboard-svg\",\n        exportedElements,\n        appState,\n        app.files,\n        {\n          ...appState,\n          exportingFrame,\n          name: app.getName(),\n        },\n      );\n      return {\n        commitToHistory: false,\n      };\n    } catch (error: any) {\n      console.error(error);\n      return {\n        appState: {\n          ...appState,\n          errorMessage: error.message,\n        },\n        commitToHistory: false,\n      };\n    }\n  },\n  predicate: (elements) => {\n    return probablySupportsClipboardWriteText && elements.length > 0;\n  },\n  contextItemLabel: \"labels.copyAsSvg\",\n});\n\nexport const actionCopyAsPng = register({\n  name: \"copyAsPng\",\n  trackEvent: { category: \"element\" },\n  perform: async (elements, appState, _data, app) => {\n    if (!app.canvas) {\n      return {\n        commitToHistory: false,\n      };\n    }\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    const { exportedElements, exportingFrame } = prepareElementsForExport(\n      elements,\n      appState,\n      true,\n    );\n    try {\n      await exportCanvas(\"clipboard\", exportedElements, appState, app.files, {\n        ...appState,\n        exportingFrame,\n        name: app.getName(),\n      });\n      return {\n        appState: {\n          ...appState,\n          toast: {\n            message: t(\"toast.copyToClipboardAsPng\", {\n              exportSelection: selectedElements.length\n                ? t(\"toast.selection\")\n                : t(\"toast.canvas\"),\n              exportColorScheme: appState.exportWithDarkMode\n                ? t(\"buttons.darkMode\")\n                : t(\"buttons.lightMode\"),\n            }),\n          },\n        },\n        commitToHistory: false,\n      };\n    } catch (error: any) {\n      console.error(error);\n      return {\n        appState: {\n          ...appState,\n          errorMessage: error.message,\n        },\n        commitToHistory: false,\n      };\n    }\n  },\n  predicate: (elements) => {\n    return probablySupportsClipboardBlob && elements.length > 0;\n  },\n  contextItemLabel: \"labels.copyAsPng\",\n  keyTest: (event) => event.code === CODES.C && event.altKey && event.shiftKey,\n});\n\nexport const copyText = register({\n  name: \"copyText\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    });\n\n    const text = selectedElements\n      .reduce((acc: string[], element) => {\n        if (isTextElement(element)) {\n          acc.push(element.text);\n        }\n        return acc;\n      }, [])\n      .join(\"\\n\\n\");\n    copyTextToSystemClipboard(text);\n    return {\n      commitToHistory: false,\n    };\n  },\n  predicate: (elements, appState, _, app) => {\n    return (\n      probablySupportsClipboardWriteText &&\n      app.scene\n        .getSelectedElements({\n          selectedElementIds: appState.selectedElementIds,\n          includeBoundTextElement: true,\n        })\n        .some(isTextElement)\n    );\n  },\n  contextItemLabel: \"labels.copyText\",\n});\n", "import { CODES, KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { GRID_SIZE } from \"../constants\";\nimport { AppState } from \"../types\";\n\nexport const actionToggleGridMode = register({\n  name: \"gridMode\",\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.gridSize,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        gridSize: this.checked!(appState) ? null : GRID_SIZE,\n        objectsSnapModeEnabled: false,\n      },\n      commitToHistory: false,\n    };\n  },\n  checked: (appState: AppState) => appState.gridSize !== null,\n  predicate: (element, appState, props) => {\n    return typeof props.gridModeEnabled === \"undefined\";\n  },\n  contextItemLabel: \"labels.showGrid\",\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.code === CODES.QUOTE,\n});\n", "import { CODES, KEYS } from \"../keys\";\nimport { register } from \"./register\";\n\nexport const actionToggleZenMode = register({\n  name: \"zenMode\",\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.zenModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        zenModeEnabled: !this.checked!(appState),\n      },\n      commitToHistory: false,\n    };\n  },\n  checked: (appState) => appState.zenModeEnabled,\n  predicate: (elements, appState, appProps) => {\n    return typeof appProps.zenModeEnabled === \"undefined\";\n  },\n  contextItemLabel: \"buttons.zenMode\",\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.Z,\n});\n", "import { CODES, KEYS } from \"../keys\";\nimport { register } from \"./register\";\n\nexport const actionToggleObjectsSnapMode = register({\n  name: \"objectsSnapMode\",\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.objectsSnapModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        objectsSnapModeEnabled: !this.checked!(appState),\n        gridSize: null,\n      },\n      commitToHistory: false,\n    };\n  },\n  checked: (appState) => appState.objectsSnapModeEnabled,\n  predicate: (elements, appState, appProps) => {\n    return typeof appProps.objectsSnapModeEnabled === \"undefined\";\n  },\n  contextItemLabel: \"buttons.objectsSnapMode\",\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.S,\n});\n", "import { register } from \"./register\";\nimport { CODES, KEYS } from \"../keys\";\n\nexport const actionToggleStats = register({\n  name: \"stats\",\n  viewMode: true,\n  trackEvent: { category: \"menu\" },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        showStats: !this.checked!(appState),\n      },\n      commitToHistory: false,\n    };\n  },\n  checked: (appState) => appState.showStats,\n  contextItemLabel: \"stats.title\",\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.SLASH,\n});\n", "import {\n  BOUND_TEXT_PADDING,\n  ROUNDNESS,\n  VERTICAL_ALIGN,\n  TEXT_ALIGN,\n} from \"../constants\";\nimport { isTextElement, newElement } from \"../element\";\nimport { mutateElement } from \"../element/mutateElement\";\nimport {\n  computeBoundTextPosition,\n  computeContainerDimensionForBoundText,\n  getBoundTextElement,\n  measureText,\n  redrawTextBoundingBox,\n} from \"../element/textElement\";\nimport {\n  getOriginalContainerHeightFromCache,\n  resetOriginalContainerCache,\n  updateOriginalContainerCache,\n} from \"../element/containerCache\";\nimport {\n  hasBoundTextElement,\n  isTextBindableContainer,\n  isUsingAdaptiveRadius,\n} from \"../element/typeChecks\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  ExcalidrawTextContainer,\n  ExcalidrawTextElement,\n} from \"../element/types\";\nimport { AppState } from \"../types\";\nimport { Mutable } from \"../utility-types\";\nimport { getFontString } from \"../utils\";\nimport { register } from \"./register\";\n\nexport const actionUnbindText = register({\n  name: \"unbindText\",\n  contextItemLabel: \"labels.unbindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    return selectedElements.some((element) => hasBoundTextElement(element));\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    selectedElements.forEach((element) => {\n      const boundTextElement = getBoundTextElement(element, elementsMap);\n      if (boundTextElement) {\n        const { width, height, baseline } = measureText(\n          boundTextElement.originalText,\n          getFontString(boundTextElement),\n          boundTextElement.lineHeight,\n        );\n        const originalContainerHeight = getOriginalContainerHeightFromCache(\n          element.id,\n        );\n        resetOriginalContainerCache(element.id);\n        const { x, y } = computeBoundTextPosition(\n          element,\n          boundTextElement,\n          elementsMap,\n        );\n        mutateElement(boundTextElement as ExcalidrawTextElement, {\n          containerId: null,\n          width,\n          height,\n          baseline,\n          text: boundTextElement.originalText,\n          x,\n          y,\n        });\n        mutateElement(element, {\n          boundElements: element.boundElements?.filter(\n            (ele) => ele.id !== boundTextElement.id,\n          ),\n          height: originalContainerHeight\n            ? originalContainerHeight\n            : element.height,\n        });\n      }\n    });\n    return {\n      elements,\n      appState,\n      commitToHistory: true,\n    };\n  },\n});\n\nexport const actionBindText = register({\n  name: \"bindText\",\n  contextItemLabel: \"labels.bindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    if (selectedElements.length === 2) {\n      const textElement =\n        isTextElement(selectedElements[0]) ||\n        isTextElement(selectedElements[1]);\n\n      let bindingContainer;\n      if (isTextBindableContainer(selectedElements[0])) {\n        bindingContainer = selectedElements[0];\n      } else if (isTextBindableContainer(selectedElements[1])) {\n        bindingContainer = selectedElements[1];\n      }\n      if (\n        textElement &&\n        bindingContainer &&\n        getBoundTextElement(\n          bindingContainer,\n          app.scene.getNonDeletedElementsMap(),\n        ) === null\n      ) {\n        return true;\n      }\n    }\n    return false;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    let textElement: ExcalidrawTextElement;\n    let container: ExcalidrawTextContainer;\n\n    if (\n      isTextElement(selectedElements[0]) &&\n      isTextBindableContainer(selectedElements[1])\n    ) {\n      textElement = selectedElements[0];\n      container = selectedElements[1];\n    } else {\n      textElement = selectedElements[1] as ExcalidrawTextElement;\n      container = selectedElements[0] as ExcalidrawTextContainer;\n    }\n    mutateElement(textElement, {\n      containerId: container.id,\n      verticalAlign: VERTICAL_ALIGN.MIDDLE,\n      textAlign: TEXT_ALIGN.CENTER,\n    });\n    mutateElement(container, {\n      boundElements: (container.boundElements || []).concat({\n        type: \"text\",\n        id: textElement.id,\n      }),\n    });\n    const originalContainerHeight = container.height;\n    redrawTextBoundingBox(\n      textElement,\n      container,\n      app.scene.getNonDeletedElementsMap(),\n    );\n    // overwritting the cache with original container height so\n    // it can be restored when unbind\n    updateOriginalContainerCache(container.id, originalContainerHeight);\n\n    return {\n      elements: pushTextAboveContainer(elements, container, textElement),\n      appState: { ...appState, selectedElementIds: { [container.id]: true } },\n      commitToHistory: true,\n    };\n  },\n});\n\nconst pushTextAboveContainer = (\n  elements: readonly ExcalidrawElement[],\n  container: ExcalidrawElement,\n  textElement: ExcalidrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 1);\n\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex + 1, 0, textElement);\n  return updatedElements;\n};\n\nconst pushContainerBelowText = (\n  elements: readonly ExcalidrawElement[],\n  container: ExcalidrawElement,\n  textElement: ExcalidrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex, 1);\n\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 0, container);\n  return updatedElements;\n};\n\nexport const actionWrapTextInContainer = register({\n  name: \"wrapTextInContainer\",\n  contextItemLabel: \"labels.createContainerFromText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const areTextElements = selectedElements.every((el) => isTextElement(el));\n    return selectedElements.length > 0 && areTextElements;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    let updatedElements: readonly ExcalidrawElement[] = elements.slice();\n    const containerIds: Mutable<AppState[\"selectedElementIds\"]> = {};\n\n    for (const textElement of selectedElements) {\n      if (isTextElement(textElement)) {\n        const container = newElement({\n          type: \"rectangle\",\n          backgroundColor: appState.currentItemBackgroundColor,\n          boundElements: [\n            ...(textElement.boundElements || []),\n            { id: textElement.id, type: \"text\" },\n          ],\n          angle: textElement.angle,\n          fillStyle: appState.currentItemFillStyle,\n          strokeColor: appState.currentItemStrokeColor,\n          roughness: appState.currentItemRoughness,\n          strokeWidth: appState.currentItemStrokeWidth,\n          strokeStyle: appState.currentItemStrokeStyle,\n          roundness:\n            appState.currentItemRoundness === \"round\"\n              ? {\n                  type: isUsingAdaptiveRadius(\"rectangle\")\n                    ? ROUNDNESS.ADAPTIVE_RADIUS\n                    : ROUNDNESS.PROPORTIONAL_RADIUS,\n                }\n              : null,\n          opacity: 100,\n          locked: false,\n          x: textElement.x - BOUND_TEXT_PADDING,\n          y: textElement.y - BOUND_TEXT_PADDING,\n          width: computeContainerDimensionForBoundText(\n            textElement.width,\n            \"rectangle\",\n          ),\n          height: computeContainerDimensionForBoundText(\n            textElement.height,\n            \"rectangle\",\n          ),\n          groupIds: textElement.groupIds,\n          frameId: textElement.frameId,\n        });\n\n        // update bindings\n        if (textElement.boundElements?.length) {\n          const linearElementIds = textElement.boundElements\n            .filter((ele) => ele.type === \"arrow\")\n            .map((el) => el.id);\n          const linearElements = updatedElements.filter((ele) =>\n            linearElementIds.includes(ele.id),\n          ) as ExcalidrawLinearElement[];\n          linearElements.forEach((ele) => {\n            let startBinding = ele.startBinding;\n            let endBinding = ele.endBinding;\n\n            if (startBinding?.elementId === textElement.id) {\n              startBinding = {\n                ...startBinding,\n                elementId: container.id,\n              };\n            }\n\n            if (endBinding?.elementId === textElement.id) {\n              endBinding = { ...endBinding, elementId: container.id };\n            }\n\n            if (startBinding || endBinding) {\n              mutateElement(ele, { startBinding, endBinding }, false);\n            }\n          });\n        }\n\n        mutateElement(\n          textElement,\n          {\n            containerId: container.id,\n            verticalAlign: VERTICAL_ALIGN.MIDDLE,\n            boundElements: null,\n            textAlign: TEXT_ALIGN.CENTER,\n          },\n          false,\n        );\n        redrawTextBoundingBox(\n          textElement,\n          container,\n          app.scene.getNonDeletedElementsMap(),\n        );\n\n        updatedElements = pushContainerBelowText(\n          [...updatedElements, container],\n          container,\n          textElement,\n        );\n        containerIds[container.id] = true;\n      }\n    }\n\n    return {\n      elements: updatedElements,\n      appState: {\n        ...appState,\n        selectedElementIds: containerIds,\n      },\n      commitToHistory: true,\n    };\n  },\n});\n", "import { newElementWith } from \"../element/mutateElement\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { KEYS } from \"../keys\";\nimport { arrayToMap } from \"../utils\";\nimport { register } from \"./register\";\n\nconst shouldLock = (elements: readonly ExcalidrawElement[]) =>\n  elements.every((el) => !el.locked);\n\nexport const actionToggleElementLock = register({\n  name: \"toggleElementLock\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    return !selectedElements.some(\n      (element) => element.locked && element.frameId,\n    );\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n\n    if (!selectedElements.length) {\n      return false;\n    }\n\n    const nextLockState = shouldLock(selectedElements);\n    const selectedElementsMap = arrayToMap(selectedElements);\n    return {\n      elements: elements.map((element) => {\n        if (!selectedElementsMap.has(element.id)) {\n          return element;\n        }\n\n        return newElementWith(element, { locked: nextLockState });\n      }),\n      appState: {\n        ...appState,\n        selectedLinearElement: nextLockState\n          ? null\n          : appState.selectedLinearElement,\n      },\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: (elements, appState, app) => {\n    const selected = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: false,\n    });\n    if (selected.length === 1 && !isFrameLikeElement(selected[0])) {\n      return selected[0].locked\n        ? \"labels.elementLock.unlock\"\n        : \"labels.elementLock.lock\";\n    }\n\n    return shouldLock(selected)\n      ? \"labels.elementLock.lockAll\"\n      : \"labels.elementLock.unlockAll\";\n  },\n  keyTest: (event, appState, elements, app) => {\n    return (\n      event.key.toLocaleLowerCase() === KEYS.L &&\n      event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      app.scene.getSelectedElements({\n        selectedElementIds: appState.selectedElementIds,\n        includeBoundTextElement: false,\n      }).length > 0\n    );\n  },\n});\n\nexport const actionUnlockAllElements = register({\n  name: \"unlockAllElements\",\n  trackEvent: { category: \"canvas\" },\n  viewMode: false,\n  predicate: (elements) => {\n    return elements.some((element) => element.locked);\n  },\n  perform: (elements, appState) => {\n    const lockedElements = elements.filter((el) => el.locked);\n\n    return {\n      elements: elements.map((element) => {\n        if (element.locked) {\n          return newElementWith(element, { locked: false });\n        }\n        return element;\n      }),\n      appState: {\n        ...appState,\n        selectedElementIds: Object.fromEntries(\n          lockedElements.map((el) => [el.id, true]),\n        ),\n      },\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.elementLock.unlockAll\",\n});\n", "import { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { isLinearElement } from \"../element/typeChecks\";\nimport { ExcalidrawLinearElement } from \"../element/types\";\nimport { register } from \"./register\";\n\nexport const actionToggleLinearEditor = register({\n  name: \"toggleLinearEditor\",\n  trackEvent: {\n    category: \"element\",\n  },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    if (selectedElements.length === 1 && isLinearElement(selectedElements[0])) {\n      return true;\n    }\n    return false;\n  },\n  perform(elements, appState, _, app) {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    })[0] as ExcalidrawLinearElement;\n\n    const editingLinearElement =\n      appState.editingLinearElement?.elementId === selectedElement.id\n        ? null\n        : new LinearElementEditor(selectedElement);\n    return {\n      appState: {\n        ...appState,\n        editingLinearElement,\n      },\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: (elements, appState, app) => {\n    const selectedElement = app.scene.getSelectedElements({\n      selectedElementIds: appState.selectedElementIds,\n      includeBoundTextElement: true,\n    })[0] as ExcalidrawLinearElement;\n    return appState.editingLinearElement?.elementId === selectedElement.id\n      ? \"labels.lineEditor.exit\"\n      : \"labels.lineEditor.edit\";\n  },\n});\n", "export { actionDeleteSelected } from \"./actionDeleteSelected\";\nexport {\n  actionBringForward,\n  actionBringToFront,\n  actionSendBackward,\n  actionSendToBack,\n} from \"./actionZindex\";\nexport { actionSelectAll } from \"./actionSelectAll\";\nexport { actionDuplicateSelection } from \"./actionDuplicateSelection\";\nexport {\n  actionChangeStrokeColor,\n  actionChangeBackgroundColor,\n  actionChangeStrokeWidth,\n  actionChangeFillStyle,\n  actionChangeSloppiness,\n  actionChangeOpacity,\n  actionChangeFontSize,\n  actionChangeFontFamily,\n  actionChangeTextAlign,\n  actionChangeVerticalAlign,\n} from \"./actionProperties\";\n\nexport {\n  actionChangeViewBackgroundColor,\n  actionClearCanvas,\n  actionZoomIn,\n  actionZoomOut,\n  actionResetZoom,\n  actionZoomToFit,\n  actionToggleTheme,\n} from \"./actionCanvas\";\n\nexport { actionFinalize } from \"./actionFinalize\";\n\nexport {\n  actionChangeProjectName,\n  actionChangeExportBackground,\n  actionSaveToActiveFile,\n  actionSaveFileToDisk,\n  actionLoadScene,\n} from \"./actionExport\";\n\nexport { actionCopyStyles, actionPasteStyles } from \"./actionStyles\";\nexport {\n  actionToggleCanvasMenu,\n  actionToggleEditMenu,\n  actionShortcuts,\n} from \"./actionMenu\";\n\nexport { actionGroup, actionUngroup } from \"./actionGroup\";\n\nexport { actionGoToCollaborator } from \"./actionNavigate\";\n\nexport { actionAddToLibrary } from \"./actionAddToLibrary\";\n\nexport {\n  actionAlignTop,\n  actionAlignBottom,\n  actionAlignLeft,\n  actionAlignRight,\n  actionAlignVerticallyCentered,\n  actionAlignHorizontallyCentered,\n} from \"./actionAlign\";\n\nexport {\n  distributeHorizontally,\n  distributeVertically,\n} from \"./actionDistribute\";\n\nexport { actionFlipHorizontal, actionFlipVertical } from \"./actionFlip\";\n\nexport {\n  actionCopy,\n  actionCut,\n  actionCopyAsPng,\n  actionCopyAsSvg,\n  copyText,\n} from \"./actionClipboard\";\n\nexport { actionToggleGridMode } from \"./actionToggleGridMode\";\nexport { actionToggleZenMode } from \"./actionToggleZenMode\";\nexport { actionToggleObjectsSnapMode } from \"./actionToggleObjectsSnapMode\";\n\nexport { actionToggleStats } from \"./actionToggleStats\";\nexport { actionUnbindText, actionBindText } from \"./actionBoundText\";\nexport { actionLink } from \"../element/Hyperlink\";\nexport { actionToggleElementLock } from \"./actionElementLock\";\nexport { actionToggleLinearEditor } from \"./actionLinearEditor\";\n", "import { Action, ActionResult } from \"./types\";\nimport { UndoIcon, RedoIcon } from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { t } from \"../i18n\";\nimport History, { HistoryEntry } from \"../history\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { AppState } from \"../types\";\nimport { KEYS } from \"../keys\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport { fixBindingsAfterDeletion } from \"../element/binding\";\nimport { arrayToMap } from \"../utils\";\nimport { isWindows } from \"../constants\";\n\nconst writeData = (\n  prevElements: readonly ExcalidrawElement[],\n  appState: AppState,\n  updater: () => HistoryEntry | null,\n): ActionResult => {\n  const commitToHistory = false;\n  if (\n    !appState.multiElement &&\n    !appState.resizingElement &&\n    !appState.editingElement &&\n    !appState.draggingElement\n  ) {\n    const data = updater();\n    if (data === null) {\n      return { commitToHistory };\n    }\n\n    const prevElementMap = arrayToMap(prevElements);\n    const nextElements = data.elements;\n    const nextElementMap = arrayToMap(nextElements);\n\n    const deletedElements = prevElements.filter(\n      (prevElement) => !nextElementMap.has(prevElement.id),\n    );\n    const elements = nextElements\n      .map((nextElement) =>\n        newElementWith(\n          prevElementMap.get(nextElement.id) || nextElement,\n          nextElement,\n        ),\n      )\n      .concat(\n        deletedElements.map((prevElement) =>\n          newElementWith(prevElement, { isDeleted: true }),\n        ),\n      );\n    fixBindingsAfterDeletion(elements, deletedElements);\n\n    return {\n      elements,\n      appState: { ...appState, ...data.appState },\n      commitToHistory,\n      syncHistory: true,\n    };\n  }\n  return { commitToHistory };\n};\n\ntype ActionCreator = (history: History) => Action;\n\nexport const createUndoAction: ActionCreator = (history) => ({\n  name: \"undo\",\n  trackEvent: { category: \"history\" },\n  perform: (elements, appState) =>\n    writeData(elements, appState, () => history.undoOnce()),\n  keyTest: (event) =>\n    event[KEYS.CTRL_OR_CMD] &&\n    event.key.toLowerCase() === KEYS.Z &&\n    !event.shiftKey,\n  PanelComponent: ({ updateData, data }) => (\n    <ToolButton\n      type=\"button\"\n      icon={UndoIcon}\n      aria-label={t(\"buttons.undo\")}\n      onClick={updateData}\n      size={data?.size || \"medium\"}\n    />\n  ),\n  commitToHistory: () => false,\n});\n\nexport const createRedoAction: ActionCreator = (history) => ({\n  name: \"redo\",\n  trackEvent: { category: \"history\" },\n  perform: (elements, appState) =>\n    writeData(elements, appState, () => history.redoOnce()),\n  keyTest: (event) =>\n    (event[KEYS.CTRL_OR_CMD] &&\n      event.shiftKey &&\n      event.key.toLowerCase() === KEYS.Z) ||\n    (isWindows && event.ctrlKey && !event.shiftKey && event.key === KEYS.Y),\n  PanelComponent: ({ updateData, data }) => (\n    <ToolButton\n      type=\"button\"\n      icon={RedoIcon}\n      aria-label={t(\"buttons.redo\")}\n      onClick={updateData}\n      size={data?.size || \"medium\"}\n    />\n  ),\n  commitToHistory: () => false,\n});\n", "import React from \"react\";\nimport {\n  Action,\n  UpdaterFn,\n  ActionName,\n  ActionResult,\n  PanelComponentProps,\n  ActionSource,\n} from \"./types\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { trackEvent } from \"../analytics\";\nimport { isPromiseLike } from \"../utils\";\n\nconst trackAction = (\n  action: Action,\n  source: ActionSource,\n  appState: Readonly<AppState>,\n  elements: readonly ExcalidrawElement[],\n  app: AppClassProperties,\n  value: any,\n) => {\n  if (action.trackEvent) {\n    try {\n      if (typeof action.trackEvent === \"object\") {\n        const shouldTrack = action.trackEvent.predicate\n          ? action.trackEvent.predicate(appState, elements, value)\n          : true;\n        if (shouldTrack) {\n          trackEvent(\n            action.trackEvent.category,\n            action.trackEvent.action || action.name,\n            `${source} (${app.device.editor.isMobile ? \"mobile\" : \"desktop\"})`,\n          );\n        }\n      }\n    } catch (error) {\n      console.error(\"error while logging action:\", error);\n    }\n  }\n};\n\nexport class ActionManager {\n  actions = {} as Record<ActionName, Action>;\n\n  updater: (actionResult: ActionResult | Promise<ActionResult>) => void;\n\n  getAppState: () => Readonly<AppState>;\n  getElementsIncludingDeleted: () => readonly ExcalidrawElement[];\n  app: AppClassProperties;\n\n  constructor(\n    updater: UpdaterFn,\n    getAppState: () => AppState,\n    getElementsIncludingDeleted: () => readonly ExcalidrawElement[],\n    app: AppClassProperties,\n  ) {\n    this.updater = (actionResult) => {\n      if (isPromiseLike(actionResult)) {\n        actionResult.then((actionResult) => {\n          return updater(actionResult);\n        });\n      } else {\n        return updater(actionResult);\n      }\n    };\n    this.getAppState = getAppState;\n    this.getElementsIncludingDeleted = getElementsIncludingDeleted;\n    this.app = app;\n  }\n\n  registerAction(action: Action) {\n    this.actions[action.name] = action;\n  }\n\n  registerAll(actions: readonly Action[]) {\n    actions.forEach((action) => this.registerAction(action));\n  }\n\n  handleKeyDown(event: React.KeyboardEvent | KeyboardEvent) {\n    const canvasActions = this.app.props.UIOptions.canvasActions;\n    const data = Object.values(this.actions)\n      .sort((a, b) => (b.keyPriority || 0) - (a.keyPriority || 0))\n      .filter(\n        (action) =>\n          (action.name in canvasActions\n            ? canvasActions[action.name as keyof typeof canvasActions]\n            : true) &&\n          action.keyTest &&\n          action.keyTest(\n            event,\n            this.getAppState(),\n            this.getElementsIncludingDeleted(),\n            this.app,\n          ),\n      );\n\n    if (data.length !== 1) {\n      if (data.length > 1) {\n        console.warn(\"Canceling as multiple actions match this shortcut\", data);\n      }\n      return false;\n    }\n\n    const action = data[0];\n\n    if (this.getAppState().viewModeEnabled && action.viewMode !== true) {\n      return false;\n    }\n\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n    const value = null;\n\n    trackAction(action, \"keyboard\", appState, elements, this.app, null);\n\n    event.preventDefault();\n    event.stopPropagation();\n    this.updater(data[0].perform(elements, appState, value, this.app));\n    return true;\n  }\n\n  executeAction<T extends Action>(\n    action: T,\n    source: ActionSource = \"api\",\n    value: Parameters<T[\"perform\"]>[2] = null,\n  ) {\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n\n    trackAction(action, source, appState, elements, this.app, value);\n\n    this.updater(action.perform(elements, appState, value, this.app));\n  }\n\n  /**\n   * @param data additional data sent to the PanelComponent\n   */\n  renderAction = (name: ActionName, data?: PanelComponentProps[\"data\"]) => {\n    const canvasActions = this.app.props.UIOptions.canvasActions;\n\n    if (\n      this.actions[name] &&\n      \"PanelComponent\" in this.actions[name] &&\n      (name in canvasActions\n        ? canvasActions[name as keyof typeof canvasActions]\n        : true)\n    ) {\n      const action = this.actions[name];\n      const PanelComponent = action.PanelComponent!;\n      PanelComponent.displayName = \"PanelComponent\";\n      const elements = this.getElementsIncludingDeleted();\n      const appState = this.getAppState();\n      const updateData = (formState?: any) => {\n        trackAction(action, \"ui\", appState, elements, this.app, formState);\n\n        this.updater(\n          action.perform(\n            this.getElementsIncludingDeleted(),\n            this.getAppState(),\n            formState,\n            this.app,\n          ),\n        );\n      };\n\n      return (\n        <PanelComponent\n          elements={this.getElementsIncludingDeleted()}\n          appState={this.getAppState()}\n          updateData={updateData}\n          appProps={this.app.props}\n          app={this.app}\n          data={data}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  isActionEnabled = (action: Action) => {\n    const elements = this.getElementsIncludingDeleted();\n    const appState = this.getAppState();\n\n    return (\n      !action.predicate ||\n      action.predicate(elements, appState, this.app.props, this.app)\n    );\n  };\n}\n", "import { PointerCoords } from \"./types\";\n\nexport const getCenter = (pointers: Map<number, PointerCoords>) => {\n  const allCoords = Array.from(pointers.values());\n  return {\n    x: sum(allCoords, (coords) => coords.x) / allCoords.length,\n    y: sum(allCoords, (coords) => coords.y) / allCoords.length,\n  };\n};\n\nexport const getDistance = ([a, b]: readonly PointerCoords[]) =>\n  Math.hypot(a.x - b.x, a.y - b.y);\n\nconst sum = <T>(array: readonly T[], mapper: (item: T) => number): number =>\n  array.reduce((acc, item) => acc + mapper(item), 0);\n", "import { AppState } from \"./types\";\nimport { ExcalidrawElement } from \"./element/types\";\nimport { isLinearElement } from \"./element/typeChecks\";\nimport { deepCopyElement } from \"./element/newElement\";\nimport { Mutable } from \"./utility-types\";\n\nexport interface HistoryEntry {\n  appState: ReturnType<typeof clearAppStatePropertiesForHistory>;\n  elements: ExcalidrawElement[];\n}\n\ninterface DehydratedExcalidrawElement {\n  id: string;\n  versionNonce: number;\n}\n\ninterface DehydratedHistoryEntry {\n  appState: string;\n  elements: DehydratedExcalidrawElement[];\n}\n\nconst clearAppStatePropertiesForHistory = (appState: AppState) => {\n  return {\n    selectedElementIds: appState.selectedElementIds,\n    selectedGroupIds: appState.selectedGroupIds,\n    viewBackgroundColor: appState.viewBackgroundColor,\n    editingLinearElement: appState.editingLinearElement,\n    editingGroupId: appState.editingGroupId,\n    name: appState.name,\n  };\n};\n\nclass History {\n  private elementCache = new Map<string, Map<number, ExcalidrawElement>>();\n  private recording: boolean = true;\n  private stateHistory: DehydratedHistoryEntry[] = [];\n  private redoStack: DehydratedHistoryEntry[] = [];\n  private lastEntry: HistoryEntry | null = null;\n\n  private hydrateHistoryEntry({\n    appState,\n    elements,\n  }: DehydratedHistoryEntry): HistoryEntry {\n    return {\n      appState: JSON.parse(appState),\n      elements: elements.map((dehydratedExcalidrawElement) => {\n        const element = this.elementCache\n          .get(dehydratedExcalidrawElement.id)\n          ?.get(dehydratedExcalidrawElement.versionNonce);\n        if (!element) {\n          throw new Error(\n            `Element not found: ${dehydratedExcalidrawElement.id}:${dehydratedExcalidrawElement.versionNonce}`,\n          );\n        }\n        return element;\n      }),\n    };\n  }\n\n  private dehydrateHistoryEntry({\n    appState,\n    elements,\n  }: HistoryEntry): DehydratedHistoryEntry {\n    return {\n      appState: JSON.stringify(appState),\n      elements: elements.map((element: ExcalidrawElement) => {\n        if (!this.elementCache.has(element.id)) {\n          this.elementCache.set(element.id, new Map());\n        }\n        const versions = this.elementCache.get(element.id)!;\n        if (!versions.has(element.versionNonce)) {\n          versions.set(element.versionNonce, deepCopyElement(element));\n        }\n        return {\n          id: element.id,\n          versionNonce: element.versionNonce,\n        };\n      }),\n    };\n  }\n\n  getSnapshotForTest() {\n    return {\n      recording: this.recording,\n      stateHistory: this.stateHistory.map((dehydratedHistoryEntry) =>\n        this.hydrateHistoryEntry(dehydratedHistoryEntry),\n      ),\n      redoStack: this.redoStack.map((dehydratedHistoryEntry) =>\n        this.hydrateHistoryEntry(dehydratedHistoryEntry),\n      ),\n    };\n  }\n\n  clear() {\n    this.stateHistory.length = 0;\n    this.redoStack.length = 0;\n    this.lastEntry = null;\n    this.elementCache.clear();\n  }\n\n  private generateEntry = (\n    appState: AppState,\n    elements: readonly ExcalidrawElement[],\n  ): DehydratedHistoryEntry =>\n    this.dehydrateHistoryEntry({\n      appState: clearAppStatePropertiesForHistory(appState),\n      elements: elements.reduce((elements, element) => {\n        if (\n          isLinearElement(element) &&\n          appState.multiElement &&\n          appState.multiElement.id === element.id\n        ) {\n          // don't store multi-point arrow if still has only one point\n          if (\n            appState.multiElement &&\n            appState.multiElement.id === element.id &&\n            element.points.length < 2\n          ) {\n            return elements;\n          }\n\n          elements.push({\n            ...element,\n            // don't store last point if not committed\n            points:\n              element.lastCommittedPoint !==\n              element.points[element.points.length - 1]\n                ? element.points.slice(0, -1)\n                : element.points,\n          });\n        } else {\n          elements.push(element);\n        }\n        return elements;\n      }, [] as Mutable<typeof elements>),\n    });\n\n  shouldCreateEntry(nextEntry: HistoryEntry): boolean {\n    const { lastEntry } = this;\n\n    if (!lastEntry) {\n      return true;\n    }\n\n    if (nextEntry.elements.length !== lastEntry.elements.length) {\n      return true;\n    }\n\n    // loop from right to left as changes are likelier to happen on new elements\n    for (let i = nextEntry.elements.length - 1; i > -1; i--) {\n      const prev = nextEntry.elements[i];\n      const next = lastEntry.elements[i];\n      if (\n        !prev ||\n        !next ||\n        prev.id !== next.id ||\n        prev.versionNonce !== next.versionNonce\n      ) {\n        return true;\n      }\n    }\n\n    // note: this is safe because entry's appState is guaranteed no excess props\n    let key: keyof typeof nextEntry.appState;\n    for (key in nextEntry.appState) {\n      if (key === \"editingLinearElement\") {\n        if (\n          nextEntry.appState[key]?.elementId ===\n          lastEntry.appState[key]?.elementId\n        ) {\n          continue;\n        }\n      }\n      if (key === \"selectedElementIds\" || key === \"selectedGroupIds\") {\n        continue;\n      }\n      if (nextEntry.appState[key] !== lastEntry.appState[key]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  pushEntry(appState: AppState, elements: readonly ExcalidrawElement[]) {\n    const newEntryDehydrated = this.generateEntry(appState, elements);\n    const newEntry: HistoryEntry = this.hydrateHistoryEntry(newEntryDehydrated);\n\n    if (newEntry) {\n      if (!this.shouldCreateEntry(newEntry)) {\n        return;\n      }\n\n      this.stateHistory.push(newEntryDehydrated);\n      this.lastEntry = newEntry;\n      // As a new entry was pushed, we invalidate the redo stack\n      this.clearRedoStack();\n    }\n  }\n\n  clearRedoStack() {\n    this.redoStack.splice(0, this.redoStack.length);\n  }\n\n  redoOnce(): HistoryEntry | null {\n    if (this.redoStack.length === 0) {\n      return null;\n    }\n\n    const entryToRestore = this.redoStack.pop();\n\n    if (entryToRestore !== undefined) {\n      this.stateHistory.push(entryToRestore);\n      return this.hydrateHistoryEntry(entryToRestore);\n    }\n\n    return null;\n  }\n\n  undoOnce(): HistoryEntry | null {\n    if (this.stateHistory.length === 1) {\n      return null;\n    }\n\n    const currentEntry = this.stateHistory.pop();\n\n    const entryToRestore = this.stateHistory[this.stateHistory.length - 1];\n\n    if (currentEntry !== undefined) {\n      this.redoStack.push(currentEntry);\n      return this.hydrateHistoryEntry(entryToRestore);\n    }\n\n    return null;\n  }\n\n  /**\n   * Updates history's `lastEntry` to latest app state. This is necessary\n   *  when doing undo/redo which itself doesn't commit to history, but updates\n   *  app state in a way that would break `shouldCreateEntry` which relies on\n   *  `lastEntry` to reflect last comittable history state.\n   * We can't update `lastEntry` from within history when calling undo/redo\n   *  because the action potentially mutates appState/elements before storing\n   *  it.\n   */\n  setCurrentState(appState: AppState, elements: readonly ExcalidrawElement[]) {\n    this.lastEntry = this.hydrateHistoryEntry(\n      this.generateEntry(appState, elements),\n    );\n  }\n\n  // Suspicious that this is called so many places. Seems error-prone.\n  resumeRecording() {\n    this.recording = true;\n  }\n\n  record(state: AppState, elements: readonly ExcalidrawElement[]) {\n    if (this.recording) {\n      this.pushEntry(state, elements);\n      this.recording = false;\n    }\n  }\n}\n\nexport default History;\n", "import {\n  ArrowIcon,\n  DiamondIcon,\n  EllipseIcon,\n  EraserIcon,\n  FreedrawIcon,\n  ImageIcon,\n  LineIcon,\n  RectangleIcon,\n  SelectionIcon,\n  TextIcon,\n} from \"./components/icons\";\nimport { KEYS } from \"./keys\";\n\nexport const SHAPES = [\n  {\n    icon: SelectionIcon,\n    value: \"selection\",\n    key: KEYS.V,\n    numericKey: KEYS[\"1\"],\n    fillable: true,\n  },\n  {\n    icon: RectangleIcon,\n    value: \"rectangle\",\n    key: KEYS.R,\n    numericKey: KEYS[\"2\"],\n    fillable: true,\n  },\n  {\n    icon: DiamondIcon,\n    value: \"diamond\",\n    key: KEYS.D,\n    numericKey: KEYS[\"3\"],\n    fillable: true,\n  },\n  {\n    icon: EllipseIcon,\n    value: \"ellipse\",\n    key: KEYS.O,\n    numericKey: KEYS[\"4\"],\n    fillable: true,\n  },\n  {\n    icon: ArrowIcon,\n    value: \"arrow\",\n    key: KEYS.A,\n    numericKey: KEYS[\"5\"],\n    fillable: true,\n  },\n  {\n    icon: LineIcon,\n    value: \"line\",\n    key: KEYS.L,\n    numericKey: KEYS[\"6\"],\n    fillable: true,\n  },\n  {\n    icon: FreedrawIcon,\n    value: \"freedraw\",\n    key: [KEYS.P, KEYS.X],\n    numericKey: KEYS[\"7\"],\n    fillable: false,\n  },\n  {\n    icon: TextIcon,\n    value: \"text\",\n    key: KEYS.T,\n    numericKey: KEYS[\"8\"],\n    fillable: false,\n  },\n  {\n    icon: ImageIcon,\n    value: \"image\",\n    key: null,\n    numericKey: KEYS[\"9\"],\n    fillable: false,\n  },\n  {\n    icon: EraserIcon,\n    value: \"eraser\",\n    key: KEYS.E,\n    numericKey: KEYS[\"0\"],\n    fillable: false,\n  },\n] as const;\n\nexport const findShapeByKey = (key: string) => {\n  const shape = SHAPES.find((shape, index) => {\n    return (\n      (shape.numericKey != null && key === shape.numericKey.toString()) ||\n      (shape.key &&\n        (typeof shape.key === \"string\"\n          ? shape.key === key\n          : (shape.key as readonly string[]).includes(key)))\n    );\n  });\n  return shape?.value || null;\n};\n", "@charset \"UTF-8\";\n:export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .context-menu {\n  position: relative;\n  border-radius: 4px;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);\n  padding: 0;\n  list-style: none;\n  user-select: none;\n  margin: -0.25rem 0 0 0.125rem;\n  padding: 0.5rem 0;\n  background-color: var(--popup-secondary-bg-color);\n  border: 1px solid var(--button-gray-3);\n  cursor: default;\n}\n.excalidraw .context-menu button {\n  color: var(--popup-text-color);\n}\n.excalidraw .context-menu-item {\n  position: relative;\n  width: 100%;\n  min-width: 9.5rem;\n  margin: 0;\n  padding: 0.25rem 1rem 0.25rem 1.25rem;\n  text-align: start;\n  border-radius: 0;\n  background-color: transparent;\n  border: none;\n  white-space: nowrap;\n  font-family: inherit;\n  display: grid;\n  grid-template-columns: 1fr 0.2fr;\n  align-items: center;\n}\n.excalidraw .context-menu-item.checkmark::before {\n  position: absolute;\n  left: 6px;\n  margin-bottom: 1px;\n  content: \"\u2713\";\n}\n.excalidraw .context-menu-item.dangerous .context-menu-item__label {\n  color: #f03e3e;\n}\n.excalidraw .context-menu-item .context-menu-item__label {\n  justify-self: start;\n  margin-inline-end: 20px;\n}\n.excalidraw .context-menu-item .context-menu-item__shortcut {\n  justify-self: end;\n  opacity: 0.6;\n  font-family: inherit;\n  font-size: 0.7rem;\n}\n.excalidraw .context-menu-item:hover {\n  color: var(--popup-bg-color);\n  background-color: var(--select-highlight-color);\n}\n.excalidraw .context-menu-item:hover.dangerous {\n  background-color: #fa5252;\n}\n.excalidraw .context-menu-item:hover.dangerous .context-menu-item__label {\n  color: var(--popup-bg-color);\n}\n.excalidraw .context-menu-item:focus {\n  z-index: 1;\n}\n.excalidraw--mobile.excalidraw .context-menu-item {\n  display: block;\n}\n.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__label {\n  margin-inline-end: 0;\n}\n.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__shortcut {\n  display: none;\n}\n\n.excalidraw .context-menu-item-separator {\n  border: none;\n  border-top: 1px solid #adb5bd;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJDb250ZXh0TWVudS5zY3NzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBSUE7RUFDRSxPQ21CRzs7QURmUDtFQUNFO0VBQ0E7O0FBRUY7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7O0FBRUE7RUFJRSxrQkNOSzs7QURHTDtFQUNFOztBQU1OO0VBQ0U7O0FBSUE7RUFDRTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7OztBQUtOO0VBQ0U7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5jb250ZXh0LW1lbnUge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgYm94LXNoYWRvdzogMCAzcHggMTBweCB0cmFuc3BhcmVudGl6ZSgkb2MtYmxhY2ssIDAuOCk7XG4gICAgcGFkZGluZzogMDtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIG1hcmdpbjogLTAuMjVyZW0gMCAwIDAuMTI1cmVtO1xuICAgIHBhZGRpbmc6IDAuNXJlbSAwO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBvcHVwLXNlY29uZGFyeS1iZy1jb2xvcik7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWdyYXktMyk7XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xuICB9XG5cbiAgLmNvbnRleHQtbWVudSBidXR0b24ge1xuICAgIGNvbG9yOiB2YXIoLS1wb3B1cC10ZXh0LWNvbG9yKTtcbiAgfVxuXG4gIC5jb250ZXh0LW1lbnUtaXRlbSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1pbi13aWR0aDogOS41cmVtO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwLjI1cmVtIDFyZW0gMC4yNXJlbSAxLjI1cmVtO1xuICAgIHRleHQtYWxpZ246IHN0YXJ0O1xuICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG5cbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDAuMmZyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAmLmNoZWNrbWFyazo6YmVmb3JlIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDZweDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDFweDtcbiAgICAgIGNvbnRlbnQ6IFwiXFwyNzEzXCI7XG4gICAgfVxuXG4gICAgJi5kYW5nZXJvdXMge1xuICAgICAgLmNvbnRleHQtbWVudS1pdGVtX19sYWJlbCB7XG4gICAgICAgIGNvbG9yOiAkb2MtcmVkLTc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmNvbnRleHQtbWVudS1pdGVtX19sYWJlbCB7XG4gICAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0O1xuICAgICAgbWFyZ2luLWlubGluZS1lbmQ6IDIwcHg7XG4gICAgfVxuICAgIC5jb250ZXh0LW1lbnUtaXRlbV9fc2hvcnRjdXQge1xuICAgICAganVzdGlmeS1zZWxmOiBlbmQ7XG4gICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgIGZvbnQtc2l6ZTogMC43cmVtO1xuICAgIH1cbiAgfVxuXG4gIC5jb250ZXh0LW1lbnUtaXRlbTpob3ZlciB7XG4gICAgY29sb3I6IHZhcigtLXBvcHVwLWJnLWNvbG9yKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWxlY3QtaGlnaGxpZ2h0LWNvbG9yKTtcblxuICAgICYuZGFuZ2Vyb3VzIHtcbiAgICAgIC5jb250ZXh0LW1lbnUtaXRlbV9fbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tcG9wdXAtYmctY29sb3IpO1xuICAgICAgfVxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG9jLXJlZC02O1xuICAgIH1cbiAgfVxuXG4gIC5jb250ZXh0LW1lbnUtaXRlbTpmb2N1cyB7XG4gICAgei1pbmRleDogMTtcbiAgfVxuXG4gIEBpbmNsdWRlIGlzTW9iaWxlIHtcbiAgICAuY29udGV4dC1tZW51LWl0ZW0ge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG5cbiAgICAgIC5jb250ZXh0LW1lbnUtaXRlbV9fbGFiZWwge1xuICAgICAgICBtYXJnaW4taW5saW5lLWVuZDogMDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRleHQtbWVudS1pdGVtX19zaG9ydGN1dCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLmNvbnRleHQtbWVudS1pdGVtLXNlcGFyYXRvciB7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAkb2MtZ3JheS01O1xuICB9XG59XG4iLCIvL1xuLy9cbi8vICDwnZeWIPCdl6Ig8J2XnyDwnZeiIPCdl6Vcbi8vICB2IDEuOS4xXG4vL1xuLy8gIOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuXG5cbi8vICBHZW5lcmFsXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy13aGl0ZTogICAgICAgICAjZmZmZmZmO1xuJG9jLWJsYWNrOiAgICAgICAgICMwMDAwMDA7XG5cblxuLy8gIEdyYXlcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyYXktbGlzdDogKFxuICBcIjBcIjogI2Y4ZjlmYSxcbiAgXCIxXCI6ICNmMWYzZjUsXG4gIFwiMlwiOiAjZTllY2VmLFxuICBcIjNcIjogI2RlZTJlNixcbiAgXCI0XCI6ICNjZWQ0ZGEsXG4gIFwiNVwiOiAjYWRiNWJkLFxuICBcIjZcIjogIzg2OGU5NixcbiAgXCI3XCI6ICM0OTUwNTcsXG4gIFwiOFwiOiAjMzQzYTQwLFxuICBcIjlcIjogIzIxMjUyOVxuKTtcblxuJG9jLWdyYXktMDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjBcIik7XG4kb2MtZ3JheS0xOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMVwiKTtcbiRvYy1ncmF5LTI6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXktMzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjNcIik7XG4kb2MtZ3JheS00OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNFwiKTtcbiRvYy1ncmF5LTU6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXktNjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjZcIik7XG4kb2MtZ3JheS03OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiN1wiKTtcbiRvYy1ncmF5LTg6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXktOTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFJlZFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtcmVkLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY1ZjUsXG4gIFwiMVwiOiAjZmZlM2UzLFxuICBcIjJcIjogI2ZmYzljOSxcbiAgXCIzXCI6ICNmZmE4YTgsXG4gIFwiNFwiOiAjZmY4Nzg3LFxuICBcIjVcIjogI2ZmNmI2YixcbiAgXCI2XCI6ICNmYTUyNTIsXG4gIFwiN1wiOiAjZjAzZTNlLFxuICBcIjhcIjogI2UwMzEzMSxcbiAgXCI5XCI6ICNjOTJhMmFcbik7XG5cbiRvYy1yZWQtMDogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMFwiKTtcbiRvYy1yZWQtMTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMVwiKTtcbiRvYy1yZWQtMjogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiMlwiKTtcbiRvYy1yZWQtMzogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiM1wiKTtcbiRvYy1yZWQtNDogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNFwiKTtcbiRvYy1yZWQtNTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNVwiKTtcbiRvYy1yZWQtNjogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiNlwiKTtcbiRvYy1yZWQtNzogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiN1wiKTtcbiRvYy1yZWQtODogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiOFwiKTtcbiRvYy1yZWQtOTogbWFwLWdldCgkb2MtcmVkLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUGlua1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtcGluay1saXN0OiAoXG4gIFwiMFwiOiAjZmZmMGY2LFxuICBcIjFcIjogI2ZmZGVlYixcbiAgXCIyXCI6ICNmY2MyZDcsXG4gIFwiM1wiOiAjZmFhMmMxLFxuICBcIjRcIjogI2Y3ODNhYyxcbiAgXCI1XCI6ICNmMDY1OTUsXG4gIFwiNlwiOiAjZTY0OTgwLFxuICBcIjdcIjogI2Q2MzM2YyxcbiAgXCI4XCI6ICNjMjI1NWMsXG4gIFwiOVwiOiAjYTYxZTRkXG4pO1xuXG4kb2MtcGluay0wOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMFwiKTtcbiRvYy1waW5rLTE6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIxXCIpO1xuJG9jLXBpbmstMjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjJcIik7XG4kb2MtcGluay0zOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiM1wiKTtcbiRvYy1waW5rLTQ6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI0XCIpO1xuJG9jLXBpbmstNTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjVcIik7XG4kb2MtcGluay02OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNlwiKTtcbiRvYy1waW5rLTc6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI3XCIpO1xuJG9jLXBpbmstODogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjhcIik7XG4kb2MtcGluay05OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JhcGVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyYXBlLWxpc3Q6IChcbiAgXCIwXCI6ICNmOGYwZmMsXG4gIFwiMVwiOiAjZjNkOWZhLFxuICBcIjJcIjogI2VlYmVmYSxcbiAgXCIzXCI6ICNlNTk5ZjcsXG4gIFwiNFwiOiAjZGE3N2YyLFxuICBcIjVcIjogI2NjNWRlOCxcbiAgXCI2XCI6ICNiZTRiZGIsXG4gIFwiN1wiOiAjYWUzZWM5LFxuICBcIjhcIjogIzljMzZiNSxcbiAgXCI5XCI6ICM4NjJlOWNcbik7XG5cbiRvYy1ncmFwZS0wOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjBcIik7XG4kb2MtZ3JhcGUtMTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXBlLTI6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmFwZS0zOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjNcIik7XG4kb2MtZ3JhcGUtNDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXBlLTU6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmFwZS02OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjZcIik7XG4kb2MtZ3JhcGUtNzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXBlLTg6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmFwZS05OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFZpb2xldFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdmlvbGV0LWxpc3Q6IChcbiAgXCIwXCI6ICNmM2YwZmYsXG4gIFwiMVwiOiAjZTVkYmZmLFxuICBcIjJcIjogI2QwYmZmZixcbiAgXCIzXCI6ICNiMTk3ZmMsXG4gIFwiNFwiOiAjOTc3NWZhLFxuICBcIjVcIjogIzg0NWVmNyxcbiAgXCI2XCI6ICM3OTUwZjIsXG4gIFwiN1wiOiAjNzA0OGU4LFxuICBcIjhcIjogIzY3NDFkOSxcbiAgXCI5XCI6ICM1ZjNkYzRcbik7XG5cbiRvYy12aW9sZXQtMDogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMFwiKTtcbiRvYy12aW9sZXQtMTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMVwiKTtcbiRvYy12aW9sZXQtMjogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiMlwiKTtcbiRvYy12aW9sZXQtMzogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiM1wiKTtcbiRvYy12aW9sZXQtNDogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNFwiKTtcbiRvYy12aW9sZXQtNTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNVwiKTtcbiRvYy12aW9sZXQtNjogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiNlwiKTtcbiRvYy12aW9sZXQtNzogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiN1wiKTtcbiRvYy12aW9sZXQtODogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiOFwiKTtcbiRvYy12aW9sZXQtOTogbWFwLWdldCgkb2MtdmlvbGV0LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgSW5kaWdvXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1pbmRpZ28tbGlzdDogKFxuICBcIjBcIjogI2VkZjJmZixcbiAgXCIxXCI6ICNkYmU0ZmYsXG4gIFwiMlwiOiAjYmFjOGZmLFxuICBcIjNcIjogIzkxYTdmZixcbiAgXCI0XCI6ICM3NDhmZmMsXG4gIFwiNVwiOiAjNWM3Y2ZhLFxuICBcIjZcIjogIzRjNmVmNSxcbiAgXCI3XCI6ICM0MjYzZWIsXG4gIFwiOFwiOiAjM2I1YmRiLFxuICBcIjlcIjogIzM2NGZjN1xuKTtcblxuJG9jLWluZGlnby0wOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIwXCIpO1xuJG9jLWluZGlnby0xOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIxXCIpO1xuJG9jLWluZGlnby0yOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIyXCIpO1xuJG9jLWluZGlnby0zOiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCIzXCIpO1xuJG9jLWluZGlnby00OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI0XCIpO1xuJG9jLWluZGlnby01OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI1XCIpO1xuJG9jLWluZGlnby02OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI2XCIpO1xuJG9jLWluZGlnby03OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI3XCIpO1xuJG9jLWluZGlnby04OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI4XCIpO1xuJG9jLWluZGlnby05OiBtYXAtZ2V0KCRvYy1pbmRpZ28tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBCbHVlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ibHVlLWxpc3Q6IChcbiAgXCIwXCI6ICNlN2Y1ZmYsXG4gIFwiMVwiOiAjZDBlYmZmLFxuICBcIjJcIjogI2E1ZDhmZixcbiAgXCIzXCI6ICM3NGMwZmMsXG4gIFwiNFwiOiAjNGRhYmY3LFxuICBcIjVcIjogIzMzOWFmMCxcbiAgXCI2XCI6ICMyMjhiZTYsXG4gIFwiN1wiOiAjMWM3ZWQ2LFxuICBcIjhcIjogIzE5NzFjMixcbiAgXCI5XCI6ICMxODY0YWJcbik7XG5cbiRvYy1ibHVlLTA6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIwXCIpO1xuJG9jLWJsdWUtMTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjFcIik7XG4kb2MtYmx1ZS0yOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMlwiKTtcbiRvYy1ibHVlLTM6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIzXCIpO1xuJG9jLWJsdWUtNDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjRcIik7XG4kb2MtYmx1ZS01OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNVwiKTtcbiRvYy1ibHVlLTY6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI2XCIpO1xuJG9jLWJsdWUtNzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjdcIik7XG4kb2MtYmx1ZS04OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOFwiKTtcbiRvYy1ibHVlLTk6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDeWFuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jeWFuLWxpc3Q6IChcbiAgXCIwXCI6ICNlM2ZhZmMsXG4gIFwiMVwiOiAjYzVmNmZhLFxuICBcIjJcIjogIzk5ZTlmMixcbiAgXCIzXCI6ICM2NmQ5ZTgsXG4gIFwiNFwiOiAjM2JjOWRiLFxuICBcIjVcIjogIzIyYjhjZixcbiAgXCI2XCI6ICMxNWFhYmYsXG4gIFwiN1wiOiAjMTA5OGFkLFxuICBcIjhcIjogIzBjODU5OSxcbiAgXCI5XCI6ICMwYjcyODVcbik7XG5cbiRvYy1jeWFuLTA6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIwXCIpO1xuJG9jLWN5YW4tMTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjFcIik7XG4kb2MtY3lhbi0yOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMlwiKTtcbiRvYy1jeWFuLTM6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIzXCIpO1xuJG9jLWN5YW4tNDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjRcIik7XG4kb2MtY3lhbi01OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNVwiKTtcbiRvYy1jeWFuLTY6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI2XCIpO1xuJG9jLWN5YW4tNzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjdcIik7XG4kb2MtY3lhbi04OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOFwiKTtcbiRvYy1jeWFuLTk6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBUZWFsXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy10ZWFsLWxpc3Q6IChcbiAgXCIwXCI6ICNlNmZjZjUsXG4gIFwiMVwiOiAjYzNmYWU4LFxuICBcIjJcIjogIzk2ZjJkNyxcbiAgXCIzXCI6ICM2M2U2YmUsXG4gIFwiNFwiOiAjMzhkOWE5LFxuICBcIjVcIjogIzIwYzk5NyxcbiAgXCI2XCI6ICMxMmI4ODYsXG4gIFwiN1wiOiAjMGNhNjc4LFxuICBcIjhcIjogIzA5OTI2OCxcbiAgXCI5XCI6ICMwODdmNWJcbik7XG5cbiRvYy10ZWFsLTA6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIwXCIpO1xuJG9jLXRlYWwtMTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjFcIik7XG4kb2MtdGVhbC0yOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMlwiKTtcbiRvYy10ZWFsLTM6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIzXCIpO1xuJG9jLXRlYWwtNDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjRcIik7XG4kb2MtdGVhbC01OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNVwiKTtcbiRvYy10ZWFsLTY6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI2XCIpO1xuJG9jLXRlYWwtNzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjdcIik7XG4kb2MtdGVhbC04OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOFwiKTtcbiRvYy10ZWFsLTk6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmVlblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JlZW4tbGlzdDogKFxuICBcIjBcIjogI2ViZmJlZSxcbiAgXCIxXCI6ICNkM2Y5ZDgsXG4gIFwiMlwiOiAjYjJmMmJiLFxuICBcIjNcIjogIzhjZTk5YSxcbiAgXCI0XCI6ICM2OWRiN2MsXG4gIFwiNVwiOiAjNTFjZjY2LFxuICBcIjZcIjogIzQwYzA1NyxcbiAgXCI3XCI6ICMzN2IyNGQsXG4gIFwiOFwiOiAjMmY5ZTQ0LFxuICBcIjlcIjogIzJiOGEzZVxuKTtcblxuJG9jLWdyZWVuLTA6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmVlbi0xOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjFcIik7XG4kb2MtZ3JlZW4tMjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIyXCIpO1xuJG9jLWdyZWVuLTM6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmVlbi00OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjRcIik7XG4kb2MtZ3JlZW4tNTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI1XCIpO1xuJG9jLWdyZWVuLTY6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmVlbi03OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjdcIik7XG4kb2MtZ3JlZW4tODogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI4XCIpO1xuJG9jLWdyZWVuLTk6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgTGltZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtbGltZS1saXN0OiAoXG4gIFwiMFwiOiAjZjRmY2UzLFxuICBcIjFcIjogI2U5ZmFjOCxcbiAgXCIyXCI6ICNkOGY1YTIsXG4gIFwiM1wiOiAjYzBlYjc1LFxuICBcIjRcIjogI2E5ZTM0YixcbiAgXCI1XCI6ICM5NGQ4MmQsXG4gIFwiNlwiOiAjODJjOTFlLFxuICBcIjdcIjogIzc0YjgxNixcbiAgXCI4XCI6ICM2NmE4MGYsXG4gIFwiOVwiOiAjNWM5NDBkXG4pO1xuXG4kb2MtbGltZS0wOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMFwiKTtcbiRvYy1saW1lLTE6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIxXCIpO1xuJG9jLWxpbWUtMjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjJcIik7XG4kb2MtbGltZS0zOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiM1wiKTtcbiRvYy1saW1lLTQ6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI0XCIpO1xuJG9jLWxpbWUtNTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjVcIik7XG4kb2MtbGltZS02OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNlwiKTtcbiRvYy1saW1lLTc6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI3XCIpO1xuJG9jLWxpbWUtODogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjhcIik7XG4kb2MtbGltZS05OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgWWVsbG93XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy15ZWxsb3ctbGlzdDogKFxuICBcIjBcIjogI2ZmZjlkYixcbiAgXCIxXCI6ICNmZmYzYmYsXG4gIFwiMlwiOiAjZmZlYzk5LFxuICBcIjNcIjogI2ZmZTA2NixcbiAgXCI0XCI6ICNmZmQ0M2IsXG4gIFwiNVwiOiAjZmNjNDE5LFxuICBcIjZcIjogI2ZhYjAwNSxcbiAgXCI3XCI6ICNmNTlmMDAsXG4gIFwiOFwiOiAjZjA4YzAwLFxuICBcIjlcIjogI2U2NzcwMFxuKTtcblxuJG9jLXllbGxvdy0wOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIwXCIpO1xuJG9jLXllbGxvdy0xOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIxXCIpO1xuJG9jLXllbGxvdy0yOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIyXCIpO1xuJG9jLXllbGxvdy0zOiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCIzXCIpO1xuJG9jLXllbGxvdy00OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI0XCIpO1xuJG9jLXllbGxvdy01OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI1XCIpO1xuJG9jLXllbGxvdy02OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI2XCIpO1xuJG9jLXllbGxvdy03OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI3XCIpO1xuJG9jLXllbGxvdy04OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI4XCIpO1xuJG9jLXllbGxvdy05OiBtYXAtZ2V0KCRvYy15ZWxsb3ctbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBPcmFuZ2Vcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLW9yYW5nZS1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNGU2LFxuICBcIjFcIjogI2ZmZThjYyxcbiAgXCIyXCI6ICNmZmQ4YTgsXG4gIFwiM1wiOiAjZmZjMDc4LFxuICBcIjRcIjogI2ZmYTk0ZCxcbiAgXCI1XCI6ICNmZjkyMmIsXG4gIFwiNlwiOiAjZmQ3ZTE0LFxuICBcIjdcIjogI2Y3NjcwNyxcbiAgXCI4XCI6ICNlODU5MGMsXG4gIFwiOVwiOiAjZDk0ODBmXG4pO1xuXG4kb2Mtb3JhbmdlLTA6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjBcIik7XG4kb2Mtb3JhbmdlLTE6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjFcIik7XG4kb2Mtb3JhbmdlLTI6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjJcIik7XG4kb2Mtb3JhbmdlLTM6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjNcIik7XG4kb2Mtb3JhbmdlLTQ6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjRcIik7XG4kb2Mtb3JhbmdlLTU6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjVcIik7XG4kb2Mtb3JhbmdlLTY6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjZcIik7XG4kb2Mtb3JhbmdlLTc6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjdcIik7XG4kb2Mtb3JhbmdlLTg6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjhcIik7XG4kb2Mtb3JhbmdlLTk6IG1hcC1nZXQoJG9jLW9yYW5nZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIENvbG9yIGxpc3Rcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWNvbG9yLXNwZWN0cnVtOiAgIDk7XG5cbiRvYy1jb2xvci1saXN0OiAoXG4gICRvYy1ncmF5LWxpc3Q6ICAgICAgXCJncmF5XCIsXG4gICRvYy1yZWQtbGlzdDogICAgICBcInJlZFwiLFxuICAkb2MtcGluay1saXN0OiAgICAgIFwicGlua1wiLFxuICAkb2MtZ3JhcGUtbGlzdDogICAgICBcImdyYXBlXCIsXG4gICRvYy12aW9sZXQtbGlzdDogICAgICBcInZpb2xldFwiLFxuICAkb2MtaW5kaWdvLWxpc3Q6ICAgICAgXCJpbmRpZ29cIixcbiAgJG9jLWJsdWUtbGlzdDogICAgICBcImJsdWVcIixcbiAgJG9jLWN5YW4tbGlzdDogICAgICBcImN5YW5cIixcbiAgJG9jLXRlYWwtbGlzdDogICAgICBcInRlYWxcIixcbiAgJG9jLWdyZWVuLWxpc3Q6ICAgICAgXCJncmVlblwiLFxuICAkb2MtbGltZS1saXN0OiAgICAgIFwibGltZVwiLFxuICAkb2MteWVsbG93LWxpc3Q6ICAgICAgXCJ5ZWxsb3dcIixcbiAgJG9jLW9yYW5nZS1saXN0OiAgICAgIFwib3JhbmdlXCJcbik7XG4iXX0= */", "import { isDarwin } from \"../constants\";\nimport { t } from \"../i18n\";\nimport { SubtypeOf } from \"../utility-types\";\nimport { getShortcutKey } from \"../utils\";\nimport { ActionName } from \"./types\";\n\nexport type ShortcutName =\n  | SubtypeOf<\n      ActionName,\n      | \"toggleTheme\"\n      | \"loadScene\"\n      | \"clearCanvas\"\n      | \"cut\"\n      | \"copy\"\n      | \"paste\"\n      | \"copyStyles\"\n      | \"pasteStyles\"\n      | \"selectAll\"\n      | \"deleteSelectedElements\"\n      | \"duplicateSelection\"\n      | \"sendBackward\"\n      | \"bringForward\"\n      | \"sendToBack\"\n      | \"bringToFront\"\n      | \"copyAsPng\"\n      | \"copyAsSvg\"\n      | \"group\"\n      | \"ungroup\"\n      | \"gridMode\"\n      | \"zenMode\"\n      | \"objectsSnapMode\"\n      | \"stats\"\n      | \"addToLibrary\"\n      | \"viewMode\"\n      | \"flipHorizontal\"\n      | \"flipVertical\"\n      | \"hyperlink\"\n      | \"toggleElementLock\"\n    >\n  | \"saveScene\"\n  | \"imageExport\";\n\nconst shortcutMap: Record<ShortcutName, string[]> = {\n  toggleTheme: [getShortcutKey(\"Shift+Alt+D\")],\n  saveScene: [getShortcutKey(\"CtrlOrCmd+S\")],\n  loadScene: [getShortcutKey(\"CtrlOrCmd+O\")],\n  clearCanvas: [getShortcutKey(\"CtrlOrCmd+Delete\")],\n  imageExport: [getShortcutKey(\"CtrlOrCmd+Shift+E\")],\n  cut: [getShortcutKey(\"CtrlOrCmd+X\")],\n  copy: [getShortcutKey(\"CtrlOrCmd+C\")],\n  paste: [getShortcutKey(\"CtrlOrCmd+V\")],\n  copyStyles: [getShortcutKey(\"CtrlOrCmd+Alt+C\")],\n  pasteStyles: [getShortcutKey(\"CtrlOrCmd+Alt+V\")],\n  selectAll: [getShortcutKey(\"CtrlOrCmd+A\")],\n  deleteSelectedElements: [getShortcutKey(\"Delete\")],\n  duplicateSelection: [\n    getShortcutKey(\"CtrlOrCmd+D\"),\n    getShortcutKey(`Alt+${t(\"helpDialog.drag\")}`),\n  ],\n  sendBackward: [getShortcutKey(\"CtrlOrCmd+[\")],\n  bringForward: [getShortcutKey(\"CtrlOrCmd+]\")],\n  sendToBack: [\n    isDarwin\n      ? getShortcutKey(\"CtrlOrCmd+Alt+[\")\n      : getShortcutKey(\"CtrlOrCmd+Shift+[\"),\n  ],\n  bringToFront: [\n    isDarwin\n      ? getShortcutKey(\"CtrlOrCmd+Alt+]\")\n      : getShortcutKey(\"CtrlOrCmd+Shift+]\"),\n  ],\n  copyAsPng: [getShortcutKey(\"Shift+Alt+C\")],\n  copyAsSvg: [],\n  group: [getShortcutKey(\"CtrlOrCmd+G\")],\n  ungroup: [getShortcutKey(\"CtrlOrCmd+Shift+G\")],\n  gridMode: [getShortcutKey(\"CtrlOrCmd+'\")],\n  zenMode: [getShortcutKey(\"Alt+Z\")],\n  objectsSnapMode: [getShortcutKey(\"Alt+S\")],\n  stats: [getShortcutKey(\"Alt+/\")],\n  addToLibrary: [],\n  flipHorizontal: [getShortcutKey(\"Shift+H\")],\n  flipVertical: [getShortcutKey(\"Shift+V\")],\n  viewMode: [getShortcutKey(\"Alt+R\")],\n  hyperlink: [getShortcutKey(\"CtrlOrCmd+K\")],\n  toggleElementLock: [getShortcutKey(\"CtrlOrCmd+Shift+L\")],\n};\n\nexport const getShortcutFromShortcutName = (name: ShortcutName) => {\n  const shortcuts = shortcutMap[name];\n  // if multiple shortcuts available, take the first one\n  return shortcuts && shortcuts.length > 0 ? shortcuts[0] : \"\";\n};\n", "import clsx from \"clsx\";\nimport { Popover } from \"./Popover\";\nimport { t, TranslationKeys } from \"../i18n\";\n\nimport \"./ContextMenu.scss\";\nimport {\n  getShortcutFromShortcutName,\n  ShortcutName,\n} from \"../actions/shortcuts\";\nimport { Action } from \"../actions/types\";\nimport { ActionManager } from \"../actions/manager\";\nimport { useExcalidrawAppState, useExcalidrawElements } from \"./App\";\nimport React from \"react\";\n\nexport type ContextMenuItem = typeof CONTEXT_MENU_SEPARATOR | Action;\n\nexport type ContextMenuItems = (ContextMenuItem | false | null | undefined)[];\n\ntype ContextMenuProps = {\n  actionManager: ActionManager;\n  items: ContextMenuItems;\n  top: number;\n  left: number;\n  onClose: (callback?: () => void) => void;\n};\n\nexport const CONTEXT_MENU_SEPARATOR = \"separator\";\n\nexport const ContextMenu = React.memo(\n  ({ actionManager, items, top, left, onClose }: ContextMenuProps) => {\n    const appState = useExcalidrawAppState();\n    const elements = useExcalidrawElements();\n\n    const filteredItems = items.reduce((acc: ContextMenuItem[], item) => {\n      if (\n        item &&\n        (item === CONTEXT_MENU_SEPARATOR ||\n          !item.predicate ||\n          item.predicate(\n            elements,\n            appState,\n            actionManager.app.props,\n            actionManager.app,\n          ))\n      ) {\n        acc.push(item);\n      }\n      return acc;\n    }, []);\n\n    return (\n      <Popover\n        onCloseRequest={() => {\n          onClose();\n        }}\n        top={top}\n        left={left}\n        fitInViewport={true}\n        offsetLeft={appState.offsetLeft}\n        offsetTop={appState.offsetTop}\n        viewportWidth={appState.width}\n        viewportHeight={appState.height}\n      >\n        <ul\n          className=\"context-menu\"\n          onContextMenu={(event) => event.preventDefault()}\n        >\n          {filteredItems.map((item, idx) => {\n            if (item === CONTEXT_MENU_SEPARATOR) {\n              if (\n                !filteredItems[idx - 1] ||\n                filteredItems[idx - 1] === CONTEXT_MENU_SEPARATOR\n              ) {\n                return null;\n              }\n              return <hr key={idx} className=\"context-menu-item-separator\" />;\n            }\n\n            const actionName = item.name;\n            let label = \"\";\n            if (item.contextItemLabel) {\n              if (typeof item.contextItemLabel === \"function\") {\n                label = t(\n                  item.contextItemLabel(\n                    elements,\n                    appState,\n                    actionManager.app,\n                  ) as unknown as TranslationKeys,\n                );\n              } else {\n                label = t(item.contextItemLabel as unknown as TranslationKeys);\n              }\n            }\n\n            return (\n              <li\n                key={idx}\n                data-testid={actionName}\n                onClick={() => {\n                  // we need update state before executing the action in case\n                  // the action uses the appState it's being passed (that still\n                  // contains a defined contextMenu) to return the next state.\n                  onClose(() => {\n                    actionManager.executeAction(item, \"contextMenu\");\n                  });\n                }}\n              >\n                <button\n                  className={clsx(\"context-menu-item\", {\n                    dangerous: actionName === \"deleteSelectedElements\",\n                    checkmark: item.checked?.(appState),\n                  })}\n                >\n                  <div className=\"context-menu-item__label\">{label}</div>\n                  <kbd className=\"context-menu-item__shortcut\">\n                    {actionName\n                      ? getShortcutFromShortcutName(actionName as ShortcutName)\n                      : \"\"}\n                  </kbd>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </Popover>\n    );\n  },\n);\n", ".excalidraw .Stack {\n  --gap: 0;\n  display: grid;\n  gap: calc(var(--space-factor) * var(--gap));\n}\n.excalidraw .Stack_vertical {\n  grid-template-columns: auto;\n  grid-auto-flow: row;\n  grid-auto-rows: min-content;\n}\n.excalidraw .Stack_horizontal {\n  grid-template-rows: auto;\n  grid-auto-flow: column;\n  grid-auto-columns: min-content;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIlN0YWNrLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhjYWxpZHJhdyB7XG4gIC5TdGFjayB7XG4gICAgLS1nYXA6IDA7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBnYXA6IGNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIHZhcigtLWdhcCkpO1xuICB9XG5cbiAgLlN0YWNrX3ZlcnRpY2FsIHtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IGF1dG87XG4gICAgZ3JpZC1hdXRvLWZsb3c6IHJvdztcbiAgICBncmlkLWF1dG8tcm93czogbWluLWNvbnRlbnQ7XG4gIH1cblxuICAuU3RhY2tfaG9yaXpvbnRhbCB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiBhdXRvO1xuICAgIGdyaWQtYXV0by1mbG93OiBjb2x1bW47XG4gICAgZ3JpZC1hdXRvLWNvbHVtbnM6IG1pbi1jb250ZW50O1xuICB9XG59XG4iXX0= */", "import \"./Stack.scss\";\n\nimport React, { forwardRef } from \"react\";\nimport clsx from \"clsx\";\n\ntype StackProps = {\n  children: React.ReactNode;\n  gap?: number;\n  align?: \"start\" | \"center\" | \"end\" | \"baseline\";\n  justifyContent?: \"center\" | \"space-around\" | \"space-between\";\n  className?: string | boolean;\n  style?: React.CSSProperties;\n  ref: React.RefObject<HTMLDivElement>;\n};\n\nconst RowStack = forwardRef(\n  (\n    { children, gap, align, justifyContent, className, style }: StackProps,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    return (\n      <div\n        className={clsx(\"Stack Stack_horizontal\", className)}\n        style={{\n          \"--gap\": gap,\n          alignItems: align,\n          justifyContent,\n          ...style,\n        }}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  },\n);\n\nconst ColStack = forwardRef(\n  (\n    { children, gap, align, justifyContent, className, style }: StackProps,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    return (\n      <div\n        className={clsx(\"Stack Stack_vertical\", className)}\n        style={{\n          \"--gap\": gap,\n          justifyItems: align,\n          justifyContent,\n          ...style,\n        }}\n        ref={ref}\n      >\n        {children}\n      </div>\n    );\n  },\n);\n\nexport default {\n  Row: RowStack,\n  Col: ColStack,\n};\n", ".zoom-actions,\n.undo-redo-buttons {\n  background-color: var(--island-bg-color);\n  border-radius: var(--border-radius-lg);\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\n}\n\n.zoom-button,\n.undo-redo-buttons button {\n  border-radius: 0 !important;\n  background-color: var(--color-surface-low) !important;\n  font-size: 0.875rem !important;\n  width: var(--lg-button-size);\n  height: var(--lg-button-size);\n}\n.zoom-button svg,\n.undo-redo-buttons button svg {\n  width: var(--lg-icon-size) !important;\n  height: var(--lg-icon-size) !important;\n}\n.zoom-button .ToolIcon__icon,\n.undo-redo-buttons button .ToolIcon__icon {\n  width: 100%;\n  height: 100%;\n}\n\n.reset-zoom-button {\n  border-left: 0 !important;\n  border-right: 0 !important;\n  padding: 0 0.625rem !important;\n  width: 3.75rem !important;\n  justify-content: center;\n  color: var(--text-primary-color);\n}\n\n.zoom-out-button {\n  border-top-left-radius: var(--border-radius-lg) !important;\n  border-bottom-left-radius: var(--border-radius-lg) !important;\n}\n:root[dir=rtl] .zoom-out-button {\n  transform: scaleX(-1);\n}\n.zoom-out-button .ToolIcon__icon {\n  border-top-right-radius: 0 !important;\n  border-bottom-right-radius: 0 !important;\n}\n\n.zoom-in-button {\n  border-top-right-radius: var(--border-radius-lg) !important;\n  border-bottom-right-radius: var(--border-radius-lg) !important;\n}\n:root[dir=rtl] .zoom-in-button {\n  transform: scaleX(-1);\n}\n.zoom-in-button .ToolIcon__icon {\n  border-top-left-radius: 0 !important;\n  border-bottom-left-radius: 0 !important;\n}\n\n.undo-redo-buttons .undo-button-container button {\n  border-top-left-radius: var(--border-radius-lg) !important;\n  border-bottom-left-radius: var(--border-radius-lg) !important;\n  border-right: 0 !important;\n}\n:root[dir=rtl] .undo-redo-buttons .undo-button-container button {\n  transform: scaleX(-1);\n}\n.undo-redo-buttons .undo-button-container button .ToolIcon__icon {\n  border-top-right-radius: 0 !important;\n  border-bottom-right-radius: 0 !important;\n}\n.undo-redo-buttons .redo-button-container button {\n  border-top-right-radius: var(--border-radius-lg) !important;\n  border-bottom-right-radius: var(--border-radius-lg) !important;\n}\n:root[dir=rtl] .undo-redo-buttons .redo-button-container button {\n  transform: scaleX(-1);\n}\n.undo-redo-buttons .redo-button-container button .ToolIcon__icon {\n  border-top-left-radius: 0 !important;\n  border-bottom-left-radius: 0 !important;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkFjdGlvbnMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0VBRUU7RUFDQTtFQUNBOzs7QUFHRjtBQUFBO0VBRUU7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFDQTtBQUFBO0VBQ0U7RUFDQTs7QUFHRjtBQUFBO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQUdGO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOzs7QUFLRjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuem9vbS1hY3Rpb25zLFxuLnVuZG8tcmVkby1idXR0b25zIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG59XG5cbi56b29tLWJ1dHRvbixcbi51bmRvLXJlZG8tYnV0dG9ucyBidXR0b24ge1xuICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KSAhaW1wb3J0YW50O1xuICBmb250LXNpemU6IDAuODc1cmVtICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tbGctYnV0dG9uLXNpemUpO1xuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1sZy1pY29uLXNpemUpICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiB2YXIoLS1sZy1pY29uLXNpemUpICFpbXBvcnRhbnQ7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxufVxuXG4ucmVzZXQtem9vbS1idXR0b24ge1xuICBib3JkZXItbGVmdDogMCAhaW1wb3J0YW50O1xuICBib3JkZXItcmlnaHQ6IDAgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMCAwLjYyNXJlbSAhaW1wb3J0YW50O1xuICB3aWR0aDogMy43NXJlbSAhaW1wb3J0YW50O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG59XG5cbi56b29tLW91dC1idXR0b24ge1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAhaW1wb3J0YW50O1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAhaW1wb3J0YW50O1xuXG4gIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgfVxufVxuXG4uem9vbS1pbi1idXR0b24ge1xuICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZykgIWltcG9ydGFudDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpICFpbXBvcnRhbnQ7XG5cbiAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgIHRyYW5zZm9ybTogc2NhbGVYKC0xKTtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMCAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgfVxufVxuXG4udW5kby1yZWRvLWJ1dHRvbnMge1xuICAudW5kby1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZykgIWltcG9ydGFudDtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKSAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yaWdodDogMCAhaW1wb3J0YW50O1xuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoLTEpO1xuICAgIH1cblxuICAgIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMCAhaW1wb3J0YW50O1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgICB9XG4gIH1cblxuICAucmVkby1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpICFpbXBvcnRhbnQ7XG5cbiAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7XG4gICAgfVxuXG4gICAgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import clsx from \"clsx\";\nimport { useDevice } from \"../App\";\n\nconst MenuTrigger = ({\n  className = \"\",\n  children,\n  onToggle,\n  title,\n  ...rest\n}: {\n  className?: string;\n  children: React.ReactNode;\n  onToggle: () => void;\n  title?: string;\n} & Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  const device = useDevice();\n  const classNames = clsx(\n    `dropdown-menu-button ${className}`,\n    \"zen-mode-transition\",\n    {\n      \"dropdown-menu-button--mobile\": device.editor.isMobile,\n    },\n  ).trim();\n  return (\n    <button\n      data-prevent-outside-click\n      className={classNames}\n      onClick={onToggle}\n      type=\"button\"\n      data-testid=\"dropdown-menu-button\"\n      title={title}\n      {...rest}\n    >\n      {children}\n    </button>\n  );\n};\n\nexport default MenuTrigger;\nMenuTrigger.displayName = \"DropdownMenuTrigger\";\n", "import React, { useContext } from \"react\";\nimport { EVENT } from \"../../constants\";\nimport { composeEventHandlers } from \"../../utils\";\n\nexport const DropdownMenuContentPropsContext = React.createContext<{\n  onSelect?: (event: Event) => void;\n}>({});\n\nexport const getDropdownMenuItemClassName = (\n  className = \"\",\n  selected = false,\n) => {\n  return `dropdown-menu-item dropdown-menu-item-base ${className} ${\n    selected ? \"dropdown-menu-item--selected\" : \"\"\n  }`.trim();\n};\n\nexport const useHandleDropdownMenuItemClick = (\n  origOnClick:\n    | React.MouseEventHandler<HTMLAnchorElement | HTMLButtonElement>\n    | undefined,\n  onSelect: ((event: Event) => void) | undefined,\n) => {\n  const DropdownMenuContentProps = useContext(DropdownMenuContentPropsContext);\n\n  return composeEventHandlers(origOnClick, (event) => {\n    const itemSelectEvent = new CustomEvent(EVENT.MENU_ITEM_SELECT, {\n      bubbles: true,\n      cancelable: true,\n    });\n    onSelect?.(itemSelectEvent);\n    if (!itemSelectEvent.defaultPrevented) {\n      DropdownMenuContentProps.onSelect?.(itemSelectEvent);\n    }\n  });\n};\n", "import { useDevice } from \"../App\";\n\nconst MenuItemContent = ({\n  icon,\n  shortcut,\n  children,\n}: {\n  icon?: JSX.Element;\n  shortcut?: string;\n  children: React.ReactNode;\n}) => {\n  const device = useDevice();\n  return (\n    <>\n      <div className=\"dropdown-menu-item__icon\">{icon}</div>\n      <div className=\"dropdown-menu-item__text\">{children}</div>\n      {shortcut && !device.editor.isMobile && (\n        <div className=\"dropdown-menu-item__shortcut\">{shortcut}</div>\n      )}\n    </>\n  );\n};\nexport default MenuItemContent;\n", "import React from \"react\";\nimport {\n  getDropdownMenuItemClassName,\n  useHandleDropdownMenuItemClick,\n} from \"./common\";\nimport MenuItemContent from \"./DropdownMenuItemContent\";\n\nconst DropdownMenuItem = ({\n  icon,\n  onSelect,\n  children,\n  shortcut,\n  className,\n  selected,\n  ...rest\n}: {\n  icon?: JSX.Element;\n  onSelect: (event: Event) => void;\n  children: React.ReactNode;\n  shortcut?: string;\n  selected?: boolean;\n  className?: string;\n} & Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  const handleClick = useHandleDropdownMenuItemClick(rest.onClick, onSelect);\n\n  return (\n    <button\n      {...rest}\n      onClick={handleClick}\n      type=\"button\"\n      className={getDropdownMenuItemClassName(className, selected)}\n      title={rest.title ?? rest[\"aria-label\"]}\n    >\n      <MenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </MenuItemContent>\n    </button>\n  );\n};\nDropdownMenuItem.displayName = \"DropdownMenuItem\";\n\nexport const DropDownMenuItemBadge = ({\n  children,\n}: {\n  children: React.ReactNode;\n}) => {\n  return (\n    <div\n      style={{\n        display: \"inline-flex\",\n        marginLeft: \"auto\",\n        padding: \"2px 4px\",\n        background: \"pink\",\n        borderRadius: 6,\n        fontSize: 9,\n        color: \"black\",\n        fontFamily: \"Cascadia, monospace\",\n      }}\n    >\n      {children}\n    </div>\n  );\n};\nDropDownMenuItemBadge.displayName = \"DropdownMenuItemBadge\";\n\nDropdownMenuItem.Badge = DropDownMenuItemBadge;\n\nexport default DropdownMenuItem;\n", "import React from \"react\";\n\nconst MenuSeparator = () => (\n  <div\n    style={{\n      height: \"1px\",\n      backgroundColor: \"var(--default-border-color)\",\n      margin: \".5rem 0\",\n    }}\n  />\n);\n\nexport default MenuSeparator;\nMenuSeparator.displayName = \"DropdownMenuSeparator\";\n", "import React from \"react\";\n\nconst MenuGroup = ({\n  children,\n  className = \"\",\n  style,\n  title,\n}: {\n  children: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n  title?: string;\n}) => {\n  return (\n    <div className={`dropdown-menu-group ${className}`} style={style}>\n      {title && <p className=\"dropdown-menu-group-title\">{title}</p>}\n      {children}\n    </div>\n  );\n};\n\nexport default MenuGroup;\nMenuGroup.displayName = \"DropdownMenuGroup\";\n", ".excalidraw .Island {\n  --padding: 0;\n  box-sizing: border-box;\n  background-color: var(--island-bg-color);\n  box-shadow: var(--shadow-island);\n  border-radius: var(--border-radius-lg);\n  padding: calc(var(--padding) * var(--space-factor));\n  position: relative;\n  transition: box-shadow 0.5s ease-in-out;\n}\n.excalidraw .Island.zen-mode {\n  box-shadow: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIklzbGFuZC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiLmV4Y2FsaWRyYXcge1xuICAuSXNsYW5kIHtcbiAgICAtLXBhZGRpbmc6IDA7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgIGJveC1zaGFkb3c6IHZhcigtLXNoYWRvdy1pc2xhbmQpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICAgIHBhZGRpbmc6IGNhbGModmFyKC0tcGFkZGluZykgKiB2YXIoLS1zcGFjZS1mYWN0b3IpKTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAwLjVzIGVhc2UtaW4tb3V0O1xuXG4gICAgJi56ZW4tbW9kZSB7XG4gICAgICBib3gtc2hhZG93OiBub25lO1xuICAgIH1cbiAgfVxufVxuIl19 */", "import \"./Island.scss\";\n\nimport React from \"react\";\nimport clsx from \"clsx\";\n\ntype IslandProps = {\n  children: React.ReactNode;\n  padding?: number;\n  className?: string | boolean;\n  style?: object;\n};\n\nexport const Island = React.forwardRef<HTMLDivElement, IslandProps>(\n  ({ children, padding, className, style }, ref) => (\n    <div\n      className={clsx(\"Island\", className)}\n      style={{ \"--padding\": padding, ...style }}\n      ref={ref}\n    >\n      {children}\n    </div>\n  ),\n);\n", "import { Island } from \"../Island\";\nimport { useDevice } from \"../App\";\nimport clsx from \"clsx\";\nimport Stack from \"../Stack\";\nimport React, { useRef } from \"react\";\nimport { DropdownMenuContentPropsContext } from \"./common\";\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\n\nconst MenuContent = ({\n  children,\n  onClickOutside,\n  className = \"\",\n  onSelect,\n  style,\n}: {\n  children?: React.ReactNode;\n  onClickOutside?: () => void;\n  className?: string;\n  /**\n   * Called when any menu item is selected (clicked on).\n   */\n  onSelect?: (event: Event) => void;\n  style?: React.CSSProperties;\n}) => {\n  const device = useDevice();\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  useOutsideClick(menuRef, () => {\n    onClickOutside?.();\n  });\n\n  const classNames = clsx(`dropdown-menu ${className}`, {\n    \"dropdown-menu--mobile\": device.editor.isMobile,\n  }).trim();\n\n  return (\n    <DropdownMenuContentPropsContext.Provider value={{ onSelect }}>\n      <div\n        ref={menuRef}\n        className={classNames}\n        style={style}\n        data-testid=\"dropdown-menu\"\n      >\n        {/* the zIndex ensures this menu has higher stacking order,\n    see https://github.com/excalidraw/excalidraw/pull/1445 */}\n        {device.editor.isMobile ? (\n          <Stack.Col className=\"dropdown-menu-container\">{children}</Stack.Col>\n        ) : (\n          <Island\n            className=\"dropdown-menu-container\"\n            padding={2}\n            style={{ zIndex: 2 }}\n          >\n            {children}\n          </Island>\n        )}\n      </div>\n    </DropdownMenuContentPropsContext.Provider>\n  );\n};\nMenuContent.displayName = \"DropdownMenuContent\";\n\nexport default MenuContent;\n", "import MenuItemContent from \"./DropdownMenuItemContent\";\nimport React from \"react\";\nimport {\n  getDropdownMenuItemClassName,\n  useHandleDropdownMenuItemClick,\n} from \"./common\";\n\nconst DropdownMenuItemLink = ({\n  icon,\n  shortcut,\n  href,\n  children,\n  onSelect,\n  className = \"\",\n  selected,\n  ...rest\n}: {\n  href: string;\n  icon?: JSX.Element;\n  children: React.ReactNode;\n  shortcut?: string;\n  className?: string;\n  selected?: boolean;\n  onSelect?: (event: Event) => void;\n} & React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  const handleClick = useHandleDropdownMenuItemClick(rest.onClick, onSelect);\n\n  return (\n    <a\n      {...rest}\n      href={href}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      className={getDropdownMenuItemClassName(className, selected)}\n      title={rest.title ?? rest[\"aria-label\"]}\n      onClick={handleClick}\n    >\n      <MenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </MenuItemContent>\n    </a>\n  );\n};\n\nexport default DropdownMenuItemLink;\nDropdownMenuItemLink.displayName = \"DropdownMenuItemLink\";\n", "import React from \"react\";\n\nconst DropdownMenuItemCustom = ({\n  children,\n  className = \"\",\n  selected,\n  ...rest\n}: {\n  children: React.ReactNode;\n  className?: string;\n  selected?: boolean;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <div\n      {...rest}\n      className={`dropdown-menu-item-base dropdown-menu-item-custom ${className} ${\n        selected ? `dropdown-menu-item--selected` : ``\n      }`.trim()}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default DropdownMenuItemCustom;\n", "import React from \"react\";\n\nexport const getMenuTriggerComponent = (children: React.ReactNode) => {\n  const comp = React.Children.toArray(children).find(\n    (child) =>\n      React.isValidElement(child) &&\n      typeof child.type !== \"string\" &&\n      //@ts-ignore\n      child?.type.displayName &&\n      //@ts-ignore\n      child.type.displayName === \"DropdownMenuTrigger\",\n  );\n  if (!comp) {\n    return null;\n  }\n  //@ts-ignore\n  return comp;\n};\n\nexport const getMenuContentComponent = (children: React.ReactNode) => {\n  const comp = React.Children.toArray(children).find(\n    (child) =>\n      React.isValidElement(child) &&\n      typeof child.type !== \"string\" &&\n      //@ts-ignore\n      child?.type.displayName &&\n      //@ts-ignore\n      child.type.displayName === \"DropdownMenuContent\",\n  );\n  if (!comp) {\n    return null;\n  }\n  //@ts-ignore\n  return comp;\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .dropdown-menu {\n  position: absolute;\n  top: 100%;\n  margin-top: 0.25rem;\n}\n.excalidraw .dropdown-menu--mobile {\n  left: 0;\n  width: 100%;\n  row-gap: 0.75rem;\n}\n.excalidraw .dropdown-menu--mobile .dropdown-menu-container {\n  padding: 8px 8px;\n  box-sizing: border-box;\n  box-shadow: var(--shadow-island);\n  border-radius: var(--border-radius-lg);\n  position: relative;\n  transition: box-shadow 0.5s ease-in-out;\n}\n.excalidraw .dropdown-menu--mobile .dropdown-menu-container.zen-mode {\n  box-shadow: none;\n}\n.excalidraw .dropdown-menu .dropdown-menu-container {\n  background-color: var(--island-bg-color);\n  max-height: calc(100vh - 150px);\n  overflow-y: auto;\n  --gap: 2;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item-base {\n  display: flex;\n  padding: 0 0.625rem;\n  column-gap: 0.625rem;\n  font-size: 0.875rem;\n  color: var(--color-on-surface);\n  width: 100%;\n  box-sizing: border-box;\n  font-weight: normal;\n  font-family: inherit;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item {\n  background-color: transparent;\n  border: 1px solid transparent;\n  align-items: center;\n  height: 2rem;\n  cursor: pointer;\n  border-radius: var(--border-radius-md);\n}\n@media screen and (min-width: 1921px) {\n  .excalidraw .dropdown-menu .dropdown-menu-item {\n    height: 2.25rem;\n  }\n}\n.excalidraw .dropdown-menu .dropdown-menu-item--selected {\n  background: var(--color-primary-light);\n  --icon-fill-color: var(--color-primary-darker);\n}\n.excalidraw .dropdown-menu .dropdown-menu-item__text {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  gap: 0.75rem;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item__shortcut {\n  margin-inline-start: auto;\n  opacity: 0.5;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item:hover {\n  background-color: var(--button-hover-bg);\n  text-decoration: none;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item:active {\n  background-color: var(--button-hover-bg);\n  border-color: var(--color-brand-active);\n}\n.excalidraw .dropdown-menu .dropdown-menu-item svg {\n  width: 1rem;\n  height: 1rem;\n  display: block;\n}\n.excalidraw .dropdown-menu .dropdown-menu-item-custom {\n  margin-top: 0.5rem;\n}\n.excalidraw .dropdown-menu .dropdown-menu-group-title {\n  font-size: 14px;\n  text-align: left;\n  margin: 10px 0;\n  font-weight: 500;\n}\n.excalidraw .dropdown-menu-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  width: var(--lg-button-size);\n  height: var(--lg-button-size);\n  --background: var(--color-surface-mid);\n  background-color: var(--background);\n}\n.excalidraw .dropdown-menu-button svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .dropdown-menu-button:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .dropdown-menu-button:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .dropdown-menu-button.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .dropdown-menu-button.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .dropdown-menu-button.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw.theme--dark.excalidraw .dropdown-menu-button {\n  --background: var(--color-surface-high);\n}\n.excalidraw.theme--dark.excalidraw .dropdown-menu-button:hover {\n  --background: #363541;\n}\n\n.excalidraw .dropdown-menu-button:hover {\n  --background: var(--color-surface-high);\n  background-color: var(--background);\n  text-decoration: none;\n}\n.excalidraw .dropdown-menu-button:active {\n  border-color: var(--color-primary);\n}\n.excalidraw .dropdown-menu-button svg {\n  width: var(--lg-icon-size);\n  height: var(--lg-icon-size);\n}\n.excalidraw .dropdown-menu-button--mobile {\n  border: none;\n  margin: 0;\n  padding: 0;\n  width: var(--default-button-size);\n  height: var(--default-button-size);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvZHJvcGRvd25NZW51Iiwic291cmNlcyI6WyIuLi8uLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzIiwiRHJvcGRvd25NZW51LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtBO0VBQ0U7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBS047RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQVJGO0lBU0k7OztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUlKO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFRHBEQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUN3Q0U7RUFDQTtFQUVBO0VBRUE7O0FEM0NGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFJQTs7QUFNRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUlBOztBQUtBO0VBQ0U7O0FBTUY7RUFDRTs7QUNLTztFQUNQOztBQUNBO0VBQ0U7OztBQUlKO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5kcm9wZG93bi1tZW51IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAxMDAlO1xuICAgIG1hcmdpbi10b3A6IDAuMjVyZW07XG5cbiAgICAmLS1tb2JpbGUge1xuICAgICAgbGVmdDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcm93LWdhcDogMC43NXJlbTtcblxuICAgICAgLmRyb3Bkb3duLW1lbnUtY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDhweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgLy8gYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgICAgICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWlzbGFuZCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgMC41cyBlYXNlLWluLW91dDtcblxuICAgICAgICAmLnplbi1tb2RlIHtcbiAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmRyb3Bkb3duLW1lbnUtY29udGFpbmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlzbGFuZC1iZy1jb2xvcik7XG4gICAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTUwcHgpO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIC0tZ2FwOiAyO1xuICAgIH1cblxuICAgIC5kcm9wZG93bi1tZW51LWl0ZW0tYmFzZSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgcGFkZGluZzogMCAwLjYyNXJlbTtcbiAgICAgIGNvbHVtbi1nYXA6IDAuNjI1cmVtO1xuICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICB9XG5cbiAgICAuZHJvcGRvd24tbWVudS1pdGVtIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1tZCk7XG5cbiAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDE5MjFweCkge1xuICAgICAgICBoZWlnaHQ6IDIuMjVyZW07XG4gICAgICB9XG5cbiAgICAgICYtLXNlbGVjdGVkIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcHJpbWFyeS1saWdodCk7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlcik7XG4gICAgICB9XG5cbiAgICAgICZfX3RleHQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIGdhcDogMC43NXJlbTtcbiAgICAgIH1cblxuICAgICAgJl9fc2hvcnRjdXQge1xuICAgICAgICBtYXJnaW4taW5saW5lLXN0YXJ0OiBhdXRvO1xuICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICB9XG5cbiAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogMXJlbTtcbiAgICAgICAgaGVpZ2h0OiAxcmVtO1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuZHJvcGRvd24tbWVudS1pdGVtLWN1c3RvbSB7XG4gICAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gICAgfVxuXG4gICAgLmRyb3Bkb3duLW1lbnUtZ3JvdXAtdGl0bGUge1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB9XG4gIH1cblxuICAuZHJvcGRvd24tbWVudS1idXR0b24ge1xuICAgIEBpbmNsdWRlIG91dGxpbmVCdXR0b25TdHlsZXM7XG4gICAgd2lkdGg6IHZhcigtLWxnLWJ1dHRvbi1zaXplKTtcbiAgICBoZWlnaHQ6IHZhcigtLWxnLWJ1dHRvbi1zaXplKTtcblxuICAgIC0tYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1taWQpO1xuXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZCk7XG5cbiAgICBAYXQtcm9vdCAuZXhjYWxpZHJhdy50aGVtZS0tZGFyayN7Jn0ge1xuICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIC0tYmFja2dyb3VuZDogIzM2MzU0MTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQpO1xuICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIHdpZHRoOiB2YXIoLS1sZy1pY29uLXNpemUpO1xuICAgICAgaGVpZ2h0OiB2YXIoLS1sZy1pY29uLXNpemUpO1xuICAgIH1cblxuICAgICYtLW1vYmlsZSB7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBtYXJnaW46IDA7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgd2lkdGg6IHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpO1xuICAgICAgaGVpZ2h0OiB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import React from \"react\";\nimport DropdownMenuTrigger from \"./DropdownMenuTrigger\";\nimport DropdownMenuItem from \"./DropdownMenuItem\";\nimport MenuSeparator from \"./DropdownMenuSeparator\";\nimport DropdownMenuGroup from \"./DropdownMenuGroup\";\nimport DropdownMenuContent from \"./DropdownMenuContent\";\nimport DropdownMenuItemLink from \"./DropdownMenuItemLink\";\nimport DropdownMenuItemCustom from \"./DropdownMenuItemCustom\";\nimport {\n  getMenuContentComponent,\n  getMenuTriggerComponent,\n} from \"./dropdownMenuUtils\";\n\nimport \"./DropdownMenu.scss\";\n\nconst DropdownMenu = ({\n  children,\n  open,\n}: {\n  children?: React.ReactNode;\n  open: boolean;\n}) => {\n  const MenuTriggerComp = getMenuTriggerComponent(children);\n  const MenuContentComp = getMenuContentComponent(children);\n  return (\n    <>\n      {MenuTriggerComp}\n      {open && MenuContentComp}\n    </>\n  );\n};\n\nDropdownMenu.Trigger = DropdownMenuTrigger;\nDropdownMenu.Content = DropdownMenuContent;\nDropdownMenu.Item = DropdownMenuItem;\nDropdownMenu.ItemLink = DropdownMenuItemLink;\nDropdownMenu.ItemCustom = DropdownMenuItemCustom;\nDropdownMenu.Group = DropdownMenuGroup;\nDropdownMenu.Separator = MenuSeparator;\n\nexport default DropdownMenu;\n\nDropdownMenu.displayName = \"DropdownMenu\";\n", "import React from \"react\";\nimport tunnel from \"tunnel-rat\";\n\nexport type Tunnel = ReturnType<typeof tunnel>;\n\ntype TunnelsContextValue = {\n  MainMenuTunnel: Tunnel;\n  WelcomeScreenMenuHintTunnel: Tunnel;\n  WelcomeScreenToolbarHintTunnel: Tunnel;\n  WelcomeScreenHelpHintTunnel: Tunnel;\n  WelcomeScreenCenterTunnel: Tunnel;\n  FooterCenterTunnel: Tunnel;\n  DefaultSidebarTriggerTunnel: Tunnel;\n  DefaultSidebarTabTriggersTunnel: Tunnel;\n  OverwriteConfirmDialogTunnel: Tunnel;\n  TTDDialogTriggerTunnel: Tunnel;\n  jotaiScope: symbol;\n};\n\nexport const TunnelsContext = React.createContext<TunnelsContextValue>(null!);\n\nexport const useTunnels = () => React.useContext(TunnelsContext);\n\nexport const useInitializeTunnels = () => {\n  return React.useMemo((): TunnelsContextValue => {\n    return {\n      MainMenuTunnel: tunnel(),\n      WelcomeScreenMenuHintTunnel: tunnel(),\n      WelcomeScreenToolbarHintTunnel: tunnel(),\n      WelcomeScreenHelpHintTunnel: tunnel(),\n      WelcomeScreenCenterTunnel: tunnel(),\n      FooterCenterTunnel: tunnel(),\n      DefaultSidebarTriggerTunnel: tunnel(),\n      DefaultSidebarTabTriggersTunnel: tunnel(),\n      OverwriteConfirmDialogTunnel: tunnel(),\n      TTDDialogTriggerTunnel: tunnel(),\n      jotaiScope: Symbol(),\n    };\n  }, []);\n};\n", "import { useState } from \"react\";\nimport { ActionManager } from \"../actions/manager\";\nimport {\n  ExcalidrawElementType,\n  NonDeletedElementsMap,\n  NonDeletedSceneElementsMap,\n} from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { useDevice } from \"./App\";\nimport {\n  canChangeRoundness,\n  canHaveArrowheads,\n  getTargetElements,\n  hasBackground,\n  hasStrokeStyle,\n  hasStrokeWidth,\n} from \"../scene\";\nimport { SHAPES } from \"../shapes\";\nimport { AppClassProperties, AppProps, UIAppState, Zoom } from \"../types\";\nimport { capitalizeString, isTransparent } from \"../utils\";\nimport Stack from \"./Stack\";\nimport { ToolButton } from \"./ToolButton\";\nimport { hasStrokeColor } from \"../scene/comparisons\";\nimport { trackEvent } from \"../analytics\";\nimport { hasBoundTextElement, isTextElement } from \"../element/typeChecks\";\nimport clsx from \"clsx\";\nimport { actionToggleZenMode } from \"../actions\";\nimport { Tooltip } from \"./Tooltip\";\nimport {\n  shouldAllowVerticalAlign,\n  suppportsHorizontalAlign,\n} from \"../element/textElement\";\n\nimport \"./Actions.scss\";\nimport DropdownMenu from \"./dropdownMenu/DropdownMenu\";\nimport {\n  EmbedIcon,\n  extraToolsIcon,\n  frameToolIcon,\n  mermaidLogoIcon,\n  laserPointerToolIcon,\n  OpenAIIcon,\n  MagicIcon,\n} from \"./icons\";\nimport { KEYS } from \"../keys\";\nimport { useTunnels } from \"../context/tunnels\";\n\nexport const SelectedShapeActions = ({\n  appState,\n  elementsMap,\n  renderAction,\n}: {\n  appState: UIAppState;\n  elementsMap: NonDeletedElementsMap | NonDeletedSceneElementsMap;\n  renderAction: ActionManager[\"renderAction\"];\n}) => {\n  const targetElements = getTargetElements(elementsMap, appState);\n\n  let isSingleElementBoundContainer = false;\n  if (\n    targetElements.length === 2 &&\n    (hasBoundTextElement(targetElements[0]) ||\n      hasBoundTextElement(targetElements[1]))\n  ) {\n    isSingleElementBoundContainer = true;\n  }\n  const isEditing = Boolean(appState.editingElement);\n  const device = useDevice();\n  const isRTL = document.documentElement.getAttribute(\"dir\") === \"rtl\";\n\n  const showFillIcons =\n    (hasBackground(appState.activeTool.type) &&\n      !isTransparent(appState.currentItemBackgroundColor)) ||\n    targetElements.some(\n      (element) =>\n        hasBackground(element.type) && !isTransparent(element.backgroundColor),\n    );\n  const showChangeBackgroundIcons =\n    hasBackground(appState.activeTool.type) ||\n    targetElements.some((element) => hasBackground(element.type));\n\n  const showLinkIcon =\n    targetElements.length === 1 || isSingleElementBoundContainer;\n\n  let commonSelectedType: ExcalidrawElementType | null =\n    targetElements[0]?.type || null;\n\n  for (const element of targetElements) {\n    if (element.type !== commonSelectedType) {\n      commonSelectedType = null;\n      break;\n    }\n  }\n\n  return (\n    <div className=\"panelColumn\">\n      <div>\n        {((hasStrokeColor(appState.activeTool.type) &&\n          appState.activeTool.type !== \"image\" &&\n          commonSelectedType !== \"image\" &&\n          commonSelectedType !== \"frame\" &&\n          commonSelectedType !== \"magicframe\") ||\n          targetElements.some((element) => hasStrokeColor(element.type))) &&\n          renderAction(\"changeStrokeColor\")}\n      </div>\n      {showChangeBackgroundIcons && (\n        <div>{renderAction(\"changeBackgroundColor\")}</div>\n      )}\n      {showFillIcons && renderAction(\"changeFillStyle\")}\n\n      {(hasStrokeWidth(appState.activeTool.type) ||\n        targetElements.some((element) => hasStrokeWidth(element.type))) &&\n        renderAction(\"changeStrokeWidth\")}\n\n      {(appState.activeTool.type === \"freedraw\" ||\n        targetElements.some((element) => element.type === \"freedraw\")) &&\n        renderAction(\"changeStrokeShape\")}\n\n      {(hasStrokeStyle(appState.activeTool.type) ||\n        targetElements.some((element) => hasStrokeStyle(element.type))) && (\n        <>\n          {renderAction(\"changeStrokeStyle\")}\n          {renderAction(\"changeSloppiness\")}\n        </>\n      )}\n\n      {(canChangeRoundness(appState.activeTool.type) ||\n        targetElements.some((element) => canChangeRoundness(element.type))) && (\n        <>{renderAction(\"changeRoundness\")}</>\n      )}\n\n      {(appState.activeTool.type === \"text\" ||\n        targetElements.some(isTextElement)) && (\n        <>\n          {renderAction(\"changeFontSize\")}\n\n          {renderAction(\"changeFontFamily\")}\n\n          {(appState.activeTool.type === \"text\" ||\n            suppportsHorizontalAlign(targetElements, elementsMap)) &&\n            renderAction(\"changeTextAlign\")}\n        </>\n      )}\n\n      {shouldAllowVerticalAlign(targetElements, elementsMap) &&\n        renderAction(\"changeVerticalAlign\")}\n      {(canHaveArrowheads(appState.activeTool.type) ||\n        targetElements.some((element) => canHaveArrowheads(element.type))) && (\n        <>{renderAction(\"changeArrowhead\")}</>\n      )}\n\n      {renderAction(\"changeOpacity\")}\n\n      <fieldset>\n        <legend>{t(\"labels.layers\")}</legend>\n        <div className=\"buttonList\">\n          {renderAction(\"sendToBack\")}\n          {renderAction(\"sendBackward\")}\n          {renderAction(\"bringToFront\")}\n          {renderAction(\"bringForward\")}\n        </div>\n      </fieldset>\n\n      {targetElements.length > 1 && !isSingleElementBoundContainer && (\n        <fieldset>\n          <legend>{t(\"labels.align\")}</legend>\n          <div className=\"buttonList\">\n            {\n              // swap this order for RTL so the button positions always match their action\n              // (i.e. the leftmost button aligns left)\n            }\n            {isRTL ? (\n              <>\n                {renderAction(\"alignRight\")}\n                {renderAction(\"alignHorizontallyCentered\")}\n                {renderAction(\"alignLeft\")}\n              </>\n            ) : (\n              <>\n                {renderAction(\"alignLeft\")}\n                {renderAction(\"alignHorizontallyCentered\")}\n                {renderAction(\"alignRight\")}\n              </>\n            )}\n            {targetElements.length > 2 &&\n              renderAction(\"distributeHorizontally\")}\n            {/* breaks the row \u02C7\u02C7 */}\n            <div style={{ flexBasis: \"100%\", height: 0 }} />\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \".5rem\",\n                marginTop: \"-0.5rem\",\n              }}\n            >\n              {renderAction(\"alignTop\")}\n              {renderAction(\"alignVerticallyCentered\")}\n              {renderAction(\"alignBottom\")}\n              {targetElements.length > 2 &&\n                renderAction(\"distributeVertically\")}\n            </div>\n          </div>\n        </fieldset>\n      )}\n      {!isEditing && targetElements.length > 0 && (\n        <fieldset>\n          <legend>{t(\"labels.actions\")}</legend>\n          <div className=\"buttonList\">\n            {!device.editor.isMobile && renderAction(\"duplicateSelection\")}\n            {!device.editor.isMobile && renderAction(\"deleteSelectedElements\")}\n            {renderAction(\"group\")}\n            {renderAction(\"ungroup\")}\n            {showLinkIcon && renderAction(\"hyperlink\")}\n          </div>\n        </fieldset>\n      )}\n    </div>\n  );\n};\n\nexport const ShapesSwitcher = ({\n  activeTool,\n  appState,\n  app,\n  UIOptions,\n}: {\n  activeTool: UIAppState[\"activeTool\"];\n  appState: UIAppState;\n  app: AppClassProperties;\n  UIOptions: AppProps[\"UIOptions\"];\n}) => {\n  const [isExtraToolsMenuOpen, setIsExtraToolsMenuOpen] = useState(false);\n\n  const frameToolSelected = activeTool.type === \"frame\";\n  const laserToolSelected = activeTool.type === \"laser\";\n  const embeddableToolSelected = activeTool.type === \"embeddable\";\n\n  const { TTDDialogTriggerTunnel } = useTunnels();\n\n  return (\n    <>\n      {SHAPES.map(({ value, icon, key, numericKey, fillable }, index) => {\n        if (\n          UIOptions.tools?.[\n            value as Extract<typeof value, keyof AppProps[\"UIOptions\"][\"tools\"]>\n          ] === false\n        ) {\n          return null;\n        }\n\n        const label = t(`toolBar.${value}`);\n        const letter =\n          key && capitalizeString(typeof key === \"string\" ? key : key[0]);\n        const shortcut = letter\n          ? `${letter} ${t(\"helpDialog.or\")} ${numericKey}`\n          : `${numericKey}`;\n        return (\n          <ToolButton\n            className={clsx(\"Shape\", { fillable })}\n            key={value}\n            type=\"radio\"\n            icon={icon}\n            checked={activeTool.type === value}\n            name=\"editor-current-shape\"\n            title={`${capitalizeString(label)} \u2014 ${shortcut}`}\n            keyBindingLabel={numericKey || letter}\n            aria-label={capitalizeString(label)}\n            aria-keyshortcuts={shortcut}\n            data-testid={`toolbar-${value}`}\n            onPointerDown={({ pointerType }) => {\n              if (!appState.penDetected && pointerType === \"pen\") {\n                app.togglePenMode(true);\n              }\n            }}\n            onChange={({ pointerType }) => {\n              if (appState.activeTool.type !== value) {\n                trackEvent(\"toolbar\", value, \"ui\");\n              }\n              if (value === \"image\") {\n                app.setActiveTool({\n                  type: value,\n                  insertOnCanvasDirectly: pointerType !== \"mouse\",\n                });\n              } else {\n                app.setActiveTool({ type: value });\n              }\n            }}\n          />\n        );\n      })}\n      <div className=\"App-toolbar__divider\" />\n\n      <DropdownMenu open={isExtraToolsMenuOpen}>\n        <DropdownMenu.Trigger\n          className={clsx(\"App-toolbar__extra-tools-trigger\", {\n            \"App-toolbar__extra-tools-trigger--selected\":\n              frameToolSelected ||\n              embeddableToolSelected ||\n              // in collab we're already highlighting the laser button\n              // outside toolbar, so let's not highlight extra-tools button\n              // on top of it\n              (laserToolSelected && !app.props.isCollaborating),\n          })}\n          onToggle={() => setIsExtraToolsMenuOpen(!isExtraToolsMenuOpen)}\n          title={t(\"toolBar.extraTools\")}\n        >\n          {extraToolsIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsExtraToolsMenuOpen(false)}\n          onSelect={() => setIsExtraToolsMenuOpen(false)}\n          className=\"App-toolbar__extra-tools-dropdown\"\n        >\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"frame\" })}\n            icon={frameToolIcon}\n            shortcut={KEYS.F.toLocaleUpperCase()}\n            data-testid=\"toolbar-frame\"\n            selected={frameToolSelected}\n          >\n            {t(\"toolBar.frame\")}\n          </DropdownMenu.Item>\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"embeddable\" })}\n            icon={EmbedIcon}\n            data-testid=\"toolbar-embeddable\"\n            selected={embeddableToolSelected}\n          >\n            {t(\"toolBar.embeddable\")}\n          </DropdownMenu.Item>\n          <DropdownMenu.Item\n            onSelect={() => app.setActiveTool({ type: \"laser\" })}\n            icon={laserPointerToolIcon}\n            data-testid=\"toolbar-laser\"\n            selected={laserToolSelected}\n            shortcut={KEYS.K.toLocaleUpperCase()}\n          >\n            {t(\"toolBar.laser\")}\n          </DropdownMenu.Item>\n          <div style={{ margin: \"6px 0\", fontSize: 14, fontWeight: 600 }}>\n            Generate\n          </div>\n          {app.props.aiEnabled !== false && <TTDDialogTriggerTunnel.Out />}\n          <DropdownMenu.Item\n            onSelect={() => app.setOpenDialog({ name: \"ttd\", tab: \"mermaid\" })}\n            icon={mermaidLogoIcon}\n            data-testid=\"toolbar-embeddable\"\n          >\n            {t(\"toolBar.mermaidToExcalidraw\")}\n          </DropdownMenu.Item>\n          {app.props.aiEnabled !== false && (\n            <>\n              <DropdownMenu.Item\n                onSelect={() => app.onMagicframeToolSelect()}\n                icon={MagicIcon}\n                data-testid=\"toolbar-magicframe\"\n              >\n                {t(\"toolBar.magicframe\")}\n                <DropdownMenu.Item.Badge>AI</DropdownMenu.Item.Badge>\n              </DropdownMenu.Item>\n              <DropdownMenu.Item\n                onSelect={() => {\n                  trackEvent(\"ai\", \"open-settings\", \"d2c\");\n                  app.setOpenDialog({\n                    name: \"settings\",\n                    source: \"settings\",\n                    tab: \"diagram-to-code\",\n                  });\n                }}\n                icon={OpenAIIcon}\n                data-testid=\"toolbar-magicSettings\"\n              >\n                {t(\"toolBar.magicSettings\")}\n              </DropdownMenu.Item>\n            </>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    </>\n  );\n};\n\nexport const ZoomActions = ({\n  renderAction,\n  zoom,\n}: {\n  renderAction: ActionManager[\"renderAction\"];\n  zoom: Zoom;\n}) => (\n  <Stack.Col gap={1} className=\"zoom-actions\">\n    <Stack.Row align=\"center\">\n      {renderAction(\"zoomOut\")}\n      {renderAction(\"resetZoom\")}\n      {renderAction(\"zoomIn\")}\n    </Stack.Row>\n  </Stack.Col>\n);\n\nexport const UndoRedoActions = ({\n  renderAction,\n  className,\n}: {\n  renderAction: ActionManager[\"renderAction\"];\n  className?: string;\n}) => (\n  <div className={`undo-redo-buttons ${className}`}>\n    <div className=\"undo-button-container\">\n      <Tooltip label={t(\"buttons.undo\")}>{renderAction(\"undo\")}</Tooltip>\n    </div>\n    <div className=\"redo-button-container\">\n      <Tooltip label={t(\"buttons.redo\")}> {renderAction(\"redo\")}</Tooltip>\n    </div>\n  </div>\n);\n\nexport const ExitZenModeAction = ({\n  actionManager,\n  showExitZenModeBtn,\n}: {\n  actionManager: ActionManager;\n  showExitZenModeBtn: boolean;\n}) => (\n  <button\n    className={clsx(\"disable-zen-mode\", {\n      \"disable-zen-mode--visible\": showExitZenModeBtn,\n    })}\n    onClick={() => actionManager.executeAction(actionToggleZenMode)}\n  >\n    {t(\"buttons.exitZenMode\")}\n  </button>\n);\n\nexport const FinalizeAction = ({\n  renderAction,\n  className,\n}: {\n  renderAction: ActionManager[\"renderAction\"];\n  className?: string;\n}) => (\n  <div className={`finalize-button ${className}`}>\n    {renderAction(\"finalize\", { size: \"small\" })}\n  </div>\n);\n", "import { useCallback, useState } from \"react\";\n\nexport const useCallbackRefState = <T>() => {\n  const [refValue, setRefValue] = useState<T | null>(null);\n  const refCallback = useCallback((value: T | null) => setRefValue(value), []);\n  return [refValue, refCallback] as const;\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Dialog {\n  user-select: text;\n  cursor: auto;\n}\n.excalidraw .Dialog__title {\n  margin: 0;\n  text-align: left;\n  font-size: 1.25rem;\n  border-bottom: 1px solid var(--dialog-border-color);\n  padding: 0 0 0.75rem;\n  margin-bottom: 1.5rem;\n}\n.excalidraw .Dialog__close {\n  color: var(--color-gray-40);\n  margin: 0;\n  position: absolute;\n  top: 0.75rem;\n  right: 0.5rem;\n  border: 0;\n  background-color: transparent;\n  line-height: 0;\n  cursor: pointer;\n}\n.excalidraw .Dialog__close:hover {\n  color: var(--color-gray-60);\n}\n.excalidraw .Dialog__close:active {\n  color: var(--color-gray-40);\n}\n.excalidraw .Dialog__close svg {\n  width: 1.5rem;\n  height: 1.5rem;\n}\n.excalidraw .Dialog--fullscreen .Dialog__close {\n  top: 1.25rem;\n  right: 1.25rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJEaWFsb2cuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBRUY7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7O0FBS0Y7RUFDRTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLkRpYWxvZyB7XG4gICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG5cbiAgLkRpYWxvZ19fdGl0bGUge1xuICAgIG1hcmdpbjogMDtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZGlhbG9nLWJvcmRlci1jb2xvcik7XG4gICAgcGFkZGluZzogMCAwIDAuNzVyZW07XG4gICAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICB9XG5cbiAgLkRpYWxvZ19fY2xvc2Uge1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTQwKTtcbiAgICBtYXJnaW46IDA7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMC43NXJlbTtcbiAgICByaWdodDogMC41cmVtO1xuICAgIGJvcmRlcjogMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBsaW5lLWhlaWdodDogMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgICB9XG4gICAgJjphY3RpdmUge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNDApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICB3aWR0aDogMS41cmVtO1xuICAgICAgaGVpZ2h0OiAxLjVyZW07XG4gICAgfVxuICB9XG5cbiAgLkRpYWxvZy0tZnVsbHNjcmVlbiB7XG4gICAgLkRpYWxvZ19fY2xvc2Uge1xuICAgICAgdG9wOiAxLjI1cmVtO1xuICAgICAgcmlnaHQ6IDEuMjVyZW07XG4gICAgfVxuICB9XG59XG4iXX0= */", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw.excalidraw-modal-container {\n  position: absolute;\n  z-index: var(--zIndex-modal);\n}\n.excalidraw .Modal {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: auto;\n  padding: calc(var(--space-factor) * 10);\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .Modal .Island {\n  padding: 2.5rem;\n}\n.excalidraw .Modal__background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n  background-color: rgba(18, 18, 18, 0.2);\n  animation: Modal__background__fade-in 0.125s linear forwards;\n}\n.excalidraw .Modal__content {\n  position: relative;\n  z-index: 2;\n  width: 100%;\n  max-width: var(--max-width);\n  max-height: 100%;\n  opacity: 0;\n  transform: translateY(10px);\n  animation: Modal__content_fade-in 0.1s ease-out 0.05s forwards;\n  position: relative;\n  overflow-y: auto;\n  background: var(--island-bg-color);\n  border: 1px solid var(--dialog-border-color);\n  box-shadow: var(--modal-shadow);\n  border-radius: 6px;\n  box-sizing: border-box;\n}\n.excalidraw .Modal__content:focus {\n  outline: none;\n}\n@keyframes Modal__background__fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes Modal__content_fade-in {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.excalidraw .Modal__close {\n  color: var(--icon-fill-color);\n  margin: 0;\n  padding: 0.375rem;\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  border: 0;\n  background-color: transparent;\n  line-height: 0;\n  cursor: pointer;\n}\n.excalidraw .Modal__close svg {\n  width: 1.5rem;\n  height: 1.5rem;\n}\n.excalidraw .Dialog--fullscreen .Modal {\n  padding: 0;\n}\n.excalidraw .Dialog--fullscreen .Modal__content {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  max-width: 100%;\n  border: 0;\n  border-radius: 0;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJNb2RhbC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzFLQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUdBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0lBQ0U7O0VBRUY7SUFDRTs7O0FBSUo7RUFDRTtJQUNFO0lBQ0E7O0VBRUY7SUFDRTtJQUNBOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFLRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gICYuZXhjYWxpZHJhdy1tb2RhbC1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiB2YXIoLS16SW5kZXgtbW9kYWwpO1xuICB9XG5cbiAgLk1vZGFsIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBwYWRkaW5nOiBjYWxjKHZhcigtLXNwYWNlLWZhY3RvcikgKiAxMCk7XG5cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAuSXNsYW5kIHtcbiAgICAgIHBhZGRpbmc6IDIuNXJlbTtcbiAgICB9XG4gIH1cblxuICAuTW9kYWxfX2JhY2tncm91bmQge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgei1pbmRleDogMTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKCMxMjEyMTIsIDAuMik7XG5cbiAgICBhbmltYXRpb246IE1vZGFsX19iYWNrZ3JvdW5kX19mYWRlLWluIDAuMTI1cyBsaW5lYXIgZm9yd2FyZHM7XG4gIH1cblxuICAuTW9kYWxfX2NvbnRlbnQge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiAyO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1heC13aWR0aDogdmFyKC0tbWF4LXdpZHRoKTtcbiAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuXG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7XG4gICAgYW5pbWF0aW9uOiBNb2RhbF9fY29udGVudF9mYWRlLWluIDAuMXMgZWFzZS1vdXQgMC4wNXMgZm9yd2FyZHM7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG5cbiAgICAvLyBmb3IgbW9kYWxzLCByZXNldCBibHVycnkgYmdcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuXG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZGlhbG9nLWJvcmRlci1jb2xvcik7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tbW9kYWwtc2hhZG93KTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcblxuICAgICY6Zm9jdXMge1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICB9XG4gIH1cblxuICBAa2V5ZnJhbWVzIE1vZGFsX19iYWNrZ3JvdW5kX19mYWRlLWluIHtcbiAgICBmcm9tIHtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG5cbiAgQGtleWZyYW1lcyBNb2RhbF9fY29udGVudF9mYWRlLWluIHtcbiAgICBmcm9tIHtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xuICAgIH1cbiAgfVxuXG4gIC5Nb2RhbF9fY2xvc2Uge1xuICAgIGNvbG9yOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwLjM3NXJlbTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAxcmVtO1xuICAgIHJpZ2h0OiAxcmVtO1xuICAgIGJvcmRlcjogMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBsaW5lLWhlaWdodDogMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICBzdmcge1xuICAgICAgd2lkdGg6IDEuNXJlbTtcbiAgICAgIGhlaWdodDogMS41cmVtO1xuICAgIH1cbiAgfVxuXG4gIC5EaWFsb2ctLWZ1bGxzY3JlZW4ge1xuICAgIC5Nb2RhbCB7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgIH1cblxuICAgIC5Nb2RhbF9fY29udGVudCB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDA7XG4gICAgICBsZWZ0OiAwO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBib3R0b206IDA7XG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICBib3JkZXI6IDA7XG4gICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgIH1cbiAgfVxufVxuIl19 */", "import \"./Modal.scss\";\n\nimport { createPortal } from \"react-dom\";\nimport clsx from \"clsx\";\nimport { KEYS } from \"../keys\";\nimport { AppState } from \"../types\";\nimport { useCreatePortalContainer } from \"../hooks/useCreatePortalContainer\";\n\nexport const Modal: React.FC<{\n  className?: string;\n  children: React.ReactNode;\n  maxWidth?: number;\n  onCloseRequest(): void;\n  labelledBy: string;\n  theme?: AppState[\"theme\"];\n  closeOnClickOutside?: boolean;\n}> = (props) => {\n  const { closeOnClickOutside = true } = props;\n  const modalRoot = useCreatePortalContainer({\n    className: \"excalidraw-modal-container\",\n  });\n\n  if (!modalRoot) {\n    return null;\n  }\n\n  const handleKeydown = (event: React.KeyboardEvent) => {\n    if (event.key === KEYS.ESCAPE) {\n      event.nativeEvent.stopImmediatePropagation();\n      event.stopPropagation();\n      props.onCloseRequest();\n    }\n  };\n\n  return createPortal(\n    <div\n      className={clsx(\"Modal\", props.className)}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onKeyDown={handleKeydown}\n      aria-labelledby={props.labelledBy}\n      data-prevent-outside-click\n    >\n      <div\n        className=\"Modal__background\"\n        onClick={closeOnClickOutside ? props.onCloseRequest : undefined}\n      />\n      <div\n        className=\"Modal__content\"\n        style={{ \"--max-width\": `${props.maxWidth}px` }}\n        tabIndex={0}\n      >\n        {props.children}\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n", "import { VERSIONS } from \"../constants\";\nimport { t } from \"../i18n\";\nimport { ExcalidrawProps, UIAppState } from \"../types\";\n\nconst LibraryMenuBrowseButton = ({\n  theme,\n  id,\n  libraryReturnUrl,\n}: {\n  libraryReturnUrl: ExcalidrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n}) => {\n  const referrer =\n    libraryReturnUrl || window.location.origin + window.location.pathname;\n  return (\n    <a\n      className=\"library-menu-browse-button\"\n      href={`${import.meta.env.VITE_APP_LIBRARY_URL}?target=${\n        window.name || \"_blank\"\n      }&referrer=${referrer}&useHash=true&token=${id}&theme=${theme}&version=${\n        VERSIONS.excalidrawLibrary\n      }`}\n      target=\"_excalidraw_libraries\"\n    >\n      {t(\"labels.libraries\")}\n    </a>\n  );\n};\n\nexport default LibraryMenuBrowseButton;\n", "import { ExcalidrawProps, UIAppState } from \"../types\";\nimport LibraryMenuBrowseButton from \"./LibraryMenuBrowseButton\";\nimport clsx from \"clsx\";\n\nexport const LibraryMenuControlButtons = ({\n  libraryReturnUrl,\n  theme,\n  id,\n  style,\n  children,\n  className,\n}: {\n  libraryReturnUrl: ExcalidrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n  style: React.CSSProperties;\n  children?: React.ReactNode;\n  className?: string;\n}) => {\n  return (\n    <div\n      className={clsx(\"library-menu-control-buttons\", className)}\n      style={style}\n    >\n      <LibraryMenuBrowseButton\n        id={id}\n        libraryReturnUrl={libraryReturnUrl}\n        theme={theme}\n      />\n      {children}\n    </div>\n  );\n};\n", "import React from \"react\";\n\nimport { TranslationKeys, useI18n } from \"../i18n\";\n\n// Used for splitting i18nKey into tokens in Trans component\n// Example:\n// \"Please <link>click {{location}}</link> to continue.\".split(SPLIT_REGEX).filter(Boolean)\n// produces\n// [\"Please \", \"<link>\", \"click \", \"{{location}}\", \"</link>\", \" to continue.\"]\nconst SPLIT_REGEX = /({{[\\w-]+}})|(<[\\w-]+>)|(<\\/[\\w-]+>)/g;\n// Used for extracting \"location\" from \"{{location}}\"\nconst KEY_REGEXP = /{{([\\w-]+)}}/;\n// Used for extracting \"link\" from \"<link>\"\nconst TAG_START_REGEXP = /<([\\w-]+)>/;\n// Used for extracting \"link\" from \"</link>\"\nconst TAG_END_REGEXP = /<\\/([\\w-]+)>/;\n\nconst getTransChildren = (\n  format: string,\n  props: {\n    [key: string]: React.ReactNode | ((el: React.ReactNode) => React.ReactNode);\n  },\n): React.ReactNode[] => {\n  const stack: { name: string; children: React.ReactNode[] }[] = [\n    {\n      name: \"\",\n      children: [],\n    },\n  ];\n\n  format\n    .split(SPLIT_REGEX)\n    .filter(Boolean)\n    .forEach((match) => {\n      const tagStartMatch = match.match(TAG_START_REGEXP);\n      const tagEndMatch = match.match(TAG_END_REGEXP);\n      const keyMatch = match.match(KEY_REGEXP);\n\n      if (tagStartMatch !== null) {\n        // The match is <tag>. Set the tag name as the name if it's one of the\n        // props, e.g. for \"Please <link>click the button</link> to continue\"\n        // tagStartMatch[1] = \"link\" and props contain \"link\" then it will be\n        // pushed to stack.\n        const name = tagStartMatch[1];\n        if (props.hasOwnProperty(name)) {\n          stack.push({\n            name,\n            children: [],\n          });\n        } else {\n          console.warn(\n            `Trans: missed to pass in prop ${name} for interpolating ${format}`,\n          );\n        }\n      } else if (tagEndMatch !== null) {\n        // If tag end match is found, this means we need to replace the content with\n        // its actual value in prop e.g. format = \"Please <link>click the\n        // button</link> to continue\", tagEndMatch is for \"</link>\", stack last item name =\n        // \"link\" and props.link = (el) => <a\n        // href=\"https://example.com\">{el}</a> then its prop value will be\n        // pushed to \"link\"'s children so on DOM when rendering it's rendered as\n        // <a href=\"https://example.com\">click the button</a>\n        const name = tagEndMatch[1];\n        if (name === stack[stack.length - 1].name) {\n          const item = stack.pop()!;\n          const itemChildren = React.createElement(\n            React.Fragment,\n            {},\n            ...item.children,\n          );\n          const fn = props[item.name];\n          if (typeof fn === \"function\") {\n            stack[stack.length - 1].children.push(fn(itemChildren));\n          }\n        } else {\n          console.warn(\n            `Trans: unexpected end tag ${match} for interpolating ${format}`,\n          );\n        }\n      } else if (keyMatch !== null) {\n        // The match is for {{key}}. Check if the key is present in props and set\n        // the prop value as children of last stack item e.g. format = \"Hello\n        // {{name}}\", key = \"name\" and props.name = \"Excalidraw\" then its prop\n        // value will be pushed to \"name\"'s children so it's rendered on DOM as\n        // \"Hello Excalidraw\"\n        const name = keyMatch[1];\n        if (props.hasOwnProperty(name)) {\n          stack[stack.length - 1].children.push(props[name] as React.ReactNode);\n        } else {\n          console.warn(\n            `Trans: key ${name} not in props for interpolating ${format}`,\n          );\n        }\n      } else {\n        // If none of cases match means we just need to push the string\n        // to stack eg - \"Hello {{name}} Whats up?\" \"Hello\", \"Whats up\" will be pushed\n        stack[stack.length - 1].children.push(match);\n      }\n    });\n\n  if (stack.length !== 1) {\n    console.warn(`Trans: stack not empty for interpolating ${format}`);\n  }\n\n  return stack[0].children;\n};\n\n/*\nTrans component is used for translating JSX.\n\n```json\n{\n  \"example1\": \"Hello {{audience}}\",\n  \"example2\": \"Please <link>click the button</link> to continue.\",\n  \"example3\": \"Please <link>click {{location}}</link> to continue.\",\n  \"example4\": \"Please <link>click <bold>{{location}}</bold></link> to continue.\",\n}\n```\n\n```jsx\n<Trans i18nKey=\"example1\" audience=\"world\" />\n\n<Trans\n  i18nKey=\"example2\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n/>\n\n<Trans\n  i18nKey=\"example3\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n  location=\"the button\"\n/>\n\n<Trans\n  i18nKey=\"example4\"\n  connectLink={(el) => <a href=\"https://example.com\">{el}</a>}\n  location=\"the button\"\n  bold={(el) => <strong>{el}</strong>}\n/>\n```\n\nOutput:\n\n```html\nHello world\nPlease <a href=\"https://example.com\">click the button</a> to continue.\nPlease <a href=\"https://example.com\">click the button</a> to continue.\nPlease <a href=\"https://example.com\">click <strong>the button</strong></a> to continue.\n```\n*/\nconst Trans = ({\n  i18nKey,\n  children,\n  ...props\n}: {\n  i18nKey: TranslationKeys;\n  [key: string]: React.ReactNode | ((el: React.ReactNode) => React.ReactNode);\n}) => {\n  const { t } = useI18n();\n\n  // This is needed to avoid unique key error in list which gets rendered from getTransChildren\n  return React.createElement(\n    React.Fragment,\n    {},\n    ...getTransChildren(t(i18nKey), props),\n  );\n};\n\nexport default Trans;\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .confirm-dialog-buttons {\n  display: flex;\n  column-gap: 0.5rem;\n  justify-content: flex-end;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJDb25maXJtRGlhbG9nLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDektFO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLmNvbmZpcm0tZGlhbG9nIHtcbiAgICAmLWJ1dHRvbnMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGNvbHVtbi1nYXA6IDAuNXJlbTtcbiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgfVxuICB9XG59XG4iXX0= */", ".excalidraw .Dialog__action-button {\n  position: relative;\n  display: flex;\n  column-gap: 0.5rem;\n  align-items: center;\n  padding: 0.5rem 1.5rem;\n  border: 1px solid var(--default-border-color);\n  background-color: transparent;\n  height: 3rem;\n  border-radius: var(--border-radius-lg);\n  letter-spacing: 0.4px;\n  color: inherit;\n  font-family: inherit;\n  font-size: 0.875rem;\n  font-weight: 600;\n  user-select: none;\n}\n.excalidraw .Dialog__action-button svg {\n  display: block;\n  width: 1rem;\n  height: 1rem;\n}\n.excalidraw .Dialog__action-button--danger {\n  background-color: var(--color-danger);\n  border-color: var(--color-danger);\n  color: #fff;\n}\n.excalidraw .Dialog__action-button--primary {\n  background-color: var(--color-primary);\n  border-color: var(--color-primary);\n  color: #fff;\n}\n.excalidraw.theme--dark .Dialog__action-button--danger {\n  color: var(--color-gray-100);\n}\n.excalidraw.theme--dark .Dialog__action-button--primary {\n  color: var(--color-gray-100);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkRpYWxvZ0FjdGlvbkJ1dHRvbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUtGO0VBQ0U7O0FBR0Y7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLkRpYWxvZ19fYWN0aW9uLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgY29sdW1uLWdhcDogMC41cmVtO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMC41cmVtIDEuNXJlbTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgaGVpZ2h0OiAzcmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjRweDtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG5cbiAgICBzdmcge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB3aWR0aDogMXJlbTtcbiAgICAgIGhlaWdodDogMXJlbTtcbiAgICB9XG5cbiAgICAmLS1kYW5nZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcbiAgICAgIGNvbG9yOiAjZmZmO1xuICAgIH1cblxuICAgICYtLXByaW1hcnkge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgY29sb3I6ICNmZmY7XG4gICAgfVxuICB9XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLkRpYWxvZ19fYWN0aW9uLWJ1dHRvbi0tZGFuZ2VyIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG4gICAgfVxuXG4gICAgLkRpYWxvZ19fYWN0aW9uLWJ1dHRvbi0tcHJpbWFyeSB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS0xMDApO1xuICAgIH1cbiAgfVxufVxuIl19 */", "import clsx from \"clsx\";\nimport { ReactNode } from \"react\";\nimport \"./DialogActionButton.scss\";\nimport Spinner from \"./Spinner\";\n\ninterface DialogActionButtonProps {\n  label: string;\n  children?: ReactNode;\n  actionType?: \"primary\" | \"danger\";\n  isLoading?: boolean;\n}\n\nconst DialogActionButton = ({\n  label,\n  onClick,\n  className,\n  children,\n  actionType,\n  type = \"button\",\n  isLoading,\n  ...rest\n}: DialogActionButtonProps & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  const cs = actionType ? `Dialog__action-button--${actionType}` : \"\";\n\n  return (\n    <button\n      className={clsx(\"Dialog__action-button\", cs, className)}\n      type={type}\n      aria-label={label}\n      onClick={onClick}\n      {...rest}\n    >\n      {children && (\n        <div style={isLoading ? { visibility: \"hidden\" } : {}}>{children}</div>\n      )}\n      <div style={isLoading ? { visibility: \"hidden\" } : {}}>{label}</div>\n      {isLoading && (\n        <div style={{ position: \"absolute\", inset: 0 }}>\n          <Spinner />\n        </div>\n      )}\n    </button>\n  );\n};\n\nexport default DialogActionButton;\n", "import { t } from \"../i18n\";\nimport { Dialog, DialogProps } from \"./Dialog\";\n\nimport \"./ConfirmDialog.scss\";\nimport DialogActionButton from \"./DialogActionButton\";\nimport { useSetAtom } from \"jotai\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport { useExcalidrawContainer, useExcalidrawSetAppState } from \"./App\";\nimport { jotaiScope } from \"../jotai\";\n\ninterface Props extends Omit<DialogProps, \"onCloseRequest\"> {\n  onConfirm: () => void;\n  onCancel: () => void;\n  confirmText?: string;\n  cancelText?: string;\n}\nconst ConfirmDialog = (props: Props) => {\n  const {\n    onConfirm,\n    onCancel,\n    children,\n    confirmText = t(\"buttons.confirm\"),\n    cancelText = t(\"buttons.cancel\"),\n    className = \"\",\n    ...rest\n  } = props;\n  const setAppState = useExcalidrawSetAppState();\n  const setIsLibraryMenuOpen = useSetAtom(isLibraryMenuOpenAtom, jotaiScope);\n  const { container } = useExcalidrawContainer();\n\n  return (\n    <Dialog\n      onCloseRequest={onCancel}\n      size=\"small\"\n      {...rest}\n      className={`confirm-dialog ${className}`}\n    >\n      {children}\n      <div className=\"confirm-dialog-buttons\">\n        <DialogActionButton\n          label={cancelText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            onCancel();\n            container?.focus();\n          }}\n        />\n        <DialogActionButton\n          label={confirmText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            onConfirm();\n            container?.focus();\n          }}\n          actionType=\"danger\"\n        />\n      </div>\n    </Dialog>\n  );\n};\nexport default ConfirmDialog;\n", "import { EDITOR_LS_KEYS } from \"../constants\";\nimport { JSONValue } from \"../types\";\n\nexport class EditorLocalStorage {\n  static has(key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS]) {\n    try {\n      return !!window.localStorage.getItem(key);\n    } catch (error: any) {\n      console.warn(`localStorage.getItem error: ${error.message}`);\n      return false;\n    }\n  }\n\n  static get<T extends JSONValue>(\n    key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n  ) {\n    try {\n      const value = window.localStorage.getItem(key);\n      if (value) {\n        return JSON.parse(value) as T;\n      }\n      return null;\n    } catch (error: any) {\n      console.warn(`localStorage.getItem error: ${error.message}`);\n      return null;\n    }\n  }\n\n  static set = (\n    key: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n    value: JSONValue,\n  ) => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(value));\n      return true;\n    } catch (error: any) {\n      console.warn(`localStorage.setItem error: ${error.message}`);\n      return false;\n    }\n  };\n\n  static delete = (\n    name: typeof EDITOR_LS_KEYS[keyof typeof EDITOR_LS_KEYS],\n  ) => {\n    try {\n      window.localStorage.removeItem(name);\n    } catch (error: any) {\n      console.warn(`localStorage.removeItem error: ${error.message}`);\n    }\n  };\n}\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .publish-library__fields {\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .publish-library__fields label {\n  padding: 1em 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.excalidraw .publish-library__fields label span {\n  font-weight: 500;\n  font-size: 1rem;\n  color: #868e96;\n}\n.excalidraw .publish-library__fields label input,\n.excalidraw .publish-library__fields label textarea {\n  width: 70%;\n  padding: 0.6em;\n  font-family: var(--ui-font);\n}\n.excalidraw .publish-library__fields label .required {\n  color: #e03131;\n  margin: 0.2rem;\n}\n.excalidraw .publish-library__buttons {\n  display: flex;\n  padding: 0.2rem 0;\n  justify-content: flex-end;\n  gap: 0.5rem;\n}\n.excalidraw .publish-library__buttons .ToolIcon__icon {\n  min-width: 2.5rem;\n  width: auto;\n  font-size: 1rem;\n}\n.excalidraw .publish-library__buttons .ToolIcon_type_button {\n  margin-left: 1rem;\n  padding: 0 0.5rem;\n}\n.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button {\n  background-color: #228be6;\n}\n.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button:hover {\n  background-color: #1971c2;\n}\n.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button {\n  background-color: #adb5bd;\n}\n.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button:hover {\n  background-color: #868e96;\n}\n.excalidraw .publish-library__buttons .ToolIcon__icon {\n  color: #ffffff;\n}\n.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner {\n  --spinner-color: #fff;\n}\n.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner svg {\n  padding: 0.5rem;\n}\n.excalidraw .publish-library .selected-library-items {\n  display: flex;\n  flex-wrap: wrap;\n}\n.excalidraw .publish-library .selected-library-items .single-library-item-wrapper {\n  width: 9rem;\n}\n.excalidraw .publish-library-warning {\n  color: #fa5252;\n}\n.excalidraw .publish-library-note {\n  padding: 1em 0;\n  font-style: italic;\n  font-size: 14px;\n  display: block;\n}\n.excalidraw .single-library-item {\n  position: relative;\n}\n.excalidraw .single-library-item-status {\n  position: absolute;\n  top: 0.3rem;\n  left: 0.3rem;\n  font-size: 0.7rem;\n  color: #f03e3e;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 0.1rem 0.2rem;\n  border-radius: 0.2rem;\n}\n.excalidraw .single-library-item__svg {\n  background-color: #ffffff;\n  padding: 0.3rem;\n  width: 7.5rem;\n  height: 7.5rem;\n  border: 1px solid var(--button-gray-2);\n}\n.excalidraw .single-library-item__svg svg {\n  width: 100%;\n  height: 100%;\n}\n.excalidraw .single-library-item .ToolIcon__icon {\n  background-color: #ffffff;\n  width: auto;\n  height: auto;\n  margin: 0 0.5rem;\n}\n.excalidraw .single-library-item .ToolIcon,\n.excalidraw .single-library-item .ToolIcon_type_button:hover {\n  background-color: white;\n}\n.excalidraw .single-library-item .required,\n.excalidraw .single-library-item .error {\n  color: #e03131;\n  font-weight: bold;\n  font-size: 1rem;\n  margin: 0.2rem;\n}\n.excalidraw .single-library-item .error {\n  font-weight: 500;\n  margin: 0;\n  padding: 0.3em 0;\n}\n.excalidraw .single-library-item--remove {\n  position: absolute;\n  top: 0.2rem;\n  right: 1rem;\n}\n.excalidraw .single-library-item--remove .ToolIcon__icon {\n  margin: 0;\n}\n.excalidraw .single-library-item--remove .ToolIcon__icon {\n  background-color: #fa5252;\n}\n.excalidraw .single-library-item--remove .ToolIcon__icon:hover {\n  background-color: #f03e3e;\n}\n.excalidraw .single-library-item--remove .ToolIcon__icon:active {\n  background-color: #e03131;\n}\n.excalidraw .single-library-item--remove svg {\n  color: #ffffff;\n  padding: 0.26rem;\n  border-radius: 0.3em;\n  width: 1rem;\n  height: 1rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJQdWJsaXNoTGlicmFyeS5zY3NzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQ3pLRTtFQUNFO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFDQTtFQUNFO0VBQ0E7RUFDQSxPQ3FCRTs7QURuQko7QUFBQTtFQUVFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFLE9DeUNDO0VEeENEOztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0Usa0JDMkpJOztBRHpKSjtFQUNFLGtCQzBKRTs7QUR0Sk47RUFDRSxrQkN0Qkk7O0FEdUJKO0VBQ0Usa0JDdkJFOztBRDJCTjtFQUNFLE9DdERXOztBRHVEWDtFQUNFOztBQUNBO0VBQ0U7O0FBTVI7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBSUo7RUFDRSxPQ3BCSzs7QUR1QlA7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQSxPQ3RDSztFRHVDTDtFQUNBO0VBQ0E7O0FBR0Y7RUFDRSxrQkNwR2E7RURxR2I7RUFDQTtFQUNBO0VBQ0E7O0FBQ0E7RUFDRTtFQUNBOztBQUlKO0VBQ0Usa0JDaEhhO0VEaUhiO0VBQ0E7RUFDQTs7QUFFRjtBQUFBO0VBRUU7O0FBRUY7QUFBQTtFQUVFLE9DbkVLO0VEb0VMO0VBQ0E7RUFDQTs7QUFFRjtFQUNFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUVGO0VBQ0Usa0JDekZHOztBRDBGSDtFQUNFLGtCQzFGQzs7QUQ0Rkg7RUFDRSxrQkM1RkM7O0FEK0ZMO0VBQ0UsT0N4Slc7RUR5Slg7RUFDQTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAucHVibGlzaC1saWJyYXJ5IHtcbiAgICAmX19maWVsZHMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAgIGxhYmVsIHtcbiAgICAgICAgcGFkZGluZzogMWVtIDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgc3BhbiB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgY29sb3I6ICRvYy1ncmF5LTY7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQsXG4gICAgICAgIHRleHRhcmVhIHtcbiAgICAgICAgICB3aWR0aDogNzAlO1xuICAgICAgICAgIHBhZGRpbmc6IDAuNmVtO1xuICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5yZXF1aXJlZCB7XG4gICAgICAgICAgY29sb3I6ICRvYy1yZWQtODtcbiAgICAgICAgICBtYXJnaW46IDAuMnJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICZfX2J1dHRvbnMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIHBhZGRpbmc6IDAuMnJlbSAwO1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIGdhcDogMC41cmVtO1xuXG4gICAgICAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICBtaW4td2lkdGg6IDIuNXJlbTtcbiAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIH1cblxuICAgICAgLlRvb2xJY29uX3R5cGVfYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDFyZW07XG4gICAgICAgIHBhZGRpbmc6IDAgMC41cmVtO1xuICAgICAgfVxuXG4gICAgICAmLS1jb25maXJtLlRvb2xJY29uX3R5cGVfYnV0dG9uIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG9jLWJsdWUtNjtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb2MtYmx1ZS04O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYtLWNhbmNlbC5Ub29sSWNvbl90eXBlX2J1dHRvbiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRvYy1ncmF5LTU7XG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRvYy1ncmF5LTY7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgY29sb3I6ICRvYy13aGl0ZTtcbiAgICAgICAgLlNwaW5uZXIge1xuICAgICAgICAgIC0tc3Bpbm5lci1jb2xvcjogI2ZmZjtcbiAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC5zZWxlY3RlZC1saWJyYXJ5LWl0ZW1zIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG5cbiAgICAgIC5zaW5nbGUtbGlicmFyeS1pdGVtLXdyYXBwZXIge1xuICAgICAgICB3aWR0aDogOXJlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLXdhcm5pbmcge1xuICAgICAgY29sb3I6ICRvYy1yZWQtNjtcbiAgICB9XG5cbiAgICAmLW5vdGUge1xuICAgICAgcGFkZGluZzogMWVtIDA7XG4gICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gIH1cblxuICAuc2luZ2xlLWxpYnJhcnktaXRlbSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgJi1zdGF0dXMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAwLjNyZW07XG4gICAgICBsZWZ0OiAwLjNyZW07XG4gICAgICBmb250LXNpemU6IDAuN3JlbTtcbiAgICAgIGNvbG9yOiAkb2MtcmVkLTc7XG4gICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XG4gICAgICBwYWRkaW5nOiAwLjFyZW0gMC4ycmVtO1xuICAgICAgYm9yZGVyLXJhZGl1czogMC4ycmVtO1xuICAgIH1cblxuICAgICZfX3N2ZyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb2Mtd2hpdGU7XG4gICAgICBwYWRkaW5nOiAwLjNyZW07XG4gICAgICB3aWR0aDogNy41cmVtO1xuICAgICAgaGVpZ2h0OiA3LjVyZW07XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0yKTtcbiAgICAgIHN2ZyB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRvYy13aGl0ZTtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgbWFyZ2luOiAwIDAuNXJlbTtcbiAgICB9XG4gICAgLlRvb2xJY29uLFxuICAgIC5Ub29sSWNvbl90eXBlX2J1dHRvbjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICB9XG4gICAgLnJlcXVpcmVkLFxuICAgIC5lcnJvciB7XG4gICAgICBjb2xvcjogJG9jLXJlZC04O1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICBtYXJnaW46IDAuMnJlbTtcbiAgICB9XG4gICAgLmVycm9yIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICBtYXJnaW46IDA7XG4gICAgICBwYWRkaW5nOiAwLjNlbSAwO1xuICAgIH1cblxuICAgICYtLXJlbW92ZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDAuMnJlbTtcbiAgICAgIHJpZ2h0OiAxcmVtO1xuXG4gICAgICAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG4gICAgICAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb2MtcmVkLTY7XG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRvYy1yZWQtNztcbiAgICAgICAgfVxuICAgICAgICAmOmFjdGl2ZSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG9jLXJlZC04O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogJG9jLXdoaXRlO1xuICAgICAgICBwYWRkaW5nOiAwLjI2cmVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjNlbTtcbiAgICAgICAgd2lkdGg6IDFyZW07XG4gICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8vXG4vL1xuLy8gIPCdl5Yg8J2XoiDwnZefIPCdl6Ig8J2XpVxuLy8gIHYgMS45LjFcbi8vXG4vLyAg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cblxuLy8gIEdlbmVyYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXdoaXRlOiAgICAgICAgICNmZmZmZmY7XG4kb2MtYmxhY2s6ICAgICAgICAgIzAwMDAwMDtcblxuXG4vLyAgR3JheVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JheS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmOWZhLFxuICBcIjFcIjogI2YxZjNmNSxcbiAgXCIyXCI6ICNlOWVjZWYsXG4gIFwiM1wiOiAjZGVlMmU2LFxuICBcIjRcIjogI2NlZDRkYSxcbiAgXCI1XCI6ICNhZGI1YmQsXG4gIFwiNlwiOiAjODY4ZTk2LFxuICBcIjdcIjogIzQ5NTA1NyxcbiAgXCI4XCI6ICMzNDNhNDAsXG4gIFwiOVwiOiAjMjEyNTI5XG4pO1xuXG4kb2MtZ3JheS0wOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMFwiKTtcbiRvYy1ncmF5LTE6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXktMjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjJcIik7XG4kb2MtZ3JheS0zOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiM1wiKTtcbiRvYy1ncmF5LTQ6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXktNTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjVcIik7XG4kb2MtZ3JheS02OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNlwiKTtcbiRvYy1ncmF5LTc6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXktODogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjhcIik7XG4kb2MtZ3JheS05OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUmVkXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1yZWQtbGlzdDogKFxuICBcIjBcIjogI2ZmZjVmNSxcbiAgXCIxXCI6ICNmZmUzZTMsXG4gIFwiMlwiOiAjZmZjOWM5LFxuICBcIjNcIjogI2ZmYThhOCxcbiAgXCI0XCI6ICNmZjg3ODcsXG4gIFwiNVwiOiAjZmY2YjZiLFxuICBcIjZcIjogI2ZhNTI1MixcbiAgXCI3XCI6ICNmMDNlM2UsXG4gIFwiOFwiOiAjZTAzMTMxLFxuICBcIjlcIjogI2M5MmEyYVxuKTtcblxuJG9jLXJlZC0wOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIwXCIpO1xuJG9jLXJlZC0xOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIxXCIpO1xuJG9jLXJlZC0yOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIyXCIpO1xuJG9jLXJlZC0zOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIzXCIpO1xuJG9jLXJlZC00OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI0XCIpO1xuJG9jLXJlZC01OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI1XCIpO1xuJG9jLXJlZC02OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI2XCIpO1xuJG9jLXJlZC03OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI3XCIpO1xuJG9jLXJlZC04OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI4XCIpO1xuJG9jLXJlZC05OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBQaW5rXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1waW5rLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmYwZjYsXG4gIFwiMVwiOiAjZmZkZWViLFxuICBcIjJcIjogI2ZjYzJkNyxcbiAgXCIzXCI6ICNmYWEyYzEsXG4gIFwiNFwiOiAjZjc4M2FjLFxuICBcIjVcIjogI2YwNjU5NSxcbiAgXCI2XCI6ICNlNjQ5ODAsXG4gIFwiN1wiOiAjZDYzMzZjLFxuICBcIjhcIjogI2MyMjU1YyxcbiAgXCI5XCI6ICNhNjFlNGRcbik7XG5cbiRvYy1waW5rLTA6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIwXCIpO1xuJG9jLXBpbmstMTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjFcIik7XG4kb2MtcGluay0yOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMlwiKTtcbiRvYy1waW5rLTM6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIzXCIpO1xuJG9jLXBpbmstNDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjRcIik7XG4kb2MtcGluay01OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNVwiKTtcbiRvYy1waW5rLTY6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI2XCIpO1xuJG9jLXBpbmstNzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjdcIik7XG4kb2MtcGluay04OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOFwiKTtcbiRvYy1waW5rLTk6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmFwZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JhcGUtbGlzdDogKFxuICBcIjBcIjogI2Y4ZjBmYyxcbiAgXCIxXCI6ICNmM2Q5ZmEsXG4gIFwiMlwiOiAjZWViZWZhLFxuICBcIjNcIjogI2U1OTlmNyxcbiAgXCI0XCI6ICNkYTc3ZjIsXG4gIFwiNVwiOiAjY2M1ZGU4LFxuICBcIjZcIjogI2JlNGJkYixcbiAgXCI3XCI6ICNhZTNlYzksXG4gIFwiOFwiOiAjOWMzNmI1LFxuICBcIjlcIjogIzg2MmU5Y1xuKTtcblxuJG9jLWdyYXBlLTA6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmFwZS0xOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjFcIik7XG4kb2MtZ3JhcGUtMjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXBlLTM6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmFwZS00OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjRcIik7XG4kb2MtZ3JhcGUtNTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXBlLTY6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmFwZS03OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjdcIik7XG4kb2MtZ3JhcGUtODogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXBlLTk6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVmlvbGV0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy12aW9sZXQtbGlzdDogKFxuICBcIjBcIjogI2YzZjBmZixcbiAgXCIxXCI6ICNlNWRiZmYsXG4gIFwiMlwiOiAjZDBiZmZmLFxuICBcIjNcIjogI2IxOTdmYyxcbiAgXCI0XCI6ICM5Nzc1ZmEsXG4gIFwiNVwiOiAjODQ1ZWY3LFxuICBcIjZcIjogIzc5NTBmMixcbiAgXCI3XCI6ICM3MDQ4ZTgsXG4gIFwiOFwiOiAjNjc0MWQ5LFxuICBcIjlcIjogIzVmM2RjNFxuKTtcblxuJG9jLXZpb2xldC0wOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIwXCIpO1xuJG9jLXZpb2xldC0xOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIxXCIpO1xuJG9jLXZpb2xldC0yOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIyXCIpO1xuJG9jLXZpb2xldC0zOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIzXCIpO1xuJG9jLXZpb2xldC00OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI0XCIpO1xuJG9jLXZpb2xldC01OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI1XCIpO1xuJG9jLXZpb2xldC02OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI2XCIpO1xuJG9jLXZpb2xldC03OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI3XCIpO1xuJG9jLXZpb2xldC04OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI4XCIpO1xuJG9jLXZpb2xldC05OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBJbmRpZ29cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWluZGlnby1saXN0OiAoXG4gIFwiMFwiOiAjZWRmMmZmLFxuICBcIjFcIjogI2RiZTRmZixcbiAgXCIyXCI6ICNiYWM4ZmYsXG4gIFwiM1wiOiAjOTFhN2ZmLFxuICBcIjRcIjogIzc0OGZmYyxcbiAgXCI1XCI6ICM1YzdjZmEsXG4gIFwiNlwiOiAjNGM2ZWY1LFxuICBcIjdcIjogIzQyNjNlYixcbiAgXCI4XCI6ICMzYjViZGIsXG4gIFwiOVwiOiAjMzY0ZmM3XG4pO1xuXG4kb2MtaW5kaWdvLTA6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjBcIik7XG4kb2MtaW5kaWdvLTE6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjFcIik7XG4kb2MtaW5kaWdvLTI6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjJcIik7XG4kb2MtaW5kaWdvLTM6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjNcIik7XG4kb2MtaW5kaWdvLTQ6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjRcIik7XG4kb2MtaW5kaWdvLTU6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjVcIik7XG4kb2MtaW5kaWdvLTY6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjZcIik7XG4kb2MtaW5kaWdvLTc6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjdcIik7XG4kb2MtaW5kaWdvLTg6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjhcIik7XG4kb2MtaW5kaWdvLTk6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjlcIik7XG5cblxuLy8gIEJsdWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWJsdWUtbGlzdDogKFxuICBcIjBcIjogI2U3ZjVmZixcbiAgXCIxXCI6ICNkMGViZmYsXG4gIFwiMlwiOiAjYTVkOGZmLFxuICBcIjNcIjogIzc0YzBmYyxcbiAgXCI0XCI6ICM0ZGFiZjcsXG4gIFwiNVwiOiAjMzM5YWYwLFxuICBcIjZcIjogIzIyOGJlNixcbiAgXCI3XCI6ICMxYzdlZDYsXG4gIFwiOFwiOiAjMTk3MWMyLFxuICBcIjlcIjogIzE4NjRhYlxuKTtcblxuJG9jLWJsdWUtMDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjBcIik7XG4kb2MtYmx1ZS0xOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMVwiKTtcbiRvYy1ibHVlLTI6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIyXCIpO1xuJG9jLWJsdWUtMzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjNcIik7XG4kb2MtYmx1ZS00OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNFwiKTtcbiRvYy1ibHVlLTU6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI1XCIpO1xuJG9jLWJsdWUtNjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjZcIik7XG4kb2MtYmx1ZS03OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiN1wiKTtcbiRvYy1ibHVlLTg6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI4XCIpO1xuJG9jLWJsdWUtOTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIEN5YW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWN5YW4tbGlzdDogKFxuICBcIjBcIjogI2UzZmFmYyxcbiAgXCIxXCI6ICNjNWY2ZmEsXG4gIFwiMlwiOiAjOTllOWYyLFxuICBcIjNcIjogIzY2ZDllOCxcbiAgXCI0XCI6ICMzYmM5ZGIsXG4gIFwiNVwiOiAjMjJiOGNmLFxuICBcIjZcIjogIzE1YWFiZixcbiAgXCI3XCI6ICMxMDk4YWQsXG4gIFwiOFwiOiAjMGM4NTk5LFxuICBcIjlcIjogIzBiNzI4NVxuKTtcblxuJG9jLWN5YW4tMDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjBcIik7XG4kb2MtY3lhbi0xOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMVwiKTtcbiRvYy1jeWFuLTI6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIyXCIpO1xuJG9jLWN5YW4tMzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjNcIik7XG4kb2MtY3lhbi00OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNFwiKTtcbiRvYy1jeWFuLTU6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI1XCIpO1xuJG9jLWN5YW4tNjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjZcIik7XG4kb2MtY3lhbi03OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiN1wiKTtcbiRvYy1jeWFuLTg6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI4XCIpO1xuJG9jLWN5YW4tOTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIFRlYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXRlYWwtbGlzdDogKFxuICBcIjBcIjogI2U2ZmNmNSxcbiAgXCIxXCI6ICNjM2ZhZTgsXG4gIFwiMlwiOiAjOTZmMmQ3LFxuICBcIjNcIjogIzYzZTZiZSxcbiAgXCI0XCI6ICMzOGQ5YTksXG4gIFwiNVwiOiAjMjBjOTk3LFxuICBcIjZcIjogIzEyYjg4NixcbiAgXCI3XCI6ICMwY2E2NzgsXG4gIFwiOFwiOiAjMDk5MjY4LFxuICBcIjlcIjogIzA4N2Y1YlxuKTtcblxuJG9jLXRlYWwtMDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjBcIik7XG4kb2MtdGVhbC0xOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMVwiKTtcbiRvYy10ZWFsLTI6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIyXCIpO1xuJG9jLXRlYWwtMzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjNcIik7XG4kb2MtdGVhbC00OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNFwiKTtcbiRvYy10ZWFsLTU6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI1XCIpO1xuJG9jLXRlYWwtNjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjZcIik7XG4kb2MtdGVhbC03OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiN1wiKTtcbiRvYy10ZWFsLTg6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI4XCIpO1xuJG9jLXRlYWwtOTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyZWVuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmVlbi1saXN0OiAoXG4gIFwiMFwiOiAjZWJmYmVlLFxuICBcIjFcIjogI2QzZjlkOCxcbiAgXCIyXCI6ICNiMmYyYmIsXG4gIFwiM1wiOiAjOGNlOTlhLFxuICBcIjRcIjogIzY5ZGI3YyxcbiAgXCI1XCI6ICM1MWNmNjYsXG4gIFwiNlwiOiAjNDBjMDU3LFxuICBcIjdcIjogIzM3YjI0ZCxcbiAgXCI4XCI6ICMyZjllNDQsXG4gIFwiOVwiOiAjMmI4YTNlXG4pO1xuXG4kb2MtZ3JlZW4tMDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIwXCIpO1xuJG9jLWdyZWVuLTE6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmVlbi0yOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjJcIik7XG4kb2MtZ3JlZW4tMzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIzXCIpO1xuJG9jLWdyZWVuLTQ6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmVlbi01OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjVcIik7XG4kb2MtZ3JlZW4tNjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI2XCIpO1xuJG9jLWdyZWVuLTc6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmVlbi04OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjhcIik7XG4kb2MtZ3JlZW4tOTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBMaW1lXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1saW1lLWxpc3Q6IChcbiAgXCIwXCI6ICNmNGZjZTMsXG4gIFwiMVwiOiAjZTlmYWM4LFxuICBcIjJcIjogI2Q4ZjVhMixcbiAgXCIzXCI6ICNjMGViNzUsXG4gIFwiNFwiOiAjYTllMzRiLFxuICBcIjVcIjogIzk0ZDgyZCxcbiAgXCI2XCI6ICM4MmM5MWUsXG4gIFwiN1wiOiAjNzRiODE2LFxuICBcIjhcIjogIzY2YTgwZixcbiAgXCI5XCI6ICM1Yzk0MGRcbik7XG5cbiRvYy1saW1lLTA6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIwXCIpO1xuJG9jLWxpbWUtMTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjFcIik7XG4kb2MtbGltZS0yOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMlwiKTtcbiRvYy1saW1lLTM6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIzXCIpO1xuJG9jLWxpbWUtNDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjRcIik7XG4kb2MtbGltZS01OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNVwiKTtcbiRvYy1saW1lLTY6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI2XCIpO1xuJG9jLWxpbWUtNzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjdcIik7XG4kb2MtbGltZS04OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOFwiKTtcbiRvYy1saW1lLTk6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBZZWxsb3dcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXllbGxvdy1saXN0OiAoXG4gIFwiMFwiOiAjZmZmOWRiLFxuICBcIjFcIjogI2ZmZjNiZixcbiAgXCIyXCI6ICNmZmVjOTksXG4gIFwiM1wiOiAjZmZlMDY2LFxuICBcIjRcIjogI2ZmZDQzYixcbiAgXCI1XCI6ICNmY2M0MTksXG4gIFwiNlwiOiAjZmFiMDA1LFxuICBcIjdcIjogI2Y1OWYwMCxcbiAgXCI4XCI6ICNmMDhjMDAsXG4gIFwiOVwiOiAjZTY3NzAwXG4pO1xuXG4kb2MteWVsbG93LTA6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjBcIik7XG4kb2MteWVsbG93LTE6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjFcIik7XG4kb2MteWVsbG93LTI6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjJcIik7XG4kb2MteWVsbG93LTM6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjNcIik7XG4kb2MteWVsbG93LTQ6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjRcIik7XG4kb2MteWVsbG93LTU6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjVcIik7XG4kb2MteWVsbG93LTY6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjZcIik7XG4kb2MteWVsbG93LTc6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjdcIik7XG4kb2MteWVsbG93LTg6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjhcIik7XG4kb2MteWVsbG93LTk6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjlcIik7XG5cblxuLy8gIE9yYW5nZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtb3JhbmdlLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY0ZTYsXG4gIFwiMVwiOiAjZmZlOGNjLFxuICBcIjJcIjogI2ZmZDhhOCxcbiAgXCIzXCI6ICNmZmMwNzgsXG4gIFwiNFwiOiAjZmZhOTRkLFxuICBcIjVcIjogI2ZmOTIyYixcbiAgXCI2XCI6ICNmZDdlMTQsXG4gIFwiN1wiOiAjZjc2NzA3LFxuICBcIjhcIjogI2U4NTkwYyxcbiAgXCI5XCI6ICNkOTQ4MGZcbik7XG5cbiRvYy1vcmFuZ2UtMDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMFwiKTtcbiRvYy1vcmFuZ2UtMTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMVwiKTtcbiRvYy1vcmFuZ2UtMjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMlwiKTtcbiRvYy1vcmFuZ2UtMzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiM1wiKTtcbiRvYy1vcmFuZ2UtNDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNFwiKTtcbiRvYy1vcmFuZ2UtNTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNVwiKTtcbiRvYy1vcmFuZ2UtNjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNlwiKTtcbiRvYy1vcmFuZ2UtNzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiN1wiKTtcbiRvYy1vcmFuZ2UtODogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOFwiKTtcbiRvYy1vcmFuZ2UtOTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ29sb3IgbGlzdFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY29sb3Itc3BlY3RydW06ICAgOTtcblxuJG9jLWNvbG9yLWxpc3Q6IChcbiAgJG9jLWdyYXktbGlzdDogICAgICBcImdyYXlcIixcbiAgJG9jLXJlZC1saXN0OiAgICAgIFwicmVkXCIsXG4gICRvYy1waW5rLWxpc3Q6ICAgICAgXCJwaW5rXCIsXG4gICRvYy1ncmFwZS1saXN0OiAgICAgIFwiZ3JhcGVcIixcbiAgJG9jLXZpb2xldC1saXN0OiAgICAgIFwidmlvbGV0XCIsXG4gICRvYy1pbmRpZ28tbGlzdDogICAgICBcImluZGlnb1wiLFxuICAkb2MtYmx1ZS1saXN0OiAgICAgIFwiYmx1ZVwiLFxuICAkb2MtY3lhbi1saXN0OiAgICAgIFwiY3lhblwiLFxuICAkb2MtdGVhbC1saXN0OiAgICAgIFwidGVhbFwiLFxuICAkb2MtZ3JlZW4tbGlzdDogICAgICBcImdyZWVuXCIsXG4gICRvYy1saW1lLWxpc3Q6ICAgICAgXCJsaW1lXCIsXG4gICRvYy15ZWxsb3ctbGlzdDogICAgICBcInllbGxvd1wiLFxuICAkb2Mtb3JhbmdlLWxpc3Q6ICAgICAgXCJvcmFuZ2VcIlxuKTtcbiJdfQ== */", "import { ReactNode, useCallback, useEffect, useRef, useState } from \"react\";\nimport OpenColor from \"open-color\";\n\nimport { Dialog } from \"./Dialog\";\nimport { t } from \"../i18n\";\nimport Trans from \"./Trans\";\n\nimport { LibraryItems, LibraryItem, UIAppState } from \"../types\";\nimport { exportToCanvas, exportToSvg } from \"../../utils/export\";\nimport {\n  EDITOR_LS_KEYS,\n  EXPORT_DATA_TYPES,\n  EXPORT_SOURCE,\n  MIME_TYPES,\n  VERSIONS,\n} from \"../constants\";\nimport { ExportedLibraryData } from \"../data/types\";\nimport { canvasToBlob, resizeImageFile } from \"../data/blob\";\nimport { chunk } from \"../utils\";\nimport DialogActionButton from \"./DialogActionButton\";\nimport { CloseIcon } from \"./icons\";\nimport { ToolButton } from \"./ToolButton\";\nimport { EditorLocalStorage } from \"../data/EditorLocalStorage\";\n\nimport \"./PublishLibrary.scss\";\n\ninterface PublishLibraryDataParams {\n  authorName: string;\n  githubHandle: string;\n  name: string;\n  description: string;\n  twitterHandle: string;\n  website: string;\n}\n\nconst generatePreviewImage = async (libraryItems: LibraryItems) => {\n  const MAX_ITEMS_PER_ROW = 6;\n  const BOX_SIZE = 128;\n  const BOX_PADDING = Math.round(BOX_SIZE / 16);\n  const BORDER_WIDTH = Math.max(Math.round(BOX_SIZE / 64), 2);\n\n  const rows = chunk(libraryItems, MAX_ITEMS_PER_ROW);\n\n  const canvas = document.createElement(\"canvas\");\n\n  canvas.width =\n    rows[0].length * BOX_SIZE +\n    (rows[0].length + 1) * (BOX_PADDING * 2) -\n    BOX_PADDING * 2;\n  canvas.height =\n    rows.length * BOX_SIZE +\n    (rows.length + 1) * (BOX_PADDING * 2) -\n    BOX_PADDING * 2;\n\n  const ctx = canvas.getContext(\"2d\")!;\n\n  ctx.fillStyle = OpenColor.white;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  // draw items\n  // ---------------------------------------------------------------------------\n  for (const [index, item] of libraryItems.entries()) {\n    const itemCanvas = await exportToCanvas({\n      elements: item.elements,\n      files: null,\n      maxWidthOrHeight: BOX_SIZE,\n    });\n\n    const { width, height } = itemCanvas;\n\n    // draw item\n    // -------------------------------------------------------------------------\n    const rowOffset =\n      Math.floor(index / MAX_ITEMS_PER_ROW) * (BOX_SIZE + BOX_PADDING * 2);\n    const colOffset =\n      (index % MAX_ITEMS_PER_ROW) * (BOX_SIZE + BOX_PADDING * 2);\n\n    ctx.drawImage(\n      itemCanvas,\n      colOffset + (BOX_SIZE - width) / 2 + BOX_PADDING,\n      rowOffset + (BOX_SIZE - height) / 2 + BOX_PADDING,\n    );\n\n    // draw item border\n    // -------------------------------------------------------------------------\n    ctx.lineWidth = BORDER_WIDTH;\n    ctx.strokeStyle = OpenColor.gray[4];\n    ctx.strokeRect(\n      colOffset + BOX_PADDING / 2,\n      rowOffset + BOX_PADDING / 2,\n      BOX_SIZE + BOX_PADDING,\n      BOX_SIZE + BOX_PADDING,\n    );\n  }\n\n  return await resizeImageFile(\n    new File([await canvasToBlob(canvas)], \"preview\", { type: MIME_TYPES.png }),\n    {\n      outputType: MIME_TYPES.jpg,\n      maxWidthOrHeight: 5000,\n    },\n  );\n};\n\nconst SingleLibraryItem = ({\n  libItem,\n  appState,\n  index,\n  onChange,\n  onRemove,\n}: {\n  libItem: LibraryItem;\n  appState: UIAppState;\n  index: number;\n  onChange: (val: string, index: number) => void;\n  onRemove: (id: string) => void;\n}) => {\n  const svgRef = useRef<HTMLDivElement | null>(null);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    const node = svgRef.current;\n    if (!node) {\n      return;\n    }\n    (async () => {\n      const svg = await exportToSvg({\n        elements: libItem.elements,\n        appState: {\n          ...appState,\n          viewBackgroundColor: OpenColor.white,\n          exportBackground: true,\n        },\n        files: null,\n      });\n      node.innerHTML = svg.outerHTML;\n    })();\n  }, [libItem.elements, appState]);\n\n  return (\n    <div className=\"single-library-item\">\n      {libItem.status === \"published\" && (\n        <span className=\"single-library-item-status\">\n          {t(\"labels.statusPublished\")}\n        </span>\n      )}\n      <div ref={svgRef} className=\"single-library-item__svg\" />\n      <ToolButton\n        aria-label={t(\"buttons.remove\")}\n        type=\"button\"\n        icon={CloseIcon}\n        className=\"single-library-item--remove\"\n        onClick={onRemove.bind(null, libItem.id)}\n        title={t(\"buttons.remove\")}\n      />\n      <div\n        style={{\n          display: \"flex\",\n          margin: \"0.8rem 0\",\n          width: \"100%\",\n          fontSize: \"14px\",\n          fontWeight: 500,\n          flexDirection: \"column\",\n        }}\n      >\n        <label\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            flexDirection: \"column\",\n          }}\n        >\n          <div style={{ padding: \"0.5em 0\" }}>\n            <span style={{ fontWeight: 500, color: OpenColor.gray[6] }}>\n              {t(\"publishDialog.itemName\")}\n            </span>\n            <span aria-hidden=\"true\" className=\"required\">\n              *\n            </span>\n          </div>\n          <input\n            type=\"text\"\n            ref={inputRef}\n            style={{ width: \"80%\", padding: \"0.2rem\" }}\n            defaultValue={libItem.name}\n            placeholder=\"Item name\"\n            onChange={(event) => {\n              onChange(event.target.value, index);\n            }}\n          />\n        </label>\n        <span className=\"error\">{libItem.error}</span>\n      </div>\n    </div>\n  );\n};\n\nconst PublishLibrary = ({\n  onClose,\n  libraryItems,\n  appState,\n  onSuccess,\n  onError,\n  updateItemsInStorage,\n  onRemove,\n}: {\n  onClose: () => void;\n  libraryItems: LibraryItems;\n  appState: UIAppState;\n  onSuccess: (data: {\n    url: string;\n    authorName: string;\n    items: LibraryItems;\n  }) => void;\n\n  onError: (error: Error) => void;\n  updateItemsInStorage: (items: LibraryItems) => void;\n  onRemove: (id: string) => void;\n}) => {\n  const [libraryData, setLibraryData] = useState<PublishLibraryDataParams>({\n    authorName: \"\",\n    githubHandle: \"\",\n    name: \"\",\n    description: \"\",\n    twitterHandle: \"\",\n    website: \"\",\n  });\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    const data = EditorLocalStorage.get<PublishLibraryDataParams>(\n      EDITOR_LS_KEYS.PUBLISH_LIBRARY,\n    );\n    if (data) {\n      setLibraryData(data);\n    }\n  }, []);\n\n  const [clonedLibItems, setClonedLibItems] = useState<LibraryItems>(\n    libraryItems.slice(),\n  );\n\n  useEffect(() => {\n    setClonedLibItems(libraryItems.slice());\n  }, [libraryItems]);\n\n  const onInputChange = (event: any) => {\n    setLibraryData({\n      ...libraryData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setIsSubmitting(true);\n    const erroredLibItems: LibraryItem[] = [];\n    let isError = false;\n    clonedLibItems.forEach((libItem) => {\n      let error = \"\";\n      if (!libItem.name) {\n        error = t(\"publishDialog.errors.required\");\n        isError = true;\n      }\n      erroredLibItems.push({ ...libItem, error });\n    });\n\n    if (isError) {\n      setClonedLibItems(erroredLibItems);\n      setIsSubmitting(false);\n      return;\n    }\n\n    const previewImage = await generatePreviewImage(clonedLibItems);\n\n    const libContent: ExportedLibraryData = {\n      type: EXPORT_DATA_TYPES.excalidrawLibrary,\n      version: VERSIONS.excalidrawLibrary,\n      source: EXPORT_SOURCE,\n      libraryItems: clonedLibItems,\n    };\n    const content = JSON.stringify(libContent, null, 2);\n    const lib = new Blob([content], { type: \"application/json\" });\n\n    const formData = new FormData();\n    formData.append(\"excalidrawLib\", lib);\n    formData.append(\"previewImage\", previewImage);\n    formData.append(\"previewImageType\", previewImage.type);\n    formData.append(\"title\", libraryData.name);\n    formData.append(\"authorName\", libraryData.authorName);\n    formData.append(\"githubHandle\", libraryData.githubHandle);\n    formData.append(\"name\", libraryData.name);\n    formData.append(\"description\", libraryData.description);\n    formData.append(\"twitterHandle\", libraryData.twitterHandle);\n    formData.append(\"website\", libraryData.website);\n\n    fetch(`${import.meta.env.VITE_APP_LIBRARY_BACKEND}/submit`, {\n      method: \"post\",\n      body: formData,\n    })\n      .then(\n        (response) => {\n          if (response.ok) {\n            return response.json().then(({ url }) => {\n              // flush data from local storage\n              EditorLocalStorage.delete(EDITOR_LS_KEYS.PUBLISH_LIBRARY);\n              onSuccess({\n                url,\n                authorName: libraryData.authorName,\n                items: clonedLibItems,\n              });\n            });\n          }\n          return response\n            .json()\n            .catch(() => {\n              throw new Error(response.statusText || \"something went wrong\");\n            })\n            .then((error) => {\n              throw new Error(\n                error.message || response.statusText || \"something went wrong\",\n              );\n            });\n        },\n        (err) => {\n          console.error(err);\n          onError(err);\n          setIsSubmitting(false);\n        },\n      )\n      .catch((err) => {\n        console.error(err);\n        onError(err);\n        setIsSubmitting(false);\n      });\n  };\n\n  const renderLibraryItems = () => {\n    const items: ReactNode[] = [];\n    clonedLibItems.forEach((libItem, index) => {\n      items.push(\n        <div className=\"single-library-item-wrapper\" key={index}>\n          <SingleLibraryItem\n            libItem={libItem}\n            appState={appState}\n            index={index}\n            onChange={(val, index) => {\n              const items = clonedLibItems.slice();\n              items[index].name = val;\n              setClonedLibItems(items);\n            }}\n            onRemove={onRemove}\n          />\n        </div>,\n      );\n    });\n    return <div className=\"selected-library-items\">{items}</div>;\n  };\n\n  const onDialogClose = useCallback(() => {\n    updateItemsInStorage(clonedLibItems);\n    EditorLocalStorage.set(EDITOR_LS_KEYS.PUBLISH_LIBRARY, libraryData);\n    onClose();\n  }, [clonedLibItems, onClose, updateItemsInStorage, libraryData]);\n\n  const shouldRenderForm = !!libraryItems.length;\n\n  const containsPublishedItems = libraryItems.some(\n    (item) => item.status === \"published\",\n  );\n\n  return (\n    <Dialog\n      onCloseRequest={onDialogClose}\n      title={t(\"publishDialog.title\")}\n      className=\"publish-library\"\n    >\n      {shouldRenderForm ? (\n        <form onSubmit={onSubmit}>\n          <div className=\"publish-library-note\">\n            <Trans\n              i18nKey=\"publishDialog.noteDescription\"\n              link={(el) => (\n                <a\n                  href=\"https://libraries.excalidraw.com\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {el}\n                </a>\n              )}\n            />\n          </div>\n          <span className=\"publish-library-note\">\n            <Trans\n              i18nKey=\"publishDialog.noteGuidelines\"\n              link={(el) => (\n                <a\n                  href=\"https://github.com/excalidraw/excalidraw-libraries#guidelines\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {el}\n                </a>\n              )}\n            />\n          </span>\n\n          <div className=\"publish-library-note\">\n            {t(\"publishDialog.noteItems\")}\n          </div>\n          {containsPublishedItems && (\n            <span className=\"publish-library-note publish-library-warning\">\n              {t(\"publishDialog.republishWarning\")}\n            </span>\n          )}\n          {renderLibraryItems()}\n          <div className=\"publish-library__fields\">\n            <label>\n              <div>\n                <span>{t(\"publishDialog.libraryName\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <input\n                type=\"text\"\n                name=\"name\"\n                required\n                value={libraryData.name}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.libraryName\")}\n              />\n            </label>\n            <label style={{ alignItems: \"flex-start\" }}>\n              <div>\n                <span>{t(\"publishDialog.libraryDesc\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <textarea\n                name=\"description\"\n                rows={4}\n                required\n                value={libraryData.description}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.libraryDesc\")}\n              />\n            </label>\n            <label>\n              <div>\n                <span>{t(\"publishDialog.authorName\")}</span>\n                <span aria-hidden=\"true\" className=\"required\">\n                  *\n                </span>\n              </div>\n              <input\n                type=\"text\"\n                name=\"authorName\"\n                required\n                value={libraryData.authorName}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.authorName\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.githubUsername\")}</span>\n              <input\n                type=\"text\"\n                name=\"githubHandle\"\n                value={libraryData.githubHandle}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.githubHandle\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.twitterUsername\")}</span>\n              <input\n                type=\"text\"\n                name=\"twitterHandle\"\n                value={libraryData.twitterHandle}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.twitterHandle\")}\n              />\n            </label>\n            <label>\n              <span>{t(\"publishDialog.website\")}</span>\n              <input\n                type=\"text\"\n                name=\"website\"\n                pattern=\"https?://.+\"\n                title={t(\"publishDialog.errors.website\")}\n                value={libraryData.website}\n                onChange={onInputChange}\n                placeholder={t(\"publishDialog.placeholder.website\")}\n              />\n            </label>\n            <span className=\"publish-library-note\">\n              <Trans\n                i18nKey=\"publishDialog.noteLicense\"\n                link={(el) => (\n                  <a\n                    href=\"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {el}\n                  </a>\n                )}\n              />\n            </span>\n          </div>\n          <div className=\"publish-library__buttons\">\n            <DialogActionButton\n              label={t(\"buttons.cancel\")}\n              onClick={onDialogClose}\n              data-testid=\"cancel-clear-canvas-button\"\n            />\n            <DialogActionButton\n              type=\"submit\"\n              label={t(\"buttons.submit\")}\n              actionType=\"primary\"\n              isLoading={isSubmitting}\n            />\n          </div>\n        </form>\n      ) : (\n        <p style={{ padding: \"1em\", textAlign: \"center\", fontWeight: 500 }}>\n          {t(\"publishDialog.atleastOneLibItem\")}\n        </p>\n      )}\n    </Dialog>\n  );\n};\n\nexport default PublishLibrary;\n", "import { useCallback, useState } from \"react\";\nimport { t } from \"../i18n\";\nimport Trans from \"./Trans\";\nimport { jotaiScope } from \"../jotai\";\nimport { LibraryItem, LibraryItems, UIAppState } from \"../types\";\nimport { useApp, useExcalidrawSetAppState } from \"./App\";\nimport { saveLibraryAsJSON } from \"../data/json\";\nimport Library, { libraryItemsAtom } from \"../data/library\";\nimport {\n  DotsIcon,\n  ExportIcon,\n  LoadIcon,\n  publishIcon,\n  TrashIcon,\n} from \"./icons\";\nimport { ToolButton } from \"./ToolButton\";\nimport { fileOpen } from \"../data/filesystem\";\nimport { muteFSAbortError } from \"../utils\";\nimport { useAtom } from \"jotai\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport PublishLibrary from \"./PublishLibrary\";\nimport { Dialog } from \"./Dialog\";\nimport DropdownMenu from \"./dropdownMenu/DropdownMenu\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport clsx from \"clsx\";\nimport { useLibraryCache } from \"../hooks/useLibraryItemSvg\";\n\nconst getSelectedItems = (\n  libraryItems: LibraryItems,\n  selectedItems: LibraryItem[\"id\"][],\n) => libraryItems.filter((item) => selectedItems.includes(item.id));\n\nexport const LibraryDropdownMenuButton: React.FC<{\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  selectedItems: LibraryItem[\"id\"][];\n  library: Library;\n  onRemoveFromLibrary: () => void;\n  resetLibrary: () => void;\n  onSelectItems: (items: LibraryItem[\"id\"][]) => void;\n  appState: UIAppState;\n  className?: string;\n}> = ({\n  setAppState,\n  selectedItems,\n  library,\n  onRemoveFromLibrary,\n  resetLibrary,\n  onSelectItems,\n  appState,\n  className,\n}) => {\n  const [libraryItemsData] = useAtom(libraryItemsAtom, jotaiScope);\n  const [isLibraryMenuOpen, setIsLibraryMenuOpen] = useAtom(\n    isLibraryMenuOpenAtom,\n    jotaiScope,\n  );\n\n  const renderRemoveLibAlert = () => {\n    const content = selectedItems.length\n      ? t(\"alerts.removeItemsFromsLibrary\", { count: selectedItems.length })\n      : t(\"alerts.resetLibrary\");\n    const title = selectedItems.length\n      ? t(\"confirmDialog.removeItemsFromLib\")\n      : t(\"confirmDialog.resetLibrary\");\n    return (\n      <ConfirmDialog\n        onConfirm={() => {\n          if (selectedItems.length) {\n            onRemoveFromLibrary();\n          } else {\n            resetLibrary();\n          }\n          setShowRemoveLibAlert(false);\n        }}\n        onCancel={() => {\n          setShowRemoveLibAlert(false);\n        }}\n        title={title}\n      >\n        <p>{content}</p>\n      </ConfirmDialog>\n    );\n  };\n\n  const [showRemoveLibAlert, setShowRemoveLibAlert] = useState(false);\n\n  const itemsSelected = !!selectedItems.length;\n  const items = itemsSelected\n    ? libraryItemsData.libraryItems.filter((item) =>\n        selectedItems.includes(item.id),\n      )\n    : libraryItemsData.libraryItems;\n  const resetLabel = itemsSelected\n    ? t(\"buttons.remove\")\n    : t(\"buttons.resetLibrary\");\n\n  const [showPublishLibraryDialog, setShowPublishLibraryDialog] =\n    useState(false);\n  const [publishLibSuccess, setPublishLibSuccess] = useState<null | {\n    url: string;\n    authorName: string;\n  }>(null);\n  const renderPublishSuccess = useCallback(() => {\n    return (\n      <Dialog\n        onCloseRequest={() => setPublishLibSuccess(null)}\n        title={t(\"publishSuccessDialog.title\")}\n        className=\"publish-library-success\"\n        size=\"small\"\n      >\n        <p>\n          <Trans\n            i18nKey=\"publishSuccessDialog.content\"\n            authorName={publishLibSuccess!.authorName}\n            link={(el) => (\n              <a\n                href={publishLibSuccess?.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {el}\n              </a>\n            )}\n          />\n        </p>\n        <ToolButton\n          type=\"button\"\n          title={t(\"buttons.close\")}\n          aria-label={t(\"buttons.close\")}\n          label={t(\"buttons.close\")}\n          onClick={() => setPublishLibSuccess(null)}\n          data-testid=\"publish-library-success-close\"\n          className=\"publish-library-success-close\"\n        />\n      </Dialog>\n    );\n  }, [setPublishLibSuccess, publishLibSuccess]);\n\n  const onPublishLibSuccess = (\n    data: { url: string; authorName: string },\n    libraryItems: LibraryItems,\n  ) => {\n    setShowPublishLibraryDialog(false);\n    setPublishLibSuccess({ url: data.url, authorName: data.authorName });\n    const nextLibItems = libraryItems.slice();\n    nextLibItems.forEach((libItem) => {\n      if (selectedItems.includes(libItem.id)) {\n        libItem.status = \"published\";\n      }\n    });\n    library.setLibrary(nextLibItems);\n  };\n\n  const onLibraryImport = async () => {\n    try {\n      await library.updateLibrary({\n        libraryItems: fileOpen({\n          description: \"Excalidraw library files\",\n          // ToDo: Be over-permissive until https://bugs.webkit.org/show_bug.cgi?id=34442\n          // gets resolved. Else, iOS users cannot open `.excalidraw` files.\n          /*\n            extensions: [\".json\", \".excalidrawlib\"],\n            */\n        }),\n        merge: true,\n        openLibraryMenu: true,\n      });\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return;\n      }\n      setAppState({ errorMessage: t(\"errors.importLibraryError\") });\n    }\n  };\n\n  const onLibraryExport = async () => {\n    const libraryItems = itemsSelected\n      ? items\n      : await library.getLatestLibrary();\n    saveLibraryAsJSON(libraryItems)\n      .catch(muteFSAbortError)\n      .catch((error) => {\n        setAppState({ errorMessage: error.message });\n      });\n  };\n\n  const renderLibraryMenu = () => {\n    return (\n      <DropdownMenu open={isLibraryMenuOpen}>\n        <DropdownMenu.Trigger\n          onToggle={() => setIsLibraryMenuOpen(!isLibraryMenuOpen)}\n        >\n          {DotsIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsLibraryMenuOpen(false)}\n          onSelect={() => setIsLibraryMenuOpen(false)}\n          className=\"library-menu\"\n        >\n          {!itemsSelected && (\n            <DropdownMenu.Item\n              onSelect={onLibraryImport}\n              icon={LoadIcon}\n              data-testid=\"lib-dropdown--load\"\n            >\n              {t(\"buttons.load\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item\n              onSelect={onLibraryExport}\n              icon={ExportIcon}\n              data-testid=\"lib-dropdown--export\"\n            >\n              {t(\"buttons.export\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item\n              onSelect={() => setShowRemoveLibAlert(true)}\n              icon={TrashIcon}\n            >\n              {resetLabel}\n            </DropdownMenu.Item>\n          )}\n          {itemsSelected && (\n            <DropdownMenu.Item\n              icon={publishIcon}\n              onSelect={() => setShowPublishLibraryDialog(true)}\n              data-testid=\"lib-dropdown--remove\"\n            >\n              {t(\"buttons.publishLibrary\")}\n            </DropdownMenu.Item>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    );\n  };\n\n  return (\n    <div className={clsx(\"library-menu-dropdown-container\", className)}>\n      {renderLibraryMenu()}\n      {selectedItems.length > 0 && (\n        <div className=\"library-actions-counter\">{selectedItems.length}</div>\n      )}\n      {showRemoveLibAlert && renderRemoveLibAlert()}\n      {showPublishLibraryDialog && (\n        <PublishLibrary\n          onClose={() => setShowPublishLibraryDialog(false)}\n          libraryItems={getSelectedItems(\n            libraryItemsData.libraryItems,\n            selectedItems,\n          )}\n          appState={appState}\n          onSuccess={(data) =>\n            onPublishLibSuccess(data, libraryItemsData.libraryItems)\n          }\n          onError={(error) => window.alert(error)}\n          updateItemsInStorage={() =>\n            library.setLibrary(libraryItemsData.libraryItems)\n          }\n          onRemove={(id: string) =>\n            onSelectItems(selectedItems.filter((_id) => _id !== id))\n          }\n        />\n      )}\n      {publishLibSuccess && renderPublishSuccess()}\n    </div>\n  );\n};\n\nexport const LibraryDropdownMenu = ({\n  selectedItems,\n  onSelectItems,\n  className,\n}: {\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n  className?: string;\n}) => {\n  const { library } = useApp();\n  const { clearLibraryCache, deleteItemsFromLibraryCache } = useLibraryCache();\n  const appState = useUIAppState();\n  const setAppState = useExcalidrawSetAppState();\n\n  const [libraryItemsData] = useAtom(libraryItemsAtom, jotaiScope);\n\n  const removeFromLibrary = async (libraryItems: LibraryItems) => {\n    const nextItems = libraryItems.filter(\n      (item) => !selectedItems.includes(item.id),\n    );\n    library.setLibrary(nextItems).catch(() => {\n      setAppState({ errorMessage: t(\"alerts.errorRemovingFromLibrary\") });\n    });\n\n    deleteItemsFromLibraryCache(selectedItems);\n\n    onSelectItems([]);\n  };\n\n  const resetLibrary = () => {\n    library.resetLibrary();\n    clearLibraryCache();\n  };\n\n  return (\n    <LibraryDropdownMenuButton\n      appState={appState}\n      setAppState={setAppState}\n      selectedItems={selectedItems}\n      onSelectItems={onSelectItems}\n      library={library}\n      onRemoveFromLibrary={() =>\n        removeFromLibrary(libraryItemsData.libraryItems)\n      }\n      resetLibrary={resetLibrary}\n      className={className}\n    />\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .library-unit {\n  align-items: center;\n  border: 1px solid transparent;\n  display: flex;\n  justify-content: center;\n  position: relative;\n  width: 55px;\n  height: 55px;\n  box-sizing: border-box;\n  border-radius: var(--border-radius-lg);\n}\n.excalidraw .library-unit svg {\n  pointer-events: none;\n}\n.excalidraw .library-unit--hover {\n  border-color: var(--color-primary);\n}\n.excalidraw .library-unit--selected {\n  border-color: var(--color-primary);\n  border-width: 1px;\n}\n.excalidraw .library-unit--skeleton {\n  opacity: 0.5;\n  background: linear-gradient(-45deg, var(--color-gray-10), var(--color-gray-20), var(--color-gray-10));\n  background-size: 200% 200%;\n  animation: library-unit__skeleton-opacity-animation 0.2s linear;\n}\n.excalidraw.theme--dark .library-unit--skeleton {\n  background-image: linear-gradient(-45deg, var(--color-gray-100), var(--color-gray-80), var(--color-gray-100));\n}\n.excalidraw .library-unit__dragger {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n.excalidraw .library-unit__dragger > svg {\n  filter: var(--theme-filter);\n  flex-grow: 1;\n  max-height: 100%;\n  max-width: 100%;\n}\n.excalidraw .library-unit__checkbox-container,\n.excalidraw .library-unit__checkbox-container:hover,\n.excalidraw .library-unit__checkbox-container:active {\n  align-items: center;\n  background: none;\n  border: none;\n  color: var(--icon-fill-color);\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  padding: 0.5rem;\n  position: absolute;\n  left: 2rem;\n  bottom: 2rem;\n  cursor: pointer;\n}\n.excalidraw .library-unit__checkbox-container input,\n.excalidraw .library-unit__checkbox-container:hover input,\n.excalidraw .library-unit__checkbox-container:active input {\n  cursor: pointer;\n}\n.excalidraw .library-unit__checkbox {\n  position: absolute;\n  top: 0.125rem;\n  right: 0.125rem;\n  margin: 0;\n}\n.excalidraw .library-unit__checkbox .Checkbox-box {\n  margin: 0;\n  width: 1rem;\n  height: 1rem;\n  border-radius: 4px;\n  background-color: var(--color-primary-light);\n  border: 1px solid var(--color-primary);\n  box-shadow: none !important;\n  padding: 2px;\n}\n.excalidraw .library-unit__checkbox.Checkbox:hover .Checkbox-box {\n  background-color: var(--color-primary-light);\n}\n.excalidraw .library-unit__checkbox.is-checked .Checkbox-box {\n  background-color: var(--color-primary) !important;\n}\n.excalidraw .library-unit__checkbox.is-checked .Checkbox-box svg {\n  color: var(--color-primary-light);\n}\n.excalidraw .library-unit__removeFromLibrary > svg {\n  height: 16px;\n  width: 16px;\n}\n.excalidraw .library-unit__adder {\n  transform: scale(1);\n  animation: library-unit__adder-animation 1s ease-in infinite;\n  position: absolute;\n  width: 1.5rem;\n  height: 1.5rem;\n  background-color: var(--color-primary);\n  border-radius: var(--border-radius-md);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n}\n.excalidraw .library-unit__adder svg {\n  color: var(--color-primary-light);\n  width: 1rem;\n  height: 1rem;\n}\n.excalidraw .library-unit:active .library-unit__adder {\n  animation: none;\n  transform: scale(0.8);\n}\n.excalidraw .library-unit__active {\n  cursor: pointer;\n}\n@keyframes library-unit__adder-animation {\n  0% {\n    transform: scale(0.85);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0.85);\n  }\n}\n@keyframes library-unit__skeleton-opacity-animation {\n  0% {\n    opacity: 0;\n  }\n  75% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0.5;\n  }\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJMaWJyYXJ5VW5pdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzFLQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUVFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQU1BO0VBQ0E7O0FBSUo7RUFDRTs7QUFRRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtBQUFBO0FBQUE7RUFHRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7QUFBQTtBQUFBO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBSUE7RUFDRTs7QUFLRjtFQUNFOztBQUVBO0VBQ0U7O0FBTVI7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFO0lBQ0U7O0VBR0Y7SUFDRTs7RUFHRjtJQUNFOzs7QUFJSjtFQUNFO0lBQ0U7O0VBR0Y7SUFDRTs7RUFHRjtJQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLmxpYnJhcnktdW5pdCB7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogNTVweDtcbiAgICBoZWlnaHQ6IDU1cHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcblxuICAgIHN2ZyB7XG4gICAgICAvLyB0byBwcmV2ZW50IGNsaWNrcyBvbiBsaW5rcyBhbmQgc3VjaFxuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgfVxuXG4gICAgJi0taG92ZXIge1xuICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICB9XG5cbiAgICAmLS1zZWxlY3RlZCB7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gICAgfVxuXG4gICAgJi0tc2tlbGV0b24ge1xuICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgICAgICAtNDVkZWcsXG4gICAgICAgIHZhcigtLWNvbG9yLWdyYXktMTApLFxuICAgICAgICB2YXIoLS1jb2xvci1ncmF5LTIwKSxcbiAgICAgICAgdmFyKC0tY29sb3ItZ3JheS0xMClcbiAgICAgICk7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwMCUgMjAwJTtcbiAgICAgIGFuaW1hdGlvbjogbGlicmFyeS11bml0X19za2VsZXRvbi1vcGFjaXR5LWFuaW1hdGlvbiAwLjJzIGxpbmVhcjtcbiAgICB9XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIC5saWJyYXJ5LXVuaXQtLXNrZWxldG9uIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICAtNDVkZWcsXG4gICAgICB2YXIoLS1jb2xvci1ncmF5LTEwMCksXG4gICAgICB2YXIoLS1jb2xvci1ncmF5LTgwKSxcbiAgICAgIHZhcigtLWNvbG9yLWdyYXktMTAwKVxuICAgICk7XG4gIH1cblxuICAubGlicmFyeS11bml0X19kcmFnZ2VyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG5cbiAgLmxpYnJhcnktdW5pdF9fZHJhZ2dlciA+IHN2ZyB7XG4gICAgZmlsdGVyOiB2YXIoLS10aGVtZS1maWx0ZXIpO1xuICAgIGZsZXgtZ3JvdzogMTtcbiAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgfVxuXG4gIC5saWJyYXJ5LXVuaXRfX2NoZWNrYm94LWNvbnRhaW5lcixcbiAgLmxpYnJhcnktdW5pdF9fY2hlY2tib3gtY29udGFpbmVyOmhvdmVyLFxuICAubGlicmFyeS11bml0X19jaGVja2JveC1jb250YWluZXI6YWN0aXZlIHtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMnJlbTtcbiAgICBib3R0b206IDJyZW07XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICAgaW5wdXQge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgfVxuXG4gIC5saWJyYXJ5LXVuaXRfX2NoZWNrYm94IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwLjEyNXJlbTtcbiAgICByaWdodDogMC4xMjVyZW07XG4gICAgbWFyZ2luOiAwO1xuXG4gICAgLkNoZWNrYm94LWJveCB7XG4gICAgICBtYXJnaW46IDA7XG4gICAgICB3aWR0aDogMXJlbTtcbiAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICBwYWRkaW5nOiAycHg7XG4gICAgfVxuXG4gICAgJi5DaGVja2JveDpob3ZlciB7XG4gICAgICAuQ2hlY2tib3gtYm94IHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1saWdodCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi5pcy1jaGVja2VkIHtcbiAgICAgIC5DaGVja2JveC1ib3gge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KSAhaW1wb3J0YW50O1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLmxpYnJhcnktdW5pdF9fcmVtb3ZlRnJvbUxpYnJhcnkgPiBzdmcge1xuICAgIGhlaWdodDogMTZweDtcbiAgICB3aWR0aDogMTZweDtcbiAgfVxuXG4gIC5saWJyYXJ5LXVuaXRfX2FkZGVyIHtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xuICAgIGFuaW1hdGlvbjogbGlicmFyeS11bml0X19hZGRlci1hbmltYXRpb24gMXMgZWFzZS1pbiBpbmZpbml0ZTtcblxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMS41cmVtO1xuICAgIGhlaWdodDogMS41cmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbWQpO1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgICAgd2lkdGg6IDFyZW07XG4gICAgICBoZWlnaHQ6IDFyZW07XG4gICAgfVxuICB9XG5cbiAgLmxpYnJhcnktdW5pdDphY3RpdmUgLmxpYnJhcnktdW5pdF9fYWRkZXIge1xuICAgIGFuaW1hdGlvbjogbm9uZTtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7XG4gIH1cblxuICAubGlicmFyeS11bml0X19hY3RpdmUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuXG4gIEBrZXlmcmFtZXMgbGlicmFyeS11bml0X19hZGRlci1hbmltYXRpb24ge1xuICAgIDAlIHtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC44NSk7XG4gICAgfVxuXG4gICAgNTAlIHtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gICAgfVxuXG4gICAgMTAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHNjYWxlKDAuODUpO1xuICAgIH1cbiAgfVxuXG4gIEBrZXlmcmFtZXMgbGlicmFyeS11bml0X19za2VsZXRvbi1vcGFjaXR5LWFuaW1hdGlvbiB7XG4gICAgMCUge1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG5cbiAgICA3NSUge1xuICAgICAgb3BhY2l0eTogMDtcbiAgICB9XG5cbiAgICAxMDAlIHtcbiAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import clsx from \"clsx\";\nimport { memo, useEffect, useRef, useState } from \"react\";\nimport { useDevice } from \"./App\";\nimport { LibraryItem } from \"../types\";\nimport \"./LibraryUnit.scss\";\nimport { CheckboxItem } from \"./CheckboxItem\";\nimport { PlusIcon } from \"./icons\";\nimport { SvgCache, useLibraryItemSvg } from \"../hooks/useLibraryItemSvg\";\n\nexport const LibraryUnit = memo(\n  ({\n    id,\n    elements,\n    isPending,\n    onClick,\n    selected,\n    onToggle,\n    onDrag,\n    svgCache,\n  }: {\n    id: LibraryItem[\"id\"] | /** for pending item */ null;\n    elements?: LibraryItem[\"elements\"];\n    isPending?: boolean;\n    onClick: (id: LibraryItem[\"id\"] | null) => void;\n    selected: boolean;\n    onToggle: (id: string, event: React.MouseEvent) => void;\n    onDrag: (id: string, event: React.DragEvent) => void;\n    svgCache: SvgCache;\n  }) => {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const svg = useLibraryItemSvg(id, elements, svgCache);\n\n    useEffect(() => {\n      const node = ref.current;\n\n      if (!node) {\n        return;\n      }\n\n      if (svg) {\n        node.innerHTML = svg.outerHTML;\n      }\n\n      return () => {\n        node.innerHTML = \"\";\n      };\n    }, [svg]);\n\n    const [isHovered, setIsHovered] = useState(false);\n    const isMobile = useDevice().editor.isMobile;\n    const adder = isPending && (\n      <div className=\"library-unit__adder\">{PlusIcon}</div>\n    );\n\n    return (\n      <div\n        className={clsx(\"library-unit\", {\n          \"library-unit__active\": elements,\n          \"library-unit--hover\": elements && isHovered,\n          \"library-unit--selected\": selected,\n          \"library-unit--skeleton\": !svg,\n        })}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <div\n          className={clsx(\"library-unit__dragger\", {\n            \"library-unit__pulse\": !!isPending,\n          })}\n          ref={ref}\n          draggable={!!elements}\n          onClick={\n            !!elements || !!isPending\n              ? (event) => {\n                  if (id && event.shiftKey) {\n                    onToggle(id, event);\n                  } else {\n                    onClick(id);\n                  }\n                }\n              : undefined\n          }\n          onDragStart={(event) => {\n            if (!id) {\n              event.preventDefault();\n              return;\n            }\n            setIsHovered(false);\n            onDrag(id, event);\n          }}\n        />\n        {adder}\n        {id && elements && (isHovered || isMobile || selected) && (\n          <CheckboxItem\n            checked={selected}\n            onChange={(checked, event) => onToggle(id, event)}\n            className=\"library-unit__checkbox\"\n          />\n        )}\n      </div>\n    );\n  },\n);\n\nexport const EmptyLibraryUnit = () => (\n  <div className=\"library-unit library-unit--skeleton\" />\n);\n", "import React, { useCallback } from \"react\";\n\n/** noop polyfill for v17. Subset of API available */\nfunction useTransitionPolyfill() {\n  const startTransition = useCallback((callback: () => void) => callback(), []);\n  return [false, startTransition] as const;\n}\n\nexport const useTransition = React.useTransition || useTransitionPolyfill;\n", "import React, { memo, ReactNode, useEffect, useState } from \"react\";\nimport { EmptyLibraryUnit, LibraryUnit } from \"./LibraryUnit\";\nimport { LibraryItem } from \"../types\";\nimport { ExcalidrawElement, NonDeleted } from \"../element/types\";\nimport { SvgCache } from \"../hooks/useLibraryItemSvg\";\nimport { useTransition } from \"../hooks/useTransition\";\n\ntype LibraryOrPendingItem = (\n  | LibraryItem\n  | /* pending library item */ {\n      id: null;\n      elements: readonly NonDeleted<ExcalidrawElement>[];\n    }\n)[];\n\ninterface Props {\n  items: LibraryOrPendingItem;\n  onClick: (id: LibraryItem[\"id\"] | null) => void;\n  onItemSelectToggle: (id: LibraryItem[\"id\"], event: React.MouseEvent) => void;\n  onItemDrag: (id: LibraryItem[\"id\"], event: React.DragEvent) => void;\n  isItemSelected: (id: LibraryItem[\"id\"] | null) => boolean;\n  svgCache: SvgCache;\n  itemsRenderedPerBatch: number;\n}\n\nexport const LibraryMenuSectionGrid = ({\n  children,\n}: {\n  children: ReactNode;\n}) => {\n  return <div className=\"library-menu-items-container__grid\">{children}</div>;\n};\n\nexport const LibraryMenuSection = memo(\n  ({\n    items,\n    onItemSelectToggle,\n    onItemDrag,\n    isItemSelected,\n    onClick,\n    svgCache,\n    itemsRenderedPerBatch,\n  }: Props) => {\n    const [, startTransition] = useTransition();\n    const [index, setIndex] = useState(0);\n\n    useEffect(() => {\n      if (index < items.length) {\n        startTransition(() => {\n          setIndex(index + itemsRenderedPerBatch);\n        });\n      }\n    }, [index, items.length, startTransition, itemsRenderedPerBatch]);\n\n    return (\n      <>\n        {items.map((item, i) => {\n          return i < index ? (\n            <LibraryUnit\n              elements={item?.elements}\n              isPending={!item?.id && !!item?.elements}\n              onClick={onClick}\n              svgCache={svgCache}\n              id={item?.id}\n              selected={isItemSelected(item.id)}\n              onToggle={onItemSelectToggle}\n              onDrag={onItemDrag}\n              key={item?.id ?? i}\n            />\n          ) : (\n            <EmptyLibraryUnit key={i} />\n          );\n        })}\n      </>\n    );\n  },\n);\n", "import { useEffect } from \"react\";\nimport { atom, useAtom } from \"jotai\";\nimport throttle from \"lodash.throttle\";\n\nconst scrollPositionAtom = atom<number>(0);\n\nexport const useScrollPosition = <T extends HTMLElement>(\n  elementRef: React.RefObject<T>,\n) => {\n  const [scrollPosition, setScrollPosition] = useAtom(scrollPositionAtom);\n\n  useEffect(() => {\n    const { current: element } = elementRef;\n    if (!element) {\n      return;\n    }\n\n    const handleScroll = throttle(() => {\n      const { scrollTop } = element;\n      setScrollPosition(scrollTop);\n    }, 200);\n\n    element.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      handleScroll.cancel();\n      element.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [elementRef, setScrollPosition]);\n\n  return scrollPosition;\n};\n", ".excalidraw {\n  --container-padding-y: 1.5rem;\n  --container-padding-x: 0.75rem;\n}\n.excalidraw .library-menu-items__no-items {\n  text-align: center;\n  color: var(--color-gray-70);\n  line-height: 1.5;\n  font-size: 0.875rem;\n  width: 100%;\n}\n.excalidraw .library-menu-items__no-items__label {\n  color: var(--color-primary);\n  font-weight: bold;\n  font-size: 1.125rem;\n  margin-bottom: 0.75rem;\n}\n.excalidraw.theme--dark .library-menu-items__no-items {\n  color: var(--color-gray-40);\n}\n.excalidraw .library-menu-items-container {\n  width: 100%;\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: 0;\n  overflow-y: auto;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  margin: 0;\n  position: relative;\n}\n.excalidraw .library-menu-items-container > div {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.excalidraw .library-menu-items-container__row {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 1rem;\n}\n.excalidraw .library-menu-items-container__items {\n  row-gap: 0.5rem;\n  padding: var(--container-padding-y) 0;\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  margin-bottom: 1rem;\n}\n.excalidraw .library-menu-items-container__header {\n  color: var(--color-primary);\n  font-size: 1.125rem;\n  font-weight: bold;\n  margin-bottom: 0.75rem;\n  width: 100%;\n  padding-right: 4rem;\n  box-sizing: border-box;\n}\n.excalidraw .library-menu-items-container__header--excal {\n  margin-top: 2rem;\n}\n.excalidraw .library-menu-items-container__grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  grid-gap: 1rem;\n}\n.excalidraw .library-menu-items-container .separator {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 0.9rem;\n  margin: 0.6em 0.2em;\n  color: var(--text-primary-color);\n}\n.excalidraw .library-menu-items-private-library-container {\n  min-height: 3.75rem;\n  width: 100%;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkxpYnJhcnlNZW51SXRlbXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBS0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBR0U7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3JcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAtLWNvbnRhaW5lci1wYWRkaW5nLXk6IDEuNXJlbTtcbiAgLS1jb250YWluZXItcGFkZGluZy14OiAwLjc1cmVtO1xuXG4gIC5saWJyYXJ5LW1lbnUtaXRlbXNfX25vLWl0ZW1zIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNzApO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICB3aWR0aDogMTAwJTtcblxuICAgICZfX2xhYmVsIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZm9udC1zaXplOiAxLjEyNXJlbTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDAuNzVyZW07XG4gICAgfVxuICB9XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLmxpYnJhcnktbWVudS1pdGVtc19fbm8taXRlbXMge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNDApO1xuICAgIH1cbiAgfVxuXG4gIC5saWJyYXJ5LW1lbnUtaXRlbXMtY29udGFpbmVyIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZ3JvdzogMTtcbiAgICBmbGV4LXNocmluazogMTtcbiAgICBmbGV4LWJhc2lzOiAwO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbWFyZ2luOiAwO1xuXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgJiA+IGRpdiB7XG4gICAgICBwYWRkaW5nLWxlZnQ6IDAuNzVyZW07XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAwLjc1cmVtO1xuICAgIH1cblxuICAgICZfX3JvdyB7XG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNCwgMWZyKTtcbiAgICAgIGdhcDogMXJlbTtcbiAgICB9XG5cbiAgICAmX19pdGVtcyB7XG4gICAgICByb3ctZ2FwOiAwLjVyZW07XG4gICAgICBwYWRkaW5nOiB2YXIoLS1jb250YWluZXItcGFkZGluZy15KSAwO1xuICAgICAgZmxleDogMTtcbiAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgIH1cblxuICAgICZfX2hlYWRlciB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICBmb250LXNpemU6IDEuMTI1cmVtO1xuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjc1cmVtO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiA0cmVtOyAvLyBkdWUgdG8gZHJvcGRvd24gYnV0dG9uXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gICAgICAmLS1leGNhbCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDJyZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgJl9fZ3JpZCB7XG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmciAxZnI7XG4gICAgICBncmlkLWdhcDogMXJlbTtcbiAgICB9XG5cbiAgICAuc2VwYXJhdG9yIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgZm9udC1zaXplOiAwLjlyZW07XG4gICAgICBtYXJnaW46IDAuNmVtIDAuMmVtO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG4gICAgfVxuICB9XG5cbiAgLmxpYnJhcnktbWVudS1pdGVtcy1wcml2YXRlLWxpYnJhcnktY29udGFpbmVyIHtcbiAgICAvLyBzbyB0aGF0IHdoZW4geW91IHRvZ2dsZSBiZXR3ZWVuIHBlbmRpbmcgaXRlbSBhbmQgbm8gaXRlbXMsIHRoZXJlJ3NcbiAgICAvLyBubyBsYXlvdXQgc2hpZnQgKHRoaXMgaXMgaGFyZGNvZGVkIGFuZCB3b3JrcyBvbmx5IHdpdGggRU5HIGxvY2FsZSlcbiAgICBtaW4taGVpZ2h0OiAzLjc1cmVtO1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG59XG4iXX0= */", "import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { serializeLibraryAsJSON } from \"../data/json\";\nimport { t } from \"../i18n\";\nimport {\n  ExcalidrawProps,\n  LibraryItem,\n  LibraryItems,\n  UIAppState,\n} from \"../types\";\nimport { arrayToMap } from \"../utils\";\nimport Stack from \"./Stack\";\nimport { MIME_TYPES } from \"../constants\";\nimport Spinner from \"./Spinner\";\nimport { duplicateElements } from \"../element/newElement\";\nimport { LibraryMenuControlButtons } from \"./LibraryMenuControlButtons\";\nimport { LibraryDropdownMenu } from \"./LibraryMenuHeaderContent\";\nimport {\n  LibraryMenuSection,\n  LibraryMenuSectionGrid,\n} from \"./LibraryMenuSection\";\nimport { useScrollPosition } from \"../hooks/useScrollPosition\";\nimport { useLibraryCache } from \"../hooks/useLibraryItemSvg\";\n\nimport \"./LibraryMenuItems.scss\";\n\n// using an odd number of items per batch so the rendering creates an irregular\n// pattern which looks more organic\nconst ITEMS_RENDERED_PER_BATCH = 17;\n// when render outputs cached we can render many more items per batch to\n// speed it up\nconst CACHED_ITEMS_RENDERED_PER_BATCH = 64;\n\nexport default function LibraryMenuItems({\n  isLoading,\n  libraryItems,\n  onAddToLibrary,\n  onInsertLibraryItems,\n  pendingElements,\n  theme,\n  id,\n  libraryReturnUrl,\n  onSelectItems,\n  selectedItems,\n}: {\n  isLoading: boolean;\n  libraryItems: LibraryItems;\n  pendingElements: LibraryItem[\"elements\"];\n  onInsertLibraryItems: (libraryItems: LibraryItems) => void;\n  onAddToLibrary: (elements: LibraryItem[\"elements\"]) => void;\n  libraryReturnUrl: ExcalidrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n}) {\n  const libraryContainerRef = useRef<HTMLDivElement>(null);\n  const scrollPosition = useScrollPosition<HTMLDivElement>(libraryContainerRef);\n\n  // This effect has to be called only on first render, therefore  `scrollPosition` isn't in the dependency array\n  useEffect(() => {\n    if (scrollPosition > 0) {\n      libraryContainerRef.current?.scrollTo(0, scrollPosition);\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const { svgCache } = useLibraryCache();\n  const unpublishedItems = useMemo(\n    () => libraryItems.filter((item) => item.status !== \"published\"),\n    [libraryItems],\n  );\n\n  const publishedItems = useMemo(\n    () => libraryItems.filter((item) => item.status === \"published\"),\n    [libraryItems],\n  );\n\n  const showBtn = !libraryItems.length && !pendingElements.length;\n\n  const isLibraryEmpty =\n    !pendingElements.length &&\n    !unpublishedItems.length &&\n    !publishedItems.length;\n\n  const [lastSelectedItem, setLastSelectedItem] = useState<\n    LibraryItem[\"id\"] | null\n  >(null);\n\n  const onItemSelectToggle = useCallback(\n    (id: LibraryItem[\"id\"], event: React.MouseEvent) => {\n      const shouldSelect = !selectedItems.includes(id);\n\n      const orderedItems = [...unpublishedItems, ...publishedItems];\n\n      if (shouldSelect) {\n        if (event.shiftKey && lastSelectedItem) {\n          const rangeStart = orderedItems.findIndex(\n            (item) => item.id === lastSelectedItem,\n          );\n          const rangeEnd = orderedItems.findIndex((item) => item.id === id);\n\n          if (rangeStart === -1 || rangeEnd === -1) {\n            onSelectItems([...selectedItems, id]);\n            return;\n          }\n\n          const selectedItemsMap = arrayToMap(selectedItems);\n          const nextSelectedIds = orderedItems.reduce(\n            (acc: LibraryItem[\"id\"][], item, idx) => {\n              if (\n                (idx >= rangeStart && idx <= rangeEnd) ||\n                selectedItemsMap.has(item.id)\n              ) {\n                acc.push(item.id);\n              }\n              return acc;\n            },\n            [],\n          );\n\n          onSelectItems(nextSelectedIds);\n        } else {\n          onSelectItems([...selectedItems, id]);\n        }\n        setLastSelectedItem(id);\n      } else {\n        setLastSelectedItem(null);\n        onSelectItems(selectedItems.filter((_id) => _id !== id));\n      }\n    },\n    [\n      lastSelectedItem,\n      onSelectItems,\n      publishedItems,\n      selectedItems,\n      unpublishedItems,\n    ],\n  );\n\n  const getInsertedElements = useCallback(\n    (id: string) => {\n      let targetElements;\n      if (selectedItems.includes(id)) {\n        targetElements = libraryItems.filter((item) =>\n          selectedItems.includes(item.id),\n        );\n      } else {\n        targetElements = libraryItems.filter((item) => item.id === id);\n      }\n      return targetElements.map((item) => {\n        return {\n          ...item,\n          // duplicate each library item before inserting on canvas to confine\n          // ids and bindings to each library item. See #6465\n          elements: duplicateElements(item.elements, { randomizeSeed: true }),\n        };\n      });\n    },\n    [libraryItems, selectedItems],\n  );\n\n  const onItemDrag = useCallback(\n    (id: LibraryItem[\"id\"], event: React.DragEvent) => {\n      event.dataTransfer.setData(\n        MIME_TYPES.excalidrawlib,\n        serializeLibraryAsJSON(getInsertedElements(id)),\n      );\n    },\n    [getInsertedElements],\n  );\n\n  const isItemSelected = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (!id) {\n        return false;\n      }\n\n      return selectedItems.includes(id);\n    },\n    [selectedItems],\n  );\n\n  const onAddToLibraryClick = useCallback(() => {\n    onAddToLibrary(pendingElements);\n  }, [pendingElements, onAddToLibrary]);\n\n  const onItemClick = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (id) {\n        onInsertLibraryItems(getInsertedElements(id));\n      }\n    },\n    [getInsertedElements, onInsertLibraryItems],\n  );\n\n  const itemsRenderedPerBatch =\n    svgCache.size >= libraryItems.length\n      ? CACHED_ITEMS_RENDERED_PER_BATCH\n      : ITEMS_RENDERED_PER_BATCH;\n\n  return (\n    <div\n      className=\"library-menu-items-container\"\n      style={\n        pendingElements.length ||\n        unpublishedItems.length ||\n        publishedItems.length\n          ? { justifyContent: \"flex-start\" }\n          : { borderBottom: 0 }\n      }\n    >\n      {!isLibraryEmpty && (\n        <LibraryDropdownMenu\n          selectedItems={selectedItems}\n          onSelectItems={onSelectItems}\n          className=\"library-menu-dropdown-container--in-heading\"\n        />\n      )}\n      <Stack.Col\n        className=\"library-menu-items-container__items\"\n        align=\"start\"\n        gap={1}\n        style={{\n          flex: publishedItems.length > 0 ? 1 : \"0 1 auto\",\n          marginBottom: 0,\n        }}\n        ref={libraryContainerRef}\n      >\n        <>\n          {!isLibraryEmpty && (\n            <div className=\"library-menu-items-container__header\">\n              {t(\"labels.personalLib\")}\n            </div>\n          )}\n          {isLoading && (\n            <div\n              style={{\n                position: \"absolute\",\n                top: \"var(--container-padding-y)\",\n                right: \"var(--container-padding-x)\",\n                transform: \"translateY(50%)\",\n              }}\n            >\n              <Spinner />\n            </div>\n          )}\n          {!pendingElements.length && !unpublishedItems.length ? (\n            <div className=\"library-menu-items__no-items\">\n              <div className=\"library-menu-items__no-items__label\">\n                {t(\"library.noItems\")}\n              </div>\n              <div className=\"library-menu-items__no-items__hint\">\n                {publishedItems.length > 0\n                  ? t(\"library.hint_emptyPrivateLibrary\")\n                  : t(\"library.hint_emptyLibrary\")}\n              </div>\n            </div>\n          ) : (\n            <LibraryMenuSectionGrid>\n              {pendingElements.length > 0 && (\n                <LibraryMenuSection\n                  itemsRenderedPerBatch={itemsRenderedPerBatch}\n                  items={[{ id: null, elements: pendingElements }]}\n                  onItemSelectToggle={onItemSelectToggle}\n                  onItemDrag={onItemDrag}\n                  onClick={onAddToLibraryClick}\n                  isItemSelected={isItemSelected}\n                  svgCache={svgCache}\n                />\n              )}\n              <LibraryMenuSection\n                itemsRenderedPerBatch={itemsRenderedPerBatch}\n                items={unpublishedItems}\n                onItemSelectToggle={onItemSelectToggle}\n                onItemDrag={onItemDrag}\n                onClick={onItemClick}\n                isItemSelected={isItemSelected}\n                svgCache={svgCache}\n              />\n            </LibraryMenuSectionGrid>\n          )}\n        </>\n\n        <>\n          {(publishedItems.length > 0 ||\n            pendingElements.length > 0 ||\n            unpublishedItems.length > 0) && (\n            <div className=\"library-menu-items-container__header library-menu-items-container__header--excal\">\n              {t(\"labels.excalidrawLib\")}\n            </div>\n          )}\n          {publishedItems.length > 0 ? (\n            <LibraryMenuSectionGrid>\n              <LibraryMenuSection\n                itemsRenderedPerBatch={itemsRenderedPerBatch}\n                items={publishedItems}\n                onItemSelectToggle={onItemSelectToggle}\n                onItemDrag={onItemDrag}\n                onClick={onItemClick}\n                isItemSelected={isItemSelected}\n                svgCache={svgCache}\n              />\n            </LibraryMenuSectionGrid>\n          ) : unpublishedItems.length > 0 ? (\n            <div\n              style={{\n                margin: \"1rem 0\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                width: \"100%\",\n                fontSize: \".9rem\",\n              }}\n            >\n              {t(\"library.noItems\")}\n            </div>\n          ) : null}\n        </>\n\n        {showBtn && (\n          <LibraryMenuControlButtons\n            style={{ padding: \"16px 0\", width: \"100%\" }}\n            id={id}\n            libraryReturnUrl={libraryReturnUrl}\n            theme={theme}\n          >\n            <LibraryDropdownMenu\n              selectedItems={selectedItems}\n              onSelectItems={onSelectItems}\n            />\n          </LibraryMenuControlButtons>\n        )}\n      </Stack.Col>\n    </div>\n  );\n}\n", ".excalidraw .layer-ui__library {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n}\n.excalidraw .library-actions-counter {\n  background-color: var(--color-primary);\n  color: var(--color-primary-light);\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  width: 1rem;\n  height: 1rem;\n  position: absolute;\n  bottom: -0.25rem;\n  right: -0.25rem;\n  font-size: 0.625rem;\n  pointer-events: none;\n}\n.excalidraw .layer-ui__library-message {\n  padding: 2rem;\n  min-width: 200px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex-grow: 1;\n  justify-content: center;\n}\n.excalidraw .layer-ui__library-message span {\n  font-size: 0.8em;\n}\n.excalidraw .publish-library-success .Dialog__content {\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .publish-library-success-close.ToolIcon_type_button {\n  background-color: #228be6;\n  align-self: flex-end;\n}\n.excalidraw .publish-library-success-close.ToolIcon_type_button:hover {\n  background-color: #1971c2;\n}\n.excalidraw .publish-library-success-close.ToolIcon_type_button .ToolIcon__icon {\n  width: auto;\n  font-size: 1rem;\n  color: #ffffff;\n  padding: 0 0.5rem;\n}\n.excalidraw .library-menu-control-buttons {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.625rem;\n  position: relative;\n}\n.excalidraw .library-menu-control-buttons--at-bottom::before {\n  content: \"\";\n  width: calc(100% - 1.5rem);\n  height: 1px;\n  position: absolute;\n  top: -1px;\n  background: var(--sidebar-border-color);\n}\n.excalidraw .library-menu-browse-button {\n  flex: 1;\n  height: var(--lg-button-size);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  position: relative;\n  border-radius: var(--border-radius-lg);\n  background-color: var(--color-primary);\n  color: #ffffff;\n  text-align: center;\n  white-space: nowrap;\n  text-decoration: none !important;\n  font-weight: 600;\n  font-size: 0.75rem;\n}\n.excalidraw .library-menu-browse-button:hover {\n  background-color: var(--color-brand-hover);\n}\n.excalidraw .library-menu-browse-button:active {\n  background-color: var(--color-brand-active);\n}\n.excalidraw.theme--dark .library-menu-browse-button {\n  color: var(--color-gray-100);\n}\n.excalidraw.excalidraw--mobile .library-menu-browse-button {\n  height: var(--default-button-size);\n}\n.excalidraw .layer-ui__library .dropdown-menu {\n  width: auto;\n  top: initial;\n  right: 0;\n  left: initial;\n  bottom: 100%;\n  margin-bottom: 0.625rem;\n}\n.excalidraw .layer-ui__library .dropdown-menu .dropdown-menu-container {\n  width: 196px;\n  box-shadow: var(--library-dropdown-shadow);\n  border-radius: var(--border-radius-lg);\n  padding: 0.25rem 0.5rem;\n}\n.excalidraw .layer-ui__library .library-menu-dropdown-container {\n  position: relative;\n}\n.excalidraw .layer-ui__library .library-menu-dropdown-container--in-heading {\n  padding: 0;\n  position: absolute;\n  top: 1rem;\n  right: 0.75rem;\n  z-index: 1;\n}\n.excalidraw .layer-ui__library .library-menu-dropdown-container--in-heading .dropdown-menu {\n  top: 100%;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkxpYnJhcnlNZW51LnNjc3MiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0U7RUFDRTtFQUNBO0VBRUE7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFLRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRSxrQkM2Sk07RUQ1Sk47O0FBQ0E7RUFDRSxrQkM0Skk7O0FEMUpOO0VBQ0U7RUFDQTtFQUNBLE9DN0NXO0VEOENYOztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBLE9DakZlO0VEa0ZmO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7O0FBRUE7RUFDRTs7QUFFRjtFQUNFOztBQUtGO0VBQ0U7O0FBSUo7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0UiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLmxheWVyLXVpX19saWJyYXJ5IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgfVxuXG4gIC5saWJyYXJ5LWFjdGlvbnMtY291bnRlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgd2lkdGg6IDFyZW07XG4gICAgaGVpZ2h0OiAxcmVtO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IC0wLjI1cmVtO1xuICAgIHJpZ2h0OiAtMC4yNXJlbTtcbiAgICBmb250LXNpemU6IDAuNjI1cmVtO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB9XG5cbiAgLmxheWVyLXVpX19saWJyYXJ5LW1lc3NhZ2Uge1xuICAgIHBhZGRpbmc6IDJyZW07XG4gICAgbWluLXdpZHRoOiAyMDBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgICBzcGFuIHtcbiAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgfVxuICB9XG5cbiAgLnB1Ymxpc2gtbGlicmFyeS1zdWNjZXNzIHtcbiAgICAuRGlhbG9nX19jb250ZW50IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIH1cblxuICAgICYtY2xvc2UuVG9vbEljb25fdHlwZV9idXR0b24ge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG9jLWJsdWUtNjtcbiAgICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRvYy1ibHVlLTg7XG4gICAgICB9XG4gICAgICAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICBjb2xvcjogJG9jLXdoaXRlO1xuICAgICAgICBwYWRkaW5nOiAwIDAuNXJlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAubGlicmFyeS1tZW51LWNvbnRyb2wtYnV0dG9ucyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGdhcDogMC42MjVyZW07XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgJi0tYXQtYm90dG9tOjpiZWZvcmUge1xuICAgICAgY29udGVudDogXCJcIjtcbiAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxLjVyZW0pO1xuICAgICAgaGVpZ2h0OiAxcHg7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IC0xcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zaWRlYmFyLWJvcmRlci1jb2xvcik7XG4gICAgfVxuICB9XG5cbiAgLmxpYnJhcnktbWVudS1icm93c2UtYnV0dG9uIHtcbiAgICBmbGV4OiAxO1xuXG4gICAgaGVpZ2h0OiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG5cbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICBjb2xvcjogJG9jLXdoaXRlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZSAhaW1wb3J0YW50O1xuXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBmb250LXNpemU6IDAuNzVyZW07XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWJyYW5kLWhvdmVyKTtcbiAgICB9XG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgICB9XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAubGlicmFyeS1tZW51LWJyb3dzZS1idXR0b24ge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktMTAwKTtcbiAgICB9XG4gIH1cblxuICAmLmV4Y2FsaWRyYXctLW1vYmlsZSAubGlicmFyeS1tZW51LWJyb3dzZS1idXR0b24ge1xuICAgIGhlaWdodDogdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSk7XG4gIH1cblxuICAubGF5ZXItdWlfX2xpYnJhcnkgLmRyb3Bkb3duLW1lbnUge1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIHRvcDogaW5pdGlhbDtcbiAgICByaWdodDogMDtcbiAgICBsZWZ0OiBpbml0aWFsO1xuICAgIGJvdHRvbTogMTAwJTtcbiAgICBtYXJnaW4tYm90dG9tOiAwLjYyNXJlbTtcblxuICAgIC5kcm9wZG93bi1tZW51LWNvbnRhaW5lciB7XG4gICAgICB3aWR0aDogMTk2cHg7XG4gICAgICBib3gtc2hhZG93OiB2YXIoLS1saWJyYXJ5LWRyb3Bkb3duLXNoYWRvdyk7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtO1xuICAgIH1cbiAgfVxuXG4gIC5sYXllci11aV9fbGlicmFyeSAubGlicmFyeS1tZW51LWRyb3Bkb3duLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgJi0taW4taGVhZGluZyB7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdG9wOiAxcmVtO1xuICAgICAgcmlnaHQ6IDAuNzVyZW07XG4gICAgICB6LWluZGV4OiAxO1xuXG4gICAgICAuZHJvcGRvd24tbWVudSB7XG4gICAgICAgIHRvcDogMTAwJTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8vXG4vL1xuLy8gIPCdl5Yg8J2XoiDwnZefIPCdl6Ig8J2XpVxuLy8gIHYgMS45LjFcbi8vXG4vLyAg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cblxuLy8gIEdlbmVyYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXdoaXRlOiAgICAgICAgICNmZmZmZmY7XG4kb2MtYmxhY2s6ICAgICAgICAgIzAwMDAwMDtcblxuXG4vLyAgR3JheVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JheS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmOWZhLFxuICBcIjFcIjogI2YxZjNmNSxcbiAgXCIyXCI6ICNlOWVjZWYsXG4gIFwiM1wiOiAjZGVlMmU2LFxuICBcIjRcIjogI2NlZDRkYSxcbiAgXCI1XCI6ICNhZGI1YmQsXG4gIFwiNlwiOiAjODY4ZTk2LFxuICBcIjdcIjogIzQ5NTA1NyxcbiAgXCI4XCI6ICMzNDNhNDAsXG4gIFwiOVwiOiAjMjEyNTI5XG4pO1xuXG4kb2MtZ3JheS0wOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMFwiKTtcbiRvYy1ncmF5LTE6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXktMjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjJcIik7XG4kb2MtZ3JheS0zOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiM1wiKTtcbiRvYy1ncmF5LTQ6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXktNTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjVcIik7XG4kb2MtZ3JheS02OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNlwiKTtcbiRvYy1ncmF5LTc6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXktODogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjhcIik7XG4kb2MtZ3JheS05OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUmVkXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1yZWQtbGlzdDogKFxuICBcIjBcIjogI2ZmZjVmNSxcbiAgXCIxXCI6ICNmZmUzZTMsXG4gIFwiMlwiOiAjZmZjOWM5LFxuICBcIjNcIjogI2ZmYThhOCxcbiAgXCI0XCI6ICNmZjg3ODcsXG4gIFwiNVwiOiAjZmY2YjZiLFxuICBcIjZcIjogI2ZhNTI1MixcbiAgXCI3XCI6ICNmMDNlM2UsXG4gIFwiOFwiOiAjZTAzMTMxLFxuICBcIjlcIjogI2M5MmEyYVxuKTtcblxuJG9jLXJlZC0wOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIwXCIpO1xuJG9jLXJlZC0xOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIxXCIpO1xuJG9jLXJlZC0yOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIyXCIpO1xuJG9jLXJlZC0zOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIzXCIpO1xuJG9jLXJlZC00OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI0XCIpO1xuJG9jLXJlZC01OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI1XCIpO1xuJG9jLXJlZC02OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI2XCIpO1xuJG9jLXJlZC03OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI3XCIpO1xuJG9jLXJlZC04OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI4XCIpO1xuJG9jLXJlZC05OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBQaW5rXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1waW5rLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmYwZjYsXG4gIFwiMVwiOiAjZmZkZWViLFxuICBcIjJcIjogI2ZjYzJkNyxcbiAgXCIzXCI6ICNmYWEyYzEsXG4gIFwiNFwiOiAjZjc4M2FjLFxuICBcIjVcIjogI2YwNjU5NSxcbiAgXCI2XCI6ICNlNjQ5ODAsXG4gIFwiN1wiOiAjZDYzMzZjLFxuICBcIjhcIjogI2MyMjU1YyxcbiAgXCI5XCI6ICNhNjFlNGRcbik7XG5cbiRvYy1waW5rLTA6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIwXCIpO1xuJG9jLXBpbmstMTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjFcIik7XG4kb2MtcGluay0yOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMlwiKTtcbiRvYy1waW5rLTM6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIzXCIpO1xuJG9jLXBpbmstNDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjRcIik7XG4kb2MtcGluay01OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNVwiKTtcbiRvYy1waW5rLTY6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI2XCIpO1xuJG9jLXBpbmstNzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjdcIik7XG4kb2MtcGluay04OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOFwiKTtcbiRvYy1waW5rLTk6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmFwZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JhcGUtbGlzdDogKFxuICBcIjBcIjogI2Y4ZjBmYyxcbiAgXCIxXCI6ICNmM2Q5ZmEsXG4gIFwiMlwiOiAjZWViZWZhLFxuICBcIjNcIjogI2U1OTlmNyxcbiAgXCI0XCI6ICNkYTc3ZjIsXG4gIFwiNVwiOiAjY2M1ZGU4LFxuICBcIjZcIjogI2JlNGJkYixcbiAgXCI3XCI6ICNhZTNlYzksXG4gIFwiOFwiOiAjOWMzNmI1LFxuICBcIjlcIjogIzg2MmU5Y1xuKTtcblxuJG9jLWdyYXBlLTA6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmFwZS0xOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjFcIik7XG4kb2MtZ3JhcGUtMjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXBlLTM6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmFwZS00OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjRcIik7XG4kb2MtZ3JhcGUtNTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXBlLTY6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmFwZS03OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjdcIik7XG4kb2MtZ3JhcGUtODogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXBlLTk6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVmlvbGV0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy12aW9sZXQtbGlzdDogKFxuICBcIjBcIjogI2YzZjBmZixcbiAgXCIxXCI6ICNlNWRiZmYsXG4gIFwiMlwiOiAjZDBiZmZmLFxuICBcIjNcIjogI2IxOTdmYyxcbiAgXCI0XCI6ICM5Nzc1ZmEsXG4gIFwiNVwiOiAjODQ1ZWY3LFxuICBcIjZcIjogIzc5NTBmMixcbiAgXCI3XCI6ICM3MDQ4ZTgsXG4gIFwiOFwiOiAjNjc0MWQ5LFxuICBcIjlcIjogIzVmM2RjNFxuKTtcblxuJG9jLXZpb2xldC0wOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIwXCIpO1xuJG9jLXZpb2xldC0xOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIxXCIpO1xuJG9jLXZpb2xldC0yOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIyXCIpO1xuJG9jLXZpb2xldC0zOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIzXCIpO1xuJG9jLXZpb2xldC00OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI0XCIpO1xuJG9jLXZpb2xldC01OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI1XCIpO1xuJG9jLXZpb2xldC02OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI2XCIpO1xuJG9jLXZpb2xldC03OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI3XCIpO1xuJG9jLXZpb2xldC04OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI4XCIpO1xuJG9jLXZpb2xldC05OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBJbmRpZ29cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWluZGlnby1saXN0OiAoXG4gIFwiMFwiOiAjZWRmMmZmLFxuICBcIjFcIjogI2RiZTRmZixcbiAgXCIyXCI6ICNiYWM4ZmYsXG4gIFwiM1wiOiAjOTFhN2ZmLFxuICBcIjRcIjogIzc0OGZmYyxcbiAgXCI1XCI6ICM1YzdjZmEsXG4gIFwiNlwiOiAjNGM2ZWY1LFxuICBcIjdcIjogIzQyNjNlYixcbiAgXCI4XCI6ICMzYjViZGIsXG4gIFwiOVwiOiAjMzY0ZmM3XG4pO1xuXG4kb2MtaW5kaWdvLTA6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjBcIik7XG4kb2MtaW5kaWdvLTE6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjFcIik7XG4kb2MtaW5kaWdvLTI6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjJcIik7XG4kb2MtaW5kaWdvLTM6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjNcIik7XG4kb2MtaW5kaWdvLTQ6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjRcIik7XG4kb2MtaW5kaWdvLTU6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjVcIik7XG4kb2MtaW5kaWdvLTY6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjZcIik7XG4kb2MtaW5kaWdvLTc6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjdcIik7XG4kb2MtaW5kaWdvLTg6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjhcIik7XG4kb2MtaW5kaWdvLTk6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjlcIik7XG5cblxuLy8gIEJsdWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWJsdWUtbGlzdDogKFxuICBcIjBcIjogI2U3ZjVmZixcbiAgXCIxXCI6ICNkMGViZmYsXG4gIFwiMlwiOiAjYTVkOGZmLFxuICBcIjNcIjogIzc0YzBmYyxcbiAgXCI0XCI6ICM0ZGFiZjcsXG4gIFwiNVwiOiAjMzM5YWYwLFxuICBcIjZcIjogIzIyOGJlNixcbiAgXCI3XCI6ICMxYzdlZDYsXG4gIFwiOFwiOiAjMTk3MWMyLFxuICBcIjlcIjogIzE4NjRhYlxuKTtcblxuJG9jLWJsdWUtMDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjBcIik7XG4kb2MtYmx1ZS0xOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMVwiKTtcbiRvYy1ibHVlLTI6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIyXCIpO1xuJG9jLWJsdWUtMzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjNcIik7XG4kb2MtYmx1ZS00OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNFwiKTtcbiRvYy1ibHVlLTU6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI1XCIpO1xuJG9jLWJsdWUtNjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjZcIik7XG4kb2MtYmx1ZS03OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiN1wiKTtcbiRvYy1ibHVlLTg6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI4XCIpO1xuJG9jLWJsdWUtOTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIEN5YW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWN5YW4tbGlzdDogKFxuICBcIjBcIjogI2UzZmFmYyxcbiAgXCIxXCI6ICNjNWY2ZmEsXG4gIFwiMlwiOiAjOTllOWYyLFxuICBcIjNcIjogIzY2ZDllOCxcbiAgXCI0XCI6ICMzYmM5ZGIsXG4gIFwiNVwiOiAjMjJiOGNmLFxuICBcIjZcIjogIzE1YWFiZixcbiAgXCI3XCI6ICMxMDk4YWQsXG4gIFwiOFwiOiAjMGM4NTk5LFxuICBcIjlcIjogIzBiNzI4NVxuKTtcblxuJG9jLWN5YW4tMDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjBcIik7XG4kb2MtY3lhbi0xOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMVwiKTtcbiRvYy1jeWFuLTI6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIyXCIpO1xuJG9jLWN5YW4tMzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjNcIik7XG4kb2MtY3lhbi00OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNFwiKTtcbiRvYy1jeWFuLTU6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI1XCIpO1xuJG9jLWN5YW4tNjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjZcIik7XG4kb2MtY3lhbi03OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiN1wiKTtcbiRvYy1jeWFuLTg6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI4XCIpO1xuJG9jLWN5YW4tOTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIFRlYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXRlYWwtbGlzdDogKFxuICBcIjBcIjogI2U2ZmNmNSxcbiAgXCIxXCI6ICNjM2ZhZTgsXG4gIFwiMlwiOiAjOTZmMmQ3LFxuICBcIjNcIjogIzYzZTZiZSxcbiAgXCI0XCI6ICMzOGQ5YTksXG4gIFwiNVwiOiAjMjBjOTk3LFxuICBcIjZcIjogIzEyYjg4NixcbiAgXCI3XCI6ICMwY2E2NzgsXG4gIFwiOFwiOiAjMDk5MjY4LFxuICBcIjlcIjogIzA4N2Y1YlxuKTtcblxuJG9jLXRlYWwtMDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjBcIik7XG4kb2MtdGVhbC0xOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMVwiKTtcbiRvYy10ZWFsLTI6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIyXCIpO1xuJG9jLXRlYWwtMzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjNcIik7XG4kb2MtdGVhbC00OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNFwiKTtcbiRvYy10ZWFsLTU6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI1XCIpO1xuJG9jLXRlYWwtNjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjZcIik7XG4kb2MtdGVhbC03OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiN1wiKTtcbiRvYy10ZWFsLTg6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI4XCIpO1xuJG9jLXRlYWwtOTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyZWVuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmVlbi1saXN0OiAoXG4gIFwiMFwiOiAjZWJmYmVlLFxuICBcIjFcIjogI2QzZjlkOCxcbiAgXCIyXCI6ICNiMmYyYmIsXG4gIFwiM1wiOiAjOGNlOTlhLFxuICBcIjRcIjogIzY5ZGI3YyxcbiAgXCI1XCI6ICM1MWNmNjYsXG4gIFwiNlwiOiAjNDBjMDU3LFxuICBcIjdcIjogIzM3YjI0ZCxcbiAgXCI4XCI6ICMyZjllNDQsXG4gIFwiOVwiOiAjMmI4YTNlXG4pO1xuXG4kb2MtZ3JlZW4tMDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIwXCIpO1xuJG9jLWdyZWVuLTE6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmVlbi0yOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjJcIik7XG4kb2MtZ3JlZW4tMzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIzXCIpO1xuJG9jLWdyZWVuLTQ6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmVlbi01OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjVcIik7XG4kb2MtZ3JlZW4tNjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI2XCIpO1xuJG9jLWdyZWVuLTc6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmVlbi04OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjhcIik7XG4kb2MtZ3JlZW4tOTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBMaW1lXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1saW1lLWxpc3Q6IChcbiAgXCIwXCI6ICNmNGZjZTMsXG4gIFwiMVwiOiAjZTlmYWM4LFxuICBcIjJcIjogI2Q4ZjVhMixcbiAgXCIzXCI6ICNjMGViNzUsXG4gIFwiNFwiOiAjYTllMzRiLFxuICBcIjVcIjogIzk0ZDgyZCxcbiAgXCI2XCI6ICM4MmM5MWUsXG4gIFwiN1wiOiAjNzRiODE2LFxuICBcIjhcIjogIzY2YTgwZixcbiAgXCI5XCI6ICM1Yzk0MGRcbik7XG5cbiRvYy1saW1lLTA6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIwXCIpO1xuJG9jLWxpbWUtMTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjFcIik7XG4kb2MtbGltZS0yOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMlwiKTtcbiRvYy1saW1lLTM6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIzXCIpO1xuJG9jLWxpbWUtNDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjRcIik7XG4kb2MtbGltZS01OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNVwiKTtcbiRvYy1saW1lLTY6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI2XCIpO1xuJG9jLWxpbWUtNzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjdcIik7XG4kb2MtbGltZS04OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOFwiKTtcbiRvYy1saW1lLTk6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBZZWxsb3dcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXllbGxvdy1saXN0OiAoXG4gIFwiMFwiOiAjZmZmOWRiLFxuICBcIjFcIjogI2ZmZjNiZixcbiAgXCIyXCI6ICNmZmVjOTksXG4gIFwiM1wiOiAjZmZlMDY2LFxuICBcIjRcIjogI2ZmZDQzYixcbiAgXCI1XCI6ICNmY2M0MTksXG4gIFwiNlwiOiAjZmFiMDA1LFxuICBcIjdcIjogI2Y1OWYwMCxcbiAgXCI4XCI6ICNmMDhjMDAsXG4gIFwiOVwiOiAjZTY3NzAwXG4pO1xuXG4kb2MteWVsbG93LTA6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjBcIik7XG4kb2MteWVsbG93LTE6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjFcIik7XG4kb2MteWVsbG93LTI6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjJcIik7XG4kb2MteWVsbG93LTM6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjNcIik7XG4kb2MteWVsbG93LTQ6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjRcIik7XG4kb2MteWVsbG93LTU6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjVcIik7XG4kb2MteWVsbG93LTY6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjZcIik7XG4kb2MteWVsbG93LTc6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjdcIik7XG4kb2MteWVsbG93LTg6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjhcIik7XG4kb2MteWVsbG93LTk6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjlcIik7XG5cblxuLy8gIE9yYW5nZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtb3JhbmdlLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY0ZTYsXG4gIFwiMVwiOiAjZmZlOGNjLFxuICBcIjJcIjogI2ZmZDhhOCxcbiAgXCIzXCI6ICNmZmMwNzgsXG4gIFwiNFwiOiAjZmZhOTRkLFxuICBcIjVcIjogI2ZmOTIyYixcbiAgXCI2XCI6ICNmZDdlMTQsXG4gIFwiN1wiOiAjZjc2NzA3LFxuICBcIjhcIjogI2U4NTkwYyxcbiAgXCI5XCI6ICNkOTQ4MGZcbik7XG5cbiRvYy1vcmFuZ2UtMDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMFwiKTtcbiRvYy1vcmFuZ2UtMTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMVwiKTtcbiRvYy1vcmFuZ2UtMjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMlwiKTtcbiRvYy1vcmFuZ2UtMzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiM1wiKTtcbiRvYy1vcmFuZ2UtNDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNFwiKTtcbiRvYy1vcmFuZ2UtNTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNVwiKTtcbiRvYy1vcmFuZ2UtNjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNlwiKTtcbiRvYy1vcmFuZ2UtNzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiN1wiKTtcbiRvYy1vcmFuZ2UtODogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOFwiKTtcbiRvYy1vcmFuZ2UtOTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ29sb3IgbGlzdFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY29sb3Itc3BlY3RydW06ICAgOTtcblxuJG9jLWNvbG9yLWxpc3Q6IChcbiAgJG9jLWdyYXktbGlzdDogICAgICBcImdyYXlcIixcbiAgJG9jLXJlZC1saXN0OiAgICAgIFwicmVkXCIsXG4gICRvYy1waW5rLWxpc3Q6ICAgICAgXCJwaW5rXCIsXG4gICRvYy1ncmFwZS1saXN0OiAgICAgIFwiZ3JhcGVcIixcbiAgJG9jLXZpb2xldC1saXN0OiAgICAgIFwidmlvbGV0XCIsXG4gICRvYy1pbmRpZ28tbGlzdDogICAgICBcImluZGlnb1wiLFxuICAkb2MtYmx1ZS1saXN0OiAgICAgIFwiYmx1ZVwiLFxuICAkb2MtY3lhbi1saXN0OiAgICAgIFwiY3lhblwiLFxuICAkb2MtdGVhbC1saXN0OiAgICAgIFwidGVhbFwiLFxuICAkb2MtZ3JlZW4tbGlzdDogICAgICBcImdyZWVuXCIsXG4gICRvYy1saW1lLWxpc3Q6ICAgICAgXCJsaW1lXCIsXG4gICRvYy15ZWxsb3ctbGlzdDogICAgICBcInllbGxvd1wiLFxuICAkb2Mtb3JhbmdlLWxpc3Q6ICAgICAgXCJvcmFuZ2VcIlxuKTtcbiJdfQ== */", "import React, { useState, useCallback, useMemo, useRef } from \"react\";\nimport Library, {\n  distributeLibraryItemsOnSquareGrid,\n  libraryItemsAtom,\n} from \"../data/library\";\nimport { t } from \"../i18n\";\nimport { randomId } from \"../random\";\nimport {\n  LibraryItems,\n  LibraryItem,\n  ExcalidrawProps,\n  UIAppState,\n} from \"../types\";\nimport LibraryMenuItems from \"./LibraryMenuItems\";\nimport { trackEvent } from \"../analytics\";\nimport { atom, useAtom } from \"jotai\";\nimport { jotaiScope } from \"../jotai\";\nimport Spinner from \"./Spinner\";\nimport {\n  useApp,\n  useAppProps,\n  useExcalidrawElements,\n  useExcalidrawSetAppState,\n} from \"./App\";\nimport { getSelectedElements } from \"../scene\";\nimport { useUIAppState } from \"../context/ui-appState\";\n\nimport \"./LibraryMenu.scss\";\nimport { LibraryMenuControlButtons } from \"./LibraryMenuControlButtons\";\nimport { isShallowEqual } from \"../utils\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { LIBRARY_DISABLED_TYPES } from \"../constants\";\n\nexport const isLibraryMenuOpenAtom = atom(false);\n\nconst LibraryMenuWrapper = ({ children }: { children: React.ReactNode }) => {\n  return <div className=\"layer-ui__library\">{children}</div>;\n};\n\nexport const LibraryMenuContent = ({\n  onInsertLibraryItems,\n  pendingElements,\n  onAddToLibrary,\n  setAppState,\n  libraryReturnUrl,\n  library,\n  id,\n  theme,\n  selectedItems,\n  onSelectItems,\n}: {\n  pendingElements: LibraryItem[\"elements\"];\n  onInsertLibraryItems: (libraryItems: LibraryItems) => void;\n  onAddToLibrary: () => void;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  libraryReturnUrl: ExcalidrawProps[\"libraryReturnUrl\"];\n  library: Library;\n  id: string;\n  theme: UIAppState[\"theme\"];\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n}) => {\n  const [libraryItemsData] = useAtom(libraryItemsAtom, jotaiScope);\n\n  const _onAddToLibrary = useCallback(\n    (elements: LibraryItem[\"elements\"]) => {\n      const addToLibrary = async (\n        processedElements: LibraryItem[\"elements\"],\n        libraryItems: LibraryItems,\n      ) => {\n        trackEvent(\"element\", \"addToLibrary\", \"ui\");\n        for (const type of LIBRARY_DISABLED_TYPES) {\n          if (processedElements.some((element) => element.type === type)) {\n            return setAppState({\n              errorMessage: t(`errors.libraryElementTypeError.${type}`),\n            });\n          }\n        }\n        const nextItems: LibraryItems = [\n          {\n            status: \"unpublished\",\n            elements: processedElements,\n            id: randomId(),\n            created: Date.now(),\n          },\n          ...libraryItems,\n        ];\n        onAddToLibrary();\n        library.setLibrary(nextItems).catch(() => {\n          setAppState({ errorMessage: t(\"alerts.errorAddingToLibrary\") });\n        });\n      };\n      addToLibrary(elements, libraryItemsData.libraryItems);\n    },\n    [onAddToLibrary, library, setAppState, libraryItemsData.libraryItems],\n  );\n\n  const libraryItems = useMemo(\n    () => libraryItemsData.libraryItems,\n    [libraryItemsData],\n  );\n\n  if (\n    libraryItemsData.status === \"loading\" &&\n    !libraryItemsData.isInitialized\n  ) {\n    return (\n      <LibraryMenuWrapper>\n        <div className=\"layer-ui__library-message\">\n          <div>\n            <Spinner size=\"2em\" />\n            <span>{t(\"labels.libraryLoadingMessage\")}</span>\n          </div>\n        </div>\n      </LibraryMenuWrapper>\n    );\n  }\n\n  const showBtn =\n    libraryItemsData.libraryItems.length > 0 || pendingElements.length > 0;\n\n  return (\n    <LibraryMenuWrapper>\n      <LibraryMenuItems\n        isLoading={libraryItemsData.status === \"loading\"}\n        libraryItems={libraryItems}\n        onAddToLibrary={_onAddToLibrary}\n        onInsertLibraryItems={onInsertLibraryItems}\n        pendingElements={pendingElements}\n        id={id}\n        libraryReturnUrl={libraryReturnUrl}\n        theme={theme}\n        onSelectItems={onSelectItems}\n        selectedItems={selectedItems}\n      />\n      {showBtn && (\n        <LibraryMenuControlButtons\n          className=\"library-menu-control-buttons--at-bottom\"\n          style={{ padding: \"16px 12px 0 12px\" }}\n          id={id}\n          libraryReturnUrl={libraryReturnUrl}\n          theme={theme}\n        />\n      )}\n    </LibraryMenuWrapper>\n  );\n};\n\nconst usePendingElementsMemo = (\n  appState: UIAppState,\n  elements: readonly NonDeletedExcalidrawElement[],\n) => {\n  const create = () =>\n    getSelectedElements(elements, appState, {\n      includeBoundTextElement: true,\n      includeElementsInFrames: true,\n    });\n  const val = useRef(create());\n  const prevAppState = useRef<UIAppState>(appState);\n  const prevElements = useRef(elements);\n\n  if (\n    !isShallowEqual(\n      appState.selectedElementIds,\n      prevAppState.current.selectedElementIds,\n    ) ||\n    !isShallowEqual(elements, prevElements.current)\n  ) {\n    val.current = create();\n    prevAppState.current = appState;\n    prevElements.current = elements;\n  }\n  return val.current;\n};\n\n/**\n * This component is meant to be rendered inside <Sidebar.Tab/> inside our\n * <DefaultSidebar/> or host apps Sidebar components.\n */\nexport const LibraryMenu = () => {\n  const { library, id, onInsertElements } = useApp();\n  const appProps = useAppProps();\n  const appState = useUIAppState();\n  const setAppState = useExcalidrawSetAppState();\n  const elements = useExcalidrawElements();\n  const [selectedItems, setSelectedItems] = useState<LibraryItem[\"id\"][]>([]);\n  const memoizedLibrary = useMemo(() => library, [library]);\n  // BUG: pendingElements are still causing some unnecessary rerenders because clicking into canvas returns some ids even when no element is selected.\n  const pendingElements = usePendingElementsMemo(appState, elements);\n\n  const onInsertLibraryItems = useCallback(\n    (libraryItems: LibraryItems) => {\n      onInsertElements(distributeLibraryItemsOnSquareGrid(libraryItems));\n    },\n    [onInsertElements],\n  );\n\n  const deselectItems = useCallback(() => {\n    setAppState({\n      selectedElementIds: {},\n      selectedGroupIds: {},\n      activeEmbeddable: null,\n    });\n  }, [setAppState]);\n\n  return (\n    <LibraryMenuContent\n      pendingElements={pendingElements}\n      onInsertLibraryItems={onInsertLibraryItems}\n      onAddToLibrary={deselectItems}\n      setAppState={setAppState}\n      libraryReturnUrl={appProps.libraryReturnUrl}\n      library={memoizedLibrary}\n      id={id}\n      theme={appState.theme}\n      selectedItems={selectedItems}\n      onSelectItems={setSelectedItems}\n    />\n  );\n};\n", "import clsx from \"clsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { useCallbackRefState } from \"../hooks/useCallbackRefState\";\nimport { t } from \"../i18n\";\nimport {\n  useExcalidrawContainer,\n  useDevice,\n  useExcalidrawSetAppState,\n} from \"./App\";\nimport { KEYS } from \"../keys\";\nimport \"./Dialog.scss\";\nimport { back, CloseIcon } from \"./icons\";\nimport { Island } from \"./Island\";\nimport { Modal } from \"./Modal\";\nimport { queryFocusableElements } from \"../utils\";\nimport { useSetAtom } from \"jotai\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport { jotaiScope } from \"../jotai\";\n\nexport type DialogSize = number | \"small\" | \"regular\" | \"wide\" | undefined;\n\nexport interface DialogProps {\n  children: React.ReactNode;\n  className?: string;\n  size?: DialogSize;\n  onCloseRequest(): void;\n  title: React.ReactNode | false;\n  autofocus?: boolean;\n  closeOnClickOutside?: boolean;\n}\n\nfunction getDialogSize(size: DialogSize): number {\n  if (size && typeof size === \"number\") {\n    return size;\n  }\n\n  switch (size) {\n    case \"small\":\n      return 550;\n    case \"wide\":\n      return 1024;\n    case \"regular\":\n    default:\n      return 800;\n  }\n}\n\nexport const Dialog = (props: DialogProps) => {\n  const [islandNode, setIslandNode] = useCallbackRefState<HTMLDivElement>();\n  const [lastActiveElement] = useState(document.activeElement);\n  const { id } = useExcalidrawContainer();\n  const isFullscreen = useDevice().viewport.isMobile;\n\n  useEffect(() => {\n    if (!islandNode) {\n      return;\n    }\n\n    const focusableElements = queryFocusableElements(islandNode);\n\n    if (focusableElements.length > 0 && props.autofocus !== false) {\n      // If there's an element other than close, focus it.\n      (focusableElements[1] || focusableElements[0]).focus();\n    }\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === KEYS.TAB) {\n        const focusableElements = queryFocusableElements(islandNode);\n        const { activeElement } = document;\n        const currentIndex = focusableElements.findIndex(\n          (element) => element === activeElement,\n        );\n\n        if (currentIndex === 0 && event.shiftKey) {\n          focusableElements[focusableElements.length - 1].focus();\n          event.preventDefault();\n        } else if (\n          currentIndex === focusableElements.length - 1 &&\n          !event.shiftKey\n        ) {\n          focusableElements[0].focus();\n          event.preventDefault();\n        }\n      }\n    };\n\n    islandNode.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => islandNode.removeEventListener(\"keydown\", handleKeyDown);\n  }, [islandNode, props.autofocus]);\n\n  const setAppState = useExcalidrawSetAppState();\n  const setIsLibraryMenuOpen = useSetAtom(isLibraryMenuOpenAtom, jotaiScope);\n\n  const onClose = () => {\n    setAppState({ openMenu: null });\n    setIsLibraryMenuOpen(false);\n    (lastActiveElement as HTMLElement).focus();\n    props.onCloseRequest();\n  };\n\n  return (\n    <Modal\n      className={clsx(\"Dialog\", props.className, {\n        \"Dialog--fullscreen\": isFullscreen,\n      })}\n      labelledBy=\"dialog-title\"\n      maxWidth={getDialogSize(props.size)}\n      onCloseRequest={onClose}\n      closeOnClickOutside={props.closeOnClickOutside}\n    >\n      <Island ref={setIslandNode}>\n        {props.title && (\n          <h2 id={`${id}-dialog-title`} className=\"Dialog__title\">\n            <span className=\"Dialog__titleContent\">{props.title}</span>\n          </h2>\n        )}\n        <button\n          className=\"Dialog__close\"\n          onClick={onClose}\n          title={t(\"buttons.close\")}\n          aria-label={t(\"buttons.close\")}\n        >\n          {isFullscreen ? back : CloseIcon}\n        </button>\n        <div className=\"Dialog__content\">{props.children}</div>\n      </Island>\n    </Modal>\n  );\n};\n", "import React, { useState } from \"react\";\nimport { t } from \"../i18n\";\n\nimport { Dialog } from \"./Dialog\";\nimport { useExcalidrawContainer } from \"./App\";\n\nexport const ErrorDialog = ({\n  children,\n  onClose,\n}: {\n  children?: React.ReactNode;\n  onClose?: () => void;\n}) => {\n  const [modalIsShown, setModalIsShown] = useState(!!children);\n  const { container: excalidrawContainer } = useExcalidrawContainer();\n\n  const handleClose = React.useCallback(() => {\n    setModalIsShown(false);\n\n    if (onClose) {\n      onClose();\n    }\n    // TODO: Fix the A11y issues so this is never needed since we should always focus on last active element\n    excalidrawContainer?.focus();\n  }, [onClose, excalidrawContainer]);\n\n  return (\n    <>\n      {modalIsShown && (\n        <Dialog\n          size=\"small\"\n          onCloseRequest={handleClose}\n          title={t(\"errorDialog.title\")}\n        >\n          <div style={{ whiteSpace: \"pre-wrap\" }}>{children}</div>\n        </Dialog>\n      )}\n    </>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --RadioGroup-background: var(--island-bg-color);\n  --RadioGroup-border: var(--color-surface-high);\n  --RadioGroup-choice-color-off: var(--color-primary);\n  --RadioGroup-choice-color-off-hover: var(--color-brand-hover);\n  --RadioGroup-choice-background-off: var(--island-bg-color);\n  --RadioGroup-choice-background-off-active: var(--color-surface-high);\n  --RadioGroup-choice-color-on: var(--color-surface-lowest);\n  --RadioGroup-choice-background-on: var(--color-primary);\n  --RadioGroup-choice-background-on-hover: var(--color-brand-hover);\n  --RadioGroup-choice-background-on-active: var(--color-brand-active);\n}\n.excalidraw .RadioGroup {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  padding: 3px;\n  border-radius: 10px;\n  background: var(--RadioGroup-background);\n  border: 1px solid var(--RadioGroup-border);\n}\n.excalidraw .RadioGroup__choice {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 24px;\n  color: var(--RadioGroup-choice-color-off);\n  background: var(--RadioGroup-choice-background-off);\n  border-radius: 8px;\n  font-family: \"Assistant\";\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.75rem;\n  line-height: 100%;\n  user-select: none;\n  letter-spacing: 0.4px;\n  transition: all 75ms ease-out;\n}\n.excalidraw .RadioGroup__choice:hover {\n  color: var(--RadioGroup-choice-color-off-hover);\n}\n.excalidraw .RadioGroup__choice:active {\n  background: var(--RadioGroup-choice-background-off-active);\n}\n.excalidraw .RadioGroup__choice.active {\n  color: var(--RadioGroup-choice-color-on);\n  background: var(--RadioGroup-choice-background-on);\n}\n.excalidraw .RadioGroup__choice.active:hover {\n  background: var(--RadioGroup-choice-background-on-hover);\n}\n.excalidraw .RadioGroup__choice.active:active {\n  background: var(--RadioGroup-choice-background-on-active);\n}\n.excalidraw .RadioGroup__choice input {\n  z-index: 1;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  border-radius: 8px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  cursor: pointer;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJSYWRpb0dyb3VwLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDM0tGO0VBQ0U7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7RUFDQTtFQUNBO0VBRUEiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAtLVJhZGlvR3JvdXAtYmFja2dyb3VuZDogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgLS1SYWRpb0dyb3VwLWJvcmRlcjogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcblxuICAtLVJhZGlvR3JvdXAtY2hvaWNlLWNvbG9yLW9mZjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIC0tUmFkaW9Hcm91cC1jaG9pY2UtY29sb3Itb2ZmLWhvdmVyOiB2YXIoLS1jb2xvci1icmFuZC1ob3Zlcik7XG4gIC0tUmFkaW9Hcm91cC1jaG9pY2UtYmFja2dyb3VuZC1vZmY6IHZhcigtLWlzbGFuZC1iZy1jb2xvcik7XG4gIC0tUmFkaW9Hcm91cC1jaG9pY2UtYmFja2dyb3VuZC1vZmYtYWN0aXZlOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuXG4gIC0tUmFkaW9Hcm91cC1jaG9pY2UtY29sb3Itb246IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgLS1SYWRpb0dyb3VwLWNob2ljZS1iYWNrZ3JvdW5kLW9uOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgLS1SYWRpb0dyb3VwLWNob2ljZS1iYWNrZ3JvdW5kLW9uLWhvdmVyOiB2YXIoLS1jb2xvci1icmFuZC1ob3Zlcik7XG4gIC0tUmFkaW9Hcm91cC1jaG9pY2UtYmFja2dyb3VuZC1vbi1hY3RpdmU6IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG5cbiAgLlJhZGlvR3JvdXAge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuXG4gICAgcGFkZGluZzogM3B4O1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG5cbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1SYWRpb0dyb3VwLWJhY2tncm91bmQpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLVJhZGlvR3JvdXAtYm9yZGVyKTtcblxuICAgICZfX2Nob2ljZSB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgd2lkdGg6IDMycHg7XG4gICAgICBoZWlnaHQ6IDI0cHg7XG5cbiAgICAgIGNvbG9yOiB2YXIoLS1SYWRpb0dyb3VwLWNob2ljZS1jb2xvci1vZmYpO1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tUmFkaW9Hcm91cC1jaG9pY2UtYmFja2dyb3VuZC1vZmYpO1xuXG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG5cbiAgICAgIGZvbnQtZmFtaWx5OiBcIkFzc2lzdGFudFwiO1xuICAgICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxMDAlO1xuICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICBsZXR0ZXItc3BhY2luZzogMC40cHg7XG5cbiAgICAgIHRyYW5zaXRpb246IGFsbCA3NW1zIGVhc2Utb3V0O1xuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLVJhZGlvR3JvdXAtY2hvaWNlLWNvbG9yLW9mZi1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tUmFkaW9Hcm91cC1jaG9pY2UtYmFja2dyb3VuZC1vZmYtYWN0aXZlKTtcbiAgICAgIH1cblxuICAgICAgJi5hY3RpdmUge1xuICAgICAgICBjb2xvcjogdmFyKC0tUmFkaW9Hcm91cC1jaG9pY2UtY29sb3Itb24pO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1SYWRpb0dyb3VwLWNob2ljZS1iYWNrZ3JvdW5kLW9uKTtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1SYWRpb0dyb3VwLWNob2ljZS1iYWNrZ3JvdW5kLW9uLWhvdmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1SYWRpb0dyb3VwLWNob2ljZS1iYWNrZ3JvdW5kLW9uLWFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJiBpbnB1dCB7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nOiAwO1xuXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcblxuICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbiAgICAgICAgYXBwZWFyYW5jZTogbm9uZTtcblxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */", "import clsx from \"clsx\";\nimport \"./RadioGroup.scss\";\n\nexport type RadioGroupChoice<T> = {\n  value: T;\n  label: string;\n};\n\nexport type RadioGroupProps<T> = {\n  choices: RadioGroupChoice<T>[];\n  value: T;\n  onChange: (value: T) => void;\n  name: string;\n};\n\nexport const RadioGroup = function <T>({\n  onChange,\n  value,\n  choices,\n  name,\n}: RadioGroupProps<T>) {\n  return (\n    <div className=\"RadioGroup\">\n      {choices.map((choice) => (\n        <div\n          className={clsx(\"RadioGroup__choice\", {\n            active: choice.value === value,\n          })}\n          key={choice.label}\n        >\n          <input\n            name={name}\n            type=\"radio\"\n            checked={choice.value === value}\n            onChange={() => onChange(choice.value)}\n          />\n          {choice.label}\n        </div>\n      ))}\n    </div>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --Switch-disabled-color: var(--color-border-outline);\n  --Switch-disabled-toggled-background: var(--color-border-outline-variant);\n  --Switch-disabled-border: var(--color-border-outline-variant);\n  --Switch-track-background: var(--island-bg-color);\n  --Switch-thumb-background: var(--color-on-surface);\n  --Switch-hover-background: var(--color-brand-hover);\n  --Switch-active-background: var(--color-brand-active);\n}\n.excalidraw .Switch {\n  position: relative;\n  box-sizing: border-box;\n  width: 40px;\n  height: 20px;\n  border-radius: 12px;\n  transition-property: background, border;\n  transition-duration: 150ms;\n  transition-timing-function: ease-out;\n  background: var(--Switch-track-background);\n  border: 1px solid var(--Switch-disabled-color);\n}\n.excalidraw .Switch:hover {\n  background: var(--Switch-track-background);\n  border: 1px solid var(--Switch-hover-background);\n}\n.excalidraw .Switch:active {\n  border: 1px solid var(--Switch-active-background);\n}\n.excalidraw .Switch.toggled {\n  background: var(--color-primary);\n  border: 1px solid var(--color-primary);\n}\n.excalidraw .Switch.toggled:hover {\n  background: var(--color-primary-darker);\n  border: 1px solid var(--color-primary-darker);\n}\n.excalidraw .Switch.disabled {\n  background: var(--Switch-track-background);\n  border: 1px solid var(--Switch-disabled-border);\n}\n.excalidraw .Switch.disabled.toggled {\n  background: var(--Switch-disabled-toggled-background);\n  border: 1px solid var(--Switch-disabled-toggled-background);\n}\n.excalidraw .Switch:before {\n  content: \"\";\n  box-sizing: border-box;\n  display: block;\n  pointer-events: none;\n  position: absolute;\n  border-radius: 100%;\n  transition: all 150ms ease-out;\n  width: 10px;\n  height: 10px;\n  top: 4px;\n  left: 4px;\n  background: var(--Switch-thumb-background);\n}\n.excalidraw .Switch:active:before {\n  width: 12px;\n}\n.excalidraw .Switch.toggled:before {\n  width: 14px;\n  height: 14px;\n  left: 22px;\n  top: 2px;\n  background: var(--Switch-track-background);\n}\n.excalidraw .Switch.toggled:active:before {\n  width: 16px;\n  left: 20px;\n}\n.excalidraw .Switch.disabled:before {\n  background: var(--Switch-disabled-color);\n}\n.excalidraw .Switch.disabled.toggled:before {\n  background: var(--Switch-disabled-color);\n}\n.excalidraw .Switch input {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  border-radius: 12px;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  cursor: pointer;\n}\n.excalidraw .Switch input:disabled {\n  cursor: unset;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJTd2l0Y2guc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMzS0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFFQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLS1Td2l0Y2gtZGlzYWJsZWQtY29sb3I6IHZhcigtLWNvbG9yLWJvcmRlci1vdXRsaW5lKTtcbiAgLS1Td2l0Y2gtZGlzYWJsZWQtdG9nZ2xlZC1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1ib3JkZXItb3V0bGluZS12YXJpYW50KTtcbiAgLS1Td2l0Y2gtZGlzYWJsZWQtYm9yZGVyOiB2YXIoLS1jb2xvci1ib3JkZXItb3V0bGluZS12YXJpYW50KTtcbiAgLS1Td2l0Y2gtdHJhY2stYmFja2dyb3VuZDogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgLS1Td2l0Y2gtdGh1bWItYmFja2dyb3VuZDogdmFyKC0tY29sb3Itb24tc3VyZmFjZSk7XG4gIC0tU3dpdGNoLWhvdmVyLWJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJyYW5kLWhvdmVyKTtcbiAgLS1Td2l0Y2gtYWN0aXZlLWJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG5cbiAgLlN3aXRjaCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICB3aWR0aDogNDBweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcblxuICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IGJhY2tncm91bmQsIGJvcmRlcjtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAxNTBtcztcbiAgICB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1vdXQ7XG5cbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1Td2l0Y2gtdHJhY2stYmFja2dyb3VuZCk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tU3dpdGNoLWRpc2FibGVkLWNvbG9yKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tU3dpdGNoLXRyYWNrLWJhY2tncm91bmQpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tU3dpdGNoLWhvdmVyLWJhY2tncm91bmQpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLVN3aXRjaC1hY3RpdmUtYmFja2dyb3VuZCk7XG4gICAgfVxuXG4gICAgJi50b2dnbGVkIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcHJpbWFyeSk7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlcik7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLmRpc2FibGVkIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLVN3aXRjaC10cmFjay1iYWNrZ3JvdW5kKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLVN3aXRjaC1kaXNhYmxlZC1ib3JkZXIpO1xuXG4gICAgICAmLnRvZ2dsZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1Td2l0Y2gtZGlzYWJsZWQtdG9nZ2xlZC1iYWNrZ3JvdW5kKTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tU3dpdGNoLWRpc2FibGVkLXRvZ2dsZWQtYmFja2dyb3VuZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpiZWZvcmUge1xuICAgICAgY29udGVudDogXCJcIjtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gICAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICAgICAgdHJhbnNpdGlvbjogYWxsIDE1MG1zIGVhc2Utb3V0O1xuXG4gICAgICB3aWR0aDogMTBweDtcbiAgICAgIGhlaWdodDogMTBweDtcbiAgICAgIHRvcDogNHB4O1xuICAgICAgbGVmdDogNHB4O1xuXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1Td2l0Y2gtdGh1bWItYmFja2dyb3VuZCk7XG4gICAgfVxuXG4gICAgJjphY3RpdmU6YmVmb3JlIHtcbiAgICAgIHdpZHRoOiAxMnB4O1xuICAgIH1cblxuICAgICYudG9nZ2xlZDpiZWZvcmUge1xuICAgICAgd2lkdGg6IDE0cHg7XG4gICAgICBoZWlnaHQ6IDE0cHg7XG4gICAgICBsZWZ0OiAyMnB4O1xuICAgICAgdG9wOiAycHg7XG5cbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLVN3aXRjaC10cmFjay1iYWNrZ3JvdW5kKTtcbiAgICB9XG5cbiAgICAmLnRvZ2dsZWQ6YWN0aXZlOmJlZm9yZSB7XG4gICAgICB3aWR0aDogMTZweDtcbiAgICAgIGxlZnQ6IDIwcHg7XG4gICAgfVxuXG4gICAgJi5kaXNhYmxlZDpiZWZvcmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tU3dpdGNoLWRpc2FibGVkLWNvbG9yKTtcbiAgICB9XG5cbiAgICAmLmRpc2FibGVkLnRvZ2dsZWQ6YmVmb3JlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLVN3aXRjaC1kaXNhYmxlZC1jb2xvcik7XG4gICAgfVxuXG4gICAgJiBpbnB1dCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIG1hcmdpbjogMDtcblxuICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcblxuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgYXBwZWFyYW5jZTogbm9uZTtcblxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICAgICAmOmRpc2FibGVkIHtcbiAgICAgICAgY3Vyc29yOiB1bnNldDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import clsx from \"clsx\";\n\nimport \"./Switch.scss\";\n\nexport type SwitchProps = {\n  name: string;\n  checked: boolean;\n  title?: string;\n  onChange: (value: boolean) => void;\n  disabled?: boolean;\n};\n\nexport const Switch = ({\n  title,\n  name,\n  checked,\n  onChange,\n  disabled = false,\n}: SwitchProps) => {\n  return (\n    <div className={clsx(\"Switch\", { toggled: checked, disabled })}>\n      <input\n        name={name}\n        id={name}\n        title={title}\n        type=\"checkbox\"\n        checked={checked}\n        disabled={disabled}\n        onChange={() => onChange(!checked)}\n        onKeyDown={(event) => {\n          if (event.key === \" \") {\n            onChange(!checked);\n          }\n        }}\n      />\n    </div>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --ImageExportModal-preview-border: #d6d6d6;\n}\n.excalidraw.theme--dark {\n  --ImageExportModal-preview-border: #5c5c5c;\n}\n.excalidraw .ImageExportModal {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  user-select: none;\n}\n.excalidraw .ImageExportModal h3 {\n  font-family: \"Assistant\";\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1.313rem;\n  line-height: 130%;\n  padding: 0;\n  margin: 0;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal h3 {\n  display: none;\n}\n\n.excalidraw .ImageExportModal > h3 {\n  display: none;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal > h3 {\n  display: block;\n}\n\n.excalidraw--mobile.excalidraw .ImageExportModal {\n  flex-direction: column;\n  height: calc(100vh - 5rem);\n}\n\n.excalidraw .ImageExportModal__preview {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 360px;\n  width: 55%;\n  margin-right: 1.5rem;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal__preview {\n  max-width: unset;\n  margin-right: unset;\n  width: 100%;\n  height: unset;\n  flex-grow: 1;\n}\n\n.excalidraw .ImageExportModal__preview__filename > input {\n  margin-top: 1rem;\n}\n.excalidraw .ImageExportModal__preview__canvas {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-grow: 1;\n  justify-content: center;\n  align-items: center;\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center;\n  border: 1px solid var(--ImageExportModal-preview-border);\n  border-radius: 12px;\n  overflow: hidden;\n  padding: 1rem;\n}\n.excalidraw .ImageExportModal__preview__canvas > canvas {\n  max-width: calc(100% - 2rem);\n  max-height: calc(100% - 2rem);\n  filter: none !important;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal__preview__canvas > canvas {\n  max-height: 100%;\n}\n\n.excalidraw--mobile.excalidraw .ImageExportModal__preview__canvas {\n  margin-top: 24px;\n  max-width: unset;\n}\n\n.excalidraw .ImageExportModal__settings {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  gap: 18px;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal__settings {\n  margin-left: unset;\n  margin-top: 1rem;\n  flex-direction: row;\n  gap: 6px 34px;\n  align-content: flex-start;\n}\n\n.excalidraw .ImageExportModal__settings__setting {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal__settings__setting {\n  flex-direction: column;\n  align-items: start;\n  justify-content: unset;\n  height: 52px;\n}\n\n.excalidraw .ImageExportModal__settings__setting__label {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  font-family: \"Assistant\";\n  font-weight: 600;\n  font-size: 1rem;\n  line-height: 150%;\n}\n.excalidraw .ImageExportModal__settings__setting__label svg {\n  width: 20px;\n  height: 20px;\n  margin-left: 10px;\n}\n.excalidraw .ImageExportModal__settings__setting__content {\n  display: flex;\n  height: 100%;\n  align-items: center;\n}\n.excalidraw .ImageExportModal__settings__buttons {\n  flex-grow: 1;\n  flex-wrap: wrap;\n  display: flex;\n  flex-direction: row;\n  gap: 11px;\n  align-items: flex-end;\n  align-content: flex-end;\n}\n.excalidraw--mobile.excalidraw .ImageExportModal__settings__buttons {\n  padding-top: 32px;\n  flex-basis: 100%;\n  justify-content: center;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJJbWFnZUV4cG9ydERpYWxvZy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzNLRjtFQUNFOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBRHBCSztFQ3VCSDs7O0FBSUo7RUFDRTs7QUQ1Qks7RUMrQkg7OztBRC9CRztFQ29DTDtFQUNBOzs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOztBRGhESztFQ21ESDtFQUNBO0VBRUE7RUFDQTtFQUNBOzs7QUFJQTtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUdBO0VBQ0E7RUFFQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUVBOztBRHZGQztFQzBGQzs7O0FEMUZEO0VDK0ZEO0VBQ0E7OztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FEekdLO0VDNEdIO0VBQ0E7RUFDQTtFQUNBO0VBRUE7OztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FEeEhHO0VDMkhEO0VBQ0E7RUFDQTtFQUNBOzs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7O0FEaktHO0VDb0tEO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC0tSW1hZ2VFeHBvcnRNb2RhbC1wcmV2aWV3LWJvcmRlcjogI2Q2ZDZkNjtcblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAtLUltYWdlRXhwb3J0TW9kYWwtcHJldmlldy1ib3JkZXI6ICM1YzVjNWM7XG4gIH1cblxuICAuSW1hZ2VFeHBvcnRNb2RhbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcblxuICAgIHVzZXItc2VsZWN0OiBub25lO1xuXG4gICAgJiBoMyB7XG4gICAgICBmb250LWZhbWlseTogXCJBc3Npc3RhbnRcIjtcbiAgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICBmb250LXNpemU6IDEuMzEzcmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDEzMCU7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgbWFyZ2luOiAwO1xuXG4gICAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJiA+IGgzIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG5cbiAgICAgIEBpbmNsdWRlIGlzTW9iaWxlIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGhlaWdodDogY2FsYygxMDB2aCAtIDVyZW0pO1xuICAgIH1cblxuICAgICZfX3ByZXZpZXcge1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIGhlaWdodDogMzYwcHg7XG4gICAgICB3aWR0aDogNTUlO1xuXG4gICAgICBtYXJnaW4tcmlnaHQ6IDEuNXJlbTtcblxuICAgICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgICBtYXgtd2lkdGg6IHVuc2V0O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IHVuc2V0O1xuXG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IHVuc2V0O1xuICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICB9XG5cbiAgICAgICZfX2ZpbGVuYW1lIHtcbiAgICAgICAgJiA+IGlucHV0IHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxcmVtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICZfX2NhbnZhcyB7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAgICAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQU1VbEVRVlE0VDJOa1lHQVFZY0FQM3VDVFpodzFnR0dZaEFHQlpJQS9uWURDZ0JEQW05QkdEV0FBSnlSQ2dMYUJDQUFnWHdpeHpBUzBwZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKVxuICAgICAgICAgIGxlZnQgY2VudGVyO1xuXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLUltYWdlRXhwb3J0TW9kYWwtcHJldmlldy1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuXG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHBhZGRpbmc6IDFyZW07XG5cbiAgICAgICAgJiA+IGNhbnZhcyB7XG4gICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAycmVtKTtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMCUgLSAycmVtKTtcblxuICAgICAgICAgIGZpbHRlcjogbm9uZSAhaW1wb3J0YW50O1xuXG4gICAgICAgICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgICAgICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjRweDtcbiAgICAgICAgICBtYXgtd2lkdGg6IHVuc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJl9fc2V0dGluZ3Mge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICBnYXA6IDE4cHg7XG5cbiAgICAgIEBpbmNsdWRlIGlzTW9iaWxlIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IHVuc2V0O1xuICAgICAgICBtYXJnaW4tdG9wOiAxcmVtO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBnYXA6IDZweCAzNHB4O1xuXG4gICAgICAgIGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICB9XG5cbiAgICAgICZfX3NldHRpbmcge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAgICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogdW5zZXQ7XG4gICAgICAgICAgaGVpZ2h0OiA1MnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgJl9fbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgICAgICAgZm9udC1mYW1pbHk6IFwiQXNzaXN0YW50XCI7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDE1MCU7XG5cbiAgICAgICAgICAmIHN2ZyB7XG4gICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgIGhlaWdodDogMjBweDtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICZfX2NvbnRlbnQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJl9fYnV0dG9ucyB7XG4gICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBnYXA6IDExcHg7XG5cbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICBhbGlnbi1jb250ZW50OiBmbGV4LWVuZDtcblxuICAgICAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDMycHg7XG4gICAgICAgICAgZmxleC1iYXNpczogMTAwJTtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .ExcButton {\n  --text-color: transparent;\n  --border-color: transparent;\n  --back-color: transparent;\n  color: var(--text-color);\n  background-color: var(--back-color);\n  border-color: var(--border-color);\n  border-radius: 0.5rem;\n  border-width: 1px;\n  border-style: solid;\n  font-family: var(--font-family);\n  user-select: none;\n  transition: all 150ms ease-out;\n}\n.excalidraw .ExcButton .Spinner {\n  --spinner-color: var(--color-surface-lowest);\n  position: absolute;\n  visibility: visible;\n}\n.excalidraw .ExcButton[disabled] {\n  pointer-events: none;\n}\n.excalidraw .ExcButton[disabled] .ExcButton__contents {\n  visibility: hidden;\n}\n.excalidraw .ExcButton, .excalidraw .ExcButton__contents {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  flex-wrap: nowrap;\n  position: relative;\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-filled {\n  --text-color: var(--color-surface-lowest);\n  --back-color: var(--color-primary);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-filled .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-filled:hover {\n  --back-color: var(--color-brand-hover);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-filled:active {\n  --back-color: var(--color-brand-active);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined, .excalidraw .ExcButton--color-primary.ExcButton--variant-icon {\n  --text-color: var(--color-primary);\n  --border-color: var(--color-primary);\n  --back-color: transparent;\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined .Spinner, .excalidraw .ExcButton--color-primary.ExcButton--variant-icon .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined:hover, .excalidraw .ExcButton--color-primary.ExcButton--variant-icon:hover {\n  --text-color: var(--color-brand-hover);\n  --border-color: var(--color-brand-hover);\n}\n.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined:active, .excalidraw .ExcButton--color-primary.ExcButton--variant-icon:active {\n  --text-color: var(--color-brand-active);\n  --border-color: var(--color-brand-active);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-filled {\n  --text-color: var(--color-danger-text);\n  --back-color: var(--color-danger-dark);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-filled .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-filled:hover {\n  --back-color: var(--color-danger-darker);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-filled:active {\n  --back-color: var(--color-danger-darkest);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined, .excalidraw .ExcButton--color-danger.ExcButton--variant-icon {\n  --text-color: var(--color-danger);\n  --border-color: var(--color-danger);\n  --back-color: transparent;\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined .Spinner, .excalidraw .ExcButton--color-danger.ExcButton--variant-icon .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined:hover, .excalidraw .ExcButton--color-danger.ExcButton--variant-icon:hover {\n  --text-color: var(--color-danger-darkest);\n  --border-color: var(--color-danger-darkest);\n}\n.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined:active, .excalidraw .ExcButton--color-danger.ExcButton--variant-icon:active {\n  --text-color: var(--color-danger-darker);\n  --border-color: var(--color-danger-darker);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-filled {\n  --text-color: var(--island-bg-color);\n  --back-color: var(--color-gray-50);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-filled .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-filled:hover {\n  --back-color: var(--color-gray-60);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-filled:active {\n  --back-color: var(--color-gray-80);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined, .excalidraw .ExcButton--color-muted.ExcButton--variant-icon {\n  --text-color: var(--color-muted-background);\n  --border-color: var(--color-muted);\n  --back-color: var(--island-bg-color);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined .Spinner, .excalidraw .ExcButton--color-muted.ExcButton--variant-icon .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined:hover, .excalidraw .ExcButton--color-muted.ExcButton--variant-icon:hover {\n  --text-color: var(--color-muted-background-darker);\n  --border-color: var(--color-muted-darker);\n}\n.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined:active, .excalidraw .ExcButton--color-muted.ExcButton--variant-icon:active {\n  --text-color: var(--color-muted-background-darker);\n  --border-color: var(--color-muted-darkest);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-filled {\n  --text-color: black;\n  --back-color: var(--color-warning-dark);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-filled .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-filled:hover {\n  --back-color: var(--color-warning-darker);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-filled:active {\n  --back-color: var(--color-warning-darkest);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined, .excalidraw .ExcButton--color-warning.ExcButton--variant-icon {\n  --text-color: var(--color-warning-dark);\n  --border-color: var(--color-warning-dark);\n  --back-color: var(--input-bg-color);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined .Spinner, .excalidraw .ExcButton--color-warning.ExcButton--variant-icon .Spinner {\n  --spinner-color: var(--text-color);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined:hover, .excalidraw .ExcButton--color-warning.ExcButton--variant-icon:hover {\n  --text-color: var(--color-warning-darker);\n  --border-color: var(--color-warning-darker);\n}\n.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined:active, .excalidraw .ExcButton--color-warning.ExcButton--variant-icon:active {\n  --text-color: var(--color-warning-darkest);\n  --border-color: var(--color-warning-darkest);\n}\n.excalidraw .ExcButton--size-large {\n  font-weight: 600;\n  font-size: 0.875rem;\n  min-height: 3rem;\n  padding: 0.5rem 1.5rem;\n  letter-spacing: 0.4px;\n}\n.excalidraw .ExcButton--size-large .ExcButton__contents {\n  gap: 0.75rem;\n}\n.excalidraw .ExcButton--size-medium {\n  font-weight: 600;\n  font-size: 0.75rem;\n  min-height: 2.5rem;\n  padding: 0.5rem 1rem;\n  letter-spacing: normal;\n}\n.excalidraw .ExcButton--size-medium .ExcButton__contents {\n  gap: 0.5rem;\n}\n.excalidraw .ExcButton--variant-icon {\n  padding: 0.5rem 0.75rem;\n  width: 3rem;\n}\n.excalidraw .ExcButton--fullWidth {\n  width: 100%;\n}\n.excalidraw .ExcButton__icon {\n  width: 1.25rem;\n  height: 1.25rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJGaWxsZWRCdXR0b24uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUEyTEE7RUFDQTtFQUNBO0VBRUE7RUFFQTtFQUVBOztBQWpNQTtFQUNFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFOztBQUVBO0VBQ0U7O0FBSUo7RUFFRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBSUE7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUlKO0VBRUU7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFNSjtFQUNFO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7O0FBSUo7RUFFRTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQU1KO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJSjtFQUVFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBTUo7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUlKO0VBRUU7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFlTjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAuRXhjQnV0dG9uIHtcbiAgICAtLXRleHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIC0tYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAtLWJhY2stY29sb3I6IHRyYW5zcGFyZW50O1xuXG4gICAgY29sb3I6IHZhcigtLXRleHQtY29sb3IpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2stY29sb3IpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYm9yZGVyLWNvbG9yKTtcblxuICAgIC5TcGlubmVyIHtcbiAgICAgIC0tc3Bpbm5lci1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICB9XG5cbiAgICAmW2Rpc2FibGVkXSB7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgICAgLkV4Y0J1dHRvbl9fY29udGVudHMge1xuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICB9XG4gICAgfVxuXG4gICAgJixcbiAgICAmX19jb250ZW50cyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgIC8vIG5lZWRlZCBiZWNhdXNlIG9mIC5TcGlubmVyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuXG4gICAgJi0tY29sb3ItcHJpbWFyeSB7XG4gICAgICAmLkV4Y0J1dHRvbi0tdmFyaWFudC1maWxsZWQge1xuICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcblxuICAgICAgICAuU3Bpbm5lciB7XG4gICAgICAgICAgLS1zcGlubmVyLWNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIC0tYmFjay1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtaG92ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIC0tYmFjay1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLkV4Y0J1dHRvbi0tdmFyaWFudC1vdXRsaW5lZCxcbiAgICAgICYuRXhjQnV0dG9uLS12YXJpYW50LWljb24ge1xuICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICAtLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICAgIC0tYmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgICAgICAgLlNwaW5uZXIge1xuICAgICAgICAgIC0tc3Bpbm5lci1jb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLWJyYW5kLWhvdmVyKTtcbiAgICAgICAgICAtLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtaG92ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgICAgICAgICAtLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICYtLWNvbG9yLWRhbmdlciB7XG4gICAgICAmLkV4Y0J1dHRvbi0tdmFyaWFudC1maWxsZWQge1xuICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLWRhbmdlci10ZXh0KTtcbiAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci1kYW5nZXItZGFyayk7XG5cbiAgICAgICAgLlNwaW5uZXIge1xuICAgICAgICAgIC0tc3Bpbm5lci1jb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAtLWJhY2stY29sb3I6IHZhcigtLWNvbG9yLWRhbmdlci1kYXJrZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIC0tYmFjay1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyLWRhcmtlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuRXhjQnV0dG9uLS12YXJpYW50LW91dGxpbmVkLFxuICAgICAgJi5FeGNCdXR0b24tLXZhcmlhbnQtaWNvbiB7XG4gICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyKTtcbiAgICAgICAgLS1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWRhbmdlcik7XG4gICAgICAgIC0tYmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgICAgICAgLlNwaW5uZXIge1xuICAgICAgICAgIC0tc3Bpbm5lci1jb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLWRhbmdlci1kYXJrZXN0KTtcbiAgICAgICAgICAtLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyLWRhcmtlc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyLWRhcmtlcik7XG4gICAgICAgICAgLS1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWRhbmdlci1kYXJrZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi0tY29sb3ItbXV0ZWQge1xuICAgICAgJi5FeGNCdXR0b24tLXZhcmlhbnQtZmlsbGVkIHtcbiAgICAgICAgLS10ZXh0LWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgICAgICAtLWJhY2stY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNTApO1xuXG4gICAgICAgIC5TcGlubmVyIHtcbiAgICAgICAgICAtLXNwaW5uZXItY29sb3I6IHZhcigtLXRleHQtY29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICAtLWJhY2stY29sb3I6IHZhcigtLWNvbG9yLWdyYXktODApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuRXhjQnV0dG9uLS12YXJpYW50LW91dGxpbmVkLFxuICAgICAgJi5FeGNCdXR0b24tLXZhcmlhbnQtaWNvbiB7XG4gICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZCk7XG4gICAgICAgIC0tYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1tdXRlZCk7XG4gICAgICAgIC0tYmFjay1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcblxuICAgICAgICAuU3Bpbm5lciB7XG4gICAgICAgICAgLS1zcGlubmVyLWNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZC1kYXJrZXIpO1xuICAgICAgICAgIC0tYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1tdXRlZC1kYXJrZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZC1kYXJrZXIpO1xuICAgICAgICAgIC0tYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1tdXRlZC1kYXJrZXN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICYtLWNvbG9yLXdhcm5pbmcge1xuICAgICAgJi5FeGNCdXR0b24tLXZhcmlhbnQtZmlsbGVkIHtcbiAgICAgICAgLS10ZXh0LWNvbG9yOiBibGFjaztcbiAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmspO1xuXG4gICAgICAgIC5TcGlubmVyIHtcbiAgICAgICAgICAtLXNwaW5uZXItY29sb3I6IHZhcigtLXRleHQtY29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmtlcik7XG4gICAgICAgIH1cblxuICAgICAgICAmOmFjdGl2ZSB7XG4gICAgICAgICAgLS1iYWNrLWNvbG9yOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmtlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuRXhjQnV0dG9uLS12YXJpYW50LW91dGxpbmVkLFxuICAgICAgJi5FeGNCdXR0b24tLXZhcmlhbnQtaWNvbiB7XG4gICAgICAgIC0tdGV4dC1jb2xvcjogdmFyKC0tY29sb3Itd2FybmluZy1kYXJrKTtcbiAgICAgICAgLS1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXdhcm5pbmctZGFyayk7XG4gICAgICAgIC0tYmFjay1jb2xvcjogdmFyKC0taW5wdXQtYmctY29sb3IpO1xuXG4gICAgICAgIC5TcGlubmVyIHtcbiAgICAgICAgICAtLXNwaW5uZXItY29sb3I6IHZhcigtLXRleHQtY29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgLS10ZXh0LWNvbG9yOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmtlcik7XG4gICAgICAgICAgLS1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXdhcm5pbmctZGFya2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICAtLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXdhcm5pbmctZGFya2VzdCk7XG4gICAgICAgICAgLS1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXdhcm5pbmctZGFya2VzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcblxuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWZhbWlseSk7XG5cbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcblxuICAgIHRyYW5zaXRpb246IGFsbCAxNTBtcyBlYXNlLW91dDtcblxuICAgICYtLXNpemUtbGFyZ2Uge1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICBtaW4taGVpZ2h0OiAzcmVtO1xuICAgICAgcGFkZGluZzogMC41cmVtIDEuNXJlbTtcblxuICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuNHB4O1xuXG4gICAgICAuRXhjQnV0dG9uX19jb250ZW50cyB7XG4gICAgICAgIGdhcDogMC43NXJlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLS1zaXplLW1lZGl1bSB7XG4gICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgbWluLWhlaWdodDogMi41cmVtO1xuICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XG5cbiAgICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG5cbiAgICAgIC5FeGNCdXR0b25fX2NvbnRlbnRzIHtcbiAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi0tdmFyaWFudC1pY29uIHtcbiAgICAgIHBhZGRpbmc6IDAuNXJlbSAwLjc1cmVtO1xuICAgICAgd2lkdGg6IDNyZW07XG4gICAgfVxuXG4gICAgJi0tZnVsbFdpZHRoIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgICZfX2ljb24ge1xuICAgICAgd2lkdGg6IDEuMjVyZW07XG4gICAgICBoZWlnaHQ6IDEuMjVyZW07XG4gICAgfVxuICB9XG59XG4iXX0= */", "import React, { forwardRef, useState } from \"react\";\nimport clsx from \"clsx\";\n\nimport \"./FilledButton.scss\";\nimport { AbortError } from \"../errors\";\nimport Spinner from \"./Spinner\";\nimport { isPromiseLike } from \"../utils\";\n\nexport type ButtonVariant = \"filled\" | \"outlined\" | \"icon\";\nexport type ButtonColor = \"primary\" | \"danger\" | \"warning\" | \"muted\";\nexport type ButtonSize = \"medium\" | \"large\";\n\nexport type FilledButtonProps = {\n  label: string;\n\n  children?: React.ReactNode;\n  onClick?: (event: React.MouseEvent) => void;\n\n  variant?: ButtonVariant;\n  color?: ButtonColor;\n  size?: ButtonSize;\n  className?: string;\n  fullWidth?: boolean;\n\n  icon?: React.ReactNode;\n};\n\nexport const FilledButton = forwardRef<HTMLButtonElement, FilledButtonProps>(\n  (\n    {\n      children,\n      icon,\n      onClick,\n      label,\n      variant = \"filled\",\n      color = \"primary\",\n      size = \"medium\",\n      fullWidth,\n      className,\n    },\n    ref,\n  ) => {\n    const [isLoading, setIsLoading] = useState(false);\n\n    const _onClick = async (event: React.MouseEvent) => {\n      const ret = onClick?.(event);\n\n      if (isPromiseLike(ret)) {\n        try {\n          setIsLoading(true);\n          await ret;\n        } catch (error: any) {\n          if (!(error instanceof AbortError)) {\n            throw error;\n          } else {\n            console.warn(error);\n          }\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    return (\n      <button\n        className={clsx(\n          \"ExcButton\",\n          `ExcButton--color-${color}`,\n          `ExcButton--variant-${variant}`,\n          `ExcButton--size-${size}`,\n          { \"ExcButton--fullWidth\": fullWidth },\n          className,\n        )}\n        onClick={_onClick}\n        type=\"button\"\n        aria-label={label}\n        ref={ref}\n        disabled={isLoading}\n      >\n        <div className=\"ExcButton__contents\">\n          {isLoading && <Spinner />}\n          {icon && (\n            <div className=\"ExcButton__icon\" aria-hidden>\n              {icon}\n            </div>\n          )}\n          {variant !== \"icon\" && (children ?? label)}\n        </div>\n      </button>\n    );\n  },\n);\n", "import React, { useEffect, useRef, useState } from \"react\";\n\nimport type { ActionManager } from \"../actions/manager\";\nimport type { AppClassProperties, BinaryFiles, UIAppState } from \"../types\";\n\nimport {\n  actionExportWithDarkMode,\n  actionChangeExportBackground,\n  actionChangeExportEmbedScene,\n  actionChangeExportScale,\n  actionChangeProjectName,\n} from \"../actions/actionExport\";\nimport { probablySupportsClipboardBlob } from \"../clipboard\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  EXPORT_IMAGE_TYPES,\n  isFirefox,\n  EXPORT_SCALES,\n} from \"../constants\";\n\nimport { canvasToBlob } from \"../data/blob\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { exportToCanvas } from \"../../utils/export\";\n\nimport { copyIcon, downloadIcon, helpIcon } from \"./icons\";\nimport { Dialog } from \"./Dialog\";\nimport { RadioGroup } from \"./RadioGroup\";\nimport { Switch } from \"./Switch\";\nimport { Tooltip } from \"./Tooltip\";\n\nimport \"./ImageExportDialog.scss\";\nimport { FilledButton } from \"./FilledButton\";\nimport { cloneJSON } from \"../utils\";\nimport { prepareElementsForExport } from \"../data\";\n\nconst supportsContextFilters =\n  \"filter\" in document.createElement(\"canvas\").getContext(\"2d\")!;\n\nexport const ErrorCanvasPreview = () => {\n  return (\n    <div>\n      <h3>{t(\"canvasError.cannotShowPreview\")}</h3>\n      <p>\n        <span>{t(\"canvasError.canvasTooBig\")}</span>\n      </p>\n      <em>({t(\"canvasError.canvasTooBigTip\")})</em>\n    </div>\n  );\n};\n\ntype ImageExportModalProps = {\n  appStateSnapshot: Readonly<UIAppState>;\n  elementsSnapshot: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  name: string;\n};\n\nconst ImageExportModal = ({\n  appStateSnapshot,\n  elementsSnapshot,\n  files,\n  actionManager,\n  onExportImage,\n  name,\n}: ImageExportModalProps) => {\n  const hasSelection = isSomeElementSelected(\n    elementsSnapshot,\n    appStateSnapshot,\n  );\n\n  const [projectName, setProjectName] = useState(name);\n  const [exportSelectionOnly, setExportSelectionOnly] = useState(hasSelection);\n  const [exportWithBackground, setExportWithBackground] = useState(\n    appStateSnapshot.exportBackground,\n  );\n  const [exportDarkMode, setExportDarkMode] = useState(\n    appStateSnapshot.exportWithDarkMode,\n  );\n  const [embedScene, setEmbedScene] = useState(\n    appStateSnapshot.exportEmbedScene,\n  );\n  const [exportScale, setExportScale] = useState(appStateSnapshot.exportScale);\n\n  const previewRef = useRef<HTMLDivElement>(null);\n  const [renderError, setRenderError] = useState<Error | null>(null);\n\n  const { exportedElements, exportingFrame } = prepareElementsForExport(\n    elementsSnapshot,\n    appStateSnapshot,\n    exportSelectionOnly,\n  );\n\n  useEffect(() => {\n    const previewNode = previewRef.current;\n    if (!previewNode) {\n      return;\n    }\n    const maxWidth = previewNode.offsetWidth;\n    const maxHeight = previewNode.offsetHeight;\n    if (!maxWidth) {\n      return;\n    }\n    exportToCanvas({\n      elements: exportedElements,\n      appState: {\n        ...appStateSnapshot,\n        name: projectName,\n        exportBackground: exportWithBackground,\n        exportWithDarkMode: exportDarkMode,\n        exportScale,\n        exportEmbedScene: embedScene,\n      },\n      files,\n      exportPadding: DEFAULT_EXPORT_PADDING,\n      maxWidthOrHeight: Math.max(maxWidth, maxHeight),\n      exportingFrame,\n    })\n      .then((canvas) => {\n        setRenderError(null);\n        // if converting to blob fails, there's some problem that will\n        // likely prevent preview and export (e.g. canvas too big)\n        return canvasToBlob(canvas).then(() => {\n          previewNode.replaceChildren(canvas);\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        setRenderError(error);\n      });\n  }, [\n    appStateSnapshot,\n    files,\n    exportedElements,\n    exportingFrame,\n    projectName,\n    exportWithBackground,\n    exportDarkMode,\n    exportScale,\n    embedScene,\n  ]);\n\n  return (\n    <div className=\"ImageExportModal\">\n      <h3>{t(\"imageExportDialog.header\")}</h3>\n      <div className=\"ImageExportModal__preview\">\n        <div className=\"ImageExportModal__preview__canvas\" ref={previewRef}>\n          {renderError && <ErrorCanvasPreview />}\n        </div>\n        <div className=\"ImageExportModal__preview__filename\">\n          {!nativeFileSystemSupported && (\n            <input\n              type=\"text\"\n              className=\"TextInput\"\n              value={projectName}\n              style={{ width: \"30ch\" }}\n              onChange={(event) => {\n                setProjectName(event.target.value);\n                actionManager.executeAction(\n                  actionChangeProjectName,\n                  \"ui\",\n                  event.target.value,\n                );\n              }}\n            />\n          )}\n        </div>\n      </div>\n      <div className=\"ImageExportModal__settings\">\n        <h3>{t(\"imageExportDialog.header\")}</h3>\n        {hasSelection && (\n          <ExportSetting\n            label={t(\"imageExportDialog.label.onlySelected\")}\n            name=\"exportOnlySelected\"\n          >\n            <Switch\n              name=\"exportOnlySelected\"\n              checked={exportSelectionOnly}\n              onChange={(checked) => {\n                setExportSelectionOnly(checked);\n              }}\n            />\n          </ExportSetting>\n        )}\n        <ExportSetting\n          label={t(\"imageExportDialog.label.withBackground\")}\n          name=\"exportBackgroundSwitch\"\n        >\n          <Switch\n            name=\"exportBackgroundSwitch\"\n            checked={exportWithBackground}\n            onChange={(checked) => {\n              setExportWithBackground(checked);\n              actionManager.executeAction(\n                actionChangeExportBackground,\n                \"ui\",\n                checked,\n              );\n            }}\n          />\n        </ExportSetting>\n        {supportsContextFilters && (\n          <ExportSetting\n            label={t(\"imageExportDialog.label.darkMode\")}\n            name=\"exportDarkModeSwitch\"\n          >\n            <Switch\n              name=\"exportDarkModeSwitch\"\n              checked={exportDarkMode}\n              onChange={(checked) => {\n                setExportDarkMode(checked);\n                actionManager.executeAction(\n                  actionExportWithDarkMode,\n                  \"ui\",\n                  checked,\n                );\n              }}\n            />\n          </ExportSetting>\n        )}\n        <ExportSetting\n          label={t(\"imageExportDialog.label.embedScene\")}\n          tooltip={t(\"imageExportDialog.tooltip.embedScene\")}\n          name=\"exportEmbedSwitch\"\n        >\n          <Switch\n            name=\"exportEmbedSwitch\"\n            checked={embedScene}\n            onChange={(checked) => {\n              setEmbedScene(checked);\n              actionManager.executeAction(\n                actionChangeExportEmbedScene,\n                \"ui\",\n                checked,\n              );\n            }}\n          />\n        </ExportSetting>\n        <ExportSetting\n          label={t(\"imageExportDialog.label.scale\")}\n          name=\"exportScale\"\n        >\n          <RadioGroup\n            name=\"exportScale\"\n            value={exportScale}\n            onChange={(scale) => {\n              setExportScale(scale);\n              actionManager.executeAction(actionChangeExportScale, \"ui\", scale);\n            }}\n            choices={EXPORT_SCALES.map((scale) => ({\n              value: scale,\n              label: `${scale}\\u00d7`,\n            }))}\n          />\n        </ExportSetting>\n\n        <div className=\"ImageExportModal__settings__buttons\">\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToPng\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.png, exportedElements, {\n                exportingFrame,\n              })\n            }\n            icon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToPng\")}\n          </FilledButton>\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToSvg\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.svg, exportedElements, {\n                exportingFrame,\n              })\n            }\n            icon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToSvg\")}\n          </FilledButton>\n          {(probablySupportsClipboardBlob || isFirefox) && (\n            <FilledButton\n              className=\"ImageExportModal__settings__buttons__button\"\n              label={t(\"imageExportDialog.title.copyPngToClipboard\")}\n              onClick={() =>\n                onExportImage(EXPORT_IMAGE_TYPES.clipboard, exportedElements, {\n                  exportingFrame,\n                })\n              }\n              icon={copyIcon}\n            >\n              {t(\"imageExportDialog.button.copyPngToClipboard\")}\n            </FilledButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\ntype ExportSettingProps = {\n  label: string;\n  children: React.ReactNode;\n  tooltip?: string;\n  name?: string;\n};\n\nconst ExportSetting = ({\n  label,\n  children,\n  tooltip,\n  name,\n}: ExportSettingProps) => {\n  return (\n    <div className=\"ImageExportModal__settings__setting\" title={label}>\n      <label\n        htmlFor={name}\n        className=\"ImageExportModal__settings__setting__label\"\n      >\n        {label}\n        {tooltip && (\n          <Tooltip label={tooltip} long={true}>\n            {helpIcon}\n          </Tooltip>\n        )}\n      </label>\n      <div className=\"ImageExportModal__settings__setting__content\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport const ImageExportDialog = ({\n  elements,\n  appState,\n  files,\n  actionManager,\n  onExportImage,\n  onCloseRequest,\n  name,\n}: {\n  appState: UIAppState;\n  elements: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  onCloseRequest: () => void;\n  name: string;\n}) => {\n  // we need to take a snapshot so that the exported state can't be modified\n  // while the dialog is open\n  const [{ appStateSnapshot, elementsSnapshot }] = useState(() => {\n    return {\n      appStateSnapshot: cloneJSON(appState),\n      elementsSnapshot: cloneJSON(elements),\n    };\n  });\n\n  return (\n    <Dialog onCloseRequest={onCloseRequest} size=\"wide\" title={false}>\n      <ImageExportModal\n        elementsSnapshot={elementsSnapshot}\n        appStateSnapshot={appStateSnapshot}\n        files={files}\n        actionManager={actionManager}\n        onExportImage={onExportImage}\n        name={name}\n      />\n    </Dialog>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .FixedSideContainer {\n  position: absolute;\n  pointer-events: none;\n}\n.excalidraw .FixedSideContainer > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .FixedSideContainer_side_top {\n  left: var(--editor-container-padding);\n  top: var(--editor-container-padding);\n  right: var(--editor-container-padding);\n  bottom: var(--editor-container-padding);\n  z-index: 2;\n}\n.excalidraw .FixedSideContainer_side_top.zen-mode {\n  right: 42px;\n}\n\n/* TODO: if these are used, make sure to implement RTL support\n.FixedSideContainer_side_left {\n  left: var(--space-factor);\n  top: var(--space-factor);\n  bottom: var(--space-factor);\n  z-index: 1;\n}\n\n.FixedSideContainer_side_right {\n  right: var(--space-factor);\n  top: var(--space-factor);\n  bottom: var(--space-factor);\n  z-index: 3;\n}\n*/\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJGaXhlZFNpZGVDb250YWluZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7OztBQUlKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLkZpeGVkU2lkZUNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB9XG5cbiAgLkZpeGVkU2lkZUNvbnRhaW5lciA+ICoge1xuICAgIHBvaW50ZXItZXZlbnRzOiB2YXIoLS11aS1wb2ludGVyRXZlbnRzKTtcbiAgfVxuXG4gIC5GaXhlZFNpZGVDb250YWluZXJfc2lkZV90b3Age1xuICAgIGxlZnQ6IHZhcigtLWVkaXRvci1jb250YWluZXItcGFkZGluZyk7XG4gICAgdG9wOiB2YXIoLS1lZGl0b3ItY29udGFpbmVyLXBhZGRpbmcpO1xuICAgIHJpZ2h0OiB2YXIoLS1lZGl0b3ItY29udGFpbmVyLXBhZGRpbmcpO1xuICAgIGJvdHRvbTogdmFyKC0tZWRpdG9yLWNvbnRhaW5lci1wYWRkaW5nKTtcbiAgICB6LWluZGV4OiAyO1xuICB9XG5cbiAgLkZpeGVkU2lkZUNvbnRhaW5lcl9zaWRlX3RvcC56ZW4tbW9kZSB7XG4gICAgcmlnaHQ6IDQycHg7XG4gIH1cbn1cblxuLyogVE9ETzogaWYgdGhlc2UgYXJlIHVzZWQsIG1ha2Ugc3VyZSB0byBpbXBsZW1lbnQgUlRMIHN1cHBvcnRcbi5GaXhlZFNpZGVDb250YWluZXJfc2lkZV9sZWZ0IHtcbiAgbGVmdDogdmFyKC0tc3BhY2UtZmFjdG9yKTtcbiAgdG9wOiB2YXIoLS1zcGFjZS1mYWN0b3IpO1xuICBib3R0b206IHZhcigtLXNwYWNlLWZhY3Rvcik7XG4gIHotaW5kZXg6IDE7XG59XG5cbi5GaXhlZFNpZGVDb250YWluZXJfc2lkZV9yaWdodCB7XG4gIHJpZ2h0OiB2YXIoLS1zcGFjZS1mYWN0b3IpO1xuICB0b3A6IHZhcigtLXNwYWNlLWZhY3Rvcik7XG4gIGJvdHRvbTogdmFyKC0tc3BhY2UtZmFjdG9yKTtcbiAgei1pbmRleDogMztcbn1cbiovXG4iXX0= */", "import \"./FixedSideContainer.scss\";\n\nimport React from \"react\";\nimport clsx from \"clsx\";\n\ntype FixedSideContainerProps = {\n  children: React.ReactNode;\n  side: \"top\" | \"left\" | \"right\";\n  className?: string;\n};\n\nexport const FixedSideContainer = ({\n  children,\n  side,\n  className,\n}: FixedSideContainerProps) => (\n  <div\n    className={clsx(\n      \"FixedSideContainer\",\n      `FixedSideContainer_side_${side}`,\n      className,\n    )}\n  >\n    {children}\n  </div>\n);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .HintViewer {\n  pointer-events: none;\n  box-sizing: border-box;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  left: 0;\n  top: 100%;\n  max-width: 100%;\n  width: 100%;\n  margin-top: 0.5rem;\n  text-align: center;\n  color: var(--color-gray-40);\n  font-size: 0.75rem;\n}\n.excalidraw--mobile.excalidraw .HintViewer {\n  position: static;\n  padding-right: 2rem;\n}\n\n.excalidraw .HintViewer > span {\n  padding: 0.25rem;\n}\n.excalidraw.theme--dark .HintViewer {\n  color: var(--color-gray-60);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJIaW50Vmlld2VyLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDdktBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FEaEJPO0VDbUJMO0VBQ0E7OztBQUdGO0VBQ0U7O0FBS0Y7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4vLyB0aGlzIGlzIGxvb3NlbHkgYmFzZWQgb24gdGhlIGxvbmdlc3QgaGludCB0ZXh0XG4kd2lkZS12aWV3cG9ydC13aWR0aDogMTAwMHB4O1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5IaW50Vmlld2VyIHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAxMDAlO1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXJnaW4tdG9wOiAwLjVyZW07XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTQwKTtcbiAgICBmb250LXNpemU6IDAuNzVyZW07XG5cbiAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICBwb3NpdGlvbjogc3RhdGljO1xuICAgICAgcGFkZGluZy1yaWdodDogMnJlbTtcbiAgICB9XG5cbiAgICA+IHNwYW4ge1xuICAgICAgcGFkZGluZzogMC4yNXJlbTtcbiAgICB9XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAuSGludFZpZXdlciB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS02MCk7XG4gICAgfVxuICB9XG59XG4iXX0= */", "import { t } from \"../i18n\";\nimport { AppClassProperties, Device, UIAppState } from \"../types\";\nimport {\n  isImageElement,\n  isLinearElement,\n  isTextBindableContainer,\n  isTextElement,\n} from \"../element/typeChecks\";\nimport { getShortcutKey } from \"../utils\";\nimport { isEraserActive } from \"../appState\";\n\nimport \"./HintViewer.scss\";\n\ninterface HintViewerProps {\n  appState: UIAppState;\n  isMobile: boolean;\n  device: Device;\n  app: AppClassProperties;\n}\n\nconst getHints = ({ appState, isMobile, device, app }: HintViewerProps) => {\n  const { activeTool, isResizing, isRotating, lastPointerDownWith } = appState;\n  const multiMode = appState.multiElement !== null;\n\n  if (appState.openSidebar && !device.editor.canFitSidebar) {\n    return null;\n  }\n\n  if (isEraserActive(appState)) {\n    return t(\"hints.eraserRevert\");\n  }\n  if (activeTool.type === \"arrow\" || activeTool.type === \"line\") {\n    if (!multiMode) {\n      return t(\"hints.linearElement\");\n    }\n    return t(\"hints.linearElementMulti\");\n  }\n\n  if (activeTool.type === \"freedraw\") {\n    return t(\"hints.freeDraw\");\n  }\n\n  if (activeTool.type === \"text\") {\n    return t(\"hints.text\");\n  }\n\n  if (activeTool.type === \"embeddable\") {\n    return t(\"hints.embeddable\");\n  }\n\n  if (appState.activeTool.type === \"image\" && appState.pendingImageElementId) {\n    return t(\"hints.placeImage\");\n  }\n\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  if (\n    isResizing &&\n    lastPointerDownWith === \"mouse\" &&\n    selectedElements.length === 1\n  ) {\n    const targetElement = selectedElements[0];\n    if (isLinearElement(targetElement) && targetElement.points.length === 2) {\n      return t(\"hints.lockAngle\");\n    }\n    return isImageElement(targetElement)\n      ? t(\"hints.resizeImage\")\n      : t(\"hints.resize\");\n  }\n\n  if (isRotating && lastPointerDownWith === \"mouse\") {\n    return t(\"hints.rotate\");\n  }\n\n  if (selectedElements.length === 1 && isTextElement(selectedElements[0])) {\n    return t(\"hints.text_selected\");\n  }\n\n  if (appState.editingElement && isTextElement(appState.editingElement)) {\n    return t(\"hints.text_editing\");\n  }\n\n  if (activeTool.type === \"selection\") {\n    if (\n      appState.draggingElement?.type === \"selection\" &&\n      !selectedElements.length &&\n      !appState.editingElement &&\n      !appState.editingLinearElement\n    ) {\n      return t(\"hints.deepBoxSelect\");\n    }\n\n    if (appState.gridSize && appState.draggingElement) {\n      return t(\"hints.disableSnapping\");\n    }\n\n    if (!selectedElements.length && !isMobile) {\n      return t(\"hints.canvasPanning\");\n    }\n\n    if (selectedElements.length === 1) {\n      if (isLinearElement(selectedElements[0])) {\n        if (appState.editingLinearElement) {\n          return appState.editingLinearElement.selectedPointsIndices\n            ? t(\"hints.lineEditor_pointSelected\")\n            : t(\"hints.lineEditor_nothingSelected\");\n        }\n        return t(\"hints.lineEditor_info\");\n      }\n      if (\n        !appState.draggingElement &&\n        isTextBindableContainer(selectedElements[0])\n      ) {\n        return t(\"hints.bindTextToElement\");\n      }\n    }\n  }\n\n  return null;\n};\n\nexport const HintViewer = ({\n  appState,\n  isMobile,\n  device,\n  app,\n}: HintViewerProps) => {\n  let hint = getHints({\n    appState,\n    isMobile,\n    device,\n    app,\n  });\n  if (!hint) {\n    return null;\n  }\n\n  hint = getShortcutKey(hint);\n\n  return (\n    <div className=\"HintViewer\">\n      <span>{hint}</span>\n    </div>\n  );\n};\n", "import \"./ToolIcon.scss\";\n\nimport clsx from \"clsx\";\nimport { ToolButtonSize } from \"./ToolButton\";\nimport { LockedIcon, UnlockedIcon } from \"./icons\";\n\ntype LockIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"medium\";\n\nconst ICONS = {\n  CHECKED: LockedIcon,\n  UNCHECKED: UnlockedIcon,\n};\n\nexport const LockButton = (props: LockIconProps) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__lock\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title} \u2014 Q`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n        data-testid=\"toolbar-lock\"\n      />\n      <div className=\"ToolIcon__icon\">\n        {props.checked ? ICONS.CHECKED : ICONS.UNCHECKED}\n      </div>\n    </label>\n  );\n};\n", "import React from \"react\";\nimport { t } from \"../i18n\";\nimport { useExcalidrawContainer } from \"./App\";\n\nexport const Section: React.FC<{\n  heading: \"canvasActions\" | \"selectedShapeActions\" | \"shapes\";\n  children?: React.ReactNode | ((heading: React.ReactNode) => React.ReactNode);\n  className?: string;\n}> = ({ heading, children, ...props }) => {\n  const { id } = useExcalidrawContainer();\n  const header = (\n    <h2 className=\"visually-hidden\" id={`${id}-${heading}-title`}>\n      {t(`headings.${heading}`)}\n    </h2>\n  );\n  return (\n    <section {...props} aria-labelledby={`${id}-${heading}-title`}>\n      {typeof children === \"function\" ? (\n        children(header)\n      ) : (\n        <>\n          {header}\n          {children}\n        </>\n      )}\n    </section>\n  );\n};\n", "import \"./ToolIcon.scss\";\n\nimport clsx from \"clsx\";\nimport { ToolButtonSize } from \"./ToolButton\";\nimport { PenModeIcon } from \"./icons\";\n\ntype PenModeIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  zenModeEnabled?: boolean;\n  isMobile?: boolean;\n  penDetected: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"medium\";\n\nexport const PenModeButton = (props: PenModeIconProps) => {\n  if (!props.penDetected) {\n    return null;\n  }\n\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__penMode\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n      />\n      <div className=\"ToolIcon__icon\">{PenModeIcon}</div>\n    </label>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Stats {\n  position: absolute;\n  top: 64px;\n  right: 12px;\n  font-size: 12px;\n  z-index: 10;\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .Stats h3 {\n  margin: 0 24px 8px 0;\n  white-space: nowrap;\n}\n.excalidraw .Stats .close {\n  float: right;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n}\n.excalidraw .Stats .close svg {\n  width: 100%;\n  height: 100%;\n}\n.excalidraw .Stats table {\n  width: 100%;\n}\n.excalidraw .Stats table th {\n  border-bottom: 1px solid var(--input-border-color);\n  padding: 4px;\n}\n.excalidraw .Stats table tr td:nth-child(2) {\n  min-width: 24px;\n  text-align: right;\n}\n:root[dir=rtl] .excalidraw .Stats {\n  left: 12px;\n  right: initial;\n}\n:root[dir=rtl] .excalidraw .Stats h3 {\n  margin: 0 0 8px 24px;\n}\n:root[dir=rtl] .excalidraw .Stats .close {\n  float: left;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJTdGF0cy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzFLQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFDQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTs7QUFDQTtFQUNFO0VBQ0E7O0FBR0E7RUFDRTtFQUNBOztBQUtOO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUVGO0VBQ0UiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAuU3RhdHMge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDY0cHg7XG4gICAgcmlnaHQ6IDEycHg7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIHotaW5kZXg6IDEwO1xuICAgIHBvaW50ZXItZXZlbnRzOiB2YXIoLS11aS1wb2ludGVyRXZlbnRzKTtcblxuICAgIGgzIHtcbiAgICAgIG1hcmdpbjogMCAyNHB4IDhweCAwO1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICB9XG5cbiAgICAuY2xvc2Uge1xuICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRhYmxlIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgdGgge1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0taW5wdXQtYm9yZGVyLWNvbG9yKTtcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgfVxuICAgICAgdHIge1xuICAgICAgICB0ZDpudGgtY2hpbGQoMikge1xuICAgICAgICAgIG1pbi13aWR0aDogMjRweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgIGxlZnQ6IDEycHg7XG4gICAgICByaWdodDogaW5pdGlhbDtcblxuICAgICAgaDMge1xuICAgICAgICBtYXJnaW46IDAgMCA4cHggMjRweDtcbiAgICAgIH1cbiAgICAgIC5jbG9zZSB7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */", "import React from \"react\";\nimport { getCommonBounds } from \"../element/bounds\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { getTargetElements } from \"../scene\";\nimport { ExcalidrawProps, UIAppState } from \"../types\";\nimport { CloseIcon } from \"./icons\";\nimport { Island } from \"./Island\";\nimport \"./Stats.scss\";\n\nexport const Stats = (props: {\n  appState: UIAppState;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  elements: readonly NonDeletedExcalidrawElement[];\n  onClose: () => void;\n  renderCustomStats: ExcalidrawProps[\"renderCustomStats\"];\n}) => {\n  const boundingBox = getCommonBounds(props.elements);\n  const selectedElements = getTargetElements(props.elements, props.appState);\n  const selectedBoundingBox = getCommonBounds(selectedElements);\n\n  return (\n    <div className=\"Stats\">\n      <Island padding={2}>\n        <div className=\"close\" onClick={props.onClose}>\n          {CloseIcon}\n        </div>\n        <h3>{t(\"stats.title\")}</h3>\n        <table>\n          <tbody>\n            <tr>\n              <th colSpan={2}>{t(\"stats.scene\")}</th>\n            </tr>\n            <tr>\n              <td>{t(\"stats.elements\")}</td>\n              <td>{props.elements.length}</td>\n            </tr>\n            <tr>\n              <td>{t(\"stats.width\")}</td>\n              <td>{Math.round(boundingBox[2]) - Math.round(boundingBox[0])}</td>\n            </tr>\n            <tr>\n              <td>{t(\"stats.height\")}</td>\n              <td>{Math.round(boundingBox[3]) - Math.round(boundingBox[1])}</td>\n            </tr>\n\n            {selectedElements.length === 1 && (\n              <tr>\n                <th colSpan={2}>{t(\"stats.element\")}</th>\n              </tr>\n            )}\n\n            {selectedElements.length > 1 && (\n              <>\n                <tr>\n                  <th colSpan={2}>{t(\"stats.selected\")}</th>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.elements\")}</td>\n                  <td>{selectedElements.length}</td>\n                </tr>\n              </>\n            )}\n            {selectedElements.length > 0 && (\n              <>\n                <tr>\n                  <td>{\"x\"}</td>\n                  <td>{Math.round(selectedBoundingBox[0])}</td>\n                </tr>\n                <tr>\n                  <td>{\"y\"}</td>\n                  <td>{Math.round(selectedBoundingBox[1])}</td>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.width\")}</td>\n                  <td>\n                    {Math.round(\n                      selectedBoundingBox[2] - selectedBoundingBox[0],\n                    )}\n                  </td>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.height\")}</td>\n                  <td>\n                    {Math.round(\n                      selectedBoundingBox[3] - selectedBoundingBox[1],\n                    )}\n                  </td>\n                </tr>\n              </>\n            )}\n            {selectedElements.length === 1 && (\n              <tr>\n                <td>{t(\"stats.angle\")}</td>\n                <td>\n                  {`${Math.round(\n                    (selectedElements[0].angle * 180) / Math.PI,\n                  )}\u00B0`}\n                </td>\n              </tr>\n            )}\n            {props.renderCustomStats?.(props.elements, props.appState)}\n          </tbody>\n        </table>\n      </Island>\n    </div>\n  );\n};\n", "import \"./ToolIcon.scss\";\n\nimport clsx from \"clsx\";\nimport { ToolButton } from \"./ToolButton\";\nimport { handIcon } from \"./icons\";\nimport { KEYS } from \"../keys\";\n\ntype LockIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nexport const HandButton = (props: LockIconProps) => {\n  return (\n    <ToolButton\n      className={clsx(\"Shape\", { fillable: false })}\n      type=\"radio\"\n      icon={handIcon}\n      name=\"editor-current-shape\"\n      checked={props.checked}\n      title={`${props.title} \u2014 H`}\n      keyBindingLabel={!props.isMobile ? KEYS.H.toLocaleUpperCase() : undefined}\n      aria-label={`${props.title} \u2014 H`}\n      aria-keyshortcuts={KEYS.H}\n      data-testid={`toolbar-hand`}\n      onChange={() => props.onChange?.()}\n    />\n  );\n};\n", "import React from \"react\";\nimport {\n  AppClassProperties,\n  AppProps,\n  AppState,\n  Device,\n  ExcalidrawProps,\n  UIAppState,\n} from \"../types\";\nimport { ActionManager } from \"../actions/manager\";\nimport { t } from \"../i18n\";\nimport Stack from \"./Stack\";\nimport { showSelectedShapeActions } from \"../element\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { FixedSideContainer } from \"./FixedSideContainer\";\nimport { Island } from \"./Island\";\nimport { HintViewer } from \"./HintViewer\";\nimport { calculateScrollCenter } from \"../scene\";\nimport { SelectedShapeActions, ShapesSwitcher } from \"./Actions\";\nimport { Section } from \"./Section\";\nimport { SCROLLBAR_WIDTH, SCROLLBAR_MARGIN } from \"../scene/scrollbars\";\nimport { LockButton } from \"./LockButton\";\nimport { PenModeButton } from \"./PenModeButton\";\nimport { Stats } from \"./Stats\";\nimport { actionToggleStats } from \"../actions\";\nimport { HandButton } from \"./HandButton\";\nimport { isHandToolActive } from \"../appState\";\nimport { useTunnels } from \"../context/tunnels\";\n\ntype MobileMenuProps = {\n  appState: UIAppState;\n  actionManager: ActionManager;\n  renderJSONExportDialog: () => React.ReactNode;\n  renderImageExportDialog: () => React.ReactNode;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  elements: readonly NonDeletedExcalidrawElement[];\n  onLockToggle: () => void;\n  onHandToolToggle: () => void;\n  onPenModeToggle: AppClassProperties[\"togglePenMode\"];\n\n  renderTopRightUI?: (\n    isMobile: boolean,\n    appState: UIAppState,\n  ) => JSX.Element | null;\n  renderCustomStats?: ExcalidrawProps[\"renderCustomStats\"];\n  renderSidebars: () => JSX.Element | null;\n  device: Device;\n  renderWelcomeScreen: boolean;\n  UIOptions: AppProps[\"UIOptions\"];\n  app: AppClassProperties;\n};\n\nexport const MobileMenu = ({\n  appState,\n  elements,\n  actionManager,\n  setAppState,\n  onLockToggle,\n  onHandToolToggle,\n  onPenModeToggle,\n\n  renderTopRightUI,\n  renderCustomStats,\n  renderSidebars,\n  device,\n  renderWelcomeScreen,\n  UIOptions,\n  app,\n}: MobileMenuProps) => {\n  const {\n    WelcomeScreenCenterTunnel,\n    MainMenuTunnel,\n    DefaultSidebarTriggerTunnel,\n  } = useTunnels();\n  const renderToolbar = () => {\n    return (\n      <FixedSideContainer side=\"top\" className=\"App-top-bar\">\n        {renderWelcomeScreen && <WelcomeScreenCenterTunnel.Out />}\n        <Section heading=\"shapes\">\n          {(heading: React.ReactNode) => (\n            <Stack.Col gap={4} align=\"center\">\n              <Stack.Row gap={1} className=\"App-toolbar-container\">\n                <Island padding={1} className=\"App-toolbar App-toolbar--mobile\">\n                  {heading}\n                  <Stack.Row gap={1}>\n                    <ShapesSwitcher\n                      appState={appState}\n                      activeTool={appState.activeTool}\n                      UIOptions={UIOptions}\n                      app={app}\n                    />\n                  </Stack.Row>\n                </Island>\n                {renderTopRightUI && renderTopRightUI(true, appState)}\n                <div className=\"mobile-misc-tools-container\">\n                  {!appState.viewModeEnabled && (\n                    <DefaultSidebarTriggerTunnel.Out />\n                  )}\n                  <PenModeButton\n                    checked={appState.penMode}\n                    onChange={() => onPenModeToggle(null)}\n                    title={t(\"toolBar.penMode\")}\n                    isMobile\n                    penDetected={appState.penDetected}\n                  />\n                  <LockButton\n                    checked={appState.activeTool.locked}\n                    onChange={onLockToggle}\n                    title={t(\"toolBar.lock\")}\n                    isMobile\n                  />\n                  <HandButton\n                    checked={isHandToolActive(appState)}\n                    onChange={() => onHandToolToggle()}\n                    title={t(\"toolBar.hand\")}\n                    isMobile\n                  />\n                </div>\n              </Stack.Row>\n            </Stack.Col>\n          )}\n        </Section>\n        <HintViewer\n          appState={appState}\n          isMobile={true}\n          device={device}\n          app={app}\n        />\n      </FixedSideContainer>\n    );\n  };\n\n  const renderAppToolbar = () => {\n    if (appState.viewModeEnabled) {\n      return (\n        <div className=\"App-toolbar-content\">\n          <MainMenuTunnel.Out />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"App-toolbar-content\">\n        <MainMenuTunnel.Out />\n        {actionManager.renderAction(\"toggleEditMenu\")}\n        {actionManager.renderAction(\"undo\")}\n        {actionManager.renderAction(\"redo\")}\n        {actionManager.renderAction(\n          appState.multiElement ? \"finalize\" : \"duplicateSelection\",\n        )}\n        {actionManager.renderAction(\"deleteSelectedElements\")}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {renderSidebars()}\n      {!appState.viewModeEnabled && renderToolbar()}\n      {!appState.openMenu && appState.showStats && (\n        <Stats\n          appState={appState}\n          setAppState={setAppState}\n          elements={elements}\n          onClose={() => {\n            actionManager.executeAction(actionToggleStats);\n          }}\n          renderCustomStats={renderCustomStats}\n        />\n      )}\n      <div\n        className=\"App-bottom-bar\"\n        style={{\n          marginBottom: SCROLLBAR_WIDTH + SCROLLBAR_MARGIN * 2,\n          marginLeft: SCROLLBAR_WIDTH + SCROLLBAR_MARGIN * 2,\n          marginRight: SCROLLBAR_WIDTH + SCROLLBAR_MARGIN * 2,\n        }}\n      >\n        <Island padding={0}>\n          {appState.openMenu === \"shape\" &&\n          !appState.viewModeEnabled &&\n          showSelectedShapeActions(appState, elements) ? (\n            <Section className=\"App-mobile-menu\" heading=\"selectedShapeActions\">\n              <SelectedShapeActions\n                appState={appState}\n                elementsMap={app.scene.getNonDeletedElementsMap()}\n                renderAction={actionManager.renderAction}\n              />\n            </Section>\n          ) : null}\n          <footer className=\"App-toolbar\">\n            {renderAppToolbar()}\n            {appState.scrolledOutside &&\n              !appState.openMenu &&\n              !appState.openSidebar && (\n                <button\n                  className=\"scroll-back-to-content\"\n                  onClick={() => {\n                    setAppState((appState) => ({\n                      ...calculateScrollCenter(elements, appState),\n                    }));\n                  }}\n                >\n                  {t(\"buttons.scrollBackToContent\")}\n                </button>\n              )}\n          </footer>\n        </Island>\n      </div>\n    </>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw--mobile.excalidraw .PasteChartDialog .Island {\n  display: flex;\n  flex-direction: column;\n}\n\n.excalidraw .PasteChartDialog .container {\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  flex-wrap: wrap;\n}\n.excalidraw--mobile.excalidraw .PasteChartDialog .container {\n  flex-direction: column;\n  justify-content: center;\n}\n\n.excalidraw .PasteChartDialog .ChartPreview {\n  margin: 8px;\n  text-align: center;\n  width: 192px;\n  height: 128px;\n  border-radius: 2px;\n  padding: 1px;\n  border: 1px solid #ced4da;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n}\n.excalidraw .PasteChartDialog .ChartPreview div {\n  display: inline-block;\n}\n.excalidraw .PasteChartDialog .ChartPreview svg {\n  max-height: 120px;\n  max-width: 186px;\n}\n.excalidraw .PasteChartDialog .ChartPreview:hover {\n  padding: 0;\n  border: 2px solid #339af0;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJQYXN0ZUNoYXJ0RGlhbG9nLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDeEtJO0VBQ0U7RUFDQTs7O0FBR0o7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QURYSztFQ2FIO0VBQ0E7OztBQUdKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFDQTtFQUNFOztBQUVGO0VBQ0U7RUFDQTs7QUFFRjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAuUGFzdGVDaGFydERpYWxvZyB7XG4gICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgLklzbGFuZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG4gICAgfVxuICAgIC5jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIEBpbmNsdWRlIGlzTW9iaWxlIHtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICB9XG4gICAgfVxuICAgIC5DaGFydFByZXZpZXcge1xuICAgICAgbWFyZ2luOiA4cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB3aWR0aDogMTkycHg7XG4gICAgICBoZWlnaHQ6IDEyOHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgcGFkZGluZzogMXB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgJG9jLWdyYXktNDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIGRpdiB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgIH1cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDEyMHB4O1xuICAgICAgICBtYXgtd2lkdGg6IDE4NnB4O1xuICAgICAgfVxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICRvYy1ibHVlLTU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */", "import oc from \"open-color\";\nimport React, { useLayoutEffect, useRef, useState } from \"react\";\nimport { trackEvent } from \"../analytics\";\nimport { ChartElements, renderSpreadsheet, Spreadsheet } from \"../charts\";\nimport { ChartType } from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { exportToSvg } from \"../scene/export\";\nimport { UIAppState } from \"../types\";\nimport { useApp } from \"./App\";\nimport { Dialog } from \"./Dialog\";\n\nimport \"./PasteChartDialog.scss\";\n\ntype OnInsertChart = (chartType: ChartType, elements: ChartElements) => void;\n\nconst ChartPreviewBtn = (props: {\n  spreadsheet: Spreadsheet | null;\n  chartType: ChartType;\n  selected: boolean;\n  onClick: OnInsertChart;\n}) => {\n  const previewRef = useRef<HTMLDivElement | null>(null);\n  const [chartElements, setChartElements] = useState<ChartElements | null>(\n    null,\n  );\n\n  useLayoutEffect(() => {\n    if (!props.spreadsheet) {\n      return;\n    }\n\n    const elements = renderSpreadsheet(\n      props.chartType,\n      props.spreadsheet,\n      0,\n      0,\n    );\n    setChartElements(elements);\n    let svg: SVGSVGElement;\n    const previewNode = previewRef.current!;\n\n    (async () => {\n      svg = await exportToSvg(\n        elements,\n        {\n          exportBackground: false,\n          viewBackgroundColor: oc.white,\n        },\n        null, // files\n      );\n      svg.querySelector(\".style-fonts\")?.remove();\n      previewNode.replaceChildren();\n      previewNode.appendChild(svg);\n\n      if (props.selected) {\n        (previewNode.parentNode as HTMLDivElement).focus();\n      }\n    })();\n\n    return () => {\n      previewNode.replaceChildren();\n    };\n  }, [props.spreadsheet, props.chartType, props.selected]);\n\n  return (\n    <button\n      className=\"ChartPreview\"\n      onClick={() => {\n        if (chartElements) {\n          props.onClick(props.chartType, chartElements);\n        }\n      }}\n    >\n      <div ref={previewRef} />\n    </button>\n  );\n};\n\nexport const PasteChartDialog = ({\n  setAppState,\n  appState,\n  onClose,\n}: {\n  appState: UIAppState;\n  onClose: () => void;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n}) => {\n  const { onInsertElements } = useApp();\n  const handleClose = React.useCallback(() => {\n    if (onClose) {\n      onClose();\n    }\n  }, [onClose]);\n\n  const handleChartClick = (chartType: ChartType, elements: ChartElements) => {\n    onInsertElements(elements);\n    trackEvent(\"paste\", \"chart\", chartType);\n    setAppState({\n      currentChartType: chartType,\n      pasteDialog: {\n        shown: false,\n        data: null,\n      },\n    });\n  };\n\n  return (\n    <Dialog\n      size=\"small\"\n      onCloseRequest={handleClose}\n      title={t(\"labels.pasteCharts\")}\n      className={\"PasteChartDialog\"}\n      autofocus={false}\n    >\n      <div className={\"container\"}>\n        <ChartPreviewBtn\n          chartType=\"bar\"\n          spreadsheet={appState.pasteDialog.data}\n          selected={appState.currentChartType === \"bar\"}\n          onClick={handleChartClick}\n        />\n        <ChartPreviewBtn\n          chartType=\"line\"\n          spreadsheet={appState.pasteDialog.data}\n          selected={appState.currentChartType === \"line\"}\n          onClick={handleChartClick}\n        />\n      </div>\n    </Dialog>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .HelpDialog .Modal__content {\n  max-width: 960px;\n}\n.excalidraw .HelpDialog h3 {\n  margin: 1.5rem 0;\n  font-weight: bold;\n  font-size: 1.125rem;\n}\n.excalidraw .HelpDialog__header {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n}\n.excalidraw .HelpDialog__btn {\n  --background: var(--color-surface-mid);\n  display: flex;\n  column-gap: 0.5rem;\n  align-items: center;\n  background-color: var(--background);\n  padding: 0.625rem 1rem;\n  border: 1px solid var(--background);\n  border-radius: var(--border-radius-lg);\n  color: var(--text-primary-color);\n  font-weight: 600;\n  font-size: 0.75rem;\n  letter-spacing: 0.4px;\n}\n.excalidraw.theme--dark.excalidraw .HelpDialog__btn {\n  --background: var(--color-surface-high);\n}\n.excalidraw.theme--dark.excalidraw .HelpDialog__btn:hover {\n  --background: #363541;\n}\n\n.excalidraw .HelpDialog__btn:hover {\n  --background: var(--color-surface-high);\n  text-decoration: none;\n}\n.excalidraw .HelpDialog__btn:active {\n  border-color: var(--color-primary);\n}\n.excalidraw .HelpDialog__link-icon {\n  line-height: 0;\n}\n.excalidraw .HelpDialog__link-icon svg {\n  width: 1rem;\n  height: 1rem;\n}\n.excalidraw .HelpDialog__islands-container {\n  display: grid;\n  grid-column-gap: 1.5rem;\n  grid-row-gap: 2rem;\n}\n@media screen and (min-width: 1024px) {\n  .excalidraw .HelpDialog__islands-container {\n    grid-template-columns: 1fr 1fr;\n  }\n}\n@media screen and (min-width: 1024px) {\n  .excalidraw .HelpDialog__island--tools {\n    grid-area: 1/1/2/2;\n  }\n  .excalidraw .HelpDialog__island--view {\n    grid-area: 2/1/3/2;\n  }\n  .excalidraw .HelpDialog__island--editor {\n    grid-area: 1/2/3/3;\n  }\n}\n.excalidraw .HelpDialog__island h4 {\n  font-size: 1rem;\n  font-weight: bold;\n  margin: 0;\n  margin-bottom: 0.625rem;\n}\n.excalidraw .HelpDialog__island-content {\n  border: 1px solid var(--dialog-border-color);\n  border-radius: var(--border-radius-lg);\n}\n.excalidraw .HelpDialog__shortcut {\n  border-bottom: 1px solid var(--dialog-border-color);\n  padding: 0.375rem 0.75rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.875rem;\n  column-gap: 0.5rem;\n}\n.excalidraw .HelpDialog__shortcut:last-child {\n  border-bottom: none;\n}\n.excalidraw .HelpDialog__key-container {\n  display: flex;\n  align-items: center;\n  column-gap: 0.25rem;\n  flex-shrink: 0;\n}\n.excalidraw .HelpDialog__key {\n  display: flex;\n  box-sizing: border-box;\n  font-size: 0.625rem;\n  background-color: var(--color-primary-light);\n  border-radius: var(--border-radius-md);\n  padding: 0.5rem;\n  word-break: keep-all;\n  align-items: center;\n  font-family: inherit;\n  line-height: 1;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJIZWxwRGlhbG9nLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDektFO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRVM7RUFDUDs7QUFDQTtFQUNFOzs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFOztBQUNBO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBSUE7RUFDQTs7QUFKQTtFQUZGO0lBR0k7OztBQU1KO0VBQ0U7SUFDRTs7RUFFRjtJQUNFOztFQUVGO0lBQ0U7OztBQUtGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAuSGVscERpYWxvZyB7XG4gICAgLk1vZGFsX19jb250ZW50IHtcbiAgICAgIG1heC13aWR0aDogOTYwcHg7XG4gICAgfVxuXG4gICAgaDMge1xuICAgICAgbWFyZ2luOiAxLjVyZW0gMDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgZm9udC1zaXplOiAxLjEyNXJlbTtcbiAgICB9XG5cbiAgICAmX19oZWFkZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIGdhcDogMC43NXJlbTtcbiAgICB9XG5cbiAgICAmX19idG4ge1xuICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLW1pZCk7XG5cbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBjb2x1bW4tZ2FwOiAwLjVyZW07XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICBwYWRkaW5nOiAwLjYyNXJlbSAxcmVtO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZCk7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgIGxldHRlci1zcGFjaW5nOiAwLjRweDtcblxuICAgICAgQGF0LXJvb3QgLmV4Y2FsaWRyYXcudGhlbWUtLWRhcmsjeyZ9IHtcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAtLWJhY2tncm91bmQ6ICMzNjM1NDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgfVxuXG4gICAgICAmOmFjdGl2ZSB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJl9fbGluay1pY29uIHtcbiAgICAgIGxpbmUtaGVpZ2h0OiAwO1xuICAgICAgc3ZnIHtcbiAgICAgICAgd2lkdGg6IDFyZW07XG4gICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmX19pc2xhbmRzLWNvbnRhaW5lciB7XG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTAyNHB4KSB7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgIH1cbiAgICAgIGdyaWQtY29sdW1uLWdhcDogMS41cmVtO1xuICAgICAgZ3JpZC1yb3ctZ2FwOiAycmVtO1xuICAgIH1cblxuICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEwMjRweCkge1xuICAgICAgJl9faXNsYW5kLS10b29scyB7XG4gICAgICAgIGdyaWQtYXJlYTogMSAvIDEgLyAyIC8gMjtcbiAgICAgIH1cbiAgICAgICZfX2lzbGFuZC0tdmlldyB7XG4gICAgICAgIGdyaWQtYXJlYTogMiAvIDEgLyAzIC8gMjtcbiAgICAgIH1cbiAgICAgICZfX2lzbGFuZC0tZWRpdG9yIHtcbiAgICAgICAgZ3JpZC1hcmVhOiAxIC8gMiAvIDMgLyAzO1xuICAgICAgfVxuICAgIH1cblxuICAgICZfX2lzbGFuZCB7XG4gICAgICBoNCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC42MjVyZW07XG4gICAgICB9XG5cbiAgICAgICYtY29udGVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWRpYWxvZy1ib3JkZXItY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmX19zaG9ydGN1dCB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZGlhbG9nLWJvcmRlci1jb2xvcik7XG4gICAgICBwYWRkaW5nOiAwLjM3NXJlbSAwLjc1cmVtO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgY29sdW1uLWdhcDogMC41cmVtO1xuXG4gICAgICAmOmxhc3QtY2hpbGQge1xuICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgfVxuICAgIH1cblxuICAgICZfX2tleS1jb250YWluZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBjb2x1bW4tZ2FwOiAwLjI1cmVtO1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuXG4gICAgJl9fa2V5IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgZm9udC1zaXplOiAwLjYyNXJlbTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1tZCk7XG4gICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICB3b3JkLWJyZWFrOiBrZWVwLWFsbDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIH1cbiAgfVxufVxuIl19 */", "import React from \"react\";\nimport { t } from \"../i18n\";\nimport { KEYS } from \"../keys\";\nimport { Dialog } from \"./Dialog\";\nimport { getShortcutKey } from \"../utils\";\nimport \"./HelpDialog.scss\";\nimport { ExternalLinkIcon } from \"./icons\";\nimport { probablySupportsClipboardBlob } from \"../clipboard\";\nimport { isDarwin, isFirefox, isWindows } from \"../constants\";\n\nconst Header = () => (\n  <div className=\"HelpDialog__header\">\n    <a\n      className=\"HelpDialog__btn\"\n      href=\"https://docs.excalidraw.com\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {t(\"helpDialog.documentation\")}\n      <div className=\"HelpDialog__link-icon\">{ExternalLinkIcon}</div>\n    </a>\n    <a\n      className=\"HelpDialog__btn\"\n      href=\"https://blog.excalidraw.com\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {t(\"helpDialog.blog\")}\n      <div className=\"HelpDialog__link-icon\">{ExternalLinkIcon}</div>\n    </a>\n    <a\n      className=\"HelpDialog__btn\"\n      href=\"https://github.com/excalidraw/excalidraw/issues\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      {t(\"helpDialog.github\")}\n      <div className=\"HelpDialog__link-icon\">{ExternalLinkIcon}</div>\n    </a>\n  </div>\n);\n\nconst Section = (props: { title: string; children: React.ReactNode }) => (\n  <>\n    <h3>{props.title}</h3>\n    <div className=\"HelpDialog__islands-container\">{props.children}</div>\n  </>\n);\n\nconst ShortcutIsland = (props: {\n  caption: string;\n  children: React.ReactNode;\n  className?: string;\n}) => (\n  <div className={`HelpDialog__island ${props.className}`}>\n    <h4 className=\"HelpDialog__island-title\">{props.caption}</h4>\n    <div className=\"HelpDialog__island-content\">{props.children}</div>\n  </div>\n);\n\nfunction* intersperse(as: JSX.Element[][], delim: string | null) {\n  let first = true;\n  for (const x of as) {\n    if (!first) {\n      yield delim;\n    }\n    first = false;\n    yield x;\n  }\n}\n\nconst upperCaseSingleChars = (str: string) => {\n  return str.replace(/\\b[a-z]\\b/, (c) => c.toUpperCase());\n};\n\nconst Shortcut = ({\n  label,\n  shortcuts,\n  isOr = true,\n}: {\n  label: string;\n  shortcuts: string[];\n  isOr?: boolean;\n}) => {\n  const splitShortcutKeys = shortcuts.map((shortcut) => {\n    const keys = shortcut.endsWith(\"++\")\n      ? [...shortcut.slice(0, -2).split(\"+\"), \"+\"]\n      : shortcut.split(\"+\");\n\n    return keys.map((key) => (\n      <ShortcutKey key={key}>{upperCaseSingleChars(key)}</ShortcutKey>\n    ));\n  });\n\n  return (\n    <div className=\"HelpDialog__shortcut\">\n      <div>{label}</div>\n      <div className=\"HelpDialog__key-container\">\n        {[...intersperse(splitShortcutKeys, isOr ? t(\"helpDialog.or\") : null)]}\n      </div>\n    </div>\n  );\n};\n\nconst ShortcutKey = (props: { children: React.ReactNode }) => (\n  <kbd className=\"HelpDialog__key\" {...props} />\n);\n\nexport const HelpDialog = ({ onClose }: { onClose?: () => void }) => {\n  const handleClose = React.useCallback(() => {\n    if (onClose) {\n      onClose();\n    }\n  }, [onClose]);\n\n  return (\n    <>\n      <Dialog\n        onCloseRequest={handleClose}\n        title={t(\"helpDialog.title\")}\n        className={\"HelpDialog\"}\n      >\n        <Header />\n        <Section title={t(\"helpDialog.shortcuts\")}>\n          <ShortcutIsland\n            className=\"HelpDialog__island--tools\"\n            caption={t(\"helpDialog.tools\")}\n          >\n            <Shortcut label={t(\"toolBar.hand\")} shortcuts={[KEYS.H]} />\n            <Shortcut\n              label={t(\"toolBar.selection\")}\n              shortcuts={[KEYS.V, KEYS[\"1\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.rectangle\")}\n              shortcuts={[KEYS.R, KEYS[\"2\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.diamond\")}\n              shortcuts={[KEYS.D, KEYS[\"3\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.ellipse\")}\n              shortcuts={[KEYS.O, KEYS[\"4\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.arrow\")}\n              shortcuts={[KEYS.A, KEYS[\"5\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.line\")}\n              shortcuts={[KEYS.L, KEYS[\"6\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.freedraw\")}\n              shortcuts={[KEYS.P, KEYS[\"7\"]]}\n            />\n            <Shortcut\n              label={t(\"toolBar.text\")}\n              shortcuts={[KEYS.T, KEYS[\"8\"]]}\n            />\n            <Shortcut label={t(\"toolBar.image\")} shortcuts={[KEYS[\"9\"]]} />\n            <Shortcut\n              label={t(\"toolBar.eraser\")}\n              shortcuts={[KEYS.E, KEYS[\"0\"]]}\n            />\n            <Shortcut label={t(\"toolBar.frame\")} shortcuts={[KEYS.F]} />\n            <Shortcut label={t(\"toolBar.laser\")} shortcuts={[KEYS.K]} />\n            <Shortcut\n              label={t(\"labels.eyeDropper\")}\n              shortcuts={[KEYS.I, \"Shift+S\", \"Shift+G\"]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.editLineArrowPoints\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Enter\")]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.editText\")}\n              shortcuts={[getShortcutKey(\"Enter\")]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.textNewLine\")}\n              shortcuts={[\n                getShortcutKey(\"Enter\"),\n                getShortcutKey(\"Shift+Enter\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.textFinish\")}\n              shortcuts={[\n                getShortcutKey(\"Esc\"),\n                getShortcutKey(\"CtrlOrCmd+Enter\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.curvedArrow\")}\n              shortcuts={[\n                \"A\",\n                t(\"helpDialog.click\"),\n                t(\"helpDialog.click\"),\n                t(\"helpDialog.click\"),\n              ]}\n              isOr={false}\n            />\n            <Shortcut\n              label={t(\"helpDialog.curvedLine\")}\n              shortcuts={[\n                \"L\",\n                t(\"helpDialog.click\"),\n                t(\"helpDialog.click\"),\n                t(\"helpDialog.click\"),\n              ]}\n              isOr={false}\n            />\n            <Shortcut label={t(\"toolBar.lock\")} shortcuts={[KEYS.Q]} />\n            <Shortcut\n              label={t(\"helpDialog.preventBinding\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd\")]}\n            />\n            <Shortcut\n              label={t(\"toolBar.link\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+K\")]}\n            />\n          </ShortcutIsland>\n          <ShortcutIsland\n            className=\"HelpDialog__island--view\"\n            caption={t(\"helpDialog.view\")}\n          >\n            <Shortcut\n              label={t(\"buttons.zoomIn\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd++\")]}\n            />\n            <Shortcut\n              label={t(\"buttons.zoomOut\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+-\")]}\n            />\n            <Shortcut\n              label={t(\"buttons.resetZoom\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+0\")]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.zoomToFit\")}\n              shortcuts={[\"Shift+1\"]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.zoomToSelection\")}\n              shortcuts={[\"Shift+2\"]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.movePageUpDown\")}\n              shortcuts={[\"PgUp/PgDn\"]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.movePageLeftRight\")}\n              shortcuts={[\"Shift+PgUp/PgDn\"]}\n            />\n            <Shortcut\n              label={t(\"buttons.zenMode\")}\n              shortcuts={[getShortcutKey(\"Alt+Z\")]}\n            />\n            <Shortcut\n              label={t(\"buttons.objectsSnapMode\")}\n              shortcuts={[getShortcutKey(\"Alt+S\")]}\n            />\n            <Shortcut\n              label={t(\"labels.showGrid\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+'\")]}\n            />\n            <Shortcut\n              label={t(\"labels.viewMode\")}\n              shortcuts={[getShortcutKey(\"Alt+R\")]}\n            />\n            <Shortcut\n              label={t(\"labels.toggleTheme\")}\n              shortcuts={[getShortcutKey(\"Alt+Shift+D\")]}\n            />\n            <Shortcut\n              label={t(\"stats.title\")}\n              shortcuts={[getShortcutKey(\"Alt+/\")]}\n            />\n          </ShortcutIsland>\n          <ShortcutIsland\n            className=\"HelpDialog__island--editor\"\n            caption={t(\"helpDialog.editor\")}\n          >\n            <Shortcut\n              label={t(\"labels.moveCanvas\")}\n              shortcuts={[\n                getShortcutKey(`Space+${t(\"helpDialog.drag\")}`),\n                getShortcutKey(`Wheel+${t(\"helpDialog.drag\")}`),\n              ]}\n              isOr={true}\n            />\n            <Shortcut\n              label={t(\"buttons.clearReset\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Delete\")]}\n            />\n            <Shortcut\n              label={t(\"labels.delete\")}\n              shortcuts={[getShortcutKey(\"Delete\")]}\n            />\n            <Shortcut\n              label={t(\"labels.cut\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+X\")]}\n            />\n            <Shortcut\n              label={t(\"labels.copy\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+C\")]}\n            />\n            <Shortcut\n              label={t(\"labels.paste\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+V\")]}\n            />\n            <Shortcut\n              label={t(\"labels.pasteAsPlaintext\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+V\")]}\n            />\n            <Shortcut\n              label={t(\"labels.selectAll\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+A\")]}\n            />\n            <Shortcut\n              label={t(\"labels.multiSelect\")}\n              shortcuts={[getShortcutKey(`Shift+${t(\"helpDialog.click\")}`)]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.deepSelect\")}\n              shortcuts={[getShortcutKey(`CtrlOrCmd+${t(\"helpDialog.click\")}`)]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.deepBoxSelect\")}\n              shortcuts={[getShortcutKey(`CtrlOrCmd+${t(\"helpDialog.drag\")}`)]}\n            />\n            {/* firefox supports clipboard API under a flag, so we'll\n                show users what they can do in the error message */}\n            {(probablySupportsClipboardBlob || isFirefox) && (\n              <Shortcut\n                label={t(\"labels.copyAsPng\")}\n                shortcuts={[getShortcutKey(\"Shift+Alt+C\")]}\n              />\n            )}\n            <Shortcut\n              label={t(\"labels.copyStyles\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Alt+C\")]}\n            />\n            <Shortcut\n              label={t(\"labels.pasteStyles\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Alt+V\")]}\n            />\n            <Shortcut\n              label={t(\"labels.sendToBack\")}\n              shortcuts={[\n                isDarwin\n                  ? getShortcutKey(\"CtrlOrCmd+Alt+[\")\n                  : getShortcutKey(\"CtrlOrCmd+Shift+[\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"labels.bringToFront\")}\n              shortcuts={[\n                isDarwin\n                  ? getShortcutKey(\"CtrlOrCmd+Alt+]\")\n                  : getShortcutKey(\"CtrlOrCmd+Shift+]\"),\n              ]}\n            />\n            <Shortcut\n              label={t(\"labels.sendBackward\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+[\")]}\n            />\n            <Shortcut\n              label={t(\"labels.bringForward\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+]\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignTop\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Up\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignBottom\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Down\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignLeft\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Left\")]}\n            />\n            <Shortcut\n              label={t(\"labels.alignRight\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+Right\")]}\n            />\n            <Shortcut\n              label={t(\"labels.duplicateSelection\")}\n              shortcuts={[\n                getShortcutKey(\"CtrlOrCmd+D\"),\n                getShortcutKey(`Alt+${t(\"helpDialog.drag\")}`),\n              ]}\n            />\n            <Shortcut\n              label={t(\"helpDialog.toggleElementLock\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+L\")]}\n            />\n            <Shortcut\n              label={t(\"buttons.undo\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Z\")]}\n            />\n            <Shortcut\n              label={t(\"buttons.redo\")}\n              shortcuts={\n                isWindows\n                  ? [\n                      getShortcutKey(\"CtrlOrCmd+Y\"),\n                      getShortcutKey(\"CtrlOrCmd+Shift+Z\"),\n                    ]\n                  : [getShortcutKey(\"CtrlOrCmd+Shift+Z\")]\n              }\n            />\n            <Shortcut\n              label={t(\"labels.group\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+G\")]}\n            />\n            <Shortcut\n              label={t(\"labels.ungroup\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+G\")]}\n            />\n            <Shortcut\n              label={t(\"labels.flipHorizontal\")}\n              shortcuts={[getShortcutKey(\"Shift+H\")]}\n            />\n            <Shortcut\n              label={t(\"labels.flipVertical\")}\n              shortcuts={[getShortcutKey(\"Shift+V\")]}\n            />\n            <Shortcut\n              label={t(\"labels.showStroke\")}\n              shortcuts={[getShortcutKey(\"S\")]}\n            />\n            <Shortcut\n              label={t(\"labels.showBackground\")}\n              shortcuts={[getShortcutKey(\"G\")]}\n            />\n            <Shortcut\n              label={t(\"labels.decreaseFontSize\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+<\")]}\n            />\n            <Shortcut\n              label={t(\"labels.increaseFontSize\")}\n              shortcuts={[getShortcutKey(\"CtrlOrCmd+Shift+>\")]}\n            />\n          </ShortcutIsland>\n        </Section>\n      </Dialog>\n    </>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --userlist-hint-bg-color: var(--color-gray-10);\n  --userlist-hint-heading-color: var(--color-gray-80);\n  --userlist-hint-text-color: var(--color-gray-60);\n  --userlist-collaborators-border-color: var(--color-gray-20);\n}\n.excalidraw .UserList {\n  pointer-events: none;\n  /*github corner*/\n  padding: var(--space-factor) var(--space-factor) var(--space-factor) var(--space-factor);\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 0.625rem;\n  box-sizing: border-box;\n  max-height: 120px;\n  max-width: 120px;\n  overflow: hidden;\n}\n.excalidraw .UserList:empty {\n  display: none;\n}\n.excalidraw .UserList > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .UserList_mobile {\n  padding: 0;\n  justify-content: normal;\n  margin: 0.5rem 0;\n  max-width: none;\n  max-height: none;\n}\n.excalidraw .UserList__more {\n  width: 1.25rem;\n  height: 1.25rem;\n  position: relative;\n  border-radius: 100%;\n  outline-offset: 2px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 0.75rem;\n  font-weight: 800;\n  line-height: 1;\n  color: var(--color-gray-90);\n  flex: 0 0 auto;\n  background-color: var(--color-gray-20);\n  border: 0 !important;\n  font-size: 0.5rem;\n  font-weight: 400;\n  flex-shrink: 0;\n  color: var(--color-gray-100);\n}\n.excalidraw .UserList__more-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 100%;\n}\n.excalidraw .UserList__more::before {\n  content: \"\";\n  position: absolute;\n  top: -3px;\n  right: -3px;\n  bottom: -3px;\n  left: -3px;\n  border: 1px solid var(--avatar-border-color);\n  border-radius: 100%;\n}\n.excalidraw .UserList__more--is-followed::before {\n  border-color: var(--color-primary-hover);\n}\n.excalidraw .UserList__more--is-current-user {\n  cursor: auto;\n}\n.excalidraw .UserList__collaborator-name {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.excalidraw .UserList__collaborator-follow-status-icon {\n  margin-left: auto;\n  flex: 0 0 auto;\n  width: 1rem;\n  display: flex;\n}\n.excalidraw.theme--dark {\n  --userlist-hint-bg-color: var(--color-gray-90);\n  --userlist-hint-heading-color: var(--color-gray-30);\n  --userlist-hint-text-color: var(--color-gray-40);\n  --userlist-collaborators-border-color: var(--color-gray-80);\n}\n.excalidraw .UserList__collaborators {\n  position: static;\n  top: auto;\n  margin-top: 0;\n  max-height: 12rem;\n  overflow-y: auto;\n  padding: 0.25rem 0.5rem;\n  border-top: 1px solid var(--userlist-collaborators-border-color);\n  border-bottom: 1px solid var(--userlist-collaborators-border-color);\n}\n.excalidraw .UserList__collaborators__empty {\n  color: var(--color-gray-60);\n  font-size: 0.75rem;\n  line-height: 150%;\n  padding: 0.5rem 0;\n}\n.excalidraw .UserList__hint {\n  padding: 0.5rem 0.75rem;\n  overflow: hidden;\n  text-align: center;\n  color: var(--userlist-hint-text-color);\n  font-size: 0.75rem;\n  line-height: 150%;\n}\n.excalidraw .UserList__search-wrapper {\n  position: relative;\n  height: 2.5rem;\n}\n.excalidraw .UserList__search-wrapper svg {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 0.75rem;\n  width: 1.25rem;\n  height: 1.25rem;\n  color: var(--color-gray-40);\n  z-index: 1;\n}\n.excalidraw .UserList__search {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  box-sizing: border-box;\n  border: 0 !important;\n  border-radius: 0 !important;\n  font-size: 0.875rem;\n  padding-left: 2.5rem !important;\n  padding-right: 0.75rem !important;\n}\n.excalidraw .UserList__search::placeholder {\n  color: var(--color-gray-40);\n}\n.excalidraw .UserList__search:focus {\n  box-shadow: none !important;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJVc2VyTGlzdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzNLRjtFQWdFRTtFQUNBO0VBQ0E7RUFDQTs7QUFsRUE7RUFDRTtBQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBTUE7RUFHQTtFQUdBO0VBSUE7O0FBZEE7RUFDRTs7QUFnQko7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUQyRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQ3RGRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FEbUZGO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFOztBQUVGO0VBQ0U7O0FDckdGO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBUUY7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZVwiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5Vc2VyTGlzdCB7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgLypnaXRodWIgY29ybmVyKi9cbiAgICBwYWRkaW5nOiB2YXIoLS1zcGFjZS1mYWN0b3IpIHZhcigtLXNwYWNlLWZhY3RvcikgdmFyKC0tc3BhY2UtZmFjdG9yKVxuICAgICAgdmFyKC0tc3BhY2UtZmFjdG9yKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiAwLjYyNXJlbTtcblxuICAgICY6ZW1wdHkge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gICAgLy8gY2FuIGZpdCBtYXggNCBhdmF0YXJzICgzIGF2YXRhcnMgKyBzaG93IG1vcmUpIGluIGEgY29sdW1uXG4gICAgbWF4LWhlaWdodDogMTIwcHg7XG5cbiAgICAvLyBjYW4gZml0IG1heCA0IGF2YXRhcnMgKDMgYXZhdGFycyArIHNob3cgbW9yZSkgd2hlbiB0aGVyZSdzIGVub3VnaCBzcGFjZVxuICAgIG1heC13aWR0aDogMTIwcHg7XG5cbiAgICAvLyBUd2VhayBpbiAzMHB4IGluY3JlbWVudHMgdG8gZml0IG1vcmUvZmV3ZXIgYXZhdGFycyBpbiBhIHJvdy9jb2x1bW4gXl5cblxuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cblxuICAuVXNlckxpc3QgPiAqIHtcbiAgICBwb2ludGVyLWV2ZW50czogdmFyKC0tdWktcG9pbnRlckV2ZW50cyk7XG4gIH1cblxuICAuVXNlckxpc3RfbW9iaWxlIHtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGp1c3RpZnktY29udGVudDogbm9ybWFsO1xuICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgbWF4LXdpZHRoOiBub25lO1xuICAgIG1heC1oZWlnaHQ6IG5vbmU7XG4gIH1cblxuICAuVXNlckxpc3RfX21vcmUge1xuICAgIEBpbmNsdWRlIGF2YXRhclN0eWxlcztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTIwKTtcbiAgICBib3JkZXI6IDAgIWltcG9ydGFudDtcbiAgICBmb250LXNpemU6IDAuNXJlbTtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG4gIH1cblxuICAuVXNlckxpc3RfX2NvbGxhYm9yYXRvci1uYW1lIHtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cblxuICAuVXNlckxpc3RfX2NvbGxhYm9yYXRvci1mb2xsb3ctc3RhdHVzLWljb24ge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIGZsZXg6IDAgMCBhdXRvO1xuICAgIHdpZHRoOiAxcmVtO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICAtLXVzZXJsaXN0LWhpbnQtYmctY29sb3I6IHZhcigtLWNvbG9yLWdyYXktMTApO1xuICAtLXVzZXJsaXN0LWhpbnQtaGVhZGluZy1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS04MCk7XG4gIC0tdXNlcmxpc3QtaGludC10ZXh0LWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgLS11c2VybGlzdC1jb2xsYWJvcmF0b3JzLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS0yMCk7XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLS11c2VybGlzdC1oaW50LWJnLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgICAtLXVzZXJsaXN0LWhpbnQtaGVhZGluZy1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS0zMCk7XG4gICAgLS11c2VybGlzdC1oaW50LXRleHQtY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNDApO1xuICAgIC0tdXNlcmxpc3QtY29sbGFib3JhdG9ycy1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyYXktODApO1xuICB9XG5cbiAgLlVzZXJMaXN0X19jb2xsYWJvcmF0b3JzIHtcbiAgICBwb3NpdGlvbjogc3RhdGljO1xuICAgIHRvcDogYXV0bztcbiAgICBtYXJnaW4tdG9wOiAwO1xuICAgIG1heC1oZWlnaHQ6IDEycmVtO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgcGFkZGluZzogMC4yNXJlbSAwLjVyZW07XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLXVzZXJsaXN0LWNvbGxhYm9yYXRvcnMtYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tdXNlcmxpc3QtY29sbGFib3JhdG9ycy1ib3JkZXItY29sb3IpO1xuXG4gICAgJl9fZW1wdHkge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNjApO1xuICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDE1MCU7XG4gICAgICBwYWRkaW5nOiAwLjVyZW0gMDtcbiAgICB9XG4gIH1cblxuICAuVXNlckxpc3RfX2hpbnQge1xuICAgIHBhZGRpbmc6IDAuNXJlbSAwLjc1cmVtO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiB2YXIoLS11c2VybGlzdC1oaW50LXRleHQtY29sb3IpO1xuICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICBsaW5lLWhlaWdodDogMTUwJTtcbiAgfVxuXG4gIC5Vc2VyTGlzdF9fc2VhcmNoLXdyYXBwZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDIuNXJlbTtcblxuICAgIHN2ZyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbiAgICAgIGxlZnQ6IDAuNzVyZW07XG4gICAgICB3aWR0aDogMS4yNXJlbTtcbiAgICAgIGhlaWdodDogMS4yNXJlbTtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTQwKTtcbiAgICAgIHotaW5kZXg6IDE7XG4gICAgfVxuICB9XG5cbiAgLlVzZXJMaXN0X19zZWFyY2gge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGJvcmRlcjogMCAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIHBhZGRpbmctbGVmdDogMi41cmVtICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZy1yaWdodDogMC43NXJlbSAhaW1wb3J0YW50O1xuXG4gICAgJjo6cGxhY2Vob2xkZXIge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNDApO1xuICAgIH1cblxuICAgICY6Zm9jdXMge1xuICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xuICAgIH1cbiAgfVxufVxuIl19 */", "import \"./UserList.scss\";\n\nimport React from \"react\";\nimport clsx from \"clsx\";\nimport { Collaborator, SocketId } from \"../types\";\nimport { Tooltip } from \"./Tooltip\";\nimport { useExcalidrawActionManager } from \"./App\";\nimport { ActionManager } from \"../actions/manager\";\n\nimport * as Popover from \"@radix-ui/react-popover\";\nimport { Island } from \"./Island\";\nimport { searchIcon } from \"./icons\";\nimport { t } from \"../i18n\";\nimport { isShallowEqual } from \"../utils\";\n\nexport type GoToCollaboratorComponentProps = {\n  clientId: ClientId;\n  collaborator: Collaborator;\n  withName: boolean;\n  isBeingFollowed: boolean;\n};\n\n/** collaborator user id or socket id (fallback) */\ntype ClientId = string & { _brand: \"UserId\" };\n\nconst FIRST_N_AVATARS = 3;\nconst SHOW_COLLABORATORS_FILTER_AT = 8;\n\nconst ConditionalTooltipWrapper = ({\n  shouldWrap,\n  children,\n  clientId,\n  username,\n}: {\n  shouldWrap: boolean;\n  children: React.ReactNode;\n  username?: string | null;\n  clientId: ClientId;\n}) =>\n  shouldWrap ? (\n    <Tooltip label={username || \"Unknown user\"} key={clientId}>\n      {children}\n    </Tooltip>\n  ) : (\n    <React.Fragment key={clientId}>{children}</React.Fragment>\n  );\n\nconst renderCollaborator = ({\n  actionManager,\n  collaborator,\n  clientId,\n  withName = false,\n  shouldWrapWithTooltip = false,\n  isBeingFollowed,\n}: {\n  actionManager: ActionManager;\n  collaborator: Collaborator;\n  clientId: ClientId;\n  withName?: boolean;\n  shouldWrapWithTooltip?: boolean;\n  isBeingFollowed: boolean;\n}) => {\n  const data: GoToCollaboratorComponentProps = {\n    clientId,\n    collaborator,\n    withName,\n    isBeingFollowed,\n  };\n  const avatarJSX = actionManager.renderAction(\"goToCollaborator\", data);\n\n  return (\n    <ConditionalTooltipWrapper\n      key={clientId}\n      clientId={clientId}\n      username={collaborator.username}\n      shouldWrap={shouldWrapWithTooltip}\n    >\n      {avatarJSX}\n    </ConditionalTooltipWrapper>\n  );\n};\n\ntype UserListUserObject = Pick<\n  Collaborator,\n  \"avatarUrl\" | \"id\" | \"socketId\" | \"username\"\n>;\n\ntype UserListProps = {\n  className?: string;\n  mobile?: boolean;\n  collaborators: Map<SocketId, UserListUserObject>;\n  userToFollow: SocketId | null;\n};\n\nconst collaboratorComparatorKeys = [\n  \"avatarUrl\",\n  \"id\",\n  \"socketId\",\n  \"username\",\n] as const;\n\nexport const UserList = React.memo(\n  ({ className, mobile, collaborators, userToFollow }: UserListProps) => {\n    const actionManager = useExcalidrawActionManager();\n\n    const uniqueCollaboratorsMap = new Map<ClientId, Collaborator>();\n\n    collaborators.forEach((collaborator, socketId) => {\n      const userId = (collaborator.id || socketId) as ClientId;\n      uniqueCollaboratorsMap.set(\n        // filter on user id, else fall back on unique socketId\n        userId,\n        { ...collaborator, socketId },\n      );\n    });\n\n    const uniqueCollaboratorsArray = Array.from(uniqueCollaboratorsMap).filter(\n      ([_, collaborator]) => collaborator.username?.trim(),\n    );\n\n    const [searchTerm, setSearchTerm] = React.useState(\"\");\n\n    if (uniqueCollaboratorsArray.length === 0) {\n      return null;\n    }\n\n    const searchTermNormalized = searchTerm.trim().toLowerCase();\n\n    const filteredCollaborators = searchTermNormalized\n      ? uniqueCollaboratorsArray.filter(([, collaborator]) =>\n          collaborator.username?.toLowerCase().includes(searchTerm),\n        )\n      : uniqueCollaboratorsArray;\n\n    const firstNCollaborators = uniqueCollaboratorsArray.slice(\n      0,\n      FIRST_N_AVATARS,\n    );\n\n    const firstNAvatarsJSX = firstNCollaborators.map(\n      ([clientId, collaborator]) =>\n        renderCollaborator({\n          actionManager,\n          collaborator,\n          clientId,\n          shouldWrapWithTooltip: true,\n          isBeingFollowed: collaborator.socketId === userToFollow,\n        }),\n    );\n\n    return mobile ? (\n      <div className={clsx(\"UserList UserList_mobile\", className)}>\n        {uniqueCollaboratorsArray.map(([clientId, collaborator]) =>\n          renderCollaborator({\n            actionManager,\n            collaborator,\n            clientId,\n            shouldWrapWithTooltip: true,\n            isBeingFollowed: collaborator.socketId === userToFollow,\n          }),\n        )}\n      </div>\n    ) : (\n      <div className={clsx(\"UserList\", className)}>\n        {firstNAvatarsJSX}\n\n        {uniqueCollaboratorsArray.length > FIRST_N_AVATARS && (\n          <Popover.Root\n            onOpenChange={(isOpen) => {\n              if (!isOpen) {\n                setSearchTerm(\"\");\n              }\n            }}\n          >\n            <Popover.Trigger className=\"UserList__more\">\n              +{uniqueCollaboratorsArray.length - FIRST_N_AVATARS}\n            </Popover.Trigger>\n            <Popover.Content\n              style={{\n                zIndex: 2,\n                width: \"13rem\",\n                textAlign: \"left\",\n              }}\n              align=\"end\"\n              sideOffset={10}\n            >\n              <Island style={{ overflow: \"hidden\" }}>\n                {uniqueCollaboratorsArray.length >=\n                  SHOW_COLLABORATORS_FILTER_AT && (\n                  <div className=\"UserList__search-wrapper\">\n                    {searchIcon}\n                    <input\n                      className=\"UserList__search\"\n                      type=\"text\"\n                      placeholder={t(\"userList.search.placeholder\")}\n                      value={searchTerm}\n                      onChange={(e) => {\n                        setSearchTerm(e.target.value);\n                      }}\n                    />\n                  </div>\n                )}\n                <div className=\"dropdown-menu UserList__collaborators\">\n                  {filteredCollaborators.length === 0 && (\n                    <div className=\"UserList__collaborators__empty\">\n                      {t(\"userList.search.empty\")}\n                    </div>\n                  )}\n                  <div className=\"UserList__hint\">\n                    {t(\"userList.hint.text\")}\n                  </div>\n                  {filteredCollaborators.map(([clientId, collaborator]) =>\n                    renderCollaborator({\n                      actionManager,\n                      collaborator,\n                      clientId,\n                      withName: true,\n                      isBeingFollowed: collaborator.socketId === userToFollow,\n                    }),\n                  )}\n                </div>\n              </Island>\n            </Popover.Content>\n          </Popover.Root>\n        )}\n      </div>\n    );\n  },\n  (prev, next) => {\n    if (\n      prev.collaborators.size !== next.collaborators.size ||\n      prev.mobile !== next.mobile ||\n      prev.className !== next.className ||\n      prev.userToFollow !== next.userToFollow\n    ) {\n      return false;\n    }\n\n    for (const [socketId, collaborator] of prev.collaborators) {\n      const nextCollaborator = next.collaborators.get(socketId);\n      if (\n        !nextCollaborator ||\n        !isShallowEqual(\n          collaborator,\n          nextCollaborator,\n          collaboratorComparatorKeys,\n        )\n      ) {\n        return false;\n      }\n    }\n    return true;\n  },\n);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 290px;\n  margin: 1em;\n  text-align: center;\n}\n.excalidraw .Card .Card-icon {\n  font-size: 2.6em;\n  display: flex;\n  flex: 0 0 auto;\n  padding: 1.4rem;\n  border-radius: 50%;\n  background: var(--card-color);\n  color: #ffffff;\n}\n.excalidraw .Card .Card-icon svg {\n  width: 2.8rem;\n  height: 2.8rem;\n}\n.excalidraw .Card .Card-details {\n  font-size: 0.96em;\n  min-height: 90px;\n  padding: 0 1em;\n  margin-bottom: auto;\n}\n.excalidraw .Card .Card-button.ToolIcon_type_button {\n  height: 2.5rem;\n  margin-top: 1em;\n  margin-bottom: 0.3em;\n  background-color: var(--card-color);\n}\n.excalidraw .Card .Card-button.ToolIcon_type_button:hover {\n  background-color: var(--card-color-darker);\n}\n.excalidraw .Card .Card-button.ToolIcon_type_button:active {\n  background-color: var(--card-color-darkest);\n}\n.excalidraw .Card .Card-button.ToolIcon_type_button .ToolIcon__label {\n  color: #ffffff;\n}\n.excalidraw .Card .Card-button.ToolIcon_type_button .Spinner {\n  --spinner-color: #fff;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJDYXJkLnNjc3MiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtBO0VBQ0U7RUFDQTtFQUNBO0VBRUE7RUFFQTtFQUVBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsT0NWYTs7QURZYjtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUNBO0VBQ0U7O0FBRUY7RUFDRTs7QUFFRjtFQUNFLE9DckNXOztBRHdDYjtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLkNhcmQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgbWF4LXdpZHRoOiAyOTBweDtcblxuICAgIG1hcmdpbjogMWVtO1xuXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gICAgLkNhcmQtaWNvbiB7XG4gICAgICBmb250LXNpemU6IDIuNmVtO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXg6IDAgMCBhdXRvO1xuICAgICAgcGFkZGluZzogMS40cmVtO1xuICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY2FyZC1jb2xvcik7XG4gICAgICBjb2xvcjogJG9jLXdoaXRlO1xuXG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogMi44cmVtO1xuICAgICAgICBoZWlnaHQ6IDIuOHJlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuQ2FyZC1kZXRhaWxzIHtcbiAgICAgIGZvbnQtc2l6ZTogMC45NmVtO1xuICAgICAgbWluLWhlaWdodDogOTBweDtcbiAgICAgIHBhZGRpbmc6IDAgMWVtO1xuICAgICAgbWFyZ2luLWJvdHRvbTogYXV0bztcbiAgICB9XG5cbiAgICAmIC5DYXJkLWJ1dHRvbi5Ub29sSWNvbl90eXBlX2J1dHRvbiB7XG4gICAgICBoZWlnaHQ6IDIuNXJlbTtcbiAgICAgIG1hcmdpbi10b3A6IDFlbTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDAuM2VtO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FyZC1jb2xvcik7XG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FyZC1jb2xvci1kYXJrZXIpO1xuICAgICAgfVxuICAgICAgJjphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYXJkLWNvbG9yLWRhcmtlc3QpO1xuICAgICAgfVxuICAgICAgLlRvb2xJY29uX19sYWJlbCB7XG4gICAgICAgIGNvbG9yOiAkb2Mtd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5TcGlubmVyIHtcbiAgICAgICAgLS1zcGlubmVyLWNvbG9yOiAjZmZmO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLy9cbi8vXG4vLyAg8J2XliDwnZeiIPCdl58g8J2XoiDwnZelXG4vLyAgdiAxLjkuMVxuLy9cbi8vICDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblxuXG4vLyAgR2VuZXJhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtd2hpdGU6ICAgICAgICAgI2ZmZmZmZjtcbiRvYy1ibGFjazogICAgICAgICAjMDAwMDAwO1xuXG5cbi8vICBHcmF5XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmF5LWxpc3Q6IChcbiAgXCIwXCI6ICNmOGY5ZmEsXG4gIFwiMVwiOiAjZjFmM2Y1LFxuICBcIjJcIjogI2U5ZWNlZixcbiAgXCIzXCI6ICNkZWUyZTYsXG4gIFwiNFwiOiAjY2VkNGRhLFxuICBcIjVcIjogI2FkYjViZCxcbiAgXCI2XCI6ICM4NjhlOTYsXG4gIFwiN1wiOiAjNDk1MDU3LFxuICBcIjhcIjogIzM0M2E0MCxcbiAgXCI5XCI6ICMyMTI1Mjlcbik7XG5cbiRvYy1ncmF5LTA6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXktMTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjFcIik7XG4kb2MtZ3JheS0yOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMlwiKTtcbiRvYy1ncmF5LTM6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXktNDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjRcIik7XG4kb2MtZ3JheS01OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNVwiKTtcbiRvYy1ncmF5LTY6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXktNzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjdcIik7XG4kb2MtZ3JheS04OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOFwiKTtcbiRvYy1ncmF5LTk6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBSZWRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXJlZC1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNWY1LFxuICBcIjFcIjogI2ZmZTNlMyxcbiAgXCIyXCI6ICNmZmM5YzksXG4gIFwiM1wiOiAjZmZhOGE4LFxuICBcIjRcIjogI2ZmODc4NyxcbiAgXCI1XCI6ICNmZjZiNmIsXG4gIFwiNlwiOiAjZmE1MjUyLFxuICBcIjdcIjogI2YwM2UzZSxcbiAgXCI4XCI6ICNlMDMxMzEsXG4gIFwiOVwiOiAjYzkyYTJhXG4pO1xuXG4kb2MtcmVkLTA6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjBcIik7XG4kb2MtcmVkLTE6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjFcIik7XG4kb2MtcmVkLTI6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjJcIik7XG4kb2MtcmVkLTM6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjNcIik7XG4kb2MtcmVkLTQ6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjRcIik7XG4kb2MtcmVkLTU6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjVcIik7XG4kb2MtcmVkLTY6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjZcIik7XG4kb2MtcmVkLTc6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjdcIik7XG4kb2MtcmVkLTg6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjhcIik7XG4kb2MtcmVkLTk6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjlcIik7XG5cblxuLy8gIFBpbmtcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXBpbmstbGlzdDogKFxuICBcIjBcIjogI2ZmZjBmNixcbiAgXCIxXCI6ICNmZmRlZWIsXG4gIFwiMlwiOiAjZmNjMmQ3LFxuICBcIjNcIjogI2ZhYTJjMSxcbiAgXCI0XCI6ICNmNzgzYWMsXG4gIFwiNVwiOiAjZjA2NTk1LFxuICBcIjZcIjogI2U2NDk4MCxcbiAgXCI3XCI6ICNkNjMzNmMsXG4gIFwiOFwiOiAjYzIyNTVjLFxuICBcIjlcIjogI2E2MWU0ZFxuKTtcblxuJG9jLXBpbmstMDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjBcIik7XG4kb2MtcGluay0xOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMVwiKTtcbiRvYy1waW5rLTI6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIyXCIpO1xuJG9jLXBpbmstMzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjNcIik7XG4kb2MtcGluay00OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNFwiKTtcbiRvYy1waW5rLTU6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI1XCIpO1xuJG9jLXBpbmstNjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjZcIik7XG4kb2MtcGluay03OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiN1wiKTtcbiRvYy1waW5rLTg6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI4XCIpO1xuJG9jLXBpbmstOTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyYXBlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmFwZS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmMGZjLFxuICBcIjFcIjogI2YzZDlmYSxcbiAgXCIyXCI6ICNlZWJlZmEsXG4gIFwiM1wiOiAjZTU5OWY3LFxuICBcIjRcIjogI2RhNzdmMixcbiAgXCI1XCI6ICNjYzVkZTgsXG4gIFwiNlwiOiAjYmU0YmRiLFxuICBcIjdcIjogI2FlM2VjOSxcbiAgXCI4XCI6ICM5YzM2YjUsXG4gIFwiOVwiOiAjODYyZTljXG4pO1xuXG4kb2MtZ3JhcGUtMDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXBlLTE6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmFwZS0yOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjJcIik7XG4kb2MtZ3JhcGUtMzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXBlLTQ6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmFwZS01OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjVcIik7XG4kb2MtZ3JhcGUtNjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXBlLTc6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmFwZS04OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjhcIik7XG4kb2MtZ3JhcGUtOTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBWaW9sZXRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXZpb2xldC1saXN0OiAoXG4gIFwiMFwiOiAjZjNmMGZmLFxuICBcIjFcIjogI2U1ZGJmZixcbiAgXCIyXCI6ICNkMGJmZmYsXG4gIFwiM1wiOiAjYjE5N2ZjLFxuICBcIjRcIjogIzk3NzVmYSxcbiAgXCI1XCI6ICM4NDVlZjcsXG4gIFwiNlwiOiAjNzk1MGYyLFxuICBcIjdcIjogIzcwNDhlOCxcbiAgXCI4XCI6ICM2NzQxZDksXG4gIFwiOVwiOiAjNWYzZGM0XG4pO1xuXG4kb2MtdmlvbGV0LTA6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjBcIik7XG4kb2MtdmlvbGV0LTE6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjFcIik7XG4kb2MtdmlvbGV0LTI6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjJcIik7XG4kb2MtdmlvbGV0LTM6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjNcIik7XG4kb2MtdmlvbGV0LTQ6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjRcIik7XG4kb2MtdmlvbGV0LTU6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjVcIik7XG4kb2MtdmlvbGV0LTY6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjZcIik7XG4kb2MtdmlvbGV0LTc6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjdcIik7XG4kb2MtdmlvbGV0LTg6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjhcIik7XG4kb2MtdmlvbGV0LTk6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEluZGlnb1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtaW5kaWdvLWxpc3Q6IChcbiAgXCIwXCI6ICNlZGYyZmYsXG4gIFwiMVwiOiAjZGJlNGZmLFxuICBcIjJcIjogI2JhYzhmZixcbiAgXCIzXCI6ICM5MWE3ZmYsXG4gIFwiNFwiOiAjNzQ4ZmZjLFxuICBcIjVcIjogIzVjN2NmYSxcbiAgXCI2XCI6ICM0YzZlZjUsXG4gIFwiN1wiOiAjNDI2M2ViLFxuICBcIjhcIjogIzNiNWJkYixcbiAgXCI5XCI6ICMzNjRmYzdcbik7XG5cbiRvYy1pbmRpZ28tMDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMFwiKTtcbiRvYy1pbmRpZ28tMTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMVwiKTtcbiRvYy1pbmRpZ28tMjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMlwiKTtcbiRvYy1pbmRpZ28tMzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiM1wiKTtcbiRvYy1pbmRpZ28tNDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNFwiKTtcbiRvYy1pbmRpZ28tNTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNVwiKTtcbiRvYy1pbmRpZ28tNjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNlwiKTtcbiRvYy1pbmRpZ28tNzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiN1wiKTtcbiRvYy1pbmRpZ28tODogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOFwiKTtcbiRvYy1pbmRpZ28tOTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQmx1ZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtYmx1ZS1saXN0OiAoXG4gIFwiMFwiOiAjZTdmNWZmLFxuICBcIjFcIjogI2QwZWJmZixcbiAgXCIyXCI6ICNhNWQ4ZmYsXG4gIFwiM1wiOiAjNzRjMGZjLFxuICBcIjRcIjogIzRkYWJmNyxcbiAgXCI1XCI6ICMzMzlhZjAsXG4gIFwiNlwiOiAjMjI4YmU2LFxuICBcIjdcIjogIzFjN2VkNixcbiAgXCI4XCI6ICMxOTcxYzIsXG4gIFwiOVwiOiAjMTg2NGFiXG4pO1xuXG4kb2MtYmx1ZS0wOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMFwiKTtcbiRvYy1ibHVlLTE6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIxXCIpO1xuJG9jLWJsdWUtMjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjJcIik7XG4kb2MtYmx1ZS0zOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiM1wiKTtcbiRvYy1ibHVlLTQ6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI0XCIpO1xuJG9jLWJsdWUtNTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjVcIik7XG4kb2MtYmx1ZS02OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNlwiKTtcbiRvYy1ibHVlLTc6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI3XCIpO1xuJG9jLWJsdWUtODogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjhcIik7XG4kb2MtYmx1ZS05OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ3lhblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY3lhbi1saXN0OiAoXG4gIFwiMFwiOiAjZTNmYWZjLFxuICBcIjFcIjogI2M1ZjZmYSxcbiAgXCIyXCI6ICM5OWU5ZjIsXG4gIFwiM1wiOiAjNjZkOWU4LFxuICBcIjRcIjogIzNiYzlkYixcbiAgXCI1XCI6ICMyMmI4Y2YsXG4gIFwiNlwiOiAjMTVhYWJmLFxuICBcIjdcIjogIzEwOThhZCxcbiAgXCI4XCI6ICMwYzg1OTksXG4gIFwiOVwiOiAjMGI3Mjg1XG4pO1xuXG4kb2MtY3lhbi0wOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMFwiKTtcbiRvYy1jeWFuLTE6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIxXCIpO1xuJG9jLWN5YW4tMjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjJcIik7XG4kb2MtY3lhbi0zOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiM1wiKTtcbiRvYy1jeWFuLTQ6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI0XCIpO1xuJG9jLWN5YW4tNTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjVcIik7XG4kb2MtY3lhbi02OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNlwiKTtcbiRvYy1jeWFuLTc6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI3XCIpO1xuJG9jLWN5YW4tODogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjhcIik7XG4kb2MtY3lhbi05OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVGVhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdGVhbC1saXN0OiAoXG4gIFwiMFwiOiAjZTZmY2Y1LFxuICBcIjFcIjogI2MzZmFlOCxcbiAgXCIyXCI6ICM5NmYyZDcsXG4gIFwiM1wiOiAjNjNlNmJlLFxuICBcIjRcIjogIzM4ZDlhOSxcbiAgXCI1XCI6ICMyMGM5OTcsXG4gIFwiNlwiOiAjMTJiODg2LFxuICBcIjdcIjogIzBjYTY3OCxcbiAgXCI4XCI6ICMwOTkyNjgsXG4gIFwiOVwiOiAjMDg3ZjViXG4pO1xuXG4kb2MtdGVhbC0wOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMFwiKTtcbiRvYy10ZWFsLTE6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIxXCIpO1xuJG9jLXRlYWwtMjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjJcIik7XG4kb2MtdGVhbC0zOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiM1wiKTtcbiRvYy10ZWFsLTQ6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI0XCIpO1xuJG9jLXRlYWwtNTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjVcIik7XG4kb2MtdGVhbC02OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNlwiKTtcbiRvYy10ZWFsLTc6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI3XCIpO1xuJG9jLXRlYWwtODogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjhcIik7XG4kb2MtdGVhbC05OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JlZW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyZWVuLWxpc3Q6IChcbiAgXCIwXCI6ICNlYmZiZWUsXG4gIFwiMVwiOiAjZDNmOWQ4LFxuICBcIjJcIjogI2IyZjJiYixcbiAgXCIzXCI6ICM4Y2U5OWEsXG4gIFwiNFwiOiAjNjlkYjdjLFxuICBcIjVcIjogIzUxY2Y2NixcbiAgXCI2XCI6ICM0MGMwNTcsXG4gIFwiN1wiOiAjMzdiMjRkLFxuICBcIjhcIjogIzJmOWU0NCxcbiAgXCI5XCI6ICMyYjhhM2Vcbik7XG5cbiRvYy1ncmVlbi0wOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjBcIik7XG4kb2MtZ3JlZW4tMTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIxXCIpO1xuJG9jLWdyZWVuLTI6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmVlbi0zOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjNcIik7XG4kb2MtZ3JlZW4tNDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI0XCIpO1xuJG9jLWdyZWVuLTU6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmVlbi02OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjZcIik7XG4kb2MtZ3JlZW4tNzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI3XCIpO1xuJG9jLWdyZWVuLTg6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmVlbi05OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIExpbWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWxpbWUtbGlzdDogKFxuICBcIjBcIjogI2Y0ZmNlMyxcbiAgXCIxXCI6ICNlOWZhYzgsXG4gIFwiMlwiOiAjZDhmNWEyLFxuICBcIjNcIjogI2MwZWI3NSxcbiAgXCI0XCI6ICNhOWUzNGIsXG4gIFwiNVwiOiAjOTRkODJkLFxuICBcIjZcIjogIzgyYzkxZSxcbiAgXCI3XCI6ICM3NGI4MTYsXG4gIFwiOFwiOiAjNjZhODBmLFxuICBcIjlcIjogIzVjOTQwZFxuKTtcblxuJG9jLWxpbWUtMDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjBcIik7XG4kb2MtbGltZS0xOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMVwiKTtcbiRvYy1saW1lLTI6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIyXCIpO1xuJG9jLWxpbWUtMzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjNcIik7XG4kb2MtbGltZS00OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNFwiKTtcbiRvYy1saW1lLTU6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI1XCIpO1xuJG9jLWxpbWUtNjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjZcIik7XG4kb2MtbGltZS03OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiN1wiKTtcbiRvYy1saW1lLTg6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI4XCIpO1xuJG9jLWxpbWUtOTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFllbGxvd1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MteWVsbG93LWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY5ZGIsXG4gIFwiMVwiOiAjZmZmM2JmLFxuICBcIjJcIjogI2ZmZWM5OSxcbiAgXCIzXCI6ICNmZmUwNjYsXG4gIFwiNFwiOiAjZmZkNDNiLFxuICBcIjVcIjogI2ZjYzQxOSxcbiAgXCI2XCI6ICNmYWIwMDUsXG4gIFwiN1wiOiAjZjU5ZjAwLFxuICBcIjhcIjogI2YwOGMwMCxcbiAgXCI5XCI6ICNlNjc3MDBcbik7XG5cbiRvYy15ZWxsb3ctMDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMFwiKTtcbiRvYy15ZWxsb3ctMTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMVwiKTtcbiRvYy15ZWxsb3ctMjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMlwiKTtcbiRvYy15ZWxsb3ctMzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiM1wiKTtcbiRvYy15ZWxsb3ctNDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNFwiKTtcbiRvYy15ZWxsb3ctNTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNVwiKTtcbiRvYy15ZWxsb3ctNjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNlwiKTtcbiRvYy15ZWxsb3ctNzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiN1wiKTtcbiRvYy15ZWxsb3ctODogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOFwiKTtcbiRvYy15ZWxsb3ctOTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgT3JhbmdlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1vcmFuZ2UtbGlzdDogKFxuICBcIjBcIjogI2ZmZjRlNixcbiAgXCIxXCI6ICNmZmU4Y2MsXG4gIFwiMlwiOiAjZmZkOGE4LFxuICBcIjNcIjogI2ZmYzA3OCxcbiAgXCI0XCI6ICNmZmE5NGQsXG4gIFwiNVwiOiAjZmY5MjJiLFxuICBcIjZcIjogI2ZkN2UxNCxcbiAgXCI3XCI6ICNmNzY3MDcsXG4gIFwiOFwiOiAjZTg1OTBjLFxuICBcIjlcIjogI2Q5NDgwZlxuKTtcblxuJG9jLW9yYW5nZS0wOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIwXCIpO1xuJG9jLW9yYW5nZS0xOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIxXCIpO1xuJG9jLW9yYW5nZS0yOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIyXCIpO1xuJG9jLW9yYW5nZS0zOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIzXCIpO1xuJG9jLW9yYW5nZS00OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI0XCIpO1xuJG9jLW9yYW5nZS01OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI1XCIpO1xuJG9jLW9yYW5nZS02OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI2XCIpO1xuJG9jLW9yYW5nZS03OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI3XCIpO1xuJG9jLW9yYW5nZS04OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI4XCIpO1xuJG9jLW9yYW5nZS05OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDb2xvciBsaXN0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jb2xvci1zcGVjdHJ1bTogICA5O1xuXG4kb2MtY29sb3ItbGlzdDogKFxuICAkb2MtZ3JheS1saXN0OiAgICAgIFwiZ3JheVwiLFxuICAkb2MtcmVkLWxpc3Q6ICAgICAgXCJyZWRcIixcbiAgJG9jLXBpbmstbGlzdDogICAgICBcInBpbmtcIixcbiAgJG9jLWdyYXBlLWxpc3Q6ICAgICAgXCJncmFwZVwiLFxuICAkb2MtdmlvbGV0LWxpc3Q6ICAgICAgXCJ2aW9sZXRcIixcbiAgJG9jLWluZGlnby1saXN0OiAgICAgIFwiaW5kaWdvXCIsXG4gICRvYy1ibHVlLWxpc3Q6ICAgICAgXCJibHVlXCIsXG4gICRvYy1jeWFuLWxpc3Q6ICAgICAgXCJjeWFuXCIsXG4gICRvYy10ZWFsLWxpc3Q6ICAgICAgXCJ0ZWFsXCIsXG4gICRvYy1ncmVlbi1saXN0OiAgICAgIFwiZ3JlZW5cIixcbiAgJG9jLWxpbWUtbGlzdDogICAgICBcImxpbWVcIixcbiAgJG9jLXllbGxvdy1saXN0OiAgICAgIFwieWVsbG93XCIsXG4gICRvYy1vcmFuZ2UtbGlzdDogICAgICBcIm9yYW5nZVwiXG4pO1xuIl19 */", "import OpenColor from \"open-color\";\n\nimport \"./Card.scss\";\n\nexport const Card: React.FC<{\n  color: keyof OpenColor | \"primary\";\n  children?: React.ReactNode;\n}> = ({ children, color }) => {\n  return (\n    <div\n      className=\"Card\"\n      style={{\n        [\"--card-color\" as any]:\n          color === \"primary\" ? \"var(--color-primary)\" : OpenColor[color][7],\n        [\"--card-color-darker\" as any]:\n          color === \"primary\"\n            ? \"var(--color-primary-darker)\"\n            : OpenColor[color][8],\n        [\"--card-color-darkest\" as any]:\n          color === \"primary\"\n            ? \"var(--color-primary-darkest)\"\n            : OpenColor[color][9],\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .ExportDialog__preview {\n  --preview-padding: calc(var(--space-factor) * 4);\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center;\n  text-align: center;\n  padding: var(--preview-padding);\n  margin-bottom: calc(var(--space-factor) * 3);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.excalidraw .ExportDialog__preview canvas {\n  max-width: calc(100% - var(--preview-padding) * 2);\n  max-height: 25rem;\n}\n.excalidraw.theme--dark .ExportDialog__preview canvas {\n  filter: none;\n}\n.excalidraw .ExportDialog__actions {\n  width: 100%;\n  display: flex;\n  grid-gap: calc(var(--space-factor) * 2);\n  align-items: top;\n  justify-content: space-between;\n}\n.excalidraw--mobile.excalidraw .ExportDialog {\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw--mobile.excalidraw .ExportDialog__actions {\n  flex-direction: column;\n  align-items: center;\n}\n.excalidraw--mobile.excalidraw .ExportDialog__actions > * {\n  margin-bottom: calc(var(--space-factor) * 3);\n}\n.excalidraw--mobile.excalidraw .ExportDialog__preview canvas {\n  max-height: 30vh;\n}\n.excalidraw--mobile.excalidraw .ExportDialog__dialog,\n.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island {\n  height: 100%;\n  box-sizing: border-box;\n}\n.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island {\n  overflow-y: auto;\n}\n\n.excalidraw .ExportDialog--json .ExportDialog-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  justify-items: center;\n  row-gap: 2em;\n}\n@media (max-width: 460px) {\n  .excalidraw .ExportDialog--json .ExportDialog-cards {\n    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  }\n  .excalidraw .ExportDialog--json .ExportDialog-cards .Card-details {\n    min-height: 40px;\n  }\n}\n.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName {\n  width: fit-content;\n  margin: 1em auto;\n  align-items: flex-start;\n  flex-direction: column;\n}\n.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName .TextInput {\n  width: auto;\n}\n.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName-label {\n  margin: 0.625em 0;\n  font-weight: bold;\n}\n.excalidraw button.ExportDialog-imageExportButton {\n  border: 0;\n  width: 5rem;\n  height: 5rem;\n  margin: 0 0.2em;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 1rem;\n  background-color: var(--button-color);\n  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.28), 0 6px 10px 0 rgba(0, 0, 0, 0.14);\n  font-family: Cascadia;\n  font-size: 1.8em;\n  color: #ffffff;\n}\n.excalidraw button.ExportDialog-imageExportButton:hover {\n  background-color: var(--button-color-darker);\n}\n.excalidraw button.ExportDialog-imageExportButton:active {\n  background-color: var(--button-color-darkest);\n  box-shadow: none;\n}\n.excalidraw button.ExportDialog-imageExportButton svg {\n  width: 0.9em;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJFeHBvcnREaWFsb2cuc2NzcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuLWNvbG9yL29wZW4tY29sb3Iuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUVBO0VBRUE7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtBQUFBO0VBRUU7RUFDQTs7QUFHRjtFQUNFOzs7QUFLRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBTkY7SUFPSTs7RUFDQTtJQUNFOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBSUo7RUFDRTtFQUNBOztBQUtOO0VBQ0U7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUdBO0VBQ0E7RUFDQSxPQ3ZHZTs7QUR5R2Y7RUFDRTs7QUFFRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5FeHBvcnREaWFsb2dfX3ByZXZpZXcge1xuICAgIC0tcHJldmlldy1wYWRkaW5nOiBjYWxjKHZhcigtLXNwYWNlLWZhY3RvcikgKiA0KTtcblxuICAgIGJhY2tncm91bmQ6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUFNVWxFUVZRNFQyTmtZR0FRWWNBUDN1Q1RaaHcxZ0dHWWhBR0JaSUEvbllEQ2dCREFtOUJHRFdBQUp5UkNnTGFCQ0FBZ1h3aXh6QVMwcGdBQUFBQkpSVTVFcmtKZ2dnPT1cIilcbiAgICAgIGxlZnQgY2VudGVyO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiB2YXIoLS1wcmV2aWV3LXBhZGRpbmcpO1xuICAgIG1hcmdpbi1ib3R0b206IGNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIDMpO1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB9XG5cbiAgLkV4cG9ydERpYWxvZ19fcHJldmlldyBjYW52YXMge1xuICAgIG1heC13aWR0aDogY2FsYygxMDAlIC0gdmFyKC0tcHJldmlldy1wYWRkaW5nKSAqIDIpO1xuICAgIG1heC1oZWlnaHQ6IDI1cmVtO1xuICB9XG5cbiAgJi50aGVtZS0tZGFyayAuRXhwb3J0RGlhbG9nX19wcmV2aWV3IGNhbnZhcyB7XG4gICAgZmlsdGVyOiBub25lO1xuICB9XG5cbiAgLkV4cG9ydERpYWxvZ19fYWN0aW9ucyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBncmlkLWdhcDogY2FsYyh2YXIoLS1zcGFjZS1mYWN0b3IpICogMik7XG4gICAgYWxpZ24taXRlbXM6IHRvcDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cblxuICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgLkV4cG9ydERpYWxvZyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG5cbiAgICAuRXhwb3J0RGlhbG9nX19hY3Rpb25zIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cblxuICAgIC5FeHBvcnREaWFsb2dfX2FjdGlvbnMgPiAqIHtcbiAgICAgIG1hcmdpbi1ib3R0b206IGNhbGModmFyKC0tc3BhY2UtZmFjdG9yKSAqIDMpO1xuICAgIH1cblxuICAgIC5FeHBvcnREaWFsb2dfX3ByZXZpZXcgY2FudmFzIHtcbiAgICAgIG1heC1oZWlnaHQ6IDMwdmg7XG4gICAgfVxuXG4gICAgLkV4cG9ydERpYWxvZ19fZGlhbG9nLFxuICAgIC5FeHBvcnREaWFsb2dfX2RpYWxvZyAuSXNsYW5kIHtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgfVxuXG4gICAgLkV4cG9ydERpYWxvZ19fZGlhbG9nIC5Jc2xhbmQge1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICB9XG4gIH1cblxuICAuRXhwb3J0RGlhbG9nLS1qc29uIHtcbiAgICAuRXhwb3J0RGlhbG9nLWNhcmRzIHtcbiAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTtcbiAgICAgIGp1c3RpZnktaXRlbXM6IGNlbnRlcjtcbiAgICAgIHJvdy1nYXA6IDJlbTtcblxuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ2MHB4KSB7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjQwcHgsIDFmcikpO1xuICAgICAgICAuQ2FyZC1kZXRhaWxzIHtcbiAgICAgICAgICBtaW4taGVpZ2h0OiA0MHB4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5Qcm9qZWN0TmFtZSB7XG4gICAgICAgIHdpZHRoOiBmaXQtY29udGVudDtcbiAgICAgICAgbWFyZ2luOiAxZW0gYXV0bztcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAgICAgLlRleHRJbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLlByb2plY3ROYW1lLWxhYmVsIHtcbiAgICAgICAgbWFyZ2luOiAwLjYyNWVtIDA7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGJ1dHRvbi5FeHBvcnREaWFsb2ctaW1hZ2VFeHBvcnRCdXR0b24ge1xuICAgIGJvcmRlcjogMDtcblxuICAgIHdpZHRoOiA1cmVtO1xuICAgIGhlaWdodDogNXJlbTtcbiAgICBtYXJnaW46IDAgMC4yZW07XG4gICAgcGFkZGluZzogMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgICBib3JkZXItcmFkaXVzOiAxcmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvcik7XG4gICAgYm94LXNoYWRvdzogMCAzcHggNXB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjI4KSxcbiAgICAgIDAgNnB4IDEwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTQpO1xuXG4gICAgZm9udC1mYW1pbHk6IENhc2NhZGlhO1xuICAgIGZvbnQtc2l6ZTogMS44ZW07XG4gICAgY29sb3I6ICRvYy13aGl0ZTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLWRhcmtlcik7XG4gICAgfVxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvci1kYXJrZXN0KTtcbiAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIHdpZHRoOiAwLjllbTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vXG4vL1xuLy8gIPCdl5Yg8J2XoiDwnZefIPCdl6Ig8J2XpVxuLy8gIHYgMS45LjFcbi8vXG4vLyAg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cblxuLy8gIEdlbmVyYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXdoaXRlOiAgICAgICAgICNmZmZmZmY7XG4kb2MtYmxhY2s6ICAgICAgICAgIzAwMDAwMDtcblxuXG4vLyAgR3JheVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JheS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmOWZhLFxuICBcIjFcIjogI2YxZjNmNSxcbiAgXCIyXCI6ICNlOWVjZWYsXG4gIFwiM1wiOiAjZGVlMmU2LFxuICBcIjRcIjogI2NlZDRkYSxcbiAgXCI1XCI6ICNhZGI1YmQsXG4gIFwiNlwiOiAjODY4ZTk2LFxuICBcIjdcIjogIzQ5NTA1NyxcbiAgXCI4XCI6ICMzNDNhNDAsXG4gIFwiOVwiOiAjMjEyNTI5XG4pO1xuXG4kb2MtZ3JheS0wOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMFwiKTtcbiRvYy1ncmF5LTE6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXktMjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjJcIik7XG4kb2MtZ3JheS0zOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiM1wiKTtcbiRvYy1ncmF5LTQ6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXktNTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjVcIik7XG4kb2MtZ3JheS02OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNlwiKTtcbiRvYy1ncmF5LTc6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXktODogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjhcIik7XG4kb2MtZ3JheS05OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUmVkXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1yZWQtbGlzdDogKFxuICBcIjBcIjogI2ZmZjVmNSxcbiAgXCIxXCI6ICNmZmUzZTMsXG4gIFwiMlwiOiAjZmZjOWM5LFxuICBcIjNcIjogI2ZmYThhOCxcbiAgXCI0XCI6ICNmZjg3ODcsXG4gIFwiNVwiOiAjZmY2YjZiLFxuICBcIjZcIjogI2ZhNTI1MixcbiAgXCI3XCI6ICNmMDNlM2UsXG4gIFwiOFwiOiAjZTAzMTMxLFxuICBcIjlcIjogI2M5MmEyYVxuKTtcblxuJG9jLXJlZC0wOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIwXCIpO1xuJG9jLXJlZC0xOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIxXCIpO1xuJG9jLXJlZC0yOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIyXCIpO1xuJG9jLXJlZC0zOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIzXCIpO1xuJG9jLXJlZC00OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI0XCIpO1xuJG9jLXJlZC01OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI1XCIpO1xuJG9jLXJlZC02OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI2XCIpO1xuJG9jLXJlZC03OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI3XCIpO1xuJG9jLXJlZC04OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI4XCIpO1xuJG9jLXJlZC05OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBQaW5rXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1waW5rLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmYwZjYsXG4gIFwiMVwiOiAjZmZkZWViLFxuICBcIjJcIjogI2ZjYzJkNyxcbiAgXCIzXCI6ICNmYWEyYzEsXG4gIFwiNFwiOiAjZjc4M2FjLFxuICBcIjVcIjogI2YwNjU5NSxcbiAgXCI2XCI6ICNlNjQ5ODAsXG4gIFwiN1wiOiAjZDYzMzZjLFxuICBcIjhcIjogI2MyMjU1YyxcbiAgXCI5XCI6ICNhNjFlNGRcbik7XG5cbiRvYy1waW5rLTA6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIwXCIpO1xuJG9jLXBpbmstMTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjFcIik7XG4kb2MtcGluay0yOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMlwiKTtcbiRvYy1waW5rLTM6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIzXCIpO1xuJG9jLXBpbmstNDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjRcIik7XG4kb2MtcGluay01OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNVwiKTtcbiRvYy1waW5rLTY6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI2XCIpO1xuJG9jLXBpbmstNzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjdcIik7XG4kb2MtcGluay04OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOFwiKTtcbiRvYy1waW5rLTk6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmFwZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JhcGUtbGlzdDogKFxuICBcIjBcIjogI2Y4ZjBmYyxcbiAgXCIxXCI6ICNmM2Q5ZmEsXG4gIFwiMlwiOiAjZWViZWZhLFxuICBcIjNcIjogI2U1OTlmNyxcbiAgXCI0XCI6ICNkYTc3ZjIsXG4gIFwiNVwiOiAjY2M1ZGU4LFxuICBcIjZcIjogI2JlNGJkYixcbiAgXCI3XCI6ICNhZTNlYzksXG4gIFwiOFwiOiAjOWMzNmI1LFxuICBcIjlcIjogIzg2MmU5Y1xuKTtcblxuJG9jLWdyYXBlLTA6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmFwZS0xOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjFcIik7XG4kb2MtZ3JhcGUtMjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXBlLTM6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmFwZS00OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjRcIik7XG4kb2MtZ3JhcGUtNTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXBlLTY6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmFwZS03OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjdcIik7XG4kb2MtZ3JhcGUtODogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXBlLTk6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVmlvbGV0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy12aW9sZXQtbGlzdDogKFxuICBcIjBcIjogI2YzZjBmZixcbiAgXCIxXCI6ICNlNWRiZmYsXG4gIFwiMlwiOiAjZDBiZmZmLFxuICBcIjNcIjogI2IxOTdmYyxcbiAgXCI0XCI6ICM5Nzc1ZmEsXG4gIFwiNVwiOiAjODQ1ZWY3LFxuICBcIjZcIjogIzc5NTBmMixcbiAgXCI3XCI6ICM3MDQ4ZTgsXG4gIFwiOFwiOiAjNjc0MWQ5LFxuICBcIjlcIjogIzVmM2RjNFxuKTtcblxuJG9jLXZpb2xldC0wOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIwXCIpO1xuJG9jLXZpb2xldC0xOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIxXCIpO1xuJG9jLXZpb2xldC0yOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIyXCIpO1xuJG9jLXZpb2xldC0zOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIzXCIpO1xuJG9jLXZpb2xldC00OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI0XCIpO1xuJG9jLXZpb2xldC01OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI1XCIpO1xuJG9jLXZpb2xldC02OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI2XCIpO1xuJG9jLXZpb2xldC03OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI3XCIpO1xuJG9jLXZpb2xldC04OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI4XCIpO1xuJG9jLXZpb2xldC05OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBJbmRpZ29cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWluZGlnby1saXN0OiAoXG4gIFwiMFwiOiAjZWRmMmZmLFxuICBcIjFcIjogI2RiZTRmZixcbiAgXCIyXCI6ICNiYWM4ZmYsXG4gIFwiM1wiOiAjOTFhN2ZmLFxuICBcIjRcIjogIzc0OGZmYyxcbiAgXCI1XCI6ICM1YzdjZmEsXG4gIFwiNlwiOiAjNGM2ZWY1LFxuICBcIjdcIjogIzQyNjNlYixcbiAgXCI4XCI6ICMzYjViZGIsXG4gIFwiOVwiOiAjMzY0ZmM3XG4pO1xuXG4kb2MtaW5kaWdvLTA6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjBcIik7XG4kb2MtaW5kaWdvLTE6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjFcIik7XG4kb2MtaW5kaWdvLTI6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjJcIik7XG4kb2MtaW5kaWdvLTM6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjNcIik7XG4kb2MtaW5kaWdvLTQ6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjRcIik7XG4kb2MtaW5kaWdvLTU6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjVcIik7XG4kb2MtaW5kaWdvLTY6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjZcIik7XG4kb2MtaW5kaWdvLTc6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjdcIik7XG4kb2MtaW5kaWdvLTg6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjhcIik7XG4kb2MtaW5kaWdvLTk6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjlcIik7XG5cblxuLy8gIEJsdWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWJsdWUtbGlzdDogKFxuICBcIjBcIjogI2U3ZjVmZixcbiAgXCIxXCI6ICNkMGViZmYsXG4gIFwiMlwiOiAjYTVkOGZmLFxuICBcIjNcIjogIzc0YzBmYyxcbiAgXCI0XCI6ICM0ZGFiZjcsXG4gIFwiNVwiOiAjMzM5YWYwLFxuICBcIjZcIjogIzIyOGJlNixcbiAgXCI3XCI6ICMxYzdlZDYsXG4gIFwiOFwiOiAjMTk3MWMyLFxuICBcIjlcIjogIzE4NjRhYlxuKTtcblxuJG9jLWJsdWUtMDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjBcIik7XG4kb2MtYmx1ZS0xOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMVwiKTtcbiRvYy1ibHVlLTI6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIyXCIpO1xuJG9jLWJsdWUtMzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjNcIik7XG4kb2MtYmx1ZS00OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNFwiKTtcbiRvYy1ibHVlLTU6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI1XCIpO1xuJG9jLWJsdWUtNjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjZcIik7XG4kb2MtYmx1ZS03OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiN1wiKTtcbiRvYy1ibHVlLTg6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI4XCIpO1xuJG9jLWJsdWUtOTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIEN5YW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWN5YW4tbGlzdDogKFxuICBcIjBcIjogI2UzZmFmYyxcbiAgXCIxXCI6ICNjNWY2ZmEsXG4gIFwiMlwiOiAjOTllOWYyLFxuICBcIjNcIjogIzY2ZDllOCxcbiAgXCI0XCI6ICMzYmM5ZGIsXG4gIFwiNVwiOiAjMjJiOGNmLFxuICBcIjZcIjogIzE1YWFiZixcbiAgXCI3XCI6ICMxMDk4YWQsXG4gIFwiOFwiOiAjMGM4NTk5LFxuICBcIjlcIjogIzBiNzI4NVxuKTtcblxuJG9jLWN5YW4tMDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjBcIik7XG4kb2MtY3lhbi0xOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMVwiKTtcbiRvYy1jeWFuLTI6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIyXCIpO1xuJG9jLWN5YW4tMzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjNcIik7XG4kb2MtY3lhbi00OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNFwiKTtcbiRvYy1jeWFuLTU6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI1XCIpO1xuJG9jLWN5YW4tNjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjZcIik7XG4kb2MtY3lhbi03OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiN1wiKTtcbiRvYy1jeWFuLTg6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI4XCIpO1xuJG9jLWN5YW4tOTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIFRlYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXRlYWwtbGlzdDogKFxuICBcIjBcIjogI2U2ZmNmNSxcbiAgXCIxXCI6ICNjM2ZhZTgsXG4gIFwiMlwiOiAjOTZmMmQ3LFxuICBcIjNcIjogIzYzZTZiZSxcbiAgXCI0XCI6ICMzOGQ5YTksXG4gIFwiNVwiOiAjMjBjOTk3LFxuICBcIjZcIjogIzEyYjg4NixcbiAgXCI3XCI6ICMwY2E2NzgsXG4gIFwiOFwiOiAjMDk5MjY4LFxuICBcIjlcIjogIzA4N2Y1YlxuKTtcblxuJG9jLXRlYWwtMDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjBcIik7XG4kb2MtdGVhbC0xOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMVwiKTtcbiRvYy10ZWFsLTI6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIyXCIpO1xuJG9jLXRlYWwtMzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjNcIik7XG4kb2MtdGVhbC00OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNFwiKTtcbiRvYy10ZWFsLTU6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI1XCIpO1xuJG9jLXRlYWwtNjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjZcIik7XG4kb2MtdGVhbC03OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiN1wiKTtcbiRvYy10ZWFsLTg6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI4XCIpO1xuJG9jLXRlYWwtOTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyZWVuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmVlbi1saXN0OiAoXG4gIFwiMFwiOiAjZWJmYmVlLFxuICBcIjFcIjogI2QzZjlkOCxcbiAgXCIyXCI6ICNiMmYyYmIsXG4gIFwiM1wiOiAjOGNlOTlhLFxuICBcIjRcIjogIzY5ZGI3YyxcbiAgXCI1XCI6ICM1MWNmNjYsXG4gIFwiNlwiOiAjNDBjMDU3LFxuICBcIjdcIjogIzM3YjI0ZCxcbiAgXCI4XCI6ICMyZjllNDQsXG4gIFwiOVwiOiAjMmI4YTNlXG4pO1xuXG4kb2MtZ3JlZW4tMDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIwXCIpO1xuJG9jLWdyZWVuLTE6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmVlbi0yOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjJcIik7XG4kb2MtZ3JlZW4tMzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIzXCIpO1xuJG9jLWdyZWVuLTQ6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmVlbi01OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjVcIik7XG4kb2MtZ3JlZW4tNjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI2XCIpO1xuJG9jLWdyZWVuLTc6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmVlbi04OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjhcIik7XG4kb2MtZ3JlZW4tOTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBMaW1lXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1saW1lLWxpc3Q6IChcbiAgXCIwXCI6ICNmNGZjZTMsXG4gIFwiMVwiOiAjZTlmYWM4LFxuICBcIjJcIjogI2Q4ZjVhMixcbiAgXCIzXCI6ICNjMGViNzUsXG4gIFwiNFwiOiAjYTllMzRiLFxuICBcIjVcIjogIzk0ZDgyZCxcbiAgXCI2XCI6ICM4MmM5MWUsXG4gIFwiN1wiOiAjNzRiODE2LFxuICBcIjhcIjogIzY2YTgwZixcbiAgXCI5XCI6ICM1Yzk0MGRcbik7XG5cbiRvYy1saW1lLTA6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIwXCIpO1xuJG9jLWxpbWUtMTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjFcIik7XG4kb2MtbGltZS0yOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMlwiKTtcbiRvYy1saW1lLTM6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIzXCIpO1xuJG9jLWxpbWUtNDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjRcIik7XG4kb2MtbGltZS01OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNVwiKTtcbiRvYy1saW1lLTY6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI2XCIpO1xuJG9jLWxpbWUtNzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjdcIik7XG4kb2MtbGltZS04OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOFwiKTtcbiRvYy1saW1lLTk6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBZZWxsb3dcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXllbGxvdy1saXN0OiAoXG4gIFwiMFwiOiAjZmZmOWRiLFxuICBcIjFcIjogI2ZmZjNiZixcbiAgXCIyXCI6ICNmZmVjOTksXG4gIFwiM1wiOiAjZmZlMDY2LFxuICBcIjRcIjogI2ZmZDQzYixcbiAgXCI1XCI6ICNmY2M0MTksXG4gIFwiNlwiOiAjZmFiMDA1LFxuICBcIjdcIjogI2Y1OWYwMCxcbiAgXCI4XCI6ICNmMDhjMDAsXG4gIFwiOVwiOiAjZTY3NzAwXG4pO1xuXG4kb2MteWVsbG93LTA6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjBcIik7XG4kb2MteWVsbG93LTE6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjFcIik7XG4kb2MteWVsbG93LTI6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjJcIik7XG4kb2MteWVsbG93LTM6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjNcIik7XG4kb2MteWVsbG93LTQ6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjRcIik7XG4kb2MteWVsbG93LTU6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjVcIik7XG4kb2MteWVsbG93LTY6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjZcIik7XG4kb2MteWVsbG93LTc6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjdcIik7XG4kb2MteWVsbG93LTg6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjhcIik7XG4kb2MteWVsbG93LTk6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjlcIik7XG5cblxuLy8gIE9yYW5nZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtb3JhbmdlLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY0ZTYsXG4gIFwiMVwiOiAjZmZlOGNjLFxuICBcIjJcIjogI2ZmZDhhOCxcbiAgXCIzXCI6ICNmZmMwNzgsXG4gIFwiNFwiOiAjZmZhOTRkLFxuICBcIjVcIjogI2ZmOTIyYixcbiAgXCI2XCI6ICNmZDdlMTQsXG4gIFwiN1wiOiAjZjc2NzA3LFxuICBcIjhcIjogI2U4NTkwYyxcbiAgXCI5XCI6ICNkOTQ4MGZcbik7XG5cbiRvYy1vcmFuZ2UtMDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMFwiKTtcbiRvYy1vcmFuZ2UtMTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMVwiKTtcbiRvYy1vcmFuZ2UtMjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMlwiKTtcbiRvYy1vcmFuZ2UtMzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiM1wiKTtcbiRvYy1vcmFuZ2UtNDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNFwiKTtcbiRvYy1vcmFuZ2UtNTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNVwiKTtcbiRvYy1vcmFuZ2UtNjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNlwiKTtcbiRvYy1vcmFuZ2UtNzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiN1wiKTtcbiRvYy1vcmFuZ2UtODogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOFwiKTtcbiRvYy1vcmFuZ2UtOTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ29sb3IgbGlzdFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY29sb3Itc3BlY3RydW06ICAgOTtcblxuJG9jLWNvbG9yLWxpc3Q6IChcbiAgJG9jLWdyYXktbGlzdDogICAgICBcImdyYXlcIixcbiAgJG9jLXJlZC1saXN0OiAgICAgIFwicmVkXCIsXG4gICRvYy1waW5rLWxpc3Q6ICAgICAgXCJwaW5rXCIsXG4gICRvYy1ncmFwZS1saXN0OiAgICAgIFwiZ3JhcGVcIixcbiAgJG9jLXZpb2xldC1saXN0OiAgICAgIFwidmlvbGV0XCIsXG4gICRvYy1pbmRpZ28tbGlzdDogICAgICBcImluZGlnb1wiLFxuICAkb2MtYmx1ZS1saXN0OiAgICAgIFwiYmx1ZVwiLFxuICAkb2MtY3lhbi1saXN0OiAgICAgIFwiY3lhblwiLFxuICAkb2MtdGVhbC1saXN0OiAgICAgIFwidGVhbFwiLFxuICAkb2MtZ3JlZW4tbGlzdDogICAgICBcImdyZWVuXCIsXG4gICRvYy1saW1lLWxpc3Q6ICAgICAgXCJsaW1lXCIsXG4gICRvYy15ZWxsb3ctbGlzdDogICAgICBcInllbGxvd1wiLFxuICAkb2Mtb3JhbmdlLWxpc3Q6ICAgICAgXCJvcmFuZ2VcIlxuKTtcbiJdfQ== */", "import React from \"react\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { t } from \"../i18n\";\n\nimport { ExportOpts, BinaryFiles, UIAppState } from \"../types\";\nimport { Dialog } from \"./Dialog\";\nimport { exportToFileIcon, LinkIcon } from \"./icons\";\nimport { ToolButton } from \"./ToolButton\";\nimport { actionSaveFileToDisk } from \"../actions/actionExport\";\nimport { Card } from \"./Card\";\n\nimport \"./ExportDialog.scss\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { trackEvent } from \"../analytics\";\nimport { ActionManager } from \"../actions/manager\";\nimport { getFrame } from \"../utils\";\n\nexport type ExportCB = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  scale?: number,\n) => void;\n\nconst JSONExportModal = ({\n  elements,\n  appState,\n  setAppState,\n  files,\n  actionManager,\n  exportOpts,\n  canvas,\n  onCloseRequest,\n}: {\n  appState: UIAppState;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  files: BinaryFiles;\n  elements: readonly NonDeletedExcalidrawElement[];\n  actionManager: ActionManager;\n  onCloseRequest: () => void;\n  exportOpts: ExportOpts;\n  canvas: HTMLCanvasElement;\n}) => {\n  const { onExportToBackend } = exportOpts;\n  return (\n    <div className=\"ExportDialog ExportDialog--json\">\n      <div className=\"ExportDialog-cards\">\n        {exportOpts.saveFileToDisk && (\n          <Card color=\"lime\">\n            <div className=\"Card-icon\">{exportToFileIcon}</div>\n            <h2>{t(\"exportDialog.disk_title\")}</h2>\n            <div className=\"Card-details\">\n              {t(\"exportDialog.disk_details\")}\n              {!nativeFileSystemSupported &&\n                actionManager.renderAction(\"changeProjectName\")}\n            </div>\n            <ToolButton\n              className=\"Card-button\"\n              type=\"button\"\n              title={t(\"exportDialog.disk_button\")}\n              aria-label={t(\"exportDialog.disk_button\")}\n              showAriaLabel={true}\n              onClick={() => {\n                actionManager.executeAction(actionSaveFileToDisk, \"ui\");\n              }}\n            />\n          </Card>\n        )}\n        {onExportToBackend && (\n          <Card color=\"pink\">\n            <div className=\"Card-icon\">{LinkIcon}</div>\n            <h2>{t(\"exportDialog.link_title\")}</h2>\n            <div className=\"Card-details\">{t(\"exportDialog.link_details\")}</div>\n            <ToolButton\n              className=\"Card-button\"\n              type=\"button\"\n              title={t(\"exportDialog.link_button\")}\n              aria-label={t(\"exportDialog.link_button\")}\n              showAriaLabel={true}\n              onClick={async () => {\n                try {\n                  trackEvent(\"export\", \"link\", `ui (${getFrame()})`);\n                  await onExportToBackend(elements, appState, files);\n                  onCloseRequest();\n                } catch (error: any) {\n                  setAppState({ errorMessage: error.message });\n                }\n              }}\n            />\n          </Card>\n        )}\n        {exportOpts.renderCustomUI &&\n          exportOpts.renderCustomUI(elements, appState, files, canvas)}\n      </div>\n    </div>\n  );\n};\n\nexport const JSONExportDialog = ({\n  elements,\n  appState,\n  files,\n  actionManager,\n  exportOpts,\n  canvas,\n  setAppState,\n}: {\n  elements: readonly NonDeletedExcalidrawElement[];\n  appState: UIAppState;\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  exportOpts: ExportOpts;\n  canvas: HTMLCanvasElement;\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n}) => {\n  const handleClose = React.useCallback(() => {\n    setAppState({ openDialog: null });\n  }, [setAppState]);\n\n  return (\n    <>\n      {appState.openDialog?.name === \"jsonExport\" && (\n        <Dialog onCloseRequest={handleClose} title={t(\"buttons.export\")}>\n          <JSONExportModal\n            elements={elements}\n            appState={appState}\n            setAppState={setAppState}\n            files={files}\n            actionManager={actionManager}\n            onCloseRequest={handleClose}\n            exportOpts={exportOpts}\n            canvas={canvas}\n          />\n        </Dialog>\n      )}\n    </>\n  );\n};\n", "import { t } from \"../i18n\";\nimport { HelpIcon } from \"./icons\";\n\ntype HelpButtonProps = {\n  name?: string;\n  id?: string;\n  onClick?(): void;\n};\n\nexport const HelpButton = (props: HelpButtonProps) => (\n  <button\n    className=\"help-icon\"\n    onClick={props.onClick}\n    type=\"button\"\n    title={`${t(\"helpDialog.title\")} \u2014 ?`}\n    aria-label={t(\"helpDialog.title\")}\n  >\n    {HelpIcon}\n  </button>\n);\n", "import clsx from \"clsx\";\nimport { actionShortcuts } from \"../../actions\";\nimport { ActionManager } from \"../../actions/manager\";\nimport {\n  ExitZenModeAction,\n  FinalizeAction,\n  UndoRedoActions,\n  ZoomActions,\n} from \"../Actions\";\nimport { useDevice } from \"../App\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { HelpButton } from \"../HelpButton\";\nimport { Section } from \"../Section\";\nimport Stack from \"../Stack\";\nimport { UIAppState } from \"../../types\";\n\nconst Footer = ({\n  appState,\n  actionManager,\n  showExitZenModeBtn,\n  renderWelcomeScreen,\n}: {\n  appState: UIAppState;\n  actionManager: ActionManager;\n  showExitZenModeBtn: boolean;\n  renderWelcomeScreen: boolean;\n}) => {\n  const { FooterCenterTunnel, WelcomeScreenHelpHintTunnel } = useTunnels();\n\n  const device = useDevice();\n  const showFinalize =\n    !appState.viewModeEnabled && appState.multiElement && device.isTouchScreen;\n\n  return (\n    <footer\n      role=\"contentinfo\"\n      className=\"layer-ui__wrapper__footer App-menu App-menu_bottom\"\n    >\n      <div\n        className={clsx(\"layer-ui__wrapper__footer-left zen-mode-transition\", {\n          \"layer-ui__wrapper__footer-left--transition-left\":\n            appState.zenModeEnabled,\n        })}\n      >\n        <Stack.Col gap={2}>\n          <Section heading=\"canvasActions\">\n            <ZoomActions\n              renderAction={actionManager.renderAction}\n              zoom={appState.zoom}\n            />\n\n            {!appState.viewModeEnabled && (\n              <UndoRedoActions\n                renderAction={actionManager.renderAction}\n                className={clsx(\"zen-mode-transition\", {\n                  \"layer-ui__wrapper__footer-left--transition-bottom\":\n                    appState.zenModeEnabled,\n                })}\n              />\n            )}\n            {showFinalize && (\n              <FinalizeAction\n                renderAction={actionManager.renderAction}\n                className={clsx(\"zen-mode-transition\", {\n                  \"layer-ui__wrapper__footer-left--transition-left\":\n                    appState.zenModeEnabled,\n                })}\n              />\n            )}\n          </Section>\n        </Stack.Col>\n      </div>\n      <FooterCenterTunnel.Out />\n      <div\n        className={clsx(\"layer-ui__wrapper__footer-right zen-mode-transition\", {\n          \"transition-right\": appState.zenModeEnabled,\n        })}\n      >\n        <div style={{ position: \"relative\" }}>\n          {renderWelcomeScreen && <WelcomeScreenHelpHintTunnel.Out />}\n          <HelpButton\n            onClick={() => actionManager.executeAction(actionShortcuts)}\n          />\n        </div>\n      </div>\n      <ExitZenModeAction\n        actionManager={actionManager}\n        showExitZenModeBtn={showExitZenModeBtn}\n      />\n    </footer>\n  );\n};\n\nexport default Footer;\nFooter.displayName = \"Footer\";\n", "import React from \"react\";\nimport { AppState, SidebarName, SidebarTabName } from \"../../types\";\n\nexport type SidebarTriggerProps = {\n  name: SidebarName;\n  tab?: SidebarTabName;\n  icon?: JSX.Element;\n  children?: React.ReactNode;\n  title?: string;\n  className?: string;\n  onToggle?: (open: boolean) => void;\n  style?: React.CSSProperties;\n};\n\nexport type SidebarProps<P = {}> = {\n  name: SidebarName;\n  children: React.ReactNode;\n  /**\n   * Called on sidebar open/close or tab change.\n   */\n  onStateChange?: (state: AppState[\"openSidebar\"]) => void;\n  /**\n   * supply alongside `docked` prop in order to make the Sidebar user-dockable\n   */\n  onDock?: (docked: boolean) => void;\n  docked?: boolean;\n  className?: string;\n  // NOTE sidebars we use internally inside the editor must have this flag set.\n  // It indicates that this sidebar should have lower precedence over host\n  // sidebars, if both are open.\n  /** @private internal */\n  __fallback?: boolean;\n} & P;\n\nexport type SidebarPropsContextValue = Pick<\n  SidebarProps,\n  \"onDock\" | \"docked\"\n> & { onCloseRequest: () => void; shouldRenderDockButton: boolean };\n\nexport const SidebarPropsContext =\n  React.createContext<SidebarPropsContextValue>({} as SidebarPropsContextValue);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --theme-filter: none;\n  --button-destructive-bg-color: #ffe3e3;\n  --button-destructive-color: #c92a2a;\n  --button-gray-1: #e9ecef;\n  --button-gray-2: #ced4da;\n  --button-gray-3: #adb5bd;\n  --button-special-active-bg-color: #ebfbee;\n  --dialog-border-color: var(--color-gray-20);\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"292.4\" height=\"292.4\" viewBox=\"0 0 292 292\"><path d=\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\"/></svg>');\n  --focus-highlight-color: #a5d8ff;\n  --icon-fill-color: var(--color-on-surface);\n  --icon-green-fill-color: #2b8a3e;\n  --default-bg-color: #ffffff;\n  --input-bg-color: #ffffff;\n  --input-border-color: #ced4da;\n  --input-hover-bg-color: #f1f3f5;\n  --input-label-color: #495057;\n  --island-bg-color: #ffffff;\n  --keybinding-color: var(--color-gray-40);\n  --link-color: #1c7ed6;\n  --overlay-bg-color: rgba(255, 255, 255, 0.88);\n  --popup-bg-color: var(--island-bg-color);\n  --popup-secondary-bg-color: #f1f3f5;\n  --popup-text-color: #000000;\n  --popup-text-inverted-color: #ffffff;\n  --select-highlight-color: #339af0;\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\n  --button-hover-bg: var(--color-surface-high);\n  --button-active-bg: var(--color-surface-high);\n  --button-active-border: var(--color-brand-active);\n  --default-border-color: var(--color-surface-high);\n  --default-button-size: 2rem;\n  --default-icon-size: 1rem;\n  --lg-button-size: 2.25rem;\n  --lg-icon-size: 1rem;\n  --editor-container-padding: 1rem;\n  --scrollbar-thumb: var(--button-gray-2);\n  --scrollbar-thumb-hover: var(--button-gray-3);\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --avatar-border-color: var(--color-gray-20);\n  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --sidebar-border-color: var(--color-surface-high);\n  --sidebar-bg-color: var(--island-bg-color);\n  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),\n    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),\n    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);\n  --space-factor: 0.25rem;\n  --text-primary-color: var(--color-on-surface);\n  --color-selection: #6965db;\n  --color-icon-white: #ffffff;\n  --color-primary: #6965db;\n  --color-primary-darker: #5b57d1;\n  --color-primary-darkest: #4a47b1;\n  --color-primary-light: #e3e2fe;\n  --color-primary-light-darker: #d7d5ff;\n  --color-primary-hover: #5753d0;\n  --color-gray-10: #f5f5f5;\n  --color-gray-20: #ebebeb;\n  --color-gray-30: #d6d6d6;\n  --color-gray-40: #b8b8b8;\n  --color-gray-50: #999999;\n  --color-gray-60: #7a7a7a;\n  --color-gray-70: #5c5c5c;\n  --color-gray-80: #3d3d3d;\n  --color-gray-85: #242424;\n  --color-gray-90: #1e1e1e;\n  --color-gray-100: #121212;\n  --color-warning: #fceeca;\n  --color-warning-dark: #f5c354;\n  --color-warning-darker: #f3ab2c;\n  --color-warning-darkest: #ec8b14;\n  --color-text-warning: var(--text-primary-color);\n  --color-danger: #db6965;\n  --color-danger-dark: #db6965;\n  --color-danger-darker: #d65550;\n  --color-danger-darkest: #d1413c;\n  --color-danger-text: black;\n  --color-danger-background: #fff0f0;\n  --color-danger-icon-background: #ffdad6;\n  --color-danger-color: #700000;\n  --color-danger-icon-color: #700000;\n  --color-warning-background: var(--color-warning);\n  --color-warning-icon-background: var(--color-warning-dark);\n  --color-warning-color: var(--text-primary-color);\n  --color-warning-icon-color: var(--text-primary-color);\n  --color-muted: var(--color-gray-30);\n  --color-muted-darker: var(--color-gray-60);\n  --color-muted-darkest: var(--color-gray-100);\n  --color-muted-background: var(--color-gray-80);\n  --color-muted-background-darker: var(--color-gray-100);\n  --color-promo: #e70078;\n  --color-success: #268029;\n  --color-success-lighter: #cafccc;\n  --color-logo-icon: var(--color-primary);\n  --color-logo-text: #190064;\n  --border-radius-md: 0.375rem;\n  --border-radius-lg: 0.5rem;\n  --color-surface-high: hsl(244, 100%, 97%);\n  --color-surface-mid: hsl(240 25% 96%);\n  --color-surface-low: hsl(240 25% 94%);\n  --color-surface-lowest: #ffffff;\n  --color-on-surface: #1b1b1f;\n  --color-brand-hover: #5753d0;\n  --color-on-primary-container: #030064;\n  --color-surface-primary-container: #e0dfff;\n  --color-brand-active: #4440bf;\n  --color-border-outline: #767680;\n  --color-border-outline-variant: #c5c5d0;\n  --color-surface-primary-container: #e0dfff;\n}\n@media screen and (min-device-width: 1921px) {\n  .excalidraw {\n    --lg-button-size: 2.5rem;\n    --lg-icon-size: 1.25rem;\n    --default-button-size: 2.25rem;\n    --default-icon-size: 1.25rem;\n  }\n}\n.excalidraw.theme--dark.theme--dark-background-none {\n  background: none;\n}\n.excalidraw.theme--dark {\n  --theme-filter: invert(93%) hue-rotate(180deg);\n  --button-destructive-bg-color: #5a0000;\n  --button-destructive-color: #ffa8a8;\n  --button-gray-1: #363636;\n  --button-gray-2: #272727;\n  --button-gray-3: #222;\n  --button-special-active-bg-color: #204624;\n  --dialog-border-color: var(--color-gray-80);\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"292.4\" height=\"292.4\" viewBox=\"0 0 292 292\"><path fill=\"%23ced4da\" d=\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\"/></svg>');\n  --focus-highlight-color: #228be6;\n  --icon-green-fill-color: #69db7c;\n  --default-bg-color: #121212;\n  --input-bg-color: #121212;\n  --input-border-color: #2e2e2e;\n  --input-hover-bg-color: #181818;\n  --input-label-color: #e9ecef;\n  --island-bg-color: #232329;\n  --keybinding-color: var(--color-gray-60);\n  --link-color: #4dabf7;\n  --overlay-bg-color: rgba(52, 58, 64, 0.12);\n  --popup-secondary-bg-color: #222;\n  --popup-text-color: #ced4da;\n  --popup-text-inverted-color: #2c2c2c;\n  --select-highlight-color: #4dabf7;\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --avatar-border-color: var(--color-gray-85);\n  --scrollbar-thumb: #343a40;\n  --scrollbar-thumb-hover: #495057;\n  --color-selection: #3530c4;\n  --color-icon-white: var(--color-gray-90);\n  --color-primary: #a8a5ff;\n  --color-primary-darker: #b2aeff;\n  --color-primary-darkest: #beb9ff;\n  --color-primary-light: #4f4d6f;\n  --color-primary-light-darker: #43415e;\n  --color-primary-hover: #bbb8ff;\n  --color-text-warning: var(--color-gray-80);\n  --color-danger: #ffa8a5;\n  --color-danger-dark: #672120;\n  --color-danger-darker: #8f2625;\n  --color-danger-darkest: #ac2b29;\n  --color-danger-text: #fbcbcc;\n  --color-danger-background: #fbcbcc;\n  --color-danger-icon-background: #672120;\n  --color-danger-color: #261919;\n  --color-danger-icon-color: #fbcbcc;\n  --color-warning-background: var(--color-warning);\n  --color-warning-icon-background: var(--color-warning-dark);\n  --color-warning-color: var(--color-gray-80);\n  --color-warning-icon-color: var(--color-gray-80);\n  --color-muted: var(--color-gray-80);\n  --color-muted-darker: var(--color-gray-60);\n  --color-muted-darkest: var(--color-gray-20);\n  --color-muted-background: var(--color-gray-40);\n  --color-muted-background-darker: var(--color-gray-20);\n  --color-promo: #d297ff;\n  --color-logo-text: #e2dfff;\n  --color-surface-high: hsl(245, 10%, 21%);\n  --color-surface-low: hsl(240, 8%, 15%);\n  --color-surface-mid: hsl(240 6% 10%);\n  --color-surface-lowest: hsl(0, 0%, 7%);\n  --color-on-surface: #e3e3e8;\n  --color-brand-hover: #bbb8ff;\n  --color-on-primary-container: #e0dfff;\n  --color-surface-primary-container: #403e6a;\n  --color-brand-active: #d0ccff;\n  --color-border-outline: #8e8d9c;\n  --color-border-outline-variant: #46464f;\n  --color-surface-primary-container: #403e6a;\n}\n\n.excalidraw .excalidraw-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n}\n.excalidraw .excalidraw-button svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .excalidraw-button:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .excalidraw-button:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .excalidraw-button.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .excalidraw-button.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .excalidraw-button.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCIuLi9jc3MvdGhlbWUuc2NzcyIsIkJ1dHRvbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzFLRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUFBO0FBQUE7RUFJQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFTQTtFQUNBO0VBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0VBTUE7RUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7RUFNQTtFQUNBO0VBQ0E7QUFBQTtBQUFBO0VBSUE7RUFDQTtFQUVBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQXhHQTtFQTFDRjtJQTJDSTtJQUNBO0lBQ0E7SUFDQTs7O0FBdUdBO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUFBO0FBQUE7RUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7RUFNQTtFQUVBO0VBQ0E7RUFHQTtFQUVBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUVBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOzs7QUN0UEY7RUZxREE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFJQTs7QUFNRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUlBOztBQUtBO0VBQ0U7O0FBTUY7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcbkBpbXBvcnQgXCIuL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC0tdGhlbWUtZmlsdGVyOiBub25lO1xuICAtLWJ1dHRvbi1kZXN0cnVjdGl2ZS1iZy1jb2xvcjogI3skb2MtcmVkLTF9O1xuICAtLWJ1dHRvbi1kZXN0cnVjdGl2ZS1jb2xvcjogI3skb2MtcmVkLTl9O1xuICAtLWJ1dHRvbi1ncmF5LTE6ICN7JG9jLWdyYXktMn07XG4gIC0tYnV0dG9uLWdyYXktMjogI3skb2MtZ3JheS00fTtcbiAgLS1idXR0b24tZ3JheS0zOiAjeyRvYy1ncmF5LTV9O1xuICAtLWJ1dHRvbi1zcGVjaWFsLWFjdGl2ZS1iZy1jb2xvcjogI3skb2MtZ3JlZW4tMH07XG4gIC0tZGlhbG9nLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS0yMCk7XG4gIC0tZHJvcGRvd24taWNvbjogdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyOTIuNFwiIGhlaWdodD1cIjI5Mi40XCIgdmlld0JveD1cIjAgMCAyOTIgMjkyXCI+PHBhdGggZD1cIk0yODcgMTk3TDE1OSA2OWMtNC0zLTgtNS0xMy01cy05IDItMTMgNUw1IDE5N2MtMyA0LTUgOC01IDEzczIgOSA1IDEzYzQgNCA4IDUgMTMgNWgyNTZjNSAwIDktMSAxMy01czUtOCA1LTEzLTEtOS01LTEzelwiLz48L3N2Zz4nKTtcbiAgLS1mb2N1cy1oaWdobGlnaHQtY29sb3I6ICN7JG9jLWJsdWUtMn07XG4gIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTtcbiAgLS1pY29uLWdyZWVuLWZpbGwtY29sb3I6ICN7JG9jLWdyZWVuLTl9O1xuICAtLWRlZmF1bHQtYmctY29sb3I6ICN7JG9jLXdoaXRlfTtcbiAgLS1pbnB1dC1iZy1jb2xvcjogI3skb2Mtd2hpdGV9O1xuICAtLWlucHV0LWJvcmRlci1jb2xvcjogI3skb2MtZ3JheS00fTtcbiAgLS1pbnB1dC1ob3Zlci1iZy1jb2xvcjogI3skb2MtZ3JheS0xfTtcbiAgLS1pbnB1dC1sYWJlbC1jb2xvcjogI3skb2MtZ3JheS03fTtcbiAgLS1pc2xhbmQtYmctY29sb3I6ICNmZmZmZmY7XG4gIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS00MCk7XG4gIC0tbGluay1jb2xvcjogI3skb2MtYmx1ZS03fTtcbiAgLS1vdmVybGF5LWJnLWNvbG9yOiAje3RyYW5zcGFyZW50aXplKCRvYy13aGl0ZSwgMC4xMil9O1xuICAtLXBvcHVwLWJnLWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAtLXBvcHVwLXNlY29uZGFyeS1iZy1jb2xvcjogI3skb2MtZ3JheS0xfTtcbiAgLS1wb3B1cC10ZXh0LWNvbG9yOiAjeyRvYy1ibGFja307XG4gIC0tcG9wdXAtdGV4dC1pbnZlcnRlZC1jb2xvcjogI3skb2Mtd2hpdGV9O1xuICAtLXNlbGVjdC1oaWdobGlnaHQtY29sb3I6ICN7JG9jLWJsdWUtNX07XG4gIC0tc2hhZG93LWlzbGFuZDogMHB4IDBweCAwLjkzMTAxNDI5OTM5MjcwMDJweCAwcHggcmdiYSgwLCAwLCAwLCAwLjE3KSxcbiAgICAwcHggMHB4IDMuMTI3MDgzMzAxNTQ0MTg5NXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxuICAgIDBweCA3cHggMTRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcblxuICAtLWJ1dHRvbi1ob3Zlci1iZzogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgLS1idXR0b24tYWN0aXZlLWJnOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuICAtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyOiB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICAtLWRlZmF1bHQtYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuXG4gIC0tZGVmYXVsdC1idXR0b24tc2l6ZTogMnJlbTtcbiAgLS1kZWZhdWx0LWljb24tc2l6ZTogMXJlbTtcbiAgLS1sZy1idXR0b24tc2l6ZTogMi4yNXJlbTtcbiAgLS1sZy1pY29uLXNpemU6IDFyZW07XG4gIC0tZWRpdG9yLWNvbnRhaW5lci1wYWRkaW5nOiAxcmVtO1xuXG4gIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOiAxOTIxcHgpIHtcbiAgICAtLWxnLWJ1dHRvbi1zaXplOiAyLjVyZW07XG4gICAgLS1sZy1pY29uLXNpemU6IDEuMjVyZW07XG4gICAgLS1kZWZhdWx0LWJ1dHRvbi1zaXplOiAyLjI1cmVtO1xuICAgIC0tZGVmYXVsdC1pY29uLXNpemU6IDEuMjVyZW07XG4gIH1cblxuICAtLXNjcm9sbGJhci10aHVtYjogdmFyKC0tYnV0dG9uLWdyYXktMik7XG4gIC0tc2Nyb2xsYmFyLXRodW1iLWhvdmVyOiB2YXIoLS1idXR0b24tZ3JheS0zKTtcblxuICAtLW1vZGFsLXNoYWRvdzogMHB4IDEwMHB4IDgwcHggcmdiYSgwLCAwLCAwLCAwLjA3KSxcbiAgICAwcHggNDEuNzc3NnB4IDMzLjQyMjFweCByZ2JhKDAsIDAsIDAsIDAuMDUwMzE5OCksXG4gICAgMHB4IDIyLjMzNjNweCAxNy44NjlweCByZ2JhKDAsIDAsIDAsIDAuMDQxNzI3NSksXG4gICAgMHB4IDEyLjUyMTZweCAxMC4wMTcycHggcmdiYSgwLCAwLCAwLCAwLjAzNSksXG4gICAgMHB4IDYuNjUwMXB4IDUuMzIwMDhweCByZ2JhKDAsIDAsIDAsIDAuMDI4MjcyNSksXG4gICAgMHB4IDIuNzY3MjZweCAyLjIxMzgxcHggcmdiYSgwLCAwLCAwLCAwLjAxOTY4MDIpO1xuICAtLWF2YXRhci1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyYXktMjApO1xuICAtLXNpZGViYXItc2hhZG93OiAwcHggMTAwcHggODBweCByZ2JhKDAsIDAsIDAsIDAuMDcpLFxuICAgIDBweCA0MS43Nzc2cHggMzMuNDIyMXB4IHJnYmEoMCwgMCwgMCwgMC4wNTAzMTk4KSxcbiAgICAwcHggMjIuMzM2M3B4IDE3Ljg2OXB4IHJnYmEoMCwgMCwgMCwgMC4wNDE3Mjc1KSxcbiAgICAwcHggMTIuNTIxNnB4IDEwLjAxNzJweCByZ2JhKDAsIDAsIDAsIDAuMDM1KSxcbiAgICAwcHggNi42NTAxcHggNS4zMjAwOHB4IHJnYmEoMCwgMCwgMCwgMC4wMjgyNzI1KSxcbiAgICAwcHggMi43NjcyNnB4IDIuMjEzODFweCByZ2JhKDAsIDAsIDAsIDAuMDE5NjgwMik7XG4gIC0tc2lkZWJhci1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtaGlnaCk7XG4gIC0tc2lkZWJhci1iZy1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgLS1saWJyYXJ5LWRyb3Bkb3duLXNoYWRvdzogMHB4IDE1cHggNnB4IHJnYmEoMCwgMCwgMCwgMC4wMSksXG4gICAgMHB4IDhweCA1cHggcmdiYSgwLCAwLCAwLCAwLjA1KSwgMHB4IDRweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA5KSxcbiAgICAwcHggMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMSksIDBweCAwcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcblxuICAtLXNwYWNlLWZhY3RvcjogMC4yNXJlbTtcbiAgLS10ZXh0LXByaW1hcnktY29sb3I6IHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpO1xuXG4gIC0tY29sb3Itc2VsZWN0aW9uOiAjNjk2NWRiO1xuXG4gIC0tY29sb3ItaWNvbi13aGl0ZTogI3skb2Mtd2hpdGV9O1xuXG4gIC0tY29sb3ItcHJpbWFyeTogIzY5NjVkYjtcbiAgLS1jb2xvci1wcmltYXJ5LWRhcmtlcjogIzViNTdkMTtcbiAgLS1jb2xvci1wcmltYXJ5LWRhcmtlc3Q6ICM0YTQ3YjE7XG4gIC0tY29sb3ItcHJpbWFyeS1saWdodDogI2UzZTJmZTtcbiAgLS1jb2xvci1wcmltYXJ5LWxpZ2h0LWRhcmtlcjogI2Q3ZDVmZjtcbiAgLS1jb2xvci1wcmltYXJ5LWhvdmVyOiAjNTc1M2QwO1xuXG4gIC0tY29sb3ItZ3JheS0xMDogI2Y1ZjVmNTtcbiAgLS1jb2xvci1ncmF5LTIwOiAjZWJlYmViO1xuICAtLWNvbG9yLWdyYXktMzA6ICNkNmQ2ZDY7XG4gIC0tY29sb3ItZ3JheS00MDogI2I4YjhiODtcbiAgLS1jb2xvci1ncmF5LTUwOiAjOTk5OTk5O1xuICAtLWNvbG9yLWdyYXktNjA6ICM3YTdhN2E7XG4gIC0tY29sb3ItZ3JheS03MDogIzVjNWM1YztcbiAgLS1jb2xvci1ncmF5LTgwOiAjM2QzZDNkO1xuICAtLWNvbG9yLWdyYXktODU6ICMyNDI0MjQ7XG4gIC0tY29sb3ItZ3JheS05MDogIzFlMWUxZTtcbiAgLS1jb2xvci1ncmF5LTEwMDogIzEyMTIxMjtcblxuICAtLWNvbG9yLXdhcm5pbmc6ICNmY2VlY2E7XG4gIC0tY29sb3Itd2FybmluZy1kYXJrOiAjZjVjMzU0O1xuICAtLWNvbG9yLXdhcm5pbmctZGFya2VyOiAjZjNhYjJjO1xuICAtLWNvbG9yLXdhcm5pbmctZGFya2VzdDogI2VjOGIxNDtcbiAgLS1jb2xvci10ZXh0LXdhcm5pbmc6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG5cbiAgLS1jb2xvci1kYW5nZXI6ICNkYjY5NjU7XG4gIC0tY29sb3ItZGFuZ2VyLWRhcms6ICNkYjY5NjU7XG4gIC0tY29sb3ItZGFuZ2VyLWRhcmtlcjogI2Q2NTU1MDtcbiAgLS1jb2xvci1kYW5nZXItZGFya2VzdDogI2QxNDEzYztcbiAgLS1jb2xvci1kYW5nZXItdGV4dDogYmxhY2s7XG5cbiAgLS1jb2xvci1kYW5nZXItYmFja2dyb3VuZDogI2ZmZjBmMDtcbiAgLS1jb2xvci1kYW5nZXItaWNvbi1iYWNrZ3JvdW5kOiAjZmZkYWQ2O1xuICAtLWNvbG9yLWRhbmdlci1jb2xvcjogIzcwMDAwMDtcbiAgLS1jb2xvci1kYW5nZXItaWNvbi1jb2xvcjogIzcwMDAwMDtcblxuICAtLWNvbG9yLXdhcm5pbmctYmFja2dyb3VuZDogdmFyKC0tY29sb3Itd2FybmluZyk7XG4gIC0tY29sb3Itd2FybmluZy1pY29uLWJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXdhcm5pbmctZGFyayk7XG4gIC0tY29sb3Itd2FybmluZy1jb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yKTtcbiAgLS1jb2xvci13YXJuaW5nLWljb24tY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG5cbiAgLS1jb2xvci1tdXRlZDogdmFyKC0tY29sb3ItZ3JheS0zMCk7XG4gIC0tY29sb3ItbXV0ZWQtZGFya2VyOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgLS1jb2xvci1tdXRlZC1kYXJrZXN0OiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG4gIC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZDogdmFyKC0tY29sb3ItZ3JheS04MCk7XG4gIC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZC1kYXJrZXI6IHZhcigtLWNvbG9yLWdyYXktMTAwKTtcblxuICAtLWNvbG9yLXByb21vOiAjZTcwMDc4O1xuICAtLWNvbG9yLXN1Y2Nlc3M6ICMyNjgwMjk7XG4gIC0tY29sb3Itc3VjY2Vzcy1saWdodGVyOiAjY2FmY2NjO1xuXG4gIC0tY29sb3ItbG9nby1pY29uOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgLS1jb2xvci1sb2dvLXRleHQ6ICMxOTAwNjQ7XG5cbiAgLS1ib3JkZXItcmFkaXVzLW1kOiAwLjM3NXJlbTtcbiAgLS1ib3JkZXItcmFkaXVzLWxnOiAwLjVyZW07XG5cbiAgLS1jb2xvci1zdXJmYWNlLWhpZ2g6IGhzbCgyNDQsIDEwMCUsIDk3JSk7XG4gIC0tY29sb3Itc3VyZmFjZS1taWQ6IGhzbCgyNDAgMjUlIDk2JSk7XG4gIC0tY29sb3Itc3VyZmFjZS1sb3c6IGhzbCgyNDAgMjUlIDk0JSk7XG4gIC0tY29sb3Itc3VyZmFjZS1sb3dlc3Q6ICNmZmZmZmY7XG4gIC0tY29sb3Itb24tc3VyZmFjZTogIzFiMWIxZjtcbiAgLS1jb2xvci1icmFuZC1ob3ZlcjogIzU3NTNkMDtcbiAgLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcjogIzAzMDA2NDtcbiAgLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyOiAjZTBkZmZmO1xuICAtLWNvbG9yLWJyYW5kLWFjdGl2ZTogIzQ0NDBiZjtcbiAgLS1jb2xvci1ib3JkZXItb3V0bGluZTogIzc2NzY4MDtcbiAgLS1jb2xvci1ib3JkZXItb3V0bGluZS12YXJpYW50OiAjYzVjNWQwO1xuICAtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXI6ICNlMGRmZmY7XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgJi50aGVtZS0tZGFyay1iYWNrZ3JvdW5kLW5vbmUge1xuICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICB9XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAtLXRoZW1lLWZpbHRlcjogI3skdGhlbWUtZmlsdGVyfTtcbiAgICAtLWJ1dHRvbi1kZXN0cnVjdGl2ZS1iZy1jb2xvcjogIzVhMDAwMDtcbiAgICAtLWJ1dHRvbi1kZXN0cnVjdGl2ZS1jb2xvcjogI3skb2MtcmVkLTN9O1xuXG4gICAgLS1idXR0b24tZ3JheS0xOiAjMzYzNjM2O1xuICAgIC0tYnV0dG9uLWdyYXktMjogIzI3MjcyNztcbiAgICAtLWJ1dHRvbi1ncmF5LTM6ICMyMjI7XG4gICAgLS1idXR0b24tc3BlY2lhbC1hY3RpdmUtYmctY29sb3I6ICMyMDQ2MjQ7XG4gICAgLS1kaWFsb2ctYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTgwKTtcbiAgICAtLWRyb3Bkb3duLWljb246IHVybCgnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjkyLjRcIiBoZWlnaHQ9XCIyOTIuNFwiIHZpZXdCb3g9XCIwIDAgMjkyIDI5MlwiPjxwYXRoIGZpbGw9XCIlMjNjZWQ0ZGFcIiBkPVwiTTI4NyAxOTdMMTU5IDY5Yy00LTMtOC01LTEzLTVzLTkgMi0xMyA1TDUgMTk3Yy0zIDQtNSA4LTUgMTNzMiA5IDUgMTNjNCA0IDggNSAxMyA1aDI1NmM1IDAgOS0xIDEzLTVzNS04IDUtMTMtMS05LTUtMTN6XCIvPjwvc3ZnPicpO1xuICAgIC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yOiAjeyRvYy1ibHVlLTZ9O1xuICAgIC0taWNvbi1ncmVlbi1maWxsLWNvbG9yOiAjeyRvYy1ncmVlbi00fTtcbiAgICAtLWRlZmF1bHQtYmctY29sb3I6ICMxMjEyMTI7XG4gICAgLS1pbnB1dC1iZy1jb2xvcjogIzEyMTIxMjtcbiAgICAtLWlucHV0LWJvcmRlci1jb2xvcjogIzJlMmUyZTtcbiAgICAtLWlucHV0LWhvdmVyLWJnLWNvbG9yOiAjMTgxODE4O1xuICAgIC0taW5wdXQtbGFiZWwtY29sb3I6ICN7JG9jLWdyYXktMn07XG4gICAgLS1pc2xhbmQtYmctY29sb3I6ICMyMzIzMjk7XG4gICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgICAtLWxpbmstY29sb3I6ICN7JG9jLWJsdWUtNH07XG4gICAgLS1vdmVybGF5LWJnLWNvbG9yOiAje3RyYW5zcGFyZW50aXplKCRvYy1ncmF5LTgsIDAuODgpfTtcbiAgICAtLXBvcHVwLXNlY29uZGFyeS1iZy1jb2xvcjogIzIyMjtcbiAgICAtLXBvcHVwLXRleHQtY29sb3I6ICN7JG9jLWdyYXktNH07XG4gICAgLS1wb3B1cC10ZXh0LWludmVydGVkLWNvbG9yOiAjMmMyYzJjO1xuICAgIC0tc2VsZWN0LWhpZ2hsaWdodC1jb2xvcjogI3skb2MtYmx1ZS00fTtcbiAgICAtLXNoYWRvdy1pc2xhbmQ6IDBweCAwcHggMC45MzEwMTQyOTkzOTI3MDAycHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNyksXG4gICAgICAwcHggMHB4IDMuMTI3MDgzMzAxNTQ0MTg5NXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMDgpLFxuICAgICAgMHB4IDdweCAxNHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuXG4gICAgLS1tb2RhbC1zaGFkb3c6IDBweCAxMDBweCA4MHB4IHJnYmEoMCwgMCwgMCwgMC4wNyksXG4gICAgICAwcHggNDEuNzc3NnB4IDMzLjQyMjFweCByZ2JhKDAsIDAsIDAsIDAuMDUwMzE5OCksXG4gICAgICAwcHggMjIuMzM2M3B4IDE3Ljg2OXB4IHJnYmEoMCwgMCwgMCwgMC4wNDE3Mjc1KSxcbiAgICAgIDBweCAxMi41MjE2cHggMTAuMDE3MnB4IHJnYmEoMCwgMCwgMCwgMC4wMzUpLFxuICAgICAgMHB4IDYuNjUwMXB4IDUuMzIwMDhweCByZ2JhKDAsIDAsIDAsIDAuMDI4MjcyNSksXG4gICAgICAwcHggMi43NjcyNnB4IDIuMjEzODFweCByZ2JhKDAsIDAsIDAsIDAuMDE5NjgwMik7XG4gICAgLS1hdmF0YXItYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTg1KTtcblxuICAgIC0tc2Nyb2xsYmFyLXRodW1iOiAjeyRvYy1ncmF5LTh9O1xuICAgIC0tc2Nyb2xsYmFyLXRodW1iLWhvdmVyOiAjeyRvYy1ncmF5LTd9O1xuXG4gICAgLy8gd2lsbCBiZSBpbnZlcnRlZCB0byBhIGxpZ2h0ZXIgY29sb3IuXG4gICAgLS1jb2xvci1zZWxlY3Rpb246ICMzNTMwYzQ7XG5cbiAgICAtLWNvbG9yLWljb24td2hpdGU6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuXG4gICAgLS1jb2xvci1wcmltYXJ5OiAjYThhNWZmO1xuICAgIC0tY29sb3ItcHJpbWFyeS1kYXJrZXI6ICNiMmFlZmY7XG4gICAgLS1jb2xvci1wcmltYXJ5LWRhcmtlc3Q6ICNiZWI5ZmY7XG4gICAgLS1jb2xvci1wcmltYXJ5LWxpZ2h0OiAjNGY0ZDZmO1xuICAgIC0tY29sb3ItcHJpbWFyeS1saWdodC1kYXJrZXI6ICM0MzQxNWU7XG4gICAgLS1jb2xvci1wcmltYXJ5LWhvdmVyOiAjYmJiOGZmO1xuXG4gICAgLS1jb2xvci10ZXh0LXdhcm5pbmc6IHZhcigtLWNvbG9yLWdyYXktODApO1xuXG4gICAgLS1jb2xvci1kYW5nZXI6ICNmZmE4YTU7XG4gICAgLS1jb2xvci1kYW5nZXItZGFyazogIzY3MjEyMDtcbiAgICAtLWNvbG9yLWRhbmdlci1kYXJrZXI6ICM4ZjI2MjU7XG4gICAgLS1jb2xvci1kYW5nZXItZGFya2VzdDogI2FjMmIyOTtcbiAgICAtLWNvbG9yLWRhbmdlci10ZXh0OiAjZmJjYmNjO1xuXG4gICAgLS1jb2xvci1kYW5nZXItYmFja2dyb3VuZDogI2ZiY2JjYztcbiAgICAtLWNvbG9yLWRhbmdlci1pY29uLWJhY2tncm91bmQ6ICM2NzIxMjA7XG4gICAgLS1jb2xvci1kYW5nZXItY29sb3I6ICMyNjE5MTk7XG4gICAgLS1jb2xvci1kYW5nZXItaWNvbi1jb2xvcjogI2ZiY2JjYztcblxuICAgIC0tY29sb3Itd2FybmluZy1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci13YXJuaW5nKTtcbiAgICAtLWNvbG9yLXdhcm5pbmctaWNvbi1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmspO1xuICAgIC0tY29sb3Itd2FybmluZy1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS04MCk7XG4gICAgLS1jb2xvci13YXJuaW5nLWljb24tY29sb3I6IHZhcigtLWNvbG9yLWdyYXktODApO1xuXG4gICAgLS1jb2xvci1tdXRlZDogdmFyKC0tY29sb3ItZ3JheS04MCk7XG4gICAgLS1jb2xvci1tdXRlZC1kYXJrZXI6IHZhcigtLWNvbG9yLWdyYXktNjApO1xuICAgIC0tY29sb3ItbXV0ZWQtZGFya2VzdDogdmFyKC0tY29sb3ItZ3JheS0yMCk7XG4gICAgLS1jb2xvci1tdXRlZC1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1ncmF5LTQwKTtcbiAgICAtLWNvbG9yLW11dGVkLWJhY2tncm91bmQtZGFya2VyOiB2YXIoLS1jb2xvci1ncmF5LTIwKTtcblxuICAgIC0tY29sb3ItcHJvbW86ICNkMjk3ZmY7XG5cbiAgICAtLWNvbG9yLWxvZ28tdGV4dDogI2UyZGZmZjtcblxuICAgIC0tY29sb3Itc3VyZmFjZS1oaWdoOiBoc2woMjQ1LCAxMCUsIDIxJSk7XG4gICAgLS1jb2xvci1zdXJmYWNlLWxvdzogaHNsKDI0MCwgOCUsIDE1JSk7XG4gICAgLS1jb2xvci1zdXJmYWNlLW1pZDogaHNsKDI0MCA2JSAxMCUpO1xuICAgIC0tY29sb3Itc3VyZmFjZS1sb3dlc3Q6IGhzbCgwLCAwJSwgNyUpO1xuICAgIC0tY29sb3Itb24tc3VyZmFjZTogI2UzZTNlODtcbiAgICAtLWNvbG9yLWJyYW5kLWhvdmVyOiAjYmJiOGZmO1xuICAgIC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXI6ICNlMGRmZmY7XG4gICAgLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyOiAjNDAzZTZhO1xuICAgIC0tY29sb3ItYnJhbmQtYWN0aXZlOiAjZDBjY2ZmO1xuICAgIC0tY29sb3ItYm9yZGVyLW91dGxpbmU6ICM4ZThkOWM7XG4gICAgLS1jb2xvci1ib3JkZXItb3V0bGluZS12YXJpYW50OiAjNDY0NjRmO1xuICAgIC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcjogIzQwM2U2YTtcbiAgfVxufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy90aGVtZVwiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5leGNhbGlkcmF3LWJ1dHRvbiB7XG4gICAgQGluY2x1ZGUgb3V0bGluZUJ1dHRvblN0eWxlcztcbiAgfVxufVxuIl19 */", "import clsx from \"clsx\";\nimport React from \"react\";\nimport { composeEventHandlers } from \"../utils\";\nimport \"./Button.scss\";\n\ninterface ButtonProps\n  extends React.DetailedHTMLProps<\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    HTMLButtonElement\n  > {\n  type?: \"button\" | \"submit\" | \"reset\";\n  onSelect: () => any;\n  /** whether button is in active state */\n  selected?: boolean;\n  children: React.ReactNode;\n  className?: string;\n}\n\n/**\n * A generic button component that follows Excalidraw's design system.\n * Style can be customised using `className` or `style` prop.\n * Accepts all props that a regular `button` element accepts.\n */\nexport const Button = ({\n  type = \"button\",\n  onSelect,\n  selected,\n  children,\n  className = \"\",\n  ...rest\n}: ButtonProps) => {\n  return (\n    <button\n      onClick={composeEventHandlers(rest.onClick, (event) => {\n        onSelect();\n      })}\n      type={type}\n      className={clsx(\"excalidraw-button\", className, { selected })}\n      {...rest}\n    >\n      {children}\n    </button>\n  );\n};\n", "import clsx from \"clsx\";\nimport { useContext } from \"react\";\nimport { t } from \"../../i18n\";\nimport { useDevice } from \"../App\";\nimport { SidebarPropsContext } from \"./common\";\nimport { CloseIcon, PinIcon } from \"../icons\";\nimport { Tooltip } from \"../Tooltip\";\nimport { Button } from \"../Button\";\n\nexport const SidebarHeader = ({\n  children,\n  className,\n}: {\n  children?: React.ReactNode;\n  className?: string;\n}) => {\n  const device = useDevice();\n  const props = useContext(SidebarPropsContext);\n\n  const renderDockButton = !!(\n    device.editor.canFitSidebar && props.shouldRenderDockButton\n  );\n\n  return (\n    <div\n      className={clsx(\"sidebar__header\", className)}\n      data-testid=\"sidebar-header\"\n    >\n      {children}\n      <div className=\"sidebar__header__buttons\">\n        {renderDockButton && (\n          <Tooltip label={t(\"labels.sidebarLock\")}>\n            <Button\n              onSelect={() => props.onDock?.(!props.docked)}\n              selected={!!props.docked}\n              className=\"sidebar__dock\"\n              data-testid=\"sidebar-dock\"\n              aria-label={t(\"labels.sidebarLock\")}\n            >\n              {PinIcon}\n            </Button>\n          </Tooltip>\n        )}\n        <Button\n          data-testid=\"sidebar-close\"\n          className=\"sidebar__close\"\n          onSelect={props.onCloseRequest}\n          aria-label={t(\"buttons.close\")}\n        >\n          {CloseIcon}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nSidebarHeader.displayName = \"SidebarHeader\";\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .sidebar-trigger {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  border: none;\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\n  background-color: var(--color-surface-low);\n  width: auto;\n  height: var(--lg-button-size);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  line-height: 0;\n  font-size: 0.75rem;\n  letter-spacing: 0.4px;\n}\n.excalidraw .sidebar-trigger svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .sidebar-trigger:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .sidebar-trigger:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .sidebar-trigger.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .sidebar-trigger.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .sidebar-trigger.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw .sidebar-trigger:active {\n  box-shadow: 0 0 0 1px var(--color-brand-active);\n}\n.excalidraw .sidebar-trigger svg {\n  width: var(--lg-icon-size);\n  height: var(--lg-icon-size);\n}\n.excalidraw .sidebar-trigger__label-element {\n  align-self: flex-start;\n}\n.excalidraw .default-sidebar-trigger .sidebar-trigger__label {\n  display: block;\n  white-space: nowrap;\n}\n.excalidraw.excalidraw--mobile .default-sidebar-trigger .sidebar-trigger__label {\n  display: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvU2lkZWJhciIsInNvdXJjZXMiOlsiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2NzcyIsIlNpZGViYXJUcmlnZ2VyLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtBO0VEcURBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQXlGQTtFQUNBO0VBQ0E7RUMxSkU7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7RUFDQTs7QUR1REY7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUlBOztBQU1GO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBSUE7O0FBS0E7RUFDRTs7QUFNRjtFQUNFOztBQW1ESjtFQUNFOztBQ2pKQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5zaWRlYmFyLXRyaWdnZXIge1xuICAgIEBpbmNsdWRlIG91dGxpbmVCdXR0b25TdHlsZXM7XG4gICAgQGluY2x1ZGUgZmlsbGVkQnV0dG9uT25DYW52YXM7XG5cbiAgICB3aWR0aDogYXV0bztcbiAgICBoZWlnaHQ6IHZhcigtLWxnLWJ1dHRvbi1zaXplKTtcblxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDAuNXJlbTtcblxuICAgIGxpbmUtaGVpZ2h0OiAwO1xuXG4gICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjRweDtcblxuICAgIHN2ZyB7XG4gICAgICB3aWR0aDogdmFyKC0tbGctaWNvbi1zaXplKTtcbiAgICAgIGhlaWdodDogdmFyKC0tbGctaWNvbi1zaXplKTtcbiAgICB9XG5cbiAgICAmX19sYWJlbC1lbGVtZW50IHtcbiAgICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gICAgfVxuICB9XG5cbiAgLmRlZmF1bHQtc2lkZWJhci10cmlnZ2VyIC5zaWRlYmFyLXRyaWdnZXJfX2xhYmVsIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB9XG5cbiAgJi5leGNhbGlkcmF3LS1tb2JpbGUgLmRlZmF1bHQtc2lkZWJhci10cmlnZ2VyIC5zaWRlYmFyLXRyaWdnZXJfX2xhYmVsIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG4iXX0= */", "import { useExcalidrawSetAppState } from \"../App\";\nimport { SidebarTriggerProps } from \"./common\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport clsx from \"clsx\";\n\nimport \"./SidebarTrigger.scss\";\n\nexport const SidebarTrigger = ({\n  name,\n  tab,\n  icon,\n  title,\n  children,\n  onToggle,\n  className,\n  style,\n}: SidebarTriggerProps) => {\n  const setAppState = useExcalidrawSetAppState();\n  const appState = useUIAppState();\n\n  return (\n    <label title={title} className=\"sidebar-trigger__label-element\">\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        onChange={(event) => {\n          document\n            .querySelector(\".layer-ui__wrapper\")\n            ?.classList.remove(\"animate\");\n          const isOpen = event.target.checked;\n          setAppState({ openSidebar: isOpen ? { name, tab } : null });\n          onToggle?.(isOpen);\n        }}\n        checked={appState.openSidebar?.name === name}\n        aria-label={title}\n        aria-keyshortcuts=\"0\"\n      />\n      <div className={clsx(\"sidebar-trigger\", className)} style={style}>\n        {icon && <div>{icon}</div>}\n        {children && <div className=\"sidebar-trigger__label\">{children}</div>}\n      </div>\n    </label>\n  );\n};\nSidebarTrigger.displayName = \"SidebarTrigger\";\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\n\nexport const SidebarTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & Omit<\n  React.RefAttributes<HTMLDivElement>,\n  \"onSelect\"\n>) => {\n  return (\n    <RadixTabs.List className=\"sidebar-triggers\" {...rest}>\n      {children}\n    </RadixTabs.List>\n  );\n};\nSidebarTabTriggers.displayName = \"SidebarTabTriggers\";\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\nimport { SidebarTabName } from \"../../types\";\n\nexport const SidebarTabTrigger = ({\n  children,\n  tab,\n  onSelect,\n  ...rest\n}: {\n  children: React.ReactNode;\n  tab: SidebarTabName;\n  onSelect?: React.ReactEventHandler<HTMLButtonElement> | undefined;\n} & Omit<React.HTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  return (\n    <RadixTabs.Trigger value={tab} asChild onSelect={onSelect}>\n      <button\n        type={\"button\"}\n        className={`excalidraw-button sidebar-tab-trigger`}\n        {...rest}\n      >\n        {children}\n      </button>\n    </RadixTabs.Trigger>\n  );\n};\nSidebarTabTrigger.displayName = \"SidebarTabTrigger\";\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useExcalidrawSetAppState } from \"../App\";\n\nexport const SidebarTabs = ({\n  children,\n  ...rest\n}: {\n  children: React.ReactNode;\n} & Omit<React.RefAttributes<HTMLDivElement>, \"onSelect\">) => {\n  const appState = useUIAppState();\n  const setAppState = useExcalidrawSetAppState();\n\n  if (!appState.openSidebar) {\n    return null;\n  }\n\n  const { name } = appState.openSidebar;\n\n  return (\n    <RadixTabs.Root\n      className=\"sidebar-tabs-root\"\n      value={appState.openSidebar.tab}\n      onValueChange={(tab) =>\n        setAppState((state) => ({\n          ...state,\n          openSidebar: { ...state.openSidebar, name, tab },\n        }))\n      }\n      {...rest}\n    >\n      {children}\n    </RadixTabs.Root>\n  );\n};\nSidebarTabs.displayName = \"SidebarTabs\";\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\nimport { SidebarTabName } from \"../../types\";\n\nexport const SidebarTab = ({\n  tab,\n  children,\n  ...rest\n}: {\n  tab: SidebarTabName;\n  children: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.Content {...rest} value={tab}>\n      {children}\n    </RadixTabs.Content>\n  );\n};\nSidebarTab.displayName = \"SidebarTab\";\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .sidebar {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 5;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  background-color: var(--sidebar-bg-color);\n  box-shadow: var(--sidebar-shadow);\n  pointer-events: var(--ui-pointerEvents);\n  overflow: hidden;\n  border-radius: 0;\n  width: calc(302px - var(--space-factor) * 2);\n  border-left: 1px solid var(--sidebar-border-color);\n}\n:root[dir=rtl] .excalidraw .sidebar {\n  left: 0;\n  right: auto;\n}\n.excalidraw .sidebar--docked {\n  box-shadow: none;\n}\n:root[dir=rtl] .excalidraw .sidebar {\n  border-right: 1px solid var(--sidebar-border-color);\n  border-left: 0;\n}\n.excalidraw .sidebar__header {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  padding: 1rem 0.75rem;\n  position: relative;\n}\n.excalidraw .sidebar__header::after {\n  content: \"\";\n  width: calc(100% - 1.5rem);\n  height: 1px;\n  background: var(--sidebar-border-color);\n  position: absolute;\n  bottom: -1px;\n}\n.excalidraw .sidebar__header__buttons {\n  gap: 0;\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n}\n.excalidraw .sidebar__header__buttons button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  --button-bg: transparent;\n  border: 0 !important;\n  width: var(--lg-button-size);\n  height: var(--lg-button-size);\n  padding: 0;\n}\n.excalidraw .sidebar__header__buttons button svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .sidebar__header__buttons button:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .sidebar__header__buttons button:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .sidebar__header__buttons button.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .sidebar__header__buttons button.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .sidebar__header__buttons button.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw .sidebar__header__buttons button svg {\n  width: var(--lg-icon-size);\n  height: var(--lg-icon-size);\n}\n.excalidraw .sidebar__header__buttons button:hover {\n  background: var(--button-hover-bg, var(--island-bg-color));\n}\n.excalidraw .sidebar__header__buttons .sidebar__dock.selected svg {\n  stroke: var(--color-primary);\n  fill: var(--color-primary);\n}\n.excalidraw .sidebar-tabs-root {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  padding: 1rem 0;\n}\n.excalidraw .sidebar-tabs-root [role=tabpanel] {\n  flex: 1;\n  outline: none;\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  outline: none;\n}\n.excalidraw .sidebar-tabs-root [role=tabpanel][data-state=inactive] {\n  display: none !important;\n}\n.excalidraw .sidebar-tabs-root [role=tablist] {\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));\n}\n.excalidraw .sidebar-tabs-root > .sidebar__header {\n  padding-top: 0;\n  padding-bottom: 1rem;\n}\n.excalidraw .sidebar-tab-trigger {\n  --button-width: auto;\n  --button-bg: transparent;\n  --button-hover-bg: transparent;\n  --button-active-bg: var(--color-primary);\n  --button-hover-color: var(--color-primary);\n  --button-hover-border: var(--color-primary);\n}\n.excalidraw .sidebar-tab-trigger[data-state=active] {\n  --button-bg: var(--color-primary);\n  --button-hover-bg: var(--color-primary-darker);\n  --button-hover-color: var(--color-icon-white);\n  --button-border: var(--color-primary);\n  color: var(--color-icon-white);\n}\n.excalidraw .default-sidebar {\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .default-sidebar .sidebar-triggers {\n  display: flex;\n  gap: 0;\n  padding: 2px;\n  margin-top: -3px;\n  margin-bottom: -3px;\n  border: 1px solid var(--sidebar-border-color);\n  background: var(--default-bg-color);\n  border-radius: 0.625rem;\n}\n.excalidraw .default-sidebar .sidebar-triggers .sidebar-tab-trigger {\n  height: var(--lg-button-size);\n  width: var(--lg-button-size);\n  border: none;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvU2lkZWJhciIsInNvdXJjZXMiOlsiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2NzcyIsIlNpZGViYXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUN6S0E7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQVdBO0VBQ0E7RUFDQTtFQUVBOztBQWJBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOztBQVNGO0VBQ0U7RUFDQTs7QUFNSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RURiRjtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUNDSTtFQUNBO0VBRUE7RUFDQTtFQUNBOztBREpKO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFJQTs7QUFNRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUlBOztBQUtBO0VBQ0U7O0FBTUY7RUFDRTs7QUNsQ0E7RUFDRTtFQUNBOztBQUdGO0VBQ0U7O0FBS0Y7RUFDRTtFQUNBOztBQU9OO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQU1KO0VBQ0U7RUFDQTs7QUFFQTtFQUdFO0VBQ0E7RUFDQSxTQUpVO0VBT1Y7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFFQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yXCI7XG5AaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5zaWRlYmFyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBib3R0b206IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgei1pbmRleDogNTtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2lkZWJhci1iZy1jb2xvcik7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tc2lkZWJhci1zaGFkb3cpO1xuXG4gICAgcG9pbnRlci1ldmVudHM6IHZhcigtLXVpLXBvaW50ZXJFdmVudHMpO1xuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgbGVmdDogMDtcbiAgICAgIHJpZ2h0OiBhdXRvO1xuICAgIH1cblxuICAgICYtLWRvY2tlZCB7XG4gICAgICBib3gtc2hhZG93OiBub25lO1xuICAgIH1cblxuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICB3aWR0aDogY2FsYygjeyRyaWdodC1zaWRlYmFyLXdpZHRofSAtIHZhcigtLXNwYWNlLWZhY3RvcikgKiAyKTtcblxuICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdmFyKC0tc2lkZWJhci1ib3JkZXItY29sb3IpO1xuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tc2lkZWJhci1ib3JkZXItY29sb3IpO1xuICAgICAgYm9yZGVyLWxlZnQ6IDA7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzaWRlYmFyIGhlYWRlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAuc2lkZWJhcl9faGVhZGVyIHtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgcGFkZGluZzogMXJlbSAwLjc1cmVtO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICY6OmFmdGVyIHtcbiAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICB3aWR0aDogY2FsYygxMDAlIC0gMS41cmVtKTtcbiAgICAgIGhlaWdodDogMXB4O1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tc2lkZWJhci1ib3JkZXItY29sb3IpO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAtMXB4O1xuICAgIH1cbiAgfVxuXG4gIC5zaWRlYmFyX19oZWFkZXJfX2J1dHRvbnMge1xuICAgIGdhcDogMDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG5cbiAgICBidXR0b24ge1xuICAgICAgQGluY2x1ZGUgb3V0bGluZUJ1dHRvblN0eWxlcztcbiAgICAgIC0tYnV0dG9uLWJnOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlcjogMCAhaW1wb3J0YW50O1xuXG4gICAgICB3aWR0aDogdmFyKC0tbGctYnV0dG9uLXNpemUpO1xuICAgICAgaGVpZ2h0OiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG4gICAgICBwYWRkaW5nOiAwO1xuXG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogdmFyKC0tbGctaWNvbi1zaXplKTtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1sZy1pY29uLXNpemUpO1xuICAgICAgfVxuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuc2lkZWJhcl9fZG9jay5zZWxlY3RlZCB7XG4gICAgICBzdmcge1xuICAgICAgICBzdHJva2U6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICBmaWxsOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHNpZGViYXIgdGFicyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAuc2lkZWJhci10YWJzLXJvb3Qge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBwYWRkaW5nOiAxcmVtIDA7XG5cbiAgICBbcm9sZT1cInRhYnBhbmVsXCJdIHtcbiAgICAgIGZsZXg6IDE7XG4gICAgICBvdXRsaW5lOiBub25lO1xuXG4gICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgb3V0bGluZTogbm9uZTtcbiAgICB9XG5cbiAgICBbcm9sZT1cInRhYnBhbmVsXCJdW2RhdGEtc3RhdGU9XCJpbmFjdGl2ZVwiXSB7XG4gICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgW3JvbGU9XCJ0YWJsaXN0XCJdIHtcbiAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICBnYXA6IDFyZW07XG4gICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDAsIDFmcikpO1xuICAgIH1cbiAgfVxuXG4gIC5zaWRlYmFyLXRhYnMtcm9vdCA+IC5zaWRlYmFyX19oZWFkZXIge1xuICAgIHBhZGRpbmctdG9wOiAwO1xuICAgIHBhZGRpbmctYm90dG9tOiAxcmVtO1xuICB9XG5cbiAgLnNpZGViYXItdGFiLXRyaWdnZXIge1xuICAgIC0tYnV0dG9uLXdpZHRoOiBhdXRvO1xuICAgIC0tYnV0dG9uLWJnOiB0cmFuc3BhcmVudDtcbiAgICAtLWJ1dHRvbi1ob3Zlci1iZzogdHJhbnNwYXJlbnQ7XG4gICAgLS1idXR0b24tYWN0aXZlLWJnOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgLS1idXR0b24taG92ZXItYm9yZGVyOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcblxuICAgICZbZGF0YS1zdGF0ZT1cImFjdGl2ZVwiXSB7XG4gICAgICAtLWJ1dHRvbi1iZzogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgICAtLWJ1dHRvbi1ob3Zlci1iZzogdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXIpO1xuICAgICAgLS1idXR0b24taG92ZXItY29sb3I6IHZhcigtLWNvbG9yLWljb24td2hpdGUpO1xuICAgICAgLS1idXR0b24tYm9yZGVyOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1pY29uLXdoaXRlKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGRlZmF1bHQgc2lkZWJhciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAuZGVmYXVsdC1zaWRlYmFyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAuc2lkZWJhci10cmlnZ2VycyB7XG4gICAgICAkcGFkZGluZzogMnB4O1xuICAgICAgJGJvcmRlcjogMXB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogMDtcbiAgICAgIHBhZGRpbmc6ICRwYWRkaW5nO1xuICAgICAgLy8gb2Zmc2V0IGJ5IHBhZGRpbmcgKyBib3JkZXIgdG8gdmVydGljYWxseSBjZW50ZXIgdGhlIGxpc3Qgd2l0aCBzaWJsaW5nXG4gICAgICAvLyBidXR0b25zIChib3RoIGZyb20gdG9wIGFuZCBib3RvdG0sIGR1ZSB0byBmbGV4IGxheW91dClcbiAgICAgIG1hcmdpbi10b3A6IC0jeyRwYWRkaW5nICsgJGJvcmRlcn07XG4gICAgICBtYXJnaW4tYm90dG9tOiAtI3skcGFkZGluZyArICRib3JkZXJ9O1xuICAgICAgYm9yZGVyOiAkYm9yZGVyIHNvbGlkIHZhcigtLXNpZGViYXItYm9yZGVyLWNvbG9yKTtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWRlZmF1bHQtYmctY29sb3IpO1xuICAgICAgYm9yZGVyLXJhZGl1czogMC42MjVyZW07XG5cbiAgICAgIC5zaWRlYmFyLXRhYi10cmlnZ2VyIHtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG4gICAgICAgIHdpZHRoOiB2YXIoLS1sZy1idXR0b24tc2l6ZSk7XG5cbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */", "import React, {\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n  useCallback,\n} from \"react\";\nimport { Island } from \"../Island\";\nimport { atom, useSetAtom } from \"jotai\";\nimport { jotaiScope } from \"../../jotai\";\nimport {\n  SidebarPropsContext,\n  SidebarProps,\n  SidebarPropsContextValue,\n} from \"./common\";\nimport { SidebarHeader } from \"./SidebarHeader\";\nimport clsx from \"clsx\";\nimport { useDevice, useExcalidrawSetAppState } from \"../App\";\nimport { updateObject } from \"../../utils\";\nimport { KEYS } from \"../../keys\";\nimport { EVENT } from \"../../constants\";\nimport { SidebarTrigger } from \"./SidebarTrigger\";\nimport { SidebarTabTriggers } from \"./SidebarTabTriggers\";\nimport { SidebarTabTrigger } from \"./SidebarTabTrigger\";\nimport { SidebarTabs } from \"./SidebarTabs\";\nimport { SidebarTab } from \"./SidebarTab\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\n\nimport \"./Sidebar.scss\";\n\n/**\n * Flags whether the currently rendered Sidebar is docked or not, for use\n * in upstream components that need to act on this (e.g. LayerUI to shift the\n * UI). We use an atom because of potential host app sidebars (for the default\n * sidebar we could just read from appState.defaultSidebarDockedPreference).\n *\n * Since we can only render one Sidebar at a time, we can use a simple flag.\n */\nexport const isSidebarDockedAtom = atom(false);\n\nexport const SidebarInner = forwardRef(\n  (\n    {\n      name,\n      children,\n      onDock,\n      docked,\n      className,\n      ...rest\n    }: SidebarProps & Omit<React.RefAttributes<HTMLDivElement>, \"onSelect\">,\n    ref: React.ForwardedRef<HTMLDivElement>,\n  ) => {\n    if (import.meta.env.DEV && onDock && docked == null) {\n      console.warn(\n        \"Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`\",\n      );\n    }\n\n    const setAppState = useExcalidrawSetAppState();\n\n    const setIsSidebarDockedAtom = useSetAtom(isSidebarDockedAtom, jotaiScope);\n\n    useLayoutEffect(() => {\n      setIsSidebarDockedAtom(!!docked);\n      return () => {\n        setIsSidebarDockedAtom(false);\n      };\n    }, [setIsSidebarDockedAtom, docked]);\n\n    const headerPropsRef = useRef<SidebarPropsContextValue>(\n      {} as SidebarPropsContextValue,\n    );\n    headerPropsRef.current.onCloseRequest = () => {\n      setAppState({ openSidebar: null });\n    };\n    headerPropsRef.current.onDock = (isDocked) => onDock?.(isDocked);\n    // renew the ref object if the following props change since we want to\n    // rerender. We can't pass down as component props manually because\n    // the <Sidebar.Header/> can be rendered upstream.\n    headerPropsRef.current = updateObject(headerPropsRef.current, {\n      docked,\n      // explicit prop to rerender on update\n      shouldRenderDockButton: !!onDock && docked != null,\n    });\n\n    const islandRef = useRef<HTMLDivElement>(null);\n\n    useImperativeHandle(ref, () => {\n      return islandRef.current!;\n    });\n\n    const device = useDevice();\n\n    const closeLibrary = useCallback(() => {\n      const isDialogOpen = !!document.querySelector(\".Dialog\");\n\n      // Prevent closing if any dialog is open\n      if (isDialogOpen) {\n        return;\n      }\n      setAppState({ openSidebar: null });\n    }, [setAppState]);\n\n    useOutsideClick(\n      islandRef,\n      useCallback(\n        (event) => {\n          // If click on the library icon, do nothing so that LibraryButton\n          // can toggle library menu\n          if ((event.target as Element).closest(\".sidebar-trigger\")) {\n            return;\n          }\n          if (!docked || !device.editor.canFitSidebar) {\n            closeLibrary();\n          }\n        },\n        [closeLibrary, docked, device.editor.canFitSidebar],\n      ),\n    );\n\n    useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === KEYS.ESCAPE &&\n          (!docked || !device.editor.canFitSidebar)\n        ) {\n          closeLibrary();\n        }\n      };\n      document.addEventListener(EVENT.KEYDOWN, handleKeyDown);\n      return () => {\n        document.removeEventListener(EVENT.KEYDOWN, handleKeyDown);\n      };\n    }, [closeLibrary, docked, device.editor.canFitSidebar]);\n\n    return (\n      <Island\n        {...rest}\n        className={clsx(\"sidebar\", { \"sidebar--docked\": docked }, className)}\n        ref={islandRef}\n      >\n        <SidebarPropsContext.Provider value={headerPropsRef.current}>\n          {children}\n        </SidebarPropsContext.Provider>\n      </Island>\n    );\n  },\n);\nSidebarInner.displayName = \"SidebarInner\";\n\nexport const Sidebar = Object.assign(\n  forwardRef((props: SidebarProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n    const appState = useUIAppState();\n\n    const { onStateChange } = props;\n\n    const refPrevOpenSidebar = useRef(appState.openSidebar);\n    useEffect(() => {\n      if (\n        // closing sidebar\n        ((!appState.openSidebar &&\n          refPrevOpenSidebar?.current?.name === props.name) ||\n          // opening current sidebar\n          (appState.openSidebar?.name === props.name &&\n            refPrevOpenSidebar?.current?.name !== props.name) ||\n          // switching tabs or switching to a different sidebar\n          refPrevOpenSidebar.current?.name === props.name) &&\n        appState.openSidebar !== refPrevOpenSidebar.current\n      ) {\n        onStateChange?.(\n          appState.openSidebar?.name !== props.name\n            ? null\n            : appState.openSidebar,\n        );\n      }\n      refPrevOpenSidebar.current = appState.openSidebar;\n    }, [appState.openSidebar, onStateChange, props.name]);\n\n    const [mounted, setMounted] = useState(false);\n    useLayoutEffect(() => {\n      setMounted(true);\n      return () => setMounted(false);\n    }, []);\n\n    // We want to render in the next tick (hence `mounted` flag) so that it's\n    // guaranteed to happen after unmount of the previous sidebar (in case the\n    // previous sidebar is mounted after the next one). This is necessary to\n    // prevent flicker of subcomponents that support fallbacks\n    // (e.g. SidebarHeader). This is because we're using flags to determine\n    // whether prefer the fallback component or not (otherwise both will render\n    // initially), and the flag won't be reset in time if the unmount order\n    // it not correct.\n    //\n    // Alternative, and more general solution would be to namespace the fallback\n    // HoC so that state is not shared between subcomponents when the wrapping\n    // component is of the same type (e.g. Sidebar -> SidebarHeader).\n    const shouldRender = mounted && appState.openSidebar?.name === props.name;\n\n    if (!shouldRender) {\n      return null;\n    }\n\n    return <SidebarInner {...props} ref={ref} key={props.name} />;\n  }),\n  {\n    Header: SidebarHeader,\n    TabTriggers: SidebarTabTriggers,\n    TabTrigger: SidebarTabTrigger,\n    Tabs: SidebarTabs,\n    Tab: SidebarTab,\n    Trigger: SidebarTrigger,\n  },\n);\nSidebar.displayName = \"Sidebar\";\n", ".excalidraw .ActiveFile .ActiveFile__fileName {\n  display: flex;\n  align-items: center;\n}\n.excalidraw .ActiveFile .ActiveFile__fileName span {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  width: 9.3em;\n}\n.excalidraw .ActiveFile .ActiveFile__fileName svg {\n  width: 1.15em;\n  margin-inline-end: 0.3em;\n  transform: scaleY(0.9);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvbWFpbi1tZW51Iiwic291cmNlcyI6WyJEZWZhdWx0SXRlbXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLkFjdGl2ZUZpbGUge1xuICAgIC5BY3RpdmVGaWxlX19maWxlTmFtZSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICAgc3BhbiB7XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICB3aWR0aDogOS4zZW07XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIHdpZHRoOiAxLjE1ZW07XG4gICAgICAgIG1hcmdpbi1pbmxpbmUtZW5kOiAwLjNlbTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZVkoMC45KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import { atom, useAtom } from \"jotai\";\nimport { actionClearCanvas } from \"../actions\";\nimport { t } from \"../i18n\";\nimport { jotaiScope } from \"../jotai\";\nimport { useExcalidrawActionManager } from \"./App\";\nimport ConfirmDialog from \"./ConfirmDialog\";\n\nexport const activeConfirmDialogAtom = atom<\"clearCanvas\" | null>(null);\n\nexport const ActiveConfirmDialog = () => {\n  const [activeConfirmDialog, setActiveConfirmDialog] = useAtom(\n    activeConfirmDialogAtom,\n    jotaiScope,\n  );\n  const actionManager = useExcalidrawActionManager();\n\n  if (!activeConfirmDialog) {\n    return null;\n  }\n\n  if (activeConfirmDialog === \"clearCanvas\") {\n    return (\n      <ConfirmDialog\n        onConfirm={() => {\n          actionManager.executeAction(actionClearCanvas);\n          setActiveConfirmDialog(null);\n        }}\n        onCancel={() => setActiveConfirmDialog(null)}\n        title={t(\"clearCanvasDialog.title\")}\n      >\n        <p className=\"clear-canvas__content\"> {t(\"alerts.clearReset\")}</p>\n      </ConfirmDialog>\n    );\n  }\n\n  return null;\n};\n", "import { atom } from \"jotai\";\nimport { jotaiStore } from \"../../jotai\";\nimport React from \"react\";\n\nexport type OverwriteConfirmState =\n  | {\n      active: true;\n      title: string;\n      description: React.ReactNode;\n      actionLabel: string;\n      color: \"danger\" | \"warning\";\n\n      onClose: () => void;\n      onConfirm: () => void;\n      onReject: () => void;\n    }\n  | { active: false };\n\nexport const overwriteConfirmStateAtom = atom<OverwriteConfirmState>({\n  active: false,\n});\n\nexport async function openConfirmModal({\n  title,\n  description,\n  actionLabel,\n  color,\n}: {\n  title: string;\n  description: React.ReactNode;\n  actionLabel: string;\n  color: \"danger\" | \"warning\";\n}) {\n  return new Promise<boolean>((resolve) => {\n    jotaiStore.set(overwriteConfirmStateAtom, {\n      active: true,\n      onConfirm: () => resolve(true),\n      onClose: () => resolve(false),\n      onReject: () => resolve(false),\n      title,\n      description,\n      actionLabel,\n      color,\n    });\n  });\n}\n", "import { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport { useI18n } from \"../../i18n\";\nimport {\n  useExcalidrawSetAppState,\n  useExcalidrawActionManager,\n  useExcalidrawElements,\n  useAppProps,\n} from \"../App\";\nimport {\n  ExportIcon,\n  ExportImageIcon,\n  HelpIcon,\n  LoadIcon,\n  MoonIcon,\n  save,\n  SunIcon,\n  TrashIcon,\n  usersIcon,\n} from \"../icons\";\nimport { GithubIcon, DiscordIcon, XBrandIcon } from \"../icons\";\nimport DropdownMenuItem from \"../dropdownMenu/DropdownMenuItem\";\nimport DropdownMenuItemLink from \"../dropdownMenu/DropdownMenuItemLink\";\nimport {\n  actionClearCanvas,\n  actionLoadScene,\n  actionSaveToActiveFile,\n  actionShortcuts,\n  actionToggleTheme,\n} from \"../../actions\";\n\nimport \"./DefaultItems.scss\";\nimport clsx from \"clsx\";\nimport { useSetAtom } from \"jotai\";\nimport { activeConfirmDialogAtom } from \"../ActiveConfirmDialog\";\nimport { jotaiScope } from \"../../jotai\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { openConfirmModal } from \"../OverwriteConfirm/OverwriteConfirmState\";\nimport Trans from \"../Trans\";\n\nexport const LoadScene = () => {\n  const { t } = useI18n();\n  const actionManager = useExcalidrawActionManager();\n  const elements = useExcalidrawElements();\n\n  if (!actionManager.isActionEnabled(actionLoadScene)) {\n    return null;\n  }\n\n  const handleSelect = async () => {\n    if (\n      !elements.length ||\n      (await openConfirmModal({\n        title: t(\"overwriteConfirm.modal.loadFromFile.title\"),\n        actionLabel: t(\"overwriteConfirm.modal.loadFromFile.button\"),\n        color: \"warning\",\n        description: (\n          <Trans\n            i18nKey=\"overwriteConfirm.modal.loadFromFile.description\"\n            bold={(text) => <strong>{text}</strong>}\n            br={() => <br />}\n          />\n        ),\n      }))\n    ) {\n      actionManager.executeAction(actionLoadScene);\n    }\n  };\n\n  return (\n    <DropdownMenuItem\n      icon={LoadIcon}\n      onSelect={handleSelect}\n      data-testid=\"load-button\"\n      shortcut={getShortcutFromShortcutName(\"loadScene\")}\n      aria-label={t(\"buttons.load\")}\n    >\n      {t(\"buttons.load\")}\n    </DropdownMenuItem>\n  );\n};\nLoadScene.displayName = \"LoadScene\";\n\nexport const SaveToActiveFile = () => {\n  const { t } = useI18n();\n  const actionManager = useExcalidrawActionManager();\n\n  if (!actionManager.isActionEnabled(actionSaveToActiveFile)) {\n    return null;\n  }\n\n  return (\n    <DropdownMenuItem\n      shortcut={getShortcutFromShortcutName(\"saveScene\")}\n      data-testid=\"save-button\"\n      onSelect={() => actionManager.executeAction(actionSaveToActiveFile)}\n      icon={save}\n      aria-label={`${t(\"buttons.save\")}`}\n    >{`${t(\"buttons.save\")}`}</DropdownMenuItem>\n  );\n};\nSaveToActiveFile.displayName = \"SaveToActiveFile\";\n\nexport const SaveAsImage = () => {\n  const setAppState = useExcalidrawSetAppState();\n  const { t } = useI18n();\n  return (\n    <DropdownMenuItem\n      icon={ExportImageIcon}\n      data-testid=\"image-export-button\"\n      onSelect={() => setAppState({ openDialog: { name: \"imageExport\" } })}\n      shortcut={getShortcutFromShortcutName(\"imageExport\")}\n      aria-label={t(\"buttons.exportImage\")}\n    >\n      {t(\"buttons.exportImage\")}\n    </DropdownMenuItem>\n  );\n};\nSaveAsImage.displayName = \"SaveAsImage\";\n\nexport const Help = () => {\n  const { t } = useI18n();\n\n  const actionManager = useExcalidrawActionManager();\n\n  return (\n    <DropdownMenuItem\n      data-testid=\"help-menu-item\"\n      icon={HelpIcon}\n      onSelect={() => actionManager.executeAction(actionShortcuts)}\n      shortcut=\"?\"\n      aria-label={t(\"helpDialog.title\")}\n    >\n      {t(\"helpDialog.title\")}\n    </DropdownMenuItem>\n  );\n};\nHelp.displayName = \"Help\";\n\nexport const ClearCanvas = () => {\n  const { t } = useI18n();\n\n  const setActiveConfirmDialog = useSetAtom(\n    activeConfirmDialogAtom,\n    jotaiScope,\n  );\n  const actionManager = useExcalidrawActionManager();\n\n  if (!actionManager.isActionEnabled(actionClearCanvas)) {\n    return null;\n  }\n\n  return (\n    <DropdownMenuItem\n      icon={TrashIcon}\n      onSelect={() => setActiveConfirmDialog(\"clearCanvas\")}\n      data-testid=\"clear-canvas-button\"\n      aria-label={t(\"buttons.clearReset\")}\n    >\n      {t(\"buttons.clearReset\")}\n    </DropdownMenuItem>\n  );\n};\nClearCanvas.displayName = \"ClearCanvas\";\n\nexport const ToggleTheme = () => {\n  const { t } = useI18n();\n  const appState = useUIAppState();\n  const actionManager = useExcalidrawActionManager();\n\n  if (!actionManager.isActionEnabled(actionToggleTheme)) {\n    return null;\n  }\n\n  return (\n    <DropdownMenuItem\n      onSelect={(event) => {\n        // do not close the menu when changing theme\n        event.preventDefault();\n        return actionManager.executeAction(actionToggleTheme);\n      }}\n      icon={appState.theme === \"dark\" ? SunIcon : MoonIcon}\n      data-testid=\"toggle-dark-mode\"\n      shortcut={getShortcutFromShortcutName(\"toggleTheme\")}\n      aria-label={\n        appState.theme === \"dark\"\n          ? t(\"buttons.lightMode\")\n          : t(\"buttons.darkMode\")\n      }\n    >\n      {appState.theme === \"dark\"\n        ? t(\"buttons.lightMode\")\n        : t(\"buttons.darkMode\")}\n    </DropdownMenuItem>\n  );\n};\nToggleTheme.displayName = \"ToggleTheme\";\n\nexport const ChangeCanvasBackground = () => {\n  const { t } = useI18n();\n  const appState = useUIAppState();\n  const actionManager = useExcalidrawActionManager();\n  const appProps = useAppProps();\n\n  if (\n    appState.viewModeEnabled ||\n    !appProps.UIOptions.canvasActions.changeViewBackgroundColor\n  ) {\n    return null;\n  }\n  return (\n    <div style={{ marginTop: \"0.5rem\" }}>\n      <div\n        data-testid=\"canvas-background-label\"\n        style={{ fontSize: \".75rem\", marginBottom: \".5rem\" }}\n      >\n        {t(\"labels.canvasBackground\")}\n      </div>\n      <div style={{ padding: \"0 0.625rem\" }}>\n        {actionManager.renderAction(\"changeViewBackgroundColor\")}\n      </div>\n    </div>\n  );\n};\nChangeCanvasBackground.displayName = \"ChangeCanvasBackground\";\n\nexport const Export = () => {\n  const { t } = useI18n();\n  const setAppState = useExcalidrawSetAppState();\n  return (\n    <DropdownMenuItem\n      icon={ExportIcon}\n      onSelect={() => {\n        setAppState({ openDialog: { name: \"jsonExport\" } });\n      }}\n      data-testid=\"json-export-button\"\n      aria-label={t(\"buttons.export\")}\n    >\n      {t(\"buttons.export\")}\n    </DropdownMenuItem>\n  );\n};\nExport.displayName = \"Export\";\n\nexport const Socials = () => {\n  const { t } = useI18n();\n\n  return (\n    <>\n      <DropdownMenuItemLink\n        icon={GithubIcon}\n        href=\"https://github.com/excalidraw/excalidraw\"\n        aria-label=\"GitHub\"\n      >\n        GitHub\n      </DropdownMenuItemLink>\n      <DropdownMenuItemLink\n        icon={XBrandIcon}\n        href=\"https://x.com/excalidraw\"\n        aria-label=\"X\"\n      >\n        {t(\"labels.followUs\")}\n      </DropdownMenuItemLink>\n      <DropdownMenuItemLink\n        icon={DiscordIcon}\n        href=\"https://discord.gg/UexuTaE\"\n        aria-label=\"Discord\"\n      >\n        {t(\"labels.discordChat\")}\n      </DropdownMenuItemLink>\n    </>\n  );\n};\nSocials.displayName = \"Socials\";\n\nexport const LiveCollaborationTrigger = ({\n  onSelect,\n  isCollaborating,\n}: {\n  onSelect: () => void;\n  isCollaborating: boolean;\n}) => {\n  const { t } = useI18n();\n  return (\n    <DropdownMenuItem\n      data-testid=\"collab-button\"\n      icon={usersIcon}\n      className={clsx({\n        \"active-collab\": isCollaborating,\n      })}\n      onSelect={onSelect}\n    >\n      {t(\"labels.liveCollaboration\")}\n    </DropdownMenuItem>\n  );\n};\n\nLiveCollaborationTrigger.displayName = \"LiveCollaborationTrigger\";\n", "import { atom, useAtom } from \"jotai\";\nimport React, { useLayoutEffect, useRef } from \"react\";\nimport { useTunnels } from \"../../context/tunnels\";\n\nexport const withInternalFallback = <P,>(\n  componentName: string,\n  Component: React.FC<P>,\n) => {\n  const renderAtom = atom(0);\n\n  const WrapperComponent: React.FC<\n    P & {\n      __fallback?: boolean;\n    }\n  > = (props) => {\n    const { jotaiScope } = useTunnels();\n    // for rerenders\n    const [, setCounter] = useAtom(renderAtom, jotaiScope);\n    // for initial & subsequent renders. Tracked as component state\n    // due to excalidraw multi-instance scanerios.\n    const metaRef = useRef({\n      // flag set on initial render to tell the fallback component to skip the\n      // render until mount counter are initialized. This is because the counter\n      // is initialized in an effect, and thus we could end rendering both\n      // components at the same time until counter is initialized.\n      preferHost: false,\n      counter: 0,\n    });\n\n    useLayoutEffect(() => {\n      const meta = metaRef.current;\n      setCounter((c) => {\n        const next = c + 1;\n        meta.counter = next;\n\n        return next;\n      });\n      return () => {\n        setCounter((c) => {\n          const next = c - 1;\n          meta.counter = next;\n          if (!next) {\n            meta.preferHost = false;\n          }\n          return next;\n        });\n      };\n    }, [setCounter]);\n\n    if (!props.__fallback) {\n      metaRef.current.preferHost = true;\n    }\n\n    // ensure we don't render fallback and host components at the same time\n    if (\n      // either before the counters are initialized\n      (!metaRef.current.counter &&\n        props.__fallback &&\n        metaRef.current.preferHost) ||\n      // or after the counters are initialized, and both are rendered\n      // (this is the default when host renders as well)\n      (metaRef.current.counter > 1 && props.__fallback)\n    ) {\n      return null;\n    }\n\n    return <Component {...props} />;\n  };\n\n  WrapperComponent.displayName = componentName;\n\n  return WrapperComponent;\n};\n", "import React from \"react\";\nimport { useDevice, useExcalidrawSetAppState } from \"../App\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\n\nimport * as DefaultItems from \"./DefaultItems\";\n\nimport { UserList } from \"../UserList\";\nimport { t } from \"../../i18n\";\nimport { HamburgerMenuIcon } from \"../icons\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { composeEventHandlers } from \"../../utils\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\n\nconst MainMenu = Object.assign(\n  withInternalFallback(\n    \"MainMenu\",\n    ({\n      children,\n      onSelect,\n    }: {\n      children?: React.ReactNode;\n      /**\n       * Called when any menu item is selected (clicked on).\n       */\n      onSelect?: (event: Event) => void;\n    }) => {\n      const { MainMenuTunnel } = useTunnels();\n      const device = useDevice();\n      const appState = useUIAppState();\n      const setAppState = useExcalidrawSetAppState();\n      const onClickOutside = device.editor.isMobile\n        ? undefined\n        : () => setAppState({ openMenu: null });\n\n      return (\n        <MainMenuTunnel.In>\n          <DropdownMenu open={appState.openMenu === \"canvas\"}>\n            <DropdownMenu.Trigger\n              onToggle={() => {\n                setAppState({\n                  openMenu: appState.openMenu === \"canvas\" ? null : \"canvas\",\n                });\n              }}\n              data-testid=\"main-menu-trigger\"\n              className=\"main-menu-trigger\"\n            >\n              {HamburgerMenuIcon}\n            </DropdownMenu.Trigger>\n            <DropdownMenu.Content\n              onClickOutside={onClickOutside}\n              onSelect={composeEventHandlers(onSelect, () => {\n                setAppState({ openMenu: null });\n              })}\n            >\n              {children}\n              {device.editor.isMobile && appState.collaborators.size > 0 && (\n                <fieldset className=\"UserList-Wrapper\">\n                  <legend>{t(\"labels.collaborators\")}</legend>\n                  <UserList\n                    mobile={true}\n                    collaborators={appState.collaborators}\n                    userToFollow={appState.userToFollow?.socketId || null}\n                  />\n                </fieldset>\n              )}\n            </DropdownMenu.Content>\n          </DropdownMenu>\n        </MainMenuTunnel.In>\n      );\n    },\n  ),\n  {\n    Trigger: DropdownMenu.Trigger,\n    Item: DropdownMenu.Item,\n    ItemLink: DropdownMenu.ItemLink,\n    ItemCustom: DropdownMenu.ItemCustom,\n    Group: DropdownMenu.Group,\n    Separator: DropdownMenu.Separator,\n    DefaultItems,\n  },\n);\n\nexport default MainMenu;\n", "import React from \"react\";\nimport { FilledButton } from \"../FilledButton\";\nimport { useExcalidrawActionManager, useExcalidrawSetAppState } from \"../App\";\nimport { actionSaveFileToDisk } from \"../../actions\";\nimport { useI18n } from \"../../i18n\";\nimport { actionChangeExportEmbedScene } from \"../../actions/actionExport\";\n\nexport type ActionProps = {\n  title: string;\n  children: React.ReactNode;\n  actionLabel: string;\n  onClick: () => void;\n};\n\nexport const Action = ({\n  title,\n  children,\n  actionLabel,\n  onClick,\n}: ActionProps) => {\n  return (\n    <div className=\"OverwriteConfirm__Actions__Action\">\n      <h4>{title}</h4>\n      <div className=\"OverwriteConfirm__Actions__Action__content\">\n        {children}\n      </div>\n      <FilledButton\n        variant=\"outlined\"\n        color=\"muted\"\n        label={actionLabel}\n        size=\"large\"\n        fullWidth\n        onClick={onClick}\n      />\n    </div>\n  );\n};\n\nexport const ExportToImage = () => {\n  const { t } = useI18n();\n  const actionManager = useExcalidrawActionManager();\n  const setAppState = useExcalidrawSetAppState();\n\n  return (\n    <Action\n      title={t(\"overwriteConfirm.action.exportToImage.title\")}\n      actionLabel={t(\"overwriteConfirm.action.exportToImage.button\")}\n      onClick={() => {\n        actionManager.executeAction(actionChangeExportEmbedScene, \"ui\", true);\n        setAppState({ openDialog: { name: \"imageExport\" } });\n      }}\n    >\n      {t(\"overwriteConfirm.action.exportToImage.description\")}\n    </Action>\n  );\n};\n\nexport const SaveToDisk = () => {\n  const { t } = useI18n();\n  const actionManager = useExcalidrawActionManager();\n\n  return (\n    <Action\n      title={t(\"overwriteConfirm.action.saveToDisk.title\")}\n      actionLabel={t(\"overwriteConfirm.action.saveToDisk.button\")}\n      onClick={() => {\n        actionManager.executeAction(actionSaveFileToDisk, \"ui\");\n      }}\n    >\n      {t(\"overwriteConfirm.action.saveToDisk.description\")}\n    </Action>\n  );\n};\n\nconst Actions = Object.assign(\n  ({ children }: { children: React.ReactNode }) => {\n    return <div className=\"OverwriteConfirm__Actions\">{children}</div>;\n  },\n  {\n    ExportToImage,\n    SaveToDisk,\n  },\n);\n\nexport { Actions };\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .OverwriteConfirm {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.75rem;\n  isolation: isolate;\n}\n.excalidraw .OverwriteConfirm h3 {\n  margin: 0;\n  font-weight: 700;\n  font-size: 1.3125rem;\n  line-height: 130%;\n  align-self: flex-start;\n  color: var(--text-primary-color);\n}\n.excalidraw .OverwriteConfirm__Description {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  gap: 1rem;\n  padding: 2.5rem;\n  background: var(--color-danger-background);\n  border-radius: 0.5rem;\n  font-family: \"Assistant\";\n  font-style: normal;\n  font-weight: 400;\n  font-size: 1rem;\n  line-height: 150%;\n  color: var(--color-danger-color);\n}\n.excalidraw--mobile.excalidraw .OverwriteConfirm__Description {\n  flex-direction: column;\n  text-align: center;\n}\n\n.excalidraw .OverwriteConfirm__Description__spacer {\n  flex-grow: 1;\n}\n.excalidraw .OverwriteConfirm__Description__icon {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2.5rem;\n  background: var(--color-danger-icon-background);\n  width: 3.5rem;\n  height: 3.5rem;\n  padding: 0.75rem;\n}\n.excalidraw .OverwriteConfirm__Description__icon svg {\n  color: var(--color-danger-icon-color);\n  width: 1.5rem;\n  height: 1.5rem;\n}\n.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning {\n  background: var(--color-warning-background);\n  color: var(--color-warning-color);\n}\n.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon {\n  background: var(--color-warning-icon-background);\n  flex: 0 0 auto;\n}\n.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon svg {\n  color: var(--color-warning-icon-color);\n}\n.excalidraw .OverwriteConfirm__Actions {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-items: stretch;\n  justify-content: center;\n  gap: 1.5rem;\n}\n.excalidraw--mobile.excalidraw .OverwriteConfirm__Actions {\n  flex-direction: column;\n}\n\n.excalidraw .OverwriteConfirm__Actions__Action {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1.5rem;\n  gap: 0.75rem;\n  flex-basis: 50%;\n  flex-grow: 0;\n}\n.excalidraw .OverwriteConfirm__Actions__Action__content {\n  height: 100%;\n  font-size: 0.875rem;\n  text-align: center;\n}\n.excalidraw .OverwriteConfirm__Actions__Action h4 {\n  font-weight: 700;\n  font-size: 1.125rem;\n  line-height: 130%;\n  margin: 0;\n  color: var(--text-primary-color);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvT3ZlcndyaXRlQ29uZmlybSIsInNvdXJjZXMiOlsiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2NzcyIsIk92ZXJ3cml0ZUNvbmZpcm0uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMxS0E7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOztBQUdGO0VBQ0U7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBT0E7RUFFQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBOztBRDNDSztFQzRCSDtFQUNBOzs7QUFnQkY7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBTVI7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FEekZLO0VDNEZIOzs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBRUE7RUFFQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4uZXhjYWxpZHJhdyB7XG4gIC5PdmVyd3JpdGVDb25maXJtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDAuNzVyZW07XG4gICAgaXNvbGF0aW9uOiBpc29sYXRlO1xuXG4gICAgaDMge1xuICAgICAgbWFyZ2luOiAwO1xuXG4gICAgICBmb250LXdlaWdodDogNzAwO1xuICAgICAgZm9udC1zaXplOiAxLjMxMjVyZW07XG4gICAgICBsaW5lLWhlaWdodDogMTMwJTtcbiAgICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG5cbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICAgIH1cblxuICAgICZfX0Rlc2NyaXB0aW9uIHtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgZ2FwOiAxcmVtO1xuXG4gICAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgcGFkZGluZzogMi41cmVtO1xuXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1kYW5nZXItYmFja2dyb3VuZCk7XG4gICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XG5cbiAgICAgIGZvbnQtZmFtaWx5OiBcIkFzc2lzdGFudFwiO1xuICAgICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAxNTAlO1xuXG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyLWNvbG9yKTtcblxuICAgICAgJl9fc3BhY2VyIHtcbiAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgfVxuXG4gICAgICAmX19pY29uIHtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDIuNXJlbTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItZGFuZ2VyLWljb24tYmFja2dyb3VuZCk7XG4gICAgICAgIHdpZHRoOiAzLjVyZW07XG4gICAgICAgIGhlaWdodDogMy41cmVtO1xuXG4gICAgICAgIHBhZGRpbmc6IDAuNzVyZW07XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZGFuZ2VyLWljb24tY29sb3IpO1xuICAgICAgICAgIHdpZHRoOiAxLjVyZW07XG4gICAgICAgICAgaGVpZ2h0OiAxLjVyZW07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJi5PdmVyd3JpdGVDb25maXJtX19EZXNjcmlwdGlvbi0tY29sb3Itd2FybmluZyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXdhcm5pbmctYmFja2dyb3VuZCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci13YXJuaW5nLWNvbG9yKTtcblxuICAgICAgICAuT3ZlcndyaXRlQ29uZmlybV9fRGVzY3JpcHRpb25fX2ljb24ge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXdhcm5pbmctaWNvbi1iYWNrZ3JvdW5kKTtcbiAgICAgICAgICBmbGV4OiAwIDAgYXV0bztcblxuICAgICAgICAgIHN2ZyB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itd2FybmluZy1pY29uLWNvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmX19BY3Rpb25zIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICBqdXN0aWZ5LWl0ZW1zOiBzdHJldGNoO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBnYXA6IDEuNXJlbTtcblxuICAgICAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAmX19BY3Rpb24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAxLjVyZW07XG4gICAgICAgIGdhcDogMC43NXJlbTtcbiAgICAgICAgZmxleC1iYXNpczogNTAlO1xuICAgICAgICBmbGV4LWdyb3c6IDA7XG5cbiAgICAgICAgJl9fY29udGVudCB7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaDQge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxLjEyNXJlbTtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMTMwJTtcblxuICAgICAgICAgIG1hcmdpbjogMDtcblxuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */", "import React from \"react\";\nimport { useAtom } from \"jotai\";\n\nimport { useTunnels } from \"../../context/tunnels\";\nimport { jotaiScope } from \"../../jotai\";\nimport { Dialog } from \"../Dialog\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { overwriteConfirmStateAtom } from \"./OverwriteConfirmState\";\n\nimport { FilledButton } from \"../FilledButton\";\nimport { alertTriangleIcon } from \"../icons\";\nimport { Actions, Action } from \"./OverwriteConfirmActions\";\nimport \"./OverwriteConfirm.scss\";\n\nexport type OverwriteConfirmDialogProps = {\n  children: React.ReactNode;\n};\n\nconst OverwriteConfirmDialog = Object.assign(\n  withInternalFallback(\n    \"OverwriteConfirmDialog\",\n    ({ children }: OverwriteConfirmDialogProps) => {\n      const { OverwriteConfirmDialogTunnel } = useTunnels();\n      const [overwriteConfirmState, setState] = useAtom(\n        overwriteConfirmStateAtom,\n        jotaiScope,\n      );\n\n      if (!overwriteConfirmState.active) {\n        return null;\n      }\n\n      const handleClose = () => {\n        overwriteConfirmState.onClose();\n        setState((state) => ({ ...state, active: false }));\n      };\n\n      const handleConfirm = () => {\n        overwriteConfirmState.onConfirm();\n        setState((state) => ({ ...state, active: false }));\n      };\n\n      return (\n        <OverwriteConfirmDialogTunnel.In>\n          <Dialog onCloseRequest={handleClose} title={false} size={916}>\n            <div className=\"OverwriteConfirm\">\n              <h3>{overwriteConfirmState.title}</h3>\n              <div\n                className={`OverwriteConfirm__Description OverwriteConfirm__Description--color-${overwriteConfirmState.color}`}\n              >\n                <div className=\"OverwriteConfirm__Description__icon\">\n                  {alertTriangleIcon}\n                </div>\n                <div>{overwriteConfirmState.description}</div>\n                <div className=\"OverwriteConfirm__Description__spacer\"></div>\n                <FilledButton\n                  color={overwriteConfirmState.color}\n                  size=\"large\"\n                  label={overwriteConfirmState.actionLabel}\n                  onClick={handleConfirm}\n                />\n              </div>\n              <Actions>{children}</Actions>\n            </div>\n          </Dialog>\n        </OverwriteConfirmDialogTunnel.In>\n      );\n    },\n  ),\n  {\n    Actions,\n    Action,\n  },\n);\n\nexport { OverwriteConfirmDialog };\n", "import clsx from \"clsx\";\nimport { DEFAULT_SIDEBAR, LIBRARY_SIDEBAR_TAB } from \"../constants\";\nimport { useTunnels } from \"../context/tunnels\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport { t } from \"../i18n\";\nimport { MarkOptional, Merge } from \"../utility-types\";\nimport { composeEventHandlers } from \"../utils\";\nimport { useExcalidrawSetAppState } from \"./App\";\nimport { withInternalFallback } from \"./hoc/withInternalFallback\";\nimport { LibraryMenu } from \"./LibraryMenu\";\nimport { SidebarProps, SidebarTriggerProps } from \"./Sidebar/common\";\nimport { Sidebar } from \"./Sidebar/Sidebar\";\n\nconst DefaultSidebarTrigger = withInternalFallback(\n  \"DefaultSidebarTrigger\",\n  (\n    props: Omit<SidebarTriggerProps, \"name\"> &\n      React.HTMLAttributes<HTMLDivElement>,\n  ) => {\n    const { DefaultSidebarTriggerTunnel } = useTunnels();\n    return (\n      <DefaultSidebarTriggerTunnel.In>\n        <Sidebar.Trigger\n          {...props}\n          className=\"default-sidebar-trigger\"\n          name={DEFAULT_SIDEBAR.name}\n        />\n      </DefaultSidebarTriggerTunnel.In>\n    );\n  },\n);\nDefaultSidebarTrigger.displayName = \"DefaultSidebarTrigger\";\n\nconst DefaultTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & React.HTMLAttributes<HTMLDivElement>) => {\n  const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n  return (\n    <DefaultSidebarTabTriggersTunnel.In>\n      <Sidebar.TabTriggers {...rest}>{children}</Sidebar.TabTriggers>\n    </DefaultSidebarTabTriggersTunnel.In>\n  );\n};\nDefaultTabTriggers.displayName = \"DefaultTabTriggers\";\n\nexport const DefaultSidebar = Object.assign(\n  withInternalFallback(\n    \"DefaultSidebar\",\n    ({\n      children,\n      className,\n      onDock,\n      docked,\n      ...rest\n    }: Merge<\n      MarkOptional<Omit<SidebarProps, \"name\">, \"children\">,\n      {\n        /** pass `false` to disable docking */\n        onDock?: SidebarProps[\"onDock\"] | false;\n      }\n    >) => {\n      const appState = useUIAppState();\n      const setAppState = useExcalidrawSetAppState();\n\n      const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n\n      return (\n        <Sidebar\n          {...rest}\n          name=\"default\"\n          key=\"default\"\n          className={clsx(\"default-sidebar\", className)}\n          docked={docked ?? appState.defaultSidebarDockedPreference}\n          onDock={\n            // `onDock=false` disables docking.\n            // if `docked` passed, but no onDock passed, disable manual docking.\n            onDock === false || (!onDock && docked != null)\n              ? undefined\n              : // compose to allow the host app to listen on default behavior\n                composeEventHandlers(onDock, (docked) => {\n                  setAppState({ defaultSidebarDockedPreference: docked });\n                })\n          }\n        >\n          <Sidebar.Tabs>\n            <Sidebar.Header>\n              {rest.__fallback && (\n                <div\n                  style={{\n                    color: \"var(--color-primary)\",\n                    fontSize: \"1.2em\",\n                    fontWeight: \"bold\",\n                    textOverflow: \"ellipsis\",\n                    overflow: \"hidden\",\n                    whiteSpace: \"nowrap\",\n                    paddingRight: \"1em\",\n                  }}\n                >\n                  {t(\"toolBar.library\")}\n                </div>\n              )}\n              <DefaultSidebarTabTriggersTunnel.Out />\n            </Sidebar.Header>\n            <Sidebar.Tab tab={LIBRARY_SIDEBAR_TAB}>\n              <LibraryMenu />\n            </Sidebar.Tab>\n            {children}\n          </Sidebar.Tabs>\n        </Sidebar>\n      );\n    },\n  ),\n  {\n    Trigger: DefaultSidebarTrigger,\n    TabTriggers: DefaultTabTriggers,\n  },\n);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .layer-ui__wrapper.animate {\n  transition: width 0.1s ease-in-out;\n}\n.excalidraw .layer-ui__wrapper {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: var(--zIndex-layerUI);\n}\n.excalidraw .layer-ui__wrapper__top-right {\n  display: flex;\n  gap: 0.75rem;\n}\n.excalidraw .layer-ui__wrapper__footer {\n  width: 100%;\n}\n.excalidraw .layer-ui__wrapper__footer-right {\n  z-index: 100;\n  display: flex;\n}\n.excalidraw .layer-ui__wrapper .zen-mode-transition {\n  transition: transform 0.5s ease-in-out;\n}\n:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left {\n  transform: translate(-999px, 0);\n}\n:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right {\n  transform: translate(999px, 0);\n}\n:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left {\n  transform: translate(999px, 0);\n}\n:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right {\n  transform: translate(-999px, 0);\n}\n.excalidraw .layer-ui__wrapper .zen-mode-transition.layer-ui__wrapper__footer-left--transition-bottom {\n  transform: translate(0, 92px);\n}\n.excalidraw .layer-ui__wrapper .disable-zen-mode {\n  padding: 10px;\n  position: absolute;\n  bottom: 0;\n  opacity: 0;\n  visibility: hidden;\n  transition: visibility 0s linear 0s, opacity 0.5s;\n  font-family: var(--ui-font);\n  font-size: 0.75rem;\n  font-weight: 500;\n  line-height: 1;\n  border-radius: var(--border-radius-lg);\n  border: 1px solid var(--default-border-color);\n  background-color: var(--island-bg-color);\n  color: var(--text-primary-color);\n}\n[dir=ltr] .excalidraw .layer-ui__wrapper .disable-zen-mode {\n  right: 1rem;\n}\n[dir=rtl] .excalidraw .layer-ui__wrapper .disable-zen-mode {\n  left: 1rem;\n}\n.excalidraw .layer-ui__wrapper .disable-zen-mode:hover {\n  background-color: var(--button-hover-bg);\n}\n.excalidraw .layer-ui__wrapper .disable-zen-mode:active {\n  border-color: var(--color-primary);\n}\n.excalidraw .layer-ui__wrapper .disable-zen-mode--visible {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0s linear 300ms, opacity 0.5s;\n  transition-delay: 0.8s;\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-left > *,\n.excalidraw .layer-ui__wrapper .footer-center > *,\n.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right {\n  margin-top: auto;\n  margin-bottom: auto;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJMYXllclVJLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDektBO0VBQ0U7O0FBRUY7RUFNRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOztBQUVBO0VBQ0U7RUFDQTs7QUFJSjtFQUNFOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQU9BO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7O0FBbEJBO0VBQ0U7O0FBRUY7RUFDRTs7QUFnQkY7RUFDRTs7QUFFRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFPRjtBQUFBO0FBQUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvclwiO1xuQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAubGF5ZXItdWlfX3dyYXBwZXIuYW5pbWF0ZSB7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC4xcyBlYXNlLWluLW91dDtcbiAgfVxuICAubGF5ZXItdWlfX3dyYXBwZXIge1xuICAgIC8vIHdoZW4gdGhlIHJpZ2h0c2lkZSBzaWRlYmFyIGlzIGRvY2tlZCwgd2UgbmVlZCB0byByZXNpemUgdGhlIFVJIGJ5IGl0c1xuICAgIC8vIHdpZHRoLCBtYWtpbmcgdGhlIG5lc3RlZCBVSSBjb250ZW50IHNoaWZ0IHRvIHRoZSBsZWZ0LiBUbyBkbyB0aGlzLFxuICAgIC8vIHdlIG5lZWQgdGhlIFVJIGNvbnRhaW5lciB0byBhY3R1YWxseSBoYXZlIGRpbWVuc2lvbnMgc2V0LCBidXRcbiAgICAvLyB0aGVuIHdlIGFsc28gbmVlZCB0byBkaXNhYmxlIHBvaW50ZXIgZXZlbnRzIGVsc2UgdGhlIGNhbnZhcyBiZWxvd1xuICAgIC8vIHdvdWxkbid0IGJlIGludGVyYWN0aXZlLlxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgei1pbmRleDogdmFyKC0tekluZGV4LWxheWVyVUkpO1xuXG4gICAgJl9fdG9wLXJpZ2h0IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDAuNzVyZW07XG4gICAgfVxuXG4gICAgJl9fZm9vdGVyIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgICAmLXJpZ2h0IHtcbiAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIC56ZW4tbW9kZS10cmFuc2l0aW9uIHtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjVzIGVhc2UtaW4tb3V0O1xuXG4gICAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJi50cmFuc2l0aW9uLWxlZnQge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtOTk5cHgsIDApO1xuICAgICAgfVxuXG4gICAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJi50cmFuc2l0aW9uLXJpZ2h0IHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoOTk5cHgsIDApO1xuICAgICAgfVxuXG4gICAgICA6cm9vdFtkaXI9XCJydGxcIl0gJi50cmFuc2l0aW9uLWxlZnQge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSg5OTlweCwgMCk7XG4gICAgICB9XG5cbiAgICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmLnRyYW5zaXRpb24tcmlnaHQge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtOTk5cHgsIDApO1xuICAgICAgfVxuXG4gICAgICAmLmxheWVyLXVpX193cmFwcGVyX19mb290ZXItbGVmdC0tdHJhbnNpdGlvbi1ib3R0b20ge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCA5MnB4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAuZGlzYWJsZS16ZW4tbW9kZSB7XG4gICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAwO1xuICAgICAgW2Rpcj1cImx0clwiXSAmIHtcbiAgICAgICAgcmlnaHQ6IDFyZW07XG4gICAgICB9XG4gICAgICBbZGlyPVwicnRsXCJdICYge1xuICAgICAgICBsZWZ0OiAxcmVtO1xuICAgICAgfVxuICAgICAgb3BhY2l0eTogMDtcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICAgIHRyYW5zaXRpb246IHZpc2liaWxpdHkgMHMgbGluZWFyIDBzLCBvcGFjaXR5IDAuNXM7XG5cbiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcbiAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICBsaW5lLWhlaWdodDogMTtcblxuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcik7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgfVxuICAgICAgJjphY3RpdmUge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAmLS12aXNpYmxlIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwcyBsaW5lYXIgMzAwbXMsIG9wYWNpdHkgMC41cztcbiAgICAgICAgdHJhbnNpdGlvbi1kZWxheTogMC44cztcblxuICAgICAgICBwb2ludGVyLWV2ZW50czogdmFyKC0tdWktcG9pbnRlckV2ZW50cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLmxheWVyLXVpX193cmFwcGVyX19mb290ZXItbGVmdCxcbiAgICAuZm9vdGVyLWNlbnRlcixcbiAgICAubGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlci1yaWdodCB7XG4gICAgICAmID4gKiB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiB2YXIoLS11aS1wb2ludGVyRXZlbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAubGF5ZXItdWlfX3dyYXBwZXJfX2Zvb3Rlci1yaWdodCB7XG4gICAgICBtYXJnaW4tdG9wOiBhdXRvO1xuICAgICAgbWFyZ2luLWJvdHRvbTogYXV0bztcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .App-toolbar.zen-mode .ToolIcon__keybinding,\n.excalidraw .App-toolbar.zen-mode .HintViewer {\n  display: none;\n}\n.excalidraw .App-toolbar__divider {\n  width: 1px;\n  height: 1.5rem;\n  align-self: center;\n  background-color: var(--default-border-color);\n  margin: 0 0.25rem;\n}\n.excalidraw--mobile.excalidraw .App-toolbar__divider {\n  margin: 0;\n}\n\n.excalidraw .App-toolbar__extra-tools-trigger {\n  box-shadow: none;\n  border: 0;\n  background-color: transparent;\n}\n.excalidraw .App-toolbar__extra-tools-trigger:active {\n  background-color: var(--button-hover-bg);\n  box-shadow: 0 0 0 1px var(--button-active-border, var(--color-primary-darkest)) inset;\n}\n.excalidraw .App-toolbar__extra-tools-trigger--selected, .excalidraw .App-toolbar__extra-tools-trigger--selected:hover {\n  background: var(--color-primary-light);\n  color: var(--color-primary);\n}\n.excalidraw .App-toolbar__extra-tools-dropdown {\n  margin-top: 0.375rem;\n  right: 0;\n  min-width: 11.875rem;\n  z-index: 1;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUb29sYmFyLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDdktJO0FBQUE7RUFFRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FEZEs7RUNpQkg7OztBQUtOO0VBQ0U7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFJRjtFQUVFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcbkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLkFwcC10b29sYmFyIHtcbiAgICAmLnplbi1tb2RlIHtcbiAgICAgIC5Ub29sSWNvbl9fa2V5YmluZGluZyxcbiAgICAgIC5IaW50Vmlld2VyIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmX19kaXZpZGVyIHtcbiAgICAgIHdpZHRoOiAxcHg7XG4gICAgICBoZWlnaHQ6IDEuNXJlbTtcbiAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKTtcbiAgICAgIG1hcmdpbjogMCAwLjI1cmVtO1xuXG4gICAgICBAaW5jbHVkZSBpc01vYmlsZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuQXBwLXRvb2xiYXJfX2V4dHJhLXRvb2xzLXRyaWdnZXIge1xuICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgYm9yZGVyOiAwO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweFxuICAgICAgICB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSkgaW5zZXQ7XG4gICAgfVxuXG4gICAgJi0tc2VsZWN0ZWQsXG4gICAgJi0tc2VsZWN0ZWQ6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcHJpbWFyeS1saWdodCk7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gICAgfVxuICB9XG5cbiAgLkFwcC10b29sYmFyX19leHRyYS10b29scy1kcm9wZG93biB7XG4gICAgbWFyZ2luLXRvcDogMC4zNzVyZW07XG4gICAgcmlnaHQ6IDA7XG4gICAgbWluLXdpZHRoOiAxMS44NzVyZW07XG4gICAgei1pbmRleDogMTtcbiAgfVxufVxuIl19 */", "import \"./ToolIcon.scss\";\n\nimport clsx from \"clsx\";\nimport { ToolButtonSize } from \"./ToolButton\";\nimport { laserPointerToolIcon } from \"./icons\";\n\ntype LaserPointerIconProps = {\n  title?: string;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n};\n\nconst DEFAULT_SIZE: ToolButtonSize = \"small\";\n\nexport const LaserPointerButton = (props: LaserPointerIconProps) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__LaserPointer\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n        data-testid=\"toolbar-LaserPointer\"\n      />\n      <div className=\"ToolIcon__icon\">{laserPointerToolIcon}</div>\n    </label>\n  );\n};\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --ExcTextField--color: var(--color-on-surface);\n  --ExcTextField--label-color: var(--color-on-surface);\n  --ExcTextField--background: transparent;\n  --ExcTextField--readonly--background: var(--color-surface-high);\n  --ExcTextField--readonly--color: var(--color-on-surface);\n  --ExcTextField--border: var(--color-border-outline);\n  --ExcTextField--readonly--border: var(--color-border-outline-variant);\n  --ExcTextField--border-hover: var(--color-brand-hover);\n  --ExcTextField--border-active: var(--color-brand-active);\n  --ExcTextField--placeholder: var(--color-border-outline-variant);\n}\n.excalidraw .ExcTextField--fullWidth {\n  width: 100%;\n  flex-grow: 1;\n}\n.excalidraw .ExcTextField__label {\n  font-family: \"Assistant\";\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.875rem;\n  line-height: 150%;\n  color: var(--ExcTextField--label-color);\n  margin-bottom: 0.25rem;\n  user-select: none;\n}\n.excalidraw .ExcTextField__input {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 1rem;\n  height: 3rem;\n  background: var(--ExcTextField--background);\n  border: 1px solid var(--ExcTextField--border);\n  border-radius: 0.5rem;\n}\n.excalidraw .ExcTextField__input:not(.excalidraw .ExcTextField__input--readonly):hover {\n  border-color: var(--ExcTextField--border-hover);\n}\n.excalidraw .ExcTextField__input:not(.excalidraw .ExcTextField__input--readonly):active, .excalidraw .ExcTextField__input:not(.excalidraw .ExcTextField__input--readonly):focus-within {\n  border-color: var(--ExcTextField--border-active);\n}\n.excalidraw .ExcTextField__input input {\n  display: flex;\n  align-items: center;\n  border: none;\n  outline: none;\n  padding: 0;\n  margin: 0;\n  height: 1.5rem;\n  color: var(--ExcTextField--color);\n  font-family: \"Assistant\";\n  font-style: normal;\n  font-weight: 400;\n  font-size: 1rem;\n  line-height: 150%;\n  text-overflow: ellipsis;\n  background: transparent;\n  width: 100%;\n}\n.excalidraw .ExcTextField__input input::placeholder {\n  color: var(--ExcTextField--placeholder);\n}\n.excalidraw .ExcTextField__input input:not(:focus):hover {\n  background-color: initial;\n}\n.excalidraw .ExcTextField__input input:focus {\n  outline: initial;\n  box-shadow: initial;\n}\n.excalidraw .ExcTextField__input--readonly {\n  background: var(--ExcTextField--readonly--background);\n  border-color: var(--ExcTextField--readonly--border);\n}\n.excalidraw .ExcTextField__input--readonly input {\n  color: var(--ExcTextField--readonly--color);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUZXh0RmllbGQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyS0E7RUFDRTtFQUNBOzs7QUMzS0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFFQTtFQUNBOztBQUdGO0VBQ0U7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7RUFDQTtFQUNBOztBQUdFO0VBQ0U7O0FBR0Y7RUFFRTs7QUFJSjtFQUNFO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUVBOztBQUVBO0VBQ0U7O0FBSUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBOztBQUVBO0VBQ0UiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAtLUV4Y1RleHRGaWVsZC0tY29sb3I6IHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpO1xuICAtLUV4Y1RleHRGaWVsZC0tbGFiZWwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpO1xuICAtLUV4Y1RleHRGaWVsZC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIC0tRXhjVGV4dEZpZWxkLS1yZWFkb25seS0tYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgLS1FeGNUZXh0RmllbGQtLXJlYWRvbmx5LS1jb2xvcjogdmFyKC0tY29sb3Itb24tc3VyZmFjZSk7XG4gIC0tRXhjVGV4dEZpZWxkLS1ib3JkZXI6IHZhcigtLWNvbG9yLWJvcmRlci1vdXRsaW5lKTtcbiAgLS1FeGNUZXh0RmllbGQtLXJlYWRvbmx5LS1ib3JkZXI6IHZhcigtLWNvbG9yLWJvcmRlci1vdXRsaW5lLXZhcmlhbnQpO1xuICAtLUV4Y1RleHRGaWVsZC0tYm9yZGVyLWhvdmVyOiB2YXIoLS1jb2xvci1icmFuZC1ob3Zlcik7XG4gIC0tRXhjVGV4dEZpZWxkLS1ib3JkZXItYWN0aXZlOiB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICAtLUV4Y1RleHRGaWVsZC0tcGxhY2Vob2xkZXI6IHZhcigtLWNvbG9yLWJvcmRlci1vdXRsaW5lLXZhcmlhbnQpO1xuXG4gIC5FeGNUZXh0RmllbGQge1xuICAgICYtLWZ1bGxXaWR0aCB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICB9XG5cbiAgICAmX19sYWJlbCB7XG4gICAgICBmb250LWZhbWlseTogXCJBc3Npc3RhbnRcIjtcbiAgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgbGluZS1oZWlnaHQ6IDE1MCU7XG5cbiAgICAgIGNvbG9yOiB2YXIoLS1FeGNUZXh0RmllbGQtLWxhYmVsLWNvbG9yKTtcblxuICAgICAgbWFyZ2luLWJvdHRvbTogMC4yNXJlbTtcbiAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgICZfX2lucHV0IHtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIHBhZGRpbmc6IDAgMXJlbTtcblxuICAgICAgaGVpZ2h0OiAzcmVtO1xuXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1FeGNUZXh0RmllbGQtLWJhY2tncm91bmQpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tRXhjVGV4dEZpZWxkLS1ib3JkZXIpO1xuICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuXG4gICAgICAmOm5vdCgmLS1yZWFkb25seSkge1xuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLUV4Y1RleHRGaWVsZC0tYm9yZGVyLWhvdmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlLFxuICAgICAgICAmOmZvY3VzLXdpdGhpbiB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1FeGNUZXh0RmllbGQtLWJvcmRlci1hY3RpdmUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYgaW5wdXQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgbWFyZ2luOiAwO1xuXG4gICAgICAgIGhlaWdodDogMS41cmVtO1xuXG4gICAgICAgIGNvbG9yOiB2YXIoLS1FeGNUZXh0RmllbGQtLWNvbG9yKTtcblxuICAgICAgICBmb250LWZhbWlseTogXCJBc3Npc3RhbnRcIjtcbiAgICAgICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxNTAlO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcblxuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcblxuICAgICAgICB3aWR0aDogMTAwJTtcblxuICAgICAgICAmOjpwbGFjZWhvbGRlciB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLUV4Y1RleHRGaWVsZC0tcGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjpub3QoOmZvY3VzKSB7XG4gICAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbml0aWFsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICY6Zm9jdXMge1xuICAgICAgICAgIG91dGxpbmU6IGluaXRpYWw7XG4gICAgICAgICAgYm94LXNoYWRvdzogaW5pdGlhbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAmLS1yZWFkb25seSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLUV4Y1RleHRGaWVsZC0tcmVhZG9ubHktLWJhY2tncm91bmQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLUV4Y1RleHRGaWVsZC0tcmVhZG9ubHktLWJvcmRlcik7XG5cbiAgICAgICAgJiBpbnB1dCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLUV4Y1RleHRGaWVsZC0tcmVhZG9ubHktLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */", "import {\n  forwardRef,\n  useRef,\n  useImperativeHandle,\n  KeyboardEvent,\n  useLayoutEffect,\n  useState,\n} from \"react\";\nimport clsx from \"clsx\";\n\nimport \"./TextField.scss\";\nimport { Button } from \"./Button\";\nimport { eyeIcon, eyeClosedIcon } from \"./icons\";\n\ntype TextFieldProps = {\n  onChange?: (value: string) => void;\n  onClick?: () => void;\n  onKeyDown?: (event: KeyboardEvent<HTMLInputElement>) => void;\n\n  readonly?: boolean;\n  fullWidth?: boolean;\n  selectOnRender?: boolean;\n\n  label?: string;\n  placeholder?: string;\n  isRedacted?: boolean;\n} & ({ value: string } | { defaultValue: string });\n\nexport const TextField = forwardRef<HTMLInputElement, TextFieldProps>(\n  (\n    {\n      onChange,\n      label,\n      fullWidth,\n      placeholder,\n      readonly,\n      selectOnRender,\n      onKeyDown,\n      isRedacted = false,\n      ...rest\n    },\n    ref,\n  ) => {\n    const innerRef = useRef<HTMLInputElement | null>(null);\n\n    useImperativeHandle(ref, () => innerRef.current!);\n\n    useLayoutEffect(() => {\n      if (selectOnRender) {\n        innerRef.current?.select();\n      }\n    }, [selectOnRender]);\n\n    const [isTemporarilyUnredacted, setIsTemporarilyUnredacted] =\n      useState<boolean>(false);\n\n    return (\n      <div\n        className={clsx(\"ExcTextField\", {\n          \"ExcTextField--fullWidth\": fullWidth,\n        })}\n        onClick={() => {\n          innerRef.current?.focus();\n        }}\n      >\n        <div className=\"ExcTextField__label\">{label}</div>\n        <div\n          className={clsx(\"ExcTextField__input\", {\n            \"ExcTextField__input--readonly\": readonly,\n          })}\n        >\n          <input\n            className={clsx({\n              \"is-redacted\":\n                \"value\" in rest &&\n                rest.value &&\n                isRedacted &&\n                !isTemporarilyUnredacted,\n            })}\n            readOnly={readonly}\n            value={\"value\" in rest ? rest.value : undefined}\n            defaultValue={\n              \"defaultValue\" in rest ? rest.defaultValue : undefined\n            }\n            placeholder={placeholder}\n            ref={innerRef}\n            onChange={(event) => onChange?.(event.target.value)}\n            onKeyDown={onKeyDown}\n          />\n          {isRedacted && (\n            <Button\n              onSelect={() =>\n                setIsTemporarilyUnredacted(!isTemporarilyUnredacted)\n              }\n              style={{ border: 0, userSelect: \"none\" }}\n            >\n              {isTemporarilyUnredacted ? eyeClosedIcon : eyeIcon}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  },\n);\n", "export const InlineIcon = ({ icon }: { icon: JSX.Element }) => {\n  return (\n    <span\n      style={{\n        width: \"1em\",\n        margin: \"0 0.5ex 0 0.5ex\",\n        display: \"inline-block\",\n        lineHeight: 0,\n        verticalAlign: \"middle\",\n      }}\n    >\n      {icon}\n    </span>\n  );\n};\n", "export const Paragraph = (props: {\n  children: React.ReactNode;\n  style?: React.CSSProperties;\n}) => {\n  return (\n    <p className=\"excalidraw__paragraph\" style={props.style}>\n      {props.children}\n    </p>\n  );\n};\n", ".excalidraw .MagicSettings .Island {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .MagicSettings-confirm {\n  padding: 0.5rem 1rem;\n}\n.excalidraw .MagicSettings__confirm {\n  margin-top: 2rem;\n  margin-right: auto;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIk1hZ2ljU2V0dGluZ3Muc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNFO0VBQ0E7RUFDQTs7QUFJSjtFQUNFOztBQUdGO0VBQ0U7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLk1hZ2ljU2V0dGluZ3Mge1xuICAgIC5Jc2xhbmQge1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgfVxuICB9XG5cbiAgLk1hZ2ljU2V0dGluZ3MtY29uZmlybSB7XG4gICAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gIH1cblxuICAuTWFnaWNTZXR0aW5nc19fY29uZmlybSB7XG4gICAgbWFyZ2luLXRvcDogMnJlbTtcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIH1cbn1cbiJdfQ== */", "import * as RadixTabs from \"@radix-ui/react-tabs\";\nimport { ReactNode, useRef } from \"react\";\nimport { useExcalidrawSetAppState } from \"../App\";\nimport { isMemberOf } from \"../../utils\";\n\nconst TTDDialogTabs = (\n  props: {\n    children: ReactNode;\n  } & (\n    | { dialog: \"ttd\"; tab: \"text-to-diagram\" | \"mermaid\" }\n    | { dialog: \"settings\"; tab: \"text-to-diagram\" | \"diagram-to-code\" }\n  ),\n) => {\n  const setAppState = useExcalidrawSetAppState();\n\n  const rootRef = useRef<HTMLDivElement>(null);\n  const minHeightRef = useRef<number>(0);\n\n  return (\n    <RadixTabs.Root\n      ref={rootRef}\n      className=\"ttd-dialog-tabs-root\"\n      value={props.tab}\n      onValueChange={(\n        // at least in test enviros, `tab` can be `undefined`\n        tab: string | undefined,\n      ) => {\n        if (!tab) {\n          return;\n        }\n        const modalContentNode =\n          rootRef.current?.closest<HTMLElement>(\".Modal__content\");\n        if (modalContentNode) {\n          const currHeight = modalContentNode.offsetHeight || 0;\n          if (currHeight > minHeightRef.current) {\n            minHeightRef.current = currHeight;\n            modalContentNode.style.minHeight = `min(${minHeightRef.current}px, 100%)`;\n          }\n        }\n        if (\n          props.dialog === \"settings\" &&\n          isMemberOf([\"text-to-diagram\", \"diagram-to-code\"], tab)\n        ) {\n          setAppState({\n            openDialog: { name: props.dialog, tab, source: \"settings\" },\n          });\n        } else if (\n          props.dialog === \"ttd\" &&\n          isMemberOf([\"text-to-diagram\", \"mermaid\"], tab)\n        ) {\n          setAppState({\n            openDialog: { name: props.dialog, tab },\n          });\n        }\n      }}\n    >\n      {props.children}\n    </RadixTabs.Root>\n  );\n};\n\nTTDDialogTabs.displayName = \"TTDDialogTabs\";\n\nexport default TTDDialogTabs;\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\n\nexport const TTDDialogTab = ({\n  tab,\n  children,\n  ...rest\n}: {\n  tab: string;\n  children: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.Content {...rest} value={tab}>\n      {children}\n    </RadixTabs.Content>\n  );\n};\nTTDDialogTab.displayName = \"TTDDialogTab\";\n", "import { useState } from \"react\";\nimport { Dialog } from \"./Dialog\";\nimport { TextField } from \"./TextField\";\nimport { MagicIcon, OpenAIIcon } from \"./icons\";\nimport { FilledButton } from \"./FilledButton\";\nimport { CheckboxItem } from \"./CheckboxItem\";\nimport { KEYS } from \"../keys\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport { InlineIcon } from \"./InlineIcon\";\nimport { Paragraph } from \"./Paragraph\";\n\nimport \"./MagicSettings.scss\";\nimport TTDDialogTabs from \"./TTDDialog/TTDDialogTabs\";\nimport { TTDDialogTab } from \"./TTDDialog/TTDDialogTab\";\n\nexport const MagicSettings = (props: {\n  openAIKey: string | null;\n  isPersisted: boolean;\n  onChange: (key: string, shouldPersist: boolean) => void;\n  onConfirm: (key: string, shouldPersist: boolean) => void;\n  onClose: () => void;\n}) => {\n  const [keyInputValue, setKeyInputValue] = useState(props.openAIKey || \"\");\n  const [shouldPersist, setShouldPersist] = useState<boolean>(\n    props.isPersisted,\n  );\n\n  const appState = useUIAppState();\n\n  const onConfirm = () => {\n    props.onConfirm(keyInputValue.trim(), shouldPersist);\n  };\n\n  if (appState.openDialog?.name !== \"settings\") {\n    return null;\n  }\n\n  return (\n    <Dialog\n      onCloseRequest={() => {\n        props.onClose();\n        props.onConfirm(keyInputValue.trim(), shouldPersist);\n      }}\n      title={\n        <div style={{ display: \"flex\" }}>\n          Wireframe to Code (AI){\" \"}\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              padding: \"0.1rem 0.5rem\",\n              marginLeft: \"1rem\",\n              fontSize: 14,\n              borderRadius: \"12px\",\n              color: \"#000\",\n              background: \"pink\",\n            }}\n          >\n            Experimental\n          </div>\n        </div>\n      }\n      className=\"MagicSettings\"\n      autofocus={false}\n    >\n      {/*  <h2\n        style={{\n          margin: 0,\n          fontSize: \"1.25rem\",\n          paddingLeft: \"2.5rem\",\n        }}\n      >\n        AI Settings\n      </h2> */}\n      <TTDDialogTabs dialog=\"settings\" tab={appState.openDialog.tab}>\n        {/* <TTDDialogTabTriggers>\n          <TTDDialogTabTrigger tab=\"text-to-diagram\">\n            <InlineIcon icon={brainIcon} /> Text to diagram\n          </TTDDialogTabTrigger>\n          <TTDDialogTabTrigger tab=\"diagram-to-code\">\n            <InlineIcon icon={MagicIcon} /> Wireframe to code\n          </TTDDialogTabTrigger>\n        </TTDDialogTabTriggers> */}\n        {/* <TTDDialogTab className=\"ttd-dialog-content\" tab=\"text-to-diagram\">\n          TODO\n        </TTDDialogTab> */}\n        <TTDDialogTab\n          //  className=\"ttd-dialog-content\"\n          tab=\"diagram-to-code\"\n        >\n          <Paragraph>\n            For the diagram-to-code feature we use{\" \"}\n            <InlineIcon icon={OpenAIIcon} />\n            OpenAI.\n          </Paragraph>\n          <Paragraph>\n            While the OpenAI API is in beta, its use is strictly limited \u2014 as\n            such we require you use your own API key. You can create an{\" \"}\n            <a\n              href=\"https://platform.openai.com/login?launch\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              OpenAI account\n            </a>\n            , add a small credit (5 USD minimum), and{\" \"}\n            <a\n              href=\"https://platform.openai.com/api-keys\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              generate your own API key\n            </a>\n            .\n          </Paragraph>\n          <Paragraph>\n            Your OpenAI key does not leave the browser, and you can also set\n            your own limit in your OpenAI account dashboard if needed.\n          </Paragraph>\n          <TextField\n            isRedacted\n            value={keyInputValue}\n            placeholder=\"Paste your API key here\"\n            label=\"OpenAI API key\"\n            onChange={(value) => {\n              setKeyInputValue(value);\n              props.onChange(value.trim(), shouldPersist);\n            }}\n            selectOnRender\n            onKeyDown={(event) => event.key === KEYS.ENTER && onConfirm()}\n          />\n          <Paragraph>\n            By default, your API token is not persisted anywhere so you'll need\n            to insert it again after reload. But, you can persist locally in\n            your browser below.\n          </Paragraph>\n\n          <CheckboxItem checked={shouldPersist} onChange={setShouldPersist}>\n            Persist API key in browser storage\n          </CheckboxItem>\n\n          <Paragraph>\n            Once API key is set, you can use the <InlineIcon icon={MagicIcon} />{\" \"}\n            tool to wrap your elements in a frame that will then allow you to\n            turn it into code. This dialog can be accessed using the{\" \"}\n            <b>AI Settings</b> <InlineIcon icon={OpenAIIcon} />.\n          </Paragraph>\n\n          <FilledButton\n            className=\"MagicSettings__confirm\"\n            size=\"large\"\n            label=\"Confirm\"\n            onClick={onConfirm}\n          />\n        </TTDDialogTab>\n      </TTDDialogTabs>\n    </Dialog>\n  );\n};\n", ".excalidraw .dialog-mermaid-title {\n  margin-block: 0.25rem;\n  font-size: 1.25rem;\n  font-weight: 700;\n  padding-inline: 2.5rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvVFRERGlhbG9nIiwic291cmNlcyI6WyJNZXJtYWlkVG9FeGNhbGlkcmF3LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDRTtFQUNBO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLmRpYWxvZy1tZXJtYWlkIHtcbiAgICAmLXRpdGxlIHtcbiAgICAgIG1hcmdpbi1ibG9jazogMC4yNXJlbTtcbiAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICBwYWRkaW5nLWlubGluZTogMi41cmVtO1xuICAgIH1cbiAgfVxufVxuIl19 */", "import { MermaidOptions } from \"@excalidraw/mermaid-to-excalidraw\";\nimport { MermaidToExcalidrawResult } from \"@excalidraw/mermaid-to-excalidraw/dist/interfaces\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  DEFAULT_FONT_SIZE,\n  EDITOR_LS_KEYS,\n} from \"../../constants\";\nimport { convertToExcalidrawElements, exportToCanvas } from \"../../index\";\nimport { NonDeletedExcalidrawElement } from \"../../element/types\";\nimport { AppClassProperties, BinaryFiles } from \"../../types\";\nimport { canvasToBlob } from \"../../data/blob\";\nimport { EditorLocalStorage } from \"../../data/EditorLocalStorage\";\n\nconst resetPreview = ({\n  canvasRef,\n  setError,\n}: {\n  canvasRef: React.RefObject<HTMLDivElement>;\n  setError: (error: Error | null) => void;\n}) => {\n  const canvasNode = canvasRef.current;\n\n  if (!canvasNode) {\n    return;\n  }\n  const parent = canvasNode.parentElement;\n  if (!parent) {\n    return;\n  }\n  parent.style.background = \"\";\n  setError(null);\n  canvasNode.replaceChildren();\n};\n\nexport interface MermaidToExcalidrawLibProps {\n  loaded: boolean;\n  api: Promise<{\n    parseMermaidToExcalidraw: (\n      definition: string,\n      options: MermaidOptions,\n    ) => Promise<MermaidToExcalidrawResult>;\n  }>;\n}\n\ninterface ConvertMermaidToExcalidrawFormatProps {\n  canvasRef: React.RefObject<HTMLDivElement>;\n  mermaidToExcalidrawLib: MermaidToExcalidrawLibProps;\n  mermaidDefinition: string;\n  setError: (error: Error | null) => void;\n  data: React.MutableRefObject<{\n    elements: readonly NonDeletedExcalidrawElement[];\n    files: BinaryFiles | null;\n  }>;\n}\n\nexport const convertMermaidToExcalidraw = async ({\n  canvasRef,\n  mermaidToExcalidrawLib,\n  mermaidDefinition,\n  setError,\n  data,\n}: ConvertMermaidToExcalidrawFormatProps) => {\n  const canvasNode = canvasRef.current;\n  const parent = canvasNode?.parentElement;\n\n  if (!canvasNode || !parent) {\n    return;\n  }\n\n  if (!mermaidDefinition) {\n    resetPreview({ canvasRef, setError });\n    return;\n  }\n\n  try {\n    const api = await mermaidToExcalidrawLib.api;\n\n    let ret;\n    try {\n      ret = await api.parseMermaidToExcalidraw(mermaidDefinition, {\n        fontSize: DEFAULT_FONT_SIZE,\n      });\n    } catch (err: any) {\n      ret = await api.parseMermaidToExcalidraw(\n        mermaidDefinition.replace(/\"/g, \"'\"),\n        {\n          fontSize: DEFAULT_FONT_SIZE,\n        },\n      );\n    }\n    const { elements, files } = ret;\n    setError(null);\n\n    data.current = {\n      elements: convertToExcalidrawElements(elements, {\n        regenerateIds: true,\n      }),\n      files,\n    };\n\n    const canvas = await exportToCanvas({\n      elements: data.current.elements,\n      files: data.current.files,\n      exportPadding: DEFAULT_EXPORT_PADDING,\n      maxWidthOrHeight:\n        Math.max(parent.offsetWidth, parent.offsetHeight) *\n        window.devicePixelRatio,\n    });\n    // if converting to blob fails, there's some problem that will\n    // likely prevent preview and export (e.g. canvas too big)\n    await canvasToBlob(canvas);\n    parent.style.background = \"var(--default-bg-color)\";\n    canvasNode.replaceChildren(canvas);\n  } catch (err: any) {\n    parent.style.background = \"var(--default-bg-color)\";\n    if (mermaidDefinition) {\n      setError(err);\n    }\n\n    throw err;\n  }\n};\n\nexport const saveMermaidDataToStorage = (mermaidDefinition: string) => {\n  EditorLocalStorage.set(\n    EDITOR_LS_KEYS.MERMAID_TO_EXCALIDRAW,\n    mermaidDefinition,\n  );\n};\n\nexport const insertToEditor = ({\n  app,\n  data,\n  text,\n  shouldSaveMermaidDataToStorage,\n}: {\n  app: AppClassProperties;\n  data: React.MutableRefObject<{\n    elements: readonly NonDeletedExcalidrawElement[];\n    files: BinaryFiles | null;\n  }>;\n  text?: string;\n  shouldSaveMermaidDataToStorage?: boolean;\n}) => {\n  const { elements: newElements, files } = data.current;\n\n  if (!newElements.length) {\n    return;\n  }\n\n  app.addElementsFromPasteOrLibrary({\n    elements: newElements,\n    files,\n    position: \"center\",\n    fitToContent: true,\n  });\n  app.setOpenDialog(null);\n\n  if (shouldSaveMermaidDataToStorage && text) {\n    saveMermaidDataToStorage(text);\n  }\n};\n", "import { ReactNode } from \"react\";\n\nexport const TTDDialogPanels = ({ children }: { children: ReactNode }) => {\n  return <div className=\"ttd-dialog-panels\">{children}</div>;\n};\n", "import { ReactNode } from \"react\";\nimport { Button } from \"../Button\";\nimport clsx from \"clsx\";\nimport Spinner from \"../Spinner\";\n\ninterface TTDDialogPanelProps {\n  label: string;\n  children: ReactNode;\n  panelAction?: {\n    label: string;\n    action: () => void;\n    icon?: ReactNode;\n  };\n  panelActionDisabled?: boolean;\n  onTextSubmitInProgess?: boolean;\n  renderTopRight?: () => ReactNode;\n  renderSubmitShortcut?: () => ReactNode;\n  renderBottomRight?: () => ReactNode;\n}\n\nexport const TTDDialogPanel = ({\n  label,\n  children,\n  panelAction,\n  panelActionDisabled = false,\n  onTextSubmitInProgess,\n  renderTopRight,\n  renderSubmitShortcut,\n  renderBottomRight,\n}: TTDDialogPanelProps) => {\n  return (\n    <div className=\"ttd-dialog-panel\">\n      <div className=\"ttd-dialog-panel__header\">\n        <label>{label}</label>\n        {renderTopRight?.()}\n      </div>\n\n      {children}\n      <div\n        className={clsx(\"ttd-dialog-panel-button-container\", {\n          invisible: !panelAction,\n        })}\n        style={{ display: \"flex\", alignItems: \"center\" }}\n      >\n        <Button\n          className=\"ttd-dialog-panel-button\"\n          onSelect={panelAction ? panelAction.action : () => {}}\n          disabled={panelActionDisabled || onTextSubmitInProgess}\n        >\n          <div className={clsx({ invisible: onTextSubmitInProgess })}>\n            {panelAction?.label}\n            {panelAction?.icon && <span>{panelAction.icon}</span>}\n          </div>\n          {onTextSubmitInProgess && <Spinner />}\n        </Button>\n        {!panelActionDisabled &&\n          !onTextSubmitInProgess &&\n          renderSubmitShortcut?.()}\n        {renderBottomRight?.()}\n      </div>\n    </div>\n  );\n};\n", "import { ChangeEventHandler, useEffect, useRef } from \"react\";\nimport { EVENT } from \"../../constants\";\nimport { KEYS } from \"../../keys\";\n\ninterface TTDDialogInputProps {\n  input: string;\n  placeholder: string;\n  onChange: ChangeEventHandler<HTMLTextAreaElement>;\n  onKeyboardSubmit?: () => void;\n}\n\nexport const TTDDialogInput = ({\n  input,\n  placeholder,\n  onChange,\n  onKeyboardSubmit,\n}: TTDDialogInputProps) => {\n  const ref = useRef<HTMLTextAreaElement>(null);\n\n  const callbackRef = useRef(onKeyboardSubmit);\n  callbackRef.current = onKeyboardSubmit;\n\n  useEffect(() => {\n    if (!callbackRef.current) {\n      return;\n    }\n    const textarea = ref.current;\n    if (textarea) {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (event[KEYS.CTRL_OR_CMD] && event.key === KEYS.ENTER) {\n          event.preventDefault();\n          callbackRef.current?.();\n        }\n      };\n      textarea.addEventListener(EVENT.KEYDOWN, handleKeyDown);\n      return () => {\n        textarea.removeEventListener(EVENT.KEYDOWN, handleKeyDown);\n      };\n    }\n  }, []);\n\n  return (\n    <textarea\n      className=\"ttd-dialog-input\"\n      onChange={onChange}\n      value={input}\n      placeholder={placeholder}\n      autoFocus\n      ref={ref}\n    />\n  );\n};\n", "import Spinner from \"../Spinner\";\n\nconst ErrorComp = ({ error }: { error: string }) => {\n  return (\n    <div\n      data-testid=\"ttd-dialog-output-error\"\n      className=\"ttd-dialog-output-error\"\n    >\n      Error! <p>{error}</p>\n    </div>\n  );\n};\n\ninterface TTDDialogOutputProps {\n  error: Error | null;\n  canvasRef: React.RefObject<HTMLDivElement>;\n  loaded: boolean;\n}\n\nexport const TTDDialogOutput = ({\n  error,\n  canvasRef,\n  loaded,\n}: TTDDialogOutputProps) => {\n  return (\n    <div className=\"ttd-dialog-output-wrapper\">\n      {error && <ErrorComp error={error.message} />}\n      {loaded ? (\n        <div\n          ref={canvasRef}\n          style={{ opacity: error ? \"0.15\" : 1 }}\n          className=\"ttd-dialog-output-canvas-container\"\n        />\n      ) : (\n        <Spinner size=\"2rem\" />\n      )}\n    </div>\n  );\n};\n", "import { getShortcutKey } from \"../../utils\";\n\nexport const TTDDialogSubmitShortcut = () => {\n  return (\n    <div className=\"ttd-dialog-submit-shortcut\">\n      <div className=\"ttd-dialog-submit-shortcut__key\">\n        {getShortcutKey(\"CtrlOrCmd\")}\n      </div>\n      <div className=\"ttd-dialog-submit-shortcut__key\">\n        {getShortcutKey(\"Enter\")}\n      </div>\n    </div>\n  );\n};\n", "import { useState, useRef, useEffect, useDeferredValue } from \"react\";\nimport { BinaryFiles } from \"../../types\";\nimport { useApp } from \"../App\";\nimport { NonDeletedExcalidrawElement } from \"../../element/types\";\nimport { ArrowRightIcon } from \"../icons\";\nimport \"./MermaidToExcalidraw.scss\";\nimport { t } from \"../../i18n\";\nimport Trans from \"../Trans\";\nimport {\n  MermaidToExcalidrawLibProps,\n  convertMermaidToExcalidraw,\n  insertToEditor,\n  saveMermaidDataToStorage,\n} from \"./common\";\nimport { TTDDialogPanels } from \"./TTDDialogPanels\";\nimport { TTDDialogPanel } from \"./TTDDialogPanel\";\nimport { TTDDialogInput } from \"./TTDDialogInput\";\nimport { TTDDialogOutput } from \"./TTDDialogOutput\";\nimport { EditorLocalStorage } from \"../../data/EditorLocalStorage\";\nimport { EDITOR_LS_KEYS } from \"../../constants\";\nimport { debounce } from \"../../utils\";\nimport { TTDDialogSubmitShortcut } from \"./TTDDialogSubmitShortcut\";\n\nconst MERMAID_EXAMPLE =\n  \"flowchart TD\\n A[Christmas] -->|Get money| B(Go shopping)\\n B --> C{Let me think}\\n C -->|One| D[Laptop]\\n C -->|Two| E[iPhone]\\n C -->|Three| F[Car]\";\n\nconst debouncedSaveMermaidDefinition = debounce(saveMermaidDataToStorage, 300);\n\nconst MermaidToExcalidraw = ({\n  mermaidToExcalidrawLib,\n}: {\n  mermaidToExcalidrawLib: MermaidToExcalidrawLibProps;\n}) => {\n  const [text, setText] = useState(\n    () =>\n      EditorLocalStorage.get<string>(EDITOR_LS_KEYS.MERMAID_TO_EXCALIDRAW) ||\n      MERMAID_EXAMPLE,\n  );\n  const deferredText = useDeferredValue(text.trim());\n  const [error, setError] = useState<Error | null>(null);\n\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const data = useRef<{\n    elements: readonly NonDeletedExcalidrawElement[];\n    files: BinaryFiles | null;\n  }>({ elements: [], files: null });\n\n  const app = useApp();\n\n  useEffect(() => {\n    convertMermaidToExcalidraw({\n      canvasRef,\n      data,\n      mermaidToExcalidrawLib,\n      setError,\n      mermaidDefinition: deferredText,\n    }).catch(() => {});\n\n    debouncedSaveMermaidDefinition(deferredText);\n  }, [deferredText, mermaidToExcalidrawLib]);\n\n  useEffect(\n    () => () => {\n      debouncedSaveMermaidDefinition.flush();\n    },\n    [],\n  );\n\n  const onInsertToEditor = () => {\n    insertToEditor({\n      app,\n      data,\n      text,\n      shouldSaveMermaidDataToStorage: true,\n    });\n  };\n\n  return (\n    <>\n      <div className=\"ttd-dialog-desc\">\n        <Trans\n          i18nKey=\"mermaid.description\"\n          flowchartLink={(el) => (\n            <a href=\"https://mermaid.js.org/syntax/flowchart.html\">{el}</a>\n          )}\n          sequenceLink={(el) => (\n            <a href=\"https://mermaid.js.org/syntax/sequenceDiagram.html\">\n              {el}\n            </a>\n          )}\n          classLink={(el) => (\n            <a href=\"https://mermaid.js.org/syntax/classDiagram.html\">{el}</a>\n          )}\n        />\n      </div>\n      <TTDDialogPanels>\n        <TTDDialogPanel label={t(\"mermaid.syntax\")}>\n          <TTDDialogInput\n            input={text}\n            placeholder={\"Write Mermaid diagram defintion here...\"}\n            onChange={(event) => setText(event.target.value)}\n            onKeyboardSubmit={() => {\n              onInsertToEditor();\n            }}\n          />\n        </TTDDialogPanel>\n        <TTDDialogPanel\n          label={t(\"mermaid.preview\")}\n          panelAction={{\n            action: () => {\n              onInsertToEditor();\n            },\n            label: t(\"mermaid.button\"),\n            icon: ArrowRightIcon,\n          }}\n          renderSubmitShortcut={() => <TTDDialogSubmitShortcut />}\n        >\n          <TTDDialogOutput\n            canvasRef={canvasRef}\n            loaded={mermaidToExcalidrawLib.loaded}\n            error={error}\n          />\n        </TTDDialogPanel>\n      </TTDDialogPanels>\n    </>\n  );\n};\nexport default MermaidToExcalidraw;\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\n\nexport const TTDDialogTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & React.HTMLAttributes<HTMLDivElement>) => {\n  return (\n    <RadixTabs.List className=\"ttd-dialog-triggers\" {...rest}>\n      {children}\n    </RadixTabs.List>\n  );\n};\nTTDDialogTabTriggers.displayName = \"TTDDialogTabTriggers\";\n", "import * as RadixTabs from \"@radix-ui/react-tabs\";\n\nexport const TTDDialogTabTrigger = ({\n  children,\n  tab,\n  onSelect,\n  ...rest\n}: {\n  children: React.ReactNode;\n  tab: string;\n  onSelect?: React.ReactEventHandler<HTMLButtonElement> | undefined;\n} & Omit<React.HTMLAttributes<HTMLButtonElement>, \"onSelect\">) => {\n  return (\n    <RadixTabs.Trigger value={tab} asChild onSelect={onSelect}>\n      <button type=\"button\" className=\"ttd-dialog-tab-trigger\" {...rest}>\n        {children}\n      </button>\n    </RadixTabs.Trigger>\n  );\n};\nTTDDialogTabTrigger.displayName = \"TTDDialogTabTrigger\";\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Modal.Dialog.ttd-dialog {\n  padding: 1.25rem;\n}\n.excalidraw .Modal.Dialog.ttd-dialog.Dialog--fullscreen {\n  margin-top: 0;\n}\n.excalidraw .Modal.Dialog.ttd-dialog .Island {\n  padding-inline: 0 !important;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  box-shadow: none;\n}\n.excalidraw .Modal.Dialog.ttd-dialog .Modal__content {\n  height: auto;\n  max-height: 100%;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .Modal.Dialog.ttd-dialog .Modal__content {\n    max-height: 750px;\n    height: 100%;\n  }\n}\n.excalidraw .Modal.Dialog.ttd-dialog .Dialog__content {\n  flex: 1 1 auto;\n}\n.excalidraw .ttd-dialog-desc {\n  font-size: 15px;\n  font-style: italic;\n  font-weight: 500;\n  margin-bottom: 1.5rem;\n}\n.excalidraw .ttd-dialog-tabs-root {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .ttd-dialog-tab-trigger {\n  color: var(--color-on-surface);\n  font-size: 0.875rem;\n  margin: 0;\n  padding: 0 1rem;\n  background-color: transparent;\n  border: 0;\n  height: 2.875rem;\n  font-weight: 600;\n  font-family: inherit;\n  letter-spacing: 0.4px;\n}\n.excalidraw .ttd-dialog-tab-trigger[data-state=active] {\n  border-bottom: 2px solid var(--color-primary);\n}\n.excalidraw .ttd-dialog-triggers {\n  border-bottom: 1px solid var(--color-surface-high);\n  margin-bottom: 1.5rem;\n  padding-inline: 2.5rem;\n}\n.excalidraw .ttd-dialog-content {\n  padding-inline: 2.5rem;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.excalidraw .ttd-dialog-content[hidden] {\n  display: none;\n}\n.excalidraw .ttd-dialog-input {\n  width: auto;\n  height: 10rem;\n  resize: none;\n  border-radius: var(--border-radius-lg);\n  border: 1px solid var(--dialog-border-color);\n  white-space: pre-wrap;\n  padding: 0.85rem;\n  box-sizing: border-box;\n  font-family: monospace;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-input {\n    width: 100%;\n    height: 100%;\n  }\n}\n.excalidraw .ttd-dialog-output-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.85rem;\n  box-sizing: border-box;\n  flex-grow: 1;\n  position: relative;\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==\") left center;\n  border-radius: var(--border-radius-lg);\n  border: 1px solid var(--dialog-border-color);\n  height: 400px;\n  width: auto;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-output-wrapper {\n    width: 100%;\n    height: 200px;\n  }\n}\n.excalidraw .ttd-dialog-output-wrapper canvas {\n  max-width: 100%;\n  max-height: 100%;\n}\n.excalidraw .ttd-dialog-output-canvas-container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 1;\n}\n.excalidraw .ttd-dialog-output-error {\n  color: red;\n  font-weight: 800;\n  font-size: 30px;\n  word-break: break-word;\n  overflow: auto;\n  max-height: 100%;\n  height: 100%;\n  width: 100%;\n  text-align: center;\n  position: absolute;\n  z-index: 10;\n}\n.excalidraw .ttd-dialog-output-error p {\n  font-weight: 500;\n  font-family: Cascadia;\n  text-align: left;\n  white-space: pre-wrap;\n  font-size: 0.875rem;\n  padding: 0 10px;\n}\n.excalidraw .ttd-dialog-panels {\n  height: 100%;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-panels {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 4rem;\n  }\n}\n.excalidraw .ttd-dialog-panel {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n.excalidraw .ttd-dialog-panel__header {\n  display: flex;\n  margin: 0px 4px 4px 4px;\n  align-items: center;\n  gap: 1rem;\n}\n.excalidraw .ttd-dialog-panel__header label {\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 600;\n}\n.excalidraw .ttd-dialog-panel:first-child .ttd-dialog-panel-button-container:not(.invisible) {\n  margin-bottom: 4rem;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-panel .ttd-dialog-panel-button-container:not(.invisible) {\n    margin-bottom: 0.5rem !important;\n  }\n}\n.excalidraw .ttd-dialog-panel textarea {\n  height: 100%;\n  resize: none;\n  border-radius: var(--border-radius-lg);\n  border: 1px solid var(--dialog-border-color);\n  white-space: pre-wrap;\n  padding: 0.85rem;\n  box-sizing: border-box;\n  width: 100%;\n  font-family: monospace;\n}\n@media screen and (max-width: 861px) {\n  .excalidraw .ttd-dialog-panel textarea {\n    width: auto;\n    height: 10rem;\n  }\n}\n.excalidraw .ttd-dialog-panel-button-container {\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n}\n.excalidraw .ttd-dialog-panel-button-container.invisible .ttd-dialog-panel-button {\n  display: none;\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-panel-button-container.invisible .ttd-dialog-panel-button {\n    display: block;\n    visibility: hidden;\n  }\n}\n.excalidraw .ttd-dialog-panel-button {\n  position: relative;\n}\n.excalidraw .ttd-dialog-panel-button.excalidraw-button {\n  font-family: inherit;\n  font-weight: 600;\n  height: 2.5rem;\n  font-size: 12px;\n  color: #ffffff;\n  background-color: var(--color-primary);\n  width: 100%;\n}\n.excalidraw .ttd-dialog-panel-button.excalidraw-button:hover {\n  background-color: var(--color-primary-darker);\n}\n.excalidraw .ttd-dialog-panel-button.excalidraw-button:active {\n  background-color: var(--color-primary-darkest);\n}\n.excalidraw .ttd-dialog-panel-button.excalidraw-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.excalidraw .ttd-dialog-panel-button.excalidraw-button:disabled:hover {\n  background-color: var(--color-primary);\n}\n@media screen and (min-width: 861px) {\n  .excalidraw .ttd-dialog-panel-button.excalidraw-button {\n    width: auto;\n    min-width: 7.5rem;\n  }\n}\n.excalidraw.theme--dark.excalidraw .ttd-dialog-panel-button.excalidraw-button {\n  color: var(--color-gray-100);\n}\n\n.excalidraw .ttd-dialog-panel-button div {\n  display: contents;\n}\n.excalidraw .ttd-dialog-panel-button div.invisible {\n  visibility: hidden;\n}\n.excalidraw .ttd-dialog-panel-button div.Spinner {\n  display: flex !important;\n  position: absolute;\n  inset: 0;\n  --spinner-color: white;\n}\n.excalidraw.theme--dark.excalidraw .ttd-dialog-panel-button div.Spinner {\n  --spinner-color: var(--color-gray-100);\n}\n\n.excalidraw .ttd-dialog-panel-button div span {\n  padding-left: 0.5rem;\n  display: flex;\n}\n.excalidraw .ttd-dialog-submit-shortcut {\n  margin-inline-start: 0.5rem;\n  font-size: 0.625rem;\n  opacity: 0.6;\n  display: flex;\n  gap: 0.125rem;\n}\n.excalidraw .ttd-dialog-submit-shortcut__key {\n  border: 1px solid gray;\n  padding: 2px 3px;\n  border-radius: 4px;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvVFRERGlhbG9nIiwic291cmNlcyI6WyIuLi8uLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzIiwiVFRERGlhbG9nLnNjc3MiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDeEtBO0VBQ0U7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBRUE7RUFKRjtJQUtJO0lBQ0E7OztBQUlKO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFYRjtJQVlJO0lBQ0E7OztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUVBO0VBQ0E7RUFFQTtFQUNBOztBQUVBO0VBakJGO0lBa0JJO0lBRUE7OztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBSUo7RUFDRTs7QUFFQTtFQUhGO0lBSUk7SUFDQTtJQUNBOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUtGO0VBQ0U7O0FBSUo7RUFDRTtJQUNFOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQVhGO0lBWUk7SUFDQTs7O0FBS047RUFDRTtFQUNBOztBQUdFO0VBQ0U7O0FBRUE7RUFIRjtJQUlJO0lBQ0E7OztBQU1SO0VBcUNFOztBQXBDQTtFQUNFO0VBQ0E7RUFDQTtFQUVBO0VBQ0EsT0N4T2E7RUR5T2I7RUFDQTs7QUFFQTtFQUNFOztBQUVGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBSUo7RUExQkY7SUEyQkk7SUFDQTs7O0FBR087RUFDUDs7O0FBTUo7RUFDRTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBRUE7O0FBRVM7RUFDUDs7O0FBSUo7RUFDRTtFQUNBOztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJvcGVuLWNvbG9yL29wZW4tY29sb3Iuc2Nzc1wiO1xuXG5AbWl4aW4gaXNNb2JpbGUoKSB7XG4gIEBhdC1yb290IC5leGNhbGlkcmF3LS1tb2JpbGUjeyZ9IHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AbWl4aW4gdG9vbGJhckJ1dHRvbkNvbG9yU3RhdGVzIHtcbiAgJi5maWxsYWJsZSB7XG4gICAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gICAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgICAgLS1pY29uLWZpbGwtY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgICBzdmcge1xuICAgICAgICAgIGZpbGw6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgLlRvb2xJY29uX3R5cGVfY2hlY2tib3gge1xuICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgYm90dG9tOiA0cHg7XG4gICAgcmlnaHQ6IDRweDtcbiAgfVxuXG4gIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBvdXRsaW5lQnV0dG9uU3R5bGVzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDAuNjI1cmVtO1xuICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpO1xuICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKSk7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBzdmcge1xuICAgIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLWhlaWdodCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItYm9yZGVyLFxuICAgICAgdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKVxuICAgICk7XG4gICAgY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWNvbG9yLFxuICAgICAgdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IsIGluaGVyaXQpKVxuICAgICk7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJvcmRlciwgdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0KSk7XG4gIH1cblxuICAmLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYmcsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ib3JkZXIsXG4gICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICk7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgICAgLS1idXR0b24tc2VsZWN0ZWQtaG92ZXItYmcsXG4gICAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgICApO1xuICAgIH1cblxuICAgIHN2ZyB7XG4gICAgICBjb2xvcjogdmFyKC0tYnV0dG9uLWNvbG9yLCB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcikpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYXZhdGFyU3R5bGVzIHtcbiAgd2lkdGg6IDEuMjVyZW07XG4gIGhlaWdodDogMS4yNXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBvdXRsaW5lLW9mZnNldDogMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDAuNzVyZW07XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGxpbmUtaGVpZ2h0OiAxO1xuICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS05MCk7XG4gIGZsZXg6IDAgMCBhdXRvO1xuXG4gICYtaW1nIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICY6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAtM3B4O1xuICAgIHJpZ2h0OiAtM3B4O1xuICAgIGJvdHRvbTogLTNweDtcbiAgICBsZWZ0OiAtM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWF2YXRhci1ib3JkZXItY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmLS1pcy1mb2xsb3dlZDo6YmVmb3JlIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICB9XG4gICYtLWlzLWN1cnJlbnQtdXNlciB7XG4gICAgY3Vyc29yOiBhdXRvO1xuICB9XG59XG5cbkBtaXhpbiBmaWxsZWRCdXR0b25PbkNhbnZhcyB7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuXG4gICY6YWN0aXZlIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgfVxufVxuXG4kdGhlbWUtZmlsdGVyOiBcImludmVydCg5MyUpIGh1ZS1yb3RhdGUoMTgwZGVnKVwiO1xuJHJpZ2h0LXNpZGViYXItd2lkdGg6IFwiMzAycHhcIjtcblxuOmV4cG9ydCB7XG4gIHRoZW1lRmlsdGVyOiB1bnF1b3RlKCR0aGVtZS1maWx0ZXIpO1xuICByaWdodFNpZGViYXJXaWR0aDogdW5xdW90ZSgkcmlnaHQtc2lkZWJhci13aWR0aCk7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vY3NzL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuXG4kdmVydGljYWxCcmVha3BvaW50OiA4NjFweDtcblxuLmV4Y2FsaWRyYXcge1xuICAuTW9kYWwuRGlhbG9nLnR0ZC1kaWFsb2cge1xuICAgIHBhZGRpbmc6IDEuMjVyZW07XG5cbiAgICAmLkRpYWxvZy0tZnVsbHNjcmVlbiB7XG4gICAgICBtYXJnaW4tdG9wOiAwO1xuICAgIH1cblxuICAgIC5Jc2xhbmQge1xuICAgICAgcGFkZGluZy1pbmxpbmU6IDAgIWltcG9ydGFudDtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgZmxleDogMSAxIGF1dG87XG4gICAgICBib3gtc2hhZG93OiBub25lO1xuICAgIH1cblxuICAgIC5Nb2RhbF9fY29udGVudCB7XG4gICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuXG4gICAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAkdmVydGljYWxCcmVha3BvaW50KSB7XG4gICAgICAgIG1heC1oZWlnaHQ6IDc1MHB4O1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLkRpYWxvZ19fY29udGVudCB7XG4gICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG4gIH1cblxuICAudHRkLWRpYWxvZy1kZXNjIHtcbiAgICBmb250LXNpemU6IDE1cHg7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICB9XG5cbiAgLnR0ZC1kaWFsb2ctdGFicy1yb290IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICB9XG5cbiAgLnR0ZC1kaWFsb2ctdGFiLXRyaWdnZXIge1xuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTtcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiAwO1xuICAgIGhlaWdodDogMi44NzVyZW07XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICBsZXR0ZXItc3BhY2luZzogMC40cHg7XG5cbiAgICAmW2RhdGEtc3RhdGU9XCJhY3RpdmVcIl0ge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgIH1cbiAgfVxuXG4gIC50dGQtZGlhbG9nLXRyaWdnZXJzIHtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gICAgcGFkZGluZy1pbmxpbmU6IDIuNXJlbTtcbiAgfVxuXG4gIC50dGQtZGlhbG9nLWNvbnRlbnQge1xuICAgIHBhZGRpbmctaW5saW5lOiAyLjVyZW07XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAgICZbaGlkZGVuXSB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gIC50dGQtZGlhbG9nLWlucHV0IHtcbiAgICB3aWR0aDogYXV0bztcbiAgICBoZWlnaHQ6IDEwcmVtO1xuICAgIHJlc2l6ZTogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1kaWFsb2ctYm9yZGVyLWNvbG9yKTtcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgcGFkZGluZzogMC44NXJlbTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XG5cbiAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAkdmVydGljYWxCcmVha3BvaW50KSB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICB9XG4gIH1cblxuICAudHRkLWRpYWxvZy1vdXRwdXQtd3JhcHBlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHBhZGRpbmc6IDAuODVyZW07XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FZQUFBQWY4LzloQUFBQU1VbEVRVlE0VDJOa1lHQVFZY0FQM3VDVFpodzFnR0dZaEFHQlpJQS9uWURDZ0JEQW05QkdEV0FBSnlSQ2dMYUJDQUFnWHdpeHpBUzBwZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKVxuICAgICAgbGVmdCBjZW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZGlhbG9nLWJvcmRlci1jb2xvcik7XG5cbiAgICBoZWlnaHQ6IDQwMHB4O1xuICAgIHdpZHRoOiBhdXRvO1xuXG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogJHZlcnRpY2FsQnJlYWtwb2ludCkge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAvLyBhY3RzIGFzIG1pbi1oZWlnaHRcbiAgICAgIGhlaWdodDogMjAwcHg7XG4gICAgfVxuXG4gICAgY2FudmFzIHtcbiAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gICAgfVxuICB9XG5cbiAgLnR0ZC1kaWFsb2ctb3V0cHV0LWNhbnZhcy1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgZmxleC1ncm93OiAxO1xuICB9XG5cbiAgLnR0ZC1kaWFsb2ctb3V0cHV0LWVycm9yIHtcbiAgICBjb2xvcjogcmVkO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgZm9udC1zaXplOiAzMHB4O1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxMDtcblxuICAgIHAge1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIGZvbnQtZmFtaWx5OiBDYXNjYWRpYTtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgcGFkZGluZzogMCAxMHB4O1xuICAgIH1cbiAgfVxuXG4gIC50dGQtZGlhbG9nLXBhbmVscyB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuXG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogJHZlcnRpY2FsQnJlYWtwb2ludCkge1xuICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgIGdhcDogNHJlbTtcbiAgICB9XG4gIH1cblxuICAudHRkLWRpYWxvZy1wYW5lbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgJl9faGVhZGVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBtYXJnaW46IDBweCA0cHggNHB4IDRweDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBnYXA6IDFyZW07XG5cbiAgICAgIGxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpmaXJzdC1jaGlsZCB7XG4gICAgICAudHRkLWRpYWxvZy1wYW5lbC1idXR0b24tY29udGFpbmVyOm5vdCguaW52aXNpYmxlKSB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRyZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogJHZlcnRpY2FsQnJlYWtwb2ludCkge1xuICAgICAgLnR0ZC1kaWFsb2ctcGFuZWwtYnV0dG9uLWNvbnRhaW5lcjpub3QoLmludmlzaWJsZSkge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW0gIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0ZXh0YXJlYSB7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICByZXNpemU6IG5vbmU7XG4gICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWRpYWxvZy1ib3JkZXItY29sb3IpO1xuICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgcGFkZGluZzogMC44NXJlbTtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XG5cbiAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6ICR2ZXJ0aWNhbEJyZWFrcG9pbnQpIHtcbiAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgIGhlaWdodDogMTByZW07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLnR0ZC1kaWFsb2ctcGFuZWwtYnV0dG9uLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG5cbiAgICAmLmludmlzaWJsZSB7XG4gICAgICAudHRkLWRpYWxvZy1wYW5lbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuXG4gICAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6ICR2ZXJ0aWNhbEJyZWFrcG9pbnQpIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAudHRkLWRpYWxvZy1wYW5lbC1idXR0b24ge1xuICAgICYuZXhjYWxpZHJhdy1idXR0b24ge1xuICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgaGVpZ2h0OiAyLjVyZW07XG5cbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGNvbG9yOiAkb2Mtd2hpdGU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXIpO1xuICAgICAgfVxuICAgICAgJjphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpO1xuICAgICAgfVxuXG4gICAgICAmOmRpc2FibGVkIHtcbiAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6ICR2ZXJ0aWNhbEJyZWFrcG9pbnQpIHtcbiAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgIG1pbi13aWR0aDogNy41cmVtO1xuICAgICAgfVxuXG4gICAgICBAYXQtcm9vdCAuZXhjYWxpZHJhdy50aGVtZS0tZGFyayN7Jn0ge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS0xMDApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgIGRpdiB7XG4gICAgICBkaXNwbGF5OiBjb250ZW50cztcblxuICAgICAgJi5pbnZpc2libGUge1xuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgICYuU3Bpbm5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBpbnNldDogMDtcblxuICAgICAgICAtLXNwaW5uZXItY29sb3I6IHdoaXRlO1xuXG4gICAgICAgIEBhdC1yb290IC5leGNhbGlkcmF3LnRoZW1lLS1kYXJrI3smfSB7XG4gICAgICAgICAgLS1zcGlubmVyLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3BhbiB7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMC41cmVtO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC50dGQtZGlhbG9nLXN1Ym1pdC1zaG9ydGN1dCB7XG4gICAgbWFyZ2luLWlubGluZS1zdGFydDogMC41cmVtO1xuICAgIGZvbnQtc2l6ZTogMC42MjVyZW07XG4gICAgb3BhY2l0eTogMC42O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiAwLjEyNXJlbTtcblxuICAgICZfX2tleSB7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xuICAgICAgcGFkZGluZzogMnB4IDNweDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB9XG4gIH1cbn1cbiIsIi8vXG4vL1xuLy8gIPCdl5Yg8J2XoiDwnZefIPCdl6Ig8J2XpVxuLy8gIHYgMS45LjFcbi8vXG4vLyAg4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cblxuLy8gIEdlbmVyYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXdoaXRlOiAgICAgICAgICNmZmZmZmY7XG4kb2MtYmxhY2s6ICAgICAgICAgIzAwMDAwMDtcblxuXG4vLyAgR3JheVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JheS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmOWZhLFxuICBcIjFcIjogI2YxZjNmNSxcbiAgXCIyXCI6ICNlOWVjZWYsXG4gIFwiM1wiOiAjZGVlMmU2LFxuICBcIjRcIjogI2NlZDRkYSxcbiAgXCI1XCI6ICNhZGI1YmQsXG4gIFwiNlwiOiAjODY4ZTk2LFxuICBcIjdcIjogIzQ5NTA1NyxcbiAgXCI4XCI6ICMzNDNhNDAsXG4gIFwiOVwiOiAjMjEyNTI5XG4pO1xuXG4kb2MtZ3JheS0wOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMFwiKTtcbiRvYy1ncmF5LTE6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIxXCIpO1xuJG9jLWdyYXktMjogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjJcIik7XG4kb2MtZ3JheS0zOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiM1wiKTtcbiRvYy1ncmF5LTQ6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI0XCIpO1xuJG9jLWdyYXktNTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjVcIik7XG4kb2MtZ3JheS02OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNlwiKTtcbiRvYy1ncmF5LTc6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI3XCIpO1xuJG9jLWdyYXktODogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjhcIik7XG4kb2MtZ3JheS05OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgUmVkXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1yZWQtbGlzdDogKFxuICBcIjBcIjogI2ZmZjVmNSxcbiAgXCIxXCI6ICNmZmUzZTMsXG4gIFwiMlwiOiAjZmZjOWM5LFxuICBcIjNcIjogI2ZmYThhOCxcbiAgXCI0XCI6ICNmZjg3ODcsXG4gIFwiNVwiOiAjZmY2YjZiLFxuICBcIjZcIjogI2ZhNTI1MixcbiAgXCI3XCI6ICNmMDNlM2UsXG4gIFwiOFwiOiAjZTAzMTMxLFxuICBcIjlcIjogI2M5MmEyYVxuKTtcblxuJG9jLXJlZC0wOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIwXCIpO1xuJG9jLXJlZC0xOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIxXCIpO1xuJG9jLXJlZC0yOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIyXCIpO1xuJG9jLXJlZC0zOiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCIzXCIpO1xuJG9jLXJlZC00OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI0XCIpO1xuJG9jLXJlZC01OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI1XCIpO1xuJG9jLXJlZC02OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI2XCIpO1xuJG9jLXJlZC03OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI3XCIpO1xuJG9jLXJlZC04OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI4XCIpO1xuJG9jLXJlZC05OiBtYXAtZ2V0KCRvYy1yZWQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBQaW5rXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1waW5rLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmYwZjYsXG4gIFwiMVwiOiAjZmZkZWViLFxuICBcIjJcIjogI2ZjYzJkNyxcbiAgXCIzXCI6ICNmYWEyYzEsXG4gIFwiNFwiOiAjZjc4M2FjLFxuICBcIjVcIjogI2YwNjU5NSxcbiAgXCI2XCI6ICNlNjQ5ODAsXG4gIFwiN1wiOiAjZDYzMzZjLFxuICBcIjhcIjogI2MyMjU1YyxcbiAgXCI5XCI6ICNhNjFlNGRcbik7XG5cbiRvYy1waW5rLTA6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIwXCIpO1xuJG9jLXBpbmstMTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjFcIik7XG4kb2MtcGluay0yOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMlwiKTtcbiRvYy1waW5rLTM6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIzXCIpO1xuJG9jLXBpbmstNDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjRcIik7XG4kb2MtcGluay01OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNVwiKTtcbiRvYy1waW5rLTY6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI2XCIpO1xuJG9jLXBpbmstNzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjdcIik7XG4kb2MtcGluay04OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiOFwiKTtcbiRvYy1waW5rLTk6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBHcmFwZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtZ3JhcGUtbGlzdDogKFxuICBcIjBcIjogI2Y4ZjBmYyxcbiAgXCIxXCI6ICNmM2Q5ZmEsXG4gIFwiMlwiOiAjZWViZWZhLFxuICBcIjNcIjogI2U1OTlmNyxcbiAgXCI0XCI6ICNkYTc3ZjIsXG4gIFwiNVwiOiAjY2M1ZGU4LFxuICBcIjZcIjogI2JlNGJkYixcbiAgXCI3XCI6ICNhZTNlYzksXG4gIFwiOFwiOiAjOWMzNmI1LFxuICBcIjlcIjogIzg2MmU5Y1xuKTtcblxuJG9jLWdyYXBlLTA6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMFwiKTtcbiRvYy1ncmFwZS0xOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjFcIik7XG4kb2MtZ3JhcGUtMjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIyXCIpO1xuJG9jLWdyYXBlLTM6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiM1wiKTtcbiRvYy1ncmFwZS00OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjRcIik7XG4kb2MtZ3JhcGUtNTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI1XCIpO1xuJG9jLWdyYXBlLTY6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNlwiKTtcbiRvYy1ncmFwZS03OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjdcIik7XG4kb2MtZ3JhcGUtODogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI4XCIpO1xuJG9jLWdyYXBlLTk6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVmlvbGV0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy12aW9sZXQtbGlzdDogKFxuICBcIjBcIjogI2YzZjBmZixcbiAgXCIxXCI6ICNlNWRiZmYsXG4gIFwiMlwiOiAjZDBiZmZmLFxuICBcIjNcIjogI2IxOTdmYyxcbiAgXCI0XCI6ICM5Nzc1ZmEsXG4gIFwiNVwiOiAjODQ1ZWY3LFxuICBcIjZcIjogIzc5NTBmMixcbiAgXCI3XCI6ICM3MDQ4ZTgsXG4gIFwiOFwiOiAjNjc0MWQ5LFxuICBcIjlcIjogIzVmM2RjNFxuKTtcblxuJG9jLXZpb2xldC0wOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIwXCIpO1xuJG9jLXZpb2xldC0xOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIxXCIpO1xuJG9jLXZpb2xldC0yOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIyXCIpO1xuJG9jLXZpb2xldC0zOiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCIzXCIpO1xuJG9jLXZpb2xldC00OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI0XCIpO1xuJG9jLXZpb2xldC01OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI1XCIpO1xuJG9jLXZpb2xldC02OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI2XCIpO1xuJG9jLXZpb2xldC03OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI3XCIpO1xuJG9jLXZpb2xldC04OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI4XCIpO1xuJG9jLXZpb2xldC05OiBtYXAtZ2V0KCRvYy12aW9sZXQtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBJbmRpZ29cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWluZGlnby1saXN0OiAoXG4gIFwiMFwiOiAjZWRmMmZmLFxuICBcIjFcIjogI2RiZTRmZixcbiAgXCIyXCI6ICNiYWM4ZmYsXG4gIFwiM1wiOiAjOTFhN2ZmLFxuICBcIjRcIjogIzc0OGZmYyxcbiAgXCI1XCI6ICM1YzdjZmEsXG4gIFwiNlwiOiAjNGM2ZWY1LFxuICBcIjdcIjogIzQyNjNlYixcbiAgXCI4XCI6ICMzYjViZGIsXG4gIFwiOVwiOiAjMzY0ZmM3XG4pO1xuXG4kb2MtaW5kaWdvLTA6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjBcIik7XG4kb2MtaW5kaWdvLTE6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjFcIik7XG4kb2MtaW5kaWdvLTI6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjJcIik7XG4kb2MtaW5kaWdvLTM6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjNcIik7XG4kb2MtaW5kaWdvLTQ6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjRcIik7XG4kb2MtaW5kaWdvLTU6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjVcIik7XG4kb2MtaW5kaWdvLTY6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjZcIik7XG4kb2MtaW5kaWdvLTc6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjdcIik7XG4kb2MtaW5kaWdvLTg6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjhcIik7XG4kb2MtaW5kaWdvLTk6IG1hcC1nZXQoJG9jLWluZGlnby1saXN0LCBcIjlcIik7XG5cblxuLy8gIEJsdWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWJsdWUtbGlzdDogKFxuICBcIjBcIjogI2U3ZjVmZixcbiAgXCIxXCI6ICNkMGViZmYsXG4gIFwiMlwiOiAjYTVkOGZmLFxuICBcIjNcIjogIzc0YzBmYyxcbiAgXCI0XCI6ICM0ZGFiZjcsXG4gIFwiNVwiOiAjMzM5YWYwLFxuICBcIjZcIjogIzIyOGJlNixcbiAgXCI3XCI6ICMxYzdlZDYsXG4gIFwiOFwiOiAjMTk3MWMyLFxuICBcIjlcIjogIzE4NjRhYlxuKTtcblxuJG9jLWJsdWUtMDogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjBcIik7XG4kb2MtYmx1ZS0xOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMVwiKTtcbiRvYy1ibHVlLTI6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIyXCIpO1xuJG9jLWJsdWUtMzogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjNcIik7XG4kb2MtYmx1ZS00OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNFwiKTtcbiRvYy1ibHVlLTU6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI1XCIpO1xuJG9jLWJsdWUtNjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjZcIik7XG4kb2MtYmx1ZS03OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiN1wiKTtcbiRvYy1ibHVlLTg6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI4XCIpO1xuJG9jLWJsdWUtOTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIEN5YW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWN5YW4tbGlzdDogKFxuICBcIjBcIjogI2UzZmFmYyxcbiAgXCIxXCI6ICNjNWY2ZmEsXG4gIFwiMlwiOiAjOTllOWYyLFxuICBcIjNcIjogIzY2ZDllOCxcbiAgXCI0XCI6ICMzYmM5ZGIsXG4gIFwiNVwiOiAjMjJiOGNmLFxuICBcIjZcIjogIzE1YWFiZixcbiAgXCI3XCI6ICMxMDk4YWQsXG4gIFwiOFwiOiAjMGM4NTk5LFxuICBcIjlcIjogIzBiNzI4NVxuKTtcblxuJG9jLWN5YW4tMDogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjBcIik7XG4kb2MtY3lhbi0xOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMVwiKTtcbiRvYy1jeWFuLTI6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIyXCIpO1xuJG9jLWN5YW4tMzogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjNcIik7XG4kb2MtY3lhbi00OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNFwiKTtcbiRvYy1jeWFuLTU6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI1XCIpO1xuJG9jLWN5YW4tNjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjZcIik7XG4kb2MtY3lhbi03OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiN1wiKTtcbiRvYy1jeWFuLTg6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI4XCIpO1xuJG9jLWN5YW4tOTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIFRlYWxcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXRlYWwtbGlzdDogKFxuICBcIjBcIjogI2U2ZmNmNSxcbiAgXCIxXCI6ICNjM2ZhZTgsXG4gIFwiMlwiOiAjOTZmMmQ3LFxuICBcIjNcIjogIzYzZTZiZSxcbiAgXCI0XCI6ICMzOGQ5YTksXG4gIFwiNVwiOiAjMjBjOTk3LFxuICBcIjZcIjogIzEyYjg4NixcbiAgXCI3XCI6ICMwY2E2NzgsXG4gIFwiOFwiOiAjMDk5MjY4LFxuICBcIjlcIjogIzA4N2Y1YlxuKTtcblxuJG9jLXRlYWwtMDogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjBcIik7XG4kb2MtdGVhbC0xOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMVwiKTtcbiRvYy10ZWFsLTI6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIyXCIpO1xuJG9jLXRlYWwtMzogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjNcIik7XG4kb2MtdGVhbC00OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNFwiKTtcbiRvYy10ZWFsLTU6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI1XCIpO1xuJG9jLXRlYWwtNjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjZcIik7XG4kb2MtdGVhbC03OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiN1wiKTtcbiRvYy10ZWFsLTg6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI4XCIpO1xuJG9jLXRlYWwtOTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyZWVuXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmVlbi1saXN0OiAoXG4gIFwiMFwiOiAjZWJmYmVlLFxuICBcIjFcIjogI2QzZjlkOCxcbiAgXCIyXCI6ICNiMmYyYmIsXG4gIFwiM1wiOiAjOGNlOTlhLFxuICBcIjRcIjogIzY5ZGI3YyxcbiAgXCI1XCI6ICM1MWNmNjYsXG4gIFwiNlwiOiAjNDBjMDU3LFxuICBcIjdcIjogIzM3YjI0ZCxcbiAgXCI4XCI6ICMyZjllNDQsXG4gIFwiOVwiOiAjMmI4YTNlXG4pO1xuXG4kb2MtZ3JlZW4tMDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIwXCIpO1xuJG9jLWdyZWVuLTE6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmVlbi0yOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjJcIik7XG4kb2MtZ3JlZW4tMzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIzXCIpO1xuJG9jLWdyZWVuLTQ6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmVlbi01OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjVcIik7XG4kb2MtZ3JlZW4tNjogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI2XCIpO1xuJG9jLWdyZWVuLTc6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmVlbi04OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjhcIik7XG4kb2MtZ3JlZW4tOTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBMaW1lXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1saW1lLWxpc3Q6IChcbiAgXCIwXCI6ICNmNGZjZTMsXG4gIFwiMVwiOiAjZTlmYWM4LFxuICBcIjJcIjogI2Q4ZjVhMixcbiAgXCIzXCI6ICNjMGViNzUsXG4gIFwiNFwiOiAjYTllMzRiLFxuICBcIjVcIjogIzk0ZDgyZCxcbiAgXCI2XCI6ICM4MmM5MWUsXG4gIFwiN1wiOiAjNzRiODE2LFxuICBcIjhcIjogIzY2YTgwZixcbiAgXCI5XCI6ICM1Yzk0MGRcbik7XG5cbiRvYy1saW1lLTA6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIwXCIpO1xuJG9jLWxpbWUtMTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjFcIik7XG4kb2MtbGltZS0yOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMlwiKTtcbiRvYy1saW1lLTM6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIzXCIpO1xuJG9jLWxpbWUtNDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjRcIik7XG4kb2MtbGltZS01OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNVwiKTtcbiRvYy1saW1lLTY6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI2XCIpO1xuJG9jLWxpbWUtNzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjdcIik7XG4kb2MtbGltZS04OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiOFwiKTtcbiRvYy1saW1lLTk6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBZZWxsb3dcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXllbGxvdy1saXN0OiAoXG4gIFwiMFwiOiAjZmZmOWRiLFxuICBcIjFcIjogI2ZmZjNiZixcbiAgXCIyXCI6ICNmZmVjOTksXG4gIFwiM1wiOiAjZmZlMDY2LFxuICBcIjRcIjogI2ZmZDQzYixcbiAgXCI1XCI6ICNmY2M0MTksXG4gIFwiNlwiOiAjZmFiMDA1LFxuICBcIjdcIjogI2Y1OWYwMCxcbiAgXCI4XCI6ICNmMDhjMDAsXG4gIFwiOVwiOiAjZTY3NzAwXG4pO1xuXG4kb2MteWVsbG93LTA6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjBcIik7XG4kb2MteWVsbG93LTE6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjFcIik7XG4kb2MteWVsbG93LTI6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjJcIik7XG4kb2MteWVsbG93LTM6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjNcIik7XG4kb2MteWVsbG93LTQ6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjRcIik7XG4kb2MteWVsbG93LTU6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjVcIik7XG4kb2MteWVsbG93LTY6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjZcIik7XG4kb2MteWVsbG93LTc6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjdcIik7XG4kb2MteWVsbG93LTg6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjhcIik7XG4kb2MteWVsbG93LTk6IG1hcC1nZXQoJG9jLXllbGxvdy1saXN0LCBcIjlcIik7XG5cblxuLy8gIE9yYW5nZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtb3JhbmdlLWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY0ZTYsXG4gIFwiMVwiOiAjZmZlOGNjLFxuICBcIjJcIjogI2ZmZDhhOCxcbiAgXCIzXCI6ICNmZmMwNzgsXG4gIFwiNFwiOiAjZmZhOTRkLFxuICBcIjVcIjogI2ZmOTIyYixcbiAgXCI2XCI6ICNmZDdlMTQsXG4gIFwiN1wiOiAjZjc2NzA3LFxuICBcIjhcIjogI2U4NTkwYyxcbiAgXCI5XCI6ICNkOTQ4MGZcbik7XG5cbiRvYy1vcmFuZ2UtMDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMFwiKTtcbiRvYy1vcmFuZ2UtMTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMVwiKTtcbiRvYy1vcmFuZ2UtMjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiMlwiKTtcbiRvYy1vcmFuZ2UtMzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiM1wiKTtcbiRvYy1vcmFuZ2UtNDogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNFwiKTtcbiRvYy1vcmFuZ2UtNTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNVwiKTtcbiRvYy1vcmFuZ2UtNjogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiNlwiKTtcbiRvYy1vcmFuZ2UtNzogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiN1wiKTtcbiRvYy1vcmFuZ2UtODogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOFwiKTtcbiRvYy1vcmFuZ2UtOTogbWFwLWdldCgkb2Mtb3JhbmdlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ29sb3IgbGlzdFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY29sb3Itc3BlY3RydW06ICAgOTtcblxuJG9jLWNvbG9yLWxpc3Q6IChcbiAgJG9jLWdyYXktbGlzdDogICAgICBcImdyYXlcIixcbiAgJG9jLXJlZC1saXN0OiAgICAgIFwicmVkXCIsXG4gICRvYy1waW5rLWxpc3Q6ICAgICAgXCJwaW5rXCIsXG4gICRvYy1ncmFwZS1saXN0OiAgICAgIFwiZ3JhcGVcIixcbiAgJG9jLXZpb2xldC1saXN0OiAgICAgIFwidmlvbGV0XCIsXG4gICRvYy1pbmRpZ28tbGlzdDogICAgICBcImluZGlnb1wiLFxuICAkb2MtYmx1ZS1saXN0OiAgICAgIFwiYmx1ZVwiLFxuICAkb2MtY3lhbi1saXN0OiAgICAgIFwiY3lhblwiLFxuICAkb2MtdGVhbC1saXN0OiAgICAgIFwidGVhbFwiLFxuICAkb2MtZ3JlZW4tbGlzdDogICAgICBcImdyZWVuXCIsXG4gICRvYy1saW1lLWxpc3Q6ICAgICAgXCJsaW1lXCIsXG4gICRvYy15ZWxsb3ctbGlzdDogICAgICBcInllbGxvd1wiLFxuICAkb2Mtb3JhbmdlLWxpc3Q6ICAgICAgXCJvcmFuZ2VcIlxuKTtcbiJdfQ== */", "import { Dialog } from \"../Dialog\";\nimport { useApp, useExcalidrawSetAppState } from \"../App\";\nimport MermaidToExcalidraw from \"./MermaidToExcalidraw\";\nimport TTDDialogTabs from \"./TTDDialogTabs\";\nimport { ChangeEventHandler, useEffect, useRef, useState } from \"react\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { TTDDialogTabTriggers } from \"./TTDDialogTabTriggers\";\nimport { TTDDialogTabTrigger } from \"./TTDDialogTabTrigger\";\nimport { TTDDialogTab } from \"./TTDDialogTab\";\nimport { t } from \"../../i18n\";\nimport { TTDDialogInput } from \"./TTDDialogInput\";\nimport { TTDDialogOutput } from \"./TTDDialogOutput\";\nimport { TTDDialogPanel } from \"./TTDDialogPanel\";\nimport { TTDDialogPanels } from \"./TTDDialogPanels\";\nimport {\n  MermaidToExcalidrawLibProps,\n  convertMermaidToExcalidraw,\n  insertToEditor,\n  saveMermaidDataToStorage,\n} from \"./common\";\nimport { NonDeletedExcalidrawElement } from \"../../element/types\";\nimport { BinaryFiles } from \"../../types\";\nimport { ArrowRightIcon } from \"../icons\";\n\nimport \"./TTDDialog.scss\";\nimport { isFiniteNumber } from \"../../utils\";\nimport { atom, useAtom } from \"jotai\";\nimport { trackEvent } from \"../../analytics\";\nimport { InlineIcon } from \"../InlineIcon\";\nimport { TTDDialogSubmitShortcut } from \"./TTDDialogSubmitShortcut\";\n\nconst MIN_PROMPT_LENGTH = 3;\nconst MAX_PROMPT_LENGTH = 1000;\n\nconst rateLimitsAtom = atom<{\n  rateLimit: number;\n  rateLimitRemaining: number;\n} | null>(null);\n\nconst ttdGenerationAtom = atom<{\n  generatedResponse: string | null;\n  prompt: string | null;\n} | null>(null);\n\ntype OnTestSubmitRetValue = {\n  rateLimit?: number | null;\n  rateLimitRemaining?: number | null;\n} & (\n  | { generatedResponse: string | undefined; error?: null | undefined }\n  | {\n      error: Error;\n      generatedResponse?: null | undefined;\n    }\n);\n\nexport const TTDDialog = (\n  props:\n    | {\n        onTextSubmit(value: string): Promise<OnTestSubmitRetValue>;\n      }\n    | { __fallback: true },\n) => {\n  const appState = useUIAppState();\n\n  if (appState.openDialog?.name !== \"ttd\") {\n    return null;\n  }\n\n  return <TTDDialogBase {...props} tab={appState.openDialog.tab} />;\n};\n\n/**\n * Text to diagram (TTD) dialog\n */\nexport const TTDDialogBase = withInternalFallback(\n  \"TTDDialogBase\",\n  ({\n    tab,\n    ...rest\n  }: {\n    tab: \"text-to-diagram\" | \"mermaid\";\n  } & (\n    | {\n        onTextSubmit(value: string): Promise<OnTestSubmitRetValue>;\n      }\n    | { __fallback: true }\n  )) => {\n    const app = useApp();\n    const setAppState = useExcalidrawSetAppState();\n\n    const someRandomDivRef = useRef<HTMLDivElement>(null);\n\n    const [ttdGeneration, setTtdGeneration] = useAtom(ttdGenerationAtom);\n\n    const [text, setText] = useState(ttdGeneration?.prompt ?? \"\");\n\n    const prompt = text.trim();\n\n    const handleTextChange: ChangeEventHandler<HTMLTextAreaElement> = (\n      event,\n    ) => {\n      setText(event.target.value);\n      setTtdGeneration((s) => ({\n        generatedResponse: s?.generatedResponse ?? null,\n        prompt: event.target.value,\n      }));\n    };\n\n    const [onTextSubmitInProgess, setOnTextSubmitInProgess] = useState(false);\n    const [rateLimits, setRateLimits] = useAtom(rateLimitsAtom);\n\n    const onGenerate = async () => {\n      if (\n        prompt.length > MAX_PROMPT_LENGTH ||\n        prompt.length < MIN_PROMPT_LENGTH ||\n        onTextSubmitInProgess ||\n        rateLimits?.rateLimitRemaining === 0 ||\n        // means this is not a text-to-diagram dialog (needed for TS only)\n        \"__fallback\" in rest\n      ) {\n        if (prompt.length < MIN_PROMPT_LENGTH) {\n          setError(\n            new Error(\n              `Prompt is too short (min ${MIN_PROMPT_LENGTH} characters)`,\n            ),\n          );\n        }\n        if (prompt.length > MAX_PROMPT_LENGTH) {\n          setError(\n            new Error(\n              `Prompt is too long (max ${MAX_PROMPT_LENGTH} characters)`,\n            ),\n          );\n        }\n\n        return;\n      }\n\n      try {\n        setOnTextSubmitInProgess(true);\n\n        trackEvent(\"ai\", \"generate\", \"ttd\");\n\n        const { generatedResponse, error, rateLimit, rateLimitRemaining } =\n          await rest.onTextSubmit(prompt);\n\n        if (typeof generatedResponse === \"string\") {\n          setTtdGeneration((s) => ({\n            generatedResponse,\n            prompt: s?.prompt ?? null,\n          }));\n        }\n\n        if (isFiniteNumber(rateLimit) && isFiniteNumber(rateLimitRemaining)) {\n          setRateLimits({ rateLimit, rateLimitRemaining });\n        }\n\n        if (error) {\n          setError(error);\n          return;\n        }\n        if (!generatedResponse) {\n          setError(new Error(\"Generation failed\"));\n          return;\n        }\n\n        try {\n          await convertMermaidToExcalidraw({\n            canvasRef: someRandomDivRef,\n            data,\n            mermaidToExcalidrawLib,\n            setError,\n            mermaidDefinition: generatedResponse,\n          });\n          trackEvent(\"ai\", \"mermaid parse success\", \"ttd\");\n        } catch (error: any) {\n          console.info(\n            `%cTTD mermaid render errror: ${error.message}`,\n            \"color: red\",\n          );\n          console.info(\n            `>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\\nTTD mermaid definition render errror: ${error.message}`,\n            \"color: yellow\",\n          );\n          trackEvent(\"ai\", \"mermaid parse failed\", \"ttd\");\n          setError(\n            new Error(\n              \"Generated an invalid diagram :(. You may also try a different prompt.\",\n            ),\n          );\n        }\n      } catch (error: any) {\n        let message: string | undefined = error.message;\n        if (!message || message === \"Failed to fetch\") {\n          message = \"Request failed\";\n        }\n        setError(new Error(message));\n      } finally {\n        setOnTextSubmitInProgess(false);\n      }\n    };\n\n    const refOnGenerate = useRef(onGenerate);\n    refOnGenerate.current = onGenerate;\n\n    const [mermaidToExcalidrawLib, setMermaidToExcalidrawLib] =\n      useState<MermaidToExcalidrawLibProps>({\n        loaded: false,\n        api: import(\"@excalidraw/mermaid-to-excalidraw\"),\n      });\n\n    useEffect(() => {\n      const fn = async () => {\n        await mermaidToExcalidrawLib.api;\n        setMermaidToExcalidrawLib((prev) => ({ ...prev, loaded: true }));\n      };\n      fn();\n    }, [mermaidToExcalidrawLib.api]);\n\n    const data = useRef<{\n      elements: readonly NonDeletedExcalidrawElement[];\n      files: BinaryFiles | null;\n    }>({ elements: [], files: null });\n\n    const [error, setError] = useState<Error | null>(null);\n\n    return (\n      <Dialog\n        className=\"ttd-dialog\"\n        onCloseRequest={() => {\n          app.setOpenDialog(null);\n        }}\n        size={1200}\n        title={false}\n        {...rest}\n        autofocus={false}\n      >\n        <TTDDialogTabs dialog=\"ttd\" tab={tab}>\n          {\"__fallback\" in rest && rest.__fallback ? (\n            <p className=\"dialog-mermaid-title\">{t(\"mermaid.title\")}</p>\n          ) : (\n            <TTDDialogTabTriggers>\n              <TTDDialogTabTrigger tab=\"text-to-diagram\">\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                  {t(\"labels.textToDiagram\")}\n                  <div\n                    style={{\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      padding: \"1px 6px\",\n                      marginLeft: \"10px\",\n                      fontSize: 10,\n                      borderRadius: \"12px\",\n                      background: \"pink\",\n                      color: \"#000\",\n                    }}\n                  >\n                    AI Beta\n                  </div>\n                </div>\n              </TTDDialogTabTrigger>\n              <TTDDialogTabTrigger tab=\"mermaid\">Mermaid</TTDDialogTabTrigger>\n            </TTDDialogTabTriggers>\n          )}\n\n          <TTDDialogTab className=\"ttd-dialog-content\" tab=\"mermaid\">\n            <MermaidToExcalidraw\n              mermaidToExcalidrawLib={mermaidToExcalidrawLib}\n            />\n          </TTDDialogTab>\n          {!(\"__fallback\" in rest) && (\n            <TTDDialogTab className=\"ttd-dialog-content\" tab=\"text-to-diagram\">\n              <div className=\"ttd-dialog-desc\">\n                Currently we use Mermaid as a middle step, so you'll get best\n                results if you describe a diagram, workflow, flow chart, and\n                similar.\n              </div>\n              <TTDDialogPanels>\n                <TTDDialogPanel\n                  label={t(\"labels.prompt\")}\n                  panelAction={{\n                    action: onGenerate,\n                    label: \"Generate\",\n                    icon: ArrowRightIcon,\n                  }}\n                  onTextSubmitInProgess={onTextSubmitInProgess}\n                  panelActionDisabled={\n                    prompt.length > MAX_PROMPT_LENGTH ||\n                    rateLimits?.rateLimitRemaining === 0\n                  }\n                  renderTopRight={() => {\n                    if (!rateLimits) {\n                      return null;\n                    }\n\n                    return (\n                      <div\n                        className=\"ttd-dialog-rate-limit\"\n                        style={{\n                          fontSize: 12,\n                          marginLeft: \"auto\",\n                          color:\n                            rateLimits.rateLimitRemaining === 0\n                              ? \"var(--color-danger)\"\n                              : undefined,\n                        }}\n                      >\n                        {rateLimits.rateLimitRemaining} requests left today\n                      </div>\n                    );\n                  }}\n                  renderSubmitShortcut={() => <TTDDialogSubmitShortcut />}\n                  renderBottomRight={() => {\n                    if (typeof ttdGeneration?.generatedResponse === \"string\") {\n                      return (\n                        <div\n                          className=\"excalidraw-link\"\n                          style={{ marginLeft: \"auto\", fontSize: 14 }}\n                          onClick={() => {\n                            if (\n                              typeof ttdGeneration?.generatedResponse ===\n                              \"string\"\n                            ) {\n                              saveMermaidDataToStorage(\n                                ttdGeneration.generatedResponse,\n                              );\n                              setAppState({\n                                openDialog: { name: \"ttd\", tab: \"mermaid\" },\n                              });\n                            }\n                          }}\n                        >\n                          View as Mermaid\n                          <InlineIcon icon={ArrowRightIcon} />\n                        </div>\n                      );\n                    }\n                    const ratio = prompt.length / MAX_PROMPT_LENGTH;\n                    if (ratio > 0.8) {\n                      return (\n                        <div\n                          style={{\n                            marginLeft: \"auto\",\n                            fontSize: 12,\n                            fontFamily: \"monospace\",\n                            color:\n                              ratio > 1 ? \"var(--color-danger)\" : undefined,\n                          }}\n                        >\n                          Length: {prompt.length}/{MAX_PROMPT_LENGTH}\n                        </div>\n                      );\n                    }\n\n                    return null;\n                  }}\n                >\n                  <TTDDialogInput\n                    onChange={handleTextChange}\n                    input={text}\n                    placeholder={\"Describe what you want to see...\"}\n                    onKeyboardSubmit={() => {\n                      refOnGenerate.current();\n                    }}\n                  />\n                </TTDDialogPanel>\n                <TTDDialogPanel\n                  label=\"Preview\"\n                  panelAction={{\n                    action: () => {\n                      console.info(\"Panel action clicked\");\n                      insertToEditor({ app, data });\n                    },\n                    label: \"Insert\",\n                    icon: ArrowRightIcon,\n                  }}\n                >\n                  <TTDDialogOutput\n                    canvasRef={someRandomDivRef}\n                    error={error}\n                    loaded={mermaidToExcalidrawLib.loaded}\n                  />\n                </TTDDialogPanel>\n              </TTDDialogPanels>\n            </TTDDialogTab>\n          )}\n        </TTDDialogTabs>\n      </Dialog>\n    );\n  },\n);\n", "import clsx from \"clsx\";\nimport React from \"react\";\nimport { ActionManager } from \"../actions/manager\";\nimport {\n  CLASSES,\n  DEFAULT_SIDEBAR,\n  LIBRARY_SIDEBAR_WIDTH,\n  TOOL_TYPE,\n} from \"../constants\";\nimport { showSelectedShapeActions } from \"../element\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { Language, t } from \"../i18n\";\nimport { calculateScrollCenter } from \"../scene\";\nimport {\n  AppProps,\n  AppState,\n  ExcalidrawProps,\n  BinaryFiles,\n  UIAppState,\n  AppClassProperties,\n} from \"../types\";\nimport { capitalizeString, isShallowEqual } from \"../utils\";\nimport { SelectedShapeActions, ShapesSwitcher } from \"./Actions\";\nimport { ErrorDialog } from \"./ErrorDialog\";\nimport { ImageExportDialog } from \"./ImageExportDialog\";\nimport { FixedSideContainer } from \"./FixedSideContainer\";\nimport { HintViewer } from \"./HintViewer\";\nimport { Island } from \"./Island\";\nimport { LoadingMessage } from \"./LoadingMessage\";\nimport { LockButton } from \"./LockButton\";\nimport { MobileMenu } from \"./MobileMenu\";\nimport { PasteChartDialog } from \"./PasteChartDialog\";\nimport { Section } from \"./Section\";\nimport { HelpDialog } from \"./HelpDialog\";\nimport Stack from \"./Stack\";\nimport { UserList } from \"./UserList\";\nimport { JSONExportDialog } from \"./JSONExportDialog\";\nimport { PenModeButton } from \"./PenModeButton\";\nimport { trackEvent } from \"../analytics\";\nimport { useDevice } from \"./App\";\nimport { Stats } from \"./Stats\";\nimport { actionToggleStats } from \"../actions/actionToggleStats\";\nimport Footer from \"./footer/Footer\";\nimport { isSidebarDockedAtom } from \"./Sidebar/Sidebar\";\nimport { jotaiScope } from \"../jotai\";\nimport { Provider, useAtom, useAtomValue } from \"jotai\";\nimport MainMenu from \"./main-menu/MainMenu\";\nimport { ActiveConfirmDialog } from \"./ActiveConfirmDialog\";\nimport { OverwriteConfirmDialog } from \"./OverwriteConfirm/OverwriteConfirm\";\nimport { HandButton } from \"./HandButton\";\nimport { isHandToolActive } from \"../appState\";\nimport { TunnelsContext, useInitializeTunnels } from \"../context/tunnels\";\nimport { LibraryIcon } from \"./icons\";\nimport { UIAppStateContext } from \"../context/ui-appState\";\nimport { DefaultSidebar } from \"./DefaultSidebar\";\nimport { EyeDropper, activeEyeDropperAtom } from \"./EyeDropper\";\n\nimport \"./LayerUI.scss\";\nimport \"./Toolbar.scss\";\nimport { mutateElement } from \"../element/mutateElement\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\nimport Scene from \"../scene/Scene\";\nimport { LaserPointerButton } from \"./LaserPointerButton\";\nimport { MagicSettings } from \"./MagicSettings\";\nimport { TTDDialog } from \"./TTDDialog/TTDDialog\";\n\ninterface LayerUIProps {\n  actionManager: ActionManager;\n  appState: UIAppState;\n  files: BinaryFiles;\n  canvas: HTMLCanvasElement;\n  setAppState: React.Component<any, AppState>[\"setState\"];\n  elements: readonly NonDeletedExcalidrawElement[];\n  onLockToggle: () => void;\n  onHandToolToggle: () => void;\n  onPenModeToggle: AppClassProperties[\"togglePenMode\"];\n  showExitZenModeBtn: boolean;\n  langCode: Language[\"code\"];\n  renderTopRightUI?: ExcalidrawProps[\"renderTopRightUI\"];\n  renderCustomStats?: ExcalidrawProps[\"renderCustomStats\"];\n  UIOptions: AppProps[\"UIOptions\"];\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  renderWelcomeScreen: boolean;\n  children?: React.ReactNode;\n  app: AppClassProperties;\n  isCollaborating: boolean;\n  openAIKey: string | null;\n  isOpenAIKeyPersisted: boolean;\n  onOpenAIAPIKeyChange: (apiKey: string, shouldPersist: boolean) => void;\n  onMagicSettingsConfirm: (\n    apiKey: string,\n    shouldPersist: boolean,\n    source: \"tool\" | \"generation\" | \"settings\",\n  ) => void;\n}\n\nconst DefaultMainMenu: React.FC<{\n  UIOptions: AppProps[\"UIOptions\"];\n}> = ({ UIOptions }) => {\n  return (\n    <MainMenu __fallback>\n      <MainMenu.DefaultItems.LoadScene />\n      <MainMenu.DefaultItems.SaveToActiveFile />\n      {/* FIXME we should to test for this inside the item itself */}\n      {UIOptions.canvasActions.export && <MainMenu.DefaultItems.Export />}\n      {/* FIXME we should to test for this inside the item itself */}\n      {UIOptions.canvasActions.saveAsImage && (\n        <MainMenu.DefaultItems.SaveAsImage />\n      )}\n      <MainMenu.DefaultItems.Help />\n      <MainMenu.DefaultItems.ClearCanvas />\n      <MainMenu.Separator />\n      <MainMenu.Group title=\"Excalidraw links\">\n        <MainMenu.DefaultItems.Socials />\n      </MainMenu.Group>\n      <MainMenu.Separator />\n      <MainMenu.DefaultItems.ToggleTheme />\n      <MainMenu.DefaultItems.ChangeCanvasBackground />\n    </MainMenu>\n  );\n};\n\nconst DefaultOverwriteConfirmDialog = () => {\n  return (\n    <OverwriteConfirmDialog __fallback>\n      <OverwriteConfirmDialog.Actions.SaveToDisk />\n      <OverwriteConfirmDialog.Actions.ExportToImage />\n    </OverwriteConfirmDialog>\n  );\n};\n\nconst LayerUI = ({\n  actionManager,\n  appState,\n  files,\n  setAppState,\n  elements,\n  canvas,\n  onLockToggle,\n  onHandToolToggle,\n  onPenModeToggle,\n  showExitZenModeBtn,\n  renderTopRightUI,\n  renderCustomStats,\n  UIOptions,\n  onExportImage,\n  renderWelcomeScreen,\n  children,\n  app,\n  isCollaborating,\n  openAIKey,\n  isOpenAIKeyPersisted,\n  onOpenAIAPIKeyChange,\n  onMagicSettingsConfirm,\n}: LayerUIProps) => {\n  const device = useDevice();\n  const tunnels = useInitializeTunnels();\n\n  const [eyeDropperState, setEyeDropperState] = useAtom(\n    activeEyeDropperAtom,\n    jotaiScope,\n  );\n\n  const renderJSONExportDialog = () => {\n    if (!UIOptions.canvasActions.export) {\n      return null;\n    }\n\n    return (\n      <JSONExportDialog\n        elements={elements}\n        appState={appState}\n        files={files}\n        actionManager={actionManager}\n        exportOpts={UIOptions.canvasActions.export}\n        canvas={canvas}\n        setAppState={setAppState}\n      />\n    );\n  };\n\n  const renderImageExportDialog = () => {\n    if (\n      !UIOptions.canvasActions.saveAsImage ||\n      appState.openDialog?.name !== \"imageExport\"\n    ) {\n      return null;\n    }\n\n    return (\n      <ImageExportDialog\n        elements={elements}\n        appState={appState}\n        files={files}\n        actionManager={actionManager}\n        onExportImage={onExportImage}\n        onCloseRequest={() => setAppState({ openDialog: null })}\n        name={app.getName()}\n      />\n    );\n  };\n\n  const renderCanvasActions = () => (\n    <div style={{ position: \"relative\" }}>\n      {/* wrapping to Fragment stops React from occasionally complaining\n                about identical Keys */}\n      <tunnels.MainMenuTunnel.Out />\n      {renderWelcomeScreen && <tunnels.WelcomeScreenMenuHintTunnel.Out />}\n    </div>\n  );\n\n  const renderSelectedShapeActions = () => (\n    <Section\n      heading=\"selectedShapeActions\"\n      className={clsx(\"selected-shape-actions zen-mode-transition\", {\n        \"transition-left\": appState.zenModeEnabled,\n      })}\n    >\n      <Island\n        className={CLASSES.SHAPE_ACTIONS_MENU}\n        padding={2}\n        style={{\n          // we want to make sure this doesn't overflow so subtracting the\n          // approximate height of hamburgerMenu + footer\n          maxHeight: `${appState.height - 166}px`,\n        }}\n      >\n        <SelectedShapeActions\n          appState={appState}\n          elementsMap={app.scene.getNonDeletedElementsMap()}\n          renderAction={actionManager.renderAction}\n        />\n      </Island>\n    </Section>\n  );\n\n  const renderFixedSideContainer = () => {\n    const shouldRenderSelectedShapeActions = showSelectedShapeActions(\n      appState,\n      elements,\n    );\n\n    return (\n      <FixedSideContainer side=\"top\">\n        <div className=\"App-menu App-menu_top\">\n          <Stack.Col gap={6} className={clsx(\"App-menu_top__left\")}>\n            {renderCanvasActions()}\n            {shouldRenderSelectedShapeActions && renderSelectedShapeActions()}\n          </Stack.Col>\n          {!appState.viewModeEnabled && (\n            <Section heading=\"shapes\" className=\"shapes-section\">\n              {(heading: React.ReactNode) => (\n                <div style={{ position: \"relative\" }}>\n                  {renderWelcomeScreen && (\n                    <tunnels.WelcomeScreenToolbarHintTunnel.Out />\n                  )}\n                  <Stack.Col gap={4} align=\"start\">\n                    <Stack.Row\n                      gap={1}\n                      className={clsx(\"App-toolbar-container\", {\n                        \"zen-mode\": appState.zenModeEnabled,\n                      })}\n                    >\n                      <Island\n                        padding={1}\n                        className={clsx(\"App-toolbar\", {\n                          \"zen-mode\": appState.zenModeEnabled,\n                        })}\n                      >\n                        <HintViewer\n                          appState={appState}\n                          isMobile={device.editor.isMobile}\n                          device={device}\n                          app={app}\n                        />\n                        {heading}\n                        <Stack.Row gap={1}>\n                          <PenModeButton\n                            zenModeEnabled={appState.zenModeEnabled}\n                            checked={appState.penMode}\n                            onChange={() => onPenModeToggle(null)}\n                            title={t(\"toolBar.penMode\")}\n                            penDetected={appState.penDetected}\n                          />\n                          <LockButton\n                            checked={appState.activeTool.locked}\n                            onChange={onLockToggle}\n                            title={t(\"toolBar.lock\")}\n                          />\n\n                          <div className=\"App-toolbar__divider\" />\n\n                          <HandButton\n                            checked={isHandToolActive(appState)}\n                            onChange={() => onHandToolToggle()}\n                            title={t(\"toolBar.hand\")}\n                            isMobile\n                          />\n\n                          <ShapesSwitcher\n                            appState={appState}\n                            activeTool={appState.activeTool}\n                            UIOptions={UIOptions}\n                            app={app}\n                          />\n                        </Stack.Row>\n                      </Island>\n                      {isCollaborating && (\n                        <Island\n                          style={{\n                            marginLeft: 8,\n                            alignSelf: \"center\",\n                            height: \"fit-content\",\n                          }}\n                        >\n                          <LaserPointerButton\n                            title={t(\"toolBar.laser\")}\n                            checked={\n                              appState.activeTool.type === TOOL_TYPE.laser\n                            }\n                            onChange={() =>\n                              app.setActiveTool({ type: TOOL_TYPE.laser })\n                            }\n                            isMobile\n                          />\n                        </Island>\n                      )}\n                    </Stack.Row>\n                  </Stack.Col>\n                </div>\n              )}\n            </Section>\n          )}\n          <div\n            className={clsx(\n              \"layer-ui__wrapper__top-right zen-mode-transition\",\n              {\n                \"transition-right\": appState.zenModeEnabled,\n              },\n            )}\n          >\n            {appState.collaborators.size > 0 && (\n              <UserList\n                collaborators={appState.collaborators}\n                userToFollow={appState.userToFollow?.socketId || null}\n              />\n            )}\n            {renderTopRightUI?.(device.editor.isMobile, appState)}\n            {!appState.viewModeEnabled &&\n              // hide button when sidebar docked\n              (!isSidebarDocked ||\n                appState.openSidebar?.name !== DEFAULT_SIDEBAR.name) && (\n                <tunnels.DefaultSidebarTriggerTunnel.Out />\n              )}\n          </div>\n        </div>\n      </FixedSideContainer>\n    );\n  };\n\n  const renderSidebars = () => {\n    return (\n      <DefaultSidebar\n        __fallback\n        onDock={(docked) => {\n          trackEvent(\n            \"sidebar\",\n            `toggleDock (${docked ? \"dock\" : \"undock\"})`,\n            `(${device.editor.isMobile ? \"mobile\" : \"desktop\"})`,\n          );\n        }}\n      />\n    );\n  };\n\n  const isSidebarDocked = useAtomValue(isSidebarDockedAtom, jotaiScope);\n\n  const layerUIJSX = (\n    <>\n      {/* ------------------------- tunneled UI ---------------------------- */}\n      {/* make sure we render host app components first so that we can detect\n          them first on initial render to optimize layout shift */}\n      {children}\n      {/* render component fallbacks. Can be rendered anywhere as they'll be\n          tunneled away. We only render tunneled components that actually\n        have defaults when host do not render anything. */}\n      <DefaultMainMenu UIOptions={UIOptions} />\n      <DefaultSidebar.Trigger\n        __fallback\n        icon={LibraryIcon}\n        title={capitalizeString(t(\"toolBar.library\"))}\n        onToggle={(open) => {\n          if (open) {\n            trackEvent(\n              \"sidebar\",\n              `${DEFAULT_SIDEBAR.name} (open)`,\n              `button (${device.editor.isMobile ? \"mobile\" : \"desktop\"})`,\n            );\n          }\n        }}\n        tab={DEFAULT_SIDEBAR.defaultTab}\n      >\n        {t(\"toolBar.library\")}\n      </DefaultSidebar.Trigger>\n      <DefaultOverwriteConfirmDialog />\n      {appState.openDialog?.name === \"ttd\" && <TTDDialog __fallback />}\n      {/* ------------------------------------------------------------------ */}\n\n      {appState.isLoading && <LoadingMessage delay={250} />}\n      {appState.errorMessage && (\n        <ErrorDialog onClose={() => setAppState({ errorMessage: null })}>\n          {appState.errorMessage}\n        </ErrorDialog>\n      )}\n      {eyeDropperState && !device.editor.isMobile && (\n        <EyeDropper\n          colorPickerType={eyeDropperState.colorPickerType}\n          onCancel={() => {\n            setEyeDropperState(null);\n          }}\n          onChange={(colorPickerType, color, selectedElements, { altKey }) => {\n            if (\n              colorPickerType !== \"elementBackground\" &&\n              colorPickerType !== \"elementStroke\"\n            ) {\n              return;\n            }\n\n            if (selectedElements.length) {\n              for (const element of selectedElements) {\n                mutateElement(\n                  element,\n                  {\n                    [altKey && eyeDropperState.swapPreviewOnAlt\n                      ? colorPickerType === \"elementBackground\"\n                        ? \"strokeColor\"\n                        : \"backgroundColor\"\n                      : colorPickerType === \"elementBackground\"\n                      ? \"backgroundColor\"\n                      : \"strokeColor\"]: color,\n                  },\n                  false,\n                );\n                ShapeCache.delete(element);\n              }\n              Scene.getScene(selectedElements[0])?.informMutation();\n            } else if (colorPickerType === \"elementBackground\") {\n              setAppState({\n                currentItemBackgroundColor: color,\n              });\n            } else {\n              setAppState({ currentItemStrokeColor: color });\n            }\n          }}\n          onSelect={(color, event) => {\n            setEyeDropperState((state) => {\n              return state?.keepOpenOnAlt && event.altKey ? state : null;\n            });\n            eyeDropperState?.onSelect?.(color, event);\n          }}\n        />\n      )}\n      {appState.openDialog?.name === \"help\" && (\n        <HelpDialog\n          onClose={() => {\n            setAppState({ openDialog: null });\n          }}\n        />\n      )}\n      {appState.openDialog?.name === \"settings\" && (\n        <MagicSettings\n          openAIKey={openAIKey}\n          isPersisted={isOpenAIKeyPersisted}\n          onChange={onOpenAIAPIKeyChange}\n          onConfirm={(apiKey, shouldPersist) => {\n            const source =\n              appState.openDialog?.name === \"settings\"\n                ? appState.openDialog?.source\n                : \"settings\";\n            setAppState({ openDialog: null }, () => {\n              onMagicSettingsConfirm(apiKey, shouldPersist, source);\n            });\n          }}\n          onClose={() => {\n            setAppState({ openDialog: null });\n          }}\n        />\n      )}\n      <ActiveConfirmDialog />\n      <tunnels.OverwriteConfirmDialogTunnel.Out />\n      {renderImageExportDialog()}\n      {renderJSONExportDialog()}\n      {appState.pasteDialog.shown && (\n        <PasteChartDialog\n          setAppState={setAppState}\n          appState={appState}\n          onClose={() =>\n            setAppState({\n              pasteDialog: { shown: false, data: null },\n            })\n          }\n        />\n      )}\n      {device.editor.isMobile && (\n        <MobileMenu\n          app={app}\n          appState={appState}\n          elements={elements}\n          actionManager={actionManager}\n          renderJSONExportDialog={renderJSONExportDialog}\n          renderImageExportDialog={renderImageExportDialog}\n          setAppState={setAppState}\n          onLockToggle={onLockToggle}\n          onHandToolToggle={onHandToolToggle}\n          onPenModeToggle={onPenModeToggle}\n          renderTopRightUI={renderTopRightUI}\n          renderCustomStats={renderCustomStats}\n          renderSidebars={renderSidebars}\n          device={device}\n          renderWelcomeScreen={renderWelcomeScreen}\n          UIOptions={UIOptions}\n        />\n      )}\n      {!device.editor.isMobile && (\n        <>\n          <div\n            className=\"layer-ui__wrapper\"\n            style={\n              appState.openSidebar &&\n              isSidebarDocked &&\n              device.editor.canFitSidebar\n                ? { width: `calc(100% - ${LIBRARY_SIDEBAR_WIDTH}px)` }\n                : {}\n            }\n          >\n            {renderWelcomeScreen && <tunnels.WelcomeScreenCenterTunnel.Out />}\n            {renderFixedSideContainer()}\n            <Footer\n              appState={appState}\n              actionManager={actionManager}\n              showExitZenModeBtn={showExitZenModeBtn}\n              renderWelcomeScreen={renderWelcomeScreen}\n            />\n            {appState.showStats && (\n              <Stats\n                appState={appState}\n                setAppState={setAppState}\n                elements={elements}\n                onClose={() => {\n                  actionManager.executeAction(actionToggleStats);\n                }}\n                renderCustomStats={renderCustomStats}\n              />\n            )}\n            {appState.scrolledOutside && (\n              <button\n                className=\"scroll-back-to-content\"\n                onClick={() => {\n                  setAppState((appState) => ({\n                    ...calculateScrollCenter(elements, appState),\n                  }));\n                }}\n              >\n                {t(\"buttons.scrollBackToContent\")}\n              </button>\n            )}\n          </div>\n          {renderSidebars()}\n        </>\n      )}\n    </>\n  );\n\n  return (\n    <UIAppStateContext.Provider value={appState}>\n      <Provider scope={tunnels.jotaiScope}>\n        <TunnelsContext.Provider value={tunnels}>\n          {layerUIJSX}\n        </TunnelsContext.Provider>\n      </Provider>\n    </UIAppStateContext.Provider>\n  );\n};\n\nconst stripIrrelevantAppStateProps = (appState: AppState): UIAppState => {\n  const {\n    suggestedBindings,\n    startBoundElement,\n    cursorButton,\n    scrollX,\n    scrollY,\n    ...ret\n  } = appState;\n  return ret;\n};\n\nconst areEqual = (prevProps: LayerUIProps, nextProps: LayerUIProps) => {\n  // short-circuit early\n  if (prevProps.children !== nextProps.children) {\n    return false;\n  }\n\n  const { canvas: _pC, appState: prevAppState, ...prev } = prevProps;\n  const { canvas: _nC, appState: nextAppState, ...next } = nextProps;\n\n  return (\n    isShallowEqual(\n      // asserting AppState because we're being passed the whole AppState\n      // but resolve to only the UI-relevant props\n      stripIrrelevantAppStateProps(prevAppState as AppState),\n      stripIrrelevantAppStateProps(nextAppState as AppState),\n      {\n        selectedElementIds: isShallowEqual,\n        selectedGroupIds: isShallowEqual,\n      },\n    ) && isShallowEqual(prev, next)\n  );\n};\n\nexport default React.memo(LayerUI, areEqual);\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .Toast {\n  animation: fade-in 0.5s;\n  background-color: var(--button-gray-1);\n  border-radius: 4px;\n  bottom: 10px;\n  box-sizing: border-box;\n  cursor: default;\n  left: 50%;\n  margin-left: -150px;\n  padding: 4px 0;\n  position: absolute;\n  text-align: center;\n  width: 300px;\n  z-index: 999999;\n}\n.excalidraw .Toast .Toast__message {\n  padding: 0 1.6rem;\n  color: var(--popup-text-color);\n  white-space: pre-wrap;\n}\n.excalidraw .Toast .close {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 0.4rem;\n}\n.excalidraw .Toast .close .ToolIcon__icon {\n  width: 1.2rem;\n  height: 1.2rem;\n}\n@keyframes fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIi4uL2Nzcy92YXJpYWJsZXMubW9kdWxlLnNjc3MiLCJUb2FzdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQzFLQTtFQUlFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0EsU0ExQm1COztBQTRCbkI7RUFDRSxPQTlCYztFQStCZCxRQS9CYzs7QUFvQ3BCO0VBQ0U7SUFDRTs7RUFFRjtJQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLlRvYXN0IHtcbiAgICAkY2xvc2VCdXR0b25TaXplOiAxLjJyZW07XG4gICAgJGNsb3NlQnV0dG9uUGFkZGluZzogMC40cmVtO1xuXG4gICAgYW5pbWF0aW9uOiBmYWRlLWluIDAuNXM7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWdyYXktMSk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJvdHRvbTogMTBweDtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICBsZWZ0OiA1MCU7XG4gICAgbWFyZ2luLWxlZnQ6IC0xNTBweDtcbiAgICBwYWRkaW5nOiA0cHggMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHdpZHRoOiAzMDBweDtcbiAgICB6LWluZGV4OiA5OTk5OTk7XG5cbiAgICAuVG9hc3RfX21lc3NhZ2Uge1xuICAgICAgcGFkZGluZzogMCAkY2xvc2VCdXR0b25TaXplICsgKCRjbG9zZUJ1dHRvblBhZGRpbmcpO1xuICAgICAgY29sb3I6IHZhcigtLXBvcHVwLXRleHQtY29sb3IpO1xuICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIH1cblxuICAgIC5jbG9zZSB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIHBhZGRpbmc6ICRjbG9zZUJ1dHRvblBhZGRpbmc7XG5cbiAgICAgIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIHdpZHRoOiAkY2xvc2VCdXR0b25TaXplO1xuICAgICAgICBoZWlnaHQ6ICRjbG9zZUJ1dHRvblNpemU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgQGtleWZyYW1lcyBmYWRlLWluIHtcbiAgICBmcm9tIHtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG59XG4iXX0= */", "import { useCallback, useEffect, useRef } from \"react\";\nimport { CloseIcon } from \"./icons\";\nimport \"./Toast.scss\";\nimport { ToolButton } from \"./ToolButton\";\n\nconst DEFAULT_TOAST_TIMEOUT = 5000;\n\nexport const Toast = ({\n  message,\n  onClose,\n  closable = false,\n  // To prevent autoclose, pass duration as Infinity\n  duration = DEFAULT_TOAST_TIMEOUT,\n}: {\n  message: string;\n  onClose: () => void;\n  closable?: boolean;\n  duration?: number;\n}) => {\n  const timerRef = useRef<number>(0);\n  const shouldAutoClose = duration !== Infinity;\n  const scheduleTimeout = useCallback(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    timerRef.current = window.setTimeout(() => onClose(), duration);\n  }, [onClose, duration, shouldAutoClose]);\n\n  useEffect(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    scheduleTimeout();\n    return () => clearTimeout(timerRef.current);\n  }, [scheduleTimeout, message, duration, shouldAutoClose]);\n\n  const onMouseEnter = shouldAutoClose\n    ? () => clearTimeout(timerRef?.current)\n    : undefined;\n  const onMouseLeave = shouldAutoClose ? scheduleTimeout : undefined;\n  return (\n    <div\n      className=\"Toast\"\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <p className=\"Toast__message\">{message}</p>\n      {closable && (\n        <ToolButton\n          icon={CloseIcon}\n          aria-label=\"close\"\n          type=\"icon\"\n          onClick={onClose}\n          className=\"close\"\n        />\n      )}\n    </div>\n  );\n};\n", "import { CODES, KEYS } from \"../keys\";\nimport { register } from \"./register\";\n\nexport const actionToggleViewMode = register({\n  name: \"viewMode\",\n  viewMode: true,\n  trackEvent: {\n    category: \"canvas\",\n    predicate: (appState) => !appState.viewModeEnabled,\n  },\n  perform(elements, appState) {\n    return {\n      appState: {\n        ...appState,\n        viewModeEnabled: !this.checked!(appState),\n      },\n      commitToHistory: false,\n    };\n  },\n  checked: (appState) => appState.viewModeEnabled,\n  predicate: (elements, appState, appProps) => {\n    return typeof appProps.viewModeEnabled === \"undefined\";\n  },\n  contextItemLabel: \"labels.viewMode\",\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.R,\n});\n", "import { isTextElement, refreshTextDimensions } from \"../element\";\nimport { newElementWith } from \"../element/mutateElement\";\nimport { getContainerElement } from \"../element/textElement\";\nimport { isBoundToContainer } from \"../element/typeChecks\";\nimport { ExcalidrawElement, ExcalidrawTextElement } from \"../element/types\";\nimport { getFontString } from \"../utils\";\nimport type Scene from \"./Scene\";\nimport { ShapeCache } from \"./ShapeCache\";\n\nexport class Fonts {\n  private scene: Scene;\n  private onSceneUpdated: () => void;\n\n  constructor({\n    scene,\n    onSceneUpdated,\n  }: {\n    scene: Scene;\n    onSceneUpdated: () => void;\n  }) {\n    this.scene = scene;\n    this.onSceneUpdated = onSceneUpdated;\n  }\n\n  // it's ok to track fonts across multiple instances only once, so let's use\n  // a static member to reduce memory footprint\n  private static loadedFontFaces = new Set<string>();\n\n  /**\n   * if we load a (new) font, it's likely that text elements using it have\n   * already been rendered using a fallback font. Thus, we want invalidate\n   * their shapes and rerender. See #637.\n   *\n   * Invalidates text elements and rerenders scene, provided that at least one\n   * of the supplied fontFaces has not already been processed.\n   */\n  public onFontsLoaded = (fontFaces: readonly FontFace[]) => {\n    if (\n      // bail if all fonts with have been processed. We're checking just a\n      // subset of the font properties (though it should be enough), so it\n      // can technically bail on a false positive.\n      fontFaces.every((fontFace) => {\n        const sig = `${fontFace.family}-${fontFace.style}-${fontFace.weight}`;\n        if (Fonts.loadedFontFaces.has(sig)) {\n          return true;\n        }\n        Fonts.loadedFontFaces.add(sig);\n        return false;\n      })\n    ) {\n      return false;\n    }\n\n    let didUpdate = false;\n\n    this.scene.mapElements((element) => {\n      if (isTextElement(element) && !isBoundToContainer(element)) {\n        ShapeCache.delete(element);\n        didUpdate = true;\n        return newElementWith(element, {\n          ...refreshTextDimensions(\n            element,\n            getContainerElement(element, this.scene.getNonDeletedElementsMap()),\n            this.scene.getNonDeletedElementsMap(),\n          ),\n        });\n      }\n      return element;\n    });\n\n    if (didUpdate) {\n      this.onSceneUpdated();\n    }\n  };\n\n  public loadFontsForElements = async (\n    elements: readonly ExcalidrawElement[],\n  ) => {\n    const fontFaces = await Promise.all(\n      [\n        ...new Set(\n          elements\n            .filter((element) => isTextElement(element))\n            .map((element) => (element as ExcalidrawTextElement).fontFamily),\n        ),\n      ].map((fontFamily) => {\n        const fontString = getFontString({\n          fontFamily,\n          fontSize: 16,\n        });\n        if (!document.fonts?.check?.(fontString)) {\n          return document.fonts?.load?.(fontString);\n        }\n        return undefined;\n      }),\n    );\n    this.onFontsLoaded(fontFaces.flat().filter(Boolean) as FontFace[]);\n  };\n}\n", "import { getNonDeletedElements } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { removeAllElementsFromFrame } from \"../frame\";\nimport { getFrameChildren } from \"../frame\";\nimport { KEYS } from \"../keys\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { updateActiveTool } from \"../utils\";\nimport { setCursorForShape } from \"../cursor\";\nimport { register } from \"./register\";\nimport { isFrameLikeElement } from \"../element/typeChecks\";\n\nconst isSingleFrameSelected = (appState: AppState, app: AppClassProperties) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  return (\n    selectedElements.length === 1 && isFrameLikeElement(selectedElements[0])\n  );\n};\n\nexport const actionSelectAllElementsInFrame = register({\n  name: \"selectAllElementsInFrame\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElement =\n      app.scene.getSelectedElements(appState).at(0) || null;\n\n    if (isFrameLikeElement(selectedElement)) {\n      const elementsInFrame = getFrameChildren(\n        getNonDeletedElements(elements),\n        selectedElement.id,\n      ).filter((element) => !(element.type === \"text\" && element.containerId));\n\n      return {\n        elements,\n        appState: {\n          ...appState,\n          selectedElementIds: elementsInFrame.reduce((acc, element) => {\n            acc[element.id] = true;\n            return acc;\n          }, {} as Record<ExcalidrawElement[\"id\"], true>),\n        },\n        commitToHistory: false,\n      };\n    }\n\n    return {\n      elements,\n      appState,\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.selectAllElementsInFrame\",\n  predicate: (elements, appState, _, app) =>\n    isSingleFrameSelected(appState, app),\n});\n\nexport const actionRemoveAllElementsFromFrame = register({\n  name: \"removeAllElementsFromFrame\",\n  trackEvent: { category: \"history\" },\n  perform: (elements, appState, _, app) => {\n    const selectedElement =\n      app.scene.getSelectedElements(appState).at(0) || null;\n\n    if (isFrameLikeElement(selectedElement)) {\n      return {\n        elements: removeAllElementsFromFrame(elements, selectedElement),\n        appState: {\n          ...appState,\n          selectedElementIds: {\n            [selectedElement.id]: true,\n          },\n        },\n        commitToHistory: true,\n      };\n    }\n\n    return {\n      elements,\n      appState,\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.removeAllElementsFromFrame\",\n  predicate: (elements, appState, _, app) =>\n    isSingleFrameSelected(appState, app),\n});\n\nexport const actionupdateFrameRendering = register({\n  name: \"updateFrameRendering\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState) => {\n    return {\n      elements,\n      appState: {\n        ...appState,\n        frameRendering: {\n          ...appState.frameRendering,\n          enabled: !appState.frameRendering.enabled,\n        },\n      },\n      commitToHistory: false,\n    };\n  },\n  contextItemLabel: \"labels.updateFrameRendering\",\n  checked: (appState: AppState) => appState.frameRendering.enabled,\n});\n\nexport const actionSetFrameAsActiveTool = register({\n  name: \"setFrameAsActiveTool\",\n  trackEvent: { category: \"toolbar\" },\n  perform: (elements, appState, _, app) => {\n    const nextActiveTool = updateActiveTool(appState, {\n      type: \"frame\",\n    });\n\n    setCursorForShape(app.interactiveCanvas, {\n      ...appState,\n      activeTool: nextActiveTool,\n    });\n\n    return {\n      elements,\n      appState: {\n        ...appState,\n        activeTool: updateActiveTool(appState, {\n          type: \"frame\",\n        }),\n      },\n      commitToHistory: false,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] &&\n    !event.shiftKey &&\n    !event.altKey &&\n    event.key.toLocaleLowerCase() === KEYS.F,\n});\n", "import { TOOL_TYPE } from \"./constants\";\nimport {\n  Bounds,\n  getCommonBounds,\n  getDraggedElementsBounds,\n  getElementAbsoluteCoords,\n} from \"./element/bounds\";\nimport { MaybeTransformHandleType } from \"./element/transformHandles\";\nimport { isBoundToContainer, isFrameLikeElement } from \"./element/typeChecks\";\nimport {\n  ElementsMap,\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n} from \"./element/types\";\nimport { getMaximumGroups } from \"./groups\";\nimport { KEYS } from \"./keys\";\nimport { rangeIntersection, rangesOverlap, rotatePoint } from \"./math\";\nimport {\n  getSelectedElements,\n  getVisibleAndNonSelectedElements,\n} from \"./scene/selection\";\nimport { AppState, KeyboardModifiersObject, Point } from \"./types\";\n\nconst SNAP_DISTANCE = 8;\n\n// do not comput more gaps per axis than this limit\n// TODO increase or remove once we optimize\nconst VISIBLE_GAPS_LIMIT_PER_AXIS = 99999;\n\n// snap distance with zoom value taken into consideration\nexport const getSnapDistance = (zoomValue: number) => {\n  return SNAP_DISTANCE / zoomValue;\n};\n\ntype Vector2D = {\n  x: number;\n  y: number;\n};\n\ntype PointPair = [Point, Point];\n\nexport type PointSnap = {\n  type: \"point\";\n  points: PointPair;\n  offset: number;\n};\n\nexport type Gap = {\n  //  start side \u2193     length\n  // \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u25C4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25BA\n  // \u2502           \u2502-----------------\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  // \u2502  start    \u2502       \u2191         \u2502           \u2502\n  // \u2502  element  \u2502    overlap      \u2502  end      \u2502\n  // \u2502           \u2502       \u2193         \u2502  element  \u2502\n  // \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518-----------------\u2502           \u2502\n  //                               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n  //                               \u2191 end side\n  startBounds: Bounds;\n  endBounds: Bounds;\n  startSide: [Point, Point];\n  endSide: [Point, Point];\n  overlap: [number, number];\n  length: number;\n};\n\nexport type GapSnap = {\n  type: \"gap\";\n  direction:\n    | \"center_horizontal\"\n    | \"center_vertical\"\n    | \"side_left\"\n    | \"side_right\"\n    | \"side_top\"\n    | \"side_bottom\";\n  gap: Gap;\n  offset: number;\n};\n\nexport type GapSnaps = GapSnap[];\n\nexport type Snap = GapSnap | PointSnap;\nexport type Snaps = Snap[];\n\nexport type PointSnapLine = {\n  type: \"points\";\n  points: Point[];\n};\n\nexport type PointerSnapLine = {\n  type: \"pointer\";\n  points: PointPair;\n  direction: \"horizontal\" | \"vertical\";\n};\n\nexport type GapSnapLine = {\n  type: \"gap\";\n  direction: \"horizontal\" | \"vertical\";\n  points: PointPair;\n};\n\nexport type SnapLine = PointSnapLine | GapSnapLine | PointerSnapLine;\n\n// -----------------------------------------------------------------------------\n\nexport class SnapCache {\n  private static referenceSnapPoints: Point[] | null = null;\n\n  private static visibleGaps: {\n    verticalGaps: Gap[];\n    horizontalGaps: Gap[];\n  } | null = null;\n\n  public static setReferenceSnapPoints = (snapPoints: Point[] | null) => {\n    SnapCache.referenceSnapPoints = snapPoints;\n  };\n\n  public static getReferenceSnapPoints = () => {\n    return SnapCache.referenceSnapPoints;\n  };\n\n  public static setVisibleGaps = (\n    gaps: {\n      verticalGaps: Gap[];\n      horizontalGaps: Gap[];\n    } | null,\n  ) => {\n    SnapCache.visibleGaps = gaps;\n  };\n\n  public static getVisibleGaps = () => {\n    return SnapCache.visibleGaps;\n  };\n\n  public static destroy = () => {\n    SnapCache.referenceSnapPoints = null;\n    SnapCache.visibleGaps = null;\n  };\n}\n\n// -----------------------------------------------------------------------------\n\nexport const isSnappingEnabled = ({\n  event,\n  appState,\n  selectedElements,\n}: {\n  appState: AppState;\n  event: KeyboardModifiersObject;\n  selectedElements: NonDeletedExcalidrawElement[];\n}) => {\n  if (event) {\n    return (\n      (appState.objectsSnapModeEnabled && !event[KEYS.CTRL_OR_CMD]) ||\n      (!appState.objectsSnapModeEnabled &&\n        event[KEYS.CTRL_OR_CMD] &&\n        appState.gridSize === null)\n    );\n  }\n\n  // do not suggest snaps for an arrow to give way to binding\n  if (selectedElements.length === 1 && selectedElements[0].type === \"arrow\") {\n    return false;\n  }\n  return appState.objectsSnapModeEnabled;\n};\n\nexport const areRoughlyEqual = (a: number, b: number, precision = 0.01) => {\n  return Math.abs(a - b) <= precision;\n};\n\nexport const getElementsCorners = (\n  elements: ExcalidrawElement[],\n  elementsMap: ElementsMap,\n  {\n    omitCenter,\n    boundingBoxCorners,\n    dragOffset,\n  }: {\n    omitCenter?: boolean;\n    boundingBoxCorners?: boolean;\n    dragOffset?: Vector2D;\n  } = {\n    omitCenter: false,\n    boundingBoxCorners: false,\n  },\n): Point[] => {\n  let result: Point[] = [];\n\n  if (elements.length === 1) {\n    const element = elements[0];\n\n    let [x1, y1, x2, y2, cx, cy] = getElementAbsoluteCoords(\n      element,\n      elementsMap,\n    );\n\n    if (dragOffset) {\n      x1 += dragOffset.x;\n      x2 += dragOffset.x;\n      cx += dragOffset.x;\n\n      y1 += dragOffset.y;\n      y2 += dragOffset.y;\n      cy += dragOffset.y;\n    }\n\n    const halfWidth = (x2 - x1) / 2;\n    const halfHeight = (y2 - y1) / 2;\n\n    if (\n      (element.type === \"diamond\" || element.type === \"ellipse\") &&\n      !boundingBoxCorners\n    ) {\n      const leftMid = rotatePoint(\n        [x1, y1 + halfHeight],\n        [cx, cy],\n        element.angle,\n      );\n      const topMid = rotatePoint([x1 + halfWidth, y1], [cx, cy], element.angle);\n      const rightMid = rotatePoint(\n        [x2, y1 + halfHeight],\n        [cx, cy],\n        element.angle,\n      );\n      const bottomMid = rotatePoint(\n        [x1 + halfWidth, y2],\n        [cx, cy],\n        element.angle,\n      );\n      const center: Point = [cx, cy];\n\n      result = omitCenter\n        ? [leftMid, topMid, rightMid, bottomMid]\n        : [leftMid, topMid, rightMid, bottomMid, center];\n    } else {\n      const topLeft = rotatePoint([x1, y1], [cx, cy], element.angle);\n      const topRight = rotatePoint([x2, y1], [cx, cy], element.angle);\n      const bottomLeft = rotatePoint([x1, y2], [cx, cy], element.angle);\n      const bottomRight = rotatePoint([x2, y2], [cx, cy], element.angle);\n      const center: Point = [cx, cy];\n\n      result = omitCenter\n        ? [topLeft, topRight, bottomLeft, bottomRight]\n        : [topLeft, topRight, bottomLeft, bottomRight, center];\n    }\n  } else if (elements.length > 1) {\n    const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n      elements,\n      dragOffset ?? { x: 0, y: 0 },\n    );\n    const width = maxX - minX;\n    const height = maxY - minY;\n\n    const topLeft: Point = [minX, minY];\n    const topRight: Point = [maxX, minY];\n    const bottomLeft: Point = [minX, maxY];\n    const bottomRight: Point = [maxX, maxY];\n    const center: Point = [minX + width / 2, minY + height / 2];\n\n    result = omitCenter\n      ? [topLeft, topRight, bottomLeft, bottomRight]\n      : [topLeft, topRight, bottomLeft, bottomRight, center];\n  }\n\n  return result.map((point) => [round(point[0]), round(point[1])] as Point);\n};\n\nconst getReferenceElements = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  selectedElements: NonDeletedExcalidrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const selectedFrames = selectedElements\n    .filter((element) => isFrameLikeElement(element))\n    .map((frame) => frame.id);\n\n  return getVisibleAndNonSelectedElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  ).filter(\n    (element) => !(element.frameId && selectedFrames.includes(element.frameId)),\n  );\n};\n\nexport const getVisibleGaps = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  selectedElements: ExcalidrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const referenceElements: ExcalidrawElement[] = getReferenceElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  );\n\n  const referenceBounds = getMaximumGroups(referenceElements, elementsMap)\n    .filter(\n      (elementsGroup) =>\n        !(elementsGroup.length === 1 && isBoundToContainer(elementsGroup[0])),\n    )\n    .map(\n      (group) =>\n        getCommonBounds(group).map((bound) =>\n          round(bound),\n        ) as unknown as Bounds,\n    );\n\n  const horizontallySorted = referenceBounds.sort((a, b) => a[0] - b[0]);\n\n  const horizontalGaps: Gap[] = [];\n\n  let c = 0;\n\n  horizontal: for (let i = 0; i < horizontallySorted.length; i++) {\n    const startBounds = horizontallySorted[i];\n\n    for (let j = i + 1; j < horizontallySorted.length; j++) {\n      if (++c > VISIBLE_GAPS_LIMIT_PER_AXIS) {\n        break horizontal;\n      }\n\n      const endBounds = horizontallySorted[j];\n\n      const [, startMinY, startMaxX, startMaxY] = startBounds;\n      const [endMinX, endMinY, , endMaxY] = endBounds;\n\n      if (\n        startMaxX < endMinX &&\n        rangesOverlap([startMinY, startMaxY], [endMinY, endMaxY])\n      ) {\n        horizontalGaps.push({\n          startBounds,\n          endBounds,\n          startSide: [\n            [startMaxX, startMinY],\n            [startMaxX, startMaxY],\n          ],\n          endSide: [\n            [endMinX, endMinY],\n            [endMinX, endMaxY],\n          ],\n          length: endMinX - startMaxX,\n          overlap: rangeIntersection(\n            [startMinY, startMaxY],\n            [endMinY, endMaxY],\n          )!,\n        });\n      }\n    }\n  }\n\n  const verticallySorted = referenceBounds.sort((a, b) => a[1] - b[1]);\n\n  const verticalGaps: Gap[] = [];\n\n  c = 0;\n\n  vertical: for (let i = 0; i < verticallySorted.length; i++) {\n    const startBounds = verticallySorted[i];\n\n    for (let j = i + 1; j < verticallySorted.length; j++) {\n      if (++c > VISIBLE_GAPS_LIMIT_PER_AXIS) {\n        break vertical;\n      }\n      const endBounds = verticallySorted[j];\n\n      const [startMinX, , startMaxX, startMaxY] = startBounds;\n      const [endMinX, endMinY, endMaxX] = endBounds;\n\n      if (\n        startMaxY < endMinY &&\n        rangesOverlap([startMinX, startMaxX], [endMinX, endMaxX])\n      ) {\n        verticalGaps.push({\n          startBounds,\n          endBounds,\n          startSide: [\n            [startMinX, startMaxY],\n            [startMaxX, startMaxY],\n          ],\n          endSide: [\n            [endMinX, endMinY],\n            [endMaxX, endMinY],\n          ],\n          length: endMinY - startMaxY,\n          overlap: rangeIntersection(\n            [startMinX, startMaxX],\n            [endMinX, endMaxX],\n          )!,\n        });\n      }\n    }\n  }\n\n  return {\n    horizontalGaps,\n    verticalGaps,\n  };\n};\n\nconst getGapSnaps = (\n  selectedElements: ExcalidrawElement[],\n  dragOffset: Vector2D,\n  appState: AppState,\n  event: KeyboardModifiersObject,\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n  minOffset: Vector2D,\n) => {\n  if (!isSnappingEnabled({ appState, event, selectedElements })) {\n    return [];\n  }\n\n  if (selectedElements.length === 0) {\n    return [];\n  }\n\n  const visibleGaps = SnapCache.getVisibleGaps();\n\n  if (visibleGaps) {\n    const { horizontalGaps, verticalGaps } = visibleGaps;\n\n    const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n      selectedElements,\n      dragOffset,\n    ).map((bound) => round(bound));\n    const centerX = (minX + maxX) / 2;\n    const centerY = (minY + maxY) / 2;\n\n    for (const gap of horizontalGaps) {\n      if (!rangesOverlap([minY, maxY], gap.overlap)) {\n        continue;\n      }\n\n      // center gap\n      const gapMidX = gap.startSide[0][0] + gap.length / 2;\n      const centerOffset = round(gapMidX - centerX);\n      const gapIsLargerThanSelection = gap.length > maxX - minX;\n\n      if (gapIsLargerThanSelection && Math.abs(centerOffset) <= minOffset.x) {\n        if (Math.abs(centerOffset) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(centerOffset);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"center_horizontal\",\n          gap,\n          offset: centerOffset,\n        };\n\n        nearestSnapsX.push(snap);\n        continue;\n      }\n\n      // side gap, from the right\n      const [, , endMaxX] = gap.endBounds;\n      const distanceToEndElementX = minX - endMaxX;\n      const sideOffsetRight = round(gap.length - distanceToEndElementX);\n\n      if (Math.abs(sideOffsetRight) <= minOffset.x) {\n        if (Math.abs(sideOffsetRight) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(sideOffsetRight);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_right\",\n          gap,\n          offset: sideOffsetRight,\n        };\n        nearestSnapsX.push(snap);\n        continue;\n      }\n\n      // side gap, from the left\n      const [startMinX, , ,] = gap.startBounds;\n      const distanceToStartElementX = startMinX - maxX;\n      const sideOffsetLeft = round(distanceToStartElementX - gap.length);\n\n      if (Math.abs(sideOffsetLeft) <= minOffset.x) {\n        if (Math.abs(sideOffsetLeft) < minOffset.x) {\n          nearestSnapsX.length = 0;\n        }\n        minOffset.x = Math.abs(sideOffsetLeft);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_left\",\n          gap,\n          offset: sideOffsetLeft,\n        };\n        nearestSnapsX.push(snap);\n        continue;\n      }\n    }\n    for (const gap of verticalGaps) {\n      if (!rangesOverlap([minX, maxX], gap.overlap)) {\n        continue;\n      }\n\n      // center gap\n      const gapMidY = gap.startSide[0][1] + gap.length / 2;\n      const centerOffset = round(gapMidY - centerY);\n      const gapIsLargerThanSelection = gap.length > maxY - minY;\n\n      if (gapIsLargerThanSelection && Math.abs(centerOffset) <= minOffset.y) {\n        if (Math.abs(centerOffset) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(centerOffset);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"center_vertical\",\n          gap,\n          offset: centerOffset,\n        };\n\n        nearestSnapsY.push(snap);\n        continue;\n      }\n\n      // side gap, from the top\n      const [, startMinY, ,] = gap.startBounds;\n      const distanceToStartElementY = startMinY - maxY;\n      const sideOffsetTop = round(distanceToStartElementY - gap.length);\n\n      if (Math.abs(sideOffsetTop) <= minOffset.y) {\n        if (Math.abs(sideOffsetTop) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(sideOffsetTop);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_top\",\n          gap,\n          offset: sideOffsetTop,\n        };\n        nearestSnapsY.push(snap);\n        continue;\n      }\n\n      // side gap, from the bottom\n      const [, , , endMaxY] = gap.endBounds;\n      const distanceToEndElementY = round(minY - endMaxY);\n      const sideOffsetBottom = gap.length - distanceToEndElementY;\n\n      if (Math.abs(sideOffsetBottom) <= minOffset.y) {\n        if (Math.abs(sideOffsetBottom) < minOffset.y) {\n          nearestSnapsY.length = 0;\n        }\n        minOffset.y = Math.abs(sideOffsetBottom);\n\n        const snap: GapSnap = {\n          type: \"gap\",\n          direction: \"side_bottom\",\n          gap,\n          offset: sideOffsetBottom,\n        };\n        nearestSnapsY.push(snap);\n        continue;\n      }\n    }\n  }\n};\n\nexport const getReferenceSnapPoints = (\n  elements: readonly NonDeletedExcalidrawElement[],\n  selectedElements: ExcalidrawElement[],\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const referenceElements = getReferenceElements(\n    elements,\n    selectedElements,\n    appState,\n    elementsMap,\n  );\n  return getMaximumGroups(referenceElements, elementsMap)\n    .filter(\n      (elementsGroup) =>\n        !(elementsGroup.length === 1 && isBoundToContainer(elementsGroup[0])),\n    )\n    .flatMap((elementGroup) => getElementsCorners(elementGroup, elementsMap));\n};\n\nconst getPointSnaps = (\n  selectedElements: ExcalidrawElement[],\n  selectionSnapPoints: Point[],\n  appState: AppState,\n  event: KeyboardModifiersObject,\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n  minOffset: Vector2D,\n) => {\n  if (\n    !isSnappingEnabled({ appState, event, selectedElements }) ||\n    (selectedElements.length === 0 && selectionSnapPoints.length === 0)\n  ) {\n    return [];\n  }\n\n  const referenceSnapPoints = SnapCache.getReferenceSnapPoints();\n\n  if (referenceSnapPoints) {\n    for (const thisSnapPoint of selectionSnapPoints) {\n      for (const otherSnapPoint of referenceSnapPoints) {\n        const offsetX = otherSnapPoint[0] - thisSnapPoint[0];\n        const offsetY = otherSnapPoint[1] - thisSnapPoint[1];\n\n        if (Math.abs(offsetX) <= minOffset.x) {\n          if (Math.abs(offsetX) < minOffset.x) {\n            nearestSnapsX.length = 0;\n          }\n\n          nearestSnapsX.push({\n            type: \"point\",\n            points: [thisSnapPoint, otherSnapPoint],\n            offset: offsetX,\n          });\n\n          minOffset.x = Math.abs(offsetX);\n        }\n\n        if (Math.abs(offsetY) <= minOffset.y) {\n          if (Math.abs(offsetY) < minOffset.y) {\n            nearestSnapsY.length = 0;\n          }\n\n          nearestSnapsY.push({\n            type: \"point\",\n            points: [thisSnapPoint, otherSnapPoint],\n            offset: offsetY,\n          });\n\n          minOffset.y = Math.abs(offsetY);\n        }\n      }\n    }\n  }\n};\n\nexport const snapDraggedElements = (\n  elements: ExcalidrawElement[],\n  dragOffset: Vector2D,\n  appState: AppState,\n  event: KeyboardModifiersObject,\n  elementsMap: ElementsMap,\n) => {\n  const selectedElements = getSelectedElements(elements, appState);\n  if (\n    !isSnappingEnabled({ appState, event, selectedElements }) ||\n    selectedElements.length === 0\n  ) {\n    return {\n      snapOffset: {\n        x: 0,\n        y: 0,\n      },\n      snapLines: [],\n    };\n  }\n  dragOffset.x = round(dragOffset.x);\n  dragOffset.y = round(dragOffset.y);\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n  const snapDistance = getSnapDistance(appState.zoom.value);\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const selectionPoints = getElementsCorners(selectedElements, elementsMap, {\n    dragOffset,\n  });\n\n  // get the nearest horizontal and vertical point and gap snaps\n  getPointSnaps(\n    selectedElements,\n    selectionPoints,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  getGapSnaps(\n    selectedElements,\n    dragOffset,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  // using the nearest snaps to figure out how\n  // much the elements need to be offset to be snapped\n  // to some reference elements\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  // once the elements are snapped\n  // and moved to the snapped position\n  // we want to use the element's snapped position\n  // to update nearest snaps so that we can create\n  // point and gap snap lines correctly without any shifting\n\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n  const newDragOffset = {\n    x: round(dragOffset.x + snapOffset.x),\n    y: round(dragOffset.y + snapOffset.y),\n  };\n\n  getPointSnaps(\n    selectedElements,\n    getElementsCorners(selectedElements, elementsMap, {\n      dragOffset: newDragOffset,\n    }),\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  getGapSnaps(\n    selectedElements,\n    newDragOffset,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  const gapSnapLines = createGapSnapLines(\n    selectedElements,\n    newDragOffset,\n    [...nearestSnapsX, ...nearestSnapsY].filter(\n      (snap) => snap.type === \"gap\",\n    ) as GapSnap[],\n  );\n\n  return {\n    snapOffset,\n    snapLines: [...pointSnapLines, ...gapSnapLines],\n  };\n};\n\nconst round = (x: number) => {\n  const decimalPlaces = 6;\n  return Math.round(x * 10 ** decimalPlaces) / 10 ** decimalPlaces;\n};\n\nconst dedupePoints = (points: Point[]): Point[] => {\n  const map = new Map<string, Point>();\n\n  for (const point of points) {\n    const key = point.join(\",\");\n\n    if (!map.has(key)) {\n      map.set(key, point);\n    }\n  }\n\n  return Array.from(map.values());\n};\n\nconst createPointSnapLines = (\n  nearestSnapsX: Snaps,\n  nearestSnapsY: Snaps,\n): PointSnapLine[] => {\n  const snapsX = {} as { [key: string]: Point[] };\n  const snapsY = {} as { [key: string]: Point[] };\n\n  if (nearestSnapsX.length > 0) {\n    for (const snap of nearestSnapsX) {\n      if (snap.type === \"point\") {\n        // key = thisPoint.x\n        const key = round(snap.points[0][0]);\n        if (!snapsX[key]) {\n          snapsX[key] = [];\n        }\n        snapsX[key].push(\n          ...snap.points.map(\n            (point) => [round(point[0]), round(point[1])] as Point,\n          ),\n        );\n      }\n    }\n  }\n\n  if (nearestSnapsY.length > 0) {\n    for (const snap of nearestSnapsY) {\n      if (snap.type === \"point\") {\n        // key = thisPoint.y\n        const key = round(snap.points[0][1]);\n        if (!snapsY[key]) {\n          snapsY[key] = [];\n        }\n        snapsY[key].push(\n          ...snap.points.map(\n            (point) => [round(point[0]), round(point[1])] as Point,\n          ),\n        );\n      }\n    }\n  }\n\n  return Object.entries(snapsX)\n    .map(([key, points]) => {\n      return {\n        type: \"points\",\n        points: dedupePoints(\n          points\n            .map((point) => {\n              return [Number(key), point[1]] as Point;\n            })\n            .sort((a, b) => a[1] - b[1]),\n        ),\n      } as PointSnapLine;\n    })\n    .concat(\n      Object.entries(snapsY).map(([key, points]) => {\n        return {\n          type: \"points\",\n          points: dedupePoints(\n            points\n              .map((point) => {\n                return [point[0], Number(key)] as Point;\n              })\n              .sort((a, b) => a[0] - b[0]),\n          ),\n        } as PointSnapLine;\n      }),\n    );\n};\n\nconst dedupeGapSnapLines = (gapSnapLines: GapSnapLine[]) => {\n  const map = new Map<string, GapSnapLine>();\n\n  for (const gapSnapLine of gapSnapLines) {\n    const key = gapSnapLine.points\n      .flat()\n      .map((point) => [round(point)])\n      .join(\",\");\n\n    if (!map.has(key)) {\n      map.set(key, gapSnapLine);\n    }\n  }\n\n  return Array.from(map.values());\n};\n\nconst createGapSnapLines = (\n  selectedElements: ExcalidrawElement[],\n  dragOffset: Vector2D,\n  gapSnaps: GapSnap[],\n): GapSnapLine[] => {\n  const [minX, minY, maxX, maxY] = getDraggedElementsBounds(\n    selectedElements,\n    dragOffset,\n  );\n\n  const gapSnapLines: GapSnapLine[] = [];\n\n  for (const gapSnap of gapSnaps) {\n    const [startMinX, startMinY, startMaxX, startMaxY] =\n      gapSnap.gap.startBounds;\n    const [endMinX, endMinY, endMaxX, endMaxY] = gapSnap.gap.endBounds;\n\n    const verticalIntersection = rangeIntersection(\n      [minY, maxY],\n      gapSnap.gap.overlap,\n    );\n\n    const horizontalGapIntersection = rangeIntersection(\n      [minX, maxX],\n      gapSnap.gap.overlap,\n    );\n\n    switch (gapSnap.direction) {\n      case \"center_horizontal\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [gapSnap.gap.startSide[0][0], gapLineY],\n                [minX, gapLineY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [maxX, gapLineY],\n                [gapSnap.gap.endSide[0][0], gapLineY],\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"center_vertical\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, gapSnap.gap.startSide[0][1]],\n                [gapLineX, minY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, maxY],\n                [gapLineX, gapSnap.gap.endSide[0][1]],\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_right\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [startMaxX, gapLineY],\n                [endMinX, gapLineY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [endMaxX, gapLineY],\n                [minX, gapLineY],\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_left\": {\n        if (verticalIntersection) {\n          const gapLineY =\n            (verticalIntersection[0] + verticalIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [maxX, gapLineY],\n                [startMinX, gapLineY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"horizontal\",\n              points: [\n                [startMaxX, gapLineY],\n                [endMinX, gapLineY],\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_top\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, maxY],\n                [gapLineX, startMinY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, startMaxY],\n                [gapLineX, endMinY],\n              ],\n            },\n          );\n        }\n        break;\n      }\n      case \"side_bottom\": {\n        if (horizontalGapIntersection) {\n          const gapLineX =\n            (horizontalGapIntersection[0] + horizontalGapIntersection[1]) / 2;\n\n          gapSnapLines.push(\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, startMaxY],\n                [gapLineX, endMinY],\n              ],\n            },\n            {\n              type: \"gap\",\n              direction: \"vertical\",\n              points: [\n                [gapLineX, endMaxY],\n                [gapLineX, minY],\n              ],\n            },\n          );\n        }\n        break;\n      }\n    }\n  }\n\n  return dedupeGapSnapLines(\n    gapSnapLines.map((gapSnapLine) => {\n      return {\n        ...gapSnapLine,\n        points: gapSnapLine.points.map(\n          (point) => [round(point[0]), round(point[1])] as Point,\n        ) as PointPair,\n      };\n    }),\n  );\n};\n\nexport const snapResizingElements = (\n  // use the latest elements to create snap lines\n  selectedElements: ExcalidrawElement[],\n  // while using the original elements to appy dragOffset to calculate snaps\n  selectedOriginalElements: ExcalidrawElement[],\n  appState: AppState,\n  event: KeyboardModifiersObject,\n  dragOffset: Vector2D,\n  transformHandle: MaybeTransformHandleType,\n) => {\n  if (\n    !isSnappingEnabled({ event, selectedElements, appState }) ||\n    selectedElements.length === 0 ||\n    (selectedElements.length === 1 &&\n      !areRoughlyEqual(selectedElements[0].angle, 0))\n  ) {\n    return {\n      snapOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  let [minX, minY, maxX, maxY] = getCommonBounds(selectedOriginalElements);\n\n  if (transformHandle) {\n    if (transformHandle.includes(\"e\")) {\n      maxX += dragOffset.x;\n    } else if (transformHandle.includes(\"w\")) {\n      minX += dragOffset.x;\n    }\n\n    if (transformHandle.includes(\"n\")) {\n      minY += dragOffset.y;\n    } else if (transformHandle.includes(\"s\")) {\n      maxY += dragOffset.y;\n    }\n  }\n\n  const selectionSnapPoints: Point[] = [];\n\n  if (transformHandle) {\n    switch (transformHandle) {\n      case \"e\": {\n        selectionSnapPoints.push([maxX, minY], [maxX, maxY]);\n        break;\n      }\n      case \"w\": {\n        selectionSnapPoints.push([minX, minY], [minX, maxY]);\n        break;\n      }\n      case \"n\": {\n        selectionSnapPoints.push([minX, minY], [maxX, minY]);\n        break;\n      }\n      case \"s\": {\n        selectionSnapPoints.push([minX, maxY], [maxX, maxY]);\n        break;\n      }\n      case \"ne\": {\n        selectionSnapPoints.push([maxX, minY]);\n        break;\n      }\n      case \"nw\": {\n        selectionSnapPoints.push([minX, minY]);\n        break;\n      }\n      case \"se\": {\n        selectionSnapPoints.push([maxX, maxY]);\n        break;\n      }\n      case \"sw\": {\n        selectionSnapPoints.push([minX, maxY]);\n        break;\n      }\n    }\n  }\n\n  const snapDistance = getSnapDistance(appState.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n\n  getPointSnaps(\n    selectedOriginalElements,\n    selectionSnapPoints,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  // again, once snap offset is calculated\n  // reset to recompute for creating snap lines to be rendered\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n\n  const [x1, y1, x2, y2] = getCommonBounds(selectedElements).map((bound) =>\n    round(bound),\n  );\n\n  const corners: Point[] = [\n    [x1, y1],\n    [x1, y2],\n    [x2, y1],\n    [x2, y2],\n  ];\n\n  getPointSnaps(\n    selectedElements,\n    corners,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  return {\n    snapOffset,\n    snapLines: pointSnapLines,\n  };\n};\n\nexport const snapNewElement = (\n  draggingElement: ExcalidrawElement,\n  appState: AppState,\n  event: KeyboardModifiersObject,\n  origin: Vector2D,\n  dragOffset: Vector2D,\n  elementsMap: ElementsMap,\n) => {\n  if (\n    !isSnappingEnabled({ event, selectedElements: [draggingElement], appState })\n  ) {\n    return {\n      snapOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  const selectionSnapPoints: Point[] = [\n    [origin.x + dragOffset.x, origin.y + dragOffset.y],\n  ];\n\n  const snapDistance = getSnapDistance(appState.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const nearestSnapsX: Snaps = [];\n  const nearestSnapsY: Snaps = [];\n\n  getPointSnaps(\n    [draggingElement],\n    selectionSnapPoints,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const snapOffset = {\n    x: nearestSnapsX[0]?.offset ?? 0,\n    y: nearestSnapsY[0]?.offset ?? 0,\n  };\n\n  minOffset.x = 0;\n  minOffset.y = 0;\n  nearestSnapsX.length = 0;\n  nearestSnapsY.length = 0;\n\n  const corners = getElementsCorners([draggingElement], elementsMap, {\n    boundingBoxCorners: true,\n    omitCenter: true,\n  });\n\n  getPointSnaps(\n    [draggingElement],\n    corners,\n    appState,\n    event,\n    nearestSnapsX,\n    nearestSnapsY,\n    minOffset,\n  );\n\n  const pointSnapLines = createPointSnapLines(nearestSnapsX, nearestSnapsY);\n\n  return {\n    snapOffset,\n    snapLines: pointSnapLines,\n  };\n};\n\nexport const getSnapLinesAtPointer = (\n  elements: readonly ExcalidrawElement[],\n  appState: AppState,\n  pointer: Vector2D,\n  event: KeyboardModifiersObject,\n  elementsMap: ElementsMap,\n) => {\n  if (!isSnappingEnabled({ event, selectedElements: [], appState })) {\n    return {\n      originOffset: { x: 0, y: 0 },\n      snapLines: [],\n    };\n  }\n\n  const referenceElements = getVisibleAndNonSelectedElements(\n    elements,\n    [],\n    appState,\n    elementsMap,\n  );\n\n  const snapDistance = getSnapDistance(appState.zoom.value);\n\n  const minOffset = {\n    x: snapDistance,\n    y: snapDistance,\n  };\n\n  const horizontalSnapLines: PointerSnapLine[] = [];\n  const verticalSnapLines: PointerSnapLine[] = [];\n\n  for (const referenceElement of referenceElements) {\n    const corners = getElementsCorners([referenceElement], elementsMap);\n\n    for (const corner of corners) {\n      const offsetX = corner[0] - pointer.x;\n\n      if (Math.abs(offsetX) <= Math.abs(minOffset.x)) {\n        if (Math.abs(offsetX) < Math.abs(minOffset.x)) {\n          verticalSnapLines.length = 0;\n        }\n\n        verticalSnapLines.push({\n          type: \"pointer\",\n          points: [corner, [corner[0], pointer.y]],\n          direction: \"vertical\",\n        });\n\n        minOffset.x = offsetX;\n      }\n\n      const offsetY = corner[1] - pointer.y;\n\n      if (Math.abs(offsetY) <= Math.abs(minOffset.y)) {\n        if (Math.abs(offsetY) < Math.abs(minOffset.y)) {\n          horizontalSnapLines.length = 0;\n        }\n\n        horizontalSnapLines.push({\n          type: \"pointer\",\n          points: [corner, [pointer.x, corner[1]]],\n          direction: \"horizontal\",\n        });\n\n        minOffset.y = offsetY;\n      }\n    }\n  }\n\n  return {\n    originOffset: {\n      x:\n        verticalSnapLines.length > 0\n          ? verticalSnapLines[0].points[0][0] - pointer.x\n          : 0,\n      y:\n        horizontalSnapLines.length > 0\n          ? horizontalSnapLines[0].points[0][1] - pointer.y\n          : 0,\n    },\n    snapLines: [...verticalSnapLines, ...horizontalSnapLines],\n  };\n};\n\nexport const isActiveToolNonLinearSnappable = (\n  activeToolType: AppState[\"activeTool\"][\"type\"],\n) => {\n  return (\n    activeToolType === TOOL_TYPE.rectangle ||\n    activeToolType === TOOL_TYPE.ellipse ||\n    activeToolType === TOOL_TYPE.diamond ||\n    activeToolType === TOOL_TYPE.frame ||\n    activeToolType === TOOL_TYPE.magicframe ||\n    activeToolType === TOOL_TYPE.image\n  );\n};\n", "import Trans from \"./Trans\";\n\nconst BraveMeasureTextError = () => {\n  return (\n    <div data-testid=\"brave-measure-text-error\">\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line1\"\n          bold={(el) => <span style={{ fontWeight: 600 }}>{el}</span>}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line2\"\n          bold={(el) => <span style={{ fontWeight: 600 }}>{el}</span>}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line3\"\n          link={(el) => (\n            <a href=\"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser\">\n              {el}\n            </a>\n          )}\n        />\n      </p>\n      <p>\n        <Trans\n          i18nKey=\"errors.brave_measure_text_error.line4\"\n          issueLink={(el) => (\n            <a href=\"https://github.com/excalidraw/excalidraw/issues/new\">\n              {el}\n            </a>\n          )}\n          discordLink={(el) => <a href=\"https://discord.gg/UexuTaE\">{el}.</a>}\n        />\n      </p>\n    </div>\n  );\n};\n\nexport default BraveMeasureTextError;\n", "import {\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  TEXT_ALIGN,\n  VERTICAL_ALIGN,\n} from \"../constants\";\nimport {\n  getCommonBounds,\n  newElement,\n  newLinearElement,\n  redrawTextBoundingBox,\n} from \"../element\";\nimport { bindLinearElement } from \"../element/binding\";\nimport {\n  ElementConstructorOpts,\n  newFrameElement,\n  newImageElement,\n  newMagicFrameElement,\n  newTextElement,\n} from \"../element/newElement\";\nimport {\n  getDefaultLineHeight,\n  measureText,\n  normalizeText,\n} from \"../element/textElement\";\nimport {\n  ElementsMap,\n  ExcalidrawArrowElement,\n  ExcalidrawBindableElement,\n  ExcalidrawElement,\n  ExcalidrawFrameElement,\n  ExcalidrawFreeDrawElement,\n  ExcalidrawGenericElement,\n  ExcalidrawIframeLikeElement,\n  ExcalidrawImageElement,\n  ExcalidrawLinearElement,\n  ExcalidrawMagicFrameElement,\n  ExcalidrawSelectionElement,\n  ExcalidrawTextElement,\n  FileId,\n  FontFamilyValues,\n  NonDeletedSceneElementsMap,\n  TextAlign,\n  VerticalAlign,\n} from \"../element/types\";\nimport { MarkOptional } from \"../utility-types\";\nimport { assertNever, cloneJSON, getFontString, toBrandedType } from \"../utils\";\nimport { getSizeFromPoints } from \"../points\";\nimport { randomId } from \"../random\";\n\nexport type ValidLinearElement = {\n  type: \"arrow\" | \"line\";\n  x: number;\n  y: number;\n  label?: {\n    text: string;\n    fontSize?: number;\n    fontFamily?: FontFamilyValues;\n    textAlign?: TextAlign;\n    verticalAlign?: VerticalAlign;\n  } & MarkOptional<ElementConstructorOpts, \"x\" | \"y\">;\n  end?:\n    | (\n        | (\n            | {\n                type: Exclude<\n                  ExcalidrawBindableElement[\"type\"],\n                  | \"image\"\n                  | \"text\"\n                  | \"frame\"\n                  | \"magicframe\"\n                  | \"embeddable\"\n                  | \"iframe\"\n                >;\n                id?: ExcalidrawGenericElement[\"id\"];\n              }\n            | {\n                id: ExcalidrawGenericElement[\"id\"];\n                type?: Exclude<\n                  ExcalidrawBindableElement[\"type\"],\n                  | \"image\"\n                  | \"text\"\n                  | \"frame\"\n                  | \"magicframe\"\n                  | \"embeddable\"\n                  | \"iframe\"\n                >;\n              }\n          )\n        | ((\n            | {\n                type: \"text\";\n                text: string;\n              }\n            | {\n                type?: \"text\";\n                id: ExcalidrawTextElement[\"id\"];\n                text: string;\n              }\n          ) &\n            Partial<ExcalidrawTextElement>)\n      ) &\n        MarkOptional<ElementConstructorOpts, \"x\" | \"y\">;\n  start?:\n    | (\n        | (\n            | {\n                type: Exclude<\n                  ExcalidrawBindableElement[\"type\"],\n                  | \"image\"\n                  | \"text\"\n                  | \"frame\"\n                  | \"magicframe\"\n                  | \"embeddable\"\n                  | \"iframe\"\n                >;\n                id?: ExcalidrawGenericElement[\"id\"];\n              }\n            | {\n                id: ExcalidrawGenericElement[\"id\"];\n                type?: Exclude<\n                  ExcalidrawBindableElement[\"type\"],\n                  | \"image\"\n                  | \"text\"\n                  | \"frame\"\n                  | \"magicframe\"\n                  | \"embeddable\"\n                  | \"iframe\"\n                >;\n              }\n          )\n        | ((\n            | {\n                type: \"text\";\n                text: string;\n              }\n            | {\n                type?: \"text\";\n                id: ExcalidrawTextElement[\"id\"];\n                text: string;\n              }\n          ) &\n            Partial<ExcalidrawTextElement>)\n      ) &\n        MarkOptional<ElementConstructorOpts, \"x\" | \"y\">;\n} & Partial<ExcalidrawLinearElement>;\n\nexport type ValidContainer =\n  | {\n      type: Exclude<ExcalidrawGenericElement[\"type\"], \"selection\">;\n      id?: ExcalidrawGenericElement[\"id\"];\n      label?: {\n        text: string;\n        fontSize?: number;\n        fontFamily?: FontFamilyValues;\n        textAlign?: TextAlign;\n        verticalAlign?: VerticalAlign;\n      } & MarkOptional<ElementConstructorOpts, \"x\" | \"y\">;\n    } & ElementConstructorOpts;\n\nexport type ExcalidrawElementSkeleton =\n  | Extract<\n      Exclude<ExcalidrawElement, ExcalidrawSelectionElement>,\n      ExcalidrawIframeLikeElement | ExcalidrawFreeDrawElement\n    >\n  | ({\n      type: Extract<ExcalidrawLinearElement[\"type\"], \"line\">;\n      x: number;\n      y: number;\n    } & Partial<ExcalidrawLinearElement>)\n  | ValidContainer\n  | ValidLinearElement\n  | ({\n      type: \"text\";\n      text: string;\n      x: number;\n      y: number;\n      id?: ExcalidrawTextElement[\"id\"];\n    } & Partial<ExcalidrawTextElement>)\n  | ({\n      type: Extract<ExcalidrawImageElement[\"type\"], \"image\">;\n      x: number;\n      y: number;\n      fileId: FileId;\n    } & Partial<ExcalidrawImageElement>)\n  | ({\n      type: \"frame\";\n      children: readonly ExcalidrawElement[\"id\"][];\n      name?: string;\n    } & Partial<ExcalidrawFrameElement>)\n  | ({\n      type: \"magicframe\";\n      children: readonly ExcalidrawElement[\"id\"][];\n      name?: string;\n    } & Partial<ExcalidrawMagicFrameElement>);\n\nconst DEFAULT_LINEAR_ELEMENT_PROPS = {\n  width: 100,\n  height: 0,\n};\n\nconst DEFAULT_DIMENSION = 100;\n\nconst bindTextToContainer = (\n  container: ExcalidrawElement,\n  textProps: { text: string } & MarkOptional<ElementConstructorOpts, \"x\" | \"y\">,\n  elementsMap: ElementsMap,\n) => {\n  const textElement: ExcalidrawTextElement = newTextElement({\n    x: 0,\n    y: 0,\n    textAlign: TEXT_ALIGN.CENTER,\n    verticalAlign: VERTICAL_ALIGN.MIDDLE,\n    ...textProps,\n    containerId: container.id,\n    strokeColor: textProps.strokeColor || container.strokeColor,\n  });\n\n  Object.assign(container, {\n    boundElements: (container.boundElements || []).concat({\n      type: \"text\",\n      id: textElement.id,\n    }),\n  });\n\n  redrawTextBoundingBox(textElement, container, elementsMap);\n  return [container, textElement] as const;\n};\n\nconst bindLinearElementToElement = (\n  linearElement: ExcalidrawArrowElement,\n  start: ValidLinearElement[\"start\"],\n  end: ValidLinearElement[\"end\"],\n  elementStore: ElementStore,\n  elementsMap: NonDeletedSceneElementsMap,\n): {\n  linearElement: ExcalidrawLinearElement;\n  startBoundElement?: ExcalidrawElement;\n  endBoundElement?: ExcalidrawElement;\n} => {\n  let startBoundElement;\n  let endBoundElement;\n\n  Object.assign(linearElement, {\n    startBinding: linearElement?.startBinding || null,\n    endBinding: linearElement.endBinding || null,\n  });\n\n  if (start) {\n    const width = start?.width ?? DEFAULT_DIMENSION;\n    const height = start?.height ?? DEFAULT_DIMENSION;\n\n    let existingElement;\n    if (start.id) {\n      existingElement = elementStore.getElement(start.id);\n      if (!existingElement) {\n        console.error(`No element for start binding with id ${start.id} found`);\n      }\n    }\n\n    const startX = start.x || linearElement.x - width;\n    const startY = start.y || linearElement.y - height / 2;\n    const startType = existingElement ? existingElement.type : start.type;\n\n    if (startType) {\n      if (startType === \"text\") {\n        let text = \"\";\n        if (existingElement && existingElement.type === \"text\") {\n          text = existingElement.text;\n        } else if (start.type === \"text\") {\n          text = start.text;\n        }\n        if (!text) {\n          console.error(\n            `No text found for start binding text element for ${linearElement.id}`,\n          );\n        }\n        startBoundElement = newTextElement({\n          x: startX,\n          y: startY,\n          type: \"text\",\n          ...existingElement,\n          ...start,\n          text,\n        });\n        // to position the text correctly when coordinates not provided\n        Object.assign(startBoundElement, {\n          x: start.x || linearElement.x - startBoundElement.width,\n          y: start.y || linearElement.y - startBoundElement.height / 2,\n        });\n      } else {\n        switch (startType) {\n          case \"rectangle\":\n          case \"ellipse\":\n          case \"diamond\": {\n            startBoundElement = newElement({\n              x: startX,\n              y: startY,\n              width,\n              height,\n              ...existingElement,\n              ...start,\n              type: startType,\n            });\n            break;\n          }\n          default: {\n            assertNever(\n              linearElement as never,\n              `Unhandled element start type \"${start.type}\"`,\n              true,\n            );\n          }\n        }\n      }\n\n      bindLinearElement(\n        linearElement,\n        startBoundElement as ExcalidrawBindableElement,\n        \"start\",\n        elementsMap,\n      );\n    }\n  }\n  if (end) {\n    const height = end?.height ?? DEFAULT_DIMENSION;\n    const width = end?.width ?? DEFAULT_DIMENSION;\n\n    let existingElement;\n    if (end.id) {\n      existingElement = elementStore.getElement(end.id);\n      if (!existingElement) {\n        console.error(`No element for end binding with id ${end.id} found`);\n      }\n    }\n    const endX = end.x || linearElement.x + linearElement.width;\n    const endY = end.y || linearElement.y - height / 2;\n    const endType = existingElement ? existingElement.type : end.type;\n\n    if (endType) {\n      if (endType === \"text\") {\n        let text = \"\";\n        if (existingElement && existingElement.type === \"text\") {\n          text = existingElement.text;\n        } else if (end.type === \"text\") {\n          text = end.text;\n        }\n\n        if (!text) {\n          console.error(\n            `No text found for end binding text element for ${linearElement.id}`,\n          );\n        }\n        endBoundElement = newTextElement({\n          x: endX,\n          y: endY,\n          type: \"text\",\n          ...existingElement,\n          ...end,\n          text,\n        });\n        // to position the text correctly when coordinates not provided\n        Object.assign(endBoundElement, {\n          y: end.y || linearElement.y - endBoundElement.height / 2,\n        });\n      } else {\n        switch (endType) {\n          case \"rectangle\":\n          case \"ellipse\":\n          case \"diamond\": {\n            endBoundElement = newElement({\n              x: endX,\n              y: endY,\n              width,\n              height,\n              ...existingElement,\n              ...end,\n              type: endType,\n            });\n            break;\n          }\n          default: {\n            assertNever(\n              linearElement as never,\n              `Unhandled element end type \"${endType}\"`,\n              true,\n            );\n          }\n        }\n      }\n\n      bindLinearElement(\n        linearElement,\n        endBoundElement as ExcalidrawBindableElement,\n        \"end\",\n        elementsMap,\n      );\n    }\n  }\n\n  // Update start/end points by 0.5 so bindings don't overlap with start/end bound element coordinates.\n  const endPointIndex = linearElement.points.length - 1;\n  const delta = 0.5;\n\n  const newPoints = cloneJSON(linearElement.points) as [number, number][];\n  // left to right so shift the arrow towards right\n  if (\n    linearElement.points[endPointIndex][0] >\n    linearElement.points[endPointIndex - 1][0]\n  ) {\n    newPoints[0][0] = delta;\n    newPoints[endPointIndex][0] -= delta;\n  }\n\n  // right to left so shift the arrow towards left\n  if (\n    linearElement.points[endPointIndex][0] <\n    linearElement.points[endPointIndex - 1][0]\n  ) {\n    newPoints[0][0] = -delta;\n    newPoints[endPointIndex][0] += delta;\n  }\n  // top to bottom so shift the arrow towards top\n  if (\n    linearElement.points[endPointIndex][1] >\n    linearElement.points[endPointIndex - 1][1]\n  ) {\n    newPoints[0][1] = delta;\n    newPoints[endPointIndex][1] -= delta;\n  }\n\n  // bottom to top so shift the arrow towards bottom\n  if (\n    linearElement.points[endPointIndex][1] <\n    linearElement.points[endPointIndex - 1][1]\n  ) {\n    newPoints[0][1] = -delta;\n    newPoints[endPointIndex][1] += delta;\n  }\n\n  Object.assign(linearElement, { points: newPoints });\n\n  return {\n    linearElement,\n    startBoundElement,\n    endBoundElement,\n  };\n};\n\nclass ElementStore {\n  excalidrawElements = new Map<string, ExcalidrawElement>();\n\n  add = (ele?: ExcalidrawElement) => {\n    if (!ele) {\n      return;\n    }\n\n    this.excalidrawElements.set(ele.id, ele);\n  };\n  getElements = () => {\n    return Array.from(this.excalidrawElements.values());\n  };\n\n  getElementsMap = () => {\n    return toBrandedType<NonDeletedSceneElementsMap>(this.excalidrawElements);\n  };\n\n  getElement = (id: string) => {\n    return this.excalidrawElements.get(id);\n  };\n}\n\nexport const convertToExcalidrawElements = (\n  elementsSkeleton: ExcalidrawElementSkeleton[] | null,\n  opts?: { regenerateIds: boolean },\n) => {\n  if (!elementsSkeleton) {\n    return [];\n  }\n  const elements = cloneJSON(elementsSkeleton);\n  const elementStore = new ElementStore();\n  const elementsWithIds = new Map<string, ExcalidrawElementSkeleton>();\n  const oldToNewElementIdMap = new Map<string, string>();\n\n  // Create individual elements\n  for (const element of elements) {\n    let excalidrawElement: ExcalidrawElement;\n    const originalId = element.id;\n    if (opts?.regenerateIds !== false) {\n      Object.assign(element, { id: randomId() });\n    }\n\n    switch (element.type) {\n      case \"rectangle\":\n      case \"ellipse\":\n      case \"diamond\": {\n        const width =\n          element?.label?.text && element.width === undefined\n            ? 0\n            : element?.width || DEFAULT_DIMENSION;\n        const height =\n          element?.label?.text && element.height === undefined\n            ? 0\n            : element?.height || DEFAULT_DIMENSION;\n        excalidrawElement = newElement({\n          ...element,\n          width,\n          height,\n        });\n\n        break;\n      }\n      case \"line\": {\n        const width = element.width || DEFAULT_LINEAR_ELEMENT_PROPS.width;\n        const height = element.height || DEFAULT_LINEAR_ELEMENT_PROPS.height;\n        excalidrawElement = newLinearElement({\n          width,\n          height,\n          points: [\n            [0, 0],\n            [width, height],\n          ],\n          ...element,\n        });\n\n        break;\n      }\n      case \"arrow\": {\n        const width = element.width || DEFAULT_LINEAR_ELEMENT_PROPS.width;\n        const height = element.height || DEFAULT_LINEAR_ELEMENT_PROPS.height;\n        excalidrawElement = newLinearElement({\n          width,\n          height,\n          endArrowhead: \"arrow\",\n          points: [\n            [0, 0],\n            [width, height],\n          ],\n          ...element,\n        });\n\n        Object.assign(\n          excalidrawElement,\n          getSizeFromPoints(excalidrawElement.points),\n        );\n        break;\n      }\n      case \"text\": {\n        const fontFamily = element?.fontFamily || DEFAULT_FONT_FAMILY;\n        const fontSize = element?.fontSize || DEFAULT_FONT_SIZE;\n        const lineHeight =\n          element?.lineHeight || getDefaultLineHeight(fontFamily);\n        const text = element.text ?? \"\";\n        const normalizedText = normalizeText(text);\n        const metrics = measureText(\n          normalizedText,\n          getFontString({ fontFamily, fontSize }),\n          lineHeight,\n        );\n\n        excalidrawElement = newTextElement({\n          width: metrics.width,\n          height: metrics.height,\n          fontFamily,\n          fontSize,\n          ...element,\n        });\n        break;\n      }\n      case \"image\": {\n        excalidrawElement = newImageElement({\n          width: element?.width || DEFAULT_DIMENSION,\n          height: element?.height || DEFAULT_DIMENSION,\n          ...element,\n        });\n\n        break;\n      }\n      case \"frame\": {\n        excalidrawElement = newFrameElement({\n          x: 0,\n          y: 0,\n          ...element,\n        });\n        break;\n      }\n      case \"magicframe\": {\n        excalidrawElement = newMagicFrameElement({\n          x: 0,\n          y: 0,\n          ...element,\n        });\n        break;\n      }\n      case \"freedraw\":\n      case \"iframe\":\n      case \"embeddable\": {\n        excalidrawElement = element;\n        break;\n      }\n\n      default: {\n        excalidrawElement = element;\n        assertNever(\n          element,\n          `Unhandled element type \"${(element as any).type}\"`,\n          true,\n        );\n      }\n    }\n    const existingElement = elementStore.getElement(excalidrawElement.id);\n    if (existingElement) {\n      console.error(`Duplicate id found for ${excalidrawElement.id}`);\n    } else {\n      elementStore.add(excalidrawElement);\n      elementsWithIds.set(excalidrawElement.id, element);\n      if (originalId) {\n        oldToNewElementIdMap.set(originalId, excalidrawElement.id);\n      }\n    }\n  }\n\n  const elementsMap = elementStore.getElementsMap();\n  // Add labels and arrow bindings\n  for (const [id, element] of elementsWithIds) {\n    const excalidrawElement = elementStore.getElement(id)!;\n\n    switch (element.type) {\n      case \"rectangle\":\n      case \"ellipse\":\n      case \"diamond\":\n      case \"arrow\": {\n        if (element.label?.text) {\n          let [container, text] = bindTextToContainer(\n            excalidrawElement,\n            element?.label,\n            elementsMap,\n          );\n          elementStore.add(container);\n          elementStore.add(text);\n\n          if (container.type === \"arrow\") {\n            const originalStart =\n              element.type === \"arrow\" ? element?.start : undefined;\n            const originalEnd =\n              element.type === \"arrow\" ? element?.end : undefined;\n            if (originalStart && originalStart.id) {\n              const newStartId = oldToNewElementIdMap.get(originalStart.id);\n              if (newStartId) {\n                Object.assign(originalStart, { id: newStartId });\n              }\n            }\n            if (originalEnd && originalEnd.id) {\n              const newEndId = oldToNewElementIdMap.get(originalEnd.id);\n              if (newEndId) {\n                Object.assign(originalEnd, { id: newEndId });\n              }\n            }\n            const { linearElement, startBoundElement, endBoundElement } =\n              bindLinearElementToElement(\n                container as ExcalidrawArrowElement,\n                originalStart,\n                originalEnd,\n                elementStore,\n                elementsMap,\n              );\n            container = linearElement;\n            elementStore.add(linearElement);\n            elementStore.add(startBoundElement);\n            elementStore.add(endBoundElement);\n          }\n        } else {\n          switch (element.type) {\n            case \"arrow\": {\n              const { start, end } = element;\n              if (start && start.id) {\n                const newStartId = oldToNewElementIdMap.get(start.id);\n                Object.assign(start, { id: newStartId });\n              }\n              if (end && end.id) {\n                const newEndId = oldToNewElementIdMap.get(end.id);\n                Object.assign(end, { id: newEndId });\n              }\n              const { linearElement, startBoundElement, endBoundElement } =\n                bindLinearElementToElement(\n                  excalidrawElement as ExcalidrawArrowElement,\n                  start,\n                  end,\n                  elementStore,\n                  elementsMap,\n                );\n\n              elementStore.add(linearElement);\n              elementStore.add(startBoundElement);\n              elementStore.add(endBoundElement);\n              break;\n            }\n          }\n        }\n        break;\n      }\n    }\n  }\n\n  // Once all the excalidraw elements are created, we can add frames since we\n  // need to calculate coordinates and dimensions of frame which is possibe after all\n  // frame children are processed.\n  for (const [id, element] of elementsWithIds) {\n    if (element.type !== \"frame\" && element.type !== \"magicframe\") {\n      continue;\n    }\n    const frame = elementStore.getElement(id);\n\n    if (!frame) {\n      throw new Error(`Excalidraw element with id ${id} doesn't exist`);\n    }\n    const childrenElements: ExcalidrawElement[] = [];\n\n    element.children.forEach((id) => {\n      const newElementId = oldToNewElementIdMap.get(id);\n      if (!newElementId) {\n        throw new Error(`Element with ${id} wasn't mapped correctly`);\n      }\n\n      const elementInFrame = elementStore.getElement(newElementId);\n      if (!elementInFrame) {\n        throw new Error(`Frame element with id ${newElementId} doesn't exist`);\n      }\n      Object.assign(elementInFrame, { frameId: frame.id });\n\n      elementInFrame?.boundElements?.forEach((boundElement) => {\n        const ele = elementStore.getElement(boundElement.id);\n        if (!ele) {\n          throw new Error(\n            `Bound element with id ${boundElement.id} doesn't exist`,\n          );\n        }\n        Object.assign(ele, { frameId: frame.id });\n        childrenElements.push(ele);\n      });\n\n      childrenElements.push(elementInFrame);\n    });\n\n    let [minX, minY, maxX, maxY] = getCommonBounds(childrenElements);\n\n    const PADDING = 10;\n    minX = minX - PADDING;\n    minY = minY - PADDING;\n    maxX = maxX + PADDING;\n    maxY = maxY + PADDING;\n\n    // Take the max of calculated and provided frame dimensions, whichever is higher\n    const width = Math.max(frame?.width, maxX - minX);\n    const height = Math.max(frame?.height, maxY - minY);\n    Object.assign(frame, { x: minX, y: minY, width, height });\n  }\n\n  return elementStore.getElements();\n};\n", "/**\n * @param func handler taking at most single parameter (event).\n */\n\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport { version as ReactVersion } from \"react\";\nimport { throttleRAF } from \"./utils\";\n\nexport const withBatchedUpdates = <\n  TFunction extends ((event: any) => void) | (() => void),\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never,\n) =>\n  ((event) => {\n    unstable_batchedUpdates(func as TFunction, event);\n  }) as TFunction;\n\n/**\n * barches React state updates and throttles the calls to a single call per\n * animation frame\n */\nexport const withBatchedUpdatesThrottled = <\n  TFunction extends ((event: any) => void) | (() => void),\n>(\n  func: Parameters<TFunction>[\"length\"] extends 0 | 1 ? TFunction : never,\n) => {\n  // @ts-ignore\n  return throttleRAF<Parameters<TFunction>>(((event) => {\n    unstable_batchedUpdates(func, event);\n  }) as TFunction);\n};\n\nexport const isRenderThrottlingEnabled = (() => {\n  // we don't want to throttle in react < 18 because of #5439 and it was\n  // getting more complex to maintain the fix\n  let IS_REACT_18_AND_UP: boolean;\n  try {\n    const version = ReactVersion.split(\".\");\n    IS_REACT_18_AND_UP = Number(version[0]) > 17;\n  } catch {\n    IS_REACT_18_AND_UP = false;\n  }\n\n  let hasWarned = false;\n\n  return () => {\n    if (window.EXCALIDRAW_THROTTLE_RENDER === true) {\n      if (!IS_REACT_18_AND_UP) {\n        if (!hasWarned) {\n          hasWarned = true;\n          console.warn(\n            \"Excalidraw: render throttling is disabled on React versions < 18.\",\n          );\n        }\n        return false;\n      }\n      return true;\n    }\n    return false;\n  };\n})();\n", "import React, { useEffect, useRef } from \"react\";\nimport { renderInteractiveScene } from \"../../renderer/renderScene\";\nimport { isShallowEqual, sceneCoordsToViewportCoords } from \"../../utils\";\nimport { CURSOR_TYPE } from \"../../constants\";\nimport { t } from \"../../i18n\";\nimport type { DOMAttributes } from \"react\";\nimport type { AppState, InteractiveCanvasAppState } from \"../../types\";\nimport type {\n  InteractiveCanvasRenderConfig,\n  RenderableElementsMap,\n  RenderInteractiveSceneCallback,\n} from \"../../scene/types\";\nimport type { NonDeletedExcalidrawElement } from \"../../element/types\";\nimport { isRenderThrottlingEnabled } from \"../../reactUtils\";\n\ntype InteractiveCanvasProps = {\n  containerRef: React.RefObject<HTMLDivElement>;\n  canvas: HTMLCanvasElement | null;\n  elementsMap: RenderableElementsMap;\n  visibleElements: readonly NonDeletedExcalidrawElement[];\n  selectedElements: readonly NonDeletedExcalidrawElement[];\n  versionNonce: number | undefined;\n  selectionNonce: number | undefined;\n  scale: number;\n  appState: InteractiveCanvasAppState;\n  renderInteractiveSceneCallback: (\n    data: RenderInteractiveSceneCallback,\n  ) => void;\n  handleCanvasRef: (canvas: HTMLCanvasElement | null) => void;\n  onContextMenu: Exclude<\n    DOMAttributes<HTMLCanvasElement | HTMLDivElement>[\"onContextMenu\"],\n    undefined\n  >;\n  onPointerMove: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerMove\"],\n    undefined\n  >;\n  onPointerUp: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerUp\"],\n    undefined\n  >;\n  onPointerCancel: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerCancel\"],\n    undefined\n  >;\n  onTouchMove: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onTouchMove\"],\n    undefined\n  >;\n  onPointerDown: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onPointerDown\"],\n    undefined\n  >;\n  onDoubleClick: Exclude<\n    DOMAttributes<HTMLCanvasElement>[\"onDoubleClick\"],\n    undefined\n  >;\n};\n\nconst InteractiveCanvas = (props: InteractiveCanvasProps) => {\n  const isComponentMounted = useRef(false);\n\n  useEffect(() => {\n    if (!isComponentMounted.current) {\n      isComponentMounted.current = true;\n      return;\n    }\n\n    const cursorButton: {\n      [id: string]: string | undefined;\n    } = {};\n    const pointerViewportCoords: InteractiveCanvasRenderConfig[\"remotePointerViewportCoords\"] =\n      {};\n    const remoteSelectedElementIds: InteractiveCanvasRenderConfig[\"remoteSelectedElementIds\"] =\n      {};\n    const pointerUsernames: { [id: string]: string } = {};\n    const pointerUserStates: { [id: string]: string } = {};\n\n    props.appState.collaborators.forEach((user, socketId) => {\n      if (user.selectedElementIds) {\n        for (const id of Object.keys(user.selectedElementIds)) {\n          if (!(id in remoteSelectedElementIds)) {\n            remoteSelectedElementIds[id] = [];\n          }\n          remoteSelectedElementIds[id].push(socketId);\n        }\n      }\n      if (!user.pointer) {\n        return;\n      }\n      if (user.username) {\n        pointerUsernames[socketId] = user.username;\n      }\n      if (user.userState) {\n        pointerUserStates[socketId] = user.userState;\n      }\n      pointerViewportCoords[socketId] = sceneCoordsToViewportCoords(\n        {\n          sceneX: user.pointer.x,\n          sceneY: user.pointer.y,\n        },\n        props.appState,\n      );\n      cursorButton[socketId] = user.button;\n    });\n\n    const selectionColor =\n      (props.containerRef?.current &&\n        getComputedStyle(props.containerRef.current).getPropertyValue(\n          \"--color-selection\",\n        )) ||\n      \"#6965db\";\n\n    renderInteractiveScene(\n      {\n        canvas: props.canvas,\n        elementsMap: props.elementsMap,\n        visibleElements: props.visibleElements,\n        selectedElements: props.selectedElements,\n        scale: window.devicePixelRatio,\n        appState: props.appState,\n        renderConfig: {\n          remotePointerViewportCoords: pointerViewportCoords,\n          remotePointerButton: cursorButton,\n          remoteSelectedElementIds,\n          remotePointerUsernames: pointerUsernames,\n          remotePointerUserStates: pointerUserStates,\n          selectionColor,\n          renderScrollbars: false,\n        },\n        callback: props.renderInteractiveSceneCallback,\n      },\n      isRenderThrottlingEnabled(),\n    );\n  });\n\n  return (\n    <canvas\n      className=\"excalidraw__canvas interactive\"\n      style={{\n        width: props.appState.width,\n        height: props.appState.height,\n        cursor: props.appState.viewModeEnabled\n          ? CURSOR_TYPE.GRAB\n          : CURSOR_TYPE.AUTO,\n      }}\n      width={props.appState.width * props.scale}\n      height={props.appState.height * props.scale}\n      ref={props.handleCanvasRef}\n      onContextMenu={props.onContextMenu}\n      onPointerMove={props.onPointerMove}\n      onPointerUp={props.onPointerUp}\n      onPointerCancel={props.onPointerCancel}\n      onTouchMove={props.onTouchMove}\n      onPointerDown={props.onPointerDown}\n      onDoubleClick={\n        props.appState.viewModeEnabled ? undefined : props.onDoubleClick\n      }\n    >\n      {t(\"labels.drawingCanvas\")}\n    </canvas>\n  );\n};\n\nconst getRelevantAppStateProps = (\n  appState: AppState,\n): InteractiveCanvasAppState => ({\n  zoom: appState.zoom,\n  scrollX: appState.scrollX,\n  scrollY: appState.scrollY,\n  width: appState.width,\n  height: appState.height,\n  viewModeEnabled: appState.viewModeEnabled,\n  editingGroupId: appState.editingGroupId,\n  editingLinearElement: appState.editingLinearElement,\n  selectedElementIds: appState.selectedElementIds,\n  frameToHighlight: appState.frameToHighlight,\n  offsetLeft: appState.offsetLeft,\n  offsetTop: appState.offsetTop,\n  theme: appState.theme,\n  pendingImageElementId: appState.pendingImageElementId,\n  selectionElement: appState.selectionElement,\n  selectedGroupIds: appState.selectedGroupIds,\n  selectedLinearElement: appState.selectedLinearElement,\n  multiElement: appState.multiElement,\n  isBindingEnabled: appState.isBindingEnabled,\n  suggestedBindings: appState.suggestedBindings,\n  isRotating: appState.isRotating,\n  elementsToHighlight: appState.elementsToHighlight,\n  collaborators: appState.collaborators, // Necessary for collab. sessions\n  activeEmbeddable: appState.activeEmbeddable,\n  snapLines: appState.snapLines,\n  zenModeEnabled: appState.zenModeEnabled,\n});\n\nconst areEqual = (\n  prevProps: InteractiveCanvasProps,\n  nextProps: InteractiveCanvasProps,\n) => {\n  // This could be further optimised if needed, as we don't have to render interactive canvas on each scene mutation\n  if (\n    prevProps.selectionNonce !== nextProps.selectionNonce ||\n    prevProps.versionNonce !== nextProps.versionNonce ||\n    prevProps.scale !== nextProps.scale ||\n    // we need to memoize on elementsMap because they may have renewed\n    // even if versionNonce didn't change (e.g. we filter elements out based\n    // on appState)\n    prevProps.elementsMap !== nextProps.elementsMap ||\n    prevProps.visibleElements !== nextProps.visibleElements ||\n    prevProps.selectedElements !== nextProps.selectedElements\n  ) {\n    return false;\n  }\n\n  // Comparing the interactive appState for changes in case of some edge cases\n  return isShallowEqual(\n    // asserting AppState because we're being passed the whole AppState\n    // but resolve to only the InteractiveCanvas-relevant props\n    getRelevantAppStateProps(prevProps.appState as AppState),\n    getRelevantAppStateProps(nextProps.appState as AppState),\n  );\n};\n\nexport default React.memo(InteractiveCanvas, areEqual);\n", "import React, { useEffect, useRef } from \"react\";\nimport { RoughCanvas } from \"roughjs/bin/canvas\";\nimport { renderStaticScene } from \"../../renderer/renderScene\";\nimport { isShallowEqual } from \"../../utils\";\nimport type { AppState, StaticCanvasAppState } from \"../../types\";\nimport type {\n  RenderableElementsMap,\n  StaticCanvasRenderConfig,\n} from \"../../scene/types\";\nimport type {\n  NonDeletedExcalidrawElement,\n  NonDeletedSceneElementsMap,\n} from \"../../element/types\";\nimport { isRenderThrottlingEnabled } from \"../../reactUtils\";\n\ntype StaticCanvasProps = {\n  canvas: HTMLCanvasElement;\n  rc: RoughCanvas;\n  elementsMap: RenderableElementsMap;\n  allElementsMap: NonDeletedSceneElementsMap;\n  visibleElements: readonly NonDeletedExcalidrawElement[];\n  versionNonce: number | undefined;\n  selectionNonce: number | undefined;\n  scale: number;\n  appState: StaticCanvasAppState;\n  renderConfig: StaticCanvasRenderConfig;\n};\n\nconst StaticCanvas = (props: StaticCanvasProps) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const isComponentMounted = useRef(false);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    if (!wrapper) {\n      return;\n    }\n\n    const canvas = props.canvas;\n\n    if (!isComponentMounted.current) {\n      isComponentMounted.current = true;\n\n      wrapper.replaceChildren(canvas);\n      canvas.classList.add(\"excalidraw__canvas\", \"static\");\n    }\n\n    const widthString = `${props.appState.width}px`;\n    const heightString = `${props.appState.height}px`;\n    if (canvas.style.width !== widthString) {\n      canvas.style.width = widthString;\n    }\n    if (canvas.style.height !== heightString) {\n      canvas.style.height = heightString;\n    }\n\n    const scaledWidth = props.appState.width * props.scale;\n    const scaledHeight = props.appState.height * props.scale;\n    // setting width/height resets the canvas even if dimensions not changed,\n    // which would cause flicker when we skip frame (due to throttling)\n    if (canvas.width !== scaledWidth) {\n      canvas.width = scaledWidth;\n    }\n    if (canvas.height !== scaledHeight) {\n      canvas.height = scaledHeight;\n    }\n\n    renderStaticScene(\n      {\n        canvas,\n        rc: props.rc,\n        scale: props.scale,\n        elementsMap: props.elementsMap,\n        allElementsMap: props.allElementsMap,\n        visibleElements: props.visibleElements,\n        appState: props.appState,\n        renderConfig: props.renderConfig,\n      },\n      isRenderThrottlingEnabled(),\n    );\n  });\n\n  return <div className=\"excalidraw__canvas-wrapper\" ref={wrapperRef} />;\n};\n\nconst getRelevantAppStateProps = (\n  appState: AppState,\n): StaticCanvasAppState => ({\n  zoom: appState.zoom,\n  scrollX: appState.scrollX,\n  scrollY: appState.scrollY,\n  width: appState.width,\n  height: appState.height,\n  viewModeEnabled: appState.viewModeEnabled,\n  offsetLeft: appState.offsetLeft,\n  offsetTop: appState.offsetTop,\n  theme: appState.theme,\n  pendingImageElementId: appState.pendingImageElementId,\n  shouldCacheIgnoreZoom: appState.shouldCacheIgnoreZoom,\n  viewBackgroundColor: appState.viewBackgroundColor,\n  exportScale: appState.exportScale,\n  selectedElementsAreBeingDragged: appState.selectedElementsAreBeingDragged,\n  gridSize: appState.gridSize,\n  frameRendering: appState.frameRendering,\n  selectedElementIds: appState.selectedElementIds,\n  frameToHighlight: appState.frameToHighlight,\n  editingGroupId: appState.editingGroupId,\n});\n\nconst areEqual = (\n  prevProps: StaticCanvasProps,\n  nextProps: StaticCanvasProps,\n) => {\n  if (\n    prevProps.versionNonce !== nextProps.versionNonce ||\n    prevProps.scale !== nextProps.scale ||\n    // we need to memoize on elementsMap because they may have renewed\n    // even if versionNonce didn't change (e.g. we filter elements out based\n    // on appState)\n    prevProps.elementsMap !== nextProps.elementsMap ||\n    prevProps.visibleElements !== nextProps.visibleElements\n  ) {\n    return false;\n  }\n\n  return (\n    isShallowEqual(\n      // asserting AppState because we're being passed the whole AppState\n      // but resolve to only the StaticCanvas-relevant props\n      getRelevantAppStateProps(prevProps.appState as AppState),\n      getRelevantAppStateProps(nextProps.appState as AppState),\n    ) && isShallowEqual(prevProps.renderConfig, nextProps.renderConfig)\n  );\n};\n\nexport default React.memo(StaticCanvas, areEqual);\n", "import InteractiveCanvas from \"./InteractiveCanvas\";\nimport StaticCanvas from \"./StaticCanvas\";\n\nexport { InteractiveCanvas, StaticCanvas };\n", "import { isElementInViewport } from \"../element/sizeHelpers\";\nimport { isImageElement } from \"../element/typeChecks\";\nimport {\n  NonDeletedElementsMap,\n  NonDeletedExcalidrawElement,\n} from \"../element/types\";\nimport { cancelRender } from \"../renderer/renderScene\";\nimport { AppState } from \"../types\";\nimport { memoize, toBrandedType } from \"../utils\";\nimport Scene from \"./Scene\";\nimport { RenderableElementsMap } from \"./types\";\n\nexport class Renderer {\n  private scene: Scene;\n\n  constructor(scene: Scene) {\n    this.scene = scene;\n  }\n\n  public getRenderableElements = (() => {\n    const getVisibleCanvasElements = ({\n      elementsMap,\n      zoom,\n      offsetLeft,\n      offsetTop,\n      scrollX,\n      scrollY,\n      height,\n      width,\n    }: {\n      elementsMap: NonDeletedElementsMap;\n      zoom: AppState[\"zoom\"];\n      offsetLeft: AppState[\"offsetLeft\"];\n      offsetTop: AppState[\"offsetTop\"];\n      scrollX: AppState[\"scrollX\"];\n      scrollY: AppState[\"scrollY\"];\n      height: AppState[\"height\"];\n      width: AppState[\"width\"];\n    }): readonly NonDeletedExcalidrawElement[] => {\n      const visibleElements: NonDeletedExcalidrawElement[] = [];\n      for (const element of elementsMap.values()) {\n        if (\n          isElementInViewport(\n            element,\n            width,\n            height,\n            {\n              zoom,\n              offsetLeft,\n              offsetTop,\n              scrollX,\n              scrollY,\n            },\n            elementsMap,\n          )\n        ) {\n          visibleElements.push(element);\n        }\n      }\n      return visibleElements;\n    };\n\n    const getRenderableElements = ({\n      elements,\n      editingElement,\n      pendingImageElementId,\n    }: {\n      elements: readonly NonDeletedExcalidrawElement[];\n      editingElement: AppState[\"editingElement\"];\n      pendingImageElementId: AppState[\"pendingImageElementId\"];\n    }) => {\n      const elementsMap = toBrandedType<RenderableElementsMap>(new Map());\n\n      for (const element of elements) {\n        if (isImageElement(element)) {\n          if (\n            // => not placed on canvas yet (but in elements array)\n            pendingImageElementId === element.id\n          ) {\n            continue;\n          }\n        }\n\n        // we don't want to render text element that's being currently edited\n        // (it's rendered on remote only)\n        if (\n          !editingElement ||\n          editingElement.type !== \"text\" ||\n          element.id !== editingElement.id\n        ) {\n          elementsMap.set(element.id, element);\n        }\n      }\n      return elementsMap;\n    };\n\n    return memoize(\n      ({\n        zoom,\n        offsetLeft,\n        offsetTop,\n        scrollX,\n        scrollY,\n        height,\n        width,\n        editingElement,\n        pendingImageElementId,\n        // unused but serves we cache on it to invalidate elements if they\n        // get mutated\n        versionNonce: _versionNonce,\n      }: {\n        zoom: AppState[\"zoom\"];\n        offsetLeft: AppState[\"offsetLeft\"];\n        offsetTop: AppState[\"offsetTop\"];\n        scrollX: AppState[\"scrollX\"];\n        scrollY: AppState[\"scrollY\"];\n        height: AppState[\"height\"];\n        width: AppState[\"width\"];\n        editingElement: AppState[\"editingElement\"];\n        pendingImageElementId: AppState[\"pendingImageElementId\"];\n        versionNonce: ReturnType<InstanceType<typeof Scene>[\"getVersionNonce\"]>;\n      }) => {\n        const elements = this.scene.getNonDeletedElements();\n\n        const elementsMap = getRenderableElements({\n          elements,\n          editingElement,\n          pendingImageElementId,\n        });\n\n        const visibleElements = getVisibleCanvasElements({\n          elementsMap,\n          zoom,\n          offsetLeft,\n          offsetTop,\n          scrollX,\n          scrollY,\n          height,\n          width,\n        });\n\n        return { elementsMap, visibleElements };\n      },\n    );\n  })();\n\n  // NOTE Doesn't destroy everything (scene, rc, etc.) because it may not be\n  // safe to break TS contract here (for upstream cases)\n  public destroy() {\n    cancelRender();\n    this.getRenderableElements.clear();\n  }\n}\n", ".excalidraw .SVGLayer {\n  pointer-events: none;\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2;\n}\n.excalidraw .SVGLayer svg {\n  image-rendering: auto;\n  overflow: visible;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIlNWR0xheWVyLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4Y2FsaWRyYXcge1xuICAuU1ZHTGF5ZXIge1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIHdpZHRoOiAxMDB2dztcbiAgICBoZWlnaHQ6IDEwMHZoO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcblxuICAgIHotaW5kZXg6IDI7XG5cbiAgICAmIHN2ZyB7XG4gICAgICBpbWFnZS1yZW5kZXJpbmc6IGF1dG87XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgdG9wOiAwO1xuICAgICAgbGVmdDogMDtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import { useEffect, useRef } from \"react\";\nimport { Trail } from \"../animated-trail\";\n\nimport \"./SVGLayer.scss\";\n\ntype SVGLayerProps = {\n  trails: Trail[];\n};\n\nexport const SVGLayer = ({ trails }: SVGLayerProps) => {\n  const svgRef = useRef<SVGSVGElement | null>(null);\n\n  useEffect(() => {\n    if (svgRef.current) {\n      for (const trail of trails) {\n        trail.start(svgRef.current);\n      }\n    }\n\n    return () => {\n      for (const trail of trails) {\n        trail.stop();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, trails);\n\n  return (\n    <div className=\"SVGLayer\">\n      <svg ref={svgRef} />\n    </div>\n  );\n};\n", "import { UnsubscribeCallback } from \"./types\";\n\ntype Subscriber<T extends any[]> = (...payload: T) => void;\n\nexport class Emitter<T extends any[] = []> {\n  public subscribers: Subscriber<T>[] = [];\n\n  /**\n   * Attaches subscriber\n   *\n   * @returns unsubscribe function\n   */\n  on(...handlers: Subscriber<T>[] | Subscriber<T>[][]): UnsubscribeCallback {\n    const _handlers = handlers\n      .flat()\n      .filter((item) => typeof item === \"function\");\n\n    this.subscribers.push(..._handlers);\n\n    return () => this.off(_handlers);\n  }\n\n  once(...handlers: Subscriber<T>[] | Subscriber<T>[][]): UnsubscribeCallback {\n    const _handlers = handlers\n      .flat()\n      .filter((item) => typeof item === \"function\");\n\n    _handlers.push(() => detach());\n\n    const detach = this.on(..._handlers);\n    return detach;\n  }\n\n  off(...handlers: Subscriber<T>[] | Subscriber<T>[][]) {\n    const _handlers = handlers.flat();\n    this.subscribers = this.subscribers.filter(\n      (handler) => !_handlers.includes(handler),\n    );\n  }\n\n  trigger(...payload: T) {\n    for (const handler of this.subscribers) {\n      handler(...payload);\n    }\n    return this;\n  }\n\n  clear() {\n    this.subscribers = [];\n  }\n}\n", ".excalidraw .excalidraw-canvas-buttons {\n  position: absolute;\n  box-shadow: 0px 2px 4px 0 rgba(0, 0, 0, 0.3);\n  z-index: var(--zIndex-canvasButtons);\n  background: var(--island-bg-color);\n  border-radius: var(--border-radius-lg);\n  display: flex;\n  flex-direction: column;\n  gap: 0.375rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2VsZW1lbnQiLCJzb3VyY2VzIjpbIkVsZW1lbnRDYW52YXNCdXR0b25zLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4Y2FsaWRyYXcge1xuICAuZXhjYWxpZHJhdy1jYW52YXMtYnV0dG9ucyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gICAgYm94LXNoYWRvdzogMHB4IDJweCA0cHggMCByZ2IoMCAwIDAgLyAzMCUpO1xuICAgIHotaW5kZXg6IHZhcigtLXpJbmRleC1jYW52YXNCdXR0b25zKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogMC4zNzVyZW07XG4gIH1cbn1cbiJdfQ== */", "import { AppState } from \"../types\";\nimport { sceneCoordsToViewportCoords } from \"../utils\";\nimport { ElementsMap, NonDeletedExcalidrawElement } from \"./types\";\nimport { getElementAbsoluteCoords } from \".\";\nimport { useExcalidrawAppState } from \"../components/App\";\n\nimport \"./ElementCanvasButtons.scss\";\n\nconst CONTAINER_PADDING = 5;\n\nconst getContainerCoords = (\n  element: NonDeletedExcalidrawElement,\n  appState: AppState,\n  elementsMap: ElementsMap,\n) => {\n  const [x1, y1] = getElementAbsoluteCoords(element, elementsMap);\n  const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n    { sceneX: x1 + element.width, sceneY: y1 },\n    appState,\n  );\n  const x = viewportX - appState.offsetLeft + 10;\n  const y = viewportY - appState.offsetTop;\n  return { x, y };\n};\n\nexport const ElementCanvasButtons = ({\n  children,\n  element,\n  elementsMap,\n}: {\n  children: React.ReactNode;\n  element: NonDeletedExcalidrawElement;\n  elementsMap: ElementsMap;\n}) => {\n  const appState = useExcalidrawAppState();\n\n  if (\n    appState.contextMenu ||\n    appState.draggingElement ||\n    appState.resizingElement ||\n    appState.isRotating ||\n    appState.openMenu ||\n    appState.viewModeEnabled\n  ) {\n    return null;\n  }\n\n  const { x, y } = getContainerCoords(element, appState, elementsMap);\n\n  return (\n    <div\n      className=\"excalidraw-canvas-buttons\"\n      style={{\n        top: `${y}px`,\n        left: `${x}px`,\n        // width: CONTAINER_WIDTH,\n        padding: CONTAINER_PADDING,\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n", "import { Theme } from \"../element/types\";\nimport { DataURL } from \"../types\";\nimport { OpenAIInput, OpenAIOutput } from \"./ai/types\";\n\nexport type MagicCacheData =\n  | {\n      status: \"pending\";\n    }\n  | { status: \"done\"; html: string }\n  | {\n      status: \"error\";\n      message?: string;\n      code: \"ERR_GENERATION_INTERRUPTED\" | string;\n    };\n\nconst SYSTEM_PROMPT = `You are a skilled front-end developer who builds interactive prototypes from wireframes, and is an expert at CSS Grid and Flex design.\nYour role is to transform low-fidelity wireframes into working front-end HTML code.\n\nYOU MUST FOLLOW FOLLOWING RULES:\n\n- Use HTML, CSS, JavaScript to build a responsive, accessible, polished prototype\n- Leverage Tailwind for styling and layout (import as script <script src=\"https://cdn.tailwindcss.com\"></script>)\n- Inline JavaScript when needed\n- Fetch dependencies from CDNs when needed (using unpkg or skypack)\n- Source images from Unsplash or create applicable placeholders\n- Interpret annotations as intended vs literal UI\n- Fill gaps using your expertise in UX and business logic\n- generate primarily for desktop UI, but make it responsive.\n- Use grid and flexbox wherever applicable.\n- Convert the wireframe in its entirety, don't omit elements if possible.\n\nIf the wireframes, diagrams, or text is unclear or unreadable, refer to provided text for clarification.\n\nYour goal is a production-ready prototype that brings the wireframes to life.\n\nPlease output JUST THE HTML file containing your best attempt at implementing the provided wireframes.`;\n\nexport async function diagramToHTML({\n  image,\n  apiKey,\n  text,\n  theme = \"light\",\n}: {\n  image: DataURL;\n  apiKey: string;\n  text: string;\n  theme?: Theme;\n}) {\n  const body: OpenAIInput.ChatCompletionCreateParamsBase = {\n    model: \"gpt-4-vision-preview\",\n    // 4096 are max output tokens allowed for `gpt-4-vision-preview` currently\n    max_tokens: 4096,\n    temperature: 0.1,\n    messages: [\n      {\n        role: \"system\",\n        content: SYSTEM_PROMPT,\n      },\n      {\n        role: \"user\",\n        content: [\n          {\n            type: \"image_url\",\n            image_url: {\n              url: image,\n              detail: \"high\",\n            },\n          },\n          {\n            type: \"text\",\n            text: `Above is the reference wireframe. Please make a new website based on these and return just the HTML file. Also, please make it for the ${theme} theme. What follows are the wireframe's text annotations (if any)...`,\n          },\n          {\n            type: \"text\",\n            text,\n          },\n        ],\n      },\n    ],\n  };\n\n  let result:\n    | ({ ok: true } & OpenAIOutput.ChatCompletion)\n    | ({ ok: false } & OpenAIOutput.APIError);\n\n  const resp = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${apiKey}`,\n    },\n    body: JSON.stringify(body),\n  });\n\n  if (resp.ok) {\n    const json: OpenAIOutput.ChatCompletion = await resp.json();\n    result = { ...json, ok: true };\n  } else {\n    const json: OpenAIOutput.APIError = await resp.json();\n    result = { ...json, ok: false };\n  }\n\n  return result;\n}\n", "import \"./ToolIcon.scss\";\n\nimport clsx from \"clsx\";\nimport { ToolButtonSize } from \"./ToolButton\";\n\nconst DEFAULT_SIZE: ToolButtonSize = \"small\";\n\nexport const ElementCanvasButton = (props: {\n  title?: string;\n  icon: JSX.Element;\n  name?: string;\n  checked: boolean;\n  onChange?(): void;\n  isMobile?: boolean;\n}) => {\n  return (\n    <label\n      className={clsx(\n        \"ToolIcon ToolIcon__MagicButton\",\n        `ToolIcon_size_${DEFAULT_SIZE}`,\n        {\n          \"is-mobile\": props.isMobile,\n        },\n      )}\n      title={`${props.title}`}\n    >\n      <input\n        className=\"ToolIcon_type_checkbox\"\n        type=\"checkbox\"\n        name={props.name}\n        onChange={props.onChange}\n        checked={props.checked}\n        aria-label={props.title}\n      />\n      <div className=\"ToolIcon__icon\">{props.icon}</div>\n    </label>\n  );\n};\n", ".excalidraw .follow-mode {\n  position: absolute;\n  box-sizing: border-box;\n  pointer-events: none;\n  border: 2px solid var(--color-primary-hover);\n  z-index: 9999;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n}\n.excalidraw .follow-mode__badge {\n  background-color: var(--color-primary-hover);\n  color: var(--color-primary-light);\n  padding: 0.25rem 0.5rem;\n  margin-bottom: 0.5rem;\n  border-radius: 0.5rem;\n  pointer-events: all;\n  font-size: 0.75rem;\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n.excalidraw .follow-mode__badge__label {\n  display: flex;\n  white-space: pre-wrap;\n  line-height: 1;\n}\n.excalidraw .follow-mode__badge__username {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100px;\n}\n.excalidraw .follow-mode__disconnect-btn {\n  all: unset;\n  cursor: pointer;\n  border-radius: 0.25rem;\n}\n.excalidraw .follow-mode__disconnect-btn:hover {\n  background-color: var(--color-primary-darker);\n}\n.excalidraw .follow-mode__disconnect-btn:active {\n  background-color: var(--color-primary-darkest);\n}\n.excalidraw .follow-mode__disconnect-btn svg {\n  display: block;\n  width: 1rem;\n  height: 1rem;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvRm9sbG93TW9kZSIsInNvdXJjZXMiOlsiRm9sbG93TW9kZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhjYWxpZHJhdyB7XG4gIC5mb2xsb3ctbW9kZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gICAgei1pbmRleDogOTk5OTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICZfX2JhZGdlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktaG92ZXIpO1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktbGlnaHQpO1xuICAgICAgcGFkZGluZzogMC4yNXJlbSAwLjVyZW07XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XG4gICAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogMC41cmVtO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgICAgJl9fbGFiZWwge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAmX191c2VybmFtZSB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgbWF4LXdpZHRoOiAxMDBweDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmX19kaXNjb25uZWN0LWJ0biB7XG4gICAgICBhbGw6IHVuc2V0O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcblxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VyKTtcbiAgICAgIH1cblxuICAgICAgJjphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgd2lkdGg6IDFyZW07XG4gICAgICAgIGhlaWdodDogMXJlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */", "import { UserToFollow } from \"../../types\";\nimport { CloseIcon } from \"../icons\";\nimport \"./FollowMode.scss\";\n\ninterface FollowModeProps {\n  width: number;\n  height: number;\n  userToFollow: UserToFollow;\n  onDisconnect: () => void;\n}\n\nconst FollowMode = ({\n  height,\n  width,\n  userToFollow,\n  onDisconnect,\n}: FollowModeProps) => {\n  return (\n    <div className=\"follow-mode\" style={{ width, height }}>\n      <div className=\"follow-mode__badge\">\n        <div className=\"follow-mode__badge__label\">\n          Following{\" \"}\n          <span\n            className=\"follow-mode__badge__username\"\n            title={userToFollow.username}\n          >\n            {userToFollow.username}\n          </span>\n        </div>\n        <button onClick={onDisconnect} className=\"follow-mode__disconnect-btn\">\n          {CloseIcon}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default FollowMode;\n", "export type AnimationCallback = (timestamp: number) => void | boolean;\n\nexport type AnimationTarget = {\n  callback: AnimationCallback;\n  stopped: boolean;\n};\n\nexport class AnimationFrameHandler {\n  private targets = new WeakMap<object, AnimationTarget>();\n  private rafIds = new WeakMap<object, number>();\n\n  register(key: object, callback: AnimationCallback) {\n    this.targets.set(key, { callback, stopped: true });\n  }\n\n  start(key: object) {\n    const target = this.targets.get(key);\n\n    if (!target) {\n      return;\n    }\n\n    if (this.rafIds.has(key)) {\n      return;\n    }\n\n    this.targets.set(key, { ...target, stopped: false });\n    this.scheduleFrame(key);\n  }\n\n  stop(key: object) {\n    const target = this.targets.get(key);\n    if (target && !target.stopped) {\n      this.targets.set(key, { ...target, stopped: true });\n    }\n\n    this.cancelFrame(key);\n  }\n\n  private constructFrame(key: object): FrameRequestCallback {\n    return (timestamp: number) => {\n      const target = this.targets.get(key);\n\n      if (!target) {\n        return;\n      }\n\n      const shouldAbort = this.onFrame(target, timestamp);\n\n      if (!target.stopped && !shouldAbort) {\n        this.scheduleFrame(key);\n      } else {\n        this.cancelFrame(key);\n      }\n    };\n  }\n\n  private scheduleFrame(key: object) {\n    const rafId = requestAnimationFrame(this.constructFrame(key));\n\n    this.rafIds.set(key, rafId);\n  }\n\n  private cancelFrame(key: object) {\n    if (this.rafIds.has(key)) {\n      const rafId = this.rafIds.get(key)!;\n\n      cancelAnimationFrame(rafId);\n    }\n\n    this.rafIds.delete(key);\n  }\n\n  private onFrame(target: AnimationTarget, timestamp: number): boolean {\n    const shouldAbort = target.callback(timestamp);\n\n    return shouldAbort ?? false;\n  }\n}\n", "import { LaserPointer, LaserPointerOptions } from \"@excalidraw/laser-pointer\";\nimport { AnimationFrameHandler } from \"./animation-frame-handler\";\nimport { AppState } from \"./types\";\nimport { getSvgPathFromStroke, sceneCoordsToViewportCoords } from \"./utils\";\nimport type App from \"./components/App\";\nimport { SVG_NS } from \"./constants\";\n\nexport interface Trail {\n  start(container: SVGSVGElement): void;\n  stop(): void;\n\n  startPath(x: number, y: number): void;\n  addPointToPath(x: number, y: number): void;\n  endPath(): void;\n}\n\nexport interface AnimatedTrailOptions {\n  fill: (trail: AnimatedTrail) => string;\n}\n\nexport class AnimatedTrail implements Trail {\n  private currentTrail?: LaserPointer;\n  private pastTrails: LaserPointer[] = [];\n\n  private container?: SVGSVGElement;\n  private trailElement: SVGPathElement;\n\n  constructor(\n    private animationFrameHandler: AnimationFrameHandler,\n    private app: App,\n    private options: Partial<LaserPointerOptions> &\n      Partial<AnimatedTrailOptions>,\n  ) {\n    this.animationFrameHandler.register(this, this.onFrame.bind(this));\n\n    this.trailElement = document.createElementNS(SVG_NS, \"path\");\n  }\n\n  get hasCurrentTrail() {\n    return !!this.currentTrail;\n  }\n\n  hasLastPoint(x: number, y: number) {\n    if (this.currentTrail) {\n      const len = this.currentTrail.originalPoints.length;\n      return (\n        this.currentTrail.originalPoints[len - 1][0] === x &&\n        this.currentTrail.originalPoints[len - 1][1] === y\n      );\n    }\n\n    return false;\n  }\n\n  start(container?: SVGSVGElement) {\n    if (container) {\n      this.container = container;\n    }\n\n    if (this.trailElement.parentNode !== this.container && this.container) {\n      this.container.appendChild(this.trailElement);\n    }\n\n    this.animationFrameHandler.start(this);\n  }\n\n  stop() {\n    this.animationFrameHandler.stop(this);\n\n    if (this.trailElement.parentNode === this.container) {\n      this.container?.removeChild(this.trailElement);\n    }\n  }\n\n  startPath(x: number, y: number) {\n    this.currentTrail = new LaserPointer(this.options);\n\n    this.currentTrail.addPoint([x, y, performance.now()]);\n\n    this.update();\n  }\n\n  addPointToPath(x: number, y: number) {\n    if (this.currentTrail) {\n      this.currentTrail.addPoint([x, y, performance.now()]);\n      this.update();\n    }\n  }\n\n  endPath() {\n    if (this.currentTrail) {\n      this.currentTrail.close();\n      this.currentTrail.options.keepHead = false;\n      this.pastTrails.push(this.currentTrail);\n      this.currentTrail = undefined;\n      this.update();\n    }\n  }\n\n  private update() {\n    this.start();\n  }\n\n  private onFrame() {\n    const paths: string[] = [];\n\n    for (const trail of this.pastTrails) {\n      paths.push(this.drawTrail(trail, this.app.state));\n    }\n\n    if (this.currentTrail) {\n      const currentPath = this.drawTrail(this.currentTrail, this.app.state);\n\n      paths.push(currentPath);\n    }\n\n    this.pastTrails = this.pastTrails.filter((trail) => {\n      return trail.getStrokeOutline().length !== 0;\n    });\n\n    if (paths.length === 0) {\n      this.stop();\n    }\n\n    const svgPaths = paths.join(\" \").trim();\n\n    this.trailElement.setAttribute(\"d\", svgPaths);\n    this.trailElement.setAttribute(\n      \"fill\",\n      (this.options.fill ?? (() => \"black\"))(this),\n    );\n  }\n\n  private drawTrail(trail: LaserPointer, state: AppState): string {\n    const stroke = trail\n      .getStrokeOutline(trail.options.size / state.zoom.value)\n      .map(([x, y]) => {\n        const result = sceneCoordsToViewportCoords(\n          { sceneX: x, sceneY: y },\n          state,\n        );\n\n        return [result.x, result.y];\n      });\n\n    return getSvgPathFromStroke(stroke, true);\n  }\n}\n", "import { LaserPointerOptions } from \"@excalidraw/laser-pointer\";\nimport { AnimatedTrail, Trail } from \"./animated-trail\";\nimport { AnimationFrameHandler } from \"./animation-frame-handler\";\nimport type App from \"./components/App\";\nimport { SocketId } from \"./types\";\nimport { easeOut } from \"./utils\";\nimport { getClientColor } from \"./clients\";\n\nexport class LaserTrails implements Trail {\n  public localTrail: AnimatedTrail;\n  private collabTrails = new Map<SocketId, AnimatedTrail>();\n\n  private container?: SVGSVGElement;\n\n  constructor(\n    private animationFrameHandler: AnimationFrameHandler,\n    private app: App,\n  ) {\n    this.animationFrameHandler.register(this, this.onFrame.bind(this));\n\n    this.localTrail = new AnimatedTrail(animationFrameHandler, app, {\n      ...this.getTrailOptions(),\n      fill: () => \"red\",\n    });\n  }\n\n  private getTrailOptions() {\n    return {\n      simplify: 0,\n      streamline: 0.4,\n      sizeMapping: (c) => {\n        const DECAY_TIME = 1000;\n        const DECAY_LENGTH = 50;\n        const t = Math.max(\n          0,\n          1 - (performance.now() - c.pressure) / DECAY_TIME,\n        );\n        const l =\n          (DECAY_LENGTH -\n            Math.min(DECAY_LENGTH, c.totalLength - c.currentIndex)) /\n          DECAY_LENGTH;\n\n        return Math.min(easeOut(l), easeOut(t));\n      },\n    } as Partial<LaserPointerOptions>;\n  }\n\n  startPath(x: number, y: number): void {\n    this.localTrail.startPath(x, y);\n  }\n\n  addPointToPath(x: number, y: number): void {\n    this.localTrail.addPointToPath(x, y);\n  }\n\n  endPath(): void {\n    this.localTrail.endPath();\n  }\n\n  start(container: SVGSVGElement) {\n    this.container = container;\n\n    this.animationFrameHandler.start(this);\n    this.localTrail.start(container);\n  }\n\n  stop() {\n    this.animationFrameHandler.stop(this);\n    this.localTrail.stop();\n  }\n\n  onFrame() {\n    this.updateCollabTrails();\n  }\n\n  private updateCollabTrails() {\n    if (!this.container || this.app.state.collaborators.size === 0) {\n      return;\n    }\n\n    for (const [key, collabolator] of this.app.state.collaborators.entries()) {\n      let trail!: AnimatedTrail;\n\n      if (!this.collabTrails.has(key)) {\n        trail = new AnimatedTrail(this.animationFrameHandler, this.app, {\n          ...this.getTrailOptions(),\n          fill: () => getClientColor(key),\n        });\n        trail.start(this.container);\n\n        this.collabTrails.set(key, trail);\n      } else {\n        trail = this.collabTrails.get(key)!;\n      }\n\n      if (collabolator.pointer && collabolator.pointer.tool === \"laser\") {\n        if (collabolator.button === \"down\" && !trail.hasCurrentTrail) {\n          trail.startPath(collabolator.pointer.x, collabolator.pointer.y);\n        }\n\n        if (\n          collabolator.button === \"down\" &&\n          trail.hasCurrentTrail &&\n          !trail.hasLastPoint(collabolator.pointer.x, collabolator.pointer.y)\n        ) {\n          trail.addPointToPath(collabolator.pointer.x, collabolator.pointer.y);\n        }\n\n        if (collabolator.button === \"up\" && trail.hasCurrentTrail) {\n          trail.addPointToPath(collabolator.pointer.x, collabolator.pointer.y);\n          trail.endPath();\n        }\n      }\n    }\n\n    for (const key of this.collabTrails.keys()) {\n      if (!this.app.state.collaborators.has(key)) {\n        const trail = this.collabTrails.get(key)!;\n        trail.stop();\n        this.collabTrails.delete(key);\n      }\n    }\n  }\n}\n", "import { CODES, KEYS } from \"../keys\";\nimport {\n  isWritableElement,\n  getFontString,\n  getFontFamilyString,\n  isTestEnv,\n} from \"../utils\";\nimport Scene from \"../scene/Scene\";\nimport {\n  isArrowElement,\n  isBoundToContainer,\n  isTextElement,\n} from \"./typeChecks\";\nimport { CLASSES, isSafari } from \"../constants\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  ExcalidrawTextElementWithContainer,\n  ExcalidrawTextElement,\n} from \"./types\";\nimport { AppState } from \"../types\";\nimport { bumpVersion, mutateElement } from \"./mutateElement\";\nimport {\n  getBoundTextElementId,\n  getContainerElement,\n  getTextElementAngle,\n  getTextWidth,\n  normalizeText,\n  redrawTextBoundingBox,\n  wrapText,\n  getBoundTextMaxHeight,\n  getBoundTextMaxWidth,\n  computeContainerDimensionForBoundText,\n  detectLineHeight,\n  computeBoundTextPosition,\n  getBoundTextElement,\n} from \"./textElement\";\nimport {\n  actionDecreaseFontSize,\n  actionIncreaseFontSize,\n} from \"../actions/actionProperties\";\nimport { actionZoomIn, actionZoomOut } from \"../actions/actionCanvas\";\nimport App from \"../components/App\";\nimport { LinearElementEditor } from \"./linearElementEditor\";\nimport { parseClipboard } from \"../clipboard\";\nimport {\n  originalContainerCache,\n  updateOriginalContainerCache,\n} from \"./containerCache\";\n\nconst getTransform = (\n  width: number,\n  height: number,\n  angle: number,\n  appState: AppState,\n  maxWidth: number,\n  maxHeight: number,\n) => {\n  const { zoom } = appState;\n  const degree = (180 * angle) / Math.PI;\n  let translateX = (width * (zoom.value - 1)) / 2;\n  let translateY = (height * (zoom.value - 1)) / 2;\n  if (width > maxWidth && zoom.value !== 1) {\n    translateX = (maxWidth * (zoom.value - 1)) / 2;\n  }\n  if (height > maxHeight && zoom.value !== 1) {\n    translateY = (maxHeight * (zoom.value - 1)) / 2;\n  }\n  return `translate(${translateX}px, ${translateY}px) scale(${zoom.value}) rotate(${degree}deg)`;\n};\n\nexport const textWysiwyg = ({\n  id,\n  onChange,\n  onSubmit,\n  getViewportCoords,\n  element,\n  canvas,\n  excalidrawContainer,\n  app,\n}: {\n  id: ExcalidrawElement[\"id\"];\n  onChange?: (text: string) => void;\n  onSubmit: (data: {\n    text: string;\n    viaKeyboard: boolean;\n    originalText: string;\n  }) => void;\n  getViewportCoords: (x: number, y: number) => [number, number];\n  element: ExcalidrawTextElement;\n  canvas: HTMLCanvasElement;\n  excalidrawContainer: HTMLDivElement | null;\n  app: App;\n}) => {\n  const textPropertiesUpdated = (\n    updatedTextElement: ExcalidrawTextElement,\n    editable: HTMLTextAreaElement,\n  ) => {\n    if (!editable.style.fontFamily || !editable.style.fontSize) {\n      return false;\n    }\n    const currentFont = editable.style.fontFamily.replace(/\"/g, \"\");\n    if (\n      getFontFamilyString({ fontFamily: updatedTextElement.fontFamily }) !==\n      currentFont\n    ) {\n      return true;\n    }\n    if (`${updatedTextElement.fontSize}px` !== editable.style.fontSize) {\n      return true;\n    }\n    return false;\n  };\n\n  const updateWysiwygStyle = () => {\n    const appState = app.state;\n    const updatedTextElement =\n      Scene.getScene(element)?.getElement<ExcalidrawTextElement>(id);\n\n    if (!updatedTextElement) {\n      return;\n    }\n    const { textAlign, verticalAlign } = updatedTextElement;\n    const elementsMap = app.scene.getNonDeletedElementsMap();\n    if (updatedTextElement && isTextElement(updatedTextElement)) {\n      let coordX = updatedTextElement.x;\n      let coordY = updatedTextElement.y;\n      const container = getContainerElement(\n        updatedTextElement,\n        app.scene.getNonDeletedElementsMap(),\n      );\n      let maxWidth = updatedTextElement.width;\n\n      let maxHeight = updatedTextElement.height;\n      let textElementWidth = updatedTextElement.width;\n      // Set to element height by default since that's\n      // what is going to be used for unbounded text\n      const textElementHeight = updatedTextElement.height;\n\n      if (container && updatedTextElement.containerId) {\n        if (isArrowElement(container)) {\n          const boundTextCoords =\n            LinearElementEditor.getBoundTextElementPosition(\n              container,\n              updatedTextElement as ExcalidrawTextElementWithContainer,\n              elementsMap,\n            );\n          coordX = boundTextCoords.x;\n          coordY = boundTextCoords.y;\n        }\n        const propertiesUpdated = textPropertiesUpdated(\n          updatedTextElement,\n          editable,\n        );\n\n        let originalContainerData;\n        if (propertiesUpdated) {\n          originalContainerData = updateOriginalContainerCache(\n            container.id,\n            container.height,\n          );\n        } else {\n          originalContainerData = originalContainerCache[container.id];\n          if (!originalContainerData) {\n            originalContainerData = updateOriginalContainerCache(\n              container.id,\n              container.height,\n            );\n          }\n        }\n\n        maxWidth = getBoundTextMaxWidth(container, updatedTextElement);\n\n        maxHeight = getBoundTextMaxHeight(\n          container,\n          updatedTextElement as ExcalidrawTextElementWithContainer,\n        );\n\n        // autogrow container height if text exceeds\n        if (!isArrowElement(container) && textElementHeight > maxHeight) {\n          const targetContainerHeight = computeContainerDimensionForBoundText(\n            textElementHeight,\n            container.type,\n          );\n\n          mutateElement(container, { height: targetContainerHeight });\n          return;\n        } else if (\n          // autoshrink container height until original container height\n          // is reached when text is removed\n          !isArrowElement(container) &&\n          container.height > originalContainerData.height &&\n          textElementHeight < maxHeight\n        ) {\n          const targetContainerHeight = computeContainerDimensionForBoundText(\n            textElementHeight,\n            container.type,\n          );\n          mutateElement(container, { height: targetContainerHeight });\n        } else {\n          const { y } = computeBoundTextPosition(\n            container,\n            updatedTextElement as ExcalidrawTextElementWithContainer,\n            elementsMap,\n          );\n          coordY = y;\n        }\n      }\n      const [viewportX, viewportY] = getViewportCoords(coordX, coordY);\n      const initialSelectionStart = editable.selectionStart;\n      const initialSelectionEnd = editable.selectionEnd;\n      const initialLength = editable.value.length;\n\n      // restore cursor position after value updated so it doesn't\n      // go to the end of text when container auto expanded\n      if (\n        initialSelectionStart === initialSelectionEnd &&\n        initialSelectionEnd !== initialLength\n      ) {\n        // get diff between length and selection end and shift\n        // the cursor by \"diff\" times to position correctly\n        const diff = initialLength - initialSelectionEnd;\n        editable.selectionStart = editable.value.length - diff;\n        editable.selectionEnd = editable.value.length - diff;\n      }\n\n      if (!container) {\n        maxWidth = (appState.width - 8 - viewportX) / appState.zoom.value;\n        textElementWidth = Math.min(textElementWidth, maxWidth);\n      } else {\n        textElementWidth += 0.5;\n      }\n\n      let lineHeight = updatedTextElement.lineHeight;\n\n      // In Safari the font size gets rounded off when rendering hence calculating the line height by rounding off font size\n      if (isSafari) {\n        lineHeight = detectLineHeight({\n          ...updatedTextElement,\n          fontSize: Math.round(updatedTextElement.fontSize),\n        });\n      }\n\n      // Make sure text editor height doesn't go beyond viewport\n      const editorMaxHeight =\n        (appState.height - viewportY) / appState.zoom.value;\n      Object.assign(editable.style, {\n        font: getFontString(updatedTextElement),\n        // must be defined *after* font \u00AF\\_(\u30C4)_/\u00AF\n        lineHeight,\n        width: `${textElementWidth}px`,\n        height: `${textElementHeight}px`,\n        left: `${viewportX}px`,\n        top: `${viewportY}px`,\n        transform: getTransform(\n          textElementWidth,\n          textElementHeight,\n          getTextElementAngle(updatedTextElement, container),\n          appState,\n          maxWidth,\n          editorMaxHeight,\n        ),\n        textAlign,\n        verticalAlign,\n        color: updatedTextElement.strokeColor,\n        opacity: updatedTextElement.opacity / 100,\n        filter: \"var(--theme-filter)\",\n        maxHeight: `${editorMaxHeight}px`,\n      });\n      editable.scrollTop = 0;\n      // For some reason updating font attribute doesn't set font family\n      // hence updating font family explicitly for test environment\n      if (isTestEnv()) {\n        editable.style.fontFamily = getFontFamilyString(updatedTextElement);\n      }\n      mutateElement(updatedTextElement, { x: coordX, y: coordY });\n    }\n  };\n\n  const editable = document.createElement(\"textarea\");\n\n  editable.dir = \"auto\";\n  editable.tabIndex = 0;\n  editable.dataset.type = \"wysiwyg\";\n  // prevent line wrapping on Safari\n  editable.wrap = \"off\";\n  editable.classList.add(\"excalidraw-wysiwyg\");\n\n  let whiteSpace = \"pre\";\n  let wordBreak = \"normal\";\n\n  if (isBoundToContainer(element)) {\n    whiteSpace = \"pre-wrap\";\n    wordBreak = \"break-word\";\n  }\n  Object.assign(editable.style, {\n    position: \"absolute\",\n    display: \"inline-block\",\n    minHeight: \"1em\",\n    backfaceVisibility: \"hidden\",\n    margin: 0,\n    padding: 0,\n    border: 0,\n    outline: 0,\n    resize: \"none\",\n    background: \"transparent\",\n    overflow: \"hidden\",\n    // must be specified because in dark mode canvas creates a stacking context\n    zIndex: \"var(--zIndex-wysiwyg)\",\n    wordBreak,\n    // prevent line wrapping (`whitespace: nowrap` doesn't work on FF)\n    whiteSpace,\n    overflowWrap: \"break-word\",\n    boxSizing: \"content-box\",\n  });\n  editable.value = element.originalText;\n  updateWysiwygStyle();\n\n  if (onChange) {\n    editable.onpaste = async (event) => {\n      const clipboardData = await parseClipboard(event, true);\n      if (!clipboardData.text) {\n        return;\n      }\n      const data = normalizeText(clipboardData.text);\n      if (!data) {\n        return;\n      }\n      const container = getContainerElement(\n        element,\n        app.scene.getNonDeletedElementsMap(),\n      );\n\n      const font = getFontString({\n        fontSize: app.state.currentItemFontSize,\n        fontFamily: app.state.currentItemFontFamily,\n      });\n      if (container) {\n        const boundTextElement = getBoundTextElement(\n          container,\n          app.scene.getNonDeletedElementsMap(),\n        );\n        const wrappedText = wrapText(\n          `${editable.value}${data}`,\n          font,\n          getBoundTextMaxWidth(container, boundTextElement),\n        );\n        const width = getTextWidth(wrappedText, font);\n        editable.style.width = `${width}px`;\n      }\n    };\n\n    editable.oninput = () => {\n      onChange(normalizeText(editable.value));\n    };\n  }\n\n  editable.onkeydown = (event) => {\n    if (!event.shiftKey && actionZoomIn.keyTest(event)) {\n      event.preventDefault();\n      app.actionManager.executeAction(actionZoomIn);\n      updateWysiwygStyle();\n    } else if (!event.shiftKey && actionZoomOut.keyTest(event)) {\n      event.preventDefault();\n      app.actionManager.executeAction(actionZoomOut);\n      updateWysiwygStyle();\n    } else if (actionDecreaseFontSize.keyTest(event)) {\n      app.actionManager.executeAction(actionDecreaseFontSize);\n    } else if (actionIncreaseFontSize.keyTest(event)) {\n      app.actionManager.executeAction(actionIncreaseFontSize);\n    } else if (event.key === KEYS.ESCAPE) {\n      event.preventDefault();\n      submittedViaKeyboard = true;\n      handleSubmit();\n    } else if (event.key === KEYS.ENTER && event[KEYS.CTRL_OR_CMD]) {\n      event.preventDefault();\n      if (event.isComposing || event.keyCode === 229) {\n        return;\n      }\n      submittedViaKeyboard = true;\n      handleSubmit();\n    } else if (\n      event.key === KEYS.TAB ||\n      (event[KEYS.CTRL_OR_CMD] &&\n        (event.code === CODES.BRACKET_LEFT ||\n          event.code === CODES.BRACKET_RIGHT))\n    ) {\n      event.preventDefault();\n      if (event.isComposing) {\n        return;\n      } else if (event.shiftKey || event.code === CODES.BRACKET_LEFT) {\n        outdent();\n      } else {\n        indent();\n      }\n      // We must send an input event to resize the element\n      editable.dispatchEvent(new Event(\"input\"));\n    }\n  };\n\n  const TAB_SIZE = 4;\n  const TAB = \" \".repeat(TAB_SIZE);\n  const RE_LEADING_TAB = new RegExp(`^ {1,${TAB_SIZE}}`);\n  const indent = () => {\n    const { selectionStart, selectionEnd } = editable;\n    const linesStartIndices = getSelectedLinesStartIndices();\n\n    let value = editable.value;\n    linesStartIndices.forEach((startIndex: number) => {\n      const startValue = value.slice(0, startIndex);\n      const endValue = value.slice(startIndex);\n\n      value = `${startValue}${TAB}${endValue}`;\n    });\n\n    editable.value = value;\n\n    editable.selectionStart = selectionStart + TAB_SIZE;\n    editable.selectionEnd = selectionEnd + TAB_SIZE * linesStartIndices.length;\n  };\n\n  const outdent = () => {\n    const { selectionStart, selectionEnd } = editable;\n    const linesStartIndices = getSelectedLinesStartIndices();\n    const removedTabs: number[] = [];\n\n    let value = editable.value;\n    linesStartIndices.forEach((startIndex) => {\n      const tabMatch = value\n        .slice(startIndex, startIndex + TAB_SIZE)\n        .match(RE_LEADING_TAB);\n\n      if (tabMatch) {\n        const startValue = value.slice(0, startIndex);\n        const endValue = value.slice(startIndex + tabMatch[0].length);\n\n        // Delete a tab from the line\n        value = `${startValue}${endValue}`;\n        removedTabs.push(startIndex);\n      }\n    });\n\n    editable.value = value;\n\n    if (removedTabs.length) {\n      if (selectionStart > removedTabs[removedTabs.length - 1]) {\n        editable.selectionStart = Math.max(\n          selectionStart - TAB_SIZE,\n          removedTabs[removedTabs.length - 1],\n        );\n      } else {\n        // If the cursor is before the first tab removed, ex:\n        // Line| #1\n        //     Line #2\n        // Lin|e #3\n        // we should reset the selectionStart to his initial value.\n        editable.selectionStart = selectionStart;\n      }\n      editable.selectionEnd = Math.max(\n        editable.selectionStart,\n        selectionEnd - TAB_SIZE * removedTabs.length,\n      );\n    }\n  };\n\n  /**\n   * @returns indices of start positions of selected lines, in reverse order\n   */\n  const getSelectedLinesStartIndices = () => {\n    let { selectionStart, selectionEnd, value } = editable;\n\n    // chars before selectionStart on the same line\n    const startOffset = value.slice(0, selectionStart).match(/[^\\n]*$/)![0]\n      .length;\n    // put caret at the start of the line\n    selectionStart = selectionStart - startOffset;\n\n    const selected = value.slice(selectionStart, selectionEnd);\n\n    return selected\n      .split(\"\\n\")\n      .reduce(\n        (startIndices, line, idx, lines) =>\n          startIndices.concat(\n            idx\n              ? // curr line index is prev line's start + prev line's length + \\n\n                startIndices[idx - 1] + lines[idx - 1].length + 1\n              : // first selected line\n                selectionStart,\n          ),\n        [] as number[],\n      )\n      .reverse();\n  };\n\n  const stopEvent = (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  // using a state variable instead of passing it to the handleSubmit callback\n  // so that we don't need to create separate a callback for event handlers\n  let submittedViaKeyboard = false;\n  const handleSubmit = () => {\n    // cleanup must be run before onSubmit otherwise when app blurs the wysiwyg\n    // it'd get stuck in an infinite loop of blur\u2192onSubmit after we re-focus the\n    // wysiwyg on update\n    cleanup();\n    const updateElement = Scene.getScene(element)?.getElement(\n      element.id,\n    ) as ExcalidrawTextElement;\n    if (!updateElement) {\n      return;\n    }\n    let text = editable.value;\n    const container = getContainerElement(\n      updateElement,\n      app.scene.getNonDeletedElementsMap(),\n    );\n\n    if (container) {\n      text = updateElement.text;\n      if (editable.value.trim()) {\n        const boundTextElementId = getBoundTextElementId(container);\n        if (!boundTextElementId || boundTextElementId !== element.id) {\n          mutateElement(container, {\n            boundElements: (container.boundElements || []).concat({\n              type: \"text\",\n              id: element.id,\n            }),\n          });\n        } else if (isArrowElement(container)) {\n          // updating an arrow label may change bounds, prevent stale cache:\n          bumpVersion(container);\n        }\n      } else {\n        mutateElement(container, {\n          boundElements: container.boundElements?.filter(\n            (ele) =>\n              !isTextElement(\n                ele as ExcalidrawTextElement | ExcalidrawLinearElement,\n              ),\n          ),\n        });\n      }\n      redrawTextBoundingBox(\n        updateElement,\n        container,\n        app.scene.getNonDeletedElementsMap(),\n      );\n    }\n\n    onSubmit({\n      text,\n      viaKeyboard: submittedViaKeyboard,\n      originalText: editable.value,\n    });\n  };\n\n  const cleanup = () => {\n    if (isDestroyed) {\n      return;\n    }\n    isDestroyed = true;\n    // remove events to ensure they don't late-fire\n    editable.onblur = null;\n    editable.oninput = null;\n    editable.onkeydown = null;\n\n    if (observer) {\n      observer.disconnect();\n    }\n\n    window.removeEventListener(\"resize\", updateWysiwygStyle);\n    window.removeEventListener(\"wheel\", stopEvent, true);\n    window.removeEventListener(\"pointerdown\", onPointerDown);\n    window.removeEventListener(\"pointerup\", bindBlurEvent);\n    window.removeEventListener(\"blur\", handleSubmit);\n    window.removeEventListener(\"beforeunload\", handleSubmit);\n    unbindUpdate();\n\n    editable.remove();\n  };\n\n  const bindBlurEvent = (event?: MouseEvent) => {\n    window.removeEventListener(\"pointerup\", bindBlurEvent);\n    // Deferred so that the pointerdown that initiates the wysiwyg doesn't\n    // trigger the blur on ensuing pointerup.\n    // Also to handle cases such as picking a color which would trigger a blur\n    // in that same tick.\n    const target = event?.target;\n\n    const isTargetPickerTrigger =\n      target instanceof HTMLElement &&\n      target.classList.contains(\"active-color\");\n\n    setTimeout(() => {\n      editable.onblur = handleSubmit;\n\n      if (isTargetPickerTrigger) {\n        const callback = (\n          mutationList: MutationRecord[],\n          observer: MutationObserver,\n        ) => {\n          const radixIsRemoved = mutationList.find(\n            (mutation) =>\n              mutation.removedNodes.length > 0 &&\n              (mutation.removedNodes[0] as HTMLElement).dataset\n                ?.radixPopperContentWrapper !== undefined,\n          );\n\n          if (radixIsRemoved) {\n            // should work without this in theory\n            // and i think it does actually but radix probably somewhere,\n            // somehow sets the focus elsewhere\n            setTimeout(() => {\n              editable.focus();\n            });\n\n            observer.disconnect();\n          }\n        };\n\n        const observer = new MutationObserver(callback);\n\n        observer.observe(document.querySelector(\".excalidraw-container\")!, {\n          childList: true,\n        });\n      }\n\n      // case: clicking on the same property \u2192 no change \u2192 no update \u2192 no focus\n      if (!isTargetPickerTrigger) {\n        editable.focus();\n      }\n    });\n  };\n\n  // prevent blur when changing properties from the menu\n  const onPointerDown = (event: MouseEvent) => {\n    const isTargetPickerTrigger =\n      event.target instanceof HTMLElement &&\n      event.target.classList.contains(\"active-color\");\n\n    if (\n      ((event.target instanceof HTMLElement ||\n        event.target instanceof SVGElement) &&\n        event.target.closest(`.${CLASSES.SHAPE_ACTIONS_MENU}`) &&\n        !isWritableElement(event.target)) ||\n      isTargetPickerTrigger\n    ) {\n      editable.onblur = null;\n      window.addEventListener(\"pointerup\", bindBlurEvent);\n      // handle edge-case where pointerup doesn't fire e.g. due to user\n      // alt-tabbing away\n      window.addEventListener(\"blur\", handleSubmit);\n    }\n  };\n\n  // handle updates of textElement properties of editing element\n  const unbindUpdate = Scene.getScene(element)!.addCallback(() => {\n    updateWysiwygStyle();\n    const isColorPickerActive = !!document.activeElement?.closest(\n      \".color-picker-content\",\n    );\n    if (!isColorPickerActive) {\n      editable.focus();\n    }\n  });\n\n  // ---------------------------------------------------------------------------\n\n  let isDestroyed = false;\n\n  // select on init (focusing is done separately inside the bindBlurEvent()\n  // because we need it to happen *after* the blur event from `pointerdown`)\n  editable.select();\n  bindBlurEvent();\n\n  // reposition wysiwyg in case of canvas is resized. Using ResizeObserver\n  // is preferred so we catch changes from host, where window may not resize.\n  let observer: ResizeObserver | null = null;\n  if (canvas && \"ResizeObserver\" in window) {\n    observer = new window.ResizeObserver(() => {\n      updateWysiwygStyle();\n    });\n    observer.observe(canvas);\n  } else {\n    window.addEventListener(\"resize\", updateWysiwygStyle);\n  }\n\n  window.addEventListener(\"pointerdown\", onPointerDown);\n  window.addEventListener(\"wheel\", stopEvent, {\n    passive: false,\n    capture: true,\n  });\n  window.addEventListener(\"beforeunload\", handleSubmit);\n  excalidrawContainer\n    ?.querySelector(\".excalidraw-textEditorContainer\")!\n    .appendChild(editable);\n};\n", "import React, { useContext } from \"react\";\nimport { flushSync } from \"react-dom\";\n\nimport { RoughCanvas } from \"roughjs/bin/canvas\";\nimport rough from \"roughjs/bin/rough\";\nimport clsx from \"clsx\";\nimport { nanoid } from \"nanoid\";\nimport {\n  actionAddToLibrary,\n  actionBringForward,\n  actionBringToFront,\n  actionCopy,\n  actionCopyAsPng,\n  actionCopyAsSvg,\n  copyText,\n  actionCopyStyles,\n  actionCut,\n  actionDeleteSelected,\n  actionDuplicateSelection,\n  actionFinalize,\n  actionFlipHorizontal,\n  actionFlipVertical,\n  actionGroup,\n  actionPasteStyles,\n  actionSelectAll,\n  actionSendBackward,\n  actionSendToBack,\n  actionToggleGridMode,\n  actionToggleStats,\n  actionToggleZenMode,\n  actionUnbindText,\n  actionBindText,\n  actionUngroup,\n  actionLink,\n  actionToggleElementLock,\n  actionToggleLinearEditor,\n  actionToggleObjectsSnapMode,\n} from \"../actions\";\nimport { createRedoAction, createUndoAction } from \"../actions/actionHistory\";\nimport { ActionManager } from \"../actions/manager\";\nimport { actions } from \"../actions/register\";\nimport { Action, ActionResult } from \"../actions/types\";\nimport { trackEvent } from \"../analytics\";\nimport {\n  getDefaultAppState,\n  isEraserActive,\n  isHandToolActive,\n} from \"../appState\";\nimport {\n  PastedMixedContent,\n  copyTextToSystemClipboard,\n  parseClipboard,\n} from \"../clipboard\";\nimport {\n  APP_NAME,\n  CURSOR_TYPE,\n  DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT,\n  DEFAULT_VERTICAL_ALIGN,\n  DRAGGING_THRESHOLD,\n  ELEMENT_SHIFT_TRANSLATE_AMOUNT,\n  ELEMENT_TRANSLATE_AMOUNT,\n  ENV,\n  EVENT,\n  FRAME_STYLE,\n  EXPORT_IMAGE_TYPES,\n  GRID_SIZE,\n  IMAGE_MIME_TYPES,\n  IMAGE_RENDER_TIMEOUT,\n  isBrave,\n  LINE_CONFIRM_THRESHOLD,\n  MAX_ALLOWED_FILE_BYTES,\n  MIME_TYPES,\n  MQ_MAX_HEIGHT_LANDSCAPE,\n  MQ_MAX_WIDTH_LANDSCAPE,\n  MQ_MAX_WIDTH_PORTRAIT,\n  MQ_RIGHT_SIDEBAR_MIN_WIDTH,\n  POINTER_BUTTON,\n  ROUNDNESS,\n  SCROLL_TIMEOUT,\n  TAP_TWICE_TIMEOUT,\n  TEXT_TO_CENTER_SNAP_THRESHOLD,\n  THEME,\n  THEME_FILTER,\n  TOUCH_CTX_MENU_TIMEOUT,\n  VERTICAL_ALIGN,\n  YOUTUBE_STATES,\n  ZOOM_STEP,\n  POINTER_EVENTS,\n  TOOL_TYPE,\n  EDITOR_LS_KEYS,\n  isIOS,\n} from \"../constants\";\nimport { ExportedElements, exportCanvas, loadFromBlob } from \"../data\";\nimport Library, { distributeLibraryItemsOnSquareGrid } from \"../data/library\";\nimport { restore, restoreElements } from \"../data/restore\";\nimport {\n  dragNewElement,\n  dragSelectedElements,\n  duplicateElement,\n  getCommonBounds,\n  getCursorForResizingElement,\n  getDragOffsetXY,\n  getElementWithTransformHandleType,\n  getNormalizedDimensions,\n  getResizeArrowDirection,\n  getResizeOffsetXY,\n  getLockedLinearCursorAlignSize,\n  getTransformHandleTypeFromCoords,\n  hitTest,\n  isHittingElementBoundingBoxWithoutHittingElement,\n  isInvisiblySmallElement,\n  isNonDeletedElement,\n  isTextElement,\n  newElement,\n  newLinearElement,\n  newTextElement,\n  newImageElement,\n  transformElements,\n  updateTextElement,\n  redrawTextBoundingBox,\n} from \"../element\";\nimport {\n  bindOrUnbindLinearElement,\n  bindOrUnbindSelectedElements,\n  fixBindingsAfterDeletion,\n  fixBindingsAfterDuplication,\n  getEligibleElementsForBinding,\n  getHoveredElementForBinding,\n  isBindingEnabled,\n  isLinearElementSimpleAndAlreadyBound,\n  maybeBindLinearElement,\n  shouldEnableBindingForPointerEvent,\n  unbindLinearElements,\n  updateBoundElements,\n} from \"../element/binding\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { mutateElement, newElementWith } from \"../element/mutateElement\";\nimport {\n  deepCopyElement,\n  duplicateElements,\n  newFrameElement,\n  newFreeDrawElement,\n  newEmbeddableElement,\n  newMagicFrameElement,\n  newIframeElement,\n} from \"../element/newElement\";\nimport {\n  hasBoundTextElement,\n  isArrowElement,\n  isBindingElement,\n  isBindingElementType,\n  isBoundToContainer,\n  isFrameLikeElement,\n  isImageElement,\n  isEmbeddableElement,\n  isInitializedImageElement,\n  isLinearElement,\n  isLinearElementType,\n  isUsingAdaptiveRadius,\n  isFrameElement,\n  isIframeElement,\n  isIframeLikeElement,\n  isMagicFrameElement,\n} from \"../element/typeChecks\";\nimport {\n  ExcalidrawBindableElement,\n  ExcalidrawElement,\n  ExcalidrawFreeDrawElement,\n  ExcalidrawGenericElement,\n  ExcalidrawLinearElement,\n  ExcalidrawTextElement,\n  NonDeleted,\n  InitializedExcalidrawImageElement,\n  ExcalidrawImageElement,\n  FileId,\n  NonDeletedExcalidrawElement,\n  ExcalidrawTextContainer,\n  ExcalidrawFrameLikeElement,\n  ExcalidrawMagicFrameElement,\n  ExcalidrawIframeLikeElement,\n  IframeData,\n  ExcalidrawIframeElement,\n  ExcalidrawEmbeddableElement,\n} from \"../element/types\";\nimport { getCenter, getDistance } from \"../gesture\";\nimport {\n  editGroupForSelectedElement,\n  getElementsInGroup,\n  getSelectedGroupIdForElement,\n  getSelectedGroupIds,\n  isElementInGroup,\n  isSelectedViaGroup,\n  selectGroupsForSelectedElements,\n} from \"../groups\";\nimport History from \"../history\";\nimport { defaultLang, getLanguage, languages, setLanguage, t } from \"../i18n\";\nimport {\n  CODES,\n  shouldResizeFromCenter,\n  shouldMaintainAspectRatio,\n  shouldRotateWithDiscreteAngle,\n  isArrowKey,\n  KEYS,\n} from \"../keys\";\nimport { isElementInViewport } from \"../element/sizeHelpers\";\nimport {\n  distance2d,\n  getCornerRadius,\n  getGridPoint,\n  isPathALoop,\n} from \"../math\";\nimport {\n  calculateScrollCenter,\n  getElementsAtPosition,\n  getElementsWithinSelection,\n  getNormalizedZoom,\n  getSelectedElements,\n  hasBackground,\n  isSomeElementSelected,\n} from \"../scene\";\nimport Scene from \"../scene/Scene\";\nimport { RenderInteractiveSceneCallback, ScrollBars } from \"../scene/types\";\nimport { getStateForZoom } from \"../scene/zoom\";\nimport { findShapeByKey } from \"../shapes\";\nimport {\n  AppClassProperties,\n  AppProps,\n  AppState,\n  BinaryFileData,\n  DataURL,\n  ExcalidrawImperativeAPI,\n  BinaryFiles,\n  Gesture,\n  GestureEvent,\n  LibraryItems,\n  PointerDownState,\n  SceneData,\n  Device,\n  FrameNameBoundsCache,\n  SidebarName,\n  SidebarTabName,\n  KeyboardModifiersObject,\n  CollaboratorPointer,\n  ToolType,\n  OnUserFollowedPayload,\n  UnsubscribeCallback,\n  EmbedsValidationStatus,\n  ElementsPendingErasure,\n} from \"../types\";\nimport {\n  debounce,\n  distance,\n  getFontString,\n  getNearestScrollableContainer,\n  isInputLike,\n  isToolIcon,\n  isWritableElement,\n  sceneCoordsToViewportCoords,\n  tupleToCoors,\n  viewportCoordsToSceneCoords,\n  wrapEvent,\n  updateObject,\n  updateActiveTool,\n  getShortcutKey,\n  isTransparent,\n  easeToValuesRAF,\n  muteFSAbortError,\n  isTestEnv,\n  easeOut,\n  updateStable,\n  addEventListener,\n  normalizeEOL,\n  getDateTime,\n} from \"../utils\";\nimport {\n  createSrcDoc,\n  embeddableURLValidator,\n  maybeParseEmbedSrc,\n  getEmbedLink,\n} from \"../element/embeddable\";\nimport {\n  ContextMenu,\n  ContextMenuItems,\n  CONTEXT_MENU_SEPARATOR,\n} from \"./ContextMenu\";\nimport LayerUI from \"./LayerUI\";\nimport { Toast } from \"./Toast\";\nimport { actionToggleViewMode } from \"../actions/actionToggleViewMode\";\nimport {\n  dataURLToFile,\n  generateIdFromFile,\n  getDataURL,\n  getFileFromEvent,\n  ImageURLToFile,\n  isImageFileHandle,\n  isSupportedImageFile,\n  loadSceneOrLibraryFromBlob,\n  normalizeFile,\n  parseLibraryJSON,\n  resizeImageFile,\n  SVGStringToFile,\n} from \"../data/blob\";\nimport {\n  getInitializedImageElements,\n  loadHTMLImageElement,\n  normalizeSVG,\n  updateImageCache as _updateImageCache,\n} from \"../element/image\";\nimport throttle from \"lodash.throttle\";\nimport { fileOpen, FileSystemHandle } from \"../data/filesystem\";\nimport {\n  bindTextToShapeAfterDuplication,\n  getApproxMinLineHeight,\n  getApproxMinLineWidth,\n  getBoundTextElement,\n  getContainerCenter,\n  getContainerElement,\n  getDefaultLineHeight,\n  getLineHeightInPx,\n  getTextBindableContainerAtPosition,\n  isMeasureTextSupported,\n  isValidTextContainer,\n} from \"../element/textElement\";\nimport { isHittingElementNotConsideringBoundingBox } from \"../element/collision\";\nimport {\n  showHyperlinkTooltip,\n  hideHyperlinkToolip,\n  Hyperlink,\n  isPointHittingLink,\n  isPointHittingLinkIcon,\n} from \"../element/Hyperlink\";\nimport { isLocalLink, normalizeLink, toValidURL } from \"../data/url\";\nimport { shouldShowBoundingBox } from \"../element/transformHandles\";\nimport { actionUnlockAllElements } from \"../actions/actionElementLock\";\nimport { Fonts } from \"../scene/Fonts\";\nimport {\n  getFrameChildren,\n  isCursorInFrame,\n  bindElementsToFramesAfterDuplication,\n  addElementsToFrame,\n  replaceAllElementsInFrame,\n  removeElementsFromFrame,\n  getElementsInResizingFrame,\n  getElementsInNewFrame,\n  getContainingFrame,\n  elementOverlapsWithFrame,\n  updateFrameMembershipOfSelectedElements,\n  isElementInFrame,\n  getFrameLikeTitle,\n  getElementsOverlappingFrame,\n  filterElementsEligibleAsFrameChildren,\n} from \"../frame\";\nimport {\n  excludeElementsInFramesFromSelection,\n  makeNextSelectedElementIds,\n} from \"../scene/selection\";\nimport { actionPaste } from \"../actions/actionClipboard\";\nimport {\n  actionRemoveAllElementsFromFrame,\n  actionSelectAllElementsInFrame,\n} from \"../actions/actionFrame\";\nimport { actionToggleHandTool, zoomToFit } from \"../actions/actionCanvas\";\nimport { jotaiStore } from \"../jotai\";\nimport { activeConfirmDialogAtom } from \"./ActiveConfirmDialog\";\nimport { ImageSceneDataError } from \"../errors\";\nimport {\n  getSnapLinesAtPointer,\n  snapDraggedElements,\n  isActiveToolNonLinearSnappable,\n  snapNewElement,\n  snapResizingElements,\n  isSnappingEnabled,\n  getVisibleGaps,\n  getReferenceSnapPoints,\n  SnapCache,\n} from \"../snapping\";\nimport { actionWrapTextInContainer } from \"../actions/actionBoundText\";\nimport BraveMeasureTextError from \"./BraveMeasureTextError\";\nimport { activeEyeDropperAtom } from \"./EyeDropper\";\nimport {\n  ExcalidrawElementSkeleton,\n  convertToExcalidrawElements,\n} from \"../data/transform\";\nimport { ValueOf } from \"../utility-types\";\nimport { isSidebarDockedAtom } from \"./Sidebar/Sidebar\";\nimport { StaticCanvas, InteractiveCanvas } from \"./canvases\";\nimport { Renderer } from \"../scene/Renderer\";\nimport { ShapeCache } from \"../scene/ShapeCache\";\nimport { SVGLayer } from \"./SVGLayer\";\nimport {\n  setEraserCursor,\n  setCursor,\n  resetCursor,\n  setCursorForShape,\n} from \"../cursor\";\nimport { Emitter } from \"../emitter\";\nimport { ElementCanvasButtons } from \"../element/ElementCanvasButtons\";\nimport { MagicCacheData, diagramToHTML } from \"../data/magic\";\nimport { exportToBlob } from \"../../utils/export\";\nimport { COLOR_PALETTE } from \"../colors\";\nimport { ElementCanvasButton } from \"./MagicButton\";\nimport { MagicIcon, copyIcon, fullscreenIcon } from \"./icons\";\nimport { EditorLocalStorage } from \"../data/EditorLocalStorage\";\nimport FollowMode from \"./FollowMode/FollowMode\";\n\nimport { AnimationFrameHandler } from \"../animation-frame-handler\";\nimport { AnimatedTrail } from \"../animated-trail\";\nimport { LaserTrails } from \"../laser-trails\";\nimport { withBatchedUpdates, withBatchedUpdatesThrottled } from \"../reactUtils\";\nimport { getRenderOpacity } from \"../renderer/renderElement\";\nimport { textWysiwyg } from \"../element/textWysiwyg\";\nimport { isOverScrollBars } from \"../scene/scrollbars\";\n\nconst AppContext = React.createContext<AppClassProperties>(null!);\nconst AppPropsContext = React.createContext<AppProps>(null!);\n\nconst deviceContextInitialValue = {\n  viewport: {\n    isMobile: false,\n    isLandscape: false,\n  },\n  editor: {\n    isMobile: false,\n    canFitSidebar: false,\n  },\n  isTouchScreen: false,\n};\nconst DeviceContext = React.createContext<Device>(deviceContextInitialValue);\nDeviceContext.displayName = \"DeviceContext\";\n\nexport const ExcalidrawContainerContext = React.createContext<{\n  container: HTMLDivElement | null;\n  id: string | null;\n}>({ container: null, id: null });\nExcalidrawContainerContext.displayName = \"ExcalidrawContainerContext\";\n\nconst ExcalidrawElementsContext = React.createContext<\n  readonly NonDeletedExcalidrawElement[]\n>([]);\nExcalidrawElementsContext.displayName = \"ExcalidrawElementsContext\";\n\nconst ExcalidrawAppStateContext = React.createContext<AppState>({\n  ...getDefaultAppState(),\n  width: 0,\n  height: 0,\n  offsetLeft: 0,\n  offsetTop: 0,\n});\nExcalidrawAppStateContext.displayName = \"ExcalidrawAppStateContext\";\n\nconst ExcalidrawSetAppStateContext = React.createContext<\n  React.Component<any, AppState>[\"setState\"]\n>(() => {\n  console.warn(\"Uninitialized ExcalidrawSetAppStateContext context!\");\n});\nExcalidrawSetAppStateContext.displayName = \"ExcalidrawSetAppStateContext\";\n\nconst ExcalidrawActionManagerContext = React.createContext<ActionManager>(\n  null!,\n);\nExcalidrawActionManagerContext.displayName = \"ExcalidrawActionManagerContext\";\n\nexport const useApp = () => useContext(AppContext);\nexport const useAppProps = () => useContext(AppPropsContext);\nexport const useDevice = () => useContext<Device>(DeviceContext);\nexport const useExcalidrawContainer = () =>\n  useContext(ExcalidrawContainerContext);\nexport const useExcalidrawElements = () =>\n  useContext(ExcalidrawElementsContext);\nexport const useExcalidrawAppState = () =>\n  useContext(ExcalidrawAppStateContext);\nexport const useExcalidrawSetAppState = () =>\n  useContext(ExcalidrawSetAppStateContext);\nexport const useExcalidrawActionManager = () =>\n  useContext(ExcalidrawActionManagerContext);\n\nconst supportsResizeObserver =\n  typeof window !== \"undefined\" && \"ResizeObserver\" in window;\n\nlet didTapTwice: boolean = false;\nlet tappedTwiceTimer = 0;\nlet isHoldingSpace: boolean = false;\nlet isPanning: boolean = false;\nlet isDraggingScrollBar: boolean = false;\nlet currentScrollBars: ScrollBars = { horizontal: null, vertical: null };\nlet touchTimeout = 0;\nlet invalidateContextMenu = false;\n\n/**\n * Map of youtube embed video states\n */\nconst YOUTUBE_VIDEO_STATES = new Map<\n  ExcalidrawElement[\"id\"],\n  ValueOf<typeof YOUTUBE_STATES>\n>();\n\nlet IS_PLAIN_PASTE = false;\nlet IS_PLAIN_PASTE_TIMER = 0;\nlet PLAIN_PASTE_TOAST_SHOWN = false;\n\nlet lastPointerUp: (() => void) | null = null;\nconst gesture: Gesture = {\n  pointers: new Map(),\n  lastCenter: null,\n  initialDistance: null,\n  initialScale: null,\n};\n\nclass App extends React.Component<AppProps, AppState> {\n  canvas: AppClassProperties[\"canvas\"];\n  interactiveCanvas: AppClassProperties[\"interactiveCanvas\"] = null;\n  rc: RoughCanvas;\n  unmounted: boolean = false;\n  actionManager: ActionManager;\n  device: Device = deviceContextInitialValue;\n\n  private excalidrawContainerRef = React.createRef<HTMLDivElement>();\n\n  public scene: Scene;\n  public renderer: Renderer;\n  private fonts: Fonts;\n  private resizeObserver: ResizeObserver | undefined;\n  private nearestScrollableContainer: HTMLElement | Document | undefined;\n  public library: AppClassProperties[\"library\"];\n  public libraryItemsFromStorage: LibraryItems | undefined;\n  public id: string;\n  private history: History;\n  private excalidrawContainerValue: {\n    container: HTMLDivElement | null;\n    id: string;\n  };\n\n  public files: BinaryFiles = {};\n  public imageCache: AppClassProperties[\"imageCache\"] = new Map();\n  private iFrameRefs = new Map<ExcalidrawElement[\"id\"], HTMLIFrameElement>();\n  /**\n   * Indicates whether the embeddable's url has been validated for rendering.\n   * If value not set, indicates that the validation is pending.\n   * Initially or on url change the flag is not reset so that we can guarantee\n   * the validation came from a trusted source (the editor).\n   **/\n  private embedsValidationStatus: EmbedsValidationStatus = new Map();\n  /** embeds that have been inserted to DOM (as a perf optim, we don't want to\n   * insert to DOM before user initially scrolls to them) */\n  private initializedEmbeds = new Set<ExcalidrawIframeLikeElement[\"id\"]>();\n\n  private elementsPendingErasure: ElementsPendingErasure = new Set();\n\n  hitLinkElement?: NonDeletedExcalidrawElement;\n  lastPointerDownEvent: React.PointerEvent<HTMLElement> | null = null;\n  lastPointerUpEvent: React.PointerEvent<HTMLElement> | PointerEvent | null =\n    null;\n  lastPointerMoveEvent: PointerEvent | null = null;\n  lastViewportPosition = { x: 0, y: 0 };\n\n  animationFrameHandler = new AnimationFrameHandler();\n\n  laserTrails = new LaserTrails(this.animationFrameHandler, this);\n  eraserTrail = new AnimatedTrail(this.animationFrameHandler, this, {\n    streamline: 0.2,\n    size: 5,\n    keepHead: true,\n    sizeMapping: (c) => {\n      const DECAY_TIME = 200;\n      const DECAY_LENGTH = 10;\n      const t = Math.max(0, 1 - (performance.now() - c.pressure) / DECAY_TIME);\n      const l =\n        (DECAY_LENGTH -\n          Math.min(DECAY_LENGTH, c.totalLength - c.currentIndex)) /\n        DECAY_LENGTH;\n\n      return Math.min(easeOut(l), easeOut(t));\n    },\n    fill: () =>\n      this.state.theme === THEME.LIGHT\n        ? \"rgba(0, 0, 0, 0.2)\"\n        : \"rgba(255, 255, 255, 0.2)\",\n  });\n\n  onChangeEmitter = new Emitter<\n    [\n      elements: readonly ExcalidrawElement[],\n      appState: AppState,\n      files: BinaryFiles,\n    ]\n  >();\n\n  onPointerDownEmitter = new Emitter<\n    [\n      activeTool: AppState[\"activeTool\"],\n      pointerDownState: PointerDownState,\n      event: React.PointerEvent<HTMLElement>,\n    ]\n  >();\n\n  onPointerUpEmitter = new Emitter<\n    [\n      activeTool: AppState[\"activeTool\"],\n      pointerDownState: PointerDownState,\n      event: PointerEvent,\n    ]\n  >();\n  onUserFollowEmitter = new Emitter<[payload: OnUserFollowedPayload]>();\n  onScrollChangeEmitter = new Emitter<\n    [scrollX: number, scrollY: number, zoom: AppState[\"zoom\"]]\n  >();\n\n  missingPointerEventCleanupEmitter = new Emitter<\n    [event: PointerEvent | null]\n  >();\n  onRemoveEventListenersEmitter = new Emitter<[]>();\n\n  constructor(props: AppProps) {\n    super(props);\n    const defaultAppState = getDefaultAppState();\n    const {\n      excalidrawAPI,\n      viewModeEnabled = false,\n      zenModeEnabled = false,\n      gridModeEnabled = false,\n      objectsSnapModeEnabled = false,\n      theme = defaultAppState.theme,\n      name = `${t(\"labels.untitled\")}-${getDateTime()}`,\n    } = props;\n    this.state = {\n      ...defaultAppState,\n      theme,\n      isLoading: true,\n      ...this.getCanvasOffsets(),\n      viewModeEnabled,\n      zenModeEnabled,\n      objectsSnapModeEnabled,\n      gridSize: gridModeEnabled ? GRID_SIZE : null,\n      name,\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n\n    this.id = nanoid();\n    this.library = new Library(this);\n    this.actionManager = new ActionManager(\n      this.syncActionResult,\n      () => this.state,\n      () => this.scene.getElementsIncludingDeleted(),\n      this,\n    );\n    this.scene = new Scene();\n\n    this.canvas = document.createElement(\"canvas\");\n    this.rc = rough.canvas(this.canvas);\n    this.renderer = new Renderer(this.scene);\n    if (excalidrawAPI) {\n      const api: ExcalidrawImperativeAPI = {\n        updateScene: this.updateScene,\n        updateLibrary: this.library.updateLibrary,\n        addFiles: this.addFiles,\n        resetScene: this.resetScene,\n        getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted,\n        history: {\n          clear: this.resetHistory,\n        },\n        scrollToContent: this.scrollToContent,\n        getSceneElements: this.getSceneElements,\n        getAppState: () => this.state,\n        getFiles: () => this.files,\n        getName: this.getName,\n        registerAction: (action: Action) => {\n          this.actionManager.registerAction(action);\n        },\n        refresh: this.refresh,\n        setToast: this.setToast,\n        id: this.id,\n        setActiveTool: this.setActiveTool,\n        setCursor: this.setCursor,\n        resetCursor: this.resetCursor,\n        updateFrameRendering: this.updateFrameRendering,\n        toggleSidebar: this.toggleSidebar,\n        onChange: (cb) => this.onChangeEmitter.on(cb),\n        onPointerDown: (cb) => this.onPointerDownEmitter.on(cb),\n        onPointerUp: (cb) => this.onPointerUpEmitter.on(cb),\n        onScrollChange: (cb) => this.onScrollChangeEmitter.on(cb),\n        onUserFollow: (cb) => this.onUserFollowEmitter.on(cb),\n      } as const;\n      if (typeof excalidrawAPI === \"function\") {\n        excalidrawAPI(api);\n      } else {\n        console.error(\"excalidrawAPI should be a function!\");\n      }\n    }\n\n    this.excalidrawContainerValue = {\n      container: this.excalidrawContainerRef.current,\n      id: this.id,\n    };\n\n    this.fonts = new Fonts({\n      scene: this.scene,\n      onSceneUpdated: this.onSceneUpdated,\n    });\n    this.history = new History();\n    this.actionManager.registerAll(actions);\n\n    this.actionManager.registerAction(createUndoAction(this.history));\n    this.actionManager.registerAction(createRedoAction(this.history));\n  }\n\n  private onWindowMessage(event: MessageEvent) {\n    if (\n      event.origin !== \"https://player.vimeo.com\" &&\n      event.origin !== \"https://www.youtube.com\"\n    ) {\n      return;\n    }\n\n    let data = null;\n    try {\n      data = JSON.parse(event.data);\n    } catch (e) {}\n    if (!data) {\n      return;\n    }\n\n    switch (event.origin) {\n      case \"https://player.vimeo.com\":\n        //Allowing for multiple instances of Excalidraw running in the window\n        if (data.method === \"paused\") {\n          let source: Window | null = null;\n          const iframes = document.body.querySelectorAll(\n            \"iframe.excalidraw__embeddable\",\n          );\n          if (!iframes) {\n            break;\n          }\n          for (const iframe of iframes as NodeListOf<HTMLIFrameElement>) {\n            if (iframe.contentWindow === event.source) {\n              source = iframe.contentWindow;\n            }\n          }\n          source?.postMessage(\n            JSON.stringify({\n              method: data.value ? \"play\" : \"pause\",\n              value: true,\n            }),\n            \"*\",\n          );\n        }\n        break;\n      case \"https://www.youtube.com\":\n        if (\n          data.event === \"infoDelivery\" &&\n          data.info &&\n          data.id &&\n          typeof data.info.playerState === \"number\"\n        ) {\n          const id = data.id;\n          const playerState = data.info.playerState as number;\n          if (\n            (Object.values(YOUTUBE_STATES) as number[]).includes(playerState)\n          ) {\n            YOUTUBE_VIDEO_STATES.set(\n              id,\n              playerState as ValueOf<typeof YOUTUBE_STATES>,\n            );\n          }\n        }\n        break;\n    }\n  }\n\n  private cacheEmbeddableRef(\n    element: ExcalidrawIframeLikeElement,\n    ref: HTMLIFrameElement | null,\n  ) {\n    if (ref) {\n      this.iFrameRefs.set(element.id, ref);\n    }\n  }\n\n  private getHTMLIFrameElement(\n    element: ExcalidrawIframeLikeElement,\n  ): HTMLIFrameElement | undefined {\n    return this.iFrameRefs.get(element.id);\n  }\n\n  private handleEmbeddableCenterClick(element: ExcalidrawIframeLikeElement) {\n    if (\n      this.state.activeEmbeddable?.element === element &&\n      this.state.activeEmbeddable?.state === \"active\"\n    ) {\n      return;\n    }\n\n    // The delay serves two purposes\n    // 1. To prevent first click propagating to iframe on mobile,\n    //    else the click will immediately start and stop the video\n    // 2. If the user double clicks the frame center to activate it\n    //    without the delay youtube will immediately open the video\n    //    in fullscreen mode\n    setTimeout(() => {\n      this.setState({\n        activeEmbeddable: { element, state: \"active\" },\n        selectedElementIds: { [element.id]: true },\n        draggingElement: null,\n        selectionElement: null,\n      });\n    }, 100);\n\n    if (isIframeElement(element)) {\n      return;\n    }\n\n    const iframe = this.getHTMLIFrameElement(element);\n\n    if (!iframe?.contentWindow) {\n      return;\n    }\n\n    if (iframe.src.includes(\"youtube\")) {\n      const state = YOUTUBE_VIDEO_STATES.get(element.id);\n      if (!state) {\n        YOUTUBE_VIDEO_STATES.set(element.id, YOUTUBE_STATES.UNSTARTED);\n        iframe.contentWindow.postMessage(\n          JSON.stringify({\n            event: \"listening\",\n            id: element.id,\n          }),\n          \"*\",\n        );\n      }\n      switch (state) {\n        case YOUTUBE_STATES.PLAYING:\n        case YOUTUBE_STATES.BUFFERING:\n          iframe.contentWindow?.postMessage(\n            JSON.stringify({\n              event: \"command\",\n              func: \"pauseVideo\",\n              args: \"\",\n            }),\n            \"*\",\n          );\n          break;\n        default:\n          iframe.contentWindow?.postMessage(\n            JSON.stringify({\n              event: \"command\",\n              func: \"playVideo\",\n              args: \"\",\n            }),\n            \"*\",\n          );\n      }\n    }\n\n    if (iframe.src.includes(\"player.vimeo.com\")) {\n      iframe.contentWindow.postMessage(\n        JSON.stringify({\n          method: \"paused\", //video play/pause in onWindowMessage handler\n        }),\n        \"*\",\n      );\n    }\n  }\n\n  private isIframeLikeElementCenter(\n    el: ExcalidrawIframeLikeElement | null,\n    event: React.PointerEvent<HTMLElement> | PointerEvent,\n    sceneX: number,\n    sceneY: number,\n  ) {\n    return (\n      el &&\n      !event.altKey &&\n      !event.shiftKey &&\n      !event.metaKey &&\n      !event.ctrlKey &&\n      (this.state.activeEmbeddable?.element !== el ||\n        this.state.activeEmbeddable?.state === \"hover\" ||\n        !this.state.activeEmbeddable) &&\n      sceneX >= el.x + el.width / 3 &&\n      sceneX <= el.x + (2 * el.width) / 3 &&\n      sceneY >= el.y + el.height / 3 &&\n      sceneY <= el.y + (2 * el.height) / 3\n    );\n  }\n\n  private updateEmbedValidationStatus = (\n    element: ExcalidrawEmbeddableElement,\n    status: boolean,\n  ) => {\n    this.embedsValidationStatus.set(element.id, status);\n    ShapeCache.delete(element);\n  };\n\n  private updateEmbeddables = () => {\n    const iframeLikes = new Set<ExcalidrawIframeLikeElement[\"id\"]>();\n\n    let updated = false;\n    this.scene.getNonDeletedElements().filter((element) => {\n      if (isEmbeddableElement(element)) {\n        iframeLikes.add(element.id);\n        if (!this.embedsValidationStatus.has(element.id)) {\n          updated = true;\n\n          const validated = embeddableURLValidator(\n            element.link,\n            this.props.validateEmbeddable,\n          );\n\n          this.updateEmbedValidationStatus(element, validated);\n        }\n      } else if (isIframeElement(element)) {\n        iframeLikes.add(element.id);\n      }\n      return false;\n    });\n\n    if (updated) {\n      this.scene.informMutation();\n    }\n\n    // GC\n    this.iFrameRefs.forEach((ref, id) => {\n      if (!iframeLikes.has(id)) {\n        this.iFrameRefs.delete(id);\n      }\n    });\n  };\n\n  private renderEmbeddables() {\n    const scale = this.state.zoom.value;\n    const normalizedWidth = this.state.width;\n    const normalizedHeight = this.state.height;\n\n    const embeddableElements = this.scene\n      .getNonDeletedElements()\n      .filter(\n        (el): el is NonDeleted<ExcalidrawIframeLikeElement> =>\n          (isEmbeddableElement(el) &&\n            this.embedsValidationStatus.get(el.id) === true) ||\n          isIframeElement(el),\n      );\n\n    return (\n      <>\n        {embeddableElements.map((el) => {\n          const { x, y } = sceneCoordsToViewportCoords(\n            { sceneX: el.x, sceneY: el.y },\n            this.state,\n          );\n\n          const isVisible = isElementInViewport(\n            el,\n            normalizedWidth,\n            normalizedHeight,\n            this.state,\n            this.scene.getNonDeletedElementsMap(),\n          );\n          const hasBeenInitialized = this.initializedEmbeds.has(el.id);\n\n          if (isVisible && !hasBeenInitialized) {\n            this.initializedEmbeds.add(el.id);\n          }\n          const shouldRender = isVisible || hasBeenInitialized;\n\n          if (!shouldRender) {\n            return null;\n          }\n\n          let src: IframeData | null;\n\n          if (isIframeElement(el)) {\n            src = null;\n\n            const data: MagicCacheData = (el.customData?.generationData ??\n              this.magicGenerations.get(el.id)) || {\n              status: \"error\",\n              message: \"No generation data\",\n              code: \"ERR_NO_GENERATION_DATA\",\n            };\n\n            if (data.status === \"done\") {\n              const html = data.html;\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return html;\n                },\n              } as const;\n            } else if (data.status === \"pending\") {\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return createSrcDoc(`\n                    <style>\n                      html, body {\n                        width: 100%;\n                        height: 100%;\n                        color: ${\n                          this.state.theme === \"dark\" ? \"white\" : \"black\"\n                        };\n                      }\n                      body {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        flex-direction: column;\n                        gap: 1rem;\n                      }\n\n                      .Spinner {\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        margin-left: auto;\n                        margin-right: auto;\n                      }\n\n                      .Spinner svg {\n                        animation: rotate 1.6s linear infinite;\n                        transform-origin: center center;\n                        width: 40px;\n                        height: 40px;\n                      }\n\n                      .Spinner circle {\n                        stroke: currentColor;\n                        animation: dash 1.6s linear 0s infinite;\n                        stroke-linecap: round;\n                      }\n\n                      @keyframes rotate {\n                        100% {\n                          transform: rotate(360deg);\n                        }\n                      }\n\n                      @keyframes dash {\n                        0% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: 0;\n                        }\n                        50% {\n                          stroke-dasharray: 150, 300;\n                          stroke-dashoffset: -200;\n                        }\n                        100% {\n                          stroke-dasharray: 1, 300;\n                          stroke-dashoffset: -280;\n                        }\n                      }\n                    </style>\n                    <div class=\"Spinner\">\n                      <svg\n                        viewBox=\"0 0 100 100\"\n                      >\n                        <circle\n                          cx=\"50\"\n                          cy=\"50\"\n                          r=\"46\"\n                          stroke-width=\"8\"\n                          fill=\"none\"\n                          stroke-miter-limit=\"10\"\n                        />\n                      </svg>\n                    </div>\n                    <div>Generating...</div>\n                  `);\n                },\n              } as const;\n            } else {\n              let message: string;\n              if (data.code === \"ERR_GENERATION_INTERRUPTED\") {\n                message = \"Generation was interrupted...\";\n              } else {\n                message = data.message || \"Generation failed\";\n              }\n              src = {\n                intrinsicSize: { w: el.width, h: el.height },\n                type: \"document\",\n                srcdoc: () => {\n                  return createSrcDoc(`\n                    <style>\n                    html, body {\n                      height: 100%;\n                    }\n                      body {\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        justify-content: center;\n                        color: ${COLOR_PALETTE.red[3]};\n                      }\n                      h1, h3 {\n                        margin-top: 0;\n                        margin-bottom: 0.5rem;\n                      }\n                    </style>\n                    <h1>Error!</h1>\n                    <h3>${message}</h3>\n                  `);\n                },\n              } as const;\n            }\n          } else {\n            src = getEmbedLink(toValidURL(el.link || \"\"));\n          }\n\n          const isActive =\n            this.state.activeEmbeddable?.element === el &&\n            this.state.activeEmbeddable?.state === \"active\";\n          const isHovered =\n            this.state.activeEmbeddable?.element === el &&\n            this.state.activeEmbeddable?.state === \"hover\";\n\n          return (\n            <div\n              key={el.id}\n              className={clsx(\"excalidraw__embeddable-container\", {\n                \"is-hovered\": isHovered,\n              })}\n              style={{\n                transform: isVisible\n                  ? `translate(${x - this.state.offsetLeft}px, ${\n                      y - this.state.offsetTop\n                    }px) scale(${scale})`\n                  : \"none\",\n                display: isVisible ? \"block\" : \"none\",\n                opacity: getRenderOpacity(\n                  el,\n                  getContainingFrame(el),\n                  this.elementsPendingErasure,\n                ),\n                [\"--embeddable-radius\" as string]: `${getCornerRadius(\n                  Math.min(el.width, el.height),\n                  el,\n                )}px`,\n              }}\n            >\n              <div\n                //this is a hack that addresses isse with embedded excalidraw.com embeddable\n                //https://github.com/excalidraw/excalidraw/pull/6691#issuecomment-1607383938\n                /*ref={(ref) => {\n                  if (!this.excalidrawContainerRef.current) {\n                    return;\n                  }\n                  const container = this.excalidrawContainerRef.current;\n                  const sh = container.scrollHeight;\n                  const ch = container.clientHeight;\n                  if (sh !== ch) {\n                    container.style.height = `${sh}px`;\n                    setTimeout(() => {\n                      container.style.height = `100%`;\n                    });\n                  }\n                }}*/\n                className=\"excalidraw__embeddable-container__inner\"\n                style={{\n                  width: isVisible ? `${el.width}px` : 0,\n                  height: isVisible ? `${el.height}px` : 0,\n                  transform: isVisible ? `rotate(${el.angle}rad)` : \"none\",\n                  pointerEvents: isActive\n                    ? POINTER_EVENTS.enabled\n                    : POINTER_EVENTS.disabled,\n                }}\n              >\n                {isHovered && (\n                  <div className=\"excalidraw__embeddable-hint\">\n                    {t(\"buttons.embeddableInteractionButton\")}\n                  </div>\n                )}\n                <div\n                  className=\"excalidraw__embeddable__outer\"\n                  style={{\n                    padding: `${el.strokeWidth}px`,\n                  }}\n                >\n                  {(isEmbeddableElement(el)\n                    ? this.props.renderEmbeddable?.(el, this.state)\n                    : null) ?? (\n                    <iframe\n                      ref={(ref) => this.cacheEmbeddableRef(el, ref)}\n                      className=\"excalidraw__embeddable\"\n                      srcDoc={\n                        src?.type === \"document\"\n                          ? src.srcdoc(this.state.theme)\n                          : undefined\n                      }\n                      src={\n                        src?.type !== \"document\" ? src?.link ?? \"\" : undefined\n                      }\n                      // https://stackoverflow.com/q/18470015\n                      scrolling=\"no\"\n                      referrerPolicy=\"no-referrer-when-downgrade\"\n                      title=\"Excalidraw Embedded Content\"\n                      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                      allowFullScreen={true}\n                      sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads\"\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n\n  private getFrameNameDOMId = (frameElement: ExcalidrawElement) => {\n    return `${this.id}-frame-name-${frameElement.id}`;\n  };\n\n  frameNameBoundsCache: FrameNameBoundsCache = {\n    get: (frameElement) => {\n      let bounds = this.frameNameBoundsCache._cache.get(frameElement.id);\n      if (\n        !bounds ||\n        bounds.zoom !== this.state.zoom.value ||\n        bounds.versionNonce !== frameElement.versionNonce\n      ) {\n        const frameNameDiv = document.getElementById(\n          this.getFrameNameDOMId(frameElement),\n        );\n\n        if (frameNameDiv) {\n          const box = frameNameDiv.getBoundingClientRect();\n          const boxSceneTopLeft = viewportCoordsToSceneCoords(\n            { clientX: box.x, clientY: box.y },\n            this.state,\n          );\n          const boxSceneBottomRight = viewportCoordsToSceneCoords(\n            { clientX: box.right, clientY: box.bottom },\n            this.state,\n          );\n\n          bounds = {\n            x: boxSceneTopLeft.x,\n            y: boxSceneTopLeft.y,\n            width: boxSceneBottomRight.x - boxSceneTopLeft.x,\n            height: boxSceneBottomRight.y - boxSceneTopLeft.y,\n            angle: 0,\n            zoom: this.state.zoom.value,\n            versionNonce: frameElement.versionNonce,\n          };\n\n          this.frameNameBoundsCache._cache.set(frameElement.id, bounds);\n\n          return bounds;\n        }\n        return null;\n      }\n\n      return bounds;\n    },\n    /**\n     * @private\n     */\n    _cache: new Map(),\n  };\n\n  private renderFrameNames = () => {\n    if (!this.state.frameRendering.enabled || !this.state.frameRendering.name) {\n      return null;\n    }\n\n    const isDarkTheme = this.state.theme === \"dark\";\n\n    let frameIndex = 0;\n    let magicFrameIndex = 0;\n\n    return this.scene.getNonDeletedFramesLikes().map((f) => {\n      if (isFrameElement(f)) {\n        frameIndex++;\n      } else {\n        magicFrameIndex++;\n      }\n      if (\n        !isElementInViewport(\n          f,\n          this.canvas.width / window.devicePixelRatio,\n          this.canvas.height / window.devicePixelRatio,\n          {\n            offsetLeft: this.state.offsetLeft,\n            offsetTop: this.state.offsetTop,\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            zoom: this.state.zoom,\n          },\n          this.scene.getNonDeletedElementsMap(),\n        )\n      ) {\n        // if frame not visible, don't render its name\n        return null;\n      }\n\n      const { x: x1, y: y1 } = sceneCoordsToViewportCoords(\n        { sceneX: f.x, sceneY: f.y },\n        this.state,\n      );\n\n      const FRAME_NAME_EDIT_PADDING = 6;\n\n      const reset = () => {\n        mutateElement(f, { name: f.name?.trim() || null });\n        this.setState({ editingFrame: null });\n      };\n\n      let frameNameJSX;\n\n      const frameName = getFrameLikeTitle(\n        f,\n        isFrameElement(f) ? frameIndex : magicFrameIndex,\n      );\n\n      if (f.id === this.state.editingFrame) {\n        const frameNameInEdit = frameName;\n\n        frameNameJSX = (\n          <input\n            autoFocus\n            value={frameNameInEdit}\n            onChange={(e) => {\n              mutateElement(f, {\n                name: e.target.value,\n              });\n            }}\n            onFocus={(e) => e.target.select()}\n            onBlur={() => reset()}\n            onKeyDown={(event) => {\n              // for some inexplicable reason, `onBlur` triggered on ESC\n              // does not reset `state.editingFrame` despite being called,\n              // and we need to reset it here as well\n              if (event.key === KEYS.ESCAPE || event.key === KEYS.ENTER) {\n                reset();\n              }\n            }}\n            style={{\n              background: this.state.viewBackgroundColor,\n              filter: isDarkTheme ? THEME_FILTER : \"none\",\n              zIndex: 2,\n              border: \"none\",\n              display: \"block\",\n              padding: `${FRAME_NAME_EDIT_PADDING}px`,\n              borderRadius: 4,\n              boxShadow: \"inset 0 0 0 1px var(--color-primary)\",\n              fontFamily: \"Assistant\",\n              fontSize: \"14px\",\n              transform: `translate(-${FRAME_NAME_EDIT_PADDING}px, ${FRAME_NAME_EDIT_PADDING}px)`,\n              color: \"var(--color-gray-80)\",\n              overflow: \"hidden\",\n              maxWidth: `${\n                document.body.clientWidth - x1 - FRAME_NAME_EDIT_PADDING\n              }px`,\n            }}\n            size={frameNameInEdit.length + 1 || 1}\n            dir=\"auto\"\n            autoComplete=\"off\"\n            autoCapitalize=\"off\"\n            autoCorrect=\"off\"\n          />\n        );\n      } else {\n        frameNameJSX = frameName;\n      }\n\n      return (\n        <div\n          id={this.getFrameNameDOMId(f)}\n          key={f.id}\n          style={{\n            position: \"absolute\",\n            // Positioning from bottom so that we don't to either\n            // calculate text height or adjust using transform (which)\n            // messes up input position when editing the frame name.\n            // This makes the positioning deterministic and we can calculate\n            // the same position when rendering to canvas / svg.\n            bottom: `${\n              this.state.height +\n              FRAME_STYLE.nameOffsetY -\n              y1 +\n              this.state.offsetTop\n            }px`,\n            left: `${x1 - this.state.offsetLeft}px`,\n            zIndex: 2,\n            fontSize: FRAME_STYLE.nameFontSize,\n            color: isDarkTheme\n              ? FRAME_STYLE.nameColorDarkTheme\n              : FRAME_STYLE.nameColorLightTheme,\n            lineHeight: FRAME_STYLE.nameLineHeight,\n            width: \"max-content\",\n            maxWidth: `${f.width}px`,\n            overflow: f.id === this.state.editingFrame ? \"visible\" : \"hidden\",\n            whiteSpace: \"nowrap\",\n            textOverflow: \"ellipsis\",\n            cursor: CURSOR_TYPE.MOVE,\n            pointerEvents: this.state.viewModeEnabled\n              ? POINTER_EVENTS.disabled\n              : POINTER_EVENTS.enabled,\n          }}\n          onPointerDown={(event) => this.handleCanvasPointerDown(event)}\n          onWheel={(event) => this.handleWheel(event)}\n          onContextMenu={this.handleCanvasContextMenu}\n          onDoubleClick={() => {\n            this.setState({\n              editingFrame: f.id,\n            });\n          }}\n        >\n          {frameNameJSX}\n        </div>\n      );\n    });\n  };\n\n  private toggleOverscrollBehavior(event: React.PointerEvent) {\n    // when pointer inside editor, disable overscroll behavior to prevent\n    // panning to trigger history back/forward on MacOS Chrome\n    document.documentElement.style.overscrollBehaviorX =\n      event.type === \"pointerenter\" ? \"none\" : \"auto\";\n  }\n\n  public render() {\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const { renderTopRightUI, renderCustomStats } = this.props;\n\n    const versionNonce = this.scene.getVersionNonce();\n    const { elementsMap, visibleElements } =\n      this.renderer.getRenderableElements({\n        versionNonce,\n        zoom: this.state.zoom,\n        offsetLeft: this.state.offsetLeft,\n        offsetTop: this.state.offsetTop,\n        scrollX: this.state.scrollX,\n        scrollY: this.state.scrollY,\n        height: this.state.height,\n        width: this.state.width,\n        editingElement: this.state.editingElement,\n        pendingImageElementId: this.state.pendingImageElementId,\n      });\n\n    const allElementsMap = this.scene.getNonDeletedElementsMap();\n\n    const shouldBlockPointerEvents =\n      !(\n        this.state.editingElement && isLinearElement(this.state.editingElement)\n      ) &&\n      (this.state.selectionElement ||\n        this.state.draggingElement ||\n        this.state.resizingElement ||\n        (this.state.activeTool.type === \"laser\" &&\n          // technically we can just test on this once we make it more safe\n          this.state.cursorButton === \"down\") ||\n        (this.state.editingElement &&\n          !isTextElement(this.state.editingElement)));\n\n    const firstSelectedElement = selectedElements[0];\n\n    return (\n      <div\n        className={clsx(\"excalidraw excalidraw-container\", {\n          \"excalidraw--view-mode\": this.state.viewModeEnabled,\n          \"excalidraw--mobile\": this.device.editor.isMobile,\n        })}\n        style={{\n          [\"--ui-pointerEvents\" as any]: shouldBlockPointerEvents\n            ? POINTER_EVENTS.disabled\n            : POINTER_EVENTS.enabled,\n        }}\n        ref={this.excalidrawContainerRef}\n        onDrop={this.handleAppOnDrop}\n        tabIndex={0}\n        onKeyDown={\n          this.props.handleKeyboardGlobally ? undefined : this.onKeyDown\n        }\n        onPointerEnter={this.toggleOverscrollBehavior}\n        onPointerLeave={this.toggleOverscrollBehavior}\n      >\n        <AppContext.Provider value={this}>\n          <AppPropsContext.Provider value={this.props}>\n            <ExcalidrawContainerContext.Provider\n              value={this.excalidrawContainerValue}\n            >\n              <DeviceContext.Provider value={this.device}>\n                <ExcalidrawSetAppStateContext.Provider value={this.setAppState}>\n                  <ExcalidrawAppStateContext.Provider value={this.state}>\n                    <ExcalidrawElementsContext.Provider\n                      value={this.scene.getNonDeletedElements()}\n                    >\n                      <ExcalidrawActionManagerContext.Provider\n                        value={this.actionManager}\n                      >\n                        <LayerUI\n                          canvas={this.canvas}\n                          appState={this.state}\n                          files={this.files}\n                          setAppState={this.setAppState}\n                          actionManager={this.actionManager}\n                          elements={this.scene.getNonDeletedElements()}\n                          onLockToggle={this.toggleLock}\n                          onPenModeToggle={this.togglePenMode}\n                          onHandToolToggle={this.onHandToolToggle}\n                          langCode={getLanguage().code}\n                          renderTopRightUI={renderTopRightUI}\n                          renderCustomStats={renderCustomStats}\n                          showExitZenModeBtn={\n                            typeof this.props?.zenModeEnabled === \"undefined\" &&\n                            this.state.zenModeEnabled\n                          }\n                          UIOptions={this.props.UIOptions}\n                          onExportImage={this.onExportImage}\n                          renderWelcomeScreen={\n                            !this.state.isLoading &&\n                            this.state.showWelcomeScreen &&\n                            this.state.activeTool.type === \"selection\" &&\n                            !this.state.zenModeEnabled &&\n                            !this.scene.getElementsIncludingDeleted().length\n                          }\n                          app={this}\n                          isCollaborating={this.props.isCollaborating}\n                          openAIKey={this.OPENAI_KEY}\n                          isOpenAIKeyPersisted={this.OPENAI_KEY_IS_PERSISTED}\n                          onOpenAIAPIKeyChange={this.onOpenAIKeyChange}\n                          onMagicSettingsConfirm={this.onMagicSettingsConfirm}\n                        >\n                          {this.props.children}\n                        </LayerUI>\n\n                        <div className=\"excalidraw-textEditorContainer\" />\n                        <div className=\"excalidraw-contextMenuContainer\" />\n                        <div className=\"excalidraw-eye-dropper-container\" />\n                        <SVGLayer\n                          trails={[this.laserTrails, this.eraserTrail]}\n                        />\n                        {selectedElements.length === 1 &&\n                          this.state.showHyperlinkPopup && (\n                            <Hyperlink\n                              key={firstSelectedElement.id}\n                              element={firstSelectedElement}\n                              elementsMap={allElementsMap}\n                              setAppState={this.setAppState}\n                              onLinkOpen={this.props.onLinkOpen}\n                              setToast={this.setToast}\n                              updateEmbedValidationStatus={\n                                this.updateEmbedValidationStatus\n                              }\n                            />\n                          )}\n                        {this.props.aiEnabled !== false &&\n                          selectedElements.length === 1 &&\n                          isMagicFrameElement(firstSelectedElement) && (\n                            <ElementCanvasButtons\n                              element={firstSelectedElement}\n                              elementsMap={elementsMap}\n                            >\n                              <ElementCanvasButton\n                                title={t(\"labels.convertToCode\")}\n                                icon={MagicIcon}\n                                checked={false}\n                                onChange={() =>\n                                  this.onMagicFrameGenerate(\n                                    firstSelectedElement,\n                                    \"button\",\n                                  )\n                                }\n                              />\n                            </ElementCanvasButtons>\n                          )}\n                        {selectedElements.length === 1 &&\n                          isIframeElement(firstSelectedElement) &&\n                          firstSelectedElement.customData?.generationData\n                            ?.status === \"done\" && (\n                            <ElementCanvasButtons\n                              element={firstSelectedElement}\n                              elementsMap={elementsMap}\n                            >\n                              <ElementCanvasButton\n                                title={t(\"labels.copySource\")}\n                                icon={copyIcon}\n                                checked={false}\n                                onChange={() =>\n                                  this.onIframeSrcCopy(firstSelectedElement)\n                                }\n                              />\n                              <ElementCanvasButton\n                                title=\"Enter fullscreen\"\n                                icon={fullscreenIcon}\n                                checked={false}\n                                onChange={() => {\n                                  const iframe =\n                                    this.getHTMLIFrameElement(\n                                      firstSelectedElement,\n                                    );\n                                  if (iframe) {\n                                    try {\n                                      iframe.requestFullscreen();\n                                      this.setState({\n                                        activeEmbeddable: {\n                                          element: firstSelectedElement,\n                                          state: \"active\",\n                                        },\n                                        selectedElementIds: {\n                                          [firstSelectedElement.id]: true,\n                                        },\n                                        draggingElement: null,\n                                        selectionElement: null,\n                                      });\n                                    } catch (err: any) {\n                                      console.warn(err);\n                                      this.setState({\n                                        errorMessage:\n                                          \"Couldn't enter fullscreen\",\n                                      });\n                                    }\n                                  }\n                                }}\n                              />\n                            </ElementCanvasButtons>\n                          )}\n                        {this.state.toast !== null && (\n                          <Toast\n                            message={this.state.toast.message}\n                            onClose={() => this.setToast(null)}\n                            duration={this.state.toast.duration}\n                            closable={this.state.toast.closable}\n                          />\n                        )}\n                        {this.state.contextMenu && (\n                          <ContextMenu\n                            items={this.state.contextMenu.items}\n                            top={this.state.contextMenu.top}\n                            left={this.state.contextMenu.left}\n                            actionManager={this.actionManager}\n                            onClose={(callback) => {\n                              this.setState({ contextMenu: null }, () => {\n                                this.focusContainer();\n                                callback?.();\n                              });\n                            }}\n                          />\n                        )}\n                        <StaticCanvas\n                          canvas={this.canvas}\n                          rc={this.rc}\n                          elementsMap={elementsMap}\n                          allElementsMap={allElementsMap}\n                          visibleElements={visibleElements}\n                          versionNonce={versionNonce}\n                          selectionNonce={\n                            this.state.selectionElement?.versionNonce\n                          }\n                          scale={window.devicePixelRatio}\n                          appState={this.state}\n                          renderConfig={{\n                            imageCache: this.imageCache,\n                            isExporting: false,\n                            renderGrid: true,\n                            canvasBackgroundColor:\n                              this.state.viewBackgroundColor,\n                            embedsValidationStatus: this.embedsValidationStatus,\n                            elementsPendingErasure: this.elementsPendingErasure,\n                          }}\n                        />\n                        <InteractiveCanvas\n                          containerRef={this.excalidrawContainerRef}\n                          canvas={this.interactiveCanvas}\n                          elementsMap={elementsMap}\n                          visibleElements={visibleElements}\n                          selectedElements={selectedElements}\n                          versionNonce={versionNonce}\n                          selectionNonce={\n                            this.state.selectionElement?.versionNonce\n                          }\n                          scale={window.devicePixelRatio}\n                          appState={this.state}\n                          renderInteractiveSceneCallback={\n                            this.renderInteractiveSceneCallback\n                          }\n                          handleCanvasRef={this.handleInteractiveCanvasRef}\n                          onContextMenu={this.handleCanvasContextMenu}\n                          onPointerMove={this.handleCanvasPointerMove}\n                          onPointerUp={this.handleCanvasPointerUp}\n                          onPointerCancel={this.removePointer}\n                          onTouchMove={this.handleTouchMove}\n                          onPointerDown={this.handleCanvasPointerDown}\n                          onDoubleClick={this.handleCanvasDoubleClick}\n                        />\n                        {this.state.userToFollow && (\n                          <FollowMode\n                            width={this.state.width}\n                            height={this.state.height}\n                            userToFollow={this.state.userToFollow}\n                            onDisconnect={this.maybeUnfollowRemoteUser}\n                          />\n                        )}\n                        {this.renderFrameNames()}\n                      </ExcalidrawActionManagerContext.Provider>\n                      {this.renderEmbeddables()}\n                    </ExcalidrawElementsContext.Provider>\n                  </ExcalidrawAppStateContext.Provider>\n                </ExcalidrawSetAppStateContext.Provider>\n              </DeviceContext.Provider>\n            </ExcalidrawContainerContext.Provider>\n          </AppPropsContext.Provider>\n        </AppContext.Provider>\n      </div>\n    );\n  }\n\n  public focusContainer: AppClassProperties[\"focusContainer\"] = () => {\n    this.excalidrawContainerRef.current?.focus();\n  };\n\n  public getSceneElementsIncludingDeleted = () => {\n    return this.scene.getElementsIncludingDeleted();\n  };\n\n  public getSceneElements = () => {\n    return this.scene.getNonDeletedElements();\n  };\n\n  public onInsertElements = (elements: readonly ExcalidrawElement[]) => {\n    this.addElementsFromPasteOrLibrary({\n      elements,\n      position: \"center\",\n      files: null,\n    });\n  };\n\n  public onExportImage = async (\n    type: keyof typeof EXPORT_IMAGE_TYPES,\n    elements: ExportedElements,\n    opts: { exportingFrame: ExcalidrawFrameLikeElement | null },\n  ) => {\n    trackEvent(\"export\", type, \"ui\");\n    const fileHandle = await exportCanvas(\n      type,\n      elements,\n      this.state,\n      this.files,\n      {\n        exportBackground: this.state.exportBackground,\n        name: this.getName(),\n        viewBackgroundColor: this.state.viewBackgroundColor,\n        exportingFrame: opts.exportingFrame,\n      },\n    )\n      .catch(muteFSAbortError)\n      .catch((error) => {\n        console.error(error);\n        this.setState({ errorMessage: error.message });\n      });\n\n    if (\n      this.state.exportEmbedScene &&\n      fileHandle &&\n      isImageFileHandle(fileHandle)\n    ) {\n      this.setState({ fileHandle });\n    }\n  };\n\n  private magicGenerations = new Map<\n    ExcalidrawIframeElement[\"id\"],\n    MagicCacheData\n  >();\n\n  private updateMagicGeneration = ({\n    frameElement,\n    data,\n  }: {\n    frameElement: ExcalidrawIframeElement;\n    data: MagicCacheData;\n  }) => {\n    if (data.status === \"pending\") {\n      // We don't wanna persist pending state to storage. It should be in-app\n      // state only.\n      // Thus reset so that we prefer local cache (if there was some\n      // generationData set previously)\n      mutateElement(\n        frameElement,\n        { customData: { generationData: undefined } },\n        false,\n      );\n    } else {\n      mutateElement(\n        frameElement,\n        { customData: { generationData: data } },\n        false,\n      );\n    }\n    this.magicGenerations.set(frameElement.id, data);\n    this.onSceneUpdated();\n  };\n\n  private getTextFromElements(elements: readonly ExcalidrawElement[]) {\n    const text = elements\n      .reduce((acc: string[], element) => {\n        if (isTextElement(element)) {\n          acc.push(element.text);\n        }\n        return acc;\n      }, [])\n      .join(\"\\n\\n\");\n    return text;\n  }\n\n  private async onMagicFrameGenerate(\n    magicFrame: ExcalidrawMagicFrameElement,\n    source: \"button\" | \"upstream\",\n  ) {\n    if (!this.OPENAI_KEY) {\n      this.setState({\n        openDialog: {\n          name: \"settings\",\n          tab: \"diagram-to-code\",\n          source: \"generation\",\n        },\n      });\n      trackEvent(\"ai\", \"generate (missing key)\", \"d2c\");\n      return;\n    }\n\n    const magicFrameChildren = getElementsOverlappingFrame(\n      this.scene.getNonDeletedElements(),\n      magicFrame,\n    ).filter((el) => !isMagicFrameElement(el));\n\n    if (!magicFrameChildren.length) {\n      if (source === \"button\") {\n        this.setState({ errorMessage: \"Cannot generate from an empty frame\" });\n        trackEvent(\"ai\", \"generate (no-children)\", \"d2c\");\n      } else {\n        this.setActiveTool({ type: \"magicframe\" });\n      }\n      return;\n    }\n\n    const frameElement = this.insertIframeElement({\n      sceneX: magicFrame.x + magicFrame.width + 30,\n      sceneY: magicFrame.y,\n      width: magicFrame.width,\n      height: magicFrame.height,\n    });\n\n    if (!frameElement) {\n      return;\n    }\n\n    this.updateMagicGeneration({\n      frameElement,\n      data: { status: \"pending\" },\n    });\n\n    this.setState({\n      selectedElementIds: { [frameElement.id]: true },\n    });\n\n    const blob = await exportToBlob({\n      elements: this.scene.getNonDeletedElements(),\n      appState: {\n        ...this.state,\n        exportBackground: true,\n        viewBackgroundColor: this.state.viewBackgroundColor,\n      },\n      exportingFrame: magicFrame,\n      files: this.files,\n    });\n\n    const dataURL = await getDataURL(blob);\n\n    const textFromFrameChildren = this.getTextFromElements(magicFrameChildren);\n\n    trackEvent(\"ai\", \"generate (start)\", \"d2c\");\n\n    const result = await diagramToHTML({\n      image: dataURL,\n      apiKey: this.OPENAI_KEY,\n      text: textFromFrameChildren,\n      theme: this.state.theme,\n    });\n\n    if (!result.ok) {\n      trackEvent(\"ai\", \"generate (failed)\", \"d2c\");\n      console.error(result.error);\n      this.updateMagicGeneration({\n        frameElement,\n        data: {\n          status: \"error\",\n          code: \"ERR_OAI\",\n          message: result.error?.message || \"Unknown error during generation\",\n        },\n      });\n      return;\n    }\n    trackEvent(\"ai\", \"generate (success)\", \"d2c\");\n\n    if (result.choices[0].message.content == null) {\n      this.updateMagicGeneration({\n        frameElement,\n        data: {\n          status: \"error\",\n          code: \"ERR_OAI\",\n          message: \"Nothing genereated :(\",\n        },\n      });\n      return;\n    }\n\n    const message = result.choices[0].message.content;\n\n    const html = message.slice(\n      message.indexOf(\"<!DOCTYPE html>\"),\n      message.indexOf(\"</html>\") + \"</html>\".length,\n    );\n\n    this.updateMagicGeneration({\n      frameElement,\n      data: { status: \"done\", html },\n    });\n  }\n\n  private onIframeSrcCopy(element: ExcalidrawIframeElement) {\n    if (element.customData?.generationData?.status === \"done\") {\n      copyTextToSystemClipboard(element.customData.generationData.html);\n      this.setToast({\n        message: \"copied to clipboard\",\n        closable: false,\n        duration: 1500,\n      });\n    }\n  }\n\n  private OPENAI_KEY: string | null = EditorLocalStorage.get(\n    EDITOR_LS_KEYS.OAI_API_KEY,\n  );\n  private OPENAI_KEY_IS_PERSISTED: boolean =\n    EditorLocalStorage.has(EDITOR_LS_KEYS.OAI_API_KEY) || false;\n\n  private onOpenAIKeyChange = (\n    openAIKey: string | null,\n    shouldPersist: boolean,\n  ) => {\n    this.OPENAI_KEY = openAIKey || null;\n    if (shouldPersist) {\n      const didPersist = EditorLocalStorage.set(\n        EDITOR_LS_KEYS.OAI_API_KEY,\n        openAIKey,\n      );\n      this.OPENAI_KEY_IS_PERSISTED = didPersist;\n    } else {\n      this.OPENAI_KEY_IS_PERSISTED = false;\n    }\n  };\n\n  private onMagicSettingsConfirm = (\n    apiKey: string,\n    shouldPersist: boolean,\n    source: \"tool\" | \"generation\" | \"settings\",\n  ) => {\n    this.OPENAI_KEY = apiKey || null;\n    this.onOpenAIKeyChange(this.OPENAI_KEY, shouldPersist);\n\n    if (source === \"settings\") {\n      return;\n    }\n\n    const selectedElements = this.scene.getSelectedElements({\n      selectedElementIds: this.state.selectedElementIds,\n    });\n\n    if (apiKey) {\n      if (selectedElements.length) {\n        this.onMagicframeToolSelect();\n      } else {\n        this.setActiveTool({ type: \"magicframe\" });\n      }\n    } else if (!isMagicFrameElement(selectedElements[0])) {\n      // even if user didn't end up setting api key, let's pick the tool\n      // so they can draw up a frame and move forward\n      this.setActiveTool({ type: \"magicframe\" });\n    }\n  };\n\n  public onMagicframeToolSelect = () => {\n    if (!this.OPENAI_KEY) {\n      this.setState({\n        openDialog: {\n          name: \"settings\",\n          tab: \"diagram-to-code\",\n          source: \"tool\",\n        },\n      });\n      trackEvent(\"ai\", \"tool-select (missing key)\", \"d2c\");\n      return;\n    }\n\n    const selectedElements = this.scene.getSelectedElements({\n      selectedElementIds: this.state.selectedElementIds,\n    });\n\n    if (selectedElements.length === 0) {\n      this.setActiveTool({ type: TOOL_TYPE.magicframe });\n      trackEvent(\"ai\", \"tool-select (empty-selection)\", \"d2c\");\n    } else {\n      const selectedMagicFrame: ExcalidrawMagicFrameElement | false =\n        selectedElements.length === 1 &&\n        isMagicFrameElement(selectedElements[0]) &&\n        selectedElements[0];\n\n      // case: user selected elements containing frame-like(s) or are frame\n      // members, we don't want to wrap into another magicframe\n      // (unless the only selected element is a magic frame which we reuse)\n      if (\n        !selectedMagicFrame &&\n        selectedElements.some((el) => isFrameLikeElement(el) || el.frameId)\n      ) {\n        this.setActiveTool({ type: TOOL_TYPE.magicframe });\n        return;\n      }\n\n      trackEvent(\"ai\", \"tool-select (existing selection)\", \"d2c\");\n\n      let frame: ExcalidrawMagicFrameElement;\n      if (selectedMagicFrame) {\n        // a single magicframe already selected -> use it\n        frame = selectedMagicFrame;\n      } else {\n        // selected elements aren't wrapped in magic frame yet -> wrap now\n\n        const [minX, minY, maxX, maxY] = getCommonBounds(selectedElements);\n        const padding = 50;\n\n        frame = newMagicFrameElement({\n          ...FRAME_STYLE,\n          x: minX - padding,\n          y: minY - padding,\n          width: maxX - minX + padding * 2,\n          height: maxY - minY + padding * 2,\n          opacity: 100,\n          locked: false,\n        });\n\n        this.scene.addNewElement(frame);\n\n        for (const child of selectedElements) {\n          mutateElement(child, { frameId: frame.id });\n        }\n\n        this.setState({\n          selectedElementIds: { [frame.id]: true },\n        });\n      }\n\n      this.onMagicFrameGenerate(frame, \"upstream\");\n    }\n  };\n\n  private openEyeDropper = ({ type }: { type: \"stroke\" | \"background\" }) => {\n    jotaiStore.set(activeEyeDropperAtom, {\n      swapPreviewOnAlt: true,\n      colorPickerType:\n        type === \"stroke\" ? \"elementStroke\" : \"elementBackground\",\n      onSelect: (color, event) => {\n        const shouldUpdateStrokeColor =\n          (type === \"background\" && event.altKey) ||\n          (type === \"stroke\" && !event.altKey);\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        if (\n          !selectedElements.length ||\n          this.state.activeTool.type !== \"selection\"\n        ) {\n          if (shouldUpdateStrokeColor) {\n            this.syncActionResult({\n              appState: { ...this.state, currentItemStrokeColor: color },\n              commitToHistory: true,\n            });\n          } else {\n            this.syncActionResult({\n              appState: { ...this.state, currentItemBackgroundColor: color },\n              commitToHistory: true,\n            });\n          }\n        } else {\n          this.updateScene({\n            elements: this.scene.getElementsIncludingDeleted().map((el) => {\n              if (this.state.selectedElementIds[el.id]) {\n                return newElementWith(el, {\n                  [shouldUpdateStrokeColor ? \"strokeColor\" : \"backgroundColor\"]:\n                    color,\n                });\n              }\n              return el;\n            }),\n          });\n        }\n      },\n      keepOpenOnAlt: false,\n    });\n  };\n\n  private syncActionResult = withBatchedUpdates(\n    (actionResult: ActionResult) => {\n      if (this.unmounted || actionResult === false) {\n        return;\n      }\n\n      let editingElement: AppState[\"editingElement\"] | null = null;\n      if (actionResult.elements) {\n        actionResult.elements.forEach((element) => {\n          if (\n            this.state.editingElement?.id === element.id &&\n            this.state.editingElement !== element &&\n            isNonDeletedElement(element)\n          ) {\n            editingElement = element;\n          }\n        });\n        this.scene.replaceAllElements(actionResult.elements);\n        if (actionResult.commitToHistory) {\n          this.history.resumeRecording();\n        }\n      }\n\n      if (actionResult.files) {\n        this.files = actionResult.replaceFiles\n          ? actionResult.files\n          : { ...this.files, ...actionResult.files };\n        this.addNewImagesToImageCache();\n      }\n\n      if (actionResult.appState || editingElement || this.state.contextMenu) {\n        if (actionResult.commitToHistory) {\n          this.history.resumeRecording();\n        }\n\n        let viewModeEnabled = actionResult?.appState?.viewModeEnabled || false;\n        let zenModeEnabled = actionResult?.appState?.zenModeEnabled || false;\n        let gridSize = actionResult?.appState?.gridSize || null;\n        const theme =\n          actionResult?.appState?.theme || this.props.theme || THEME.LIGHT;\n        const name = actionResult?.appState?.name ?? this.state.name;\n        const errorMessage =\n          actionResult?.appState?.errorMessage ?? this.state.errorMessage;\n        if (typeof this.props.viewModeEnabled !== \"undefined\") {\n          viewModeEnabled = this.props.viewModeEnabled;\n        }\n\n        if (typeof this.props.zenModeEnabled !== \"undefined\") {\n          zenModeEnabled = this.props.zenModeEnabled;\n        }\n\n        if (typeof this.props.gridModeEnabled !== \"undefined\") {\n          gridSize = this.props.gridModeEnabled ? GRID_SIZE : null;\n        }\n\n        editingElement =\n          editingElement || actionResult.appState?.editingElement || null;\n\n        if (editingElement?.isDeleted) {\n          editingElement = null;\n        }\n\n        this.setState(\n          (state) => {\n            // using Object.assign instead of spread to fool TS 4.2.2+ into\n            // regarding the resulting type as not containing undefined\n            // (which the following expression will never contain)\n            return Object.assign(actionResult.appState || {}, {\n              // NOTE this will prevent opening context menu using an action\n              // or programmatically from the host, so it will need to be\n              // rewritten later\n              contextMenu: null,\n              editingElement,\n              viewModeEnabled,\n              zenModeEnabled,\n              gridSize,\n              theme,\n              name,\n              errorMessage,\n            });\n          },\n          () => {\n            if (actionResult.syncHistory) {\n              this.history.setCurrentState(\n                this.state,\n                this.scene.getElementsIncludingDeleted(),\n              );\n            }\n          },\n        );\n      }\n    },\n  );\n\n  // Lifecycle\n\n  private onBlur = withBatchedUpdates(() => {\n    isHoldingSpace = false;\n    this.setState({ isBindingEnabled: true });\n  });\n\n  private onUnload = () => {\n    this.onBlur();\n  };\n\n  private disableEvent: EventListener = (event) => {\n    event.preventDefault();\n  };\n\n  private resetHistory = () => {\n    this.history.clear();\n  };\n\n  /**\n   * Resets scene & history.\n   * ! Do not use to clear scene user action !\n   */\n  private resetScene = withBatchedUpdates(\n    (opts?: { resetLoadingState: boolean }) => {\n      this.scene.replaceAllElements([]);\n      this.setState((state) => ({\n        ...getDefaultAppState(),\n        isLoading: opts?.resetLoadingState ? false : state.isLoading,\n        theme: this.state.theme,\n      }));\n      this.resetHistory();\n    },\n  );\n\n  private initializeScene = async () => {\n    if (\"launchQueue\" in window && \"LaunchParams\" in window) {\n      (window as any).launchQueue.setConsumer(\n        async (launchParams: { files: any[] }) => {\n          if (!launchParams.files.length) {\n            return;\n          }\n          const fileHandle = launchParams.files[0];\n          const blob: Blob = await fileHandle.getFile();\n          this.loadFileToCanvas(\n            new File([blob], blob.name || \"\", { type: blob.type }),\n            fileHandle,\n          );\n        },\n      );\n    }\n\n    if (this.props.theme) {\n      this.setState({ theme: this.props.theme });\n    }\n    if (!this.state.isLoading) {\n      this.setState({ isLoading: true });\n    }\n    let initialData = null;\n    try {\n      initialData = (await this.props.initialData) || null;\n      if (initialData?.libraryItems) {\n        this.library\n          .updateLibrary({\n            libraryItems: initialData.libraryItems,\n            merge: true,\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    } catch (error: any) {\n      console.error(error);\n      initialData = {\n        appState: {\n          errorMessage:\n            error.message ||\n            \"Encountered an error during importing or restoring scene data\",\n        },\n      };\n    }\n    const scene = restore(initialData, null, null, { repairBindings: true });\n    scene.appState = {\n      ...scene.appState,\n      theme: this.props.theme || scene.appState.theme,\n      // we're falling back to current (pre-init) state when deciding\n      // whether to open the library, to handle a case where we\n      // update the state outside of initialData (e.g. when loading the app\n      // with a library install link, which should auto-open the library)\n      openSidebar: scene.appState?.openSidebar || this.state.openSidebar,\n      activeTool:\n        scene.appState.activeTool.type === \"image\"\n          ? { ...scene.appState.activeTool, type: \"selection\" }\n          : scene.appState.activeTool,\n      isLoading: false,\n      toast: this.state.toast,\n    };\n    if (initialData?.scrollToContent) {\n      scene.appState = {\n        ...scene.appState,\n        ...calculateScrollCenter(scene.elements, {\n          ...scene.appState,\n          width: this.state.width,\n          height: this.state.height,\n          offsetTop: this.state.offsetTop,\n          offsetLeft: this.state.offsetLeft,\n        }),\n      };\n    }\n    // FontFaceSet loadingdone event we listen on may not always fire\n    // (looking at you Safari), so on init we manually load fonts for current\n    // text elements on canvas, and rerender them once done. This also\n    // seems faster even in browsers that do fire the loadingdone event.\n    this.fonts.loadFontsForElements(scene.elements);\n\n    this.resetHistory();\n    this.syncActionResult({\n      ...scene,\n      commitToHistory: true,\n    });\n  };\n\n  private isMobileBreakpoint = (width: number, height: number) => {\n    return (\n      width < MQ_MAX_WIDTH_PORTRAIT ||\n      (height < MQ_MAX_HEIGHT_LANDSCAPE && width < MQ_MAX_WIDTH_LANDSCAPE)\n    );\n  };\n\n  private refreshViewportBreakpoints = () => {\n    const container = this.excalidrawContainerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const { clientWidth: viewportWidth, clientHeight: viewportHeight } =\n      document.body;\n\n    const prevViewportState = this.device.viewport;\n\n    const nextViewportState = updateObject(prevViewportState, {\n      isLandscape: viewportWidth > viewportHeight,\n      isMobile: this.isMobileBreakpoint(viewportWidth, viewportHeight),\n    });\n\n    if (prevViewportState !== nextViewportState) {\n      this.device = { ...this.device, viewport: nextViewportState };\n      return true;\n    }\n    return false;\n  };\n\n  private refreshEditorBreakpoints = () => {\n    const container = this.excalidrawContainerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const { width: editorWidth, height: editorHeight } =\n      container.getBoundingClientRect();\n\n    const sidebarBreakpoint =\n      this.props.UIOptions.dockedSidebarBreakpoint != null\n        ? this.props.UIOptions.dockedSidebarBreakpoint\n        : MQ_RIGHT_SIDEBAR_MIN_WIDTH;\n\n    const prevEditorState = this.device.editor;\n\n    const nextEditorState = updateObject(prevEditorState, {\n      isMobile: this.isMobileBreakpoint(editorWidth, editorHeight),\n      canFitSidebar: editorWidth > sidebarBreakpoint,\n    });\n\n    if (prevEditorState !== nextEditorState) {\n      this.device = { ...this.device, editor: nextEditorState };\n      return true;\n    }\n    return false;\n  };\n\n  public async componentDidMount() {\n    this.unmounted = false;\n    this.excalidrawContainerValue.container =\n      this.excalidrawContainerRef.current;\n\n    if (import.meta.env.MODE === ENV.TEST || import.meta.env.DEV) {\n      const setState = this.setState.bind(this);\n      Object.defineProperties(window.h, {\n        state: {\n          configurable: true,\n          get: () => {\n            return this.state;\n          },\n        },\n        setState: {\n          configurable: true,\n          value: (...args: Parameters<typeof setState>) => {\n            return this.setState(...args);\n          },\n        },\n        app: {\n          configurable: true,\n          value: this,\n        },\n        history: {\n          configurable: true,\n          value: this.history,\n        },\n      });\n    }\n\n    this.scene.addCallback(this.onSceneUpdated);\n    this.addEventListeners();\n\n    if (this.props.autoFocus && this.excalidrawContainerRef.current) {\n      this.focusContainer();\n    }\n\n    if (\n      // bounding rects don't work in tests so updating\n      // the state on init would result in making the test enviro run\n      // in mobile breakpoint (0 width/height), making everything fail\n      !isTestEnv()\n    ) {\n      this.refreshViewportBreakpoints();\n      this.refreshEditorBreakpoints();\n    }\n\n    if (supportsResizeObserver && this.excalidrawContainerRef.current) {\n      this.resizeObserver = new ResizeObserver(() => {\n        this.refreshEditorBreakpoints();\n        this.updateDOMRect();\n      });\n      this.resizeObserver?.observe(this.excalidrawContainerRef.current);\n    }\n\n    const searchParams = new URLSearchParams(window.location.search.slice(1));\n\n    if (searchParams.has(\"web-share-target\")) {\n      // Obtain a file that was shared via the Web Share Target API.\n      this.restoreFileFromShare();\n    } else {\n      this.updateDOMRect(this.initializeScene);\n    }\n\n    // note that this check seems to always pass in localhost\n    if (isBrave() && !isMeasureTextSupported()) {\n      this.setState({\n        errorMessage: <BraveMeasureTextError />,\n      });\n    }\n  }\n\n  public componentWillUnmount() {\n    this.renderer.destroy();\n    this.scene = new Scene();\n    this.renderer = new Renderer(this.scene);\n    this.files = {};\n    this.imageCache.clear();\n    this.resizeObserver?.disconnect();\n    this.unmounted = true;\n    this.removeEventListeners();\n    this.scene.destroy();\n    this.library.destroy();\n    this.laserTrails.stop();\n    this.eraserTrail.stop();\n    this.onChangeEmitter.clear();\n    ShapeCache.destroy();\n    SnapCache.destroy();\n    clearTimeout(touchTimeout);\n    isSomeElementSelected.clearCache();\n    selectGroupsForSelectedElements.clearCache();\n    touchTimeout = 0;\n    document.documentElement.style.overscrollBehaviorX = \"\";\n  }\n\n  private onResize = withBatchedUpdates(() => {\n    this.scene\n      .getElementsIncludingDeleted()\n      .forEach((element) => ShapeCache.delete(element));\n    this.refreshViewportBreakpoints();\n    this.updateDOMRect();\n    if (!supportsResizeObserver) {\n      this.refreshEditorBreakpoints();\n    }\n    this.setState({});\n  });\n\n  /** generally invoked only if fullscreen was invoked programmatically */\n  private onFullscreenChange = () => {\n    if (\n      // points to the iframe element we fullscreened\n      !document.fullscreenElement &&\n      this.state.activeEmbeddable?.state === \"active\"\n    ) {\n      this.setState({\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  private removeEventListeners() {\n    this.onRemoveEventListenersEmitter.trigger();\n  }\n\n  private addEventListeners() {\n    // remove first as we can add event listeners multiple times\n    this.removeEventListeners();\n\n    // -------------------------------------------------------------------------\n    //                        view+edit mode listeners\n    // -------------------------------------------------------------------------\n\n    if (this.props.handleKeyboardGlobally) {\n      this.onRemoveEventListenersEmitter.once(\n        addEventListener(document, EVENT.KEYDOWN, this.onKeyDown, false),\n      );\n    }\n\n    this.onRemoveEventListenersEmitter.once(\n      addEventListener(\n        this.excalidrawContainerRef.current,\n        EVENT.WHEEL,\n        this.onWheel,\n        { passive: false },\n      ),\n      addEventListener(window, EVENT.MESSAGE, this.onWindowMessage, false),\n      addEventListener(document, EVENT.POINTER_UP, this.removePointer), // #3553\n      addEventListener(document, EVENT.COPY, this.onCopy),\n      addEventListener(document, EVENT.KEYUP, this.onKeyUp, { passive: true }),\n      addEventListener(\n        document,\n        EVENT.MOUSE_MOVE,\n        this.updateCurrentCursorPosition,\n      ),\n      // rerender text elements on font load to fix #637 && #1553\n      addEventListener(document.fonts, \"loadingdone\", (event) => {\n        const loadedFontFaces = (event as FontFaceSetLoadEvent).fontfaces;\n        this.fonts.onFontsLoaded(loadedFontFaces);\n      }),\n      // Safari-only desktop pinch zoom\n      addEventListener(\n        document,\n        EVENT.GESTURE_START,\n        this.onGestureStart as any,\n        false,\n      ),\n      addEventListener(\n        document,\n        EVENT.GESTURE_CHANGE,\n        this.onGestureChange as any,\n        false,\n      ),\n      addEventListener(\n        document,\n        EVENT.GESTURE_END,\n        this.onGestureEnd as any,\n        false,\n      ),\n      addEventListener(window, EVENT.FOCUS, () => {\n        this.maybeCleanupAfterMissingPointerUp(null);\n      }),\n    );\n\n    if (this.state.viewModeEnabled) {\n      return;\n    }\n\n    // -------------------------------------------------------------------------\n    //                        edit-mode listeners only\n    // -------------------------------------------------------------------------\n\n    this.onRemoveEventListenersEmitter.once(\n      addEventListener(\n        document,\n        EVENT.FULLSCREENCHANGE,\n        this.onFullscreenChange,\n      ),\n      addEventListener(document, EVENT.PASTE, this.pasteFromClipboard),\n      addEventListener(document, EVENT.CUT, this.onCut),\n      addEventListener(window, EVENT.RESIZE, this.onResize, false),\n      addEventListener(window, EVENT.UNLOAD, this.onUnload, false),\n      addEventListener(window, EVENT.BLUR, this.onBlur, false),\n      addEventListener(\n        this.excalidrawContainerRef.current,\n        EVENT.DRAG_OVER,\n        this.disableEvent,\n        false,\n      ),\n      addEventListener(\n        this.excalidrawContainerRef.current,\n        EVENT.DROP,\n        this.disableEvent,\n        false,\n      ),\n    );\n\n    if (this.props.detectScroll) {\n      this.onRemoveEventListenersEmitter.once(\n        addEventListener(\n          getNearestScrollableContainer(this.excalidrawContainerRef.current!),\n          EVENT.SCROLL,\n          this.onScroll,\n        ),\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps: AppProps, prevState: AppState) {\n    this.updateEmbeddables();\n    const elements = this.scene.getElementsIncludingDeleted();\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n\n    if (!this.state.showWelcomeScreen && !elements.length) {\n      this.setState({ showWelcomeScreen: true });\n    }\n\n    if (\n      prevProps.UIOptions.dockedSidebarBreakpoint !==\n      this.props.UIOptions.dockedSidebarBreakpoint\n    ) {\n      this.refreshEditorBreakpoints();\n    }\n\n    const hasFollowedPersonLeft =\n      prevState.userToFollow &&\n      !this.state.collaborators.has(prevState.userToFollow.socketId);\n\n    if (hasFollowedPersonLeft) {\n      this.maybeUnfollowRemoteUser();\n    }\n\n    if (\n      prevState.zoom.value !== this.state.zoom.value ||\n      prevState.scrollX !== this.state.scrollX ||\n      prevState.scrollY !== this.state.scrollY\n    ) {\n      this.props?.onScrollChange?.(\n        this.state.scrollX,\n        this.state.scrollY,\n        this.state.zoom,\n      );\n      this.onScrollChangeEmitter.trigger(\n        this.state.scrollX,\n        this.state.scrollY,\n        this.state.zoom,\n      );\n    }\n\n    if (prevState.userToFollow !== this.state.userToFollow) {\n      if (prevState.userToFollow) {\n        this.onUserFollowEmitter.trigger({\n          userToFollow: prevState.userToFollow,\n          action: \"UNFOLLOW\",\n        });\n      }\n\n      if (this.state.userToFollow) {\n        this.onUserFollowEmitter.trigger({\n          userToFollow: this.state.userToFollow,\n          action: \"FOLLOW\",\n        });\n      }\n    }\n\n    if (\n      Object.keys(this.state.selectedElementIds).length &&\n      isEraserActive(this.state)\n    ) {\n      this.setState({\n        activeTool: updateActiveTool(this.state, { type: \"selection\" }),\n      });\n    }\n    if (\n      this.state.activeTool.type === \"eraser\" &&\n      prevState.theme !== this.state.theme\n    ) {\n      setEraserCursor(this.interactiveCanvas, this.state.theme);\n    }\n    // Hide hyperlink popup if shown when element type is not selection\n    if (\n      prevState.activeTool.type === \"selection\" &&\n      this.state.activeTool.type !== \"selection\" &&\n      this.state.showHyperlinkPopup\n    ) {\n      this.setState({ showHyperlinkPopup: false });\n    }\n    if (prevProps.langCode !== this.props.langCode) {\n      this.updateLanguage();\n    }\n\n    if (isEraserActive(prevState) && !isEraserActive(this.state)) {\n      this.eraserTrail.endPath();\n    }\n\n    if (prevProps.viewModeEnabled !== this.props.viewModeEnabled) {\n      this.setState({ viewModeEnabled: !!this.props.viewModeEnabled });\n    }\n\n    if (prevState.viewModeEnabled !== this.state.viewModeEnabled) {\n      this.addEventListeners();\n      this.deselectElements();\n    }\n\n    if (prevProps.zenModeEnabled !== this.props.zenModeEnabled) {\n      this.setState({ zenModeEnabled: !!this.props.zenModeEnabled });\n    }\n\n    if (prevProps.theme !== this.props.theme && this.props.theme) {\n      this.setState({ theme: this.props.theme });\n    }\n\n    if (prevProps.gridModeEnabled !== this.props.gridModeEnabled) {\n      this.setState({\n        gridSize: this.props.gridModeEnabled ? GRID_SIZE : null,\n      });\n    }\n\n    this.excalidrawContainerRef.current?.classList.toggle(\n      \"theme--dark\",\n      this.state.theme === \"dark\",\n    );\n\n    if (\n      this.state.editingLinearElement &&\n      !this.state.selectedElementIds[this.state.editingLinearElement.elementId]\n    ) {\n      // defer so that the commitToHistory flag isn't reset via current update\n      setTimeout(() => {\n        // execute only if the condition still holds when the deferred callback\n        // executes (it can be scheduled multiple times depending on how\n        // many times the component renders)\n        this.state.editingLinearElement &&\n          this.actionManager.executeAction(actionFinalize);\n      });\n    }\n\n    // failsafe in case the state is being updated in incorrect order resulting\n    // in the editingElement being now a deleted element\n    if (this.state.editingElement?.isDeleted) {\n      this.setState({ editingElement: null });\n    }\n\n    if (\n      this.state.selectedLinearElement &&\n      !this.state.selectedElementIds[this.state.selectedLinearElement.elementId]\n    ) {\n      // To make sure `selectedLinearElement` is in sync with `selectedElementIds`, however this shouldn't be needed once\n      // we have a single API to update `selectedElementIds`\n      this.setState({ selectedLinearElement: null });\n    }\n\n    const { multiElement } = prevState;\n    if (\n      prevState.activeTool !== this.state.activeTool &&\n      multiElement != null &&\n      isBindingEnabled(this.state) &&\n      isBindingElement(multiElement, false)\n    ) {\n      maybeBindLinearElement(\n        multiElement,\n        this.state,\n        this.scene,\n        tupleToCoors(\n          LinearElementEditor.getPointAtIndexGlobalCoordinates(\n            multiElement,\n            -1,\n            elementsMap,\n          ),\n        ),\n        elementsMap,\n      );\n    }\n    this.history.record(this.state, elements);\n\n    // Do not notify consumers if we're still loading the scene. Among other\n    // potential issues, this fixes a case where the tab isn't focused during\n    // init, which would trigger onChange with empty elements, which would then\n    // override whatever is in localStorage currently.\n    if (!this.state.isLoading) {\n      this.props.onChange?.(elements, this.state, this.files);\n      this.onChangeEmitter.trigger(elements, this.state, this.files);\n    }\n  }\n\n  private renderInteractiveSceneCallback = ({\n    atLeastOneVisibleElement,\n    scrollBars,\n    elementsMap,\n  }: RenderInteractiveSceneCallback) => {\n    if (scrollBars) {\n      currentScrollBars = scrollBars;\n    }\n    const scrolledOutside =\n      // hide when editing text\n      isTextElement(this.state.editingElement)\n        ? false\n        : !atLeastOneVisibleElement && elementsMap.size > 0;\n    if (this.state.scrolledOutside !== scrolledOutside) {\n      this.setState({ scrolledOutside });\n    }\n\n    this.scheduleImageRefresh();\n  };\n\n  private onScroll = debounce(() => {\n    const { offsetTop, offsetLeft } = this.getCanvasOffsets();\n    this.setState((state) => {\n      if (state.offsetLeft === offsetLeft && state.offsetTop === offsetTop) {\n        return null;\n      }\n      return { offsetTop, offsetLeft };\n    });\n  }, SCROLL_TIMEOUT);\n\n  // Copy/paste\n\n  private onCut = withBatchedUpdates((event: ClipboardEvent) => {\n    const isExcalidrawActive = this.excalidrawContainerRef.current?.contains(\n      document.activeElement,\n    );\n    if (!isExcalidrawActive || isWritableElement(event.target)) {\n      return;\n    }\n    this.actionManager.executeAction(actionCut, \"keyboard\", event);\n    event.preventDefault();\n    event.stopPropagation();\n  });\n\n  private onCopy = withBatchedUpdates((event: ClipboardEvent) => {\n    const isExcalidrawActive = this.excalidrawContainerRef.current?.contains(\n      document.activeElement,\n    );\n    if (!isExcalidrawActive || isWritableElement(event.target)) {\n      return;\n    }\n    this.actionManager.executeAction(actionCopy, \"keyboard\", event);\n    event.preventDefault();\n    event.stopPropagation();\n  });\n\n  private static resetTapTwice() {\n    didTapTwice = false;\n  }\n\n  private onTouchStart = (event: TouchEvent) => {\n    // fix for Apple Pencil Scribble (do not prevent for other devices)\n    if (isIOS) {\n      event.preventDefault();\n    }\n\n    if (!didTapTwice) {\n      didTapTwice = true;\n      clearTimeout(tappedTwiceTimer);\n      tappedTwiceTimer = window.setTimeout(\n        App.resetTapTwice,\n        TAP_TWICE_TIMEOUT,\n      );\n      return;\n    }\n    // insert text only if we tapped twice with a single finger\n    // event.touches.length === 1 will also prevent inserting text when user's zooming\n    if (didTapTwice && event.touches.length === 1) {\n      const touch = event.touches[0];\n      // @ts-ignore\n      this.handleCanvasDoubleClick({\n        clientX: touch.clientX,\n        clientY: touch.clientY,\n      });\n      didTapTwice = false;\n      clearTimeout(tappedTwiceTimer);\n    }\n\n    if (event.touches.length === 2) {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  private onTouchEnd = (event: TouchEvent) => {\n    this.resetContextMenuTimer();\n    if (event.touches.length > 0) {\n      this.setState({\n        previousSelectedElementIds: {},\n        selectedElementIds: makeNextSelectedElementIds(\n          this.state.previousSelectedElementIds,\n          this.state,\n        ),\n      });\n    } else {\n      gesture.pointers.clear();\n    }\n  };\n\n  public pasteFromClipboard = withBatchedUpdates(\n    async (event: ClipboardEvent) => {\n      const isPlainPaste = !!IS_PLAIN_PASTE;\n\n      // #686\n      const target = document.activeElement;\n      const isExcalidrawActive =\n        this.excalidrawContainerRef.current?.contains(target);\n      if (event && !isExcalidrawActive) {\n        return;\n      }\n\n      const elementUnderCursor = document.elementFromPoint(\n        this.lastViewportPosition.x,\n        this.lastViewportPosition.y,\n      );\n      if (\n        event &&\n        (!(elementUnderCursor instanceof HTMLCanvasElement) ||\n          isWritableElement(target))\n      ) {\n        return;\n      }\n\n      const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n        {\n          clientX: this.lastViewportPosition.x,\n          clientY: this.lastViewportPosition.y,\n        },\n        this.state,\n      );\n\n      // must be called in the same frame (thus before any awaits) as the paste\n      // event else some browsers (FF...) will clear the clipboardData\n      // (something something security)\n      let file = event?.clipboardData?.files[0];\n      const data = await parseClipboard(event, isPlainPaste);\n      if (!file && !isPlainPaste) {\n        if (data.mixedContent) {\n          return this.addElementsFromMixedContentPaste(data.mixedContent, {\n            isPlainPaste,\n            sceneX,\n            sceneY,\n          });\n        } else if (data.text) {\n          const string = data.text.trim();\n          if (string.startsWith(\"<svg\") && string.endsWith(\"</svg>\")) {\n            // ignore SVG validation/normalization which will be done during image\n            // initialization\n            file = SVGStringToFile(string);\n          }\n        }\n      }\n\n      // prefer spreadsheet data over image file (MS Office/Libre Office)\n      if (isSupportedImageFile(file) && !data.spreadsheet) {\n        if (!this.isToolSupported(\"image\")) {\n          this.setState({ errorMessage: t(\"errors.imageToolNotSupported\") });\n          return;\n        }\n\n        const imageElement = this.createImageElement({ sceneX, sceneY });\n        this.insertImageElement(imageElement, file);\n        this.initializeImageDimensions(imageElement);\n        this.setState({\n          selectedElementIds: makeNextSelectedElementIds(\n            {\n              [imageElement.id]: true,\n            },\n            this.state,\n          ),\n        });\n\n        return;\n      }\n\n      if (this.props.onPaste) {\n        try {\n          if ((await this.props.onPaste(data, event)) === false) {\n            return;\n          }\n        } catch (error: any) {\n          console.error(error);\n        }\n      }\n\n      if (data.errorMessage) {\n        this.setState({ errorMessage: data.errorMessage });\n      } else if (data.spreadsheet && !isPlainPaste) {\n        this.setState({\n          pasteDialog: {\n            data: data.spreadsheet,\n            shown: true,\n          },\n        });\n      } else if (data.elements) {\n        const elements = (\n          data.programmaticAPI\n            ? convertToExcalidrawElements(\n                data.elements as ExcalidrawElementSkeleton[],\n              )\n            : data.elements\n        ) as readonly ExcalidrawElement[];\n        // TODO remove formatting from elements if isPlainPaste\n        this.addElementsFromPasteOrLibrary({\n          elements,\n          files: data.files || null,\n          position: \"cursor\",\n          retainSeed: isPlainPaste,\n        });\n      } else if (data.text) {\n        const nonEmptyLines = normalizeEOL(data.text)\n          .split(/\\n+/)\n          .map((s) => s.trim())\n          .filter(Boolean);\n\n        const embbeddableUrls = nonEmptyLines\n          .map((str) => maybeParseEmbedSrc(str))\n          .filter((string) => {\n            return (\n              embeddableURLValidator(string, this.props.validateEmbeddable) &&\n              (/^(http|https):\\/\\/[^\\s/$.?#].[^\\s]*$/.test(string) ||\n                getEmbedLink(string)?.type === \"video\")\n            );\n          });\n\n        if (\n          !IS_PLAIN_PASTE &&\n          embbeddableUrls.length > 0 &&\n          // if there were non-embeddable text (lines) mixed in with embeddable\n          // urls, ignore and paste as text\n          embbeddableUrls.length === nonEmptyLines.length\n        ) {\n          const embeddables: NonDeleted<ExcalidrawEmbeddableElement>[] = [];\n          for (const url of embbeddableUrls) {\n            const prevEmbeddable: ExcalidrawEmbeddableElement | undefined =\n              embeddables[embeddables.length - 1];\n            const embeddable = this.insertEmbeddableElement({\n              sceneX: prevEmbeddable\n                ? prevEmbeddable.x + prevEmbeddable.width + 20\n                : sceneX,\n              sceneY,\n              link: normalizeLink(url),\n            });\n            if (embeddable) {\n              embeddables.push(embeddable);\n            }\n          }\n          if (embeddables.length) {\n            this.setState({\n              selectedElementIds: Object.fromEntries(\n                embeddables.map((embeddable) => [embeddable.id, true]),\n              ),\n            });\n          }\n          return;\n        }\n        this.addTextFromPaste(data.text, isPlainPaste);\n      }\n      this.setActiveTool({ type: \"selection\" });\n      event?.preventDefault();\n    },\n  );\n\n  addElementsFromPasteOrLibrary = (opts: {\n    elements: readonly ExcalidrawElement[];\n    files: BinaryFiles | null;\n    position: { clientX: number; clientY: number } | \"cursor\" | \"center\";\n    retainSeed?: boolean;\n    fitToContent?: boolean;\n  }) => {\n    const elements = restoreElements(opts.elements, null, undefined);\n    const [minX, minY, maxX, maxY] = getCommonBounds(elements);\n\n    const elementsCenterX = distance(minX, maxX) / 2;\n    const elementsCenterY = distance(minY, maxY) / 2;\n\n    const clientX =\n      typeof opts.position === \"object\"\n        ? opts.position.clientX\n        : opts.position === \"cursor\"\n        ? this.lastViewportPosition.x\n        : this.state.width / 2 + this.state.offsetLeft;\n    const clientY =\n      typeof opts.position === \"object\"\n        ? opts.position.clientY\n        : opts.position === \"cursor\"\n        ? this.lastViewportPosition.y\n        : this.state.height / 2 + this.state.offsetTop;\n\n    const { x, y } = viewportCoordsToSceneCoords(\n      { clientX, clientY },\n      this.state,\n    );\n\n    const dx = x - elementsCenterX;\n    const dy = y - elementsCenterY;\n\n    const [gridX, gridY] = getGridPoint(dx, dy, this.state.gridSize);\n\n    const newElements = duplicateElements(\n      elements.map((element) => {\n        return newElementWith(element, {\n          x: element.x + gridX - minX,\n          y: element.y + gridY - minY,\n        });\n      }),\n      {\n        randomizeSeed: !opts.retainSeed,\n      },\n    );\n\n    const allElements = [\n      ...this.scene.getElementsIncludingDeleted(),\n      ...newElements,\n    ];\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({ x, y });\n\n    if (topLayerFrame) {\n      const eligibleElements = filterElementsEligibleAsFrameChildren(\n        newElements,\n        topLayerFrame,\n      );\n      addElementsToFrame(allElements, eligibleElements, topLayerFrame);\n    }\n\n    this.scene.replaceAllElements(allElements);\n\n    newElements.forEach((newElement) => {\n      if (isTextElement(newElement) && isBoundToContainer(newElement)) {\n        const container = getContainerElement(\n          newElement,\n          this.scene.getElementsMapIncludingDeleted(),\n        );\n        redrawTextBoundingBox(\n          newElement,\n          container,\n          this.scene.getElementsMapIncludingDeleted(),\n        );\n      }\n    });\n\n    if (opts.files) {\n      this.files = { ...this.files, ...opts.files };\n    }\n\n    this.history.resumeRecording();\n\n    const nextElementsToSelect =\n      excludeElementsInFramesFromSelection(newElements);\n\n    this.setState(\n      {\n        ...this.state,\n        // keep sidebar (presumably the library) open if it's docked and\n        // can fit.\n        //\n        // Note, we should close the sidebar only if we're dropping items\n        // from library, not when pasting from clipboard. Alas.\n        openSidebar:\n          this.state.openSidebar &&\n          this.device.editor.canFitSidebar &&\n          jotaiStore.get(isSidebarDockedAtom)\n            ? this.state.openSidebar\n            : null,\n        ...selectGroupsForSelectedElements(\n          {\n            editingGroupId: null,\n            selectedElementIds: nextElementsToSelect.reduce(\n              (acc: Record<ExcalidrawElement[\"id\"], true>, element) => {\n                if (!isBoundToContainer(element)) {\n                  acc[element.id] = true;\n                }\n                return acc;\n              },\n              {},\n            ),\n          },\n          this.scene.getNonDeletedElements(),\n          this.state,\n          this,\n        ),\n      },\n      () => {\n        if (opts.files) {\n          this.addNewImagesToImageCache();\n        }\n      },\n    );\n    this.setActiveTool({ type: \"selection\" });\n\n    if (opts.fitToContent) {\n      this.scrollToContent(newElements, {\n        fitToContent: true,\n      });\n    }\n  };\n\n  // TODO rewrite this to paste both text & images at the same time if\n  // pasted data contains both\n  private async addElementsFromMixedContentPaste(\n    mixedContent: PastedMixedContent,\n    {\n      isPlainPaste,\n      sceneX,\n      sceneY,\n    }: { isPlainPaste: boolean; sceneX: number; sceneY: number },\n  ) {\n    if (\n      !isPlainPaste &&\n      mixedContent.some((node) => node.type === \"imageUrl\") &&\n      this.isToolSupported(\"image\")\n    ) {\n      const imageURLs = mixedContent\n        .filter((node) => node.type === \"imageUrl\")\n        .map((node) => node.value);\n      const responses = await Promise.all(\n        imageURLs.map(async (url) => {\n          try {\n            return { file: await ImageURLToFile(url) };\n          } catch (error: any) {\n            return { errorMessage: error.message as string };\n          }\n        }),\n      );\n      let y = sceneY;\n      let firstImageYOffsetDone = false;\n      const nextSelectedIds: Record<ExcalidrawElement[\"id\"], true> = {};\n      for (const response of responses) {\n        if (response.file) {\n          const imageElement = this.createImageElement({\n            sceneX,\n            sceneY: y,\n          });\n\n          const initializedImageElement = await this.insertImageElement(\n            imageElement,\n            response.file,\n          );\n          if (initializedImageElement) {\n            // vertically center first image in the batch\n            if (!firstImageYOffsetDone) {\n              firstImageYOffsetDone = true;\n              y -= initializedImageElement.height / 2;\n            }\n            // hack to reset the `y` coord because we vertically center during\n            // insertImageElement\n            mutateElement(initializedImageElement, { y }, false);\n\n            y = imageElement.y + imageElement.height + 25;\n\n            nextSelectedIds[imageElement.id] = true;\n          }\n        }\n      }\n\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds(\n          nextSelectedIds,\n          this.state,\n        ),\n      });\n\n      const error = responses.find((response) => !!response.errorMessage);\n      if (error && error.errorMessage) {\n        this.setState({ errorMessage: error.errorMessage });\n      }\n    } else {\n      const textNodes = mixedContent.filter((node) => node.type === \"text\");\n      if (textNodes.length) {\n        this.addTextFromPaste(\n          textNodes.map((node) => node.value).join(\"\\n\\n\"),\n          isPlainPaste,\n        );\n      }\n    }\n  }\n\n  private addTextFromPaste(text: string, isPlainPaste = false) {\n    const { x, y } = viewportCoordsToSceneCoords(\n      {\n        clientX: this.lastViewportPosition.x,\n        clientY: this.lastViewportPosition.y,\n      },\n      this.state,\n    );\n\n    const textElementProps = {\n      x,\n      y,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roundness: null,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      text,\n      fontSize: this.state.currentItemFontSize,\n      fontFamily: this.state.currentItemFontFamily,\n      textAlign: this.state.currentItemTextAlign,\n      verticalAlign: DEFAULT_VERTICAL_ALIGN,\n      locked: false,\n    };\n\n    const LINE_GAP = 10;\n    let currentY = y;\n\n    const lines = isPlainPaste ? [text] : text.split(\"\\n\");\n    const textElements = lines.reduce(\n      (acc: ExcalidrawTextElement[], line, idx) => {\n        const text = line.trim();\n\n        const lineHeight = getDefaultLineHeight(textElementProps.fontFamily);\n        if (text.length) {\n          const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n            x,\n            y: currentY,\n          });\n\n          const element = newTextElement({\n            ...textElementProps,\n            x,\n            y: currentY,\n            text,\n            lineHeight,\n            frameId: topLayerFrame ? topLayerFrame.id : null,\n          });\n          acc.push(element);\n          currentY += element.height + LINE_GAP;\n        } else {\n          const prevLine = lines[idx - 1]?.trim();\n          // add paragraph only if previous line was not empty, IOW don't add\n          // more than one empty line\n          if (prevLine) {\n            currentY +=\n              getLineHeightInPx(textElementProps.fontSize, lineHeight) +\n              LINE_GAP;\n          }\n        }\n\n        return acc;\n      },\n      [],\n    );\n\n    if (textElements.length === 0) {\n      return;\n    }\n\n    const frameId = textElements[0].frameId;\n\n    if (frameId) {\n      this.scene.insertElementsAtIndex(\n        textElements,\n        this.scene.getElementIndex(frameId),\n      );\n    } else {\n      this.scene.replaceAllElements([\n        ...this.scene.getElementsIncludingDeleted(),\n        ...textElements,\n      ]);\n    }\n\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds(\n        Object.fromEntries(textElements.map((el) => [el.id, true])),\n        this.state,\n      ),\n    });\n\n    if (\n      !isPlainPaste &&\n      textElements.length > 1 &&\n      PLAIN_PASTE_TOAST_SHOWN === false &&\n      !this.device.editor.isMobile\n    ) {\n      this.setToast({\n        message: t(\"toast.pasteAsSingleElement\", {\n          shortcut: getShortcutKey(\"CtrlOrCmd+Shift+V\"),\n        }),\n        duration: 5000,\n      });\n      PLAIN_PASTE_TOAST_SHOWN = true;\n    }\n\n    this.history.resumeRecording();\n  }\n\n  setAppState: React.Component<any, AppState>[\"setState\"] = (\n    state,\n    callback,\n  ) => {\n    this.setState(state, callback);\n  };\n\n  removePointer = (event: React.PointerEvent<HTMLElement> | PointerEvent) => {\n    if (touchTimeout) {\n      this.resetContextMenuTimer();\n    }\n\n    gesture.pointers.delete(event.pointerId);\n  };\n\n  toggleLock = (source: \"keyboard\" | \"ui\" = \"ui\") => {\n    if (!this.state.activeTool.locked) {\n      trackEvent(\n        \"toolbar\",\n        \"toggleLock\",\n        `${source} (${this.device.editor.isMobile ? \"mobile\" : \"desktop\"})`,\n      );\n    }\n    this.setState((prevState) => {\n      return {\n        activeTool: {\n          ...prevState.activeTool,\n          ...updateActiveTool(\n            this.state,\n            prevState.activeTool.locked\n              ? { type: \"selection\" }\n              : prevState.activeTool,\n          ),\n          locked: !prevState.activeTool.locked,\n        },\n      };\n    });\n  };\n\n  updateFrameRendering = (\n    opts:\n      | Partial<AppState[\"frameRendering\"]>\n      | ((\n          prevState: AppState[\"frameRendering\"],\n        ) => Partial<AppState[\"frameRendering\"]>),\n  ) => {\n    this.setState((prevState) => {\n      const next =\n        typeof opts === \"function\" ? opts(prevState.frameRendering) : opts;\n      return {\n        frameRendering: {\n          enabled: next?.enabled ?? prevState.frameRendering.enabled,\n          clip: next?.clip ?? prevState.frameRendering.clip,\n          name: next?.name ?? prevState.frameRendering.name,\n          outline: next?.outline ?? prevState.frameRendering.outline,\n        },\n      };\n    });\n  };\n\n  togglePenMode = (force: boolean | null) => {\n    this.setState((prevState) => {\n      return {\n        penMode: force ?? !prevState.penMode,\n        penDetected: true,\n      };\n    });\n  };\n\n  onHandToolToggle = () => {\n    this.actionManager.executeAction(actionToggleHandTool);\n  };\n\n  /**\n   * Zooms on canvas viewport center\n   */\n  zoomCanvas = (\n    /** decimal fraction between 0.1 (10% zoom) and 30 (3000% zoom) */\n    value: number,\n  ) => {\n    this.setState({\n      ...getStateForZoom(\n        {\n          viewportX: this.state.width / 2 + this.state.offsetLeft,\n          viewportY: this.state.height / 2 + this.state.offsetTop,\n          nextZoom: getNormalizedZoom(value),\n        },\n        this.state,\n      ),\n    });\n  };\n\n  private cancelInProgressAnimation: (() => void) | null = null;\n\n  scrollToContent = (\n    target:\n      | ExcalidrawElement\n      | readonly ExcalidrawElement[] = this.scene.getNonDeletedElements(),\n    opts?:\n      | {\n          fitToContent?: boolean;\n          fitToViewport?: never;\n          viewportZoomFactor?: never;\n          animate?: boolean;\n          duration?: number;\n        }\n      | {\n          fitToContent?: never;\n          fitToViewport?: boolean;\n          /** when fitToViewport=true, how much screen should the content cover,\n           * between 0.1 (10%) and 1 (100%)\n           */\n          viewportZoomFactor?: number;\n          animate?: boolean;\n          duration?: number;\n        },\n  ) => {\n    this.cancelInProgressAnimation?.();\n\n    // convert provided target into ExcalidrawElement[] if necessary\n    const targetElements = Array.isArray(target) ? target : [target];\n\n    let zoom = this.state.zoom;\n    let scrollX = this.state.scrollX;\n    let scrollY = this.state.scrollY;\n\n    if (opts?.fitToContent || opts?.fitToViewport) {\n      const { appState } = zoomToFit({\n        targetElements,\n        appState: this.state,\n        fitToViewport: !!opts?.fitToViewport,\n        viewportZoomFactor: opts?.viewportZoomFactor,\n      });\n      zoom = appState.zoom;\n      scrollX = appState.scrollX;\n      scrollY = appState.scrollY;\n    } else {\n      // compute only the viewport location, without any zoom adjustment\n      const scroll = calculateScrollCenter(targetElements, this.state);\n      scrollX = scroll.scrollX;\n      scrollY = scroll.scrollY;\n    }\n\n    // when animating, we use RequestAnimationFrame to prevent the animation\n    // from slowing down other processes\n    if (opts?.animate) {\n      const origScrollX = this.state.scrollX;\n      const origScrollY = this.state.scrollY;\n      const origZoom = this.state.zoom.value;\n\n      const cancel = easeToValuesRAF({\n        fromValues: {\n          scrollX: origScrollX,\n          scrollY: origScrollY,\n          zoom: origZoom,\n        },\n        toValues: { scrollX, scrollY, zoom: zoom.value },\n        interpolateValue: (from, to, progress, key) => {\n          // for zoom, use different easing\n          if (key === \"zoom\") {\n            return from * Math.pow(to / from, easeOut(progress));\n          }\n          // handle using default\n          return undefined;\n        },\n        onStep: ({ scrollX, scrollY, zoom }) => {\n          this.setState({\n            scrollX,\n            scrollY,\n            zoom: { value: zoom },\n          });\n        },\n        onStart: () => {\n          this.setState({ shouldCacheIgnoreZoom: true });\n        },\n        onEnd: () => {\n          this.setState({ shouldCacheIgnoreZoom: false });\n        },\n        onCancel: () => {\n          this.setState({ shouldCacheIgnoreZoom: false });\n        },\n        duration: opts?.duration ?? 500,\n      });\n\n      this.cancelInProgressAnimation = () => {\n        cancel();\n        this.cancelInProgressAnimation = null;\n      };\n    } else {\n      this.setState({ scrollX, scrollY, zoom });\n    }\n  };\n\n  private maybeUnfollowRemoteUser = () => {\n    if (this.state.userToFollow) {\n      this.setState({ userToFollow: null });\n    }\n  };\n\n  /** use when changing scrollX/scrollY/zoom based on user interaction */\n  private translateCanvas: React.Component<any, AppState>[\"setState\"] = (\n    state,\n  ) => {\n    this.cancelInProgressAnimation?.();\n    this.maybeUnfollowRemoteUser();\n    this.setState(state);\n  };\n\n  setToast = (\n    toast: {\n      message: string;\n      closable?: boolean;\n      duration?: number;\n    } | null,\n  ) => {\n    this.setState({ toast });\n  };\n\n  restoreFileFromShare = async () => {\n    try {\n      const webShareTargetCache = await caches.open(\"web-share-target\");\n\n      const response = await webShareTargetCache.match(\"shared-file\");\n      if (response) {\n        const blob = await response.blob();\n        const file = new File([blob], blob.name || \"\", { type: blob.type });\n        this.loadFileToCanvas(file, null);\n        await webShareTargetCache.delete(\"shared-file\");\n        window.history.replaceState(null, APP_NAME, window.location.pathname);\n      }\n    } catch (error: any) {\n      this.setState({ errorMessage: error.message });\n    }\n  };\n\n  /** adds supplied files to existing files in the appState */\n  public addFiles: ExcalidrawImperativeAPI[\"addFiles\"] = withBatchedUpdates(\n    (files) => {\n      const filesMap = files.reduce((acc, fileData) => {\n        acc.set(fileData.id, fileData);\n        return acc;\n      }, new Map<FileId, BinaryFileData>());\n\n      this.files = { ...this.files, ...Object.fromEntries(filesMap) };\n\n      this.scene.getNonDeletedElements().forEach((element) => {\n        if (\n          isInitializedImageElement(element) &&\n          filesMap.has(element.fileId)\n        ) {\n          this.imageCache.delete(element.fileId);\n          ShapeCache.delete(element);\n        }\n      });\n      this.scene.informMutation();\n\n      this.addNewImagesToImageCache();\n    },\n  );\n\n  public updateScene = withBatchedUpdates(\n    <K extends keyof AppState>(sceneData: {\n      elements?: SceneData[\"elements\"];\n      appState?: Pick<AppState, K> | null;\n      collaborators?: SceneData[\"collaborators\"];\n      commitToHistory?: SceneData[\"commitToHistory\"];\n    }) => {\n      if (sceneData.commitToHistory) {\n        this.history.resumeRecording();\n      }\n\n      if (sceneData.appState) {\n        this.setState(sceneData.appState);\n      }\n\n      if (sceneData.elements) {\n        this.scene.replaceAllElements(sceneData.elements);\n      }\n\n      if (sceneData.collaborators) {\n        this.setState({ collaborators: sceneData.collaborators });\n      }\n    },\n  );\n\n  private onSceneUpdated = () => {\n    this.setState({});\n  };\n\n  /**\n   * @returns whether the menu was toggled on or off\n   */\n  public toggleSidebar = ({\n    name,\n    tab,\n    force,\n  }: {\n    name: SidebarName;\n    tab?: SidebarTabName;\n    force?: boolean;\n  }): boolean => {\n    let nextName;\n    if (force === undefined) {\n      nextName = this.state.openSidebar?.name === name ? null : name;\n    } else {\n      nextName = force ? name : null;\n    }\n    this.setState({ openSidebar: nextName ? { name: nextName, tab } : null });\n\n    return !!nextName;\n  };\n\n  private updateCurrentCursorPosition = withBatchedUpdates(\n    (event: MouseEvent) => {\n      this.lastViewportPosition.x = event.clientX;\n      this.lastViewportPosition.y = event.clientY;\n    },\n  );\n\n  // Input handling\n  private onKeyDown = withBatchedUpdates(\n    (event: React.KeyboardEvent | KeyboardEvent) => {\n      // normalize `event.key` when CapsLock is pressed #2372\n\n      if (\n        \"Proxy\" in window &&\n        ((!event.shiftKey && /^[A-Z]$/.test(event.key)) ||\n          (event.shiftKey && /^[a-z]$/.test(event.key)))\n      ) {\n        event = new Proxy(event, {\n          get(ev: any, prop) {\n            const value = ev[prop];\n            if (typeof value === \"function\") {\n              // fix for Proxies hijacking `this`\n              return value.bind(ev);\n            }\n            return prop === \"key\"\n              ? // CapsLock inverts capitalization based on ShiftKey, so invert\n                // it back\n                event.shiftKey\n                ? ev.key.toUpperCase()\n                : ev.key.toLowerCase()\n              : value;\n          },\n        });\n      }\n\n      if (event[KEYS.CTRL_OR_CMD] && event.key.toLowerCase() === KEYS.V) {\n        IS_PLAIN_PASTE = event.shiftKey;\n        clearTimeout(IS_PLAIN_PASTE_TIMER);\n        // reset (100ms to be safe that we it runs after the ensuing\n        // paste event). Though, technically unnecessary to reset since we\n        // (re)set the flag before each paste event.\n        IS_PLAIN_PASTE_TIMER = window.setTimeout(() => {\n          IS_PLAIN_PASTE = false;\n        }, 100);\n      }\n\n      // prevent browser zoom in input fields\n      if (event[KEYS.CTRL_OR_CMD] && isWritableElement(event.target)) {\n        if (event.code === CODES.MINUS || event.code === CODES.EQUAL) {\n          event.preventDefault();\n          return;\n        }\n      }\n\n      // bail if\n      if (\n        // inside an input\n        (isWritableElement(event.target) &&\n          // unless pressing escape (finalize action)\n          event.key !== KEYS.ESCAPE) ||\n        // or unless using arrows (to move between buttons)\n        (isArrowKey(event.key) && isInputLike(event.target))\n      ) {\n        return;\n      }\n\n      if (event.key === KEYS.QUESTION_MARK) {\n        this.setState({\n          openDialog: { name: \"help\" },\n        });\n        return;\n      } else if (\n        event.key.toLowerCase() === KEYS.E &&\n        event.shiftKey &&\n        event[KEYS.CTRL_OR_CMD]\n      ) {\n        event.preventDefault();\n        this.setState({ openDialog: { name: \"imageExport\" } });\n        return;\n      }\n\n      if (event.key === KEYS.PAGE_UP || event.key === KEYS.PAGE_DOWN) {\n        let offset =\n          (event.shiftKey ? this.state.width : this.state.height) /\n          this.state.zoom.value;\n        if (event.key === KEYS.PAGE_DOWN) {\n          offset = -offset;\n        }\n        if (event.shiftKey) {\n          this.translateCanvas((state) => ({\n            scrollX: state.scrollX + offset,\n          }));\n        } else {\n          this.translateCanvas((state) => ({\n            scrollY: state.scrollY + offset,\n          }));\n        }\n      }\n\n      if (this.actionManager.handleKeyDown(event)) {\n        return;\n      }\n\n      if (this.state.viewModeEnabled) {\n        return;\n      }\n\n      if (event[KEYS.CTRL_OR_CMD] && this.state.isBindingEnabled) {\n        this.setState({ isBindingEnabled: false });\n      }\n\n      if (isArrowKey(event.key)) {\n        const step =\n          (this.state.gridSize &&\n            (event.shiftKey\n              ? ELEMENT_TRANSLATE_AMOUNT\n              : this.state.gridSize)) ||\n          (event.shiftKey\n            ? ELEMENT_SHIFT_TRANSLATE_AMOUNT\n            : ELEMENT_TRANSLATE_AMOUNT);\n\n        let offsetX = 0;\n        let offsetY = 0;\n\n        if (event.key === KEYS.ARROW_LEFT) {\n          offsetX = -step;\n        } else if (event.key === KEYS.ARROW_RIGHT) {\n          offsetX = step;\n        } else if (event.key === KEYS.ARROW_UP) {\n          offsetY = -step;\n        } else if (event.key === KEYS.ARROW_DOWN) {\n          offsetY = step;\n        }\n\n        const selectedElements = this.scene.getSelectedElements({\n          selectedElementIds: this.state.selectedElementIds,\n          includeBoundTextElement: true,\n          includeElementsInFrames: true,\n        });\n\n        selectedElements.forEach((element) => {\n          mutateElement(element, {\n            x: element.x + offsetX,\n            y: element.y + offsetY,\n          });\n\n          updateBoundElements(element, this.scene.getNonDeletedElementsMap(), {\n            simultaneouslyUpdated: selectedElements,\n          });\n        });\n\n        this.maybeSuggestBindingForAll(selectedElements);\n\n        event.preventDefault();\n      } else if (event.key === KEYS.ENTER) {\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        if (selectedElements.length === 1) {\n          const selectedElement = selectedElements[0];\n          if (event[KEYS.CTRL_OR_CMD]) {\n            if (isLinearElement(selectedElement)) {\n              if (\n                !this.state.editingLinearElement ||\n                this.state.editingLinearElement.elementId !==\n                  selectedElements[0].id\n              ) {\n                this.history.resumeRecording();\n                this.setState({\n                  editingLinearElement: new LinearElementEditor(\n                    selectedElement,\n                  ),\n                });\n              }\n            }\n          } else if (\n            isTextElement(selectedElement) ||\n            isValidTextContainer(selectedElement)\n          ) {\n            let container;\n            if (!isTextElement(selectedElement)) {\n              container = selectedElement as ExcalidrawTextContainer;\n            }\n            const midPoint = getContainerCenter(\n              selectedElement,\n              this.state,\n              this.scene.getNonDeletedElementsMap(),\n            );\n            const sceneX = midPoint.x;\n            const sceneY = midPoint.y;\n            this.startTextEditing({\n              sceneX,\n              sceneY,\n              container,\n            });\n            event.preventDefault();\n            return;\n          } else if (isFrameLikeElement(selectedElement)) {\n            this.setState({\n              editingFrame: selectedElement.id,\n            });\n          }\n        }\n      } else if (\n        !event.ctrlKey &&\n        !event.altKey &&\n        !event.metaKey &&\n        this.state.draggingElement === null\n      ) {\n        const shape = findShapeByKey(event.key);\n        if (shape) {\n          if (this.state.activeTool.type !== shape) {\n            trackEvent(\n              \"toolbar\",\n              shape,\n              `keyboard (${\n                this.device.editor.isMobile ? \"mobile\" : \"desktop\"\n              })`,\n            );\n          }\n          this.setActiveTool({ type: shape });\n          event.stopPropagation();\n        } else if (event.key === KEYS.Q) {\n          this.toggleLock(\"keyboard\");\n          event.stopPropagation();\n        }\n      }\n      if (event.key === KEYS.SPACE && gesture.pointers.size === 0) {\n        isHoldingSpace = true;\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n        event.preventDefault();\n      }\n\n      if (\n        (event.key === KEYS.G || event.key === KEYS.S) &&\n        !event.altKey &&\n        !event[KEYS.CTRL_OR_CMD]\n      ) {\n        const selectedElements = this.scene.getSelectedElements(this.state);\n        if (\n          this.state.activeTool.type === \"selection\" &&\n          !selectedElements.length\n        ) {\n          return;\n        }\n\n        if (\n          event.key === KEYS.G &&\n          (hasBackground(this.state.activeTool.type) ||\n            selectedElements.some((element) => hasBackground(element.type)))\n        ) {\n          this.setState({ openPopup: \"elementBackground\" });\n          event.stopPropagation();\n        }\n        if (event.key === KEYS.S) {\n          this.setState({ openPopup: \"elementStroke\" });\n          event.stopPropagation();\n        }\n      }\n\n      if (event.key === KEYS.K && !event.altKey && !event[KEYS.CTRL_OR_CMD]) {\n        if (this.state.activeTool.type === \"laser\") {\n          this.setActiveTool({ type: \"selection\" });\n        } else {\n          this.setActiveTool({ type: \"laser\" });\n        }\n        return;\n      }\n\n      if (\n        event[KEYS.CTRL_OR_CMD] &&\n        (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE)\n      ) {\n        jotaiStore.set(activeConfirmDialogAtom, \"clearCanvas\");\n      }\n\n      // eye dropper\n      // -----------------------------------------------------------------------\n      const lowerCased = event.key.toLocaleLowerCase();\n      const isPickingStroke = lowerCased === KEYS.S && event.shiftKey;\n      const isPickingBackground =\n        event.key === KEYS.I || (lowerCased === KEYS.G && event.shiftKey);\n\n      if (isPickingStroke || isPickingBackground) {\n        this.openEyeDropper({\n          type: isPickingStroke ? \"stroke\" : \"background\",\n        });\n      }\n      // -----------------------------------------------------------------------\n    },\n  );\n\n  private onWheel = withBatchedUpdates((event: WheelEvent) => {\n    // prevent browser pinch zoom on DOM elements\n    if (!(event.target instanceof HTMLCanvasElement) && event.ctrlKey) {\n      event.preventDefault();\n    }\n  });\n\n  private onKeyUp = withBatchedUpdates((event: KeyboardEvent) => {\n    if (event.key === KEYS.SPACE) {\n      if (this.state.viewModeEnabled) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n      } else if (this.state.activeTool.type === \"selection\") {\n        resetCursor(this.interactiveCanvas);\n      } else {\n        setCursorForShape(this.interactiveCanvas, this.state);\n        this.setState({\n          selectedElementIds: makeNextSelectedElementIds({}, this.state),\n          selectedGroupIds: {},\n          editingGroupId: null,\n          activeEmbeddable: null,\n        });\n      }\n      isHoldingSpace = false;\n    }\n    if (!event[KEYS.CTRL_OR_CMD] && !this.state.isBindingEnabled) {\n      this.setState({ isBindingEnabled: true });\n    }\n    if (isArrowKey(event.key)) {\n      const selectedElements = this.scene.getSelectedElements(this.state);\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      isBindingEnabled(this.state)\n        ? bindOrUnbindSelectedElements(\n            selectedElements,\n            this.scene.getNonDeletedElements(),\n            elementsMap,\n          )\n        : unbindLinearElements(selectedElements, elementsMap);\n      this.setState({ suggestedBindings: [] });\n    }\n  });\n\n  // We purposely widen the `tool` type so this helper can be called with\n  // any tool without having to type check it\n  private isToolSupported = <T extends ToolType | \"custom\">(tool: T) => {\n    return (\n      this.props.UIOptions.tools?.[\n        tool as Extract<T, keyof AppProps[\"UIOptions\"][\"tools\"]>\n      ] !== false\n    );\n  };\n\n  setActiveTool = (\n    tool: (\n      | (\n          | { type: Exclude<ToolType, \"image\"> }\n          | {\n              type: Extract<ToolType, \"image\">;\n              insertOnCanvasDirectly?: boolean;\n            }\n        )\n      | { type: \"custom\"; customType: string }\n    ) & { locked?: boolean },\n  ) => {\n    if (!this.isToolSupported(tool.type)) {\n      console.warn(\n        `\"${tool.type}\" tool is disabled via \"UIOptions.canvasActions.tools.${tool.type}\"`,\n      );\n      return;\n    }\n\n    const nextActiveTool = updateActiveTool(this.state, tool);\n    if (nextActiveTool.type === \"hand\") {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n    } else if (!isHoldingSpace) {\n      setCursorForShape(this.interactiveCanvas, this.state);\n    }\n    if (isToolIcon(document.activeElement)) {\n      this.focusContainer();\n    }\n    if (!isLinearElementType(nextActiveTool.type)) {\n      this.setState({ suggestedBindings: [] });\n    }\n    if (nextActiveTool.type === \"image\") {\n      this.onImageAction({\n        insertOnCanvasDirectly:\n          (tool.type === \"image\" && tool.insertOnCanvasDirectly) ?? false,\n      });\n    }\n\n    this.setState((prevState) => {\n      const commonResets = {\n        snapLines: prevState.snapLines.length ? [] : prevState.snapLines,\n        originSnapOffset: null,\n        activeEmbeddable: null,\n      } as const;\n      if (nextActiveTool.type !== \"selection\") {\n        return {\n          ...prevState,\n          activeTool: nextActiveTool,\n          selectedElementIds: makeNextSelectedElementIds({}, prevState),\n          selectedGroupIds: makeNextSelectedElementIds({}, prevState),\n          editingGroupId: null,\n          multiElement: null,\n          ...commonResets,\n        };\n      }\n      return {\n        ...prevState,\n        activeTool: nextActiveTool,\n        ...commonResets,\n      };\n    });\n  };\n\n  setOpenDialog = (dialogType: AppState[\"openDialog\"]) => {\n    this.setState({ openDialog: dialogType });\n  };\n\n  private setCursor = (cursor: string) => {\n    setCursor(this.interactiveCanvas, cursor);\n  };\n\n  private resetCursor = () => {\n    resetCursor(this.interactiveCanvas);\n  };\n  /**\n   * returns whether user is making a gesture with >= 2 fingers (points)\n   * on o touch screen (not on a trackpad). Currently only relates to Darwin\n   * (iOS/iPadOS,MacOS), but may work on other devices in the future if\n   * GestureEvent is standardized.\n   */\n  private isTouchScreenMultiTouchGesture = () => {\n    // we don't want to deselect when using trackpad, and multi-point gestures\n    // only work on touch screens, so checking for >= pointers means we're on a\n    // touchscreen\n    return gesture.pointers.size >= 2;\n  };\n\n  public getName = () => {\n    return (\n      this.state.name ||\n      this.props.name ||\n      `${t(\"labels.untitled\")}-${getDateTime()}`\n    );\n  };\n\n  // fires only on Safari\n  private onGestureStart = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n\n    // we only want to deselect on touch screens because user may have selected\n    // elements by mistake while zooming\n    if (this.isTouchScreenMultiTouchGesture()) {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        activeEmbeddable: null,\n      });\n    }\n    gesture.initialScale = this.state.zoom.value;\n  });\n\n  // fires only on Safari\n  private onGestureChange = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n\n    // onGestureChange only has zoom factor but not the center.\n    // If we're on iPad or iPhone, then we recognize multi-touch and will\n    // zoom in at the right location in the touchmove handler\n    // (handleCanvasPointerMove).\n    //\n    // On Macbook trackpad, we don't have those events so will zoom in at the\n    // current location instead.\n    //\n    // As such, bail from this handler on touch devices.\n    if (this.isTouchScreenMultiTouchGesture()) {\n      return;\n    }\n\n    const initialScale = gesture.initialScale;\n    if (initialScale) {\n      this.setState((state) => ({\n        ...getStateForZoom(\n          {\n            viewportX: this.lastViewportPosition.x,\n            viewportY: this.lastViewportPosition.y,\n            nextZoom: getNormalizedZoom(initialScale * event.scale),\n          },\n          state,\n        ),\n      }));\n    }\n  });\n\n  // fires only on Safari\n  private onGestureEnd = withBatchedUpdates((event: GestureEvent) => {\n    event.preventDefault();\n    // reselect elements only on touch screens (see onGestureStart)\n    if (this.isTouchScreenMultiTouchGesture()) {\n      this.setState({\n        previousSelectedElementIds: {},\n        selectedElementIds: makeNextSelectedElementIds(\n          this.state.previousSelectedElementIds,\n          this.state,\n        ),\n      });\n    }\n    gesture.initialScale = null;\n  });\n\n  private handleTextWysiwyg(\n    element: ExcalidrawTextElement,\n    {\n      isExistingElement = false,\n    }: {\n      isExistingElement?: boolean;\n    },\n  ) {\n    const elementsMap = this.scene.getElementsMapIncludingDeleted();\n\n    const updateElement = (\n      text: string,\n      originalText: string,\n      isDeleted: boolean,\n    ) => {\n      this.scene.replaceAllElements([\n        // Not sure why we include deleted elements as well hence using deleted elements map\n        ...this.scene.getElementsIncludingDeleted().map((_element) => {\n          if (_element.id === element.id && isTextElement(_element)) {\n            return updateTextElement(\n              _element,\n              getContainerElement(_element, elementsMap),\n              elementsMap,\n              {\n                text,\n                isDeleted,\n                originalText,\n              },\n            );\n          }\n          return _element;\n        }),\n      ]);\n    };\n\n    textWysiwyg({\n      id: element.id,\n      canvas: this.canvas,\n      getViewportCoords: (x, y) => {\n        const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n          {\n            sceneX: x,\n            sceneY: y,\n          },\n          this.state,\n        );\n        return [\n          viewportX - this.state.offsetLeft,\n          viewportY - this.state.offsetTop,\n        ];\n      },\n      onChange: withBatchedUpdates((text) => {\n        updateElement(text, text, false);\n        if (isNonDeletedElement(element)) {\n          updateBoundElements(element, elementsMap);\n        }\n      }),\n      onSubmit: withBatchedUpdates(({ text, viaKeyboard, originalText }) => {\n        const isDeleted = !text.trim();\n        updateElement(text, originalText, isDeleted);\n        // select the created text element only if submitting via keyboard\n        // (when submitting via click it should act as signal to deselect)\n        if (!isDeleted && viaKeyboard) {\n          const elementIdToSelect = element.containerId\n            ? element.containerId\n            : element.id;\n          this.setState((prevState) => ({\n            selectedElementIds: makeNextSelectedElementIds(\n              {\n                ...prevState.selectedElementIds,\n                [elementIdToSelect]: true,\n              },\n              prevState,\n            ),\n          }));\n        }\n        if (isDeleted) {\n          fixBindingsAfterDeletion(this.scene.getNonDeletedElements(), [\n            element,\n          ]);\n        }\n        if (!isDeleted || isExistingElement) {\n          this.history.resumeRecording();\n        }\n\n        this.setState({\n          draggingElement: null,\n          editingElement: null,\n        });\n        if (this.state.activeTool.locked) {\n          setCursorForShape(this.interactiveCanvas, this.state);\n        }\n\n        this.focusContainer();\n      }),\n      element,\n      excalidrawContainer: this.excalidrawContainerRef.current,\n      app: this,\n    });\n    // deselect all other elements when inserting text\n    this.deselectElements();\n\n    // do an initial update to re-initialize element position since we were\n    // modifying element's x/y for sake of editor (case: syncing to remote)\n    updateElement(element.text, element.originalText, false);\n  }\n\n  private deselectElements() {\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds({}, this.state),\n      selectedGroupIds: {},\n      editingGroupId: null,\n      activeEmbeddable: null,\n    });\n  }\n\n  private getTextElementAtPosition(\n    x: number,\n    y: number,\n  ): NonDeleted<ExcalidrawTextElement> | null {\n    const element = this.getElementAtPosition(x, y, {\n      includeBoundTextElement: true,\n    });\n    if (element && isTextElement(element) && !element.isDeleted) {\n      return element;\n    }\n    return null;\n  }\n\n  private getElementAtPosition(\n    x: number,\n    y: number,\n    opts?: {\n      /** if true, returns the first selected element (with highest z-index)\n        of all hit elements */\n      preferSelected?: boolean;\n      includeBoundTextElement?: boolean;\n      includeLockedElements?: boolean;\n    },\n  ): NonDeleted<ExcalidrawElement> | null {\n    const allHitElements = this.getElementsAtPosition(\n      x,\n      y,\n      opts?.includeBoundTextElement,\n      opts?.includeLockedElements,\n    );\n    if (allHitElements.length > 1) {\n      if (opts?.preferSelected) {\n        for (let index = allHitElements.length - 1; index > -1; index--) {\n          if (this.state.selectedElementIds[allHitElements[index].id]) {\n            return allHitElements[index];\n          }\n        }\n      }\n      const elementWithHighestZIndex =\n        allHitElements[allHitElements.length - 1];\n      // If we're hitting element with highest z-index only on its bounding box\n      // while also hitting other element figure, the latter should be considered.\n      return isHittingElementBoundingBoxWithoutHittingElement(\n        elementWithHighestZIndex,\n        this.state,\n        this.frameNameBoundsCache,\n        x,\n        y,\n        this.scene.getNonDeletedElementsMap(),\n      )\n        ? allHitElements[allHitElements.length - 2]\n        : elementWithHighestZIndex;\n    }\n    if (allHitElements.length === 1) {\n      return allHitElements[0];\n    }\n    return null;\n  }\n\n  private getElementsAtPosition(\n    x: number,\n    y: number,\n    includeBoundTextElement: boolean = false,\n    includeLockedElements: boolean = false,\n  ): NonDeleted<ExcalidrawElement>[] {\n    const elements =\n      includeBoundTextElement && includeLockedElements\n        ? this.scene.getNonDeletedElements()\n        : this.scene\n            .getNonDeletedElements()\n            .filter(\n              (element) =>\n                (includeLockedElements || !element.locked) &&\n                (includeBoundTextElement ||\n                  !(isTextElement(element) && element.containerId)),\n            );\n\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n    return getElementsAtPosition(elements, (element) =>\n      hitTest(\n        element,\n        this.state,\n        this.frameNameBoundsCache,\n        x,\n        y,\n        elementsMap,\n      ),\n    ).filter((element) => {\n      // hitting a frame's element from outside the frame is not considered a hit\n      const containingFrame = getContainingFrame(element);\n      return containingFrame &&\n        this.state.frameRendering.enabled &&\n        this.state.frameRendering.clip\n        ? isCursorInFrame({ x, y }, containingFrame, elementsMap)\n        : true;\n    });\n  }\n\n  private startTextEditing = ({\n    sceneX,\n    sceneY,\n    insertAtParentCenter = true,\n    container,\n  }: {\n    /** X position to insert text at */\n    sceneX: number;\n    /** Y position to insert text at */\n    sceneY: number;\n    /** whether to attempt to insert at element center if applicable */\n    insertAtParentCenter?: boolean;\n    container?: ExcalidrawTextContainer | null;\n  }) => {\n    let shouldBindToContainer = false;\n\n    let parentCenterPosition =\n      insertAtParentCenter &&\n      this.getTextWysiwygSnappedToCenterPosition(\n        sceneX,\n        sceneY,\n        this.state,\n        container,\n      );\n    if (container && parentCenterPosition) {\n      const boundTextElementToContainer = getBoundTextElement(\n        container,\n        this.scene.getNonDeletedElementsMap(),\n      );\n      if (!boundTextElementToContainer) {\n        shouldBindToContainer = true;\n      }\n    }\n    let existingTextElement: NonDeleted<ExcalidrawTextElement> | null = null;\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n\n    if (selectedElements.length === 1) {\n      if (isTextElement(selectedElements[0])) {\n        existingTextElement = selectedElements[0];\n      } else if (container) {\n        existingTextElement = getBoundTextElement(\n          selectedElements[0],\n          this.scene.getNonDeletedElementsMap(),\n        );\n      } else {\n        existingTextElement = this.getTextElementAtPosition(sceneX, sceneY);\n      }\n    } else {\n      existingTextElement = this.getTextElementAtPosition(sceneX, sceneY);\n    }\n\n    const fontFamily =\n      existingTextElement?.fontFamily || this.state.currentItemFontFamily;\n\n    const lineHeight =\n      existingTextElement?.lineHeight || getDefaultLineHeight(fontFamily);\n    const fontSize = this.state.currentItemFontSize;\n\n    if (\n      !existingTextElement &&\n      shouldBindToContainer &&\n      container &&\n      !isArrowElement(container)\n    ) {\n      const fontString = {\n        fontSize,\n        fontFamily,\n      };\n      const minWidth = getApproxMinLineWidth(\n        getFontString(fontString),\n        lineHeight,\n      );\n      const minHeight = getApproxMinLineHeight(fontSize, lineHeight);\n      const newHeight = Math.max(container.height, minHeight);\n      const newWidth = Math.max(container.width, minWidth);\n      mutateElement(container, { height: newHeight, width: newWidth });\n      sceneX = container.x + newWidth / 2;\n      sceneY = container.y + newHeight / 2;\n      if (parentCenterPosition) {\n        parentCenterPosition = this.getTextWysiwygSnappedToCenterPosition(\n          sceneX,\n          sceneY,\n          this.state,\n          container,\n        );\n      }\n    }\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: sceneX,\n      y: sceneY,\n    });\n\n    const element = existingTextElement\n      ? existingTextElement\n      : newTextElement({\n          x: parentCenterPosition\n            ? parentCenterPosition.elementCenterX\n            : sceneX,\n          y: parentCenterPosition\n            ? parentCenterPosition.elementCenterY\n            : sceneY,\n          strokeColor: this.state.currentItemStrokeColor,\n          backgroundColor: this.state.currentItemBackgroundColor,\n          fillStyle: this.state.currentItemFillStyle,\n          strokeWidth: this.state.currentItemStrokeWidth,\n          strokeStyle: this.state.currentItemStrokeStyle,\n          roughness: this.state.currentItemRoughness,\n          opacity: this.state.currentItemOpacity,\n          text: \"\",\n          fontSize,\n          fontFamily,\n          textAlign: parentCenterPosition\n            ? \"center\"\n            : this.state.currentItemTextAlign,\n          verticalAlign: parentCenterPosition\n            ? VERTICAL_ALIGN.MIDDLE\n            : DEFAULT_VERTICAL_ALIGN,\n          containerId: shouldBindToContainer ? container?.id : undefined,\n          groupIds: container?.groupIds ?? [],\n          lineHeight,\n          angle: container?.angle ?? 0,\n          frameId: topLayerFrame ? topLayerFrame.id : null,\n        });\n\n    if (!existingTextElement && shouldBindToContainer && container) {\n      mutateElement(container, {\n        boundElements: (container.boundElements || []).concat({\n          type: \"text\",\n          id: element.id,\n        }),\n      });\n    }\n    this.setState({ editingElement: element });\n\n    if (!existingTextElement) {\n      if (container && shouldBindToContainer) {\n        const containerIndex = this.scene.getElementIndex(container.id);\n        this.scene.insertElementAtIndex(element, containerIndex + 1);\n      } else {\n        this.scene.addNewElement(element);\n      }\n    }\n\n    this.setState({\n      editingElement: element,\n    });\n\n    this.handleTextWysiwyg(element, {\n      isExistingElement: !!existingTextElement,\n    });\n  };\n\n  private handleCanvasDoubleClick = (\n    event: React.MouseEvent<HTMLCanvasElement>,\n  ) => {\n    // case: double-clicking with arrow/line tool selected would both create\n    // text and enter multiElement mode\n    if (this.state.multiElement) {\n      return;\n    }\n    // we should only be able to double click when mode is selection\n    if (this.state.activeTool.type !== \"selection\") {\n      return;\n    }\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n\n    if (selectedElements.length === 1 && isLinearElement(selectedElements[0])) {\n      if (\n        event[KEYS.CTRL_OR_CMD] &&\n        (!this.state.editingLinearElement ||\n          this.state.editingLinearElement.elementId !== selectedElements[0].id)\n      ) {\n        this.history.resumeRecording();\n        this.setState({\n          editingLinearElement: new LinearElementEditor(selectedElements[0]),\n        });\n        return;\n      } else if (\n        this.state.editingLinearElement &&\n        this.state.editingLinearElement.elementId === selectedElements[0].id\n      ) {\n        return;\n      }\n    }\n\n    resetCursor(this.interactiveCanvas);\n\n    let { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n      event,\n      this.state,\n    );\n\n    const selectedGroupIds = getSelectedGroupIds(this.state);\n\n    if (selectedGroupIds.length > 0) {\n      const hitElement = this.getElementAtPosition(sceneX, sceneY);\n\n      const selectedGroupId =\n        hitElement &&\n        getSelectedGroupIdForElement(hitElement, this.state.selectedGroupIds);\n\n      if (selectedGroupId) {\n        this.setState((prevState) => ({\n          ...prevState,\n          ...selectGroupsForSelectedElements(\n            {\n              editingGroupId: selectedGroupId,\n              selectedElementIds: { [hitElement!.id]: true },\n            },\n            this.scene.getNonDeletedElements(),\n            prevState,\n            this,\n          ),\n        }));\n        return;\n      }\n    }\n\n    resetCursor(this.interactiveCanvas);\n    if (!event[KEYS.CTRL_OR_CMD] && !this.state.viewModeEnabled) {\n      const hitElement = this.getElementAtPosition(sceneX, sceneY);\n\n      if (isIframeLikeElement(hitElement)) {\n        this.setState({\n          activeEmbeddable: { element: hitElement, state: \"active\" },\n        });\n        return;\n      }\n\n      const container = getTextBindableContainerAtPosition(\n        this.scene.getNonDeletedElements(),\n        this.state,\n        sceneX,\n        sceneY,\n        this.scene.getNonDeletedElementsMap(),\n      );\n\n      if (container) {\n        if (\n          hasBoundTextElement(container) ||\n          !isTransparent(container.backgroundColor) ||\n          isHittingElementNotConsideringBoundingBox(\n            container,\n            this.state,\n            this.frameNameBoundsCache,\n            [sceneX, sceneY],\n            this.scene.getNonDeletedElementsMap(),\n          )\n        ) {\n          const midPoint = getContainerCenter(\n            container,\n            this.state,\n            this.scene.getNonDeletedElementsMap(),\n          );\n\n          sceneX = midPoint.x;\n          sceneY = midPoint.y;\n        }\n      }\n\n      this.startTextEditing({\n        sceneX,\n        sceneY,\n        insertAtParentCenter: !event.altKey,\n        container,\n      });\n    }\n  };\n\n  private getElementLinkAtPosition = (\n    scenePointer: Readonly<{ x: number; y: number }>,\n    hitElement: NonDeletedExcalidrawElement | null,\n  ): ExcalidrawElement | undefined => {\n    // Reversing so we traverse the elements in decreasing order\n    // of z-index\n    const elements = this.scene.getNonDeletedElements().slice().reverse();\n    let hitElementIndex = Infinity;\n\n    return elements.find((element, index) => {\n      if (hitElement && element.id === hitElement.id) {\n        hitElementIndex = index;\n      }\n      return (\n        element.link &&\n        index <= hitElementIndex &&\n        isPointHittingLink(\n          element,\n          this.scene.getNonDeletedElementsMap(),\n          this.state,\n          [scenePointer.x, scenePointer.y],\n          this.device.editor.isMobile,\n        )\n      );\n    });\n  };\n\n  private redirectToLink = (\n    event: React.PointerEvent<HTMLCanvasElement>,\n    isTouchScreen: boolean,\n  ) => {\n    const draggedDistance = distance2d(\n      this.lastPointerDownEvent!.clientX,\n      this.lastPointerDownEvent!.clientY,\n      this.lastPointerUpEvent!.clientX,\n      this.lastPointerUpEvent!.clientY,\n    );\n    if (\n      !this.hitLinkElement ||\n      // For touch screen allow dragging threshold else strict check\n      (isTouchScreen && draggedDistance > DRAGGING_THRESHOLD) ||\n      (!isTouchScreen && draggedDistance !== 0)\n    ) {\n      return;\n    }\n    const lastPointerDownCoords = viewportCoordsToSceneCoords(\n      this.lastPointerDownEvent!,\n      this.state,\n    );\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n    const lastPointerDownHittingLinkIcon = isPointHittingLink(\n      this.hitLinkElement,\n      elementsMap,\n      this.state,\n      [lastPointerDownCoords.x, lastPointerDownCoords.y],\n      this.device.editor.isMobile,\n    );\n    const lastPointerUpCoords = viewportCoordsToSceneCoords(\n      this.lastPointerUpEvent!,\n      this.state,\n    );\n    const lastPointerUpHittingLinkIcon = isPointHittingLink(\n      this.hitLinkElement,\n      elementsMap,\n      this.state,\n      [lastPointerUpCoords.x, lastPointerUpCoords.y],\n      this.device.editor.isMobile,\n    );\n    if (lastPointerDownHittingLinkIcon && lastPointerUpHittingLinkIcon) {\n      let url = this.hitLinkElement.link;\n      if (url) {\n        url = normalizeLink(url);\n        let customEvent;\n        if (this.props.onLinkOpen) {\n          customEvent = wrapEvent(EVENT.EXCALIDRAW_LINK, event.nativeEvent);\n          this.props.onLinkOpen(\n            {\n              ...this.hitLinkElement,\n              link: url,\n            },\n            customEvent,\n          );\n        }\n        if (!customEvent?.defaultPrevented) {\n          const target = isLocalLink(url) ? \"_self\" : \"_blank\";\n          const newWindow = window.open(undefined, target);\n          // https://mathiasbynens.github.io/rel-noopener/\n          if (newWindow) {\n            newWindow.opener = null;\n            newWindow.location = url;\n          }\n        }\n      }\n    }\n  };\n\n  private getTopLayerFrameAtSceneCoords = (sceneCoords: {\n    x: number;\n    y: number;\n  }) => {\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n    const frames = this.scene\n      .getNonDeletedFramesLikes()\n      .filter((frame): frame is ExcalidrawFrameLikeElement =>\n        isCursorInFrame(sceneCoords, frame, elementsMap),\n      );\n\n    return frames.length ? frames[frames.length - 1] : null;\n  };\n\n  private handleCanvasPointerMove = (\n    event: React.PointerEvent<HTMLCanvasElement>,\n  ) => {\n    this.savePointer(event.clientX, event.clientY, this.state.cursorButton);\n    this.lastPointerMoveEvent = event.nativeEvent;\n\n    if (gesture.pointers.has(event.pointerId)) {\n      gesture.pointers.set(event.pointerId, {\n        x: event.clientX,\n        y: event.clientY,\n      });\n    }\n\n    const initialScale = gesture.initialScale;\n    if (\n      gesture.pointers.size === 2 &&\n      gesture.lastCenter &&\n      initialScale &&\n      gesture.initialDistance\n    ) {\n      const center = getCenter(gesture.pointers);\n      const deltaX = center.x - gesture.lastCenter.x;\n      const deltaY = center.y - gesture.lastCenter.y;\n      gesture.lastCenter = center;\n\n      const distance = getDistance(Array.from(gesture.pointers.values()));\n      const scaleFactor =\n        this.state.activeTool.type === \"freedraw\" && this.state.penMode\n          ? 1\n          : distance / gesture.initialDistance;\n\n      const nextZoom = scaleFactor\n        ? getNormalizedZoom(initialScale * scaleFactor)\n        : this.state.zoom.value;\n\n      this.setState((state) => {\n        const zoomState = getStateForZoom(\n          {\n            viewportX: center.x,\n            viewportY: center.y,\n            nextZoom,\n          },\n          state,\n        );\n\n        this.translateCanvas({\n          zoom: zoomState.zoom,\n          scrollX: zoomState.scrollX + deltaX / nextZoom,\n          scrollY: zoomState.scrollY + deltaY / nextZoom,\n          shouldCacheIgnoreZoom: true,\n        });\n      });\n      this.resetShouldCacheIgnoreZoomDebounced();\n    } else {\n      gesture.lastCenter =\n        gesture.initialDistance =\n        gesture.initialScale =\n          null;\n    }\n\n    if (\n      isHoldingSpace ||\n      isPanning ||\n      isDraggingScrollBar ||\n      isHandToolActive(this.state)\n    ) {\n      return;\n    }\n\n    const isPointerOverScrollBars = isOverScrollBars(\n      currentScrollBars,\n      event.clientX - this.state.offsetLeft,\n      event.clientY - this.state.offsetTop,\n    );\n    const isOverScrollBar = isPointerOverScrollBars.isOverEither;\n    if (!this.state.draggingElement && !this.state.multiElement) {\n      if (isOverScrollBar) {\n        resetCursor(this.interactiveCanvas);\n      } else {\n        setCursorForShape(this.interactiveCanvas, this.state);\n      }\n    }\n\n    const scenePointer = viewportCoordsToSceneCoords(event, this.state);\n    const { x: scenePointerX, y: scenePointerY } = scenePointer;\n\n    if (\n      !this.state.draggingElement &&\n      isActiveToolNonLinearSnappable(this.state.activeTool.type)\n    ) {\n      const { originOffset, snapLines } = getSnapLinesAtPointer(\n        this.scene.getNonDeletedElements(),\n        this.state,\n        {\n          x: scenePointerX,\n          y: scenePointerY,\n        },\n        event,\n        this.scene.getNonDeletedElementsMap(),\n      );\n\n      this.setState((prevState) => {\n        const nextSnapLines = updateStable(prevState.snapLines, snapLines);\n        const nextOriginOffset = prevState.originSnapOffset\n          ? updateStable(prevState.originSnapOffset, originOffset)\n          : originOffset;\n\n        if (\n          prevState.snapLines === nextSnapLines &&\n          prevState.originSnapOffset === nextOriginOffset\n        ) {\n          return null;\n        }\n        return {\n          snapLines: nextSnapLines,\n          originSnapOffset: nextOriginOffset,\n        };\n      });\n    } else if (!this.state.draggingElement) {\n      this.setState((prevState) => {\n        if (prevState.snapLines.length) {\n          return {\n            snapLines: [],\n          };\n        }\n        return null;\n      });\n    }\n\n    if (\n      this.state.editingLinearElement &&\n      !this.state.editingLinearElement.isDragging\n    ) {\n      const editingLinearElement = LinearElementEditor.handlePointerMove(\n        event,\n        scenePointerX,\n        scenePointerY,\n        this.state,\n        this.scene.getNonDeletedElementsMap(),\n      );\n\n      if (\n        editingLinearElement &&\n        editingLinearElement !== this.state.editingLinearElement\n      ) {\n        // Since we are reading from previous state which is not possible with\n        // automatic batching in React 18 hence using flush sync to synchronously\n        // update the state. Check https://github.com/excalidraw/excalidraw/pull/5508 for more details.\n        flushSync(() => {\n          this.setState({\n            editingLinearElement,\n          });\n        });\n      }\n      if (editingLinearElement?.lastUncommittedPoint != null) {\n        this.maybeSuggestBindingAtCursor(scenePointer);\n      } else {\n        // causes stack overflow if not sync\n        flushSync(() => {\n          this.setState({ suggestedBindings: [] });\n        });\n      }\n    }\n\n    if (isBindingElementType(this.state.activeTool.type)) {\n      // Hovering with a selected tool or creating new linear element via click\n      // and point\n      const { draggingElement } = this.state;\n      if (isBindingElement(draggingElement, false)) {\n        this.maybeSuggestBindingsForLinearElementAtCoords(\n          draggingElement,\n          [scenePointer],\n          this.state.startBoundElement,\n        );\n      } else {\n        this.maybeSuggestBindingAtCursor(scenePointer);\n      }\n    }\n\n    if (this.state.multiElement) {\n      const { multiElement } = this.state;\n      const { x: rx, y: ry } = multiElement;\n\n      const { points, lastCommittedPoint } = multiElement;\n      const lastPoint = points[points.length - 1];\n\n      setCursorForShape(this.interactiveCanvas, this.state);\n\n      if (lastPoint === lastCommittedPoint) {\n        // if we haven't yet created a temp point and we're beyond commit-zone\n        // threshold, add a point\n        if (\n          distance2d(\n            scenePointerX - rx,\n            scenePointerY - ry,\n            lastPoint[0],\n            lastPoint[1],\n          ) >= LINE_CONFIRM_THRESHOLD\n        ) {\n          mutateElement(multiElement, {\n            points: [...points, [scenePointerX - rx, scenePointerY - ry]],\n          });\n        } else {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n          // in this branch, we're inside the commit zone, and no uncommitted\n          // point exists. Thus do nothing (don't add/remove points).\n        }\n      } else if (\n        points.length > 2 &&\n        lastCommittedPoint &&\n        distance2d(\n          scenePointerX - rx,\n          scenePointerY - ry,\n          lastCommittedPoint[0],\n          lastCommittedPoint[1],\n        ) < LINE_CONFIRM_THRESHOLD\n      ) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        mutateElement(multiElement, {\n          points: points.slice(0, -1),\n        });\n      } else {\n        const [gridX, gridY] = getGridPoint(\n          scenePointerX,\n          scenePointerY,\n          event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n        );\n\n        const [lastCommittedX, lastCommittedY] =\n          multiElement?.lastCommittedPoint ?? [0, 0];\n\n        let dxFromLastCommitted = gridX - rx - lastCommittedX;\n        let dyFromLastCommitted = gridY - ry - lastCommittedY;\n\n        if (shouldRotateWithDiscreteAngle(event)) {\n          ({ width: dxFromLastCommitted, height: dyFromLastCommitted } =\n            getLockedLinearCursorAlignSize(\n              // actual coordinate of the last committed point\n              lastCommittedX + rx,\n              lastCommittedY + ry,\n              // cursor-grid coordinate\n              gridX,\n              gridY,\n            ));\n        }\n\n        if (isPathALoop(points, this.state.zoom.value)) {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        }\n        // update last uncommitted point\n        mutateElement(multiElement, {\n          points: [\n            ...points.slice(0, -1),\n            [\n              lastCommittedX + dxFromLastCommitted,\n              lastCommittedY + dyFromLastCommitted,\n            ],\n          ],\n        });\n      }\n\n      return;\n    }\n\n    const hasDeselectedButton = Boolean(event.buttons);\n    if (\n      hasDeselectedButton ||\n      (this.state.activeTool.type !== \"selection\" &&\n        this.state.activeTool.type !== \"text\" &&\n        this.state.activeTool.type !== \"eraser\")\n    ) {\n      return;\n    }\n\n    const elements = this.scene.getNonDeletedElements();\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    if (\n      selectedElements.length === 1 &&\n      !isOverScrollBar &&\n      !this.state.editingLinearElement\n    ) {\n      const elementWithTransformHandleType = getElementWithTransformHandleType(\n        elements,\n        this.state,\n        scenePointerX,\n        scenePointerY,\n        this.state.zoom,\n        event.pointerType,\n        this.scene.getNonDeletedElementsMap(),\n      );\n      if (\n        elementWithTransformHandleType &&\n        elementWithTransformHandleType.transformHandleType\n      ) {\n        setCursor(\n          this.interactiveCanvas,\n          getCursorForResizingElement(elementWithTransformHandleType),\n        );\n        return;\n      }\n    } else if (selectedElements.length > 1 && !isOverScrollBar) {\n      const transformHandleType = getTransformHandleTypeFromCoords(\n        getCommonBounds(selectedElements),\n        scenePointerX,\n        scenePointerY,\n        this.state.zoom,\n        event.pointerType,\n      );\n      if (transformHandleType) {\n        setCursor(\n          this.interactiveCanvas,\n          getCursorForResizingElement({\n            transformHandleType,\n          }),\n        );\n        return;\n      }\n    }\n\n    const hitElement = this.getElementAtPosition(\n      scenePointer.x,\n      scenePointer.y,\n    );\n\n    this.hitLinkElement = this.getElementLinkAtPosition(\n      scenePointer,\n      hitElement,\n    );\n    if (isEraserActive(this.state)) {\n      return;\n    }\n    if (\n      this.hitLinkElement &&\n      !this.state.selectedElementIds[this.hitLinkElement.id]\n    ) {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n      showHyperlinkTooltip(\n        this.hitLinkElement,\n        this.state,\n        this.scene.getNonDeletedElementsMap(),\n      );\n    } else {\n      hideHyperlinkToolip();\n      if (\n        hitElement &&\n        (hitElement.link || isEmbeddableElement(hitElement)) &&\n        this.state.selectedElementIds[hitElement.id] &&\n        !this.state.contextMenu &&\n        !this.state.showHyperlinkPopup\n      ) {\n        this.setState({ showHyperlinkPopup: \"info\" });\n      } else if (this.state.activeTool.type === \"text\") {\n        setCursor(\n          this.interactiveCanvas,\n          isTextElement(hitElement) ? CURSOR_TYPE.TEXT : CURSOR_TYPE.CROSSHAIR,\n        );\n      } else if (this.state.viewModeEnabled) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n      } else if (isOverScrollBar) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n      } else if (this.state.selectedLinearElement) {\n        this.handleHoverSelectedLinearElement(\n          this.state.selectedLinearElement,\n          scenePointerX,\n          scenePointerY,\n        );\n      } else if (\n        // if using cmd/ctrl, we're not dragging\n        !event[KEYS.CTRL_OR_CMD]\n      ) {\n        if (\n          (hitElement ||\n            this.isHittingCommonBoundingBoxOfSelectedElements(\n              scenePointer,\n              selectedElements,\n            )) &&\n          !hitElement?.locked\n        ) {\n          if (\n            hitElement &&\n            isIframeLikeElement(hitElement) &&\n            this.isIframeLikeElementCenter(\n              hitElement,\n              event,\n              scenePointerX,\n              scenePointerY,\n            )\n          ) {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n            this.setState({\n              activeEmbeddable: { element: hitElement, state: \"hover\" },\n            });\n          } else {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n            if (this.state.activeEmbeddable?.state === \"hover\") {\n              this.setState({ activeEmbeddable: null });\n            }\n          }\n        }\n      } else {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n      }\n    }\n  };\n\n  private handleEraser = (\n    event: PointerEvent,\n    pointerDownState: PointerDownState,\n    scenePointer: { x: number; y: number },\n  ) => {\n    this.eraserTrail.addPointToPath(scenePointer.x, scenePointer.y);\n\n    let didChange = false;\n\n    const processedGroups = new Set<ExcalidrawElement[\"id\"]>();\n    const nonDeletedElements = this.scene.getNonDeletedElements();\n\n    const processElements = (elements: ExcalidrawElement[]) => {\n      for (const element of elements) {\n        if (element.locked) {\n          return;\n        }\n\n        if (event.altKey) {\n          if (this.elementsPendingErasure.delete(element.id)) {\n            didChange = true;\n          }\n        } else if (!this.elementsPendingErasure.has(element.id)) {\n          didChange = true;\n          this.elementsPendingErasure.add(element.id);\n        }\n\n        // (un)erase groups atomically\n        if (didChange && element.groupIds?.length) {\n          const shallowestGroupId = element.groupIds.at(-1)!;\n          if (!processedGroups.has(shallowestGroupId)) {\n            processedGroups.add(shallowestGroupId);\n            const elems = getElementsInGroup(\n              nonDeletedElements,\n              shallowestGroupId,\n            );\n            for (const elem of elems) {\n              if (event.altKey) {\n                this.elementsPendingErasure.delete(elem.id);\n              } else {\n                this.elementsPendingErasure.add(elem.id);\n              }\n            }\n          }\n        }\n      }\n    };\n\n    const distance = distance2d(\n      pointerDownState.lastCoords.x,\n      pointerDownState.lastCoords.y,\n      scenePointer.x,\n      scenePointer.y,\n    );\n    const threshold = 10 / this.state.zoom.value;\n    const point = { ...pointerDownState.lastCoords };\n    let samplingInterval = 0;\n    while (samplingInterval <= distance) {\n      const hitElements = this.getElementsAtPosition(point.x, point.y);\n      processElements(hitElements);\n\n      // Exit since we reached current point\n      if (samplingInterval === distance) {\n        break;\n      }\n\n      // Calculate next point in the line at a distance of sampling interval\n      samplingInterval = Math.min(samplingInterval + threshold, distance);\n\n      const distanceRatio = samplingInterval / distance;\n      const nextX =\n        (1 - distanceRatio) * point.x + distanceRatio * scenePointer.x;\n      const nextY =\n        (1 - distanceRatio) * point.y + distanceRatio * scenePointer.y;\n      point.x = nextX;\n      point.y = nextY;\n    }\n\n    pointerDownState.lastCoords.x = scenePointer.x;\n    pointerDownState.lastCoords.y = scenePointer.y;\n\n    if (didChange) {\n      for (const element of this.scene.getNonDeletedElements()) {\n        if (\n          isBoundToContainer(element) &&\n          (this.elementsPendingErasure.has(element.id) ||\n            this.elementsPendingErasure.has(element.containerId))\n        ) {\n          if (event.altKey) {\n            this.elementsPendingErasure.delete(element.id);\n            this.elementsPendingErasure.delete(element.containerId);\n          } else {\n            this.elementsPendingErasure.add(element.id);\n            this.elementsPendingErasure.add(element.containerId);\n          }\n        }\n      }\n\n      this.elementsPendingErasure = new Set(this.elementsPendingErasure);\n      this.onSceneUpdated();\n    }\n  };\n\n  // set touch moving for mobile context menu\n  private handleTouchMove = (event: React.TouchEvent<HTMLCanvasElement>) => {\n    invalidateContextMenu = true;\n  };\n\n  handleHoverSelectedLinearElement(\n    linearElementEditor: LinearElementEditor,\n    scenePointerX: number,\n    scenePointerY: number,\n  ) {\n    const elementsMap = this.scene.getNonDeletedElementsMap();\n\n    const element = LinearElementEditor.getElement(\n      linearElementEditor.elementId,\n      elementsMap,\n    );\n    const boundTextElement = getBoundTextElement(element, elementsMap);\n\n    if (!element) {\n      return;\n    }\n    if (this.state.selectedLinearElement) {\n      let hoverPointIndex = -1;\n      let segmentMidPointHoveredCoords = null;\n      if (\n        isHittingElementNotConsideringBoundingBox(\n          element,\n          this.state,\n          this.frameNameBoundsCache,\n          [scenePointerX, scenePointerY],\n          elementsMap,\n        )\n      ) {\n        hoverPointIndex = LinearElementEditor.getPointIndexUnderCursor(\n          element,\n          elementsMap,\n          this.state.zoom,\n          scenePointerX,\n          scenePointerY,\n        );\n        segmentMidPointHoveredCoords =\n          LinearElementEditor.getSegmentMidpointHitCoords(\n            linearElementEditor,\n            { x: scenePointerX, y: scenePointerY },\n            this.state,\n            this.scene.getNonDeletedElementsMap(),\n          );\n\n        if (hoverPointIndex >= 0 || segmentMidPointHoveredCoords) {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n        } else {\n          setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n        }\n      } else if (\n        shouldShowBoundingBox([element], this.state) &&\n        isHittingElementBoundingBoxWithoutHittingElement(\n          element,\n          this.state,\n          this.frameNameBoundsCache,\n          scenePointerX,\n          scenePointerY,\n          elementsMap,\n        )\n      ) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n      } else if (\n        boundTextElement &&\n        hitTest(\n          boundTextElement,\n          this.state,\n          this.frameNameBoundsCache,\n          scenePointerX,\n          scenePointerY,\n          this.scene.getNonDeletedElementsMap(),\n        )\n      ) {\n        setCursor(this.interactiveCanvas, CURSOR_TYPE.MOVE);\n      }\n\n      if (\n        this.state.selectedLinearElement.hoverPointIndex !== hoverPointIndex\n      ) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            hoverPointIndex,\n          },\n        });\n      }\n\n      if (\n        !LinearElementEditor.arePointsEqual(\n          this.state.selectedLinearElement.segmentMidPointHoveredCoords,\n          segmentMidPointHoveredCoords,\n        )\n      ) {\n        this.setState({\n          selectedLinearElement: {\n            ...this.state.selectedLinearElement,\n            segmentMidPointHoveredCoords,\n          },\n        });\n      }\n    } else {\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.AUTO);\n    }\n  }\n\n  private handleCanvasPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n  ) => {\n    this.maybeCleanupAfterMissingPointerUp(event.nativeEvent);\n    this.maybeUnfollowRemoteUser();\n\n    // since contextMenu options are potentially evaluated on each render,\n    // and an contextMenu action may depend on selection state, we must\n    // close the contextMenu before we update the selection on pointerDown\n    // (e.g. resetting selection)\n    if (this.state.contextMenu) {\n      this.setState({ contextMenu: null });\n    }\n\n    if (this.state.snapLines) {\n      this.setAppState({ snapLines: [] });\n    }\n\n    this.updateGestureOnPointerDown(event);\n\n    // if dragging element is freedraw and another pointerdown event occurs\n    // a second finger is on the screen\n    // discard the freedraw element if it is very short because it is likely\n    // just a spike, otherwise finalize the freedraw element when the second\n    // finger is lifted\n    if (\n      event.pointerType === \"touch\" &&\n      this.state.draggingElement &&\n      this.state.draggingElement.type === \"freedraw\"\n    ) {\n      const element = this.state.draggingElement as ExcalidrawFreeDrawElement;\n      this.updateScene({\n        ...(element.points.length < 10\n          ? {\n              elements: this.scene\n                .getElementsIncludingDeleted()\n                .filter((el) => el.id !== element.id),\n            }\n          : {}),\n        appState: {\n          draggingElement: null,\n          editingElement: null,\n          startBoundElement: null,\n          suggestedBindings: [],\n          selectedElementIds: makeNextSelectedElementIds(\n            Object.keys(this.state.selectedElementIds)\n              .filter((key) => key !== element.id)\n              .reduce((obj: { [id: string]: true }, key) => {\n                obj[key] = this.state.selectedElementIds[key];\n                return obj;\n              }, {}),\n            this.state,\n          ),\n        },\n      });\n      return;\n    }\n\n    // remove any active selection when we start to interact with canvas\n    // (mainly, we care about removing selection outside the component which\n    //  would prevent our copy handling otherwise)\n    const selection = document.getSelection();\n    if (selection?.anchorNode) {\n      selection.removeAllRanges();\n    }\n    this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(event);\n\n    //fires only once, if pen is detected, penMode is enabled\n    //the user can disable this by toggling the penMode button\n    if (!this.state.penDetected && event.pointerType === \"pen\") {\n      this.setState((prevState) => {\n        return {\n          penMode: true,\n          penDetected: true,\n        };\n      });\n    }\n\n    if (\n      !this.device.isTouchScreen &&\n      [\"pen\", \"touch\"].includes(event.pointerType)\n    ) {\n      this.device = updateObject(this.device, { isTouchScreen: true });\n    }\n\n    if (isPanning) {\n      return;\n    }\n\n    this.lastPointerDownEvent = event;\n\n    // we must exit before we set `cursorButton` state and `savePointer`\n    // else it will send pointer state & laser pointer events in collab when\n    // panning\n    if (this.handleCanvasPanUsingWheelOrSpaceDrag(event)) {\n      return;\n    }\n\n    this.setState({\n      lastPointerDownWith: event.pointerType,\n      cursorButton: \"down\",\n    });\n    this.savePointer(event.clientX, event.clientY, \"down\");\n\n    if (\n      event.button === POINTER_BUTTON.ERASER &&\n      this.state.activeTool.type !== TOOL_TYPE.eraser\n    ) {\n      this.setState(\n        {\n          activeTool: updateActiveTool(this.state, {\n            type: TOOL_TYPE.eraser,\n            lastActiveToolBeforeEraser: this.state.activeTool,\n          }),\n        },\n        () => {\n          this.handleCanvasPointerDown(event);\n          const onPointerUp = () => {\n            unsubPointerUp();\n            unsubCleanup?.();\n            if (isEraserActive(this.state)) {\n              this.setState({\n                activeTool: updateActiveTool(this.state, {\n                  ...(this.state.activeTool.lastActiveTool || {\n                    type: TOOL_TYPE.selection,\n                  }),\n                  lastActiveToolBeforeEraser: null,\n                }),\n              });\n            }\n          };\n\n          const unsubPointerUp = addEventListener(\n            window,\n            EVENT.POINTER_UP,\n            onPointerUp,\n            {\n              once: true,\n            },\n          );\n          let unsubCleanup: UnsubscribeCallback | undefined;\n          // subscribe inside rAF lest it'd be triggered on the same pointerdown\n          // if we start erasing while coming from blurred document since\n          // we cleanup pointer events on focus\n          requestAnimationFrame(() => {\n            unsubCleanup =\n              this.missingPointerEventCleanupEmitter.once(onPointerUp);\n          });\n        },\n      );\n      return;\n    }\n\n    // only handle left mouse button or touch\n    if (\n      event.button !== POINTER_BUTTON.MAIN &&\n      event.button !== POINTER_BUTTON.TOUCH &&\n      event.button !== POINTER_BUTTON.ERASER\n    ) {\n      return;\n    }\n\n    // don't select while panning\n    if (gesture.pointers.size > 1) {\n      return;\n    }\n\n    // State for the duration of a pointer interaction, which starts with a\n    // pointerDown event, ends with a pointerUp event (or another pointerDown)\n    const pointerDownState = this.initialPointerDownState(event);\n\n    this.setState({\n      selectedElementsAreBeingDragged: false,\n    });\n\n    if (this.handleDraggingScrollBar(event, pointerDownState)) {\n      return;\n    }\n\n    this.clearSelectionIfNotUsingSelection();\n    this.updateBindingEnabledOnPointerMove(event);\n\n    if (this.handleSelectionOnPointerDown(event, pointerDownState)) {\n      return;\n    }\n\n    const allowOnPointerDown =\n      !this.state.penMode ||\n      event.pointerType !== \"touch\" ||\n      this.state.activeTool.type === \"selection\" ||\n      this.state.activeTool.type === \"text\" ||\n      this.state.activeTool.type === \"image\";\n\n    if (!allowOnPointerDown) {\n      return;\n    }\n\n    if (this.state.activeTool.type === \"text\") {\n      this.handleTextOnPointerDown(event, pointerDownState);\n      return;\n    } else if (\n      this.state.activeTool.type === \"arrow\" ||\n      this.state.activeTool.type === \"line\"\n    ) {\n      this.handleLinearElementOnPointerDown(\n        event,\n        this.state.activeTool.type,\n        pointerDownState,\n      );\n    } else if (this.state.activeTool.type === \"image\") {\n      // reset image preview on pointerdown\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.CROSSHAIR);\n\n      // retrieve the latest element as the state may be stale\n      const pendingImageElement =\n        this.state.pendingImageElementId &&\n        this.scene.getElement(this.state.pendingImageElementId);\n\n      if (!pendingImageElement) {\n        return;\n      }\n\n      this.setState({\n        draggingElement: pendingImageElement,\n        editingElement: pendingImageElement,\n        pendingImageElementId: null,\n        multiElement: null,\n      });\n\n      const { x, y } = viewportCoordsToSceneCoords(event, this.state);\n\n      const frame = this.getTopLayerFrameAtSceneCoords({ x, y });\n\n      mutateElement(pendingImageElement, {\n        x,\n        y,\n        frameId: frame ? frame.id : null,\n      });\n    } else if (this.state.activeTool.type === \"freedraw\") {\n      this.handleFreeDrawElementOnPointerDown(\n        event,\n        this.state.activeTool.type,\n        pointerDownState,\n      );\n    } else if (this.state.activeTool.type === \"custom\") {\n      setCursorForShape(this.interactiveCanvas, this.state);\n    } else if (\n      this.state.activeTool.type === TOOL_TYPE.frame ||\n      this.state.activeTool.type === TOOL_TYPE.magicframe\n    ) {\n      this.createFrameElementOnPointerDown(\n        pointerDownState,\n        this.state.activeTool.type,\n      );\n    } else if (this.state.activeTool.type === \"laser\") {\n      this.laserTrails.startPath(\n        pointerDownState.lastCoords.x,\n        pointerDownState.lastCoords.y,\n      );\n    } else if (\n      this.state.activeTool.type !== \"eraser\" &&\n      this.state.activeTool.type !== \"hand\"\n    ) {\n      this.createGenericElementOnPointerDown(\n        this.state.activeTool.type,\n        pointerDownState,\n      );\n    }\n\n    this.props?.onPointerDown?.(this.state.activeTool, pointerDownState);\n    this.onPointerDownEmitter.trigger(\n      this.state.activeTool,\n      pointerDownState,\n      event,\n    );\n\n    if (this.state.activeTool.type === \"eraser\") {\n      this.eraserTrail.startPath(\n        pointerDownState.lastCoords.x,\n        pointerDownState.lastCoords.y,\n      );\n    }\n\n    const onPointerMove =\n      this.onPointerMoveFromPointerDownHandler(pointerDownState);\n\n    const onPointerUp =\n      this.onPointerUpFromPointerDownHandler(pointerDownState);\n\n    const onKeyDown = this.onKeyDownFromPointerDownHandler(pointerDownState);\n    const onKeyUp = this.onKeyUpFromPointerDownHandler(pointerDownState);\n\n    this.missingPointerEventCleanupEmitter.once((_event) =>\n      onPointerUp(_event || event.nativeEvent),\n    );\n\n    if (!this.state.viewModeEnabled || this.state.activeTool.type === \"laser\") {\n      window.addEventListener(EVENT.POINTER_MOVE, onPointerMove);\n      window.addEventListener(EVENT.POINTER_UP, onPointerUp);\n      window.addEventListener(EVENT.KEYDOWN, onKeyDown);\n      window.addEventListener(EVENT.KEYUP, onKeyUp);\n      pointerDownState.eventListeners.onMove = onPointerMove;\n      pointerDownState.eventListeners.onUp = onPointerUp;\n      pointerDownState.eventListeners.onKeyUp = onKeyUp;\n      pointerDownState.eventListeners.onKeyDown = onKeyDown;\n    }\n  };\n\n  private handleCanvasPointerUp = (\n    event: React.PointerEvent<HTMLCanvasElement>,\n  ) => {\n    this.removePointer(event);\n    this.lastPointerUpEvent = event;\n\n    const scenePointer = viewportCoordsToSceneCoords(\n      { clientX: event.clientX, clientY: event.clientY },\n      this.state,\n    );\n    const clicklength =\n      event.timeStamp - (this.lastPointerDownEvent?.timeStamp ?? 0);\n    if (this.device.editor.isMobile && clicklength < 300) {\n      const hitElement = this.getElementAtPosition(\n        scenePointer.x,\n        scenePointer.y,\n      );\n      if (\n        isIframeLikeElement(hitElement) &&\n        this.isIframeLikeElementCenter(\n          hitElement,\n          event,\n          scenePointer.x,\n          scenePointer.y,\n        )\n      ) {\n        this.handleEmbeddableCenterClick(hitElement);\n        return;\n      }\n    }\n\n    if (this.device.isTouchScreen) {\n      const hitElement = this.getElementAtPosition(\n        scenePointer.x,\n        scenePointer.y,\n      );\n      this.hitLinkElement = this.getElementLinkAtPosition(\n        scenePointer,\n        hitElement,\n      );\n    }\n\n    if (\n      this.hitLinkElement &&\n      !this.state.selectedElementIds[this.hitLinkElement.id]\n    ) {\n      if (\n        clicklength < 300 &&\n        isIframeLikeElement(this.hitLinkElement) &&\n        !isPointHittingLinkIcon(\n          this.hitLinkElement,\n          this.scene.getNonDeletedElementsMap(),\n          this.state,\n          [scenePointer.x, scenePointer.y],\n        )\n      ) {\n        this.handleEmbeddableCenterClick(this.hitLinkElement);\n      } else {\n        this.redirectToLink(event, this.device.isTouchScreen);\n      }\n    } else if (this.state.viewModeEnabled) {\n      this.setState({\n        activeEmbeddable: null,\n        selectedElementIds: {},\n      });\n    }\n  };\n\n  private maybeOpenContextMenuAfterPointerDownOnTouchDevices = (\n    event: React.PointerEvent<HTMLElement>,\n  ): void => {\n    // deal with opening context menu on touch devices\n    if (event.pointerType === \"touch\") {\n      invalidateContextMenu = false;\n\n      if (touchTimeout) {\n        // If there's already a touchTimeout, this means that there's another\n        // touch down and we are doing another touch, so we shouldn't open the\n        // context menu.\n        invalidateContextMenu = true;\n      } else {\n        // open the context menu with the first touch's clientX and clientY\n        // if the touch is not moving\n        touchTimeout = window.setTimeout(() => {\n          touchTimeout = 0;\n          if (!invalidateContextMenu) {\n            this.handleCanvasContextMenu(event);\n          }\n        }, TOUCH_CTX_MENU_TIMEOUT);\n      }\n    }\n  };\n\n  private resetContextMenuTimer = () => {\n    clearTimeout(touchTimeout);\n    touchTimeout = 0;\n    invalidateContextMenu = false;\n  };\n\n  /**\n   * pointerup may not fire in certian cases (user tabs away...), so in order\n   * to properly cleanup pointerdown state, we need to fire any hanging\n   * pointerup handlers manually\n   */\n  private maybeCleanupAfterMissingPointerUp = (event: PointerEvent | null) => {\n    lastPointerUp?.();\n    this.missingPointerEventCleanupEmitter.trigger(event).clear();\n  };\n\n  // Returns whether the event is a panning\n  private handleCanvasPanUsingWheelOrSpaceDrag = (\n    event: React.PointerEvent<HTMLElement>,\n  ): boolean => {\n    if (\n      !(\n        gesture.pointers.size <= 1 &&\n        (event.button === POINTER_BUTTON.WHEEL ||\n          (event.button === POINTER_BUTTON.MAIN && isHoldingSpace) ||\n          isHandToolActive(this.state) ||\n          this.state.viewModeEnabled)\n      ) ||\n      isTextElement(this.state.editingElement)\n    ) {\n      return false;\n    }\n    isPanning = true;\n    event.preventDefault();\n\n    let nextPastePrevented = false;\n    const isLinux =\n      typeof window === undefined\n        ? false\n        : /Linux/.test(window.navigator.platform);\n\n    setCursor(this.interactiveCanvas, CURSOR_TYPE.GRABBING);\n    let { clientX: lastX, clientY: lastY } = event;\n    const onPointerMove = withBatchedUpdatesThrottled((event: PointerEvent) => {\n      const deltaX = lastX - event.clientX;\n      const deltaY = lastY - event.clientY;\n      lastX = event.clientX;\n      lastY = event.clientY;\n\n      /*\n       * Prevent paste event if we move while middle clicking on Linux.\n       * See issue #1383.\n       */\n      if (\n        isLinux &&\n        !nextPastePrevented &&\n        (Math.abs(deltaX) > 1 || Math.abs(deltaY) > 1)\n      ) {\n        nextPastePrevented = true;\n\n        /* Prevent the next paste event */\n        const preventNextPaste = (event: ClipboardEvent) => {\n          document.body.removeEventListener(EVENT.PASTE, preventNextPaste);\n          event.stopPropagation();\n        };\n\n        /*\n         * Reenable next paste in case of disabled middle click paste for\n         * any reason:\n         * - right click paste\n         * - empty clipboard\n         */\n        const enableNextPaste = () => {\n          setTimeout(() => {\n            document.body.removeEventListener(EVENT.PASTE, preventNextPaste);\n            window.removeEventListener(EVENT.POINTER_UP, enableNextPaste);\n          }, 100);\n        };\n\n        document.body.addEventListener(EVENT.PASTE, preventNextPaste);\n        window.addEventListener(EVENT.POINTER_UP, enableNextPaste);\n      }\n\n      this.translateCanvas({\n        scrollX: this.state.scrollX - deltaX / this.state.zoom.value,\n        scrollY: this.state.scrollY - deltaY / this.state.zoom.value,\n      });\n    });\n    const teardown = withBatchedUpdates(\n      (lastPointerUp = () => {\n        lastPointerUp = null;\n        isPanning = false;\n        if (!isHoldingSpace) {\n          if (this.state.viewModeEnabled) {\n            setCursor(this.interactiveCanvas, CURSOR_TYPE.GRAB);\n          } else {\n            setCursorForShape(this.interactiveCanvas, this.state);\n          }\n        }\n        this.setState({\n          cursorButton: \"up\",\n        });\n        this.savePointer(event.clientX, event.clientY, \"up\");\n        window.removeEventListener(EVENT.POINTER_MOVE, onPointerMove);\n        window.removeEventListener(EVENT.POINTER_UP, teardown);\n        window.removeEventListener(EVENT.BLUR, teardown);\n        onPointerMove.flush();\n      }),\n    );\n    window.addEventListener(EVENT.BLUR, teardown);\n    window.addEventListener(EVENT.POINTER_MOVE, onPointerMove, {\n      passive: true,\n    });\n    window.addEventListener(EVENT.POINTER_UP, teardown);\n    return true;\n  };\n\n  private updateGestureOnPointerDown(\n    event: React.PointerEvent<HTMLElement>,\n  ): void {\n    gesture.pointers.set(event.pointerId, {\n      x: event.clientX,\n      y: event.clientY,\n    });\n\n    if (gesture.pointers.size === 2) {\n      gesture.lastCenter = getCenter(gesture.pointers);\n      gesture.initialScale = this.state.zoom.value;\n      gesture.initialDistance = getDistance(\n        Array.from(gesture.pointers.values()),\n      );\n    }\n  }\n\n  private initialPointerDownState(\n    event: React.PointerEvent<HTMLElement>,\n  ): PointerDownState {\n    const origin = viewportCoordsToSceneCoords(event, this.state);\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const [minX, minY, maxX, maxY] = getCommonBounds(selectedElements);\n\n    return {\n      origin,\n      withCmdOrCtrl: event[KEYS.CTRL_OR_CMD],\n      originInGrid: tupleToCoors(\n        getGridPoint(\n          origin.x,\n          origin.y,\n          event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n        ),\n      ),\n      scrollbars: isOverScrollBars(\n        currentScrollBars,\n        event.clientX - this.state.offsetLeft,\n        event.clientY - this.state.offsetTop,\n      ),\n      // we need to duplicate because we'll be updating this state\n      lastCoords: { ...origin },\n      originalElements: this.scene\n        .getNonDeletedElements()\n        .reduce((acc, element) => {\n          acc.set(element.id, deepCopyElement(element));\n          return acc;\n        }, new Map() as PointerDownState[\"originalElements\"]),\n      resize: {\n        handleType: false,\n        isResizing: false,\n        offset: { x: 0, y: 0 },\n        arrowDirection: \"origin\",\n        center: { x: (maxX + minX) / 2, y: (maxY + minY) / 2 },\n      },\n      hit: {\n        element: null,\n        allHitElements: [],\n        wasAddedToSelection: false,\n        hasBeenDuplicated: false,\n        hasHitCommonBoundingBoxOfSelectedElements:\n          this.isHittingCommonBoundingBoxOfSelectedElements(\n            origin,\n            selectedElements,\n          ),\n      },\n      drag: {\n        hasOccurred: false,\n        offset: null,\n      },\n      eventListeners: {\n        onMove: null,\n        onUp: null,\n        onKeyUp: null,\n        onKeyDown: null,\n      },\n      boxSelection: {\n        hasOccurred: false,\n      },\n    };\n  }\n\n  // Returns whether the event is a dragging a scrollbar\n  private handleDraggingScrollBar(\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState,\n  ): boolean {\n    if (\n      !(pointerDownState.scrollbars.isOverEither && !this.state.multiElement)\n    ) {\n      return false;\n    }\n    isDraggingScrollBar = true;\n    pointerDownState.lastCoords.x = event.clientX;\n    pointerDownState.lastCoords.y = event.clientY;\n    const onPointerMove = withBatchedUpdatesThrottled((event: PointerEvent) => {\n      const target = event.target;\n      if (!(target instanceof HTMLElement)) {\n        return;\n      }\n\n      this.handlePointerMoveOverScrollbars(event, pointerDownState);\n    });\n    const onPointerUp = withBatchedUpdates(() => {\n      lastPointerUp = null;\n      isDraggingScrollBar = false;\n      setCursorForShape(this.interactiveCanvas, this.state);\n      this.setState({\n        cursorButton: \"up\",\n      });\n      this.savePointer(event.clientX, event.clientY, \"up\");\n      window.removeEventListener(EVENT.POINTER_MOVE, onPointerMove);\n      window.removeEventListener(EVENT.POINTER_UP, onPointerUp);\n      onPointerMove.flush();\n    });\n\n    lastPointerUp = onPointerUp;\n\n    window.addEventListener(EVENT.POINTER_MOVE, onPointerMove);\n    window.addEventListener(EVENT.POINTER_UP, onPointerUp);\n    return true;\n  }\n\n  private clearSelectionIfNotUsingSelection = (): void => {\n    if (this.state.activeTool.type !== \"selection\") {\n      this.setState({\n        selectedElementIds: makeNextSelectedElementIds({}, this.state),\n        selectedGroupIds: {},\n        editingGroupId: null,\n        activeEmbeddable: null,\n      });\n    }\n  };\n\n  /**\n   * @returns whether the pointer event has been completely handled\n   */\n  private handleSelectionOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState,\n  ): boolean => {\n    if (this.state.activeTool.type === \"selection\") {\n      const elements = this.scene.getNonDeletedElements();\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      const selectedElements = this.scene.getSelectedElements(this.state);\n\n      if (selectedElements.length === 1 && !this.state.editingLinearElement) {\n        const elementWithTransformHandleType =\n          getElementWithTransformHandleType(\n            elements,\n            this.state,\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n            this.state.zoom,\n            event.pointerType,\n            this.scene.getNonDeletedElementsMap(),\n          );\n        if (elementWithTransformHandleType != null) {\n          this.setState({\n            resizingElement: elementWithTransformHandleType.element,\n          });\n          pointerDownState.resize.handleType =\n            elementWithTransformHandleType.transformHandleType;\n        }\n      } else if (selectedElements.length > 1) {\n        pointerDownState.resize.handleType = getTransformHandleTypeFromCoords(\n          getCommonBounds(selectedElements),\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n          this.state.zoom,\n          event.pointerType,\n        );\n      }\n      if (pointerDownState.resize.handleType) {\n        pointerDownState.resize.isResizing = true;\n        pointerDownState.resize.offset = tupleToCoors(\n          getResizeOffsetXY(\n            pointerDownState.resize.handleType,\n            selectedElements,\n            elementsMap,\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n          ),\n        );\n        if (\n          selectedElements.length === 1 &&\n          isLinearElement(selectedElements[0]) &&\n          selectedElements[0].points.length === 2\n        ) {\n          pointerDownState.resize.arrowDirection = getResizeArrowDirection(\n            pointerDownState.resize.handleType,\n            selectedElements[0],\n          );\n        }\n      } else {\n        if (this.state.selectedLinearElement) {\n          const linearElementEditor =\n            this.state.editingLinearElement || this.state.selectedLinearElement;\n          const ret = LinearElementEditor.handlePointerDown(\n            event,\n            this.state,\n            this.history,\n            pointerDownState.origin,\n            linearElementEditor,\n            this.scene.getNonDeletedElements(),\n            elementsMap,\n          );\n          if (ret.hitElement) {\n            pointerDownState.hit.element = ret.hitElement;\n          }\n          if (ret.linearElementEditor) {\n            this.setState({ selectedLinearElement: ret.linearElementEditor });\n\n            if (this.state.editingLinearElement) {\n              this.setState({ editingLinearElement: ret.linearElementEditor });\n            }\n          }\n          if (ret.didAddPoint) {\n            return true;\n          }\n        }\n        // hitElement may already be set above, so check first\n        pointerDownState.hit.element =\n          pointerDownState.hit.element ??\n          this.getElementAtPosition(\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n          );\n\n        if (pointerDownState.hit.element) {\n          // Early return if pointer is hitting link icon\n          const hitLinkElement = this.getElementLinkAtPosition(\n            {\n              x: pointerDownState.origin.x,\n              y: pointerDownState.origin.y,\n            },\n            pointerDownState.hit.element,\n          );\n          if (hitLinkElement) {\n            return false;\n          }\n        }\n\n        // For overlapped elements one position may hit\n        // multiple elements\n        pointerDownState.hit.allHitElements = this.getElementsAtPosition(\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n        );\n\n        const hitElement = pointerDownState.hit.element;\n        const someHitElementIsSelected =\n          pointerDownState.hit.allHitElements.some((element) =>\n            this.isASelectedElement(element),\n          );\n        if (\n          (hitElement === null || !someHitElementIsSelected) &&\n          !event.shiftKey &&\n          !pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements\n        ) {\n          this.clearSelection(hitElement);\n        }\n\n        if (this.state.editingLinearElement) {\n          this.setState({\n            selectedElementIds: makeNextSelectedElementIds(\n              {\n                [this.state.editingLinearElement.elementId]: true,\n              },\n              this.state,\n            ),\n          });\n          // If we click on something\n        } else if (hitElement != null) {\n          // on CMD/CTRL, drill down to hit element regardless of groups etc.\n          if (event[KEYS.CTRL_OR_CMD]) {\n            if (!this.state.selectedElementIds[hitElement.id]) {\n              pointerDownState.hit.wasAddedToSelection = true;\n            }\n            this.setState((prevState) => ({\n              ...editGroupForSelectedElement(prevState, hitElement),\n              previousSelectedElementIds: this.state.selectedElementIds,\n            }));\n            // mark as not completely handled so as to allow dragging etc.\n            return false;\n          }\n\n          // deselect if item is selected\n          // if shift is not clicked, this will always return true\n          // otherwise, it will trigger selection based on current\n          // state of the box\n          if (!this.state.selectedElementIds[hitElement.id]) {\n            // if we are currently editing a group, exiting editing mode and deselect the group.\n            if (\n              this.state.editingGroupId &&\n              !isElementInGroup(hitElement, this.state.editingGroupId)\n            ) {\n              this.setState({\n                selectedElementIds: makeNextSelectedElementIds({}, this.state),\n                selectedGroupIds: {},\n                editingGroupId: null,\n                activeEmbeddable: null,\n              });\n            }\n\n            // Add hit element to selection. At this point if we're not holding\n            // SHIFT the previously selected element(s) were deselected above\n            // (make sure you use setState updater to use latest state)\n            // With shift-selection, we want to make sure that frames and their containing\n            // elements are not selected at the same time.\n            if (\n              !someHitElementIsSelected &&\n              !pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements\n            ) {\n              this.setState((prevState) => {\n                const nextSelectedElementIds: { [id: string]: true } = {\n                  ...prevState.selectedElementIds,\n                  [hitElement.id]: true,\n                };\n\n                const previouslySelectedElements: ExcalidrawElement[] = [];\n\n                Object.keys(prevState.selectedElementIds).forEach((id) => {\n                  const element = this.scene.getElement(id);\n                  element && previouslySelectedElements.push(element);\n                });\n\n                // if hitElement is frame-like, deselect all of its elements\n                // if they are selected\n                if (isFrameLikeElement(hitElement)) {\n                  getFrameChildren(\n                    previouslySelectedElements,\n                    hitElement.id,\n                  ).forEach((element) => {\n                    delete nextSelectedElementIds[element.id];\n                  });\n                } else if (hitElement.frameId) {\n                  // if hitElement is in a frame and its frame has been selected\n                  // disable selection for the given element\n                  if (nextSelectedElementIds[hitElement.frameId]) {\n                    delete nextSelectedElementIds[hitElement.id];\n                  }\n                } else {\n                  // hitElement is neither a frame nor an element in a frame\n                  // but since hitElement could be in a group with some frames\n                  // this means selecting hitElement will have the frames selected as well\n                  // because we want to keep the invariant:\n                  // - frames and their elements are not selected at the same time\n                  // we deselect elements in those frames that were previously selected\n\n                  const groupIds = hitElement.groupIds;\n                  const framesInGroups = new Set(\n                    groupIds\n                      .flatMap((gid) =>\n                        getElementsInGroup(\n                          this.scene.getNonDeletedElements(),\n                          gid,\n                        ),\n                      )\n                      .filter((element) => isFrameLikeElement(element))\n                      .map((frame) => frame.id),\n                  );\n\n                  if (framesInGroups.size > 0) {\n                    previouslySelectedElements.forEach((element) => {\n                      if (\n                        element.frameId &&\n                        framesInGroups.has(element.frameId)\n                      ) {\n                        // deselect element and groups containing the element\n                        delete nextSelectedElementIds[element.id];\n                        element.groupIds\n                          .flatMap((gid) =>\n                            getElementsInGroup(\n                              this.scene.getNonDeletedElements(),\n                              gid,\n                            ),\n                          )\n                          .forEach((element) => {\n                            delete nextSelectedElementIds[element.id];\n                          });\n                      }\n                    });\n                  }\n                }\n\n                return {\n                  ...selectGroupsForSelectedElements(\n                    {\n                      editingGroupId: prevState.editingGroupId,\n                      selectedElementIds: nextSelectedElementIds,\n                    },\n                    this.scene.getNonDeletedElements(),\n                    prevState,\n                    this,\n                  ),\n                  showHyperlinkPopup:\n                    hitElement.link || isEmbeddableElement(hitElement)\n                      ? \"info\"\n                      : false,\n                };\n              });\n              pointerDownState.hit.wasAddedToSelection = true;\n            }\n          }\n        }\n\n        this.setState({\n          previousSelectedElementIds: this.state.selectedElementIds,\n        });\n      }\n    }\n    return false;\n  };\n\n  private isASelectedElement(hitElement: ExcalidrawElement | null): boolean {\n    return hitElement != null && this.state.selectedElementIds[hitElement.id];\n  }\n\n  private isHittingCommonBoundingBoxOfSelectedElements(\n    point: Readonly<{ x: number; y: number }>,\n    selectedElements: readonly ExcalidrawElement[],\n  ): boolean {\n    if (selectedElements.length < 2) {\n      return false;\n    }\n\n    // How many pixels off the shape boundary we still consider a hit\n    const threshold = 10 / this.state.zoom.value;\n    const [x1, y1, x2, y2] = getCommonBounds(selectedElements);\n    return (\n      point.x > x1 - threshold &&\n      point.x < x2 + threshold &&\n      point.y > y1 - threshold &&\n      point.y < y2 + threshold\n    );\n  }\n\n  private handleTextOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    pointerDownState: PointerDownState,\n  ): void => {\n    // if we're currently still editing text, clicking outside\n    // should only finalize it, not create another (irrespective\n    // of state.activeTool.locked)\n    if (isTextElement(this.state.editingElement)) {\n      return;\n    }\n    let sceneX = pointerDownState.origin.x;\n    let sceneY = pointerDownState.origin.y;\n\n    const element = this.getElementAtPosition(sceneX, sceneY, {\n      includeBoundTextElement: true,\n    });\n\n    // FIXME\n    let container = getTextBindableContainerAtPosition(\n      this.scene.getNonDeletedElements(),\n      this.state,\n      sceneX,\n      sceneY,\n      this.scene.getNonDeletedElementsMap(),\n    );\n\n    if (hasBoundTextElement(element)) {\n      container = element as ExcalidrawTextContainer;\n      sceneX = element.x + element.width / 2;\n      sceneY = element.y + element.height / 2;\n    }\n    this.startTextEditing({\n      sceneX,\n      sceneY,\n      insertAtParentCenter: !event.altKey,\n      container,\n    });\n\n    resetCursor(this.interactiveCanvas);\n    if (!this.state.activeTool.locked) {\n      this.setState({\n        activeTool: updateActiveTool(this.state, { type: \"selection\" }),\n      });\n    }\n  };\n\n  private handleFreeDrawElementOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    elementType: ExcalidrawFreeDrawElement[\"type\"],\n    pointerDownState: PointerDownState,\n  ) => {\n    // Begin a mark capture. This does not have to update state yet.\n    const [gridX, gridY] = getGridPoint(\n      pointerDownState.origin.x,\n      pointerDownState.origin.y,\n      null,\n    );\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: gridX,\n      y: gridY,\n    });\n\n    const element = newFreeDrawElement({\n      type: elementType,\n      x: gridX,\n      y: gridY,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      roundness: null,\n      simulatePressure: event.pressure === 0.5,\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n    });\n\n    this.setState((prevState) => {\n      const nextSelectedElementIds = {\n        ...prevState.selectedElementIds,\n      };\n      delete nextSelectedElementIds[element.id];\n      return {\n        selectedElementIds: makeNextSelectedElementIds(\n          nextSelectedElementIds,\n          prevState,\n        ),\n      };\n    });\n\n    const pressures = element.simulatePressure\n      ? element.pressures\n      : [...element.pressures, event.pressure];\n\n    mutateElement(element, {\n      points: [[0, 0]],\n      pressures,\n    });\n\n    const boundElement = getHoveredElementForBinding(\n      pointerDownState.origin,\n      this.scene.getNonDeletedElements(),\n      this.scene.getNonDeletedElementsMap(),\n    );\n    this.scene.addNewElement(element);\n    this.setState({\n      draggingElement: element,\n      editingElement: element,\n      startBoundElement: boundElement,\n      suggestedBindings: [],\n    });\n  };\n\n  public insertIframeElement = ({\n    sceneX,\n    sceneY,\n    width,\n    height,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    width: number;\n    height: number;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD]\n        ? null\n        : this.state.gridSize,\n    );\n\n    const element = newIframeElement({\n      type: \"iframe\",\n      x: gridX,\n      y: gridY,\n      strokeColor: \"transparent\",\n      backgroundColor: \"transparent\",\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: this.getCurrentItemRoundness(\"iframe\"),\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      width,\n      height,\n    });\n\n    this.scene.replaceAllElements([\n      ...this.scene.getElementsIncludingDeleted(),\n      element,\n    ]);\n\n    return element;\n  };\n\n  //create rectangle element with youtube top left on nearest grid point width / hight 640/360\n  public insertEmbeddableElement = ({\n    sceneX,\n    sceneY,\n    link,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    link: string;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD]\n        ? null\n        : this.state.gridSize,\n    );\n\n    const embedLink = getEmbedLink(link);\n\n    if (!embedLink) {\n      return;\n    }\n\n    if (embedLink.error instanceof URIError) {\n      this.setToast({\n        message: t(\"toast.unrecognizedLinkFormat\"),\n        closable: true,\n      });\n    }\n\n    const element = newEmbeddableElement({\n      type: \"embeddable\",\n      x: gridX,\n      y: gridY,\n      strokeColor: \"transparent\",\n      backgroundColor: \"transparent\",\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: this.getCurrentItemRoundness(\"embeddable\"),\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      width: embedLink.intrinsicSize.w,\n      height: embedLink.intrinsicSize.h,\n      link,\n    });\n\n    this.scene.replaceAllElements([\n      ...this.scene.getElementsIncludingDeleted(),\n      element,\n    ]);\n\n    return element;\n  };\n\n  private createImageElement = ({\n    sceneX,\n    sceneY,\n    addToFrameUnderCursor = true,\n  }: {\n    sceneX: number;\n    sceneY: number;\n    addToFrameUnderCursor?: boolean;\n  }) => {\n    const [gridX, gridY] = getGridPoint(\n      sceneX,\n      sceneY,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD]\n        ? null\n        : this.state.gridSize,\n    );\n\n    const topLayerFrame = addToFrameUnderCursor\n      ? this.getTopLayerFrameAtSceneCoords({\n          x: gridX,\n          y: gridY,\n        })\n      : null;\n\n    const element = newImageElement({\n      type: \"image\",\n      x: gridX,\n      y: gridY,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      roundness: null,\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n    });\n\n    return element;\n  };\n\n  private handleLinearElementOnPointerDown = (\n    event: React.PointerEvent<HTMLElement>,\n    elementType: ExcalidrawLinearElement[\"type\"],\n    pointerDownState: PointerDownState,\n  ): void => {\n    if (this.state.multiElement) {\n      const { multiElement } = this.state;\n\n      // finalize if completing a loop\n      if (\n        multiElement.type === \"line\" &&\n        isPathALoop(multiElement.points, this.state.zoom.value)\n      ) {\n        mutateElement(multiElement, {\n          lastCommittedPoint:\n            multiElement.points[multiElement.points.length - 1],\n        });\n        this.actionManager.executeAction(actionFinalize);\n        return;\n      }\n\n      const { x: rx, y: ry, lastCommittedPoint } = multiElement;\n\n      // clicking inside commit zone \u2192 finalize arrow\n      if (\n        multiElement.points.length > 1 &&\n        lastCommittedPoint &&\n        distance2d(\n          pointerDownState.origin.x - rx,\n          pointerDownState.origin.y - ry,\n          lastCommittedPoint[0],\n          lastCommittedPoint[1],\n        ) < LINE_CONFIRM_THRESHOLD\n      ) {\n        this.actionManager.executeAction(actionFinalize);\n        return;\n      }\n\n      this.setState((prevState) => ({\n        selectedElementIds: makeNextSelectedElementIds(\n          {\n            ...prevState.selectedElementIds,\n            [multiElement.id]: true,\n          },\n          prevState,\n        ),\n      }));\n      // clicking outside commit zone \u2192 update reference for last committed\n      // point\n      mutateElement(multiElement, {\n        lastCommittedPoint: multiElement.points[multiElement.points.length - 1],\n      });\n      setCursor(this.interactiveCanvas, CURSOR_TYPE.POINTER);\n    } else {\n      const [gridX, gridY] = getGridPoint(\n        pointerDownState.origin.x,\n        pointerDownState.origin.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n      );\n\n      const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n        x: gridX,\n        y: gridY,\n      });\n\n      /* If arrow is pre-arrowheads, it will have undefined for both start and end arrowheads.\n      If so, we want it to be null for start and \"arrow\" for end. If the linear item is not\n      an arrow, we want it to be null for both. Otherwise, we want it to use the\n      values from appState. */\n\n      const { currentItemStartArrowhead, currentItemEndArrowhead } = this.state;\n      const [startArrowhead, endArrowhead] =\n        elementType === \"arrow\"\n          ? [currentItemStartArrowhead, currentItemEndArrowhead]\n          : [null, null];\n\n      const element = newLinearElement({\n        type: elementType,\n        x: gridX,\n        y: gridY,\n        strokeColor: this.state.currentItemStrokeColor,\n        backgroundColor: this.state.currentItemBackgroundColor,\n        fillStyle: this.state.currentItemFillStyle,\n        strokeWidth: this.state.currentItemStrokeWidth,\n        strokeStyle: this.state.currentItemStrokeStyle,\n        roughness: this.state.currentItemRoughness,\n        opacity: this.state.currentItemOpacity,\n        roundness:\n          this.state.currentItemRoundness === \"round\"\n            ? { type: ROUNDNESS.PROPORTIONAL_RADIUS }\n            : null,\n        startArrowhead,\n        endArrowhead,\n        locked: false,\n        frameId: topLayerFrame ? topLayerFrame.id : null,\n      });\n      this.setState((prevState) => {\n        const nextSelectedElementIds = {\n          ...prevState.selectedElementIds,\n        };\n        delete nextSelectedElementIds[element.id];\n        return {\n          selectedElementIds: makeNextSelectedElementIds(\n            nextSelectedElementIds,\n            prevState,\n          ),\n        };\n      });\n      mutateElement(element, {\n        points: [...element.points, [0, 0]],\n      });\n      const boundElement = getHoveredElementForBinding(\n        pointerDownState.origin,\n        this.scene.getNonDeletedElements(),\n        this.scene.getNonDeletedElementsMap(),\n      );\n\n      this.scene.addNewElement(element);\n      this.setState({\n        draggingElement: element,\n        editingElement: element,\n        startBoundElement: boundElement,\n        suggestedBindings: [],\n      });\n    }\n  };\n\n  private getCurrentItemRoundness(\n    elementType:\n      | \"selection\"\n      | \"rectangle\"\n      | \"diamond\"\n      | \"ellipse\"\n      | \"iframe\"\n      | \"embeddable\",\n  ) {\n    return this.state.currentItemRoundness === \"round\"\n      ? {\n          type: isUsingAdaptiveRadius(elementType)\n            ? ROUNDNESS.ADAPTIVE_RADIUS\n            : ROUNDNESS.PROPORTIONAL_RADIUS,\n        }\n      : null;\n  }\n\n  private createGenericElementOnPointerDown = (\n    elementType: ExcalidrawGenericElement[\"type\"] | \"embeddable\",\n    pointerDownState: PointerDownState,\n  ): void => {\n    const [gridX, gridY] = getGridPoint(\n      pointerDownState.origin.x,\n      pointerDownState.origin.y,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD]\n        ? null\n        : this.state.gridSize,\n    );\n\n    const topLayerFrame = this.getTopLayerFrameAtSceneCoords({\n      x: gridX,\n      y: gridY,\n    });\n\n    const baseElementAttributes = {\n      x: gridX,\n      y: gridY,\n      strokeColor: this.state.currentItemStrokeColor,\n      backgroundColor: this.state.currentItemBackgroundColor,\n      fillStyle: this.state.currentItemFillStyle,\n      strokeWidth: this.state.currentItemStrokeWidth,\n      strokeStyle: this.state.currentItemStrokeStyle,\n      roughness: this.state.currentItemRoughness,\n      opacity: this.state.currentItemOpacity,\n      roundness: this.getCurrentItemRoundness(elementType),\n      locked: false,\n      frameId: topLayerFrame ? topLayerFrame.id : null,\n    } as const;\n\n    let element;\n    if (elementType === \"embeddable\") {\n      element = newEmbeddableElement({\n        type: \"embeddable\",\n        ...baseElementAttributes,\n      });\n    } else {\n      element = newElement({\n        type: elementType,\n        ...baseElementAttributes,\n      });\n    }\n\n    if (element.type === \"selection\") {\n      this.setState({\n        selectionElement: element,\n        draggingElement: element,\n      });\n    } else {\n      this.scene.addNewElement(element);\n      this.setState({\n        multiElement: null,\n        draggingElement: element,\n        editingElement: element,\n      });\n    }\n  };\n\n  private createFrameElementOnPointerDown = (\n    pointerDownState: PointerDownState,\n    type: Extract<ToolType, \"frame\" | \"magicframe\">,\n  ): void => {\n    const [gridX, gridY] = getGridPoint(\n      pointerDownState.origin.x,\n      pointerDownState.origin.y,\n      this.lastPointerDownEvent?.[KEYS.CTRL_OR_CMD]\n        ? null\n        : this.state.gridSize,\n    );\n\n    const constructorOpts = {\n      x: gridX,\n      y: gridY,\n      opacity: this.state.currentItemOpacity,\n      locked: false,\n      ...FRAME_STYLE,\n    } as const;\n\n    const frame =\n      type === TOOL_TYPE.magicframe\n        ? newMagicFrameElement(constructorOpts)\n        : newFrameElement(constructorOpts);\n\n    this.scene.replaceAllElements([\n      ...this.scene.getElementsIncludingDeleted(),\n      frame,\n    ]);\n\n    this.setState({\n      multiElement: null,\n      draggingElement: frame,\n      editingElement: frame,\n    });\n  };\n\n  private maybeCacheReferenceSnapPoints(\n    event: KeyboardModifiersObject,\n    selectedElements: ExcalidrawElement[],\n    recomputeAnyways: boolean = false,\n  ) {\n    if (\n      isSnappingEnabled({\n        event,\n        appState: this.state,\n        selectedElements,\n      }) &&\n      (recomputeAnyways || !SnapCache.getReferenceSnapPoints())\n    ) {\n      SnapCache.setReferenceSnapPoints(\n        getReferenceSnapPoints(\n          this.scene.getNonDeletedElements(),\n          selectedElements,\n          this.state,\n          this.scene.getNonDeletedElementsMap(),\n        ),\n      );\n    }\n  }\n\n  private maybeCacheVisibleGaps(\n    event: KeyboardModifiersObject,\n    selectedElements: ExcalidrawElement[],\n    recomputeAnyways: boolean = false,\n  ) {\n    if (\n      isSnappingEnabled({\n        event,\n        appState: this.state,\n        selectedElements,\n      }) &&\n      (recomputeAnyways || !SnapCache.getVisibleGaps())\n    ) {\n      SnapCache.setVisibleGaps(\n        getVisibleGaps(\n          this.scene.getNonDeletedElements(),\n          selectedElements,\n          this.state,\n          this.scene.getNonDeletedElementsMap(),\n        ),\n      );\n    }\n  }\n\n  private onKeyDownFromPointerDownHandler(\n    pointerDownState: PointerDownState,\n  ): (event: KeyboardEvent) => void {\n    return withBatchedUpdates((event: KeyboardEvent) => {\n      if (this.maybeHandleResize(pointerDownState, event)) {\n        return;\n      }\n      this.maybeDragNewGenericElement(pointerDownState, event);\n    });\n  }\n\n  private onKeyUpFromPointerDownHandler(\n    pointerDownState: PointerDownState,\n  ): (event: KeyboardEvent) => void {\n    return withBatchedUpdates((event: KeyboardEvent) => {\n      // Prevents focus from escaping excalidraw tab\n      event.key === KEYS.ALT && event.preventDefault();\n      if (this.maybeHandleResize(pointerDownState, event)) {\n        return;\n      }\n      this.maybeDragNewGenericElement(pointerDownState, event);\n    });\n  }\n\n  private onPointerMoveFromPointerDownHandler(\n    pointerDownState: PointerDownState,\n  ) {\n    return withBatchedUpdatesThrottled((event: PointerEvent) => {\n      // We need to initialize dragOffsetXY only after we've updated\n      // `state.selectedElementIds` on pointerDown. Doing it here in pointerMove\n      // event handler should hopefully ensure we're already working with\n      // the updated state.\n      if (pointerDownState.drag.offset === null) {\n        pointerDownState.drag.offset = tupleToCoors(\n          getDragOffsetXY(\n            this.scene.getSelectedElements(this.state),\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n          ),\n        );\n      }\n      const target = event.target;\n      if (!(target instanceof HTMLElement)) {\n        return;\n      }\n\n      if (this.handlePointerMoveOverScrollbars(event, pointerDownState)) {\n        return;\n      }\n\n      const pointerCoords = viewportCoordsToSceneCoords(event, this.state);\n\n      if (isEraserActive(this.state)) {\n        this.handleEraser(event, pointerDownState, pointerCoords);\n        return;\n      }\n\n      if (this.state.activeTool.type === \"laser\") {\n        this.laserTrails.addPointToPath(pointerCoords.x, pointerCoords.y);\n      }\n\n      const [gridX, gridY] = getGridPoint(\n        pointerCoords.x,\n        pointerCoords.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n      );\n\n      // for arrows/lines, don't start dragging until a given threshold\n      // to ensure we don't create a 2-point arrow by mistake when\n      // user clicks mouse in a way that it moves a tiny bit (thus\n      // triggering pointermove)\n      if (\n        !pointerDownState.drag.hasOccurred &&\n        (this.state.activeTool.type === \"arrow\" ||\n          this.state.activeTool.type === \"line\")\n      ) {\n        if (\n          distance2d(\n            pointerCoords.x,\n            pointerCoords.y,\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n          ) < DRAGGING_THRESHOLD\n        ) {\n          return;\n        }\n      }\n      if (pointerDownState.resize.isResizing) {\n        pointerDownState.lastCoords.x = pointerCoords.x;\n        pointerDownState.lastCoords.y = pointerCoords.y;\n        if (this.maybeHandleResize(pointerDownState, event)) {\n          return true;\n        }\n      }\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n\n      if (this.state.selectedLinearElement) {\n        const linearElementEditor =\n          this.state.editingLinearElement || this.state.selectedLinearElement;\n\n        if (\n          LinearElementEditor.shouldAddMidpoint(\n            this.state.selectedLinearElement,\n            pointerCoords,\n            this.state,\n            elementsMap,\n          )\n        ) {\n          const ret = LinearElementEditor.addMidpoint(\n            this.state.selectedLinearElement,\n            pointerCoords,\n            this.state,\n            !event[KEYS.CTRL_OR_CMD],\n            elementsMap,\n          );\n          if (!ret) {\n            return;\n          }\n\n          // Since we are reading from previous state which is not possible with\n          // automatic batching in React 18 hence using flush sync to synchronously\n          // update the state. Check https://github.com/excalidraw/excalidraw/pull/5508 for more details.\n\n          flushSync(() => {\n            if (this.state.selectedLinearElement) {\n              this.setState({\n                selectedLinearElement: {\n                  ...this.state.selectedLinearElement,\n                  pointerDownState: ret.pointerDownState,\n                  selectedPointsIndices: ret.selectedPointsIndices,\n                },\n              });\n            }\n            if (this.state.editingLinearElement) {\n              this.setState({\n                editingLinearElement: {\n                  ...this.state.editingLinearElement,\n                  pointerDownState: ret.pointerDownState,\n                  selectedPointsIndices: ret.selectedPointsIndices,\n                },\n              });\n            }\n          });\n\n          return;\n        } else if (\n          linearElementEditor.pointerDownState.segmentMidpoint.value !== null &&\n          !linearElementEditor.pointerDownState.segmentMidpoint.added\n        ) {\n          return;\n        }\n\n        const didDrag = LinearElementEditor.handlePointDragging(\n          event,\n          this.state,\n          pointerCoords.x,\n          pointerCoords.y,\n          (element, pointsSceneCoords) => {\n            this.maybeSuggestBindingsForLinearElementAtCoords(\n              element,\n              pointsSceneCoords,\n            );\n          },\n          linearElementEditor,\n          this.scene.getNonDeletedElementsMap(),\n        );\n        if (didDrag) {\n          pointerDownState.lastCoords.x = pointerCoords.x;\n          pointerDownState.lastCoords.y = pointerCoords.y;\n          pointerDownState.drag.hasOccurred = true;\n          if (\n            this.state.editingLinearElement &&\n            !this.state.editingLinearElement.isDragging\n          ) {\n            this.setState({\n              editingLinearElement: {\n                ...this.state.editingLinearElement,\n                isDragging: true,\n              },\n            });\n          }\n          if (!this.state.selectedLinearElement.isDragging) {\n            this.setState({\n              selectedLinearElement: {\n                ...this.state.selectedLinearElement,\n                isDragging: true,\n              },\n            });\n          }\n          return;\n        }\n      }\n\n      const hasHitASelectedElement = pointerDownState.hit.allHitElements.some(\n        (element) => this.isASelectedElement(element),\n      );\n\n      const isSelectingPointsInLineEditor =\n        this.state.editingLinearElement &&\n        event.shiftKey &&\n        this.state.editingLinearElement.elementId ===\n          pointerDownState.hit.element?.id;\n      if (\n        (hasHitASelectedElement ||\n          pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements) &&\n        !isSelectingPointsInLineEditor\n      ) {\n        const selectedElements = this.scene.getSelectedElements(this.state);\n\n        if (selectedElements.every((element) => element.locked)) {\n          return;\n        }\n\n        const selectedElementsHasAFrame = selectedElements.find((e) =>\n          isFrameLikeElement(e),\n        );\n        const topLayerFrame = this.getTopLayerFrameAtSceneCoords(pointerCoords);\n        this.setState({\n          frameToHighlight:\n            topLayerFrame && !selectedElementsHasAFrame ? topLayerFrame : null,\n        });\n\n        // Marking that click was used for dragging to check\n        // if elements should be deselected on pointerup\n        pointerDownState.drag.hasOccurred = true;\n        this.setState({\n          selectedElementsAreBeingDragged: true,\n        });\n        // prevent dragging even if we're no longer holding cmd/ctrl otherwise\n        // it would have weird results (stuff jumping all over the screen)\n        // Checking for editingElement to avoid jump while editing on mobile #6503\n        if (\n          selectedElements.length > 0 &&\n          !pointerDownState.withCmdOrCtrl &&\n          !this.state.editingElement &&\n          this.state.activeEmbeddable?.state !== \"active\"\n        ) {\n          const dragOffset = {\n            x: pointerCoords.x - pointerDownState.origin.x,\n            y: pointerCoords.y - pointerDownState.origin.y,\n          };\n\n          const originalElements = [\n            ...pointerDownState.originalElements.values(),\n          ];\n\n          // We only drag in one direction if shift is pressed\n          const lockDirection = event.shiftKey;\n\n          if (lockDirection) {\n            const distanceX = Math.abs(dragOffset.x);\n            const distanceY = Math.abs(dragOffset.y);\n\n            const lockX = lockDirection && distanceX < distanceY;\n            const lockY = lockDirection && distanceX > distanceY;\n\n            if (lockX) {\n              dragOffset.x = 0;\n            }\n\n            if (lockY) {\n              dragOffset.y = 0;\n            }\n          }\n\n          // Snap cache *must* be synchronously popuplated before initial drag,\n          // otherwise the first drag even will not snap, causing a jump before\n          // it snaps to its position if previously snapped already.\n          this.maybeCacheVisibleGaps(event, selectedElements);\n          this.maybeCacheReferenceSnapPoints(event, selectedElements);\n\n          const { snapOffset, snapLines } = snapDraggedElements(\n            originalElements,\n            dragOffset,\n            this.state,\n            event,\n            this.scene.getNonDeletedElementsMap(),\n          );\n\n          this.setState({ snapLines });\n\n          // when we're editing the name of a frame, we want the user to be\n          // able to select and interact with the text input\n          !this.state.editingFrame &&\n            dragSelectedElements(\n              pointerDownState,\n              selectedElements,\n              dragOffset,\n              this.state,\n              this.scene,\n              snapOffset,\n              event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n            );\n\n          this.maybeSuggestBindingForAll(selectedElements);\n\n          // We duplicate the selected element if alt is pressed on pointer move\n          if (event.altKey && !pointerDownState.hit.hasBeenDuplicated) {\n            // Move the currently selected elements to the top of the z index stack, and\n            // put the duplicates where the selected elements used to be.\n            // (the origin point where the dragging started)\n\n            pointerDownState.hit.hasBeenDuplicated = true;\n\n            const nextElements = [];\n            const elementsToAppend = [];\n            const groupIdMap = new Map();\n            const oldIdToDuplicatedId = new Map();\n            const hitElement = pointerDownState.hit.element;\n            const selectedElementIds = new Set(\n              this.scene\n                .getSelectedElements({\n                  selectedElementIds: this.state.selectedElementIds,\n                  includeBoundTextElement: true,\n                  includeElementsInFrames: true,\n                })\n                .map((element) => element.id),\n            );\n\n            const elements = this.scene.getElementsIncludingDeleted();\n\n            for (const element of elements) {\n              if (\n                selectedElementIds.has(element.id) ||\n                // case: the state.selectedElementIds might not have been\n                // updated yet by the time this mousemove event is fired\n                (element.id === hitElement?.id &&\n                  pointerDownState.hit.wasAddedToSelection)\n              ) {\n                const duplicatedElement = duplicateElement(\n                  this.state.editingGroupId,\n                  groupIdMap,\n                  element,\n                );\n                const origElement = pointerDownState.originalElements.get(\n                  element.id,\n                )!;\n                mutateElement(duplicatedElement, {\n                  x: origElement.x,\n                  y: origElement.y,\n                });\n\n                // put duplicated element to pointerDownState.originalElements\n                // so that we can snap to the duplicated element without releasing\n                pointerDownState.originalElements.set(\n                  duplicatedElement.id,\n                  duplicatedElement,\n                );\n\n                nextElements.push(duplicatedElement);\n                elementsToAppend.push(element);\n                oldIdToDuplicatedId.set(element.id, duplicatedElement.id);\n              } else {\n                nextElements.push(element);\n              }\n            }\n            const nextSceneElements = [...nextElements, ...elementsToAppend];\n            bindTextToShapeAfterDuplication(\n              nextElements,\n              elementsToAppend,\n              oldIdToDuplicatedId,\n            );\n            fixBindingsAfterDuplication(\n              nextSceneElements,\n              elementsToAppend,\n              oldIdToDuplicatedId,\n              \"duplicatesServeAsOld\",\n            );\n            bindElementsToFramesAfterDuplication(\n              nextSceneElements,\n              elementsToAppend,\n              oldIdToDuplicatedId,\n            );\n            this.scene.replaceAllElements(nextSceneElements);\n            this.maybeCacheVisibleGaps(event, selectedElements, true);\n            this.maybeCacheReferenceSnapPoints(event, selectedElements, true);\n          }\n          return;\n        }\n      }\n\n      // It is very important to read this.state within each move event,\n      // otherwise we would read a stale one!\n      const draggingElement = this.state.draggingElement;\n      if (!draggingElement) {\n        return;\n      }\n\n      if (draggingElement.type === \"freedraw\") {\n        const points = draggingElement.points;\n        const dx = pointerCoords.x - draggingElement.x;\n        const dy = pointerCoords.y - draggingElement.y;\n\n        const lastPoint = points.length > 0 && points[points.length - 1];\n        const discardPoint =\n          lastPoint && lastPoint[0] === dx && lastPoint[1] === dy;\n\n        if (!discardPoint) {\n          const pressures = draggingElement.simulatePressure\n            ? draggingElement.pressures\n            : [...draggingElement.pressures, event.pressure];\n\n          mutateElement(draggingElement, {\n            points: [...points, [dx, dy]],\n            pressures,\n          });\n        }\n      } else if (isLinearElement(draggingElement)) {\n        pointerDownState.drag.hasOccurred = true;\n        this.setState({\n          selectedElementsAreBeingDragged: true,\n        });\n        const points = draggingElement.points;\n        let dx = gridX - draggingElement.x;\n        let dy = gridY - draggingElement.y;\n\n        if (shouldRotateWithDiscreteAngle(event) && points.length === 2) {\n          ({ width: dx, height: dy } = getLockedLinearCursorAlignSize(\n            draggingElement.x,\n            draggingElement.y,\n            pointerCoords.x,\n            pointerCoords.y,\n          ));\n        }\n\n        if (points.length === 1) {\n          mutateElement(draggingElement, {\n            points: [...points, [dx, dy]],\n          });\n        } else if (points.length === 2) {\n          mutateElement(draggingElement, {\n            points: [...points.slice(0, -1), [dx, dy]],\n          });\n        }\n\n        if (isBindingElement(draggingElement, false)) {\n          // When creating a linear element by dragging\n          this.maybeSuggestBindingsForLinearElementAtCoords(\n            draggingElement,\n            [pointerCoords],\n            this.state.startBoundElement,\n          );\n        }\n      } else {\n        pointerDownState.lastCoords.x = pointerCoords.x;\n        pointerDownState.lastCoords.y = pointerCoords.y;\n        this.maybeDragNewGenericElement(pointerDownState, event);\n      }\n\n      if (this.state.activeTool.type === \"selection\") {\n        pointerDownState.boxSelection.hasOccurred = true;\n\n        const elements = this.scene.getNonDeletedElements();\n\n        // box-select line editor points\n        if (this.state.editingLinearElement) {\n          LinearElementEditor.handleBoxSelection(\n            event,\n            this.state,\n            this.setState.bind(this),\n            this.scene.getNonDeletedElementsMap(),\n          );\n          // regular box-select\n        } else {\n          let shouldReuseSelection = true;\n\n          if (!event.shiftKey && isSomeElementSelected(elements, this.state)) {\n            if (\n              pointerDownState.withCmdOrCtrl &&\n              pointerDownState.hit.element\n            ) {\n              this.setState((prevState) =>\n                selectGroupsForSelectedElements(\n                  {\n                    ...prevState,\n                    selectedElementIds: {\n                      [pointerDownState.hit.element!.id]: true,\n                    },\n                  },\n                  this.scene.getNonDeletedElements(),\n                  prevState,\n                  this,\n                ),\n              );\n            } else {\n              shouldReuseSelection = false;\n            }\n          }\n          const elementsWithinSelection = getElementsWithinSelection(\n            elements,\n            draggingElement,\n            this.scene.getNonDeletedElementsMap(),\n          );\n\n          this.setState((prevState) => {\n            const nextSelectedElementIds = {\n              ...(shouldReuseSelection && prevState.selectedElementIds),\n              ...elementsWithinSelection.reduce(\n                (acc: Record<ExcalidrawElement[\"id\"], true>, element) => {\n                  acc[element.id] = true;\n                  return acc;\n                },\n                {},\n              ),\n            };\n\n            if (pointerDownState.hit.element) {\n              // if using ctrl/cmd, select the hitElement only if we\n              // haven't box-selected anything else\n              if (!elementsWithinSelection.length) {\n                nextSelectedElementIds[pointerDownState.hit.element.id] = true;\n              } else {\n                delete nextSelectedElementIds[pointerDownState.hit.element.id];\n              }\n            }\n\n            prevState = !shouldReuseSelection\n              ? { ...prevState, selectedGroupIds: {}, editingGroupId: null }\n              : prevState;\n\n            return {\n              ...selectGroupsForSelectedElements(\n                {\n                  editingGroupId: prevState.editingGroupId,\n                  selectedElementIds: nextSelectedElementIds,\n                },\n                this.scene.getNonDeletedElements(),\n                prevState,\n                this,\n              ),\n              // select linear element only when we haven't box-selected anything else\n              selectedLinearElement:\n                elementsWithinSelection.length === 1 &&\n                isLinearElement(elementsWithinSelection[0])\n                  ? new LinearElementEditor(elementsWithinSelection[0])\n                  : null,\n              showHyperlinkPopup:\n                elementsWithinSelection.length === 1 &&\n                (elementsWithinSelection[0].link ||\n                  isEmbeddableElement(elementsWithinSelection[0]))\n                  ? \"info\"\n                  : false,\n            };\n          });\n        }\n      }\n    });\n  }\n\n  // Returns whether the pointer move happened over either scrollbar\n  private handlePointerMoveOverScrollbars(\n    event: PointerEvent,\n    pointerDownState: PointerDownState,\n  ): boolean {\n    if (pointerDownState.scrollbars.isOverHorizontal) {\n      const x = event.clientX;\n      const dx = x - pointerDownState.lastCoords.x;\n      this.translateCanvas({\n        scrollX: this.state.scrollX - dx / this.state.zoom.value,\n      });\n      pointerDownState.lastCoords.x = x;\n      return true;\n    }\n\n    if (pointerDownState.scrollbars.isOverVertical) {\n      const y = event.clientY;\n      const dy = y - pointerDownState.lastCoords.y;\n      this.translateCanvas({\n        scrollY: this.state.scrollY - dy / this.state.zoom.value,\n      });\n      pointerDownState.lastCoords.y = y;\n      return true;\n    }\n    return false;\n  }\n\n  private onPointerUpFromPointerDownHandler(\n    pointerDownState: PointerDownState,\n  ): (event: PointerEvent) => void {\n    return withBatchedUpdates((childEvent: PointerEvent) => {\n      this.removePointer(childEvent);\n      if (pointerDownState.eventListeners.onMove) {\n        pointerDownState.eventListeners.onMove.flush();\n      }\n      const {\n        draggingElement,\n        resizingElement,\n        multiElement,\n        activeTool,\n        isResizing,\n        isRotating,\n      } = this.state;\n\n      this.setState((prevState) => ({\n        isResizing: false,\n        isRotating: false,\n        resizingElement: null,\n        selectionElement: null,\n        frameToHighlight: null,\n        elementsToHighlight: null,\n        cursorButton: \"up\",\n        // text elements are reset on finalize, and resetting on pointerup\n        // may cause issues with double taps\n        editingElement:\n          multiElement || isTextElement(this.state.editingElement)\n            ? this.state.editingElement\n            : null,\n        snapLines: updateStable(prevState.snapLines, []),\n\n        originSnapOffset: null,\n      }));\n\n      SnapCache.setReferenceSnapPoints(null);\n      SnapCache.setVisibleGaps(null);\n\n      this.savePointer(childEvent.clientX, childEvent.clientY, \"up\");\n\n      this.setState({\n        selectedElementsAreBeingDragged: false,\n      });\n      const elementsMap = this.scene.getNonDeletedElementsMap();\n      // Handle end of dragging a point of a linear element, might close a loop\n      // and sets binding element\n      if (this.state.editingLinearElement) {\n        if (\n          !pointerDownState.boxSelection.hasOccurred &&\n          pointerDownState.hit?.element?.id !==\n            this.state.editingLinearElement.elementId\n        ) {\n          this.actionManager.executeAction(actionFinalize);\n        } else {\n          const editingLinearElement = LinearElementEditor.handlePointerUp(\n            childEvent,\n            this.state.editingLinearElement,\n            this.state,\n            this.scene.getNonDeletedElements(),\n            elementsMap,\n          );\n          if (editingLinearElement !== this.state.editingLinearElement) {\n            this.setState({\n              editingLinearElement,\n              suggestedBindings: [],\n            });\n          }\n        }\n      } else if (this.state.selectedLinearElement) {\n        if (\n          pointerDownState.hit?.element?.id !==\n          this.state.selectedLinearElement.elementId\n        ) {\n          const selectedELements = this.scene.getSelectedElements(this.state);\n          // set selectedLinearElement to null if there is more than one element selected since we don't want to show linear element handles\n          if (selectedELements.length > 1) {\n            this.setState({ selectedLinearElement: null });\n          }\n        } else {\n          const linearElementEditor = LinearElementEditor.handlePointerUp(\n            childEvent,\n            this.state.selectedLinearElement,\n            this.state,\n            this.scene.getNonDeletedElements(),\n            elementsMap,\n          );\n\n          const { startBindingElement, endBindingElement } =\n            linearElementEditor;\n          const element = this.scene.getElement(linearElementEditor.elementId);\n          if (isBindingElement(element)) {\n            bindOrUnbindLinearElement(\n              element,\n              startBindingElement,\n              endBindingElement,\n              elementsMap,\n            );\n          }\n\n          if (linearElementEditor !== this.state.selectedLinearElement) {\n            this.setState({\n              selectedLinearElement: {\n                ...linearElementEditor,\n                selectedPointsIndices: null,\n              },\n              suggestedBindings: [],\n            });\n          }\n        }\n      }\n\n      this.missingPointerEventCleanupEmitter.clear();\n\n      window.removeEventListener(\n        EVENT.POINTER_MOVE,\n        pointerDownState.eventListeners.onMove!,\n      );\n      window.removeEventListener(\n        EVENT.POINTER_UP,\n        pointerDownState.eventListeners.onUp!,\n      );\n      window.removeEventListener(\n        EVENT.KEYDOWN,\n        pointerDownState.eventListeners.onKeyDown!,\n      );\n      window.removeEventListener(\n        EVENT.KEYUP,\n        pointerDownState.eventListeners.onKeyUp!,\n      );\n\n      if (this.state.pendingImageElementId) {\n        this.setState({ pendingImageElementId: null });\n      }\n\n      this.props?.onPointerUp?.(activeTool, pointerDownState);\n      this.onPointerUpEmitter.trigger(\n        this.state.activeTool,\n        pointerDownState,\n        childEvent,\n      );\n\n      if (draggingElement?.type === \"freedraw\") {\n        const pointerCoords = viewportCoordsToSceneCoords(\n          childEvent,\n          this.state,\n        );\n\n        const points = draggingElement.points;\n        let dx = pointerCoords.x - draggingElement.x;\n        let dy = pointerCoords.y - draggingElement.y;\n\n        // Allows dots to avoid being flagged as infinitely small\n        if (dx === points[0][0] && dy === points[0][1]) {\n          dy += 0.0001;\n          dx += 0.0001;\n        }\n\n        const pressures = draggingElement.simulatePressure\n          ? []\n          : [...draggingElement.pressures, childEvent.pressure];\n\n        mutateElement(draggingElement, {\n          points: [...points, [dx, dy]],\n          pressures,\n          lastCommittedPoint: [dx, dy],\n        });\n\n        this.actionManager.executeAction(actionFinalize);\n\n        return;\n      }\n      if (isImageElement(draggingElement)) {\n        const imageElement = draggingElement;\n        try {\n          this.initializeImageDimensions(imageElement);\n          this.setState(\n            {\n              selectedElementIds: makeNextSelectedElementIds(\n                { [imageElement.id]: true },\n                this.state,\n              ),\n            },\n            () => {\n              this.actionManager.executeAction(actionFinalize);\n            },\n          );\n        } catch (error: any) {\n          console.error(error);\n          this.scene.replaceAllElements(\n            this.scene\n              .getElementsIncludingDeleted()\n              .filter((el) => el.id !== imageElement.id),\n          );\n          this.actionManager.executeAction(actionFinalize);\n        }\n        return;\n      }\n\n      if (isLinearElement(draggingElement)) {\n        if (draggingElement!.points.length > 1) {\n          this.history.resumeRecording();\n        }\n        const pointerCoords = viewportCoordsToSceneCoords(\n          childEvent,\n          this.state,\n        );\n\n        if (\n          !pointerDownState.drag.hasOccurred &&\n          draggingElement &&\n          !multiElement\n        ) {\n          mutateElement(draggingElement, {\n            points: [\n              ...draggingElement.points,\n              [\n                pointerCoords.x - draggingElement.x,\n                pointerCoords.y - draggingElement.y,\n              ],\n            ],\n          });\n          this.setState({\n            multiElement: draggingElement,\n            editingElement: this.state.draggingElement,\n          });\n        } else if (pointerDownState.drag.hasOccurred && !multiElement) {\n          if (\n            isBindingEnabled(this.state) &&\n            isBindingElement(draggingElement, false)\n          ) {\n            maybeBindLinearElement(\n              draggingElement,\n              this.state,\n              this.scene,\n              pointerCoords,\n              elementsMap,\n            );\n          }\n          this.setState({ suggestedBindings: [], startBoundElement: null });\n          if (!activeTool.locked) {\n            resetCursor(this.interactiveCanvas);\n            this.setState((prevState) => ({\n              draggingElement: null,\n              activeTool: updateActiveTool(this.state, {\n                type: \"selection\",\n              }),\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ...prevState.selectedElementIds,\n                  [draggingElement.id]: true,\n                },\n                prevState,\n              ),\n              selectedLinearElement: new LinearElementEditor(draggingElement),\n            }));\n          } else {\n            this.setState((prevState) => ({\n              draggingElement: null,\n            }));\n          }\n        }\n        return;\n      }\n\n      if (\n        activeTool.type !== \"selection\" &&\n        draggingElement &&\n        isInvisiblySmallElement(draggingElement)\n      ) {\n        // remove invisible element which was added in onPointerDown\n        this.scene.replaceAllElements(\n          this.scene\n            .getElementsIncludingDeleted()\n            .filter((el) => el.id !== draggingElement.id),\n        );\n        this.setState({\n          draggingElement: null,\n        });\n        return;\n      }\n\n      if (draggingElement) {\n        if (pointerDownState.drag.hasOccurred) {\n          const sceneCoords = viewportCoordsToSceneCoords(\n            childEvent,\n            this.state,\n          );\n\n          // when editing the points of a linear element, we check if the\n          // linear element still is in the frame afterwards\n          // if not, the linear element will be removed from its frame (if any)\n          if (\n            this.state.selectedLinearElement &&\n            this.state.selectedLinearElement.isDragging\n          ) {\n            const linearElement = this.scene.getElement(\n              this.state.selectedLinearElement.elementId,\n            );\n\n            if (linearElement?.frameId) {\n              const frame = getContainingFrame(linearElement);\n\n              if (frame && linearElement) {\n                if (\n                  !elementOverlapsWithFrame(\n                    linearElement,\n                    frame,\n                    this.scene.getNonDeletedElementsMap(),\n                  )\n                ) {\n                  // remove the linear element from all groups\n                  // before removing it from the frame as well\n                  mutateElement(linearElement, {\n                    groupIds: [],\n                  });\n\n                  removeElementsFromFrame(\n                    [linearElement],\n                    this.scene.getNonDeletedElementsMap(),\n                  );\n\n                  this.scene.informMutation();\n                }\n              }\n            }\n          } else {\n            // update the relationships between selected elements and frames\n            const topLayerFrame =\n              this.getTopLayerFrameAtSceneCoords(sceneCoords);\n\n            const selectedElements = this.scene.getSelectedElements(this.state);\n            let nextElements = this.scene.getElementsMapIncludingDeleted();\n\n            const updateGroupIdsAfterEditingGroup = (\n              elements: ExcalidrawElement[],\n            ) => {\n              if (elements.length > 0) {\n                for (const element of elements) {\n                  const index = element.groupIds.indexOf(\n                    this.state.editingGroupId!,\n                  );\n\n                  mutateElement(\n                    element,\n                    {\n                      groupIds: element.groupIds.slice(0, index),\n                    },\n                    false,\n                  );\n                }\n\n                nextElements.forEach((element) => {\n                  if (\n                    element.groupIds.length &&\n                    getElementsInGroup(\n                      nextElements,\n                      element.groupIds[element.groupIds.length - 1],\n                    ).length < 2\n                  ) {\n                    mutateElement(\n                      element,\n                      {\n                        groupIds: [],\n                      },\n                      false,\n                    );\n                  }\n                });\n\n                this.setState({\n                  editingGroupId: null,\n                });\n              }\n            };\n\n            if (\n              topLayerFrame &&\n              !this.state.selectedElementIds[topLayerFrame.id]\n            ) {\n              const elementsToAdd = selectedElements.filter(\n                (element) =>\n                  element.frameId !== topLayerFrame.id &&\n                  isElementInFrame(element, nextElements, this.state),\n              );\n\n              if (this.state.editingGroupId) {\n                updateGroupIdsAfterEditingGroup(elementsToAdd);\n              }\n\n              nextElements = addElementsToFrame(\n                nextElements,\n                elementsToAdd,\n                topLayerFrame,\n              );\n            } else if (!topLayerFrame) {\n              if (this.state.editingGroupId) {\n                const elementsToRemove = selectedElements.filter(\n                  (element) =>\n                    element.frameId &&\n                    !isElementInFrame(element, nextElements, this.state),\n                );\n\n                updateGroupIdsAfterEditingGroup(elementsToRemove);\n              }\n            }\n\n            nextElements = updateFrameMembershipOfSelectedElements(\n              nextElements,\n              this.state,\n              this,\n            );\n\n            this.scene.replaceAllElements(nextElements);\n          }\n        }\n\n        if (isFrameLikeElement(draggingElement)) {\n          const elementsInsideFrame = getElementsInNewFrame(\n            this.scene.getElementsIncludingDeleted(),\n            draggingElement,\n            this.scene.getNonDeletedElementsMap(),\n          );\n\n          this.scene.replaceAllElements(\n            addElementsToFrame(\n              this.scene.getElementsMapIncludingDeleted(),\n              elementsInsideFrame,\n              draggingElement,\n            ),\n          );\n        }\n\n        mutateElement(\n          draggingElement,\n          getNormalizedDimensions(draggingElement),\n        );\n      }\n\n      if (resizingElement) {\n        this.history.resumeRecording();\n      }\n\n      if (resizingElement && isInvisiblySmallElement(resizingElement)) {\n        this.scene.replaceAllElements(\n          this.scene\n            .getElementsIncludingDeleted()\n            .filter((el) => el.id !== resizingElement.id),\n        );\n      }\n\n      // handle frame membership for resizing frames and/or selected elements\n      if (pointerDownState.resize.isResizing) {\n        let nextElements = updateFrameMembershipOfSelectedElements(\n          this.scene.getElementsIncludingDeleted(),\n          this.state,\n          this,\n        );\n\n        const selectedFrames = this.scene\n          .getSelectedElements(this.state)\n          .filter((element): element is ExcalidrawFrameLikeElement =>\n            isFrameLikeElement(element),\n          );\n\n        for (const frame of selectedFrames) {\n          nextElements = replaceAllElementsInFrame(\n            nextElements,\n            getElementsInResizingFrame(\n              this.scene.getElementsIncludingDeleted(),\n              frame,\n              this.state,\n              elementsMap,\n            ),\n            frame,\n            this,\n          );\n        }\n\n        this.scene.replaceAllElements(nextElements);\n      }\n\n      // Code below handles selection when element(s) weren't\n      // drag or added to selection on pointer down phase.\n      const hitElement = pointerDownState.hit.element;\n      if (\n        this.state.selectedLinearElement?.elementId !== hitElement?.id &&\n        isLinearElement(hitElement)\n      ) {\n        const selectedELements = this.scene.getSelectedElements(this.state);\n        // set selectedLinearElement when no other element selected except\n        // the one we've hit\n        if (selectedELements.length === 1) {\n          this.setState({\n            selectedLinearElement: new LinearElementEditor(hitElement),\n          });\n        }\n      }\n\n      const pointerStart = this.lastPointerDownEvent;\n      const pointerEnd = this.lastPointerUpEvent || this.lastPointerMoveEvent;\n\n      if (isEraserActive(this.state) && pointerStart && pointerEnd) {\n        this.eraserTrail.endPath();\n\n        const draggedDistance = distance2d(\n          pointerStart.clientX,\n          pointerStart.clientY,\n          pointerEnd.clientX,\n          pointerEnd.clientY,\n        );\n\n        if (draggedDistance === 0) {\n          const scenePointer = viewportCoordsToSceneCoords(\n            {\n              clientX: pointerEnd.clientX,\n              clientY: pointerEnd.clientY,\n            },\n            this.state,\n          );\n          const hitElements = this.getElementsAtPosition(\n            scenePointer.x,\n            scenePointer.y,\n          );\n          hitElements.forEach((hitElement) =>\n            this.elementsPendingErasure.add(hitElement.id),\n          );\n        }\n        this.eraseElements();\n        return;\n      } else if (this.elementsPendingErasure.size) {\n        this.restoreReadyToEraseElements();\n      }\n\n      if (\n        hitElement &&\n        !pointerDownState.drag.hasOccurred &&\n        !pointerDownState.hit.wasAddedToSelection &&\n        // if we're editing a line, pointerup shouldn't switch selection if\n        // box selected\n        (!this.state.editingLinearElement ||\n          !pointerDownState.boxSelection.hasOccurred)\n      ) {\n        // when inside line editor, shift selects points instead\n        if (childEvent.shiftKey && !this.state.editingLinearElement) {\n          if (this.state.selectedElementIds[hitElement.id]) {\n            if (isSelectedViaGroup(this.state, hitElement)) {\n              this.setState((_prevState) => {\n                const nextSelectedElementIds = {\n                  ..._prevState.selectedElementIds,\n                };\n\n                // We want to unselect all groups hitElement is part of\n                // as well as all elements that are part of the groups\n                // hitElement is part of\n                for (const groupedElement of hitElement.groupIds.flatMap(\n                  (groupId) =>\n                    getElementsInGroup(\n                      this.scene.getNonDeletedElements(),\n                      groupId,\n                    ),\n                )) {\n                  delete nextSelectedElementIds[groupedElement.id];\n                }\n\n                return {\n                  selectedGroupIds: {\n                    ..._prevState.selectedElementIds,\n                    ...hitElement.groupIds\n                      .map((gId) => ({ [gId]: false }))\n                      .reduce((prev, acc) => ({ ...prev, ...acc }), {}),\n                  },\n                  selectedElementIds: makeNextSelectedElementIds(\n                    nextSelectedElementIds,\n                    _prevState,\n                  ),\n                };\n              });\n              // if not dragging a linear element point (outside editor)\n            } else if (!this.state.selectedLinearElement?.isDragging) {\n              // remove element from selection while\n              // keeping prev elements selected\n\n              this.setState((prevState) => {\n                const newSelectedElementIds = {\n                  ...prevState.selectedElementIds,\n                };\n                delete newSelectedElementIds[hitElement!.id];\n                const newSelectedElements = getSelectedElements(\n                  this.scene.getNonDeletedElements(),\n                  { selectedElementIds: newSelectedElementIds },\n                );\n\n                return {\n                  ...selectGroupsForSelectedElements(\n                    {\n                      editingGroupId: prevState.editingGroupId,\n                      selectedElementIds: newSelectedElementIds,\n                    },\n                    this.scene.getNonDeletedElements(),\n                    prevState,\n                    this,\n                  ),\n                  // set selectedLinearElement only if thats the only element selected\n                  selectedLinearElement:\n                    newSelectedElements.length === 1 &&\n                    isLinearElement(newSelectedElements[0])\n                      ? new LinearElementEditor(newSelectedElements[0])\n                      : prevState.selectedLinearElement,\n                };\n              });\n            }\n          } else if (\n            hitElement.frameId &&\n            this.state.selectedElementIds[hitElement.frameId]\n          ) {\n            // when hitElement is part of a selected frame, deselect the frame\n            // to avoid frame and containing elements selected simultaneously\n            this.setState((prevState) => {\n              const nextSelectedElementIds: {\n                [id: string]: true;\n              } = {\n                ...prevState.selectedElementIds,\n                [hitElement.id]: true,\n              };\n              // deselect the frame\n              delete nextSelectedElementIds[hitElement.frameId!];\n\n              // deselect groups containing the frame\n              (this.scene.getElement(hitElement.frameId!)?.groupIds ?? [])\n                .flatMap((gid) =>\n                  getElementsInGroup(this.scene.getNonDeletedElements(), gid),\n                )\n                .forEach((element) => {\n                  delete nextSelectedElementIds[element.id];\n                });\n\n              return {\n                ...selectGroupsForSelectedElements(\n                  {\n                    editingGroupId: prevState.editingGroupId,\n                    selectedElementIds: nextSelectedElementIds,\n                  },\n                  this.scene.getNonDeletedElements(),\n                  prevState,\n                  this,\n                ),\n                showHyperlinkPopup:\n                  hitElement.link || isEmbeddableElement(hitElement)\n                    ? \"info\"\n                    : false,\n              };\n            });\n          } else {\n            // add element to selection while keeping prev elements selected\n            this.setState((_prevState) => ({\n              selectedElementIds: makeNextSelectedElementIds(\n                {\n                  ..._prevState.selectedElementIds,\n                  [hitElement!.id]: true,\n                },\n                _prevState,\n              ),\n            }));\n          }\n        } else {\n          this.setState((prevState) => ({\n            ...selectGroupsForSelectedElements(\n              {\n                editingGroupId: prevState.editingGroupId,\n                selectedElementIds: { [hitElement.id]: true },\n              },\n              this.scene.getNonDeletedElements(),\n              prevState,\n              this,\n            ),\n            selectedLinearElement:\n              isLinearElement(hitElement) &&\n              // Don't set `selectedLinearElement` if its same as the hitElement, this is mainly to prevent resetting the `hoverPointIndex` to -1.\n              // Future we should update the API to take care of setting the correct `hoverPointIndex` when initialized\n              prevState.selectedLinearElement?.elementId !== hitElement.id\n                ? new LinearElementEditor(hitElement)\n                : prevState.selectedLinearElement,\n          }));\n        }\n      }\n\n      if (\n        !pointerDownState.drag.hasOccurred &&\n        !this.state.isResizing &&\n        ((hitElement &&\n          isHittingElementBoundingBoxWithoutHittingElement(\n            hitElement,\n            this.state,\n            this.frameNameBoundsCache,\n            pointerDownState.origin.x,\n            pointerDownState.origin.y,\n            this.scene.getNonDeletedElementsMap(),\n          )) ||\n          (!hitElement &&\n            pointerDownState.hit.hasHitCommonBoundingBoxOfSelectedElements))\n      ) {\n        if (this.state.editingLinearElement) {\n          this.setState({ editingLinearElement: null });\n        } else {\n          // Deselect selected elements\n          this.setState({\n            selectedElementIds: makeNextSelectedElementIds({}, this.state),\n            selectedGroupIds: {},\n            editingGroupId: null,\n            activeEmbeddable: null,\n          });\n        }\n        return;\n      }\n\n      if (\n        !activeTool.locked &&\n        activeTool.type !== \"freedraw\" &&\n        draggingElement &&\n        draggingElement.type !== \"selection\"\n      ) {\n        this.setState((prevState) => ({\n          selectedElementIds: makeNextSelectedElementIds(\n            {\n              ...prevState.selectedElementIds,\n              [draggingElement.id]: true,\n            },\n            prevState,\n          ),\n          showHyperlinkPopup:\n            isEmbeddableElement(draggingElement) && !draggingElement.link\n              ? \"editor\"\n              : prevState.showHyperlinkPopup,\n        }));\n      }\n\n      if (\n        activeTool.type !== \"selection\" ||\n        isSomeElementSelected(this.scene.getNonDeletedElements(), this.state)\n      ) {\n        this.history.resumeRecording();\n      }\n\n      if (pointerDownState.drag.hasOccurred || isResizing || isRotating) {\n        isBindingEnabled(this.state)\n          ? bindOrUnbindSelectedElements(\n              this.scene.getSelectedElements(this.state),\n              this.scene.getNonDeletedElements(),\n              elementsMap,\n            )\n          : unbindLinearElements(\n              this.scene.getSelectedElements(this.state),\n              elementsMap,\n            );\n      }\n\n      if (activeTool.type === \"laser\") {\n        this.laserTrails.endPath();\n        return;\n      }\n\n      if (!activeTool.locked && activeTool.type !== \"freedraw\") {\n        resetCursor(this.interactiveCanvas);\n        this.setState({\n          draggingElement: null,\n          suggestedBindings: [],\n          activeTool: updateActiveTool(this.state, { type: \"selection\" }),\n        });\n      } else {\n        this.setState({\n          draggingElement: null,\n          suggestedBindings: [],\n        });\n      }\n\n      if (\n        hitElement &&\n        this.lastPointerUpEvent &&\n        this.lastPointerDownEvent &&\n        this.lastPointerUpEvent.timeStamp -\n          this.lastPointerDownEvent.timeStamp <\n          300 &&\n        gesture.pointers.size <= 1 &&\n        isIframeLikeElement(hitElement) &&\n        this.isIframeLikeElementCenter(\n          hitElement,\n          this.lastPointerUpEvent,\n          pointerDownState.origin.x,\n          pointerDownState.origin.y,\n        )\n      ) {\n        this.handleEmbeddableCenterClick(hitElement);\n      }\n    });\n  }\n\n  private restoreReadyToEraseElements = () => {\n    this.elementsPendingErasure = new Set();\n    this.onSceneUpdated();\n  };\n\n  private eraseElements = () => {\n    let didChange = false;\n    const elements = this.scene.getElementsIncludingDeleted().map((ele) => {\n      if (\n        this.elementsPendingErasure.has(ele.id) ||\n        (ele.frameId && this.elementsPendingErasure.has(ele.frameId)) ||\n        (isBoundToContainer(ele) &&\n          this.elementsPendingErasure.has(ele.containerId))\n      ) {\n        didChange = true;\n        return newElementWith(ele, { isDeleted: true });\n      }\n      return ele;\n    });\n\n    this.elementsPendingErasure = new Set();\n\n    if (didChange) {\n      this.history.resumeRecording();\n      this.scene.replaceAllElements(elements);\n    }\n  };\n\n  private initializeImage = async ({\n    imageFile,\n    imageElement: _imageElement,\n    showCursorImagePreview = false,\n  }: {\n    imageFile: File;\n    imageElement: ExcalidrawImageElement;\n    showCursorImagePreview?: boolean;\n  }) => {\n    // at this point this should be guaranteed image file, but we do this check\n    // to satisfy TS down the line\n    if (!isSupportedImageFile(imageFile)) {\n      throw new Error(t(\"errors.unsupportedFileType\"));\n    }\n    const mimeType = imageFile.type;\n\n    setCursor(this.interactiveCanvas, \"wait\");\n\n    if (mimeType === MIME_TYPES.svg) {\n      try {\n        imageFile = SVGStringToFile(\n          await normalizeSVG(await imageFile.text()),\n          imageFile.name,\n        );\n      } catch (error: any) {\n        console.warn(error);\n        throw new Error(t(\"errors.svgImageInsertError\"));\n      }\n    }\n\n    // generate image id (by default the file digest) before any\n    // resizing/compression takes place to keep it more portable\n    const fileId = await ((this.props.generateIdForFile?.(\n      imageFile,\n    ) as Promise<FileId>) || generateIdFromFile(imageFile));\n\n    if (!fileId) {\n      console.warn(\n        \"Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one.\",\n      );\n      throw new Error(t(\"errors.imageInsertError\"));\n    }\n\n    const existingFileData = this.files[fileId];\n    if (!existingFileData?.dataURL) {\n      try {\n        imageFile = await resizeImageFile(imageFile, {\n          maxWidthOrHeight: DEFAULT_MAX_IMAGE_WIDTH_OR_HEIGHT,\n        });\n      } catch (error: any) {\n        console.error(\n          \"Error trying to resizing image file on insertion\",\n          error,\n        );\n      }\n\n      if (imageFile.size > MAX_ALLOWED_FILE_BYTES) {\n        throw new Error(\n          t(\"errors.fileTooBig\", {\n            maxSize: `${Math.trunc(MAX_ALLOWED_FILE_BYTES / 1024 / 1024)}MB`,\n          }),\n        );\n      }\n    }\n\n    if (showCursorImagePreview) {\n      const dataURL = this.files[fileId]?.dataURL;\n      // optimization so that we don't unnecessarily resize the original\n      // full-size file for cursor preview\n      // (it's much faster to convert the resized dataURL to File)\n      const resizedFile = dataURL && dataURLToFile(dataURL);\n\n      this.setImagePreviewCursor(resizedFile || imageFile);\n    }\n\n    const dataURL =\n      this.files[fileId]?.dataURL || (await getDataURL(imageFile));\n\n    const imageElement = mutateElement(\n      _imageElement,\n      {\n        fileId,\n      },\n      false,\n    ) as NonDeleted<InitializedExcalidrawImageElement>;\n\n    return new Promise<NonDeleted<InitializedExcalidrawImageElement>>(\n      async (resolve, reject) => {\n        try {\n          this.files = {\n            ...this.files,\n            [fileId]: {\n              mimeType,\n              id: fileId,\n              dataURL,\n              created: Date.now(),\n              lastRetrieved: Date.now(),\n            },\n          };\n          const cachedImageData = this.imageCache.get(fileId);\n          if (!cachedImageData) {\n            this.addNewImagesToImageCache();\n            await this.updateImageCache([imageElement]);\n          }\n          if (cachedImageData?.image instanceof Promise) {\n            await cachedImageData.image;\n          }\n          if (\n            this.state.pendingImageElementId !== imageElement.id &&\n            this.state.draggingElement?.id !== imageElement.id\n          ) {\n            this.initializeImageDimensions(imageElement, true);\n          }\n          resolve(imageElement);\n        } catch (error: any) {\n          console.error(error);\n          reject(new Error(t(\"errors.imageInsertError\")));\n        } finally {\n          if (!showCursorImagePreview) {\n            resetCursor(this.interactiveCanvas);\n          }\n        }\n      },\n    );\n  };\n\n  /**\n   * inserts image into elements array and rerenders\n   */\n  private insertImageElement = async (\n    imageElement: ExcalidrawImageElement,\n    imageFile: File,\n    showCursorImagePreview?: boolean,\n  ) => {\n    // we should be handling all cases upstream, but in case we forget to handle\n    // a future case, let's throw here\n    if (!this.isToolSupported(\"image\")) {\n      this.setState({ errorMessage: t(\"errors.imageToolNotSupported\") });\n      return;\n    }\n\n    this.scene.addNewElement(imageElement);\n\n    try {\n      return await this.initializeImage({\n        imageFile,\n        imageElement,\n        showCursorImagePreview,\n      });\n    } catch (error: any) {\n      mutateElement(imageElement, {\n        isDeleted: true,\n      });\n      this.actionManager.executeAction(actionFinalize);\n      this.setState({\n        errorMessage: error.message || t(\"errors.imageInsertError\"),\n      });\n      return null;\n    }\n  };\n\n  private setImagePreviewCursor = async (imageFile: File) => {\n    // mustn't be larger than 128 px\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Basic_User_Interface/Using_URL_values_for_the_cursor_property\n    const cursorImageSizePx = 96;\n\n    const imagePreview = await resizeImageFile(imageFile, {\n      maxWidthOrHeight: cursorImageSizePx,\n    });\n\n    let previewDataURL = await getDataURL(imagePreview);\n\n    // SVG cannot be resized via `resizeImageFile` so we resize by rendering to\n    // a small canvas\n    if (imageFile.type === MIME_TYPES.svg) {\n      const img = await loadHTMLImageElement(previewDataURL);\n\n      let height = Math.min(img.height, cursorImageSizePx);\n      let width = height * (img.width / img.height);\n\n      if (width > cursorImageSizePx) {\n        width = cursorImageSizePx;\n        height = width * (img.height / img.width);\n      }\n\n      const canvas = document.createElement(\"canvas\");\n      canvas.height = height;\n      canvas.width = width;\n      const context = canvas.getContext(\"2d\")!;\n\n      context.drawImage(img, 0, 0, width, height);\n\n      previewDataURL = canvas.toDataURL(MIME_TYPES.svg) as DataURL;\n    }\n\n    if (this.state.pendingImageElementId) {\n      setCursor(this.interactiveCanvas, `url(${previewDataURL}) 4 4, auto`);\n    }\n  };\n\n  private onImageAction = async ({\n    insertOnCanvasDirectly,\n  }: {\n    insertOnCanvasDirectly: boolean;\n  }) => {\n    try {\n      const clientX = this.state.width / 2 + this.state.offsetLeft;\n      const clientY = this.state.height / 2 + this.state.offsetTop;\n\n      const { x, y } = viewportCoordsToSceneCoords(\n        { clientX, clientY },\n        this.state,\n      );\n\n      const imageFile = await fileOpen({\n        description: \"Image\",\n        extensions: Object.keys(\n          IMAGE_MIME_TYPES,\n        ) as (keyof typeof IMAGE_MIME_TYPES)[],\n      });\n\n      const imageElement = this.createImageElement({\n        sceneX: x,\n        sceneY: y,\n        addToFrameUnderCursor: false,\n      });\n\n      if (insertOnCanvasDirectly) {\n        this.insertImageElement(imageElement, imageFile);\n        this.initializeImageDimensions(imageElement);\n        this.setState(\n          {\n            selectedElementIds: makeNextSelectedElementIds(\n              { [imageElement.id]: true },\n              this.state,\n            ),\n          },\n          () => {\n            this.actionManager.executeAction(actionFinalize);\n          },\n        );\n      } else {\n        this.setState(\n          {\n            pendingImageElementId: imageElement.id,\n          },\n          () => {\n            this.insertImageElement(\n              imageElement,\n              imageFile,\n              /* showCursorImagePreview */ true,\n            );\n          },\n        );\n      }\n    } catch (error: any) {\n      if (error.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      this.setState(\n        {\n          pendingImageElementId: null,\n          editingElement: null,\n          activeTool: updateActiveTool(this.state, { type: \"selection\" }),\n        },\n        () => {\n          this.actionManager.executeAction(actionFinalize);\n        },\n      );\n    }\n  };\n\n  private initializeImageDimensions = (\n    imageElement: ExcalidrawImageElement,\n    forceNaturalSize = false,\n  ) => {\n    const image =\n      isInitializedImageElement(imageElement) &&\n      this.imageCache.get(imageElement.fileId)?.image;\n\n    if (!image || image instanceof Promise) {\n      if (\n        imageElement.width < DRAGGING_THRESHOLD / this.state.zoom.value &&\n        imageElement.height < DRAGGING_THRESHOLD / this.state.zoom.value\n      ) {\n        const placeholderSize = 100 / this.state.zoom.value;\n        mutateElement(imageElement, {\n          x: imageElement.x - placeholderSize / 2,\n          y: imageElement.y - placeholderSize / 2,\n          width: placeholderSize,\n          height: placeholderSize,\n        });\n      }\n\n      return;\n    }\n\n    if (\n      forceNaturalSize ||\n      // if user-created bounding box is below threshold, assume the\n      // intention was to click instead of drag, and use the image's\n      // intrinsic size\n      (imageElement.width < DRAGGING_THRESHOLD / this.state.zoom.value &&\n        imageElement.height < DRAGGING_THRESHOLD / this.state.zoom.value)\n    ) {\n      const minHeight = Math.max(this.state.height - 120, 160);\n      // max 65% of canvas height, clamped to <300px, vh - 120px>\n      const maxHeight = Math.min(\n        minHeight,\n        Math.floor(this.state.height * 0.5) / this.state.zoom.value,\n      );\n\n      const height = Math.min(image.naturalHeight, maxHeight);\n      const width = height * (image.naturalWidth / image.naturalHeight);\n\n      // add current imageElement width/height to account for previous centering\n      // of the placeholder image\n      const x = imageElement.x + imageElement.width / 2 - width / 2;\n      const y = imageElement.y + imageElement.height / 2 - height / 2;\n\n      mutateElement(imageElement, { x, y, width, height });\n    }\n  };\n\n  /** updates image cache, refreshing updated elements and/or setting status\n      to error for images that fail during <img> element creation */\n  private updateImageCache = async (\n    elements: readonly InitializedExcalidrawImageElement[],\n    files = this.files,\n  ) => {\n    const { updatedFiles, erroredFiles } = await _updateImageCache({\n      imageCache: this.imageCache,\n      fileIds: elements.map((element) => element.fileId),\n      files,\n    });\n    if (updatedFiles.size || erroredFiles.size) {\n      for (const element of elements) {\n        if (updatedFiles.has(element.fileId)) {\n          ShapeCache.delete(element);\n        }\n      }\n    }\n    if (erroredFiles.size) {\n      this.scene.replaceAllElements(\n        this.scene.getElementsIncludingDeleted().map((element) => {\n          if (\n            isInitializedImageElement(element) &&\n            erroredFiles.has(element.fileId)\n          ) {\n            return newElementWith(element, {\n              status: \"error\",\n            });\n          }\n          return element;\n        }),\n      );\n    }\n\n    return { updatedFiles, erroredFiles };\n  };\n\n  /** adds new images to imageCache and re-renders if needed */\n  private addNewImagesToImageCache = async (\n    imageElements: InitializedExcalidrawImageElement[] = getInitializedImageElements(\n      this.scene.getNonDeletedElements(),\n    ),\n    files: BinaryFiles = this.files,\n  ) => {\n    const uncachedImageElements = imageElements.filter(\n      (element) => !element.isDeleted && !this.imageCache.has(element.fileId),\n    );\n\n    if (uncachedImageElements.length) {\n      const { updatedFiles } = await this.updateImageCache(\n        uncachedImageElements,\n        files,\n      );\n      if (updatedFiles.size) {\n        this.scene.informMutation();\n      }\n    }\n  };\n\n  /** generally you should use `addNewImagesToImageCache()` directly if you need\n   *  to render new images. This is just a failsafe  */\n  private scheduleImageRefresh = throttle(() => {\n    this.addNewImagesToImageCache();\n  }, IMAGE_RENDER_TIMEOUT);\n\n  private updateBindingEnabledOnPointerMove = (\n    event: React.PointerEvent<HTMLElement>,\n  ) => {\n    const shouldEnableBinding = shouldEnableBindingForPointerEvent(event);\n    if (this.state.isBindingEnabled !== shouldEnableBinding) {\n      this.setState({ isBindingEnabled: shouldEnableBinding });\n    }\n  };\n\n  private maybeSuggestBindingAtCursor = (pointerCoords: {\n    x: number;\n    y: number;\n  }): void => {\n    const hoveredBindableElement = getHoveredElementForBinding(\n      pointerCoords,\n      this.scene.getNonDeletedElements(),\n      this.scene.getNonDeletedElementsMap(),\n    );\n    this.setState({\n      suggestedBindings:\n        hoveredBindableElement != null ? [hoveredBindableElement] : [],\n    });\n  };\n\n  private maybeSuggestBindingsForLinearElementAtCoords = (\n    linearElement: NonDeleted<ExcalidrawLinearElement>,\n    /** scene coords */\n    pointerCoords: {\n      x: number;\n      y: number;\n    }[],\n    // During line creation the start binding hasn't been written yet\n    // into `linearElement`\n    oppositeBindingBoundElement?: ExcalidrawBindableElement | null,\n  ): void => {\n    if (!pointerCoords.length) {\n      return;\n    }\n\n    const suggestedBindings = pointerCoords.reduce(\n      (acc: NonDeleted<ExcalidrawBindableElement>[], coords) => {\n        const hoveredBindableElement = getHoveredElementForBinding(\n          coords,\n          this.scene.getNonDeletedElements(),\n          this.scene.getNonDeletedElementsMap(),\n        );\n        if (\n          hoveredBindableElement != null &&\n          !isLinearElementSimpleAndAlreadyBound(\n            linearElement,\n            oppositeBindingBoundElement?.id,\n            hoveredBindableElement,\n          )\n        ) {\n          acc.push(hoveredBindableElement);\n        }\n        return acc;\n      },\n      [],\n    );\n\n    this.setState({ suggestedBindings });\n  };\n\n  private maybeSuggestBindingForAll(\n    selectedElements: NonDeleted<ExcalidrawElement>[],\n  ): void {\n    if (selectedElements.length > 50) {\n      return;\n    }\n    const suggestedBindings = getEligibleElementsForBinding(\n      selectedElements,\n      this.scene.getNonDeletedElements(),\n      this.scene.getNonDeletedElementsMap(),\n    );\n    this.setState({ suggestedBindings });\n  }\n\n  private clearSelection(hitElement: ExcalidrawElement | null): void {\n    this.setState((prevState) => ({\n      selectedElementIds: makeNextSelectedElementIds({}, prevState),\n      activeEmbeddable: null,\n      selectedGroupIds: {},\n      // Continue editing the same group if the user selected a different\n      // element from it\n      editingGroupId:\n        prevState.editingGroupId &&\n        hitElement != null &&\n        isElementInGroup(hitElement, prevState.editingGroupId)\n          ? prevState.editingGroupId\n          : null,\n    }));\n    this.setState({\n      selectedElementIds: makeNextSelectedElementIds({}, this.state),\n      activeEmbeddable: null,\n      previousSelectedElementIds: this.state.selectedElementIds,\n    });\n  }\n\n  private handleInteractiveCanvasRef = (canvas: HTMLCanvasElement | null) => {\n    // canvas is null when unmounting\n    if (canvas !== null) {\n      this.interactiveCanvas = canvas;\n\n      // -----------------------------------------------------------------------\n      // NOTE wheel, touchstart, touchend events must be registered outside\n      // of react because react binds them them passively (so we can't prevent\n      // default on them)\n      this.interactiveCanvas.addEventListener(EVENT.WHEEL, this.handleWheel);\n      this.interactiveCanvas.addEventListener(\n        EVENT.TOUCH_START,\n        this.onTouchStart,\n      );\n      this.interactiveCanvas.addEventListener(EVENT.TOUCH_END, this.onTouchEnd);\n      // -----------------------------------------------------------------------\n    } else {\n      this.interactiveCanvas?.removeEventListener(\n        EVENT.WHEEL,\n        this.handleWheel,\n      );\n      this.interactiveCanvas?.removeEventListener(\n        EVENT.TOUCH_START,\n        this.onTouchStart,\n      );\n      this.interactiveCanvas?.removeEventListener(\n        EVENT.TOUCH_END,\n        this.onTouchEnd,\n      );\n    }\n  };\n\n  private handleAppOnDrop = async (event: React.DragEvent<HTMLDivElement>) => {\n    // must be retrieved first, in the same frame\n    const { file, fileHandle } = await getFileFromEvent(event);\n    const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n      event,\n      this.state,\n    );\n\n    try {\n      // if image tool not supported, don't show an error here and let it fall\n      // through so we still support importing scene data from images. If no\n      // scene data encoded, we'll show an error then\n      if (isSupportedImageFile(file) && this.isToolSupported(\"image\")) {\n        // first attempt to decode scene from the image if it's embedded\n        // ---------------------------------------------------------------------\n\n        if (file?.type === MIME_TYPES.png || file?.type === MIME_TYPES.svg) {\n          try {\n            const scene = await loadFromBlob(\n              file,\n              this.state,\n              this.scene.getElementsIncludingDeleted(),\n              fileHandle,\n            );\n            this.syncActionResult({\n              ...scene,\n              appState: {\n                ...(scene.appState || this.state),\n                isLoading: false,\n              },\n              replaceFiles: true,\n              commitToHistory: true,\n            });\n            return;\n          } catch (error: any) {\n            if (error.name !== \"EncodingError\") {\n              throw error;\n            }\n          }\n        }\n\n        // if no scene is embedded or we fail for whatever reason, fall back\n        // to importing as regular image\n        // ---------------------------------------------------------------------\n\n        const imageElement = this.createImageElement({ sceneX, sceneY });\n        this.insertImageElement(imageElement, file);\n        this.initializeImageDimensions(imageElement);\n        this.setState({\n          selectedElementIds: makeNextSelectedElementIds(\n            { [imageElement.id]: true },\n            this.state,\n          ),\n        });\n\n        return;\n      }\n    } catch (error: any) {\n      return this.setState({\n        isLoading: false,\n        errorMessage: error.message,\n      });\n    }\n\n    const libraryJSON = event.dataTransfer.getData(MIME_TYPES.excalidrawlib);\n    if (libraryJSON && typeof libraryJSON === \"string\") {\n      try {\n        const libraryItems = parseLibraryJSON(libraryJSON);\n        this.addElementsFromPasteOrLibrary({\n          elements: distributeLibraryItemsOnSquareGrid(libraryItems),\n          position: event,\n          files: null,\n        });\n      } catch (error: any) {\n        this.setState({ errorMessage: error.message });\n      }\n      return;\n    }\n\n    if (file) {\n      // Attempt to parse an excalidraw/excalidrawlib file\n      await this.loadFileToCanvas(file, fileHandle);\n    }\n\n    if (event.dataTransfer?.types?.includes(\"text/plain\")) {\n      const text = event.dataTransfer?.getData(\"text\");\n      if (\n        text &&\n        embeddableURLValidator(text, this.props.validateEmbeddable) &&\n        (/^(http|https):\\/\\/[^\\s/$.?#].[^\\s]*$/.test(text) ||\n          getEmbedLink(text)?.type === \"video\")\n      ) {\n        const embeddable = this.insertEmbeddableElement({\n          sceneX,\n          sceneY,\n          link: normalizeLink(text),\n        });\n        if (embeddable) {\n          this.setState({ selectedElementIds: { [embeddable.id]: true } });\n        }\n      }\n    }\n  };\n\n  loadFileToCanvas = async (\n    file: File,\n    fileHandle: FileSystemHandle | null,\n  ) => {\n    file = await normalizeFile(file);\n    try {\n      const ret = await loadSceneOrLibraryFromBlob(\n        file,\n        this.state,\n        this.scene.getElementsIncludingDeleted(),\n        fileHandle,\n      );\n      if (ret.type === MIME_TYPES.excalidraw) {\n        this.setState({ isLoading: true });\n        this.syncActionResult({\n          ...ret.data,\n          appState: {\n            ...(ret.data.appState || this.state),\n            isLoading: false,\n          },\n          replaceFiles: true,\n          commitToHistory: true,\n        });\n      } else if (ret.type === MIME_TYPES.excalidrawlib) {\n        await this.library\n          .updateLibrary({\n            libraryItems: file,\n            merge: true,\n            openLibraryMenu: true,\n          })\n          .catch((error) => {\n            console.error(error);\n            this.setState({ errorMessage: t(\"errors.importLibraryError\") });\n          });\n      }\n    } catch (error: any) {\n      if (\n        error instanceof ImageSceneDataError &&\n        error.code === \"IMAGE_NOT_CONTAINS_SCENE_DATA\" &&\n        !this.isToolSupported(\"image\")\n      ) {\n        this.setState({\n          isLoading: false,\n          errorMessage: t(\"errors.imageToolNotSupported\"),\n        });\n        return;\n      }\n      this.setState({ isLoading: false, errorMessage: error.message });\n    }\n  };\n\n  private handleCanvasContextMenu = (\n    event: React.MouseEvent<HTMLElement | HTMLCanvasElement>,\n  ) => {\n    event.preventDefault();\n\n    if (\n      ((\"pointerType\" in event.nativeEvent &&\n        event.nativeEvent.pointerType === \"touch\") ||\n        (\"pointerType\" in event.nativeEvent &&\n          event.nativeEvent.pointerType === \"pen\" &&\n          // always allow if user uses a pen secondary button\n          event.button !== POINTER_BUTTON.SECONDARY)) &&\n      this.state.activeTool.type !== \"selection\"\n    ) {\n      return;\n    }\n\n    const { x, y } = viewportCoordsToSceneCoords(event, this.state);\n    const element = this.getElementAtPosition(x, y, {\n      preferSelected: true,\n      includeLockedElements: true,\n    });\n\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const isHittingCommonBoundBox =\n      this.isHittingCommonBoundingBoxOfSelectedElements(\n        { x, y },\n        selectedElements,\n      );\n\n    const type = element || isHittingCommonBoundBox ? \"element\" : \"canvas\";\n\n    const container = this.excalidrawContainerRef.current!;\n    const { top: offsetTop, left: offsetLeft } =\n      container.getBoundingClientRect();\n    const left = event.clientX - offsetLeft;\n    const top = event.clientY - offsetTop;\n\n    trackEvent(\"contextMenu\", \"openContextMenu\", type);\n\n    this.setState(\n      {\n        ...(element && !this.state.selectedElementIds[element.id]\n          ? {\n              ...this.state,\n              ...selectGroupsForSelectedElements(\n                {\n                  editingGroupId: this.state.editingGroupId,\n                  selectedElementIds: { [element.id]: true },\n                },\n                this.scene.getNonDeletedElements(),\n                this.state,\n                this,\n              ),\n              selectedLinearElement: isLinearElement(element)\n                ? new LinearElementEditor(element)\n                : null,\n            }\n          : this.state),\n        showHyperlinkPopup: false,\n      },\n      () => {\n        this.setState({\n          contextMenu: { top, left, items: this.getContextMenuItems(type) },\n        });\n      },\n    );\n  };\n\n  private maybeDragNewGenericElement = (\n    pointerDownState: PointerDownState,\n    event: MouseEvent | KeyboardEvent,\n  ): void => {\n    const draggingElement = this.state.draggingElement;\n    const pointerCoords = pointerDownState.lastCoords;\n    if (!draggingElement) {\n      return;\n    }\n    if (\n      draggingElement.type === \"selection\" &&\n      this.state.activeTool.type !== \"eraser\"\n    ) {\n      dragNewElement(\n        draggingElement,\n        this.state.activeTool.type,\n        pointerDownState.origin.x,\n        pointerDownState.origin.y,\n        pointerCoords.x,\n        pointerCoords.y,\n        distance(pointerDownState.origin.x, pointerCoords.x),\n        distance(pointerDownState.origin.y, pointerCoords.y),\n        shouldMaintainAspectRatio(event),\n        shouldResizeFromCenter(event),\n      );\n    } else {\n      let [gridX, gridY] = getGridPoint(\n        pointerCoords.x,\n        pointerCoords.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n      );\n\n      const image =\n        isInitializedImageElement(draggingElement) &&\n        this.imageCache.get(draggingElement.fileId)?.image;\n      const aspectRatio =\n        image && !(image instanceof Promise)\n          ? image.width / image.height\n          : null;\n\n      this.maybeCacheReferenceSnapPoints(event, [draggingElement]);\n\n      const { snapOffset, snapLines } = snapNewElement(\n        draggingElement,\n        this.state,\n        event,\n        {\n          x:\n            pointerDownState.originInGrid.x +\n            (this.state.originSnapOffset?.x ?? 0),\n          y:\n            pointerDownState.originInGrid.y +\n            (this.state.originSnapOffset?.y ?? 0),\n        },\n        {\n          x: gridX - pointerDownState.originInGrid.x,\n          y: gridY - pointerDownState.originInGrid.y,\n        },\n        this.scene.getNonDeletedElementsMap(),\n      );\n\n      gridX += snapOffset.x;\n      gridY += snapOffset.y;\n\n      this.setState({\n        snapLines,\n      });\n\n      dragNewElement(\n        draggingElement,\n        this.state.activeTool.type,\n        pointerDownState.originInGrid.x,\n        pointerDownState.originInGrid.y,\n        gridX,\n        gridY,\n        distance(pointerDownState.originInGrid.x, gridX),\n        distance(pointerDownState.originInGrid.y, gridY),\n        isImageElement(draggingElement)\n          ? !shouldMaintainAspectRatio(event)\n          : shouldMaintainAspectRatio(event),\n        shouldResizeFromCenter(event),\n        aspectRatio,\n        this.state.originSnapOffset,\n      );\n\n      this.maybeSuggestBindingForAll([draggingElement]);\n\n      // highlight elements that are to be added to frames on frames creation\n      if (\n        this.state.activeTool.type === TOOL_TYPE.frame ||\n        this.state.activeTool.type === TOOL_TYPE.magicframe\n      ) {\n        this.setState({\n          elementsToHighlight: getElementsInResizingFrame(\n            this.scene.getNonDeletedElements(),\n            draggingElement as ExcalidrawFrameLikeElement,\n            this.state,\n            this.scene.getNonDeletedElementsMap(),\n          ),\n        });\n      }\n    }\n  };\n\n  private maybeHandleResize = (\n    pointerDownState: PointerDownState,\n    event: MouseEvent | KeyboardEvent,\n  ): boolean => {\n    const selectedElements = this.scene.getSelectedElements(this.state);\n    const selectedFrames = selectedElements.filter(\n      (element): element is ExcalidrawFrameLikeElement =>\n        isFrameLikeElement(element),\n    );\n\n    const transformHandleType = pointerDownState.resize.handleType;\n\n    if (selectedFrames.length > 0 && transformHandleType === \"rotation\") {\n      return false;\n    }\n\n    this.setState({\n      // TODO: rename this state field to \"isScaling\" to distinguish\n      // it from the generic \"isResizing\" which includes scaling and\n      // rotating\n      isResizing: transformHandleType && transformHandleType !== \"rotation\",\n      isRotating: transformHandleType === \"rotation\",\n      activeEmbeddable: null,\n    });\n    const pointerCoords = pointerDownState.lastCoords;\n    let [resizeX, resizeY] = getGridPoint(\n      pointerCoords.x - pointerDownState.resize.offset.x,\n      pointerCoords.y - pointerDownState.resize.offset.y,\n      event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n    );\n\n    const frameElementsOffsetsMap = new Map<\n      string,\n      {\n        x: number;\n        y: number;\n      }\n    >();\n\n    selectedFrames.forEach((frame) => {\n      const elementsInFrame = getFrameChildren(\n        this.scene.getNonDeletedElements(),\n        frame.id,\n      );\n\n      elementsInFrame.forEach((element) => {\n        frameElementsOffsetsMap.set(frame.id + element.id, {\n          x: element.x - frame.x,\n          y: element.y - frame.y,\n        });\n      });\n    });\n\n    // check needed for avoiding flickering when a key gets pressed\n    // during dragging\n    if (!this.state.selectedElementsAreBeingDragged) {\n      const [gridX, gridY] = getGridPoint(\n        pointerCoords.x,\n        pointerCoords.y,\n        event[KEYS.CTRL_OR_CMD] ? null : this.state.gridSize,\n      );\n\n      const dragOffset = {\n        x: gridX - pointerDownState.originInGrid.x,\n        y: gridY - pointerDownState.originInGrid.y,\n      };\n\n      const originalElements = [...pointerDownState.originalElements.values()];\n\n      this.maybeCacheReferenceSnapPoints(event, selectedElements);\n\n      const { snapOffset, snapLines } = snapResizingElements(\n        selectedElements,\n        getSelectedElements(originalElements, this.state),\n        this.state,\n        event,\n        dragOffset,\n        transformHandleType,\n      );\n\n      resizeX += snapOffset.x;\n      resizeY += snapOffset.y;\n\n      this.setState({\n        snapLines,\n      });\n    }\n\n    if (\n      transformElements(\n        pointerDownState.originalElements,\n        transformHandleType,\n        selectedElements,\n        this.scene.getElementsMapIncludingDeleted(),\n        shouldRotateWithDiscreteAngle(event),\n        shouldResizeFromCenter(event),\n        selectedElements.length === 1 && isImageElement(selectedElements[0])\n          ? !shouldMaintainAspectRatio(event)\n          : shouldMaintainAspectRatio(event),\n        resizeX,\n        resizeY,\n        pointerDownState.resize.center.x,\n        pointerDownState.resize.center.y,\n      )\n    ) {\n      this.maybeSuggestBindingForAll(selectedElements);\n\n      const elementsToHighlight = new Set<ExcalidrawElement>();\n      selectedFrames.forEach((frame) => {\n        getElementsInResizingFrame(\n          this.scene.getNonDeletedElements(),\n          frame,\n          this.state,\n          this.scene.getNonDeletedElementsMap(),\n        ).forEach((element) => elementsToHighlight.add(element));\n      });\n\n      this.setState({\n        elementsToHighlight: [...elementsToHighlight],\n      });\n\n      return true;\n    }\n    return false;\n  };\n\n  private getContextMenuItems = (\n    type: \"canvas\" | \"element\",\n  ): ContextMenuItems => {\n    const options: ContextMenuItems = [];\n\n    options.push(actionCopyAsPng, actionCopyAsSvg);\n\n    // canvas contextMenu\n    // -------------------------------------------------------------------------\n\n    if (type === \"canvas\") {\n      if (this.state.viewModeEnabled) {\n        return [\n          ...options,\n          actionToggleGridMode,\n          actionToggleZenMode,\n          actionToggleViewMode,\n          actionToggleStats,\n        ];\n      }\n\n      return [\n        actionPaste,\n        CONTEXT_MENU_SEPARATOR,\n        actionCopyAsPng,\n        actionCopyAsSvg,\n        copyText,\n        CONTEXT_MENU_SEPARATOR,\n        actionSelectAll,\n        actionUnlockAllElements,\n        CONTEXT_MENU_SEPARATOR,\n        actionToggleGridMode,\n        actionToggleObjectsSnapMode,\n        actionToggleZenMode,\n        actionToggleViewMode,\n        actionToggleStats,\n      ];\n    }\n\n    // element contextMenu\n    // -------------------------------------------------------------------------\n\n    options.push(copyText);\n\n    if (this.state.viewModeEnabled) {\n      return [actionCopy, ...options];\n    }\n\n    return [\n      actionCut,\n      actionCopy,\n      actionPaste,\n      actionSelectAllElementsInFrame,\n      actionRemoveAllElementsFromFrame,\n      CONTEXT_MENU_SEPARATOR,\n      ...options,\n      CONTEXT_MENU_SEPARATOR,\n      actionCopyStyles,\n      actionPasteStyles,\n      CONTEXT_MENU_SEPARATOR,\n      actionGroup,\n      actionUnbindText,\n      actionBindText,\n      actionWrapTextInContainer,\n      actionUngroup,\n      CONTEXT_MENU_SEPARATOR,\n      actionAddToLibrary,\n      CONTEXT_MENU_SEPARATOR,\n      actionSendBackward,\n      actionBringForward,\n      actionSendToBack,\n      actionBringToFront,\n      CONTEXT_MENU_SEPARATOR,\n      actionFlipHorizontal,\n      actionFlipVertical,\n      CONTEXT_MENU_SEPARATOR,\n      actionToggleLinearEditor,\n      actionLink,\n      actionDuplicateSelection,\n      actionToggleElementLock,\n      CONTEXT_MENU_SEPARATOR,\n      actionDeleteSelected,\n    ];\n  };\n\n  private handleWheel = withBatchedUpdates(\n    (\n      event: WheelEvent | React.WheelEvent<HTMLDivElement | HTMLCanvasElement>,\n    ) => {\n      event.preventDefault();\n      if (isPanning) {\n        return;\n      }\n\n      const { deltaX, deltaY } = event;\n      // note that event.ctrlKey is necessary to handle pinch zooming\n      if (event.metaKey || event.ctrlKey) {\n        const sign = Math.sign(deltaY);\n        const MAX_STEP = ZOOM_STEP * 100;\n        const absDelta = Math.abs(deltaY);\n        let delta = deltaY;\n        if (absDelta > MAX_STEP) {\n          delta = MAX_STEP * sign;\n        }\n\n        let newZoom = this.state.zoom.value - delta / 100;\n        // increase zoom steps the more zoomed-in we are (applies to >100% only)\n        newZoom +=\n          Math.log10(Math.max(1, this.state.zoom.value)) *\n          -sign *\n          // reduced amplification for small deltas (small movements on a trackpad)\n          Math.min(1, absDelta / 20);\n\n        this.translateCanvas((state) => ({\n          ...getStateForZoom(\n            {\n              viewportX: this.lastViewportPosition.x,\n              viewportY: this.lastViewportPosition.y,\n              nextZoom: getNormalizedZoom(newZoom),\n            },\n            state,\n          ),\n          shouldCacheIgnoreZoom: true,\n        }));\n        this.resetShouldCacheIgnoreZoomDebounced();\n        return;\n      }\n\n      // scroll horizontally when shift pressed\n      if (event.shiftKey) {\n        this.translateCanvas(({ zoom, scrollX }) => ({\n          // on Mac, shift+wheel tends to result in deltaX\n          scrollX: scrollX - (deltaY || deltaX) / zoom.value,\n        }));\n        return;\n      }\n\n      this.translateCanvas(({ zoom, scrollX, scrollY }) => ({\n        scrollX: scrollX - deltaX / zoom.value,\n        scrollY: scrollY - deltaY / zoom.value,\n      }));\n    },\n  );\n\n  private getTextWysiwygSnappedToCenterPosition(\n    x: number,\n    y: number,\n    appState: AppState,\n    container?: ExcalidrawTextContainer | null,\n  ) {\n    if (container) {\n      let elementCenterX = container.x + container.width / 2;\n      let elementCenterY = container.y + container.height / 2;\n\n      const elementCenter = getContainerCenter(\n        container,\n        appState,\n        this.scene.getNonDeletedElementsMap(),\n      );\n      if (elementCenter) {\n        elementCenterX = elementCenter.x;\n        elementCenterY = elementCenter.y;\n      }\n      const distanceToCenter = Math.hypot(\n        x - elementCenterX,\n        y - elementCenterY,\n      );\n      const isSnappedToCenter =\n        distanceToCenter < TEXT_TO_CENTER_SNAP_THRESHOLD;\n      if (isSnappedToCenter) {\n        const { x: viewportX, y: viewportY } = sceneCoordsToViewportCoords(\n          { sceneX: elementCenterX, sceneY: elementCenterY },\n          appState,\n        );\n        return { viewportX, viewportY, elementCenterX, elementCenterY };\n      }\n    }\n  }\n\n  private savePointer = (x: number, y: number, button: \"up\" | \"down\") => {\n    if (!x || !y) {\n      return;\n    }\n    const { x: sceneX, y: sceneY } = viewportCoordsToSceneCoords(\n      { clientX: x, clientY: y },\n      this.state,\n    );\n\n    if (isNaN(sceneX) || isNaN(sceneY)) {\n      // sometimes the pointer goes off screen\n    }\n\n    const pointer: CollaboratorPointer = {\n      x: sceneX,\n      y: sceneY,\n      tool: this.state.activeTool.type === \"laser\" ? \"laser\" : \"pointer\",\n    };\n\n    this.props.onPointerUpdate?.({\n      pointer,\n      button,\n      pointersMap: gesture.pointers,\n    });\n  };\n\n  private resetShouldCacheIgnoreZoomDebounced = debounce(() => {\n    if (!this.unmounted) {\n      this.setState({ shouldCacheIgnoreZoom: false });\n    }\n  }, 300);\n\n  private updateDOMRect = (cb?: () => void) => {\n    if (this.excalidrawContainerRef?.current) {\n      const excalidrawContainer = this.excalidrawContainerRef.current;\n      const {\n        width,\n        height,\n        left: offsetLeft,\n        top: offsetTop,\n      } = excalidrawContainer.getBoundingClientRect();\n      const {\n        width: currentWidth,\n        height: currentHeight,\n        offsetTop: currentOffsetTop,\n        offsetLeft: currentOffsetLeft,\n      } = this.state;\n\n      if (\n        width === currentWidth &&\n        height === currentHeight &&\n        offsetLeft === currentOffsetLeft &&\n        offsetTop === currentOffsetTop\n      ) {\n        if (cb) {\n          cb();\n        }\n        return;\n      }\n\n      this.setState(\n        {\n          width,\n          height,\n          offsetLeft,\n          offsetTop,\n        },\n        () => {\n          cb && cb();\n        },\n      );\n    }\n  };\n\n  public refresh = () => {\n    this.setState({ ...this.getCanvasOffsets() });\n  };\n\n  private getCanvasOffsets(): Pick<AppState, \"offsetTop\" | \"offsetLeft\"> {\n    if (this.excalidrawContainerRef?.current) {\n      const excalidrawContainer = this.excalidrawContainerRef.current;\n      const { left, top } = excalidrawContainer.getBoundingClientRect();\n      return {\n        offsetLeft: left,\n        offsetTop: top,\n      };\n    }\n    return {\n      offsetLeft: 0,\n      offsetTop: 0,\n    };\n  }\n\n  private async updateLanguage() {\n    const currentLang =\n      languages.find((lang) => lang.code === this.props.langCode) ||\n      defaultLang;\n    await setLanguage(currentLang);\n    this.setAppState({});\n  }\n}\n\n// -----------------------------------------------------------------------------\n// TEST HOOKS\n// -----------------------------------------------------------------------------\n\ndeclare global {\n  interface Window {\n    h: {\n      elements: readonly ExcalidrawElement[];\n      state: AppState;\n      setState: React.Component<any, AppState>[\"setState\"];\n      app: InstanceType<typeof App>;\n      history: History;\n    };\n  }\n}\n\nif (import.meta.env.MODE === ENV.TEST || import.meta.env.DEV) {\n  window.h = window.h || ({} as Window[\"h\"]);\n\n  Object.defineProperties(window.h, {\n    elements: {\n      configurable: true,\n      get() {\n        return this.app?.scene.getElementsIncludingDeleted();\n      },\n      set(elements: ExcalidrawElement[]) {\n        return this.app?.scene.replaceAllElements(elements);\n      },\n    },\n  });\n}\n\nexport default App;\n", ".visually-hidden {\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px, 1px, 1px, 1px);\n  white-space: nowrap; /* added line */\n  user-select: none;\n}\n\n.LoadingMessage {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n.LoadingMessage .Spinner {\n  font-size: 2.8em;\n}\n.LoadingMessage .LoadingMessage-text {\n  margin-top: 1em;\n  font-size: 0.8em;\n}\n\n.LoadingMessage--dark {\n  background-color: #121212;\n  color: #ced4da;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NzcyIsInNvdXJjZXMiOlsiYXBwLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOzs7QUFJSjtFQUNFO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuLnZpc3VhbGx5LWhpZGRlbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDFweDtcbiAgd2lkdGg6IDFweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgY2xpcDogcmVjdCgxcHgsIDFweCwgMXB4LCAxcHgpO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwOyAvKiBhZGRlZCBsaW5lICovXG4gIHVzZXItc2VsZWN0OiBub25lO1xufVxuXG4uTG9hZGluZ01lc3NhZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgei1pbmRleDogOTk5O1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgLlNwaW5uZXIge1xuICAgIGZvbnQtc2l6ZTogMi44ZW07XG4gIH1cblxuICAuTG9hZGluZ01lc3NhZ2UtdGV4dCB7XG4gICAgbWFyZ2luLXRvcDogMWVtO1xuICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gIH1cbn1cblxuLkxvYWRpbmdNZXNzYWdlLS1kYXJrIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzEyMTIxMjtcbiAgY29sb3I6ICNjZWQ0ZGE7XG59XG4iXX0= */", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n:export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw {\n  --theme-filter: none;\n  --button-destructive-bg-color: #ffe3e3;\n  --button-destructive-color: #c92a2a;\n  --button-gray-1: #e9ecef;\n  --button-gray-2: #ced4da;\n  --button-gray-3: #adb5bd;\n  --button-special-active-bg-color: #ebfbee;\n  --dialog-border-color: var(--color-gray-20);\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"292.4\" height=\"292.4\" viewBox=\"0 0 292 292\"><path d=\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\"/></svg>');\n  --focus-highlight-color: #a5d8ff;\n  --icon-fill-color: var(--color-on-surface);\n  --icon-green-fill-color: #2b8a3e;\n  --default-bg-color: #ffffff;\n  --input-bg-color: #ffffff;\n  --input-border-color: #ced4da;\n  --input-hover-bg-color: #f1f3f5;\n  --input-label-color: #495057;\n  --island-bg-color: #ffffff;\n  --keybinding-color: var(--color-gray-40);\n  --link-color: #1c7ed6;\n  --overlay-bg-color: rgba(255, 255, 255, 0.88);\n  --popup-bg-color: var(--island-bg-color);\n  --popup-secondary-bg-color: #f1f3f5;\n  --popup-text-color: #000000;\n  --popup-text-inverted-color: #ffffff;\n  --select-highlight-color: #339af0;\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\n  --button-hover-bg: var(--color-surface-high);\n  --button-active-bg: var(--color-surface-high);\n  --button-active-border: var(--color-brand-active);\n  --default-border-color: var(--color-surface-high);\n  --default-button-size: 2rem;\n  --default-icon-size: 1rem;\n  --lg-button-size: 2.25rem;\n  --lg-icon-size: 1rem;\n  --editor-container-padding: 1rem;\n  --scrollbar-thumb: var(--button-gray-2);\n  --scrollbar-thumb-hover: var(--button-gray-3);\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --avatar-border-color: var(--color-gray-20);\n  --sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --sidebar-border-color: var(--color-surface-high);\n  --sidebar-bg-color: var(--island-bg-color);\n  --library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01),\n    0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09),\n    0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);\n  --space-factor: 0.25rem;\n  --text-primary-color: var(--color-on-surface);\n  --color-selection: #6965db;\n  --color-icon-white: #ffffff;\n  --color-primary: #6965db;\n  --color-primary-darker: #5b57d1;\n  --color-primary-darkest: #4a47b1;\n  --color-primary-light: #e3e2fe;\n  --color-primary-light-darker: #d7d5ff;\n  --color-primary-hover: #5753d0;\n  --color-gray-10: #f5f5f5;\n  --color-gray-20: #ebebeb;\n  --color-gray-30: #d6d6d6;\n  --color-gray-40: #b8b8b8;\n  --color-gray-50: #999999;\n  --color-gray-60: #7a7a7a;\n  --color-gray-70: #5c5c5c;\n  --color-gray-80: #3d3d3d;\n  --color-gray-85: #242424;\n  --color-gray-90: #1e1e1e;\n  --color-gray-100: #121212;\n  --color-warning: #fceeca;\n  --color-warning-dark: #f5c354;\n  --color-warning-darker: #f3ab2c;\n  --color-warning-darkest: #ec8b14;\n  --color-text-warning: var(--text-primary-color);\n  --color-danger: #db6965;\n  --color-danger-dark: #db6965;\n  --color-danger-darker: #d65550;\n  --color-danger-darkest: #d1413c;\n  --color-danger-text: black;\n  --color-danger-background: #fff0f0;\n  --color-danger-icon-background: #ffdad6;\n  --color-danger-color: #700000;\n  --color-danger-icon-color: #700000;\n  --color-warning-background: var(--color-warning);\n  --color-warning-icon-background: var(--color-warning-dark);\n  --color-warning-color: var(--text-primary-color);\n  --color-warning-icon-color: var(--text-primary-color);\n  --color-muted: var(--color-gray-30);\n  --color-muted-darker: var(--color-gray-60);\n  --color-muted-darkest: var(--color-gray-100);\n  --color-muted-background: var(--color-gray-80);\n  --color-muted-background-darker: var(--color-gray-100);\n  --color-promo: #e70078;\n  --color-success: #268029;\n  --color-success-lighter: #cafccc;\n  --color-logo-icon: var(--color-primary);\n  --color-logo-text: #190064;\n  --border-radius-md: 0.375rem;\n  --border-radius-lg: 0.5rem;\n  --color-surface-high: hsl(244, 100%, 97%);\n  --color-surface-mid: hsl(240 25% 96%);\n  --color-surface-low: hsl(240 25% 94%);\n  --color-surface-lowest: #ffffff;\n  --color-on-surface: #1b1b1f;\n  --color-brand-hover: #5753d0;\n  --color-on-primary-container: #030064;\n  --color-surface-primary-container: #e0dfff;\n  --color-brand-active: #4440bf;\n  --color-border-outline: #767680;\n  --color-border-outline-variant: #c5c5d0;\n  --color-surface-primary-container: #e0dfff;\n}\n@media screen and (min-device-width: 1921px) {\n  .excalidraw {\n    --lg-button-size: 2.5rem;\n    --lg-icon-size: 1.25rem;\n    --default-button-size: 2.25rem;\n    --default-icon-size: 1.25rem;\n  }\n}\n.excalidraw.theme--dark.theme--dark-background-none {\n  background: none;\n}\n.excalidraw.theme--dark {\n  --theme-filter: invert(93%) hue-rotate(180deg);\n  --button-destructive-bg-color: #5a0000;\n  --button-destructive-color: #ffa8a8;\n  --button-gray-1: #363636;\n  --button-gray-2: #272727;\n  --button-gray-3: #222;\n  --button-special-active-bg-color: #204624;\n  --dialog-border-color: var(--color-gray-80);\n  --dropdown-icon: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"292.4\" height=\"292.4\" viewBox=\"0 0 292 292\"><path fill=\"%23ced4da\" d=\"M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z\"/></svg>');\n  --focus-highlight-color: #228be6;\n  --icon-green-fill-color: #69db7c;\n  --default-bg-color: #121212;\n  --input-bg-color: #121212;\n  --input-border-color: #2e2e2e;\n  --input-hover-bg-color: #181818;\n  --input-label-color: #e9ecef;\n  --island-bg-color: #232329;\n  --keybinding-color: var(--color-gray-60);\n  --link-color: #4dabf7;\n  --overlay-bg-color: rgba(52, 58, 64, 0.12);\n  --popup-secondary-bg-color: #222;\n  --popup-text-color: #ced4da;\n  --popup-text-inverted-color: #2c2c2c;\n  --select-highlight-color: #4dabf7;\n  --shadow-island: 0px 0px 0.9310142993927002px 0px rgba(0, 0, 0, 0.17),\n    0px 0px 3.1270833015441895px 0px rgba(0, 0, 0, 0.08),\n    0px 7px 14px 0px rgba(0, 0, 0, 0.05);\n  --modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07),\n    0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198),\n    0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275),\n    0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035),\n    0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725),\n    0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);\n  --avatar-border-color: var(--color-gray-85);\n  --scrollbar-thumb: #343a40;\n  --scrollbar-thumb-hover: #495057;\n  --color-selection: #3530c4;\n  --color-icon-white: var(--color-gray-90);\n  --color-primary: #a8a5ff;\n  --color-primary-darker: #b2aeff;\n  --color-primary-darkest: #beb9ff;\n  --color-primary-light: #4f4d6f;\n  --color-primary-light-darker: #43415e;\n  --color-primary-hover: #bbb8ff;\n  --color-text-warning: var(--color-gray-80);\n  --color-danger: #ffa8a5;\n  --color-danger-dark: #672120;\n  --color-danger-darker: #8f2625;\n  --color-danger-darkest: #ac2b29;\n  --color-danger-text: #fbcbcc;\n  --color-danger-background: #fbcbcc;\n  --color-danger-icon-background: #672120;\n  --color-danger-color: #261919;\n  --color-danger-icon-color: #fbcbcc;\n  --color-warning-background: var(--color-warning);\n  --color-warning-icon-background: var(--color-warning-dark);\n  --color-warning-color: var(--color-gray-80);\n  --color-warning-icon-color: var(--color-gray-80);\n  --color-muted: var(--color-gray-80);\n  --color-muted-darker: var(--color-gray-60);\n  --color-muted-darkest: var(--color-gray-20);\n  --color-muted-background: var(--color-gray-40);\n  --color-muted-background-darker: var(--color-gray-20);\n  --color-promo: #d297ff;\n  --color-logo-text: #e2dfff;\n  --color-surface-high: hsl(245, 10%, 21%);\n  --color-surface-low: hsl(240, 8%, 15%);\n  --color-surface-mid: hsl(240 6% 10%);\n  --color-surface-lowest: hsl(0, 0%, 7%);\n  --color-on-surface: #e3e3e8;\n  --color-brand-hover: #bbb8ff;\n  --color-on-primary-container: #e0dfff;\n  --color-surface-primary-container: #403e6a;\n  --color-brand-active: #d0ccff;\n  --color-border-outline: #8e8d9c;\n  --color-border-outline-variant: #46464f;\n  --color-surface-primary-container: #403e6a;\n}\n\n:root {\n  --zIndex-canvas: 1;\n  --zIndex-interactiveCanvas: 2;\n  --zIndex-wysiwyg: 3;\n  --zIndex-canvasButtons: 3;\n  --zIndex-layerUI: 4;\n  --zIndex-eyeDropperBackdrop: 5;\n  --zIndex-eyeDropperPreview: 6;\n  --zIndex-hyperlinkContainer: 7;\n  --zIndex-modal: 1000;\n  --zIndex-popup: 1001;\n  --zIndex-toast: 999999;\n  --sab: env(safe-area-inset-bottom);\n  --sal: env(safe-area-inset-left);\n  --sar: env(safe-area-inset-right);\n  --sat: env(safe-area-inset-top);\n}\n\n.excalidraw {\n  --ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI,\n    Roboto, Helvetica, Arial, sans-serif;\n  font-family: var(--ui-font);\n  position: relative;\n  overflow: hidden;\n  color: var(--text-primary-color);\n  display: flex;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  width: 100%;\n  user-select: none;\n}\n.excalidraw button {\n  cursor: pointer;\n  user-select: none;\n}\n.excalidraw:focus {\n  outline: none;\n}\n.excalidraw .excalidraw-link,\n.excalidraw a {\n  font-weight: 500;\n  text-decoration: none;\n  color: var(--link-color);\n  user-select: none;\n  cursor: pointer;\n}\n.excalidraw .excalidraw-link:hover,\n.excalidraw a:hover {\n  text-decoration: underline;\n}\n.excalidraw .excalidraw-link:active,\n.excalidraw a:active {\n  text-decoration: none;\n}\n.excalidraw canvas {\n  touch-action: none;\n  image-rendering: pixelated;\n  image-rendering: -moz-crisp-edges;\n  z-index: var(--zIndex-canvas);\n}\n.excalidraw canvas.interactive {\n  z-index: var(--zIndex-interactiveCanvas);\n}\n.excalidraw__canvas-wrapper, .excalidraw__canvas.static {\n  pointer-events: none;\n}\n.excalidraw__canvas {\n  position: absolute;\n}\n.excalidraw__embeddable {\n  width: 100%;\n  height: 100%;\n  border: 0;\n}\n.excalidraw__embeddable-container {\n  position: absolute;\n  z-index: 2;\n  transform-origin: top left;\n  pointer-events: none;\n}\n.excalidraw.theme--dark canvas {\n  filter: var(--theme-filter);\n}\n.excalidraw .FixedSideContainer {\n  padding-top: var(--sat, 0);\n  padding-right: var(--sar, 0);\n  padding-bottom: var(--sab, 0);\n  padding-left: var(--sal, 0);\n}\n.excalidraw .panelRow {\n  display: flex;\n  justify-content: space-between;\n}\n.excalidraw .panelColumn {\n  display: flex;\n  flex-direction: column;\n  row-gap: 0.75rem;\n}\n.excalidraw .panelColumn h3,\n.excalidraw .panelColumn legend,\n.excalidraw .panelColumn .control-label {\n  margin: 0;\n  margin-bottom: 0.25rem;\n  font-size: 0.75rem;\n  color: var(--text-primary-color);\n  font-weight: normal;\n  display: block;\n}\n.excalidraw .panelColumn .control-label input {\n  display: block;\n  width: 100%;\n}\n.excalidraw .panelColumn legend {\n  padding: 0;\n}\n.excalidraw .panelColumn .iconSelectList {\n  flex-wrap: wrap;\n  position: relative;\n}\n.excalidraw .panelColumn .buttonList {\n  flex-wrap: wrap;\n  display: flex;\n  column-gap: 0.5rem;\n  row-gap: 0.5rem;\n}\n.excalidraw .panelColumn .buttonList label {\n  font-size: 0.75rem;\n}\n.excalidraw .panelColumn .buttonList input[type=radio],\n.excalidraw .panelColumn .buttonList input[type=button] {\n  opacity: 0;\n  position: absolute;\n  pointer-events: none;\n}\n.excalidraw .panelColumn .buttonList .iconRow {\n  margin-top: 8px;\n}\n.excalidraw .panelColumn fieldset {\n  margin: 0;\n  padding: 0;\n  border: none;\n}\n.excalidraw .divider {\n  width: 1px;\n  background-color: #e9ecef;\n  margin: 1px;\n}\n.excalidraw .welcome-screen-menu-item:focus-visible,\n.excalidraw .dropdown-menu-item:focus-visible,\n.excalidraw button:focus-visible,\n.excalidraw .buttonList label:focus-within,\n.excalidraw input:focus-visible {\n  outline: transparent;\n  box-shadow: 0 0 0 1px var(--color-brand-hover);\n}\n.excalidraw .buttonList .ToolIcon__icon {\n  all: unset !important;\n  display: flex !important;\n}\n.excalidraw .buttonList button {\n  background-color: transparent;\n}\n.excalidraw .buttonList label,\n.excalidraw .buttonList button,\n.excalidraw .buttonList .zIndexButton {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  padding: 0;\n}\n.excalidraw .buttonList label svg,\n.excalidraw .buttonList button svg,\n.excalidraw .buttonList .zIndexButton svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .buttonList label:hover,\n.excalidraw .buttonList button:hover,\n.excalidraw .buttonList .zIndexButton:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .buttonList label:active,\n.excalidraw .buttonList button:active,\n.excalidraw .buttonList .zIndexButton:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .buttonList label.active,\n.excalidraw .buttonList button.active,\n.excalidraw .buttonList .zIndexButton.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .buttonList label.active:hover,\n.excalidraw .buttonList button.active:hover,\n.excalidraw .buttonList .zIndexButton.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .buttonList label.active svg,\n.excalidraw .buttonList button.active svg,\n.excalidraw .buttonList .zIndexButton.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw .buttonList label svg,\n.excalidraw .buttonList button svg,\n.excalidraw .buttonList .zIndexButton svg {\n  width: var(--default-icon-size);\n  height: var(--default-icon-size);\n}\n.excalidraw .App-top-bar {\n  z-index: var(--zIndex-layerUI);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.excalidraw .App-bottom-bar {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  --bar-padding: calc(4 * var(--space-factor));\n  padding-top: max(var(--bar-padding), var(--sat,0));\n  padding-right: var(--sar, 0);\n  padding-bottom: var(--sab, 0);\n  padding-left: var(--sal, 0);\n  z-index: 4;\n  display: flex;\n  align-items: flex-end;\n  pointer-events: none;\n}\n.excalidraw .App-bottom-bar > .Island {\n  width: 100%;\n  max-width: 100%;\n  min-width: 100%;\n  box-sizing: border-box;\n  max-height: 100%;\n  display: flex;\n  flex-direction: column;\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .App-bottom-bar > .Island .panelColumn {\n  padding: 8px 8px 0 8px;\n}\n.excalidraw .App-toolbar {\n  width: 100%;\n}\n.excalidraw .App-toolbar .eraser.ToolIcon:hover {\n  --icon-fill-color: #fff;\n  --keybinding-color: #fff;\n}\n.excalidraw .App-toolbar .eraser.active {\n  background-color: var(--color-primary);\n}\n.excalidraw .App-toolbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px;\n}\n.excalidraw .App-toolbar-content .dropdown-menu--mobile {\n  bottom: 55px;\n  top: auto;\n}\n.excalidraw .App-mobile-menu {\n  width: 100%;\n  overflow-x: visible;\n  overflow-y: auto;\n  box-sizing: border-box;\n  margin-bottom: var(--bar-padding);\n}\n.excalidraw .App-menu {\n  display: grid;\n  color: var(--icon-fill-color);\n}\n.excalidraw .shapes-section {\n  display: flex;\n  justify-content: center;\n  pointer-events: none !important;\n}\n.excalidraw .shapes-section > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n.excalidraw .App-menu_top {\n  grid-template-columns: 1fr 2fr 1fr;\n  grid-gap: 2rem;\n  align-items: flex-start;\n  cursor: default;\n  pointer-events: none !important;\n}\n.excalidraw .App-menu_top > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n@media (min-width: 1536px) {\n  .excalidraw .App-menu_top {\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-gap: 3rem;\n  }\n}\n.excalidraw .App-menu_top > *:first-child {\n  justify-self: flex-start;\n}\n.excalidraw .App-menu_top > *:last-child {\n  justify-self: flex-end;\n}\n.excalidraw .App-menu_bottom {\n  position: absolute;\n  bottom: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  cursor: default;\n  pointer-events: none !important;\n  box-sizing: border-box;\n  padding: 0 1rem;\n}\n.excalidraw .App-menu_bottom--transition-left section {\n  width: 185px;\n}\n.excalidraw .App-menu_bottom section {\n  display: flex;\n}\n.excalidraw .App-menu_bottom > *:first-child {\n  justify-self: flex-start;\n}\n.excalidraw .App-menu_bottom > *:last-child {\n  justify-self: flex-end;\n}\n.excalidraw .App-menu_left {\n  grid-template-rows: 1fr auto 1fr;\n  height: 100%;\n}\n.excalidraw .App-menu_right {\n  grid-template-rows: 1fr;\n  height: 100%;\n}\n.excalidraw .App-menu__left {\n  overflow-y: auto;\n  padding: 0.75rem;\n  width: 202px;\n  box-sizing: border-box;\n  position: absolute;\n}\n.excalidraw .dropdown-select {\n  height: 1.5rem;\n  padding: 0;\n  padding-inline-start: 0.5rem;\n  padding-inline-end: 1.5rem;\n  color: var(--icon-fill-color);\n  background-color: var(--button-gray-1);\n  border-radius: var(--space-factor);\n  border: 1px solid var(--button-gray-2);\n  font-size: 0.8rem;\n  font-family: inherit;\n  outline: none;\n  appearance: none;\n  background-image: var(--dropdown-icon);\n  background-repeat: no-repeat;\n  background-position: right 0.7rem top 50%, 0 0;\n  background-size: 0.65em auto, 100%;\n}\n:root[dir=rtl] .excalidraw .dropdown-select {\n  background-position: left 0.7rem top 50%, 0 0;\n}\n.excalidraw .dropdown-select:focus {\n  box-shadow: 0 0 0 2px var(--focus-highlight-color);\n}\n.excalidraw .dropdown-select:hover {\n  background-color: var(--button-gray-2);\n}\n.excalidraw .dropdown-select:active {\n  background-color: var(--button-gray-2);\n}\n.excalidraw .dropdown-select__language {\n  height: 2rem;\n  background-color: var(--island-bg-color);\n  border-color: var(--default-border-color) !important;\n  cursor: pointer;\n}\n.excalidraw .dropdown-select__language:hover {\n  background-color: var(--island-bg-color);\n}\n.excalidraw .scroll-back-to-content {\n  border-radius: var(--border-radius-lg);\n  background-color: var(--island-bg-color);\n  color: var(--icon-fill-color);\n  border: 1px solid var(--default-border-color);\n  padding: 10px 20px;\n  position: absolute;\n  left: 50%;\n  bottom: 30px;\n  transform: translateX(-50%);\n  pointer-events: var(--ui-pointerEvents);\n  font-family: inherit;\n}\n.excalidraw .scroll-back-to-content:hover {\n  background-color: var(--button-hover-bg);\n}\n.excalidraw .scroll-back-to-content:active {\n  border: 1px solid var(--button-active-border);\n}\n.excalidraw .help-icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.625rem;\n  width: var(--button-width, var(--default-button-size));\n  height: var(--button-height, var(--default-button-size));\n  box-sizing: border-box;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--button-border, var(--default-border-color));\n  border-radius: var(--border-radius-lg);\n  cursor: pointer;\n  background-color: var(--button-bg, var(--island-bg-color));\n  color: var(--button-color, var(--color-on-surface));\n  font-family: var(--ui-font);\n  border: none;\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\n  background-color: var(--color-surface-low);\n  width: var(--lg-button-size);\n  height: var(--lg-button-size);\n}\n.excalidraw .help-icon svg {\n  width: var(--button-width, var(--lg-icon-size));\n  height: var(--button-height, var(--lg-icon-size));\n}\n.excalidraw .help-icon:hover {\n  background-color: var(--button-hover-bg, var(--island-bg-color));\n  border-color: var(--button-hover-border, var(--button-border, var(--default-border-color)));\n  color: var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)));\n}\n.excalidraw .help-icon:active {\n  background-color: var(--button-active-bg, var(--island-bg-color));\n  border-color: var(--button-active-border, var(--color-primary-darkest));\n}\n.excalidraw .help-icon.active {\n  background-color: var(--button-selected-bg, var(--color-surface-primary-container));\n  border-color: var(--button-selected-border, var(--color-surface-primary-container));\n}\n.excalidraw .help-icon.active:hover {\n  background-color: var(--button-selected-hover-bg, var(--color-surface-primary-container));\n}\n.excalidraw .help-icon.active svg {\n  color: var(--button-color, var(--color-on-primary-container));\n}\n.excalidraw .help-icon:active {\n  box-shadow: 0 0 0 1px var(--color-brand-active);\n}\n.excalidraw .help-icon svg {\n  width: var(--lg-icon-size);\n  height: var(--lg-icon-size);\n}\n.excalidraw .reset-zoom-button {\n  font-family: var(--ui-font);\n}\n.excalidraw .finalize-button {\n  display: grid;\n  grid-auto-flow: column;\n  gap: 0.4em;\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-inline-start: 0.6em;\n}\n.excalidraw .undo-redo-buttons,\n.excalidraw .eraser-buttons {\n  display: grid;\n  grid-auto-flow: column;\n  margin-top: auto;\n  margin-bottom: auto;\n  margin-inline-start: 0.6em;\n}\n.excalidraw--mobile.excalidraw aside {\n  display: none;\n}\n.excalidraw--mobile.excalidraw .scroll-back-to-content {\n  bottom: calc(80px + var(--sab, 0));\n  z-index: -1;\n}\n\n:root[dir=rtl] .excalidraw .rtl-mirror {\n  transform: scaleX(-1);\n}\n.excalidraw .zen-mode-visibility {\n  visibility: visible;\n  opacity: 1;\n  height: auto;\n  width: auto;\n  transition: opacity 0.5s;\n}\n.excalidraw .zen-mode-visibility.zen-mode-visibility--hidden {\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n  width: 0;\n  transition: opacity 0.5s;\n}\n.excalidraw .disable-pointerEvents {\n  pointer-events: none !important;\n}\n.excalidraw.excalidraw--view-mode .App-menu {\n  display: flex;\n  justify-content: space-between;\n}\n.excalidraw input.is-redacted {\n  -webkit-text-security: disc;\n}\n.excalidraw input[type=text],\n.excalidraw textarea:not(.excalidraw-wysiwyg) {\n  color: var(--text-primary-color);\n  border: 1.5px solid var(--input-border-color);\n  padding: 0.75rem;\n  white-space: nowrap;\n  border-radius: var(--space-factor);\n  background-color: var(--input-bg-color);\n}\n.excalidraw input[type=text]:not(:focus):hover,\n.excalidraw textarea:not(.excalidraw-wysiwyg):not(:focus):hover {\n  border-color: var(--color-brand-hover);\n}\n.excalidraw input[type=text]:focus,\n.excalidraw textarea:not(.excalidraw-wysiwyg):focus {\n  outline: none;\n  border-color: var(--color-brand-hover);\n}\n@media print {\n  .excalidraw .App-bottom-bar,\n  .excalidraw .FixedSideContainer,\n  .excalidraw .layer-ui__wrapper {\n    display: none;\n  }\n}\n.excalidraw ::-webkit-scrollbar {\n  width: 3px;\n  height: 3px;\n}\n.excalidraw select::-webkit-scrollbar {\n  width: 10px;\n}\n.excalidraw ::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb);\n  border-radius: 10px;\n}\n.excalidraw ::-webkit-scrollbar-thumb:hover {\n  background: var(--scrollbar-thumb-hover);\n}\n.excalidraw ::-webkit-scrollbar-thumb:active {\n  background: var(--scrollbar-thumb);\n}\n.excalidraw .mobile-misc-tools-container {\n  position: absolute;\n  top: calc(5rem - var(--editor-container-padding));\n  right: calc(var(--editor-container-padding) * -1);\n  display: flex;\n  flex-direction: column;\n  border: 1px solid var(--sidebar-border-color);\n  border-top-left-radius: var(--border-radius-lg);\n  border-bottom-left-radius: var(--border-radius-lg);\n  border-right: 0;\n  overflow: hidden;\n  background-color: var(--island-bg-color);\n}\n.excalidraw .mobile-misc-tools-container .ToolIcon__icon {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 0;\n}\n.excalidraw .mobile-misc-tools-container .default-sidebar-trigger {\n  border: 0;\n}\n.excalidraw .App-toolbar--mobile {\n  overflow: visible;\n  max-width: 98vw;\n}\n.excalidraw .App-toolbar--mobile .ToolIcon__keybinding {\n  display: none;\n}\n.excalidraw .UserList-Wrapper {\n  margin: 0;\n  padding: 0;\n  border: none;\n  text-align: left;\n}\n.excalidraw .UserList-Wrapper legend {\n  display: block;\n  font-size: 0.75rem;\n  font-weight: 400;\n  margin: 0 0 0.25rem;\n  padding: 0;\n}\n.excalidraw .main-menu-trigger {\n  border: none;\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\n  background-color: var(--color-surface-low);\n}\n.excalidraw .main-menu-trigger:active {\n  box-shadow: 0 0 0 1px var(--color-brand-active);\n}\n.excalidraw .App-menu__left {\n  --button-border: transparent;\n  --button-bg: var(--color-surface-mid);\n}\n.excalidraw.theme--dark.excalidraw .App-menu__left {\n  --button-hover-bg: #363541;\n  --button-bg: var(--color-surface-high);\n}\n\n.excalidraw .excalidraw__paragraph {\n  margin: 1rem 0;\n}\n.excalidraw .Modal__content .excalidraw__paragraph:first-child {\n  margin-top: 0;\n}\n.excalidraw .Modal__content .excalidraw__paragraph + .excalidraw__paragraph {\n  margin-top: 0rem;\n}\n\n.ErrorSplash.excalidraw {\n  min-height: 100vh;\n  padding: 20px 0;\n  overflow: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: text;\n}\n.ErrorSplash.excalidraw .ErrorSplash-messageContainer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  background-color: #ffe3e3;\n  border: 3px solid #c92a2a;\n}\n.ErrorSplash.excalidraw .ErrorSplash-paragraph {\n  margin: 15px 0;\n  max-width: 600px;\n}\n.ErrorSplash.excalidraw .ErrorSplash-paragraph.align-center {\n  text-align: center;\n}\n.ErrorSplash.excalidraw .bigger,\n.ErrorSplash.excalidraw .bigger button {\n  font-size: 1.1em;\n}\n.ErrorSplash.excalidraw .smaller,\n.ErrorSplash.excalidraw .smaller button {\n  font-size: 0.9em;\n}\n.ErrorSplash.excalidraw .ErrorSplash-details {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n.ErrorSplash.excalidraw .ErrorSplash-details textarea {\n  width: 100%;\n  margin: 10px 0;\n  font-family: \"Cascadia\";\n  font-size: 0.8em;\n}\n\n.excalidraw__embeddable-container .excalidraw__embeddable-container__inner {\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: var(--embeddable-radius);\n}\n.excalidraw__embeddable-container .excalidraw__embeddable__outer {\n  width: 100%;\n  height: 100%;\n}\n.excalidraw__embeddable-container .excalidraw__embeddable__outer > * {\n  border-radius: var(--embeddable-radius);\n}\n.excalidraw__embeddable-container .excalidraw__embeddable-hint {\n  position: absolute;\n  z-index: 1;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 1rem 1.6rem;\n  border-radius: 12px;\n  color: #fff;\n  font-weight: bold;\n  letter-spacing: 0.6px;\n  font-family: \"Assistant\";\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NzcyIsInNvdXJjZXMiOlsidmFyaWFibGVzLm1vZHVsZS5zY3NzIiwidGhlbWUuc2NzcyIsInN0eWxlcy5zY3NzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJLQTtFQUNFO0VBQ0E7OztBQUZGO0VBQ0U7RUFDQTs7O0FDMUtGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQUE7QUFBQTtFQUlBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQVNBO0VBQ0E7RUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7RUFNQTtFQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtFQU1BO0VBQ0E7RUFDQTtBQUFBO0FBQUE7RUFJQTtFQUNBO0VBRUE7RUFFQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBeEdBO0VBMUNGO0lBMkNJO0lBQ0E7SUFDQTtJQUNBOzs7QUF1R0E7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQUE7QUFBQTtFQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtFQU1BO0VBRUE7RUFDQTtFQUdBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQ3RQSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFFQTtFQUNBO0VBQ0E7RUFDQTs7O0FBR0Y7RUFDRTtBQUFBO0VBRUE7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQWdCQTs7QUFkQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFVRjtBQUFBO0VBRUU7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtBQUFBO0VBQ0U7O0FBRUY7QUFBQTtFQUNFOztBQUlKO0VBQ0U7RUFLQTtFQUVBO0VBRUE7O0FBRUE7RUFDRTs7QUFPSjtFQUVFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFRQTtFQUNFOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUVBO0FBQUE7QUFBQTtFQUdFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0FBQUE7RUFFRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTs7QUFJSjtFQUNFO0VBQ0Esa0JDbktRO0VEb0tSOztBQUdGO0FBQUE7QUFBQTtBQUFBO0FBQUE7RUFLRTtFQUNBOztBQUlBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOztBQUdGO0FBQUE7QUFBQTtFRm5LRjtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUUwSkk7O0FGeEpKO0FBQUE7QUFBQTtFQUNFO0VBQ0E7O0FBR0Y7QUFBQTtBQUFBO0VBQ0U7RUFDQTtFQUlBOztBQU1GO0FBQUE7QUFBQTtFQUNFO0VBQ0E7O0FBR0Y7QUFBQTtBQUFBO0VBQ0U7RUFJQTs7QUFLQTtBQUFBO0FBQUE7RUFDRTs7QUFNRjtBQUFBO0FBQUE7RUFDRTs7QUVrSEE7QUFBQTtBQUFBO0VBQ0U7RUFDQTs7QUFLTjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFLTjtFQUNFOztBQUdFO0VBQ0U7RUFDQTs7QUFFRjtFQUNFOztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQVhGO0lBWUk7SUFDQTs7O0FBSUo7RUFDRTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdFO0VBQ0U7O0FBSUo7RUFDRTs7QUFJSjtFQUNFOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFNQTs7QUFKQTtFQUNFOztBQUtGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFLTjtFQUNFO0VBQ0E7RUFDQTtFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlKO0VGeFpBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQXlGQTtFQUNBO0VBQ0E7RUVtVEU7RUFDQTs7QUY3WUY7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUlBOztBQU1GO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBSUE7O0FBS0E7RUFDRTs7QUFNRjtFQUNFOztBQW1ESjtFQUNFOztBRW1UQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtBQUFBO0VBRUU7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJQTtFQUNFOztBQUVGO0VBQ0U7RUFDQTs7O0FBS0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUlKO0VBQ0U7O0FBSUE7RUFDRTtFQUNBOztBQUlKO0VBR0U7O0FBR0Y7QUFBQTtFQUVFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRTtBQUFBO0VBQ0U7O0FBSUo7QUFBQTtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtBQUFBO0FBQUE7SUFHRTs7O0FBTUo7RUFDRTtFQUNBOztBQUdGO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBOztBQUVGO0VBQ0U7O0FBRUY7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTs7QUFJSjtFQUNFO0VBQ0E7O0FBRUE7RUFDRTs7QUFHSjtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFJSjtFRnhlQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUV1ZUY7RUFDRTtFQUNBOztBQUVTO0VBQ1A7RUFDQTs7O0FBSUo7RUFDRTs7QUFJQTtFQUNFOztBQUVGO0VBQ0U7OztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUVBO0VBQ0Esa0JDdm5CTztFRHduQlA7O0FBR0Y7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBSUo7QUFBQTtFQUVFOztBQUdGO0FBQUE7RUFFRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBOzs7QUFNSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUNBO0VBQ0U7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwib3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3NcIjtcblxuQG1peGluIGlzTW9iaWxlKCkge1xuICBAYXQtcm9vdCAuZXhjYWxpZHJhdy0tbW9iaWxlI3smfSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIHRvb2xiYXJCdXR0b25Db2xvclN0YXRlcyB7XG4gICYuZmlsbGFibGUge1xuICAgIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAgIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAgICY6Y2hlY2tlZCArIC5Ub29sSWNvbl9faWNvbiB7XG4gICAgICAgIC0taWNvbi1maWxsLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgICAgc3ZnIHtcbiAgICAgICAgICBmaWxsOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX3R5cGVfcmFkaW8sXG4gIC5Ub29sSWNvbl90eXBlX2NoZWNrYm94IHtcbiAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuVG9vbEljb25fX2tleWJpbmRpbmcge1xuICAgIGJvdHRvbTogNHB4O1xuICAgIHJpZ2h0OiA0cHg7XG4gIH1cblxuICAuVG9vbEljb25fX2ljb24ge1xuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICB9XG5cbiAgICAmOmFjdGl2ZSB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIpO1xuXG4gICAgICBzdmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gb3V0bGluZUJ1dHRvblN0eWxlcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tZGVmYXVsdC1idXR0b24tc2l6ZSkpO1xuICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJvcmRlci1zdHlsZTogc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWJvcmRlciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpKTtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cy1sZyk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tc3VyZmFjZSkpO1xuICBmb250LWZhbWlseTogdmFyKC0tdWktZm9udCk7XG5cbiAgc3ZnIHtcbiAgICB3aWR0aDogdmFyKC0tYnV0dG9uLXdpZHRoLCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1oZWlnaHQsIHZhcigtLWxnLWljb24tc2l6ZSkpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWhvdmVyLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJvcmRlcixcbiAgICAgIHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSlcbiAgICApO1xuICAgIGNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1jb2xvcixcbiAgICAgIHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tdGV4dC1wcmltYXJ5LWNvbG9yLCBpbmhlcml0KSlcbiAgICApO1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYmcsIHZhcigtLWlzbGFuZC1iZy1jb2xvcikpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYnV0dG9uLWFjdGl2ZS1ib3JkZXIsIHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VzdCkpO1xuICB9XG5cbiAgJi5hY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJnLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24tc2VsZWN0ZWQtYm9yZGVyLFxuICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICApO1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWhvdmVyLWJnLFxuICAgICAgICB2YXIoLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdmcge1xuICAgICAgY29sb3I6IHZhcigtLWJ1dHRvbi1jb2xvciwgdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGF2YXRhclN0eWxlcyB7XG4gIHdpZHRoOiAxLjI1cmVtO1xuICBoZWlnaHQ6IDEuMjVyZW07XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktOTApO1xuICBmbGV4OiAwIDAgYXV0bztcblxuICAmLWltZyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogLTNweDtcbiAgICByaWdodDogLTNweDtcbiAgICBib3R0b206IC0zcHg7XG4gICAgbGVmdDogLTNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hdmF0YXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJi0taXMtZm9sbG93ZWQ6OmJlZm9yZSB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5LWhvdmVyKTtcbiAgfVxuICAmLS1pcy1jdXJyZW50LXVzZXIge1xuICAgIGN1cnNvcjogYXV0bztcbiAgfVxufVxuXG5AbWl4aW4gZmlsbGVkQnV0dG9uT25DYW52YXMge1xuICBib3JkZXI6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1zdXJmYWNlLWxvd2VzdCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93KTtcblxuICAmOmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLWJyYW5kLWFjdGl2ZSk7XG4gIH1cbn1cblxuJHRoZW1lLWZpbHRlcjogXCJpbnZlcnQoOTMlKSBodWUtcm90YXRlKDE4MGRlZylcIjtcbiRyaWdodC1zaWRlYmFyLXdpZHRoOiBcIjMwMnB4XCI7XG5cbjpleHBvcnQge1xuICB0aGVtZUZpbHRlcjogdW5xdW90ZSgkdGhlbWUtZmlsdGVyKTtcbiAgcmlnaHRTaWRlYmFyV2lkdGg6IHVucXVvdGUoJHJpZ2h0LXNpZGViYXItd2lkdGgpO1xufVxuIiwiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5AaW1wb3J0IFwiLi92YXJpYWJsZXMubW9kdWxlLnNjc3NcIjtcblxuLmV4Y2FsaWRyYXcge1xuICAtLXRoZW1lLWZpbHRlcjogbm9uZTtcbiAgLS1idXR0b24tZGVzdHJ1Y3RpdmUtYmctY29sb3I6ICN7JG9jLXJlZC0xfTtcbiAgLS1idXR0b24tZGVzdHJ1Y3RpdmUtY29sb3I6ICN7JG9jLXJlZC05fTtcbiAgLS1idXR0b24tZ3JheS0xOiAjeyRvYy1ncmF5LTJ9O1xuICAtLWJ1dHRvbi1ncmF5LTI6ICN7JG9jLWdyYXktNH07XG4gIC0tYnV0dG9uLWdyYXktMzogI3skb2MtZ3JheS01fTtcbiAgLS1idXR0b24tc3BlY2lhbC1hY3RpdmUtYmctY29sb3I6ICN7JG9jLWdyZWVuLTB9O1xuICAtLWRpYWxvZy1ib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyYXktMjApO1xuICAtLWRyb3Bkb3duLWljb246IHVybCgnZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjkyLjRcIiBoZWlnaHQ9XCIyOTIuNFwiIHZpZXdCb3g9XCIwIDAgMjkyIDI5MlwiPjxwYXRoIGQ9XCJNMjg3IDE5N0wxNTkgNjljLTQtMy04LTUtMTMtNXMtOSAyLTEzIDVMNSAxOTdjLTMgNC01IDgtNSAxM3MyIDkgNSAxM2M0IDQgOCA1IDEzIDVoMjU2YzUgMCA5LTEgMTMtNXM1LTggNS0xMy0xLTktNS0xM3pcIi8+PC9zdmc+Jyk7XG4gIC0tZm9jdXMtaGlnaGxpZ2h0LWNvbG9yOiAjeyRvYy1ibHVlLTJ9O1xuICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tc3VyZmFjZSk7XG4gIC0taWNvbi1ncmVlbi1maWxsLWNvbG9yOiAjeyRvYy1ncmVlbi05fTtcbiAgLS1kZWZhdWx0LWJnLWNvbG9yOiAjeyRvYy13aGl0ZX07XG4gIC0taW5wdXQtYmctY29sb3I6ICN7JG9jLXdoaXRlfTtcbiAgLS1pbnB1dC1ib3JkZXItY29sb3I6ICN7JG9jLWdyYXktNH07XG4gIC0taW5wdXQtaG92ZXItYmctY29sb3I6ICN7JG9jLWdyYXktMX07XG4gIC0taW5wdXQtbGFiZWwtY29sb3I6ICN7JG9jLWdyYXktN307XG4gIC0taXNsYW5kLWJnLWNvbG9yOiAjZmZmZmZmO1xuICAtLWtleWJpbmRpbmctY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNDApO1xuICAtLWxpbmstY29sb3I6ICN7JG9jLWJsdWUtN307XG4gIC0tb3ZlcmxheS1iZy1jb2xvcjogI3t0cmFuc3BhcmVudGl6ZSgkb2Mtd2hpdGUsIDAuMTIpfTtcbiAgLS1wb3B1cC1iZy1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgLS1wb3B1cC1zZWNvbmRhcnktYmctY29sb3I6ICN7JG9jLWdyYXktMX07XG4gIC0tcG9wdXAtdGV4dC1jb2xvcjogI3skb2MtYmxhY2t9O1xuICAtLXBvcHVwLXRleHQtaW52ZXJ0ZWQtY29sb3I6ICN7JG9jLXdoaXRlfTtcbiAgLS1zZWxlY3QtaGlnaGxpZ2h0LWNvbG9yOiAjeyRvYy1ibHVlLTV9O1xuICAtLXNoYWRvdy1pc2xhbmQ6IDBweCAwcHggMC45MzEwMTQyOTkzOTI3MDAycHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNyksXG4gICAgMHB4IDBweCAzLjEyNzA4MzMwMTU0NDE4OTVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA4KSxcbiAgICAwcHggN3B4IDE0cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG5cbiAgLS1idXR0b24taG92ZXItYmc6IHZhcigtLWNvbG9yLXN1cmZhY2UtaGlnaCk7XG4gIC0tYnV0dG9uLWFjdGl2ZS1iZzogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcbiAgLS1idXR0b24tYWN0aXZlLWJvcmRlcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcbiAgLS1kZWZhdWx0LWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1oaWdoKTtcblxuICAtLWRlZmF1bHQtYnV0dG9uLXNpemU6IDJyZW07XG4gIC0tZGVmYXVsdC1pY29uLXNpemU6IDFyZW07XG4gIC0tbGctYnV0dG9uLXNpemU6IDIuMjVyZW07XG4gIC0tbGctaWNvbi1zaXplOiAxcmVtO1xuICAtLWVkaXRvci1jb250YWluZXItcGFkZGluZzogMXJlbTtcblxuICBAbWVkaWEgc2NyZWVuIGFuZCAobWluLWRldmljZS13aWR0aDogMTkyMXB4KSB7XG4gICAgLS1sZy1idXR0b24tc2l6ZTogMi41cmVtO1xuICAgIC0tbGctaWNvbi1zaXplOiAxLjI1cmVtO1xuICAgIC0tZGVmYXVsdC1idXR0b24tc2l6ZTogMi4yNXJlbTtcbiAgICAtLWRlZmF1bHQtaWNvbi1zaXplOiAxLjI1cmVtO1xuICB9XG5cbiAgLS1zY3JvbGxiYXItdGh1bWI6IHZhcigtLWJ1dHRvbi1ncmF5LTIpO1xuICAtLXNjcm9sbGJhci10aHVtYi1ob3ZlcjogdmFyKC0tYnV0dG9uLWdyYXktMyk7XG5cbiAgLS1tb2RhbC1zaGFkb3c6IDBweCAxMDBweCA4MHB4IHJnYmEoMCwgMCwgMCwgMC4wNyksXG4gICAgMHB4IDQxLjc3NzZweCAzMy40MjIxcHggcmdiYSgwLCAwLCAwLCAwLjA1MDMxOTgpLFxuICAgIDBweCAyMi4zMzYzcHggMTcuODY5cHggcmdiYSgwLCAwLCAwLCAwLjA0MTcyNzUpLFxuICAgIDBweCAxMi41MjE2cHggMTAuMDE3MnB4IHJnYmEoMCwgMCwgMCwgMC4wMzUpLFxuICAgIDBweCA2LjY1MDFweCA1LjMyMDA4cHggcmdiYSgwLCAwLCAwLCAwLjAyODI3MjUpLFxuICAgIDBweCAyLjc2NzI2cHggMi4yMTM4MXB4IHJnYmEoMCwgMCwgMCwgMC4wMTk2ODAyKTtcbiAgLS1hdmF0YXItYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTIwKTtcbiAgLS1zaWRlYmFyLXNoYWRvdzogMHB4IDEwMHB4IDgwcHggcmdiYSgwLCAwLCAwLCAwLjA3KSxcbiAgICAwcHggNDEuNzc3NnB4IDMzLjQyMjFweCByZ2JhKDAsIDAsIDAsIDAuMDUwMzE5OCksXG4gICAgMHB4IDIyLjMzNjNweCAxNy44NjlweCByZ2JhKDAsIDAsIDAsIDAuMDQxNzI3NSksXG4gICAgMHB4IDEyLjUyMTZweCAxMC4wMTcycHggcmdiYSgwLCAwLCAwLCAwLjAzNSksXG4gICAgMHB4IDYuNjUwMXB4IDUuMzIwMDhweCByZ2JhKDAsIDAsIDAsIDAuMDI4MjcyNSksXG4gICAgMHB4IDIuNzY3MjZweCAyLjIxMzgxcHggcmdiYSgwLCAwLCAwLCAwLjAxOTY4MDIpO1xuICAtLXNpZGViYXItYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWhpZ2gpO1xuICAtLXNpZGViYXItYmctY29sb3I6IHZhcigtLWlzbGFuZC1iZy1jb2xvcik7XG4gIC0tbGlicmFyeS1kcm9wZG93bi1zaGFkb3c6IDBweCAxNXB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMDEpLFxuICAgIDBweCA4cHggNXB4IHJnYmEoMCwgMCwgMCwgMC4wNSksIDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wOSksXG4gICAgMHB4IDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwcHggMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG5cbiAgLS1zcGFjZS1mYWN0b3I6IDAuMjVyZW07XG4gIC0tdGV4dC1wcmltYXJ5LWNvbG9yOiB2YXIoLS1jb2xvci1vbi1zdXJmYWNlKTtcblxuICAtLWNvbG9yLXNlbGVjdGlvbjogIzY5NjVkYjtcblxuICAtLWNvbG9yLWljb24td2hpdGU6ICN7JG9jLXdoaXRlfTtcblxuICAtLWNvbG9yLXByaW1hcnk6ICM2OTY1ZGI7XG4gIC0tY29sb3ItcHJpbWFyeS1kYXJrZXI6ICM1YjU3ZDE7XG4gIC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0OiAjNGE0N2IxO1xuICAtLWNvbG9yLXByaW1hcnktbGlnaHQ6ICNlM2UyZmU7XG4gIC0tY29sb3ItcHJpbWFyeS1saWdodC1kYXJrZXI6ICNkN2Q1ZmY7XG4gIC0tY29sb3ItcHJpbWFyeS1ob3ZlcjogIzU3NTNkMDtcblxuICAtLWNvbG9yLWdyYXktMTA6ICNmNWY1ZjU7XG4gIC0tY29sb3ItZ3JheS0yMDogI2ViZWJlYjtcbiAgLS1jb2xvci1ncmF5LTMwOiAjZDZkNmQ2O1xuICAtLWNvbG9yLWdyYXktNDA6ICNiOGI4Yjg7XG4gIC0tY29sb3ItZ3JheS01MDogIzk5OTk5OTtcbiAgLS1jb2xvci1ncmF5LTYwOiAjN2E3YTdhO1xuICAtLWNvbG9yLWdyYXktNzA6ICM1YzVjNWM7XG4gIC0tY29sb3ItZ3JheS04MDogIzNkM2QzZDtcbiAgLS1jb2xvci1ncmF5LTg1OiAjMjQyNDI0O1xuICAtLWNvbG9yLWdyYXktOTA6ICMxZTFlMWU7XG4gIC0tY29sb3ItZ3JheS0xMDA6ICMxMjEyMTI7XG5cbiAgLS1jb2xvci13YXJuaW5nOiAjZmNlZWNhO1xuICAtLWNvbG9yLXdhcm5pbmctZGFyazogI2Y1YzM1NDtcbiAgLS1jb2xvci13YXJuaW5nLWRhcmtlcjogI2YzYWIyYztcbiAgLS1jb2xvci13YXJuaW5nLWRhcmtlc3Q6ICNlYzhiMTQ7XG4gIC0tY29sb3ItdGV4dC13YXJuaW5nOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuXG4gIC0tY29sb3ItZGFuZ2VyOiAjZGI2OTY1O1xuICAtLWNvbG9yLWRhbmdlci1kYXJrOiAjZGI2OTY1O1xuICAtLWNvbG9yLWRhbmdlci1kYXJrZXI6ICNkNjU1NTA7XG4gIC0tY29sb3ItZGFuZ2VyLWRhcmtlc3Q6ICNkMTQxM2M7XG4gIC0tY29sb3ItZGFuZ2VyLXRleHQ6IGJsYWNrO1xuXG4gIC0tY29sb3ItZGFuZ2VyLWJhY2tncm91bmQ6ICNmZmYwZjA7XG4gIC0tY29sb3ItZGFuZ2VyLWljb24tYmFja2dyb3VuZDogI2ZmZGFkNjtcbiAgLS1jb2xvci1kYW5nZXItY29sb3I6ICM3MDAwMDA7XG4gIC0tY29sb3ItZGFuZ2VyLWljb24tY29sb3I6ICM3MDAwMDA7XG5cbiAgLS1jb2xvci13YXJuaW5nLWJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXdhcm5pbmcpO1xuICAtLWNvbG9yLXdhcm5pbmctaWNvbi1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci13YXJuaW5nLWRhcmspO1xuICAtLWNvbG9yLXdhcm5pbmctY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG4gIC0tY29sb3Itd2FybmluZy1pY29uLWNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuXG4gIC0tY29sb3ItbXV0ZWQ6IHZhcigtLWNvbG9yLWdyYXktMzApO1xuICAtLWNvbG9yLW11dGVkLWRhcmtlcjogdmFyKC0tY29sb3ItZ3JheS02MCk7XG4gIC0tY29sb3ItbXV0ZWQtZGFya2VzdDogdmFyKC0tY29sb3ItZ3JheS0xMDApO1xuICAtLWNvbG9yLW11dGVkLWJhY2tncm91bmQ6IHZhcigtLWNvbG9yLWdyYXktODApO1xuICAtLWNvbG9yLW11dGVkLWJhY2tncm91bmQtZGFya2VyOiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG5cbiAgLS1jb2xvci1wcm9tbzogI2U3MDA3ODtcbiAgLS1jb2xvci1zdWNjZXNzOiAjMjY4MDI5O1xuICAtLWNvbG9yLXN1Y2Nlc3MtbGlnaHRlcjogI2NhZmNjYztcblxuICAtLWNvbG9yLWxvZ28taWNvbjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIC0tY29sb3ItbG9nby10ZXh0OiAjMTkwMDY0O1xuXG4gIC0tYm9yZGVyLXJhZGl1cy1tZDogMC4zNzVyZW07XG4gIC0tYm9yZGVyLXJhZGl1cy1sZzogMC41cmVtO1xuXG4gIC0tY29sb3Itc3VyZmFjZS1oaWdoOiBoc2woMjQ0LCAxMDAlLCA5NyUpO1xuICAtLWNvbG9yLXN1cmZhY2UtbWlkOiBoc2woMjQwIDI1JSA5NiUpO1xuICAtLWNvbG9yLXN1cmZhY2UtbG93OiBoc2woMjQwIDI1JSA5NCUpO1xuICAtLWNvbG9yLXN1cmZhY2UtbG93ZXN0OiAjZmZmZmZmO1xuICAtLWNvbG9yLW9uLXN1cmZhY2U6ICMxYjFiMWY7XG4gIC0tY29sb3ItYnJhbmQtaG92ZXI6ICM1NzUzZDA7XG4gIC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXI6ICMwMzAwNjQ7XG4gIC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcjogI2UwZGZmZjtcbiAgLS1jb2xvci1icmFuZC1hY3RpdmU6ICM0NDQwYmY7XG4gIC0tY29sb3ItYm9yZGVyLW91dGxpbmU6ICM3Njc2ODA7XG4gIC0tY29sb3ItYm9yZGVyLW91dGxpbmUtdmFyaWFudDogI2M1YzVkMDtcbiAgLS1jb2xvci1zdXJmYWNlLXByaW1hcnktY29udGFpbmVyOiAjZTBkZmZmO1xuXG4gICYudGhlbWUtLWRhcmsge1xuICAgICYudGhlbWUtLWRhcmstYmFja2dyb3VuZC1ub25lIHtcbiAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLS10aGVtZS1maWx0ZXI6ICN7JHRoZW1lLWZpbHRlcn07XG4gICAgLS1idXR0b24tZGVzdHJ1Y3RpdmUtYmctY29sb3I6ICM1YTAwMDA7XG4gICAgLS1idXR0b24tZGVzdHJ1Y3RpdmUtY29sb3I6ICN7JG9jLXJlZC0zfTtcblxuICAgIC0tYnV0dG9uLWdyYXktMTogIzM2MzYzNjtcbiAgICAtLWJ1dHRvbi1ncmF5LTI6ICMyNzI3Mjc7XG4gICAgLS1idXR0b24tZ3JheS0zOiAjMjIyO1xuICAgIC0tYnV0dG9uLXNwZWNpYWwtYWN0aXZlLWJnLWNvbG9yOiAjMjA0NjI0O1xuICAgIC0tZGlhbG9nLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS04MCk7XG4gICAgLS1kcm9wZG93bi1pY29uOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI5Mi40XCIgaGVpZ2h0PVwiMjkyLjRcIiB2aWV3Qm94PVwiMCAwIDI5MiAyOTJcIj48cGF0aCBmaWxsPVwiJTIzY2VkNGRhXCIgZD1cIk0yODcgMTk3TDE1OSA2OWMtNC0zLTgtNS0xMy01cy05IDItMTMgNUw1IDE5N2MtMyA0LTUgOC01IDEzczIgOSA1IDEzYzQgNCA4IDUgMTMgNWgyNTZjNSAwIDktMSAxMy01czUtOCA1LTEzLTEtOS01LTEzelwiLz48L3N2Zz4nKTtcbiAgICAtLWZvY3VzLWhpZ2hsaWdodC1jb2xvcjogI3skb2MtYmx1ZS02fTtcbiAgICAtLWljb24tZ3JlZW4tZmlsbC1jb2xvcjogI3skb2MtZ3JlZW4tNH07XG4gICAgLS1kZWZhdWx0LWJnLWNvbG9yOiAjMTIxMjEyO1xuICAgIC0taW5wdXQtYmctY29sb3I6ICMxMjEyMTI7XG4gICAgLS1pbnB1dC1ib3JkZXItY29sb3I6ICMyZTJlMmU7XG4gICAgLS1pbnB1dC1ob3Zlci1iZy1jb2xvcjogIzE4MTgxODtcbiAgICAtLWlucHV0LWxhYmVsLWNvbG9yOiAjeyRvYy1ncmF5LTJ9O1xuICAgIC0taXNsYW5kLWJnLWNvbG9yOiAjMjMyMzI5O1xuICAgIC0ta2V5YmluZGluZy1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS02MCk7XG4gICAgLS1saW5rLWNvbG9yOiAjeyRvYy1ibHVlLTR9O1xuICAgIC0tb3ZlcmxheS1iZy1jb2xvcjogI3t0cmFuc3BhcmVudGl6ZSgkb2MtZ3JheS04LCAwLjg4KX07XG4gICAgLS1wb3B1cC1zZWNvbmRhcnktYmctY29sb3I6ICMyMjI7XG4gICAgLS1wb3B1cC10ZXh0LWNvbG9yOiAjeyRvYy1ncmF5LTR9O1xuICAgIC0tcG9wdXAtdGV4dC1pbnZlcnRlZC1jb2xvcjogIzJjMmMyYztcbiAgICAtLXNlbGVjdC1oaWdobGlnaHQtY29sb3I6ICN7JG9jLWJsdWUtNH07XG4gICAgLS1zaGFkb3ctaXNsYW5kOiAwcHggMHB4IDAuOTMxMDE0Mjk5MzkyNzAwMnB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTcpLFxuICAgICAgMHB4IDBweCAzLjEyNzA4MzMwMTU0NDE4OTVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA4KSxcbiAgICAgIDBweCA3cHggMTRweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcblxuICAgIC0tbW9kYWwtc2hhZG93OiAwcHggMTAwcHggODBweCByZ2JhKDAsIDAsIDAsIDAuMDcpLFxuICAgICAgMHB4IDQxLjc3NzZweCAzMy40MjIxcHggcmdiYSgwLCAwLCAwLCAwLjA1MDMxOTgpLFxuICAgICAgMHB4IDIyLjMzNjNweCAxNy44NjlweCByZ2JhKDAsIDAsIDAsIDAuMDQxNzI3NSksXG4gICAgICAwcHggMTIuNTIxNnB4IDEwLjAxNzJweCByZ2JhKDAsIDAsIDAsIDAuMDM1KSxcbiAgICAgIDBweCA2LjY1MDFweCA1LjMyMDA4cHggcmdiYSgwLCAwLCAwLCAwLjAyODI3MjUpLFxuICAgICAgMHB4IDIuNzY3MjZweCAyLjIxMzgxcHggcmdiYSgwLCAwLCAwLCAwLjAxOTY4MDIpO1xuICAgIC0tYXZhdGFyLWJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JheS04NSk7XG5cbiAgICAtLXNjcm9sbGJhci10aHVtYjogI3skb2MtZ3JheS04fTtcbiAgICAtLXNjcm9sbGJhci10aHVtYi1ob3ZlcjogI3skb2MtZ3JheS03fTtcblxuICAgIC8vIHdpbGwgYmUgaW52ZXJ0ZWQgdG8gYSBsaWdodGVyIGNvbG9yLlxuICAgIC0tY29sb3Itc2VsZWN0aW9uOiAjMzUzMGM0O1xuXG4gICAgLS1jb2xvci1pY29uLXdoaXRlOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcblxuICAgIC0tY29sb3ItcHJpbWFyeTogI2E4YTVmZjtcbiAgICAtLWNvbG9yLXByaW1hcnktZGFya2VyOiAjYjJhZWZmO1xuICAgIC0tY29sb3ItcHJpbWFyeS1kYXJrZXN0OiAjYmViOWZmO1xuICAgIC0tY29sb3ItcHJpbWFyeS1saWdodDogIzRmNGQ2ZjtcbiAgICAtLWNvbG9yLXByaW1hcnktbGlnaHQtZGFya2VyOiAjNDM0MTVlO1xuICAgIC0tY29sb3ItcHJpbWFyeS1ob3ZlcjogI2JiYjhmZjtcblxuICAgIC0tY29sb3ItdGV4dC13YXJuaW5nOiB2YXIoLS1jb2xvci1ncmF5LTgwKTtcblxuICAgIC0tY29sb3ItZGFuZ2VyOiAjZmZhOGE1O1xuICAgIC0tY29sb3ItZGFuZ2VyLWRhcms6ICM2NzIxMjA7XG4gICAgLS1jb2xvci1kYW5nZXItZGFya2VyOiAjOGYyNjI1O1xuICAgIC0tY29sb3ItZGFuZ2VyLWRhcmtlc3Q6ICNhYzJiMjk7XG4gICAgLS1jb2xvci1kYW5nZXItdGV4dDogI2ZiY2JjYztcblxuICAgIC0tY29sb3ItZGFuZ2VyLWJhY2tncm91bmQ6ICNmYmNiY2M7XG4gICAgLS1jb2xvci1kYW5nZXItaWNvbi1iYWNrZ3JvdW5kOiAjNjcyMTIwO1xuICAgIC0tY29sb3ItZGFuZ2VyLWNvbG9yOiAjMjYxOTE5O1xuICAgIC0tY29sb3ItZGFuZ2VyLWljb24tY29sb3I6ICNmYmNiY2M7XG5cbiAgICAtLWNvbG9yLXdhcm5pbmctYmFja2dyb3VuZDogdmFyKC0tY29sb3Itd2FybmluZyk7XG4gICAgLS1jb2xvci13YXJuaW5nLWljb24tYmFja2dyb3VuZDogdmFyKC0tY29sb3Itd2FybmluZy1kYXJrKTtcbiAgICAtLWNvbG9yLXdhcm5pbmctY29sb3I6IHZhcigtLWNvbG9yLWdyYXktODApO1xuICAgIC0tY29sb3Itd2FybmluZy1pY29uLWNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTgwKTtcblxuICAgIC0tY29sb3ItbXV0ZWQ6IHZhcigtLWNvbG9yLWdyYXktODApO1xuICAgIC0tY29sb3ItbXV0ZWQtZGFya2VyOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgICAtLWNvbG9yLW11dGVkLWRhcmtlc3Q6IHZhcigtLWNvbG9yLWdyYXktMjApO1xuICAgIC0tY29sb3ItbXV0ZWQtYmFja2dyb3VuZDogdmFyKC0tY29sb3ItZ3JheS00MCk7XG4gICAgLS1jb2xvci1tdXRlZC1iYWNrZ3JvdW5kLWRhcmtlcjogdmFyKC0tY29sb3ItZ3JheS0yMCk7XG5cbiAgICAtLWNvbG9yLXByb21vOiAjZDI5N2ZmO1xuXG4gICAgLS1jb2xvci1sb2dvLXRleHQ6ICNlMmRmZmY7XG5cbiAgICAtLWNvbG9yLXN1cmZhY2UtaGlnaDogaHNsKDI0NSwgMTAlLCAyMSUpO1xuICAgIC0tY29sb3Itc3VyZmFjZS1sb3c6IGhzbCgyNDAsIDglLCAxNSUpO1xuICAgIC0tY29sb3Itc3VyZmFjZS1taWQ6IGhzbCgyNDAgNiUgMTAlKTtcbiAgICAtLWNvbG9yLXN1cmZhY2UtbG93ZXN0OiBoc2woMCwgMCUsIDclKTtcbiAgICAtLWNvbG9yLW9uLXN1cmZhY2U6ICNlM2UzZTg7XG4gICAgLS1jb2xvci1icmFuZC1ob3ZlcjogI2JiYjhmZjtcbiAgICAtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyOiAjZTBkZmZmO1xuICAgIC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcjogIzQwM2U2YTtcbiAgICAtLWNvbG9yLWJyYW5kLWFjdGl2ZTogI2QwY2NmZjtcbiAgICAtLWNvbG9yLWJvcmRlci1vdXRsaW5lOiAjOGU4ZDljO1xuICAgIC0tY29sb3ItYm9yZGVyLW91dGxpbmUtdmFyaWFudDogIzQ2NDY0ZjtcbiAgICAtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXI6ICM0MDNlNmE7XG4gIH1cbn1cbiIsIkBpbXBvcnQgXCIuL3ZhcmlhYmxlcy5tb2R1bGUuc2Nzc1wiO1xuQGltcG9ydCBcIi4vdGhlbWVcIjtcblxuOnJvb3Qge1xuICAtLXpJbmRleC1jYW52YXM6IDE7XG4gIC0tekluZGV4LWludGVyYWN0aXZlQ2FudmFzOiAyO1xuICAtLXpJbmRleC13eXNpd3lnOiAzO1xuICAtLXpJbmRleC1jYW52YXNCdXR0b25zOiAzO1xuICAtLXpJbmRleC1sYXllclVJOiA0O1xuICAtLXpJbmRleC1leWVEcm9wcGVyQmFja2Ryb3A6IDU7XG4gIC0tekluZGV4LWV5ZURyb3BwZXJQcmV2aWV3OiA2O1xuICAtLXpJbmRleC1oeXBlcmxpbmtDb250YWluZXI6IDc7XG5cbiAgLS16SW5kZXgtbW9kYWw6IDEwMDA7XG4gIC0tekluZGV4LXBvcHVwOiAxMDAxO1xuICAtLXpJbmRleC10b2FzdDogOTk5OTk5O1xuXG4gIC0tc2FiOiBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSk7XG4gIC0tc2FsOiBlbnYoc2FmZS1hcmVhLWluc2V0LWxlZnQpO1xuICAtLXNhcjogZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCk7XG4gIC0tc2F0OiBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCk7XG59XG5cbi5leGNhbGlkcmF3IHtcbiAgLS11aS1mb250OiBBc3Npc3RhbnQsIHN5c3RlbS11aSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSxcbiAgICBSb2JvdG8sIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcblxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICBkaXNwbGF5OiBmbGV4O1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG5cbiAgYnV0dG9uIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIH1cblxuICAmOmZvY3VzIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICB9XG5cbiAgLy8gc2VydmVzIDIgcHVycG9zZXM6XG4gIC8vIDEuIHByZXZlbnQgc2VsZWN0aW5nIHRleHQgb3V0c2lkZSB0aGUgY29tcG9uZW50IHdoZW4gZG91YmxlLWNsaWNraW5nIG9yXG4gIC8vICAgIGRyYWdnaW5nIGluc2lkZSBpdCAoZS5nLiBvbiBjYW52YXMpXG4gIC8vIDIuIHByZXZlbnQgc2VsZWN0aW5nIFVJLCBib3RoIGZyb20gdGhlIGluc2lkZSwgYW5kIGZyb20gb3V0c2lkZSB0aGVcbiAgLy8gICAgY29tcG9uZW50IChlLmcuIGlmIHlvdSBzZWxlY3QgdGV4dCBpbiBhIHNpZGViYXIpXG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gIC5leGNhbGlkcmF3LWxpbmssXG4gIGEge1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGNvbG9yOiB2YXIoLS1saW5rLWNvbG9yKTtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgIH1cbiAgICAmOmFjdGl2ZSB7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgY2FudmFzIHtcbiAgICB0b3VjaC1hY3Rpb246IG5vbmU7XG5cbiAgICAvLyBmb2xsb3dpbmcgcHJvcHMgaW1wcm92ZSBibHVycmluZXNzIGF0IGNlcnRhaW4gZGV2aWNlUGl4ZWxSYXRpb3MuXG4gICAgLy8gQUZBSUsgaXQgZG9lc24ndCBhZmZlY3QgZXhwb3J0IChpbiBmYWN0LCBleHBvcnQgc2VlbXMgc2hhcnAgZWl0aGVyIHdheSkuXG5cbiAgICBpbWFnZS1yZW5kZXJpbmc6IHBpeGVsYXRlZDsgLy8gY2hyb21pdW1cbiAgICAvLyBOT1RFOiBtdXN0IGJlIGRlY2xhcmVkICphZnRlciogdGhlIGFib3ZlXG4gICAgaW1hZ2UtcmVuZGVyaW5nOiAtbW96LWNyaXNwLWVkZ2VzOyAvLyBGRlxuXG4gICAgei1pbmRleDogdmFyKC0tekluZGV4LWNhbnZhcyk7XG5cbiAgICAmLmludGVyYWN0aXZlIHtcbiAgICAgIHotaW5kZXg6IHZhcigtLXpJbmRleC1pbnRlcmFjdGl2ZUNhbnZhcyk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHRoZSBtYWluIGNhbnZhcyBmcm9tIGRvY3VtZW50IGZsb3cgdG8gYXZvaWQgcmVzaXplT2JzZXJ2ZXJcbiAgICAvLyBmZWVkYmFjayBsb29wIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2V4Y2FsaWRyYXcvZXhjYWxpZHJhdy9wdWxsLzMzNzkpXG4gIH1cblxuICAmX19jYW52YXMtd3JhcHBlcixcbiAgJl9fY2FudmFzLnN0YXRpYyB7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICAmX19jYW52YXMge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgfVxuXG4gICZfX2VtYmVkZGFibGUge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXI6IDA7XG4gIH1cblxuICAmX19lbWJlZGRhYmxlLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDI7XG4gICAgdHJhbnNmb3JtLW9yaWdpbjogdG9wIGxlZnQ7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICAmLnRoZW1lLS1kYXJrIHtcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBpcyBpbnNwaXJlZCBieVxuICAgIC8vIGh0dHBzOi8vbWF0ZXJpYWwuaW8vZGVzaWduL2NvbG9yL2RhcmstdGhlbWUuaHRtbCNwcm9wZXJ0aWVzLCB3aGljaFxuICAgIC8vIHJlY29tbWVuZHMgc3VyZmFjZSBjb2xvciBvZiAjMTIxMjEyLCA5MyUgeWllbGRzICMxMTExMTEgZm9yICNGRkZcblxuICAgIGNhbnZhcyB7XG4gICAgICBmaWx0ZXI6IHZhcigtLXRoZW1lLWZpbHRlcik7XG4gICAgfVxuICB9XG5cbiAgLkZpeGVkU2lkZUNvbnRhaW5lciB7XG4gICAgcGFkZGluZy10b3A6IHZhcigtLXNhdCwgMCk7XG4gICAgcGFkZGluZy1yaWdodDogdmFyKC0tc2FyLCAwKTtcbiAgICBwYWRkaW5nLWJvdHRvbTogdmFyKC0tc2FiLCAwKTtcbiAgICBwYWRkaW5nLWxlZnQ6IHZhcigtLXNhbCwgMCk7XG4gIH1cblxuICAucGFuZWxSb3cge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICB9XG5cbiAgLnBhbmVsQ29sdW1uIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgcm93LWdhcDogMC43NXJlbTtcblxuICAgIGgzLFxuICAgIGxlZ2VuZCxcbiAgICAuY29udHJvbC1sYWJlbCB7XG4gICAgICBtYXJnaW46IDA7XG4gICAgICBtYXJnaW4tYm90dG9tOiAwLjI1cmVtO1xuICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeS1jb2xvcik7XG4gICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuXG4gICAgLmNvbnRyb2wtbGFiZWwgaW5wdXQge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbiAgICBsZWdlbmQge1xuICAgICAgcGFkZGluZzogMDtcbiAgICB9XG5cbiAgICAuaWNvblNlbGVjdExpc3Qge1xuICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC5idXR0b25MaXN0IHtcbiAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBjb2x1bW4tZ2FwOiAwLjVyZW07XG4gICAgICByb3ctZ2FwOiAwLjVyZW07XG5cbiAgICAgIGxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgfVxuXG4gICAgICBpbnB1dFt0eXBlPVwicmFkaW9cIl0sXG4gICAgICBpbnB1dFt0eXBlPVwiYnV0dG9uXCJdIHtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLmljb25Sb3cge1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmllbGRzZXQge1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICB9XG4gIH1cblxuICAuZGl2aWRlciB7XG4gICAgd2lkdGg6IDFweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb2MtZ3JheS0yO1xuICAgIG1hcmdpbjogMXB4O1xuICB9XG5cbiAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbTpmb2N1cy12aXNpYmxlLFxuICAuZHJvcGRvd24tbWVudS1pdGVtOmZvY3VzLXZpc2libGUsXG4gIGJ1dHRvbjpmb2N1cy12aXNpYmxlLFxuICAuYnV0dG9uTGlzdCBsYWJlbDpmb2N1cy13aXRoaW4sXG4gIGlucHV0OmZvY3VzLXZpc2libGUge1xuICAgIG91dGxpbmU6IHRyYW5zcGFyZW50O1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1ob3Zlcik7XG4gIH1cblxuICAuYnV0dG9uTGlzdCB7XG4gICAgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGFsbDogdW5zZXQgIWltcG9ydGFudDtcbiAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICBidXR0b24ge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgfVxuXG4gICAgbGFiZWwsXG4gICAgYnV0dG9uLFxuICAgIC56SW5kZXhCdXR0b24ge1xuICAgICAgQGluY2x1ZGUgb3V0bGluZUJ1dHRvblN0eWxlcztcblxuICAgICAgcGFkZGluZzogMDtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgd2lkdGg6IHZhcigtLWRlZmF1bHQtaWNvbi1zaXplKTtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1kZWZhdWx0LWljb24tc2l6ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLkFwcC10b3AtYmFyIHtcbiAgICB6LWluZGV4OiB2YXIoLS16SW5kZXgtbGF5ZXJVSSk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cblxuICAuQXBwLWJvdHRvbS1iYXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgLS1iYXItcGFkZGluZzogY2FsYyg0ICogdmFyKC0tc3BhY2UtZmFjdG9yKSk7XG4gICAgcGFkZGluZy10b3A6ICN7XCJtYXgodmFyKC0tYmFyLXBhZGRpbmcpLCB2YXIoLS1zYXQsMCkpXCJ9O1xuICAgIHBhZGRpbmctcmlnaHQ6IHZhcigtLXNhciwgMCk7XG4gICAgcGFkZGluZy1ib3R0b206IHZhcigtLXNhYiwgMCk7XG4gICAgcGFkZGluZy1sZWZ0OiB2YXIoLS1zYWwsIDApO1xuICAgIHotaW5kZXg6IDQ7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgICA+IC5Jc2xhbmQge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICBtaW4td2lkdGg6IDEwMCU7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgbWF4LWhlaWdodDogMTAwJTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgcG9pbnRlci1ldmVudHM6IHZhcigtLXVpLXBvaW50ZXJFdmVudHMpO1xuXG4gICAgICAucGFuZWxDb2x1bW4ge1xuICAgICAgICBwYWRkaW5nOiA4cHggOHB4IDAgOHB4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5BcHAtdG9vbGJhciB7XG4gICAgd2lkdGg6IDEwMCU7XG5cbiAgICAuZXJhc2VyIHtcbiAgICAgICYuVG9vbEljb246aG92ZXIge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogI2ZmZjtcbiAgICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiAjZmZmO1xuICAgICAgfVxuICAgICAgJi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuQXBwLXRvb2xiYXItY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBwYWRkaW5nOiA4cHg7XG5cbiAgICAuZHJvcGRvd24tbWVudS0tbW9iaWxlIHtcbiAgICAgIGJvdHRvbTogNTVweDtcbiAgICAgIHRvcDogYXV0bztcbiAgICB9XG4gIH1cblxuICAuQXBwLW1vYmlsZS1tZW51IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBvdmVyZmxvdy14OiB2aXNpYmxlO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBtYXJnaW4tYm90dG9tOiB2YXIoLS1iYXItcGFkZGluZyk7XG4gIH1cblxuICAuQXBwLW1lbnUge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgY29sb3I6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gIH1cblxuICAuc2hhcGVzLXNlY3Rpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcblxuICAgICYgPiAqIHtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiB2YXIoLS11aS1wb2ludGVyRXZlbnRzKTtcbiAgICB9XG4gIH1cblxuICAuQXBwLW1lbnVfdG9wIHtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyZnIgMWZyO1xuICAgIGdyaWQtZ2FwOiAycmVtO1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50O1xuXG4gICAgJiA+ICoge1xuICAgICAgcG9pbnRlci1ldmVudHM6IHZhcigtLXVpLXBvaW50ZXJFdmVudHMpO1xuICAgIH1cblxuICAgIEBtZWRpYSAobWluLXdpZHRoOiAxNTM2cHgpIHtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmciAxZnI7XG4gICAgICBncmlkLWdhcDogM3JlbTtcbiAgICB9XG4gIH1cblxuICAuQXBwLW1lbnVfdG9wID4gKjpmaXJzdC1jaGlsZCB7XG4gICAganVzdGlmeS1zZWxmOiBmbGV4LXN0YXJ0O1xuICB9XG5cbiAgLkFwcC1tZW51X3RvcCA+ICo6bGFzdC1jaGlsZCB7XG4gICAganVzdGlmeS1zZWxmOiBmbGV4LWVuZDtcbiAgfVxuXG4gIC5BcHAtbWVudV9ib3R0b20ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IDFyZW07XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBwYWRkaW5nOiAwIDFyZW07XG5cbiAgICAmLS10cmFuc2l0aW9uLWxlZnQge1xuICAgICAgc2VjdGlvbiB7XG4gICAgICAgIHdpZHRoOiAxODVweDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZWN0aW9uIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICB9XG5cbiAgLkFwcC1tZW51X2JvdHRvbSA+ICo6Zmlyc3QtY2hpbGQge1xuICAgIGp1c3RpZnktc2VsZjogZmxleC1zdGFydDtcbiAgfVxuXG4gIC5BcHAtbWVudV9ib3R0b20gPiAqOmxhc3QtY2hpbGQge1xuICAgIGp1c3RpZnktc2VsZjogZmxleC1lbmQ7XG4gIH1cblxuICAuQXBwLW1lbnVfbGVmdCB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgYXV0byAxZnI7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLkFwcC1tZW51X3JpZ2h0IHtcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmcjtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAuQXBwLW1lbnVfX2xlZnQge1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgcGFkZGluZzogMC43NXJlbTtcbiAgICB3aWR0aDogMjAycHg7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIH1cblxuICAuZHJvcGRvd24tc2VsZWN0IHtcbiAgICBoZWlnaHQ6IDEuNXJlbTtcbiAgICBwYWRkaW5nOiAwO1xuICAgIHBhZGRpbmctaW5saW5lLXN0YXJ0OiAwLjVyZW07XG4gICAgcGFkZGluZy1pbmxpbmUtZW5kOiAxLjVyZW07XG4gICAgY29sb3I6IHZhcigtLWljb24tZmlsbC1jb2xvcik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWdyYXktMSk7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tc3BhY2UtZmFjdG9yKTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1idXR0b24tZ3JheS0yKTtcbiAgICBmb250LXNpemU6IDAuOHJlbTtcbiAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0tZHJvcGRvd24taWNvbik7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiByaWdodCAwLjdyZW0gdG9wIDUwJSwgMCAwO1xuXG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogbGVmdCAwLjdyZW0gdG9wIDUwJSwgMCAwO1xuICAgIH1cblxuICAgIGJhY2tncm91bmQtc2l6ZTogMC42NWVtIGF1dG8sIDEwMCU7XG5cbiAgICAmOmZvY3VzIHtcbiAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDJweCB2YXIoLS1mb2N1cy1oaWdobGlnaHQtY29sb3IpO1xuICAgIH1cblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWdyYXktMik7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnV0dG9uLWdyYXktMik7XG4gICAgfVxuXG4gICAgJl9fbGFuZ3VhZ2Uge1xuICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taXNsYW5kLWJnLWNvbG9yKTtcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpICFpbXBvcnRhbnQ7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAgICY6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5zY3JvbGwtYmFjay10by1jb250ZW50IHtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pc2xhbmQtYmctY29sb3IpO1xuICAgIGNvbG9yOiB2YXIoLS1pY29uLWZpbGwtY29sb3IpO1xuXG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3IpO1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogNTAlO1xuICAgIGJvdHRvbTogMzBweDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgcG9pbnRlci1ldmVudHM6IHZhcigtLXVpLXBvaW50ZXJFdmVudHMpO1xuICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIH1cblxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcbiAgICB9XG4gIH1cblxuICAuaGVscC1pY29uIHtcbiAgICBAaW5jbHVkZSBvdXRsaW5lQnV0dG9uU3R5bGVzO1xuICAgIEBpbmNsdWRlIGZpbGxlZEJ1dHRvbk9uQ2FudmFzO1xuXG4gICAgd2lkdGg6IHZhcigtLWxnLWJ1dHRvbi1zaXplKTtcbiAgICBoZWlnaHQ6IHZhcigtLWxnLWJ1dHRvbi1zaXplKTtcblxuICAgIHN2ZyB7XG4gICAgICB3aWR0aDogdmFyKC0tbGctaWNvbi1zaXplKTtcbiAgICAgIGhlaWdodDogdmFyKC0tbGctaWNvbi1zaXplKTtcbiAgICB9XG4gIH1cblxuICAucmVzZXQtem9vbS1idXR0b24ge1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS11aS1mb250KTtcbiAgfVxuXG4gIC5maW5hbGl6ZS1idXR0b24ge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC1hdXRvLWZsb3c6IGNvbHVtbjtcbiAgICBnYXA6IDAuNGVtO1xuICAgIG1hcmdpbi10b3A6IGF1dG87XG4gICAgbWFyZ2luLWJvdHRvbTogYXV0bztcbiAgICBtYXJnaW4taW5saW5lLXN0YXJ0OiAwLjZlbTtcbiAgfVxuXG4gIC51bmRvLXJlZG8tYnV0dG9ucyxcbiAgLmVyYXNlci1idXR0b25zIHtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGdyaWQtYXV0by1mbG93OiBjb2x1bW47XG4gICAgbWFyZ2luLXRvcDogYXV0bztcbiAgICBtYXJnaW4tYm90dG9tOiBhdXRvO1xuICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDAuNmVtO1xuICB9XG5cbiAgQGluY2x1ZGUgaXNNb2JpbGUge1xuICAgIGFzaWRlIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIC5zY3JvbGwtYmFjay10by1jb250ZW50IHtcbiAgICAgIGJvdHRvbTogY2FsYyg4MHB4ICsgdmFyKC0tc2FiLCAwKSk7XG4gICAgICB6LWluZGV4OiAtMTtcbiAgICB9XG4gIH1cblxuICAucnRsLW1pcnJvciB7XG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoLTEpO1xuICAgIH1cbiAgfVxuXG4gIC56ZW4tbW9kZS12aXNpYmlsaXR5IHtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICAgIG9wYWNpdHk6IDE7XG4gICAgaGVpZ2h0OiBhdXRvO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cztcblxuICAgICYuemVuLW1vZGUtdmlzaWJpbGl0eS0taGlkZGVuIHtcbiAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgICBoZWlnaHQ6IDA7XG4gICAgICB3aWR0aDogMDtcbiAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC41cztcbiAgICB9XG4gIH1cblxuICAuZGlzYWJsZS1wb2ludGVyRXZlbnRzIHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50O1xuICB9XG5cbiAgJi5leGNhbGlkcmF3LS12aWV3LW1vZGUge1xuICAgIC5BcHAtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIH1cbiAgfVxuXG4gIGlucHV0LmlzLXJlZGFjdGVkIHtcbiAgICAvLyB3ZSBkb24ndCB1c2UgdHlwZT1wYXNzd29yZCBiZWNhdXNlIGJyb3dzZXJzIChjaHJvbWU/KSBwcm9tcHRcbiAgICAvLyB5b3UgdG8gc2F2ZSBpdCB3aGljaCBpcyBhbm5veWluZ1xuICAgIC13ZWJraXQtdGV4dC1zZWN1cml0eTogZGlzYztcbiAgfVxuXG4gIGlucHV0W3R5cGU9XCJ0ZXh0XCJdLFxuICB0ZXh0YXJlYTpub3QoLmV4Y2FsaWRyYXctd3lzaXd5Zykge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnktY29sb3IpO1xuICAgIGJvcmRlcjogMS41cHggc29saWQgdmFyKC0taW5wdXQtYm9yZGVyLWNvbG9yKTtcbiAgICBwYWRkaW5nOiAwLjc1cmVtO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tc3BhY2UtZmFjdG9yKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnB1dC1iZy1jb2xvcik7XG5cbiAgICAmOm5vdCg6Zm9jdXMpIHtcbiAgICAgICY6aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWJyYW5kLWhvdmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmOmZvY3VzIHtcbiAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWJyYW5kLWhvdmVyKTtcbiAgICB9XG4gIH1cblxuICBAbWVkaWEgcHJpbnQge1xuICAgIC5BcHAtYm90dG9tLWJhcixcbiAgICAuRml4ZWRTaWRlQ29udGFpbmVyLFxuICAgIC5sYXllci11aV9fd3JhcHBlciB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gIC8vIHVzZSBjdXN0b20sIG1pbmltYWxpc3RpYyBzY3JvbGxiYXJcbiAgLy8gKGRvZXNuJ3Qgd29yayBpbiBGaXJlZm94KVxuICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICB3aWR0aDogM3B4O1xuICAgIGhlaWdodDogM3B4O1xuICB9XG5cbiAgc2VsZWN0Ojotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgd2lkdGg6IDEwcHg7XG4gIH1cblxuICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zY3JvbGxiYXItdGh1bWIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIH1cbiAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tc2Nyb2xsYmFyLXRodW1iLWhvdmVyKTtcbiAgfVxuICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tc2Nyb2xsYmFyLXRodW1iKTtcbiAgfVxuXG4gIC5tb2JpbGUtbWlzYy10b29scy1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IGNhbGMoNXJlbSAtIHZhcigtLWVkaXRvci1jb250YWluZXItcGFkZGluZykpO1xuICAgIHJpZ2h0OiBjYWxjKHZhcigtLWVkaXRvci1jb250YWluZXItcGFkZGluZykgKiAtMSk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLXNpZGViYXItYm9yZGVyLWNvbG9yKTtcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLWxnKTtcbiAgICBib3JkZXItcmlnaHQ6IDA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlzbGFuZC1iZy1jb2xvcik7XG5cbiAgICAuVG9vbEljb25fX2ljb24ge1xuICAgICAgd2lkdGg6IDJyZW07XG4gICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgIH1cblxuICAgIC5kZWZhdWx0LXNpZGViYXItdHJpZ2dlciB7XG4gICAgICBib3JkZXI6IDA7XG4gICAgfVxuICB9XG5cbiAgLkFwcC10b29sYmFyLS1tb2JpbGUge1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgIG1heC13aWR0aDogOTh2dztcblxuICAgIC5Ub29sSWNvbl9fa2V5YmluZGluZyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuICAuVXNlckxpc3QtV3JhcHBlciB7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG5cbiAgICBsZWdlbmQge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgbWFyZ2luOiAwIDAgMC4yNXJlbTtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgfVxuICB9XG5cbiAgLm1haW4tbWVudS10cmlnZ2VyIHtcbiAgICBAaW5jbHVkZSBmaWxsZWRCdXR0b25PbkNhbnZhcztcbiAgfVxuXG4gIC5BcHAtbWVudV9fbGVmdCB7XG4gICAgLS1idXR0b24tYm9yZGVyOiB0cmFuc3BhcmVudDtcbiAgICAtLWJ1dHRvbi1iZzogdmFyKC0tY29sb3Itc3VyZmFjZS1taWQpO1xuXG4gICAgQGF0LXJvb3QgLmV4Y2FsaWRyYXcudGhlbWUtLWRhcmsjeyZ9IHtcbiAgICAgIC0tYnV0dG9uLWhvdmVyLWJnOiAjMzYzNTQxO1xuICAgICAgLS1idXR0b24tYmc6IHZhcigtLWNvbG9yLXN1cmZhY2UtaGlnaCk7XG4gICAgfVxuICB9XG5cbiAgLmV4Y2FsaWRyYXdfX3BhcmFncmFwaCB7XG4gICAgbWFyZ2luOiAxcmVtIDA7XG4gIH1cblxuICAuTW9kYWxfX2NvbnRlbnQge1xuICAgIC5leGNhbGlkcmF3X19wYXJhZ3JhcGg6Zmlyc3QtY2hpbGQge1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG4gICAgLmV4Y2FsaWRyYXdfX3BhcmFncmFwaCArIC5leGNhbGlkcmF3X19wYXJhZ3JhcGgge1xuICAgICAgbWFyZ2luLXRvcDogMHJlbTtcbiAgICB9XG4gIH1cbn1cblxuLkVycm9yU3BsYXNoLmV4Y2FsaWRyYXcge1xuICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgcGFkZGluZzogMjBweCAwO1xuICBvdmVyZmxvdzogYXV0bztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHVzZXItc2VsZWN0OiB0ZXh0O1xuXG4gIC5FcnJvclNwbGFzaC1tZXNzYWdlQ29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgIHBhZGRpbmc6IDQwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJG9jLXJlZC0xO1xuICAgIGJvcmRlcjogM3B4IHNvbGlkICRvYy1yZWQtOTtcbiAgfVxuXG4gIC5FcnJvclNwbGFzaC1wYXJhZ3JhcGgge1xuICAgIG1hcmdpbjogMTVweCAwO1xuICAgIG1heC13aWR0aDogNjAwcHg7XG5cbiAgICAmLmFsaWduLWNlbnRlciB7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuICB9XG5cbiAgLmJpZ2dlcixcbiAgLmJpZ2dlciBidXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gIH1cblxuICAuc21hbGxlcixcbiAgLnNtYWxsZXIgYnV0dG9uIHtcbiAgICBmb250LXNpemU6IDAuOWVtO1xuICB9XG5cbiAgLkVycm9yU3BsYXNoLWRldGFpbHMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcblxuICAgIHRleHRhcmVhIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICBmb250LWZhbWlseTogXCJDYXNjYWRpYVwiO1xuICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICB9XG4gIH1cbn1cblxuLmV4Y2FsaWRyYXdfX2VtYmVkZGFibGUtY29udGFpbmVyIHtcbiAgLmV4Y2FsaWRyYXdfX2VtYmVkZGFibGUtY29udGFpbmVyX19pbm5lciB7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tZW1iZWRkYWJsZS1yYWRpdXMpO1xuICB9XG5cbiAgLmV4Y2FsaWRyYXdfX2VtYmVkZGFibGVfX291dGVyIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgJiA+ICoge1xuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tZW1iZWRkYWJsZS1yYWRpdXMpO1xuICAgIH1cbiAgfVxuXG4gIC5leGNhbGlkcmF3X19lbWJlZGRhYmxlLWhpbnQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcbiAgICBwYWRkaW5nOiAxcmVtIDEuNnJlbTtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjZweDtcbiAgICBmb250LWZhbWlseTogXCJBc3Npc3RhbnRcIjtcbiAgfVxufVxuIiwiLy9cbi8vXG4vLyAg8J2XliDwnZeiIPCdl58g8J2XoiDwnZelXG4vLyAgdiAxLjkuMVxuLy9cbi8vICDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblxuXG4vLyAgR2VuZXJhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtd2hpdGU6ICAgICAgICAgI2ZmZmZmZjtcbiRvYy1ibGFjazogICAgICAgICAjMDAwMDAwO1xuXG5cbi8vICBHcmF5XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmF5LWxpc3Q6IChcbiAgXCIwXCI6ICNmOGY5ZmEsXG4gIFwiMVwiOiAjZjFmM2Y1LFxuICBcIjJcIjogI2U5ZWNlZixcbiAgXCIzXCI6ICNkZWUyZTYsXG4gIFwiNFwiOiAjY2VkNGRhLFxuICBcIjVcIjogI2FkYjViZCxcbiAgXCI2XCI6ICM4NjhlOTYsXG4gIFwiN1wiOiAjNDk1MDU3LFxuICBcIjhcIjogIzM0M2E0MCxcbiAgXCI5XCI6ICMyMTI1Mjlcbik7XG5cbiRvYy1ncmF5LTA6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXktMTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjFcIik7XG4kb2MtZ3JheS0yOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMlwiKTtcbiRvYy1ncmF5LTM6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXktNDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjRcIik7XG4kb2MtZ3JheS01OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNVwiKTtcbiRvYy1ncmF5LTY6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXktNzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjdcIik7XG4kb2MtZ3JheS04OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOFwiKTtcbiRvYy1ncmF5LTk6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBSZWRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXJlZC1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNWY1LFxuICBcIjFcIjogI2ZmZTNlMyxcbiAgXCIyXCI6ICNmZmM5YzksXG4gIFwiM1wiOiAjZmZhOGE4LFxuICBcIjRcIjogI2ZmODc4NyxcbiAgXCI1XCI6ICNmZjZiNmIsXG4gIFwiNlwiOiAjZmE1MjUyLFxuICBcIjdcIjogI2YwM2UzZSxcbiAgXCI4XCI6ICNlMDMxMzEsXG4gIFwiOVwiOiAjYzkyYTJhXG4pO1xuXG4kb2MtcmVkLTA6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjBcIik7XG4kb2MtcmVkLTE6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjFcIik7XG4kb2MtcmVkLTI6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjJcIik7XG4kb2MtcmVkLTM6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjNcIik7XG4kb2MtcmVkLTQ6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjRcIik7XG4kb2MtcmVkLTU6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjVcIik7XG4kb2MtcmVkLTY6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjZcIik7XG4kb2MtcmVkLTc6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjdcIik7XG4kb2MtcmVkLTg6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjhcIik7XG4kb2MtcmVkLTk6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjlcIik7XG5cblxuLy8gIFBpbmtcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXBpbmstbGlzdDogKFxuICBcIjBcIjogI2ZmZjBmNixcbiAgXCIxXCI6ICNmZmRlZWIsXG4gIFwiMlwiOiAjZmNjMmQ3LFxuICBcIjNcIjogI2ZhYTJjMSxcbiAgXCI0XCI6ICNmNzgzYWMsXG4gIFwiNVwiOiAjZjA2NTk1LFxuICBcIjZcIjogI2U2NDk4MCxcbiAgXCI3XCI6ICNkNjMzNmMsXG4gIFwiOFwiOiAjYzIyNTVjLFxuICBcIjlcIjogI2E2MWU0ZFxuKTtcblxuJG9jLXBpbmstMDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjBcIik7XG4kb2MtcGluay0xOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMVwiKTtcbiRvYy1waW5rLTI6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIyXCIpO1xuJG9jLXBpbmstMzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjNcIik7XG4kb2MtcGluay00OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNFwiKTtcbiRvYy1waW5rLTU6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI1XCIpO1xuJG9jLXBpbmstNjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjZcIik7XG4kb2MtcGluay03OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiN1wiKTtcbiRvYy1waW5rLTg6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI4XCIpO1xuJG9jLXBpbmstOTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyYXBlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmFwZS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmMGZjLFxuICBcIjFcIjogI2YzZDlmYSxcbiAgXCIyXCI6ICNlZWJlZmEsXG4gIFwiM1wiOiAjZTU5OWY3LFxuICBcIjRcIjogI2RhNzdmMixcbiAgXCI1XCI6ICNjYzVkZTgsXG4gIFwiNlwiOiAjYmU0YmRiLFxuICBcIjdcIjogI2FlM2VjOSxcbiAgXCI4XCI6ICM5YzM2YjUsXG4gIFwiOVwiOiAjODYyZTljXG4pO1xuXG4kb2MtZ3JhcGUtMDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXBlLTE6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmFwZS0yOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjJcIik7XG4kb2MtZ3JhcGUtMzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXBlLTQ6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmFwZS01OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjVcIik7XG4kb2MtZ3JhcGUtNjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXBlLTc6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmFwZS04OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjhcIik7XG4kb2MtZ3JhcGUtOTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBWaW9sZXRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXZpb2xldC1saXN0OiAoXG4gIFwiMFwiOiAjZjNmMGZmLFxuICBcIjFcIjogI2U1ZGJmZixcbiAgXCIyXCI6ICNkMGJmZmYsXG4gIFwiM1wiOiAjYjE5N2ZjLFxuICBcIjRcIjogIzk3NzVmYSxcbiAgXCI1XCI6ICM4NDVlZjcsXG4gIFwiNlwiOiAjNzk1MGYyLFxuICBcIjdcIjogIzcwNDhlOCxcbiAgXCI4XCI6ICM2NzQxZDksXG4gIFwiOVwiOiAjNWYzZGM0XG4pO1xuXG4kb2MtdmlvbGV0LTA6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjBcIik7XG4kb2MtdmlvbGV0LTE6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjFcIik7XG4kb2MtdmlvbGV0LTI6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjJcIik7XG4kb2MtdmlvbGV0LTM6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjNcIik7XG4kb2MtdmlvbGV0LTQ6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjRcIik7XG4kb2MtdmlvbGV0LTU6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjVcIik7XG4kb2MtdmlvbGV0LTY6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjZcIik7XG4kb2MtdmlvbGV0LTc6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjdcIik7XG4kb2MtdmlvbGV0LTg6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjhcIik7XG4kb2MtdmlvbGV0LTk6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEluZGlnb1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtaW5kaWdvLWxpc3Q6IChcbiAgXCIwXCI6ICNlZGYyZmYsXG4gIFwiMVwiOiAjZGJlNGZmLFxuICBcIjJcIjogI2JhYzhmZixcbiAgXCIzXCI6ICM5MWE3ZmYsXG4gIFwiNFwiOiAjNzQ4ZmZjLFxuICBcIjVcIjogIzVjN2NmYSxcbiAgXCI2XCI6ICM0YzZlZjUsXG4gIFwiN1wiOiAjNDI2M2ViLFxuICBcIjhcIjogIzNiNWJkYixcbiAgXCI5XCI6ICMzNjRmYzdcbik7XG5cbiRvYy1pbmRpZ28tMDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMFwiKTtcbiRvYy1pbmRpZ28tMTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMVwiKTtcbiRvYy1pbmRpZ28tMjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMlwiKTtcbiRvYy1pbmRpZ28tMzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiM1wiKTtcbiRvYy1pbmRpZ28tNDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNFwiKTtcbiRvYy1pbmRpZ28tNTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNVwiKTtcbiRvYy1pbmRpZ28tNjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNlwiKTtcbiRvYy1pbmRpZ28tNzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiN1wiKTtcbiRvYy1pbmRpZ28tODogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOFwiKTtcbiRvYy1pbmRpZ28tOTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQmx1ZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtYmx1ZS1saXN0OiAoXG4gIFwiMFwiOiAjZTdmNWZmLFxuICBcIjFcIjogI2QwZWJmZixcbiAgXCIyXCI6ICNhNWQ4ZmYsXG4gIFwiM1wiOiAjNzRjMGZjLFxuICBcIjRcIjogIzRkYWJmNyxcbiAgXCI1XCI6ICMzMzlhZjAsXG4gIFwiNlwiOiAjMjI4YmU2LFxuICBcIjdcIjogIzFjN2VkNixcbiAgXCI4XCI6ICMxOTcxYzIsXG4gIFwiOVwiOiAjMTg2NGFiXG4pO1xuXG4kb2MtYmx1ZS0wOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMFwiKTtcbiRvYy1ibHVlLTE6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIxXCIpO1xuJG9jLWJsdWUtMjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjJcIik7XG4kb2MtYmx1ZS0zOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiM1wiKTtcbiRvYy1ibHVlLTQ6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI0XCIpO1xuJG9jLWJsdWUtNTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjVcIik7XG4kb2MtYmx1ZS02OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNlwiKTtcbiRvYy1ibHVlLTc6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI3XCIpO1xuJG9jLWJsdWUtODogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjhcIik7XG4kb2MtYmx1ZS05OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ3lhblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY3lhbi1saXN0OiAoXG4gIFwiMFwiOiAjZTNmYWZjLFxuICBcIjFcIjogI2M1ZjZmYSxcbiAgXCIyXCI6ICM5OWU5ZjIsXG4gIFwiM1wiOiAjNjZkOWU4LFxuICBcIjRcIjogIzNiYzlkYixcbiAgXCI1XCI6ICMyMmI4Y2YsXG4gIFwiNlwiOiAjMTVhYWJmLFxuICBcIjdcIjogIzEwOThhZCxcbiAgXCI4XCI6ICMwYzg1OTksXG4gIFwiOVwiOiAjMGI3Mjg1XG4pO1xuXG4kb2MtY3lhbi0wOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMFwiKTtcbiRvYy1jeWFuLTE6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIxXCIpO1xuJG9jLWN5YW4tMjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjJcIik7XG4kb2MtY3lhbi0zOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiM1wiKTtcbiRvYy1jeWFuLTQ6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI0XCIpO1xuJG9jLWN5YW4tNTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjVcIik7XG4kb2MtY3lhbi02OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNlwiKTtcbiRvYy1jeWFuLTc6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI3XCIpO1xuJG9jLWN5YW4tODogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjhcIik7XG4kb2MtY3lhbi05OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVGVhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdGVhbC1saXN0OiAoXG4gIFwiMFwiOiAjZTZmY2Y1LFxuICBcIjFcIjogI2MzZmFlOCxcbiAgXCIyXCI6ICM5NmYyZDcsXG4gIFwiM1wiOiAjNjNlNmJlLFxuICBcIjRcIjogIzM4ZDlhOSxcbiAgXCI1XCI6ICMyMGM5OTcsXG4gIFwiNlwiOiAjMTJiODg2LFxuICBcIjdcIjogIzBjYTY3OCxcbiAgXCI4XCI6ICMwOTkyNjgsXG4gIFwiOVwiOiAjMDg3ZjViXG4pO1xuXG4kb2MtdGVhbC0wOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMFwiKTtcbiRvYy10ZWFsLTE6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIxXCIpO1xuJG9jLXRlYWwtMjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjJcIik7XG4kb2MtdGVhbC0zOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiM1wiKTtcbiRvYy10ZWFsLTQ6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI0XCIpO1xuJG9jLXRlYWwtNTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjVcIik7XG4kb2MtdGVhbC02OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNlwiKTtcbiRvYy10ZWFsLTc6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI3XCIpO1xuJG9jLXRlYWwtODogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjhcIik7XG4kb2MtdGVhbC05OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JlZW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyZWVuLWxpc3Q6IChcbiAgXCIwXCI6ICNlYmZiZWUsXG4gIFwiMVwiOiAjZDNmOWQ4LFxuICBcIjJcIjogI2IyZjJiYixcbiAgXCIzXCI6ICM4Y2U5OWEsXG4gIFwiNFwiOiAjNjlkYjdjLFxuICBcIjVcIjogIzUxY2Y2NixcbiAgXCI2XCI6ICM0MGMwNTcsXG4gIFwiN1wiOiAjMzdiMjRkLFxuICBcIjhcIjogIzJmOWU0NCxcbiAgXCI5XCI6ICMyYjhhM2Vcbik7XG5cbiRvYy1ncmVlbi0wOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjBcIik7XG4kb2MtZ3JlZW4tMTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIxXCIpO1xuJG9jLWdyZWVuLTI6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmVlbi0zOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjNcIik7XG4kb2MtZ3JlZW4tNDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI0XCIpO1xuJG9jLWdyZWVuLTU6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmVlbi02OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjZcIik7XG4kb2MtZ3JlZW4tNzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI3XCIpO1xuJG9jLWdyZWVuLTg6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmVlbi05OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIExpbWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWxpbWUtbGlzdDogKFxuICBcIjBcIjogI2Y0ZmNlMyxcbiAgXCIxXCI6ICNlOWZhYzgsXG4gIFwiMlwiOiAjZDhmNWEyLFxuICBcIjNcIjogI2MwZWI3NSxcbiAgXCI0XCI6ICNhOWUzNGIsXG4gIFwiNVwiOiAjOTRkODJkLFxuICBcIjZcIjogIzgyYzkxZSxcbiAgXCI3XCI6ICM3NGI4MTYsXG4gIFwiOFwiOiAjNjZhODBmLFxuICBcIjlcIjogIzVjOTQwZFxuKTtcblxuJG9jLWxpbWUtMDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjBcIik7XG4kb2MtbGltZS0xOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMVwiKTtcbiRvYy1saW1lLTI6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIyXCIpO1xuJG9jLWxpbWUtMzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjNcIik7XG4kb2MtbGltZS00OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNFwiKTtcbiRvYy1saW1lLTU6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI1XCIpO1xuJG9jLWxpbWUtNjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjZcIik7XG4kb2MtbGltZS03OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiN1wiKTtcbiRvYy1saW1lLTg6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI4XCIpO1xuJG9jLWxpbWUtOTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFllbGxvd1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MteWVsbG93LWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY5ZGIsXG4gIFwiMVwiOiAjZmZmM2JmLFxuICBcIjJcIjogI2ZmZWM5OSxcbiAgXCIzXCI6ICNmZmUwNjYsXG4gIFwiNFwiOiAjZmZkNDNiLFxuICBcIjVcIjogI2ZjYzQxOSxcbiAgXCI2XCI6ICNmYWIwMDUsXG4gIFwiN1wiOiAjZjU5ZjAwLFxuICBcIjhcIjogI2YwOGMwMCxcbiAgXCI5XCI6ICNlNjc3MDBcbik7XG5cbiRvYy15ZWxsb3ctMDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMFwiKTtcbiRvYy15ZWxsb3ctMTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMVwiKTtcbiRvYy15ZWxsb3ctMjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMlwiKTtcbiRvYy15ZWxsb3ctMzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiM1wiKTtcbiRvYy15ZWxsb3ctNDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNFwiKTtcbiRvYy15ZWxsb3ctNTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNVwiKTtcbiRvYy15ZWxsb3ctNjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNlwiKTtcbiRvYy15ZWxsb3ctNzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiN1wiKTtcbiRvYy15ZWxsb3ctODogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOFwiKTtcbiRvYy15ZWxsb3ctOTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgT3JhbmdlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1vcmFuZ2UtbGlzdDogKFxuICBcIjBcIjogI2ZmZjRlNixcbiAgXCIxXCI6ICNmZmU4Y2MsXG4gIFwiMlwiOiAjZmZkOGE4LFxuICBcIjNcIjogI2ZmYzA3OCxcbiAgXCI0XCI6ICNmZmE5NGQsXG4gIFwiNVwiOiAjZmY5MjJiLFxuICBcIjZcIjogI2ZkN2UxNCxcbiAgXCI3XCI6ICNmNzY3MDcsXG4gIFwiOFwiOiAjZTg1OTBjLFxuICBcIjlcIjogI2Q5NDgwZlxuKTtcblxuJG9jLW9yYW5nZS0wOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIwXCIpO1xuJG9jLW9yYW5nZS0xOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIxXCIpO1xuJG9jLW9yYW5nZS0yOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIyXCIpO1xuJG9jLW9yYW5nZS0zOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIzXCIpO1xuJG9jLW9yYW5nZS00OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI0XCIpO1xuJG9jLW9yYW5nZS01OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI1XCIpO1xuJG9jLW9yYW5nZS02OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI2XCIpO1xuJG9jLW9yYW5nZS03OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI3XCIpO1xuJG9jLW9yYW5nZS04OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI4XCIpO1xuJG9jLW9yYW5nZS05OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDb2xvciBsaXN0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jb2xvci1zcGVjdHJ1bTogICA5O1xuXG4kb2MtY29sb3ItbGlzdDogKFxuICAkb2MtZ3JheS1saXN0OiAgICAgIFwiZ3JheVwiLFxuICAkb2MtcmVkLWxpc3Q6ICAgICAgXCJyZWRcIixcbiAgJG9jLXBpbmstbGlzdDogICAgICBcInBpbmtcIixcbiAgJG9jLWdyYXBlLWxpc3Q6ICAgICAgXCJncmFwZVwiLFxuICAkb2MtdmlvbGV0LWxpc3Q6ICAgICAgXCJ2aW9sZXRcIixcbiAgJG9jLWluZGlnby1saXN0OiAgICAgIFwiaW5kaWdvXCIsXG4gICRvYy1ibHVlLWxpc3Q6ICAgICAgXCJibHVlXCIsXG4gICRvYy1jeWFuLWxpc3Q6ICAgICAgXCJjeWFuXCIsXG4gICRvYy10ZWFsLWxpc3Q6ICAgICAgXCJ0ZWFsXCIsXG4gICRvYy1ncmVlbi1saXN0OiAgICAgIFwiZ3JlZW5cIixcbiAgJG9jLWxpbWUtbGlzdDogICAgICBcImxpbWVcIixcbiAgJG9jLXllbGxvdy1saXN0OiAgICAgIFwieWVsbG93XCIsXG4gICRvYy1vcmFuZ2UtbGlzdDogICAgICBcIm9yYW5nZVwiXG4pO1xuIl19 */", "/* http://www.eaglefonts.com/fg-virgil-ttf-131249.htm */\n@font-face {\n  font-family: \"Virgil\";\n  src: url(\"Virgil.woff2\");\n  font-display: swap;\n}\n\n/* https://github.com/microsoft/cascadia-code */\n@font-face {\n  font-family: \"Cascadia\";\n  src: url(\"Cascadia.woff2\");\n  font-display: swap;\n}\n\n@font-face {\n  font-family: \"Assistant\";\n  src: url(\"Assistant-Regular.woff2\");\n  font-display: swap;\n  font-weight: 400;\n}\n@font-face {\n  font-family: \"Assistant\";\n  src: url(\"Assistant-Medium.woff2\");\n  font-display: swap;\n  font-weight: 500;\n}\n@font-face {\n  font-family: \"Assistant\";\n  src: url(\"Assistant-SemiBold.woff2\");\n  font-display: swap;\n  font-weight: 600;\n}\n@font-face {\n  font-family: \"Assistant\";\n  src: url(\"Assistant-Bold.woff2\");\n  font-display: swap;\n  font-weight: 700;\n}\n", "const polyfill = () => {\n  if (!Array.prototype.at) {\n    // Taken from https://github.com/tc39/proposal-relative-indexing-method#polyfill so that it works in tests\n    /* eslint-disable */\n    Object.defineProperty(Array.prototype, \"at\", {\n      value: function (n: number) {\n        // ToInteger() abstract op\n        n = Math.trunc(n) || 0;\n        // Allow negative indexing from the end\n        if (n < 0) {\n          n += this.length;\n        }\n        // OOB access is guaranteed to return undefined\n        if (n < 0 || n >= this.length) {\n          return undefined;\n        }\n        // Otherwise, this is just normal property access\n        return this[n];\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    });\n  }\n\n  if (!Element.prototype.replaceChildren) {\n    Element.prototype.replaceChildren = function (...nodes) {\n      this.innerHTML = \"\";\n      this.append(...nodes);\n    };\n  }\n};\nexport default polyfill;\n", ".footer-center {\n  pointer-events: none;\n  display: flex;\n  width: 100%;\n  justify-content: flex-start;\n  margin-inline-end: 0.6rem;\n}\n.footer-center > * {\n  pointer-events: var(--ui-pointerEvents);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvZm9vdGVyIiwic291cmNlcyI6WyJGb290ZXJDZW50ZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFO0VBS0E7RUFDQTtFQUNBO0VBQ0E7O0FBUEE7RUFDRSIsInNvdXJjZXNDb250ZW50IjpbIi5mb290ZXItY2VudGVyIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICYgPiAqIHtcbiAgICBwb2ludGVyLWV2ZW50czogdmFyKC0tdWktcG9pbnRlckV2ZW50cyk7XG4gIH1cblxuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICBtYXJnaW4taW5saW5lLWVuZDogMC42cmVtO1xufVxuIl19 */", "import clsx from \"clsx\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport \"./FooterCenter.scss\";\nimport { useUIAppState } from \"../../context/ui-appState\";\n\nconst FooterCenter = ({ children }: { children?: React.ReactNode }) => {\n  const { FooterCenterTunnel } = useTunnels();\n  const appState = useUIAppState();\n  return (\n    <FooterCenterTunnel.In>\n      <div\n        className={clsx(\"footer-center zen-mode-transition\", {\n          \"layer-ui__wrapper__footer-left--transition-bottom\":\n            appState.zenModeEnabled,\n        })}\n      >\n        {children}\n      </div>\n    </FooterCenterTunnel.In>\n  );\n};\n\nexport default FooterCenter;\nFooterCenter.displayName = \"FooterCenter\";\n", ".excalidraw .ExcalidrawLogo {\n  --logo-icon--xs: 2rem;\n  --logo-text--xs: 1.5rem;\n  --logo-icon--small: 2.5rem;\n  --logo-text--small: 1.75rem;\n  --logo-icon--normal: 3rem;\n  --logo-text--normal: 2.2rem;\n  --logo-icon--large: 90px;\n  --logo-text--large: 65px;\n  display: flex;\n  align-items: center;\n}\n.excalidraw .ExcalidrawLogo svg {\n  flex: 0 0 auto;\n}\n.excalidraw .ExcalidrawLogo .ExcalidrawLogo-icon {\n  width: auto;\n  color: var(--color-logo-icon);\n}\n.excalidraw .ExcalidrawLogo .ExcalidrawLogo-text {\n  margin-left: 0.75rem;\n  width: auto;\n  color: var(--color-logo-text);\n}\n.excalidraw .ExcalidrawLogo.is-xs .ExcalidrawLogo-icon {\n  height: var(--logo-icon--xs);\n}\n.excalidraw .ExcalidrawLogo.is-xs .ExcalidrawLogo-text {\n  height: var(--logo-text--xs);\n}\n.excalidraw .ExcalidrawLogo.is-small .ExcalidrawLogo-icon {\n  height: var(--logo-icon--small);\n}\n.excalidraw .ExcalidrawLogo.is-small .ExcalidrawLogo-text {\n  height: var(--logo-text--small);\n}\n.excalidraw .ExcalidrawLogo.is-normal .ExcalidrawLogo-icon {\n  height: var(--logo-icon--normal);\n}\n.excalidraw .ExcalidrawLogo.is-normal .ExcalidrawLogo-text {\n  height: var(--logo-text--normal);\n}\n.excalidraw .ExcalidrawLogo.is-large .ExcalidrawLogo-icon {\n  height: var(--logo-icon--large);\n}\n.excalidraw .ExcalidrawLogo.is-large .ExcalidrawLogo-text {\n  height: var(--logo-text--large);\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMiLCJzb3VyY2VzIjpbIkV4Y2FsaWRyYXdMb2dvLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRTtFQUNBO0VBRUE7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUNBO0VBRUE7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTs7QUFJQTtFQUNFOztBQUdGO0VBQ0U7O0FBS0Y7RUFDRTs7QUFHRjtFQUNFOztBQUtGO0VBQ0U7O0FBR0Y7RUFDRTs7QUFLRjtFQUNFOztBQUdGO0VBQ0UiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhjYWxpZHJhdyB7XG4gIC5FeGNhbGlkcmF3TG9nbyB7XG4gICAgLS1sb2dvLWljb24tLXhzOiAycmVtO1xuICAgIC0tbG9nby10ZXh0LS14czogMS41cmVtO1xuXG4gICAgLS1sb2dvLWljb24tLXNtYWxsOiAyLjVyZW07XG4gICAgLS1sb2dvLXRleHQtLXNtYWxsOiAxLjc1cmVtO1xuXG4gICAgLS1sb2dvLWljb24tLW5vcm1hbDogM3JlbTtcbiAgICAtLWxvZ28tdGV4dC0tbm9ybWFsOiAyLjJyZW07XG5cbiAgICAtLWxvZ28taWNvbi0tbGFyZ2U6IDkwcHg7XG4gICAgLS1sb2dvLXRleHQtLWxhcmdlOiA2NXB4O1xuXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgc3ZnIHtcbiAgICAgIGZsZXg6IDAgMCBhdXRvO1xuICAgIH1cblxuICAgIC5FeGNhbGlkcmF3TG9nby1pY29uIHtcbiAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWxvZ28taWNvbik7XG4gICAgfVxuXG4gICAgLkV4Y2FsaWRyYXdMb2dvLXRleHQge1xuICAgICAgbWFyZ2luLWxlZnQ6IDAuNzVyZW07XG4gICAgICB3aWR0aDogYXV0bztcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1sb2dvLXRleHQpO1xuICAgIH1cblxuICAgICYuaXMteHMge1xuICAgICAgLkV4Y2FsaWRyYXdMb2dvLWljb24ge1xuICAgICAgICBoZWlnaHQ6IHZhcigtLWxvZ28taWNvbi0teHMpO1xuICAgICAgfVxuXG4gICAgICAuRXhjYWxpZHJhd0xvZ28tdGV4dCB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tbG9nby10ZXh0LS14cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi5pcy1zbWFsbCB7XG4gICAgICAuRXhjYWxpZHJhd0xvZ28taWNvbiB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tbG9nby1pY29uLS1zbWFsbCk7XG4gICAgICB9XG5cbiAgICAgIC5FeGNhbGlkcmF3TG9nby10ZXh0IHtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1sb2dvLXRleHQtLXNtYWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLmlzLW5vcm1hbCB7XG4gICAgICAuRXhjYWxpZHJhd0xvZ28taWNvbiB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tbG9nby1pY29uLS1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuRXhjYWxpZHJhd0xvZ28tdGV4dCB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tbG9nby10ZXh0LS1ub3JtYWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgICYuaXMtbGFyZ2Uge1xuICAgICAgLkV4Y2FsaWRyYXdMb2dvLWljb24ge1xuICAgICAgICBoZWlnaHQ6IHZhcigtLWxvZ28taWNvbi0tbGFyZ2UpO1xuICAgICAgfVxuXG4gICAgICAuRXhjYWxpZHJhd0xvZ28tdGV4dCB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tbG9nby10ZXh0LS1sYXJnZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */", "import \"./ExcalidrawLogo.scss\";\n\nconst LogoIcon = () => (\n  <svg\n    viewBox=\"0 0 40 40\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"ExcalidrawLogo-icon\"\n  >\n    <path\n      d=\"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nconst LogoText = () => (\n  <svg\n    viewBox=\"0 0 450 55\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"none\"\n    className=\"ExcalidrawLogo-text\"\n  >\n    <path\n      d=\"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n    <path\n      d=\"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z\"\n      fill=\"currentColor\"\n      transform=\"translate(-144.023 -51.76)\"\n    />\n  </svg>\n);\n\ntype LogoSize = \"xs\" | \"small\" | \"normal\" | \"large\" | \"custom\";\n\ninterface LogoProps {\n  size?: LogoSize;\n  withText?: boolean;\n  style?: React.CSSProperties;\n  /**\n   * If true, the logo will not be wrapped in a Link component.\n   * The link prop will be ignored as well.\n   * It will merely be a plain div.\n   */\n  isNotLink?: boolean;\n}\n\nexport const ExcalidrawLogo = ({\n  style,\n  size = \"small\",\n  withText,\n}: LogoProps) => {\n  return (\n    <div className={`ExcalidrawLogo is-${size}`} style={style}>\n      <LogoIcon />\n      {withText && <LogoText />}\n    </div>\n  );\n};\n", "import { actionLoadScene, actionShortcuts } from \"../../actions\";\nimport { getShortcutFromShortcutName } from \"../../actions/shortcuts\";\nimport { t, useI18n } from \"../../i18n\";\nimport { useDevice, useExcalidrawActionManager } from \"../App\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { HelpIcon, LoadIcon, usersIcon } from \"../icons\";\nimport { useUIAppState } from \"../../context/ui-appState\";\nimport { ExcalidrawLogo } from \"../ExcalidrawLogo\";\n\nconst WelcomeScreenMenuItemContent = ({\n  icon,\n  shortcut,\n  children,\n}: {\n  icon?: JSX.Element;\n  shortcut?: string | null;\n  children: React.ReactNode;\n}) => {\n  const device = useDevice();\n  return (\n    <>\n      <div className=\"welcome-screen-menu-item__icon\">{icon}</div>\n      <div className=\"welcome-screen-menu-item__text\">{children}</div>\n      {shortcut && !device.editor.isMobile && (\n        <div className=\"welcome-screen-menu-item__shortcut\">{shortcut}</div>\n      )}\n    </>\n  );\n};\nWelcomeScreenMenuItemContent.displayName = \"WelcomeScreenMenuItemContent\";\n\nconst WelcomeScreenMenuItem = ({\n  onSelect,\n  children,\n  icon,\n  shortcut,\n  className = \"\",\n  ...props\n}: {\n  onSelect: () => void;\n  children: React.ReactNode;\n  icon?: JSX.Element;\n  shortcut?: string | null;\n} & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  return (\n    <button\n      {...props}\n      type=\"button\"\n      className={`welcome-screen-menu-item ${className}`}\n      onClick={onSelect}\n    >\n      <WelcomeScreenMenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </WelcomeScreenMenuItemContent>\n    </button>\n  );\n};\nWelcomeScreenMenuItem.displayName = \"WelcomeScreenMenuItem\";\n\nconst WelcomeScreenMenuItemLink = ({\n  children,\n  href,\n  icon,\n  shortcut,\n  className = \"\",\n  ...props\n}: {\n  children: React.ReactNode;\n  href: string;\n  icon?: JSX.Element;\n  shortcut?: string | null;\n} & React.AnchorHTMLAttributes<HTMLAnchorElement>) => {\n  return (\n    <a\n      {...props}\n      className={`welcome-screen-menu-item ${className}`}\n      href={href}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n    >\n      <WelcomeScreenMenuItemContent icon={icon} shortcut={shortcut}>\n        {children}\n      </WelcomeScreenMenuItemContent>\n    </a>\n  );\n};\nWelcomeScreenMenuItemLink.displayName = \"WelcomeScreenMenuItemLink\";\n\nconst Center = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenCenterTunnel } = useTunnels();\n  return (\n    <WelcomeScreenCenterTunnel.In>\n      <div className=\"welcome-screen-center\">\n        {children || (\n          <>\n            <Logo />\n            <Heading>{t(\"welcomeScreen.defaults.center_heading\")}</Heading>\n            <Menu>\n              <MenuItemLoadScene />\n              <MenuItemHelp />\n            </Menu>\n          </>\n        )}\n      </div>\n    </WelcomeScreenCenterTunnel.In>\n  );\n};\nCenter.displayName = \"Center\";\n\nconst Logo = ({ children }: { children?: React.ReactNode }) => {\n  return (\n    <div className=\"welcome-screen-center__logo virgil welcome-screen-decor\">\n      {children || <ExcalidrawLogo withText />}\n    </div>\n  );\n};\nLogo.displayName = \"Logo\";\n\nconst Heading = ({ children }: { children: React.ReactNode }) => {\n  return (\n    <div className=\"welcome-screen-center__heading welcome-screen-decor virgil\">\n      {children}\n    </div>\n  );\n};\nHeading.displayName = \"Heading\";\n\nconst Menu = ({ children }: { children?: React.ReactNode }) => {\n  return <div className=\"welcome-screen-menu\">{children}</div>;\n};\nMenu.displayName = \"Menu\";\n\nconst MenuItemHelp = () => {\n  const actionManager = useExcalidrawActionManager();\n\n  return (\n    <WelcomeScreenMenuItem\n      onSelect={() => actionManager.executeAction(actionShortcuts)}\n      shortcut=\"?\"\n      icon={HelpIcon}\n    >\n      {t(\"helpDialog.title\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemHelp.displayName = \"MenuItemHelp\";\n\nconst MenuItemLoadScene = () => {\n  const appState = useUIAppState();\n  const actionManager = useExcalidrawActionManager();\n\n  if (appState.viewModeEnabled) {\n    return null;\n  }\n\n  return (\n    <WelcomeScreenMenuItem\n      onSelect={() => actionManager.executeAction(actionLoadScene)}\n      shortcut={getShortcutFromShortcutName(\"loadScene\")}\n      icon={LoadIcon}\n    >\n      {t(\"buttons.load\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemLoadScene.displayName = \"MenuItemLoadScene\";\n\nconst MenuItemLiveCollaborationTrigger = ({\n  onSelect,\n}: {\n  onSelect: () => any;\n}) => {\n  const { t } = useI18n();\n  return (\n    <WelcomeScreenMenuItem shortcut={null} onSelect={onSelect} icon={usersIcon}>\n      {t(\"labels.liveCollaboration\")}\n    </WelcomeScreenMenuItem>\n  );\n};\nMenuItemLiveCollaborationTrigger.displayName =\n  \"MenuItemLiveCollaborationTrigger\";\n\n// -----------------------------------------------------------------------------\n\nCenter.Logo = Logo;\nCenter.Heading = Heading;\nCenter.Menu = Menu;\nCenter.MenuItem = WelcomeScreenMenuItem;\nCenter.MenuItemLink = WelcomeScreenMenuItemLink;\nCenter.MenuItemHelp = MenuItemHelp;\nCenter.MenuItemLoadScene = MenuItemLoadScene;\nCenter.MenuItemLiveCollaborationTrigger = MenuItemLiveCollaborationTrigger;\n\nexport { Center };\n", "import { t } from \"../../i18n\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport {\n  WelcomeScreenHelpArrow,\n  WelcomeScreenMenuArrow,\n  WelcomeScreenTopToolbarArrow,\n} from \"../icons\";\n\nconst MenuHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenMenuHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenMenuHintTunnel.In>\n      <div className=\"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu\">\n        {WelcomeScreenMenuArrow}\n        <div className=\"welcome-screen-decor-hint__label\">\n          {children || t(\"welcomeScreen.defaults.menuHint\")}\n        </div>\n      </div>\n    </WelcomeScreenMenuHintTunnel.In>\n  );\n};\nMenuHint.displayName = \"MenuHint\";\n\nconst ToolbarHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenToolbarHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenToolbarHintTunnel.In>\n      <div className=\"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar\">\n        <div className=\"welcome-screen-decor-hint__label\">\n          {children || t(\"welcomeScreen.defaults.toolbarHint\")}\n        </div>\n        {WelcomeScreenTopToolbarArrow}\n      </div>\n    </WelcomeScreenToolbarHintTunnel.In>\n  );\n};\nToolbarHint.displayName = \"ToolbarHint\";\n\nconst HelpHint = ({ children }: { children?: React.ReactNode }) => {\n  const { WelcomeScreenHelpHintTunnel } = useTunnels();\n  return (\n    <WelcomeScreenHelpHintTunnel.In>\n      <div className=\"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help\">\n        <div>{children || t(\"welcomeScreen.defaults.helpHint\")}</div>\n        {WelcomeScreenHelpArrow}\n      </div>\n    </WelcomeScreenHelpHintTunnel.In>\n  );\n};\nHelpHint.displayName = \"HelpHint\";\n\nexport { HelpHint, MenuHint, ToolbarHint };\n", ".excalidraw .virgil {\n  font-family: \"Virgil\";\n}\n.excalidraw .welcome-screen-decor {\n  pointer-events: none;\n  color: var(--color-gray-40);\n}\n.excalidraw .welcome-screen-decor a {\n  --color: var(--color-primary);\n  color: var(--color);\n  text-decoration: none;\n  margin-bottom: -6px;\n}\n.excalidraw.theme--dark .welcome-screen-decor {\n  color: var(--color-gray-60);\n}\n@media (max-height: 599px) {\n  .excalidraw .welcome-screen-decor-hint {\n    display: none !important;\n  }\n}\n@media (max-width: 1024px), (max-width: 800px) {\n  .excalidraw .welcome-screen-decor-hint .welcome-screen-decor--help, .excalidraw .welcome-screen-decor-hint .welcome-screen-decor--menu {\n    display: none;\n  }\n}\n.excalidraw .welcome-screen-decor-hint--help {\n  display: flex;\n  position: absolute;\n  right: 0;\n  bottom: 100%;\n}\n:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help {\n  left: 0;\n  right: auto;\n}\n.excalidraw .welcome-screen-decor-hint--help svg {\n  margin-top: 0.5rem;\n  width: 85px;\n  height: 71px;\n  transform: scaleX(-1) rotate(80deg);\n}\n:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help svg {\n  transform: rotate(80deg);\n}\n.excalidraw .welcome-screen-decor-hint--toolbar {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 2.5rem;\n  display: flex;\n  align-items: baseline;\n}\n.excalidraw .welcome-screen-decor-hint--toolbar .welcome-screen-decor-hint__label {\n  width: 120px;\n  position: relative;\n  top: -0.5rem;\n}\n.excalidraw .welcome-screen-decor-hint--toolbar svg {\n  width: 38px;\n  height: 78px;\n}\n:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--toolbar svg {\n  transform: scaleX(-1);\n}\n.excalidraw .welcome-screen-decor-hint--menu {\n  position: absolute;\n  width: 320px;\n  font-size: 1rem;\n  top: 100%;\n  margin-top: 0.25rem;\n  margin-inline-start: 0.6rem;\n  display: flex;\n  align-items: flex-end;\n  gap: 0.5rem;\n}\n.excalidraw .welcome-screen-decor-hint--menu svg {\n  width: 41px;\n  height: 94px;\n}\n:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--menu svg {\n  transform: scaleX(-1);\n}\n@media (max-width: 860px) {\n  .excalidraw .welcome-screen-decor-hint--menu .welcome-screen-decor-hint__label {\n    max-width: 160px;\n  }\n}\n.excalidraw .welcome-screen-center {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  pointer-events: none;\n  left: 1rem;\n  top: 1rem;\n  right: 1rem;\n  bottom: 1rem;\n}\n.excalidraw .welcome-screen-center__logo {\n  display: flex;\n  align-items: center;\n  column-gap: 0.75rem;\n  font-size: 2.25rem;\n}\n.excalidraw .welcome-screen-center__heading {\n  font-size: 1.125rem;\n  text-align: center;\n}\n.excalidraw .welcome-screen-menu {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  justify-content: center;\n  align-items: center;\n}\n.excalidraw .welcome-screen-menu-item {\n  box-sizing: border-box;\n  pointer-events: var(--ui-pointerEvents);\n  color: var(--color-gray-50);\n  font-size: 0.875rem;\n  width: 100%;\n  min-width: 300px;\n  max-width: 400px;\n  display: grid;\n  align-items: center;\n  justify-content: space-between;\n  background: none;\n  border: 1px solid transparent;\n  padding: 0.75rem;\n  border-radius: var(--border-radius-md);\n  grid-template-columns: calc(var(--default-icon-size) + 0.5rem) 1fr 3rem;\n}\n.excalidraw .welcome-screen-menu-item__text {\n  display: flex;\n  align-items: center;\n  margin-right: auto;\n  text-align: left;\n  column-gap: 0.5rem;\n}\n.excalidraw .welcome-screen-menu-item__icon {\n  width: var(--default-icon-size);\n  height: var(--default-icon-size);\n}\n.excalidraw .welcome-screen-menu-item__shortcut {\n  margin-left: auto;\n  color: var(--color-gray-40);\n  font-size: 0.75rem;\n}\n.excalidraw .welcome-screen-menu-item:hover {\n  text-decoration: none;\n  background: var(--button-hover-bg);\n}\n.excalidraw .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut {\n  color: var(--color-gray-50);\n}\n.excalidraw .welcome-screen-menu-item:hover .welcome-screen-menu-item__text {\n  color: var(--color-gray-100);\n}\n.excalidraw .welcome-screen-menu-item:active {\n  background: var(--button-hover-bg);\n  border-color: var(--color-brand-active);\n}\n.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__shortcut {\n  color: var(--color-gray-50);\n}\n.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__text {\n  color: var(--color-gray-100);\n}\n.excalidraw .welcome-screen-menu-item:active--promo {\n  color: var(--color-promo) !important;\n}\n.excalidraw .welcome-screen-menu-item:active--promo:hover .welcome-screen-menu-item__text {\n  color: var(--color-promo) !important;\n}\n.excalidraw.theme--dark .welcome-screen-menu-item {\n  color: var(--color-gray-60);\n}\n.excalidraw.theme--dark .welcome-screen-menu-item__shortcut {\n  color: var(--color-gray-60);\n}\n.excalidraw.theme--dark .welcome-screen-menu-item:hover {\n  background-color: var(--color-surface-low);\n}\n.excalidraw.theme--dark .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut {\n  color: var(--color-gray-50);\n}\n.excalidraw.theme--dark .welcome-screen-menu-item:hover .welcome-screen-menu-item__text {\n  color: var(--color-gray-10);\n}\n.excalidraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__text {\n  color: var(--color-gray-10);\n}\n@media (max-height: 599px) {\n  .excalidraw .welcome-screen-center {\n    margin-top: 4rem;\n  }\n}\n@media (min-height: 600px) and (max-height: 900px) {\n  .excalidraw .welcome-screen-center {\n    margin-top: 8rem;\n  }\n}\n@media (max-height: 500px), (max-width: 320px) {\n  .excalidraw .welcome-screen-center {\n    display: none;\n  }\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvd2VsY29tZS1zY3JlZW4iLCJzb3VyY2VzIjpbIldlbGNvbWVTY3JlZW4uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFOztBQU1GO0VBQ0U7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBOztBQUtGO0VBQ0U7O0FBUUY7RUFERjtJQUVJOzs7QUFHRjtFQUVJO0lBRUU7OztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBRUE7O0FBRUE7RUFDRTs7QUFLTjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUtOO0VBQ0U7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUlKO0VBQ0U7SUFDRTs7O0FBU1I7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFHRjtFQUNFO0VBRUE7RUFFQTtFQUNBO0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVBO0VBRUE7RUFFQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTtFQUNBOztBQUlKO0VBQ0U7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUo7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFHRjtFQUNFOztBQUdFO0VBQ0U7O0FBT047RUFDRTs7QUFFQTtFQUNFOztBQUlKO0VBQ0U7O0FBQ0E7RUFDRTs7QUFHRjtFQUNFOztBQUtGO0VBQ0U7O0FBS047RUFDRTtJQUNFOzs7QUFHSjtFQUNFO0lBQ0U7OztBQUdKO0VBQ0U7SUFDRSIsInNvdXJjZXNDb250ZW50IjpbIi5leGNhbGlkcmF3IHtcbiAgLnZpcmdpbCB7XG4gICAgZm9udC1mYW1pbHk6IFwiVmlyZ2lsXCI7XG4gIH1cblxuICAvLyBXZWxjb21lU3JlZW4gY29tbW9uXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC53ZWxjb21lLXNjcmVlbi1kZWNvciB7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS00MCk7XG5cbiAgICBhIHtcbiAgICAgIC0tY29sb3I6IHZhcigtLWNvbG9yLXByaW1hcnkpO1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yKTtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgIG1hcmdpbi1ib3R0b206IC02cHg7XG4gICAgfVxuICB9XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLndlbGNvbWUtc2NyZWVuLWRlY29yIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTYwKTtcbiAgICB9XG4gIH1cblxuICAvLyBXZWxjb21lU2NyZWVuLkhpbnRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC53ZWxjb21lLXNjcmVlbi1kZWNvci1oaW50IHtcbiAgICBAbWVkaWEgKG1heC1oZWlnaHQ6IDU5OXB4KSB7XG4gICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDEwMjRweCksIChtYXgtd2lkdGg6IDgwMHB4KSB7XG4gICAgICAud2VsY29tZS1zY3JlZW4tZGVjb3Ige1xuICAgICAgICAmLS1oZWxwLFxuICAgICAgICAmLS1tZW51IHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi0taGVscCB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgcmlnaHQ6IDA7XG4gICAgICBib3R0b206IDEwMCU7XG5cbiAgICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcbiAgICAgICAgd2lkdGg6IDg1cHg7XG4gICAgICAgIGhlaWdodDogNzFweDtcblxuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCgtMSkgcm90YXRlKDgwZGVnKTtcblxuICAgICAgICA6cm9vdFtkaXI9XCJydGxcIl0gJiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoODBkZWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi0tdG9vbGJhciB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDEwMCU7XG4gICAgICBsZWZ0OiA1MCU7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gICAgICBtYXJnaW4tdG9wOiAyLjVyZW07XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xuXG4gICAgICAud2VsY29tZS1zY3JlZW4tZGVjb3ItaGludF9fbGFiZWwge1xuICAgICAgICB3aWR0aDogMTIwcHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgdG9wOiAtMC41cmVtO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogMzhweDtcbiAgICAgICAgaGVpZ2h0OiA3OHB4O1xuXG4gICAgICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLS1tZW51IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgIGZvbnQtc2l6ZTogMXJlbTtcblxuICAgICAgdG9wOiAxMDAlO1xuICAgICAgbWFyZ2luLXRvcDogMC4yNXJlbTtcbiAgICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDAuNnJlbTtcblxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgIGdhcDogMC41cmVtO1xuXG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogNDFweDtcbiAgICAgICAgaGVpZ2h0OiA5NHB4O1xuXG4gICAgICAgIDpyb290W2Rpcj1cInJ0bFwiXSAmIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDg2MHB4KSB7XG4gICAgICAgIC53ZWxjb21lLXNjcmVlbi1kZWNvci1oaW50X19sYWJlbCB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxNjBweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFdlbGNvbWVTcmVlbi5DZW50ZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLndlbGNvbWUtc2NyZWVuLWNlbnRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogMnJlbTtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICBsZWZ0OiAxcmVtO1xuICAgIHRvcDogMXJlbTtcbiAgICByaWdodDogMXJlbTtcbiAgICBib3R0b206IDFyZW07XG4gIH1cblxuICAud2VsY29tZS1zY3JlZW4tY2VudGVyX19sb2dvIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgY29sdW1uLWdhcDogMC43NXJlbTtcbiAgICBmb250LXNpemU6IDIuMjVyZW07XG4gIH1cblxuICAud2VsY29tZS1zY3JlZW4tY2VudGVyX19oZWFkaW5nIHtcbiAgICBmb250LXNpemU6IDEuMTI1cmVtO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgfVxuXG4gIC53ZWxjb21lLXNjcmVlbi1tZW51IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZ2FwOiAycHg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuXG4gIC53ZWxjb21lLXNjcmVlbi1tZW51LWl0ZW0ge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICBwb2ludGVyLWV2ZW50czogdmFyKC0tdWktcG9pbnRlckV2ZW50cyk7XG5cbiAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS01MCk7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcblxuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1pbi13aWR0aDogMzAwcHg7XG4gICAgbWF4LXdpZHRoOiA0MDBweDtcbiAgICBkaXNwbGF5OiBncmlkO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcblxuICAgIHBhZGRpbmc6IDAuNzVyZW07XG5cbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzLW1kKTtcblxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogY2FsYyh2YXIoLS1kZWZhdWx0LWljb24tc2l6ZSkgKyAwLjVyZW0pIDFmciAzcmVtO1xuXG4gICAgJl9fdGV4dCB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBjb2x1bW4tZ2FwOiAwLjVyZW07XG4gICAgfVxuXG4gICAgJl9faWNvbiB7XG4gICAgICB3aWR0aDogdmFyKC0tZGVmYXVsdC1pY29uLXNpemUpO1xuICAgICAgaGVpZ2h0OiB2YXIoLS1kZWZhdWx0LWljb24tc2l6ZSk7XG4gICAgfVxuXG4gICAgJl9fc2hvcnRjdXQge1xuICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS00MCk7XG4gICAgICBmb250LXNpemU6IDAuNzVyZW07XG4gICAgfVxuICB9XG5cbiAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbTpob3ZlciB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG5cbiAgICAud2VsY29tZS1zY3JlZW4tbWVudS1pdGVtX19zaG9ydGN1dCB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS01MCk7XG4gICAgfVxuXG4gICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbV9fdGV4dCB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS0xMDApO1xuICAgIH1cbiAgfVxuXG4gIC53ZWxjb21lLXNjcmVlbi1tZW51LWl0ZW06YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1idXR0b24taG92ZXItYmcpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItYnJhbmQtYWN0aXZlKTtcblxuICAgIC53ZWxjb21lLXNjcmVlbi1tZW51LWl0ZW1fX3Nob3J0Y3V0IHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTUwKTtcbiAgICB9XG5cbiAgICAud2VsY29tZS1zY3JlZW4tbWVudS1pdGVtX190ZXh0IHtcbiAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTEwMCk7XG4gICAgfVxuXG4gICAgJi0tcHJvbW8ge1xuICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXByb21vKSAhaW1wb3J0YW50O1xuXG4gICAgICAmOmhvdmVyIHtcbiAgICAgICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbV9fdGV4dCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXByb21vKSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJi50aGVtZS0tZGFyayB7XG4gICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbSB7XG4gICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS02MCk7XG5cbiAgICAgICZfX3Nob3J0Y3V0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyYXktNjApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC53ZWxjb21lLXNjcmVlbi1tZW51LWl0ZW06aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3cpO1xuICAgICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbV9fc2hvcnRjdXQge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS01MCk7XG4gICAgICB9XG5cbiAgICAgIC53ZWxjb21lLXNjcmVlbi1tZW51LWl0ZW1fX3RleHQge1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JheS0xMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbTphY3RpdmUge1xuICAgICAgLndlbGNvbWUtc2NyZWVuLW1lbnUtaXRlbV9fdGV4dCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTEwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBAbWVkaWEgKG1heC1oZWlnaHQ6IDU5OXB4KSB7XG4gICAgLndlbGNvbWUtc2NyZWVuLWNlbnRlciB7XG4gICAgICBtYXJnaW4tdG9wOiA0cmVtO1xuICAgIH1cbiAgfVxuICBAbWVkaWEgKG1pbi1oZWlnaHQ6IDYwMHB4KSBhbmQgKG1heC1oZWlnaHQ6IDkwMHB4KSB7XG4gICAgLndlbGNvbWUtc2NyZWVuLWNlbnRlciB7XG4gICAgICBtYXJnaW4tdG9wOiA4cmVtO1xuICAgIH1cbiAgfVxuICBAbWVkaWEgKG1heC1oZWlnaHQ6IDUwMHB4KSwgKG1heC13aWR0aDogMzIwcHgpIHtcbiAgICAud2VsY29tZS1zY3JlZW4tY2VudGVyIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG59XG4iXX0= */", "import { Center } from \"./WelcomeScreen.Center\";\nimport { MenuHint, ToolbarHint, HelpHint } from \"./WelcomeScreen.Hints\";\n\nimport \"./WelcomeScreen.scss\";\n\nconst WelcomeScreen = (props: { children?: React.ReactNode }) => {\n  return (\n    <>\n      {props.children || (\n        <>\n          <Center />\n          <MenuHint />\n          <ToolbarHint />\n          <HelpHint />\n        </>\n      )}\n    </>\n  );\n};\n\nWelcomeScreen.displayName = \"WelcomeScreen\";\n\nWelcomeScreen.Center = Center;\nWelcomeScreen.Hints = { MenuHint, ToolbarHint, HelpHint };\n\nexport default WelcomeScreen;\n", ":export {\n  themeFilter: invert(93%) hue-rotate(180deg);\n  rightSidebarWidth: 302px;\n}\n\n.excalidraw .collab-button {\n  --button-bg: var(--color-primary);\n  --button-color: var(--color-surface-lowest);\n  --button-border: var(--color-primary);\n  --button-width: var(--lg-button-size);\n  --button-height: var(--lg-button-size);\n  --button-hover-bg: var(--color-primary-darker);\n  --button-hover-border: var(--color-primary-darker);\n  --button-active-bg: var(--color-primary-darker);\n  box-shadow: 0 0 0 1px var(--color-surface-lowest);\n  flex-shrink: 0;\n}\n.excalidraw .collab-button.active.active {\n  background-color: #0fb884;\n  border-color: #0fb884;\n}\n.excalidraw .collab-button.active.active svg {\n  color: #fff;\n}\n.excalidraw .collab-button.active.active:hover, .excalidraw .collab-button.active.active:active {\n  background-color: #0fb884;\n  border-color: #0fb884;\n}\n.excalidraw .CollabButton.is-collaborating {\n  background-color: var(--button-special-active-bg-color);\n}\n.excalidraw .CollabButton.is-collaborating .ToolIcon__icon svg,\n.excalidraw .CollabButton.is-collaborating .ToolIcon__label {\n  color: var(--icon-green-fill-color);\n}\n.excalidraw .CollabButton-collaborators {\n  min-width: 1em;\n  min-height: 1em;\n  line-height: 1;\n  position: absolute;\n  bottom: -5px;\n  padding: 3px;\n  border-radius: 50%;\n  background-color: #b2f2bb;\n  color: #2b8a3e;\n  font-size: 0.6rem;\n  font-family: \"Cascadia\";\n}\n:root[dir=ltr] .excalidraw .CollabButton-collaborators {\n  right: -5px;\n}\n:root[dir=rtl] .excalidraw .CollabButton-collaborators {\n  left: -5px;\n}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL1VzZXJzL2JhcnRvc3ptYXRsYWsvcmVwb3MvZXhjYWxpZHJhdy9wYWNrYWdlcy9leGNhbGlkcmF3L2NvbXBvbmVudHMvbGl2ZS1jb2xsYWJvcmF0aW9uIiwic291cmNlcyI6WyIuLi8uLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzIiwiTGl2ZUNvbGxhYm9yYXRpb25UcmlnZ2VyLnNjc3MiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3Blbi1jb2xvci9vcGVuLWNvbG9yLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMktBO0VBQ0U7RUFDQTs7O0FDMUtBO0VBQ0U7RUFDQTtFQUNBO0VBRUE7RUFDQTtFQUVBO0VBQ0E7RUFFQTtFQUVBO0VBRUE7O0FBR0E7RUFDRTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFFRTtFQUNBOztBQUtOO0VBQ0U7O0FBRUE7QUFBQTtFQUVFOztBQUlKO0VBT0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxrQkNpT1M7RURoT1QsT0N1T1M7RUR0T1Q7RUFDQTs7QUFoQkE7RUFDRTs7QUFFRjtFQUNFIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIm9wZW4tY29sb3Ivb3Blbi1jb2xvci5zY3NzXCI7XG5cbkBtaXhpbiBpc01vYmlsZSgpIHtcbiAgQGF0LXJvb3QgLmV4Y2FsaWRyYXctLW1vYmlsZSN7Jn0ge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiB0b29sYmFyQnV0dG9uQ29sb3JTdGF0ZXMge1xuICAmLmZpbGxhYmxlIHtcbiAgICAuVG9vbEljb25fdHlwZV9yYWRpbyxcbiAgICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgICAmOmNoZWNrZWQgKyAuVG9vbEljb25fX2ljb24ge1xuICAgICAgICAtLWljb24tZmlsbC1jb2xvcjogdmFyKC0tY29sb3Itb24tcHJpbWFyeS1jb250YWluZXIpO1xuXG4gICAgICAgIHN2ZyB7XG4gICAgICAgICAgZmlsbDogdmFyKC0taWNvbi1maWxsLWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5Ub29sSWNvbl90eXBlX3JhZGlvLFxuICAuVG9vbEljb25fdHlwZV9jaGVja2JveCB7XG4gICAgJjpjaGVja2VkICsgLlRvb2xJY29uX19pY29uIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpO1xuICAgICAgLS1rZXliaW5kaW5nLWNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1vbi1wcmltYXJ5LWNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLlRvb2xJY29uX19rZXliaW5kaW5nIHtcbiAgICBib3R0b206IDRweDtcbiAgICByaWdodDogNHB4O1xuICB9XG5cbiAgLlRvb2xJY29uX19pY29uIHtcbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZyk7XG4gICAgfVxuXG4gICAgJjphY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWhvdmVyLWJnKTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyKTtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG91dGxpbmVCdXR0b25TdHlsZXMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMC42MjVyZW07XG4gIHdpZHRoOiB2YXIoLS1idXR0b24td2lkdGgsIHZhcigtLWRlZmF1bHQtYnV0dG9uLXNpemUpKTtcbiAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1kZWZhdWx0LWJ1dHRvbi1zaXplKSk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1ib3JkZXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG9yKSk7XG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMtbGcpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXN1cmZhY2UpKTtcbiAgZm9udC1mYW1pbHk6IHZhcigtLXVpLWZvbnQpO1xuXG4gIHN2ZyB7XG4gICAgd2lkdGg6IHZhcigtLWJ1dHRvbi13aWR0aCwgdmFyKC0tbGctaWNvbi1zaXplKSk7XG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24taGVpZ2h0LCB2YXIoLS1sZy1pY29uLXNpemUpKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1ob3Zlci1iZywgdmFyKC0taXNsYW5kLWJnLWNvbG9yKSk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXIsXG4gICAgICB2YXIoLS1idXR0b24tYm9yZGVyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvcikpXG4gICAgKTtcbiAgICBjb2xvcjogdmFyKFxuICAgICAgLS1idXR0b24taG92ZXItY29sb3IsXG4gICAgICB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLXRleHQtcHJpbWFyeS1jb2xvciwgaW5oZXJpdCkpXG4gICAgKTtcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1idXR0b24tYWN0aXZlLWJnLCB2YXIoLS1pc2xhbmQtYmctY29sb3IpKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWJ1dHRvbi1hY3RpdmUtYm9yZGVyLCB2YXIoLS1jb2xvci1wcmltYXJ5LWRhcmtlc3QpKTtcbiAgfVxuXG4gICYuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoXG4gICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1iZyxcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcbiAgICBib3JkZXItY29sb3I6IHZhcihcbiAgICAgIC0tYnV0dG9uLXNlbGVjdGVkLWJvcmRlcixcbiAgICAgIHZhcigtLWNvbG9yLXN1cmZhY2UtcHJpbWFyeS1jb250YWluZXIpXG4gICAgKTtcblxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKFxuICAgICAgICAtLWJ1dHRvbi1zZWxlY3RlZC1ob3Zlci1iZyxcbiAgICAgICAgdmFyKC0tY29sb3Itc3VyZmFjZS1wcmltYXJ5LWNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3ZnIHtcbiAgICAgIGNvbG9yOiB2YXIoLS1idXR0b24tY29sb3IsIHZhcigtLWNvbG9yLW9uLXByaW1hcnktY29udGFpbmVyKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBhdmF0YXJTdHlsZXMge1xuICB3aWR0aDogMS4yNXJlbTtcbiAgaGVpZ2h0OiAxLjI1cmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgbGluZS1oZWlnaHQ6IDE7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmF5LTkwKTtcbiAgZmxleDogMCAwIGF1dG87XG5cbiAgJi1pbWcge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IC0zcHg7XG4gICAgcmlnaHQ6IC0zcHg7XG4gICAgYm90dG9tOiAtM3B4O1xuICAgIGxlZnQ6IC0zcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYXZhdGFyLWJvcmRlci1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxuXG4gICYtLWlzLWZvbGxvd2VkOjpiZWZvcmUge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeS1ob3Zlcik7XG4gIH1cbiAgJi0taXMtY3VycmVudC11c2VyIHtcbiAgICBjdXJzb3I6IGF1dG87XG4gIH1cbn1cblxuQG1peGluIGZpbGxlZEJ1dHRvbk9uQ2FudmFzIHtcbiAgYm9yZGVyOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAxcHggdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1zdXJmYWNlLWxvdyk7XG5cbiAgJjphY3RpdmUge1xuICAgIGJveC1zaGFkb3c6IDAgMCAwIDFweCB2YXIoLS1jb2xvci1icmFuZC1hY3RpdmUpO1xuICB9XG59XG5cbiR0aGVtZS1maWx0ZXI6IFwiaW52ZXJ0KDkzJSkgaHVlLXJvdGF0ZSgxODBkZWcpXCI7XG4kcmlnaHQtc2lkZWJhci13aWR0aDogXCIzMDJweFwiO1xuXG46ZXhwb3J0IHtcbiAgdGhlbWVGaWx0ZXI6IHVucXVvdGUoJHRoZW1lLWZpbHRlcik7XG4gIHJpZ2h0U2lkZWJhcldpZHRoOiB1bnF1b3RlKCRyaWdodC1zaWRlYmFyLXdpZHRoKTtcbn1cbiIsIkBpbXBvcnQgXCIuLi8uLi9jc3MvdmFyaWFibGVzLm1vZHVsZS5zY3NzXCI7XG5cbi5leGNhbGlkcmF3IHtcbiAgLmNvbGxhYi1idXR0b24ge1xuICAgIC0tYnV0dG9uLWJnOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAtLWJ1dHRvbi1jb2xvcjogdmFyKC0tY29sb3Itc3VyZmFjZS1sb3dlc3QpO1xuICAgIC0tYnV0dG9uLWJvcmRlcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XG5cbiAgICAtLWJ1dHRvbi13aWR0aDogdmFyKC0tbGctYnV0dG9uLXNpemUpO1xuICAgIC0tYnV0dG9uLWhlaWdodDogdmFyKC0tbGctYnV0dG9uLXNpemUpO1xuXG4gICAgLS1idXR0b24taG92ZXItYmc6IHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VyKTtcbiAgICAtLWJ1dHRvbi1ob3Zlci1ib3JkZXI6IHZhcigtLWNvbG9yLXByaW1hcnktZGFya2VyKTtcblxuICAgIC0tYnV0dG9uLWFjdGl2ZS1iZzogdmFyKC0tY29sb3ItcHJpbWFyeS1kYXJrZXIpO1xuXG4gICAgYm94LXNoYWRvdzogMCAwIDAgMXB4IHZhcigtLWNvbG9yLXN1cmZhY2UtbG93ZXN0KTtcblxuICAgIGZsZXgtc2hyaW5rOiAwO1xuXG4gICAgLy8gZG91YmxlIC5hY3RpdmUgdG8gZm9yY2Ugc3BlY2lmaWNpdHlcbiAgICAmLmFjdGl2ZS5hY3RpdmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzBmYjg4NDtcbiAgICAgIGJvcmRlci1jb2xvcjogIzBmYjg4NDtcblxuICAgICAgc3ZnIHtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIsXG4gICAgICAmOmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwZmI4ODQ7XG4gICAgICAgIGJvcmRlci1jb2xvcjogIzBmYjg4NDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuQ29sbGFiQnV0dG9uLmlzLWNvbGxhYm9yYXRpbmcge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJ1dHRvbi1zcGVjaWFsLWFjdGl2ZS1iZy1jb2xvcik7XG5cbiAgICAuVG9vbEljb25fX2ljb24gc3ZnLFxuICAgIC5Ub29sSWNvbl9fbGFiZWwge1xuICAgICAgY29sb3I6IHZhcigtLWljb24tZ3JlZW4tZmlsbC1jb2xvcik7XG4gICAgfVxuICB9XG5cbiAgLkNvbGxhYkJ1dHRvbi1jb2xsYWJvcmF0b3JzIHtcbiAgICA6cm9vdFtkaXI9XCJsdHJcIl0gJiB7XG4gICAgICByaWdodDogLTVweDtcbiAgICB9XG4gICAgOnJvb3RbZGlyPVwicnRsXCJdICYge1xuICAgICAgbGVmdDogLTVweDtcbiAgICB9XG4gICAgbWluLXdpZHRoOiAxZW07XG4gICAgbWluLWhlaWdodDogMWVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IC01cHg7XG4gICAgcGFkZGluZzogM3B4O1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb2MtZ3JlZW4tMjtcbiAgICBjb2xvcjogJG9jLWdyZWVuLTk7XG4gICAgZm9udC1zaXplOiAwLjZyZW07XG4gICAgZm9udC1mYW1pbHk6IFwiQ2FzY2FkaWFcIjtcbiAgfVxufVxuIiwiLy9cbi8vXG4vLyAg8J2XliDwnZeiIPCdl58g8J2XoiDwnZelXG4vLyAgdiAxLjkuMVxuLy9cbi8vICDilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcblxuXG4vLyAgR2VuZXJhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2Mtd2hpdGU6ICAgICAgICAgI2ZmZmZmZjtcbiRvYy1ibGFjazogICAgICAgICAjMDAwMDAwO1xuXG5cbi8vICBHcmF5XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmF5LWxpc3Q6IChcbiAgXCIwXCI6ICNmOGY5ZmEsXG4gIFwiMVwiOiAjZjFmM2Y1LFxuICBcIjJcIjogI2U5ZWNlZixcbiAgXCIzXCI6ICNkZWUyZTYsXG4gIFwiNFwiOiAjY2VkNGRhLFxuICBcIjVcIjogI2FkYjViZCxcbiAgXCI2XCI6ICM4NjhlOTYsXG4gIFwiN1wiOiAjNDk1MDU3LFxuICBcIjhcIjogIzM0M2E0MCxcbiAgXCI5XCI6ICMyMTI1Mjlcbik7XG5cbiRvYy1ncmF5LTA6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXktMTogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjFcIik7XG4kb2MtZ3JheS0yOiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiMlwiKTtcbiRvYy1ncmF5LTM6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXktNDogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjRcIik7XG4kb2MtZ3JheS01OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiNVwiKTtcbiRvYy1ncmF5LTY6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXktNzogbWFwLWdldCgkb2MtZ3JheS1saXN0LCBcIjdcIik7XG4kb2MtZ3JheS04OiBtYXAtZ2V0KCRvYy1ncmF5LWxpc3QsIFwiOFwiKTtcbiRvYy1ncmF5LTk6IG1hcC1nZXQoJG9jLWdyYXktbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBSZWRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXJlZC1saXN0OiAoXG4gIFwiMFwiOiAjZmZmNWY1LFxuICBcIjFcIjogI2ZmZTNlMyxcbiAgXCIyXCI6ICNmZmM5YzksXG4gIFwiM1wiOiAjZmZhOGE4LFxuICBcIjRcIjogI2ZmODc4NyxcbiAgXCI1XCI6ICNmZjZiNmIsXG4gIFwiNlwiOiAjZmE1MjUyLFxuICBcIjdcIjogI2YwM2UzZSxcbiAgXCI4XCI6ICNlMDMxMzEsXG4gIFwiOVwiOiAjYzkyYTJhXG4pO1xuXG4kb2MtcmVkLTA6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjBcIik7XG4kb2MtcmVkLTE6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjFcIik7XG4kb2MtcmVkLTI6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjJcIik7XG4kb2MtcmVkLTM6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjNcIik7XG4kb2MtcmVkLTQ6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjRcIik7XG4kb2MtcmVkLTU6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjVcIik7XG4kb2MtcmVkLTY6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjZcIik7XG4kb2MtcmVkLTc6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjdcIik7XG4kb2MtcmVkLTg6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjhcIik7XG4kb2MtcmVkLTk6IG1hcC1nZXQoJG9jLXJlZC1saXN0LCBcIjlcIik7XG5cblxuLy8gIFBpbmtcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXBpbmstbGlzdDogKFxuICBcIjBcIjogI2ZmZjBmNixcbiAgXCIxXCI6ICNmZmRlZWIsXG4gIFwiMlwiOiAjZmNjMmQ3LFxuICBcIjNcIjogI2ZhYTJjMSxcbiAgXCI0XCI6ICNmNzgzYWMsXG4gIFwiNVwiOiAjZjA2NTk1LFxuICBcIjZcIjogI2U2NDk4MCxcbiAgXCI3XCI6ICNkNjMzNmMsXG4gIFwiOFwiOiAjYzIyNTVjLFxuICBcIjlcIjogI2E2MWU0ZFxuKTtcblxuJG9jLXBpbmstMDogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjBcIik7XG4kb2MtcGluay0xOiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiMVwiKTtcbiRvYy1waW5rLTI6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCIyXCIpO1xuJG9jLXBpbmstMzogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjNcIik7XG4kb2MtcGluay00OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiNFwiKTtcbiRvYy1waW5rLTU6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI1XCIpO1xuJG9jLXBpbmstNjogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjZcIik7XG4kb2MtcGluay03OiBtYXAtZ2V0KCRvYy1waW5rLWxpc3QsIFwiN1wiKTtcbiRvYy1waW5rLTg6IG1hcC1nZXQoJG9jLXBpbmstbGlzdCwgXCI4XCIpO1xuJG9jLXBpbmstOTogbWFwLWdldCgkb2MtcGluay1saXN0LCBcIjlcIik7XG5cblxuLy8gIEdyYXBlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1ncmFwZS1saXN0OiAoXG4gIFwiMFwiOiAjZjhmMGZjLFxuICBcIjFcIjogI2YzZDlmYSxcbiAgXCIyXCI6ICNlZWJlZmEsXG4gIFwiM1wiOiAjZTU5OWY3LFxuICBcIjRcIjogI2RhNzdmMixcbiAgXCI1XCI6ICNjYzVkZTgsXG4gIFwiNlwiOiAjYmU0YmRiLFxuICBcIjdcIjogI2FlM2VjOSxcbiAgXCI4XCI6ICM5YzM2YjUsXG4gIFwiOVwiOiAjODYyZTljXG4pO1xuXG4kb2MtZ3JhcGUtMDogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIwXCIpO1xuJG9jLWdyYXBlLTE6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiMVwiKTtcbiRvYy1ncmFwZS0yOiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjJcIik7XG4kb2MtZ3JhcGUtMzogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCIzXCIpO1xuJG9jLWdyYXBlLTQ6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiNFwiKTtcbiRvYy1ncmFwZS01OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjVcIik7XG4kb2MtZ3JhcGUtNjogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI2XCIpO1xuJG9jLWdyYXBlLTc6IG1hcC1nZXQoJG9jLWdyYXBlLWxpc3QsIFwiN1wiKTtcbiRvYy1ncmFwZS04OiBtYXAtZ2V0KCRvYy1ncmFwZS1saXN0LCBcIjhcIik7XG4kb2MtZ3JhcGUtOTogbWFwLWdldCgkb2MtZ3JhcGUtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBWaW9sZXRcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLXZpb2xldC1saXN0OiAoXG4gIFwiMFwiOiAjZjNmMGZmLFxuICBcIjFcIjogI2U1ZGJmZixcbiAgXCIyXCI6ICNkMGJmZmYsXG4gIFwiM1wiOiAjYjE5N2ZjLFxuICBcIjRcIjogIzk3NzVmYSxcbiAgXCI1XCI6ICM4NDVlZjcsXG4gIFwiNlwiOiAjNzk1MGYyLFxuICBcIjdcIjogIzcwNDhlOCxcbiAgXCI4XCI6ICM2NzQxZDksXG4gIFwiOVwiOiAjNWYzZGM0XG4pO1xuXG4kb2MtdmlvbGV0LTA6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjBcIik7XG4kb2MtdmlvbGV0LTE6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjFcIik7XG4kb2MtdmlvbGV0LTI6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjJcIik7XG4kb2MtdmlvbGV0LTM6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjNcIik7XG4kb2MtdmlvbGV0LTQ6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjRcIik7XG4kb2MtdmlvbGV0LTU6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjVcIik7XG4kb2MtdmlvbGV0LTY6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjZcIik7XG4kb2MtdmlvbGV0LTc6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjdcIik7XG4kb2MtdmlvbGV0LTg6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjhcIik7XG4kb2MtdmlvbGV0LTk6IG1hcC1nZXQoJG9jLXZpb2xldC1saXN0LCBcIjlcIik7XG5cblxuLy8gIEluZGlnb1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtaW5kaWdvLWxpc3Q6IChcbiAgXCIwXCI6ICNlZGYyZmYsXG4gIFwiMVwiOiAjZGJlNGZmLFxuICBcIjJcIjogI2JhYzhmZixcbiAgXCIzXCI6ICM5MWE3ZmYsXG4gIFwiNFwiOiAjNzQ4ZmZjLFxuICBcIjVcIjogIzVjN2NmYSxcbiAgXCI2XCI6ICM0YzZlZjUsXG4gIFwiN1wiOiAjNDI2M2ViLFxuICBcIjhcIjogIzNiNWJkYixcbiAgXCI5XCI6ICMzNjRmYzdcbik7XG5cbiRvYy1pbmRpZ28tMDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMFwiKTtcbiRvYy1pbmRpZ28tMTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMVwiKTtcbiRvYy1pbmRpZ28tMjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiMlwiKTtcbiRvYy1pbmRpZ28tMzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiM1wiKTtcbiRvYy1pbmRpZ28tNDogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNFwiKTtcbiRvYy1pbmRpZ28tNTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNVwiKTtcbiRvYy1pbmRpZ28tNjogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiNlwiKTtcbiRvYy1pbmRpZ28tNzogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiN1wiKTtcbiRvYy1pbmRpZ28tODogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOFwiKTtcbiRvYy1pbmRpZ28tOTogbWFwLWdldCgkb2MtaW5kaWdvLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQmx1ZVxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtYmx1ZS1saXN0OiAoXG4gIFwiMFwiOiAjZTdmNWZmLFxuICBcIjFcIjogI2QwZWJmZixcbiAgXCIyXCI6ICNhNWQ4ZmYsXG4gIFwiM1wiOiAjNzRjMGZjLFxuICBcIjRcIjogIzRkYWJmNyxcbiAgXCI1XCI6ICMzMzlhZjAsXG4gIFwiNlwiOiAjMjI4YmU2LFxuICBcIjdcIjogIzFjN2VkNixcbiAgXCI4XCI6ICMxOTcxYzIsXG4gIFwiOVwiOiAjMTg2NGFiXG4pO1xuXG4kb2MtYmx1ZS0wOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiMFwiKTtcbiRvYy1ibHVlLTE6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCIxXCIpO1xuJG9jLWJsdWUtMjogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjJcIik7XG4kb2MtYmx1ZS0zOiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiM1wiKTtcbiRvYy1ibHVlLTQ6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI0XCIpO1xuJG9jLWJsdWUtNTogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjVcIik7XG4kb2MtYmx1ZS02OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiNlwiKTtcbiRvYy1ibHVlLTc6IG1hcC1nZXQoJG9jLWJsdWUtbGlzdCwgXCI3XCIpO1xuJG9jLWJsdWUtODogbWFwLWdldCgkb2MtYmx1ZS1saXN0LCBcIjhcIik7XG4kb2MtYmx1ZS05OiBtYXAtZ2V0KCRvYy1ibHVlLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgQ3lhblxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtY3lhbi1saXN0OiAoXG4gIFwiMFwiOiAjZTNmYWZjLFxuICBcIjFcIjogI2M1ZjZmYSxcbiAgXCIyXCI6ICM5OWU5ZjIsXG4gIFwiM1wiOiAjNjZkOWU4LFxuICBcIjRcIjogIzNiYzlkYixcbiAgXCI1XCI6ICMyMmI4Y2YsXG4gIFwiNlwiOiAjMTVhYWJmLFxuICBcIjdcIjogIzEwOThhZCxcbiAgXCI4XCI6ICMwYzg1OTksXG4gIFwiOVwiOiAjMGI3Mjg1XG4pO1xuXG4kb2MtY3lhbi0wOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiMFwiKTtcbiRvYy1jeWFuLTE6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCIxXCIpO1xuJG9jLWN5YW4tMjogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjJcIik7XG4kb2MtY3lhbi0zOiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiM1wiKTtcbiRvYy1jeWFuLTQ6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI0XCIpO1xuJG9jLWN5YW4tNTogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjVcIik7XG4kb2MtY3lhbi02OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiNlwiKTtcbiRvYy1jeWFuLTc6IG1hcC1nZXQoJG9jLWN5YW4tbGlzdCwgXCI3XCIpO1xuJG9jLWN5YW4tODogbWFwLWdldCgkb2MtY3lhbi1saXN0LCBcIjhcIik7XG4kb2MtY3lhbi05OiBtYXAtZ2V0KCRvYy1jeWFuLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgVGVhbFxuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MtdGVhbC1saXN0OiAoXG4gIFwiMFwiOiAjZTZmY2Y1LFxuICBcIjFcIjogI2MzZmFlOCxcbiAgXCIyXCI6ICM5NmYyZDcsXG4gIFwiM1wiOiAjNjNlNmJlLFxuICBcIjRcIjogIzM4ZDlhOSxcbiAgXCI1XCI6ICMyMGM5OTcsXG4gIFwiNlwiOiAjMTJiODg2LFxuICBcIjdcIjogIzBjYTY3OCxcbiAgXCI4XCI6ICMwOTkyNjgsXG4gIFwiOVwiOiAjMDg3ZjViXG4pO1xuXG4kb2MtdGVhbC0wOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiMFwiKTtcbiRvYy10ZWFsLTE6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCIxXCIpO1xuJG9jLXRlYWwtMjogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjJcIik7XG4kb2MtdGVhbC0zOiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiM1wiKTtcbiRvYy10ZWFsLTQ6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI0XCIpO1xuJG9jLXRlYWwtNTogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjVcIik7XG4kb2MtdGVhbC02OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiNlwiKTtcbiRvYy10ZWFsLTc6IG1hcC1nZXQoJG9jLXRlYWwtbGlzdCwgXCI3XCIpO1xuJG9jLXRlYWwtODogbWFwLWdldCgkb2MtdGVhbC1saXN0LCBcIjhcIik7XG4kb2MtdGVhbC05OiBtYXAtZ2V0KCRvYy10ZWFsLWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgR3JlZW5cbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWdyZWVuLWxpc3Q6IChcbiAgXCIwXCI6ICNlYmZiZWUsXG4gIFwiMVwiOiAjZDNmOWQ4LFxuICBcIjJcIjogI2IyZjJiYixcbiAgXCIzXCI6ICM4Y2U5OWEsXG4gIFwiNFwiOiAjNjlkYjdjLFxuICBcIjVcIjogIzUxY2Y2NixcbiAgXCI2XCI6ICM0MGMwNTcsXG4gIFwiN1wiOiAjMzdiMjRkLFxuICBcIjhcIjogIzJmOWU0NCxcbiAgXCI5XCI6ICMyYjhhM2Vcbik7XG5cbiRvYy1ncmVlbi0wOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjBcIik7XG4kb2MtZ3JlZW4tMTogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCIxXCIpO1xuJG9jLWdyZWVuLTI6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiMlwiKTtcbiRvYy1ncmVlbi0zOiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjNcIik7XG4kb2MtZ3JlZW4tNDogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI0XCIpO1xuJG9jLWdyZWVuLTU6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiNVwiKTtcbiRvYy1ncmVlbi02OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjZcIik7XG4kb2MtZ3JlZW4tNzogbWFwLWdldCgkb2MtZ3JlZW4tbGlzdCwgXCI3XCIpO1xuJG9jLWdyZWVuLTg6IG1hcC1nZXQoJG9jLWdyZWVuLWxpc3QsIFwiOFwiKTtcbiRvYy1ncmVlbi05OiBtYXAtZ2V0KCRvYy1ncmVlbi1saXN0LCBcIjlcIik7XG5cblxuLy8gIExpbWVcbi8vICDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcblxuJG9jLWxpbWUtbGlzdDogKFxuICBcIjBcIjogI2Y0ZmNlMyxcbiAgXCIxXCI6ICNlOWZhYzgsXG4gIFwiMlwiOiAjZDhmNWEyLFxuICBcIjNcIjogI2MwZWI3NSxcbiAgXCI0XCI6ICNhOWUzNGIsXG4gIFwiNVwiOiAjOTRkODJkLFxuICBcIjZcIjogIzgyYzkxZSxcbiAgXCI3XCI6ICM3NGI4MTYsXG4gIFwiOFwiOiAjNjZhODBmLFxuICBcIjlcIjogIzVjOTQwZFxuKTtcblxuJG9jLWxpbWUtMDogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjBcIik7XG4kb2MtbGltZS0xOiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiMVwiKTtcbiRvYy1saW1lLTI6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCIyXCIpO1xuJG9jLWxpbWUtMzogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjNcIik7XG4kb2MtbGltZS00OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiNFwiKTtcbiRvYy1saW1lLTU6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI1XCIpO1xuJG9jLWxpbWUtNjogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjZcIik7XG4kb2MtbGltZS03OiBtYXAtZ2V0KCRvYy1saW1lLWxpc3QsIFwiN1wiKTtcbiRvYy1saW1lLTg6IG1hcC1nZXQoJG9jLWxpbWUtbGlzdCwgXCI4XCIpO1xuJG9jLWxpbWUtOTogbWFwLWdldCgkb2MtbGltZS1saXN0LCBcIjlcIik7XG5cblxuLy8gIFllbGxvd1xuLy8gIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuXG4kb2MteWVsbG93LWxpc3Q6IChcbiAgXCIwXCI6ICNmZmY5ZGIsXG4gIFwiMVwiOiAjZmZmM2JmLFxuICBcIjJcIjogI2ZmZWM5OSxcbiAgXCIzXCI6ICNmZmUwNjYsXG4gIFwiNFwiOiAjZmZkNDNiLFxuICBcIjVcIjogI2ZjYzQxOSxcbiAgXCI2XCI6ICNmYWIwMDUsXG4gIFwiN1wiOiAjZjU5ZjAwLFxuICBcIjhcIjogI2YwOGMwMCxcbiAgXCI5XCI6ICNlNjc3MDBcbik7XG5cbiRvYy15ZWxsb3ctMDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMFwiKTtcbiRvYy15ZWxsb3ctMTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMVwiKTtcbiRvYy15ZWxsb3ctMjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiMlwiKTtcbiRvYy15ZWxsb3ctMzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiM1wiKTtcbiRvYy15ZWxsb3ctNDogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNFwiKTtcbiRvYy15ZWxsb3ctNTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNVwiKTtcbiRvYy15ZWxsb3ctNjogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiNlwiKTtcbiRvYy15ZWxsb3ctNzogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiN1wiKTtcbiRvYy15ZWxsb3ctODogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOFwiKTtcbiRvYy15ZWxsb3ctOTogbWFwLWdldCgkb2MteWVsbG93LWxpc3QsIFwiOVwiKTtcblxuXG4vLyAgT3JhbmdlXG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1vcmFuZ2UtbGlzdDogKFxuICBcIjBcIjogI2ZmZjRlNixcbiAgXCIxXCI6ICNmZmU4Y2MsXG4gIFwiMlwiOiAjZmZkOGE4LFxuICBcIjNcIjogI2ZmYzA3OCxcbiAgXCI0XCI6ICNmZmE5NGQsXG4gIFwiNVwiOiAjZmY5MjJiLFxuICBcIjZcIjogI2ZkN2UxNCxcbiAgXCI3XCI6ICNmNzY3MDcsXG4gIFwiOFwiOiAjZTg1OTBjLFxuICBcIjlcIjogI2Q5NDgwZlxuKTtcblxuJG9jLW9yYW5nZS0wOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIwXCIpO1xuJG9jLW9yYW5nZS0xOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIxXCIpO1xuJG9jLW9yYW5nZS0yOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIyXCIpO1xuJG9jLW9yYW5nZS0zOiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCIzXCIpO1xuJG9jLW9yYW5nZS00OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI0XCIpO1xuJG9jLW9yYW5nZS01OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI1XCIpO1xuJG9jLW9yYW5nZS02OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI2XCIpO1xuJG9jLW9yYW5nZS03OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI3XCIpO1xuJG9jLW9yYW5nZS04OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI4XCIpO1xuJG9jLW9yYW5nZS05OiBtYXAtZ2V0KCRvYy1vcmFuZ2UtbGlzdCwgXCI5XCIpO1xuXG5cbi8vICBDb2xvciBsaXN0XG4vLyAg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG5cbiRvYy1jb2xvci1zcGVjdHJ1bTogICA5O1xuXG4kb2MtY29sb3ItbGlzdDogKFxuICAkb2MtZ3JheS1saXN0OiAgICAgIFwiZ3JheVwiLFxuICAkb2MtcmVkLWxpc3Q6ICAgICAgXCJyZWRcIixcbiAgJG9jLXBpbmstbGlzdDogICAgICBcInBpbmtcIixcbiAgJG9jLWdyYXBlLWxpc3Q6ICAgICAgXCJncmFwZVwiLFxuICAkb2MtdmlvbGV0LWxpc3Q6ICAgICAgXCJ2aW9sZXRcIixcbiAgJG9jLWluZGlnby1saXN0OiAgICAgIFwiaW5kaWdvXCIsXG4gICRvYy1ibHVlLWxpc3Q6ICAgICAgXCJibHVlXCIsXG4gICRvYy1jeWFuLWxpc3Q6ICAgICAgXCJjeWFuXCIsXG4gICRvYy10ZWFsLWxpc3Q6ICAgICAgXCJ0ZWFsXCIsXG4gICRvYy1ncmVlbi1saXN0OiAgICAgIFwiZ3JlZW5cIixcbiAgJG9jLWxpbWUtbGlzdDogICAgICBcImxpbWVcIixcbiAgJG9jLXllbGxvdy1saXN0OiAgICAgIFwieWVsbG93XCIsXG4gICRvYy1vcmFuZ2UtbGlzdDogICAgICBcIm9yYW5nZVwiXG4pO1xuIl19 */", "import { t } from \"../../i18n\";\nimport { share } from \"../icons\";\nimport { Button } from \"../Button\";\n\nimport clsx from \"clsx\";\n\nimport \"./LiveCollaborationTrigger.scss\";\nimport { useUIAppState } from \"../../context/ui-appState\";\n\nconst LiveCollaborationTrigger = ({\n  isCollaborating,\n  onSelect,\n  ...rest\n}: {\n  isCollaborating: boolean;\n  onSelect: () => void;\n} & React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  const appState = useUIAppState();\n\n  const showIconOnly = appState.width < 830;\n\n  return (\n    <Button\n      {...rest}\n      className={clsx(\"collab-button\", { active: isCollaborating })}\n      type=\"button\"\n      onSelect={onSelect}\n      style={{ position: \"relative\", width: showIconOnly ? undefined : \"auto\" }}\n      title={t(\"labels.liveCollaboration\")}\n    >\n      {showIconOnly ? share : t(\"labels.share\")}\n      {appState.collaborators.size > 0 && (\n        <div className=\"CollabButton-collaborators\">\n          {appState.collaborators.size}\n        </div>\n      )}\n    </Button>\n  );\n};\n\nexport default LiveCollaborationTrigger;\nLiveCollaborationTrigger.displayName = \"LiveCollaborationTrigger\";\n", "import { ReactNode } from \"react\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\nimport { useExcalidrawSetAppState } from \"../App\";\nimport { brainIcon } from \"../icons\";\nimport { t } from \"../../i18n\";\nimport { trackEvent } from \"../../analytics\";\n\nexport const TTDDialogTrigger = ({\n  children,\n  icon,\n}: {\n  children?: ReactNode;\n  icon?: JSX.Element;\n}) => {\n  const { TTDDialogTriggerTunnel } = useTunnels();\n  const setAppState = useExcalidrawSetAppState();\n\n  return (\n    <TTDDialogTriggerTunnel.In>\n      <DropdownMenu.Item\n        onSelect={() => {\n          trackEvent(\"ai\", \"dialog open\", \"ttd\");\n          setAppState({ openDialog: { name: \"ttd\", tab: \"text-to-diagram\" } });\n        }}\n        icon={icon ?? brainIcon}\n      >\n        {children ?? t(\"labels.textToDiagram\")}\n        <DropdownMenu.Item.Badge>AI</DropdownMenu.Item.Badge>\n      </DropdownMenu.Item>\n    </TTDDialogTriggerTunnel.In>\n  );\n};\nTTDDialogTrigger.displayName = \"TTDDialogTrigger\";\n", "import React, { useEffect } from \"react\";\nimport { InitializeApp } from \"./components/InitializeApp\";\nimport App from \"./components/App\";\nimport { isShallowEqual } from \"./utils\";\n\nimport \"./css/app.scss\";\nimport \"./css/styles.scss\";\nimport \"../../public/fonts/fonts.css\";\nimport polyfill from \"./polyfill\";\n\nimport { AppProps, ExcalidrawProps } from \"./types\";\nimport { defaultLang } from \"./i18n\";\nimport { DEFAULT_UI_OPTIONS } from \"./constants\";\nimport { Provider } from \"jotai\";\nimport { jotaiScope, jotaiStore } from \"./jotai\";\nimport Footer from \"./components/footer/FooterCenter\";\nimport MainMenu from \"./components/main-menu/MainMenu\";\nimport WelcomeScreen from \"./components/welcome-screen/WelcomeScreen\";\nimport LiveCollaborationTrigger from \"./components/live-collaboration/LiveCollaborationTrigger\";\n\npolyfill();\n\nconst ExcalidrawBase = (props: ExcalidrawProps) => {\n  const {\n    onChange,\n    initialData,\n    excalidrawAPI,\n    isCollaborating = false,\n    onPointerUpdate,\n    renderTopRightUI,\n    langCode = defaultLang.code,\n    viewModeEnabled,\n    zenModeEnabled,\n    gridModeEnabled,\n    libraryReturnUrl,\n    theme,\n    name,\n    renderCustomStats,\n    onPaste,\n    detectScroll = true,\n    handleKeyboardGlobally = false,\n    onLibraryChange,\n    autoFocus = false,\n    generateIdForFile,\n    onLinkOpen,\n    onPointerDown,\n    onPointerUp,\n    onScrollChange,\n    children,\n    validateEmbeddable,\n    renderEmbeddable,\n    aiEnabled,\n  } = props;\n\n  const canvasActions = props.UIOptions?.canvasActions;\n\n  // FIXME normalize/set defaults in parent component so that the memo resolver\n  // compares the same values\n  const UIOptions: AppProps[\"UIOptions\"] = {\n    ...props.UIOptions,\n    canvasActions: {\n      ...DEFAULT_UI_OPTIONS.canvasActions,\n      ...canvasActions,\n    },\n    tools: {\n      image: props.UIOptions?.tools?.image ?? true,\n    },\n  };\n\n  if (canvasActions?.export) {\n    UIOptions.canvasActions.export.saveFileToDisk =\n      canvasActions.export?.saveFileToDisk ??\n      DEFAULT_UI_OPTIONS.canvasActions.export.saveFileToDisk;\n  }\n\n  if (\n    UIOptions.canvasActions.toggleTheme === null &&\n    typeof theme === \"undefined\"\n  ) {\n    UIOptions.canvasActions.toggleTheme = true;\n  }\n\n  useEffect(() => {\n    const importPolyfill = async () => {\n      //@ts-ignore\n      await import(\"canvas-roundrect-polyfill\");\n    };\n\n    importPolyfill();\n\n    // Block pinch-zooming on iOS outside of the content area\n    const handleTouchMove = (event: TouchEvent) => {\n      // @ts-ignore\n      if (typeof event.scale === \"number\" && event.scale !== 1) {\n        event.preventDefault();\n      }\n    };\n\n    document.addEventListener(\"touchmove\", handleTouchMove, {\n      passive: false,\n    });\n\n    return () => {\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n    };\n  }, []);\n\n  return (\n    <Provider unstable_createStore={() => jotaiStore} scope={jotaiScope}>\n      <InitializeApp langCode={langCode} theme={theme}>\n        <App\n          onChange={onChange}\n          initialData={initialData}\n          excalidrawAPI={excalidrawAPI}\n          isCollaborating={isCollaborating}\n          onPointerUpdate={onPointerUpdate}\n          renderTopRightUI={renderTopRightUI}\n          langCode={langCode}\n          viewModeEnabled={viewModeEnabled}\n          zenModeEnabled={zenModeEnabled}\n          gridModeEnabled={gridModeEnabled}\n          libraryReturnUrl={libraryReturnUrl}\n          theme={theme}\n          name={name}\n          renderCustomStats={renderCustomStats}\n          UIOptions={UIOptions}\n          onPaste={onPaste}\n          detectScroll={detectScroll}\n          handleKeyboardGlobally={handleKeyboardGlobally}\n          onLibraryChange={onLibraryChange}\n          autoFocus={autoFocus}\n          generateIdForFile={generateIdForFile}\n          onLinkOpen={onLinkOpen}\n          onPointerDown={onPointerDown}\n          onPointerUp={onPointerUp}\n          onScrollChange={onScrollChange}\n          validateEmbeddable={validateEmbeddable}\n          renderEmbeddable={renderEmbeddable}\n          aiEnabled={aiEnabled !== false}\n        >\n          {children}\n        </App>\n      </InitializeApp>\n    </Provider>\n  );\n};\n\nconst areEqual = (prevProps: ExcalidrawProps, nextProps: ExcalidrawProps) => {\n  // short-circuit early\n  if (prevProps.children !== nextProps.children) {\n    return false;\n  }\n\n  const {\n    initialData: prevInitialData,\n    UIOptions: prevUIOptions = {},\n    ...prev\n  } = prevProps;\n  const {\n    initialData: nextInitialData,\n    UIOptions: nextUIOptions = {},\n    ...next\n  } = nextProps;\n\n  // comparing UIOptions\n  const prevUIOptionsKeys = Object.keys(prevUIOptions) as (keyof Partial<\n    typeof DEFAULT_UI_OPTIONS\n  >)[];\n  const nextUIOptionsKeys = Object.keys(nextUIOptions) as (keyof Partial<\n    typeof DEFAULT_UI_OPTIONS\n  >)[];\n\n  if (prevUIOptionsKeys.length !== nextUIOptionsKeys.length) {\n    return false;\n  }\n\n  const isUIOptionsSame = prevUIOptionsKeys.every((key) => {\n    if (key === \"canvasActions\") {\n      const canvasOptionKeys = Object.keys(\n        prevUIOptions.canvasActions!,\n      ) as (keyof Partial<typeof DEFAULT_UI_OPTIONS.canvasActions>)[];\n      return canvasOptionKeys.every((key) => {\n        if (\n          key === \"export\" &&\n          prevUIOptions?.canvasActions?.export &&\n          nextUIOptions?.canvasActions?.export\n        ) {\n          return (\n            prevUIOptions.canvasActions.export.saveFileToDisk ===\n            nextUIOptions.canvasActions.export.saveFileToDisk\n          );\n        }\n        return (\n          prevUIOptions?.canvasActions?.[key] ===\n          nextUIOptions?.canvasActions?.[key]\n        );\n      });\n    }\n    return prevUIOptions[key] === nextUIOptions[key];\n  });\n\n  return isUIOptionsSame && isShallowEqual(prev, next);\n};\n\nexport const Excalidraw = React.memo(ExcalidrawBase, areEqual);\nExcalidraw.displayName = \"Excalidraw\";\n\nexport {\n  getSceneVersion,\n  isInvisiblySmallElement,\n  getNonDeletedElements,\n} from \"./element\";\nexport { defaultLang, useI18n, languages } from \"./i18n\";\nexport {\n  restore,\n  restoreAppState,\n  restoreElements,\n  restoreLibraryItems,\n} from \"./data/restore\";\nexport {\n  exportToCanvas,\n  exportToBlob,\n  exportToSvg,\n  serializeAsJSON,\n  serializeLibraryAsJSON,\n  loadLibraryFromBlob,\n  loadFromBlob,\n  loadSceneOrLibraryFromBlob,\n  getFreeDrawSvgPath,\n  exportToClipboard,\n  mergeLibraryItems,\n} from \"../utils/export\";\nexport { isLinearElement } from \"./element/typeChecks\";\n\nexport { FONT_FAMILY, THEME, MIME_TYPES, ROUNDNESS } from \"./constants\";\n\nexport {\n  mutateElement,\n  newElementWith,\n  bumpVersion,\n} from \"./element/mutateElement\";\n\nexport { parseLibraryTokensFromUrl, useHandleLibrary } from \"./data/library\";\n\nexport {\n  sceneCoordsToViewportCoords,\n  viewportCoordsToSceneCoords,\n} from \"./utils\";\n\nexport { Sidebar } from \"./components/Sidebar/Sidebar\";\nexport { Button } from \"./components/Button\";\nexport { Footer };\nexport { MainMenu };\nexport { useDevice } from \"./components/App\";\nexport { WelcomeScreen };\nexport { LiveCollaborationTrigger };\n\nexport { DefaultSidebar } from \"./components/DefaultSidebar\";\nexport { TTDDialog } from \"./components/TTDDialog/TTDDialog\";\nexport { TTDDialogTrigger } from \"./components/TTDDialog/TTDDialogTrigger\";\n\nexport { normalizeLink } from \"./data/url\";\nexport { zoomToFitBounds } from \"./actions/actionCanvas\";\nexport { convertToExcalidrawElements } from \"./data/transform\";\nexport { getCommonBounds, getVisibleSceneBounds } from \"./element/bounds\";\n\nexport {\n  elementsOverlappingBBox,\n  isElementInsideBBox,\n  elementPartiallyOverlapsWithOrContainsBBox,\n} from \"../utils/export\";\n"],
  "mappings": "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ACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACZ,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACpD,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACpD,EAAE,CAAC,IAAI,EAAE,CAAC,IACR,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACZ,EAAE,CAAC,IAAI,EAAE,CAAC,IACR,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACZ,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QACpD,EAAE,CAAC,IAAI,EAAE,CAAC,IACR,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAAC,IACV,EAAE,CAAC,IAAI,EAAE,CAA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",
  "names": ["translation", "init_Spinner", "jsx", "init_Spinner", "useEffect", "useState", "jsx", "currentLang", "from", "newValues", "point", "translation", "point", "distance", "t", "equation", "nvector", "sign", "from", "point", "distance", "point", "from", "point", "distance", "nvector", "point", "distance", "t", "rotate", "from", "translate", "offset", "equation", "getNonDeletedElements", "element", "point", "distance", "t", "newTextElement", "shouldMaintainAspectRatio", "index", "point", "t", "minX", "minY", "maxX", "maxY", "equation", "distance", "coords", "from", "selectGroupsForSelectedElements", "isRTL", "React", "useEffect", "useState", "clsx", "jsx", "jsxs", "init_Spinner", "React", "oc", "clsx", "jsx", "jsxs", "useEffect", "jsx", "init_Tooltip", "useEffect", "useLayoutEffect", "useRef", "useState", "clsx", "jsx", "jsxs", "init_Hyperlink", "init_Tooltip", "point", "from", "oc", "init_Hyperlink", "GridLineColor", "point", "canvas", "throttle", "elements", "mimeTypes", "elements", "defaultAppState", "getNonDeletedElements", "chunk", "nanoid", "canvas", "file", "file", "init_image", "rough", "init_image", "canvas", "defaultAppState", "hasHeader", "index", "file", "isRTL", "centerPoint", "point", "atom", "useAtom", "useEffect", "useState", "init_export", "exportToSvg", "atom", "useEffect", "useRef", "row", "index", "libraryUrlTokens", "exportToCanvas", "exportToSvg", "init_export", "canvas", "init_export", "element", "rough", "t", "getSvgPathFromStroke", "point", "canvas", "offset", "x1", "y1", "x2", "y2", "element", "opacity", "shouldRotateWithDiscreteAngle", "shouldResizeFromCenter", "shouldMaintainAspectRatio", "offset", "shouldMaintainAspectRatio", "shouldResizeFromCenter", "getNonDeletedElements", "jsx", "getNonDeletedElements", "nextElements", "nextAppState", "jsx", "getNonDeletedElements", "elements", "element", "jsx", "duplicateElements", "getNonDeletedElements", "newElement", "elements", "element", "clsx", "jsx", "jsxs", "clsx", "jsx", "atom", "palette", "isCustomColor", "r", "g", "b", "jsxs", "isCustomColor", "clsx", "useAtom", "useEffect", "useRef", "jsx", "jsxs", "palette", "clsx", "useAtom", "useEffect", "useRef", "jsx", "jsxs", "palette", "color", "label", "clsx", "useAtom", "useEffect", "useRef", "jsx", "jsxs", "palette", "jsx", "React", "useEffect", "useState", "useAtom", "jsx", "jsxs", "palette", "React", "useState", "useLayoutEffect", "div", "useEffect", "useRef", "atom", "useEffect", "useRef", "jsx", "init_EyeDropper", "onCancel", "onSelect", "useCallback", "useEffect", "useRef", "useState", "useAtom", "clsx", "Fragment", "jsx", "jsxs", "init_ColorPicker", "init_EyeDropper", "color", "useAtom", "clsx", "useRef", "jsx", "jsxs", "init_ColorPicker", "init_EyeDropper", "palette", "color", "useLayoutEffect", "useRef", "useEffect", "jsx", "Popover", "init_Popover", "React", "clsx", "Fragment", "jsx", "jsxs", "Picker", "isRTL", "Popover", "init_IconPicker", "init_Popover", "Fragment", "jsx", "jsxs", "init_ColorPicker", "init_IconPicker", "getNonDeletedElements", "newElement", "isRTL", "jsx", "jsxs", "init_ColorPicker", "init_Tooltip", "isRTL", "getNonDeletedElements", "jsx", "point", "useState", "jsx", "jsxs", "init_ProjectName", "jsx", "getNonDeletedElements", "blob", "encodePngMetadata", "clsx", "jsx", "jsxs", "init_CheckboxItem", "Fragment", "jsx", "jsxs", "init_ProjectName", "init_Tooltip", "init_CheckboxItem", "getNonDeletedElements", "newElement", "element", "jsx", "getNonDeletedElements", "jsx", "getNonDeletedElements", "useState", "clsx", "jsx", "init_Avatar", "jsx", "jsxs", "init_Avatar", "translation", "jsx", "getNonDeletedElements", "start", "step", "pos", "translation", "jsx", "enableActionGroup", "getNonDeletedElements", "getNonDeletedElements", "init_Hyperlink", "jsx", "jsx", "actionResult", "actions", "action", "elements", "shape", "clsx", "React", "jsx", "jsxs", "init_ContextMenu", "init_Popover", "Popover", "clsx", "jsx", "init_Stack", "clsx", "jsx", "React", "Fragment", "jsx", "jsxs", "jsx", "jsx", "jsx", "jsxs", "React", "clsx", "jsx", "init_Island", "clsx", "useRef", "jsx", "init_Island", "init_Stack", "jsx", "jsx", "React", "Fragment", "jsxs", "init_DropdownMenu", "React", "useState", "clsx", "Fragment", "jsx", "jsxs", "init_Actions", "init_Stack", "init_Tooltip", "init_DropdownMenu", "isRTL", "useCallback", "useState", "createPortal", "clsx", "jsx", "jsxs", "init_Modal", "jsx", "clsx", "jsx", "jsxs", "React", "t", "clsx", "jsx", "jsxs", "init_DialogActionButton", "init_Spinner", "jsx", "jsxs", "init_ConfirmDialog", "init_Dialog", "init_DialogActionButton", "init_LibraryMenu", "useCallback", "useEffect", "useRef", "useState", "OpenColor", "jsx", "jsxs", "init_PublishLibrary", "init_Dialog", "init_export", "init_DialogActionButton", "canvas", "exportToCanvas", "exportToSvg", "index", "items", "useCallback", "useState", "useAtom", "clsx", "jsx", "jsxs", "init_ConfirmDialog", "init_PublishLibrary", "init_Dialog", "init_DropdownMenu", "init_LibraryMenu", "clsx", "useEffect", "useRef", "useState", "jsx", "jsxs", "init_LibraryUnit", "init_CheckboxItem", "React", "useCallback", "memo", "useEffect", "useState", "Fragment", "jsx", "init_LibraryUnit", "useEffect", "atom", "useAtom", "useCallback", "useEffect", "useRef", "useState", "Fragment", "jsx", "jsxs", "id", "init_LibraryMenuItems", "init_Stack", "init_Spinner", "useState", "useCallback", "useMemo", "useRef", "atom", "useAtom", "jsx", "jsxs", "init_LibraryMenu", "init_LibraryMenuItems", "init_Spinner", "libraryItems", "clsx", "useEffect", "useState", "useSetAtom", "jsx", "jsxs", "init_Dialog", "init_Island", "init_Modal", "init_LibraryMenu", "focusableElements", "React", "useState", "Fragment", "jsx", "init_Dialog", "clsx", "jsx", "jsxs", "init_RadioGroup", "clsx", "jsx", "init_Switch", "forwardRef", "useState", "clsx", "jsx", "jsxs", "init_FilledButton", "init_Spinner", "useEffect", "useRef", "useState", "jsx", "jsxs", "init_ImageExportDialog", "init_export", "init_Dialog", "init_RadioGroup", "init_Switch", "init_Tooltip", "init_FilledButton", "exportToCanvas", "canvas", "clsx", "jsx", "init_FixedSideContainer", "jsx", "init_HintViewer", "clsx", "jsx", "jsxs", "ICONS", "Fragment", "jsx", "jsxs", "clsx", "jsx", "jsxs", "DEFAULT_SIZE", "Fragment", "jsx", "jsxs", "init_Stats", "init_Island", "clsx", "jsx", "Fragment", "jsx", "jsxs", "init_Stack", "init_FixedSideContainer", "init_Island", "init_HintViewer", "init_Actions", "init_Stats", "appState", "oc", "React", "useLayoutEffect", "useRef", "useState", "jsx", "jsxs", "init_PasteChartDialog", "init_Dialog", "React", "Fragment", "jsx", "jsxs", "Section", "init_HelpDialog", "init_Dialog", "React", "clsx", "Popover", "jsx", "jsxs", "init_UserList", "init_Tooltip", "init_Island", "OpenColor", "jsx", "init_Card", "React", "Fragment", "jsx", "jsxs", "init_Dialog", "init_Card", "canvas", "jsx", "clsx", "jsx", "jsxs", "init_Actions", "init_Stack", "React", "init_common", "clsx", "jsx", "init_Button", "clsx", "useContext", "jsx", "jsxs", "init_common", "init_Tooltip", "init_Button", "clsx", "jsx", "jsxs", "init_SidebarTrigger", "jsx", "RadixTabs", "jsx", "RadixTabs", "jsx", "RadixTabs", "jsx", "useEffect", "useLayoutEffect", "useRef", "useState", "forwardRef", "useCallback", "atom", "useSetAtom", "clsx", "jsx", "init_Sidebar", "init_Island", "init_common", "init_SidebarTrigger", "atom", "useAtom", "jsx", "jsxs", "init_ConfirmDialog", "atom", "clsx", "useSetAtom", "Fragment", "jsx", "jsxs", "init_DefaultItems", "t", "atom", "useAtom", "useLayoutEffect", "useRef", "jsx", "jotaiScope", "jsx", "jsxs", "init_DropdownMenu", "init_DefaultItems", "init_UserList", "jsx", "jsxs", "init_FilledButton", "t", "useAtom", "jsx", "jsxs", "init_OverwriteConfirm", "init_Dialog", "init_FilledButton", "clsx", "jsx", "jsxs", "createElement", "init_LibraryMenu", "init_Sidebar", "docked", "clsx", "jsx", "jsxs", "DEFAULT_SIZE", "forwardRef", "useRef", "useImperativeHandle", "useLayoutEffect", "useState", "clsx", "jsx", "jsxs", "init_TextField", "init_Button", "jsx", "jsx", "RadixTabs", "useRef", "jsx", "RadixTabs", "jsx", "useState", "jsx", "jsxs", "init_MagicSettings", "init_Dialog", "init_TextField", "init_FilledButton", "init_CheckboxItem", "init_common", "canvas", "exportToCanvas", "jsx", "clsx", "jsx", "jsxs", "init_Button", "init_Spinner", "useEffect", "useRef", "jsx", "jsx", "jsxs", "init_Spinner", "jsx", "jsxs", "useState", "useRef", "useEffect", "Fragment", "jsx", "jsxs", "init_MermaidToExcalidraw", "init_common", "RadixTabs", "jsx", "RadixTabs", "jsx", "useEffect", "useRef", "useState", "atom", "useAtom", "jsx", "jsxs", "init_TTDDialog", "init_Dialog", "init_MermaidToExcalidraw", "init_common", "error", "clsx", "React", "useAtom", "useAtomValue", "Fragment", "jsx", "jsxs", "init_LayerUI", "init_Actions", "init_ImageExportDialog", "init_FixedSideContainer", "init_HintViewer", "init_Island", "init_PasteChartDialog", "init_HelpDialog", "init_Stack", "init_UserList", "init_Stats", "init_Sidebar", "init_OverwriteConfirm", "init_EyeDropper", "init_MagicSettings", "init_TTDDialog", "canvas", "appState", "useCallback", "useEffect", "useRef", "jsx", "jsxs", "init_Toast", "getNonDeletedElements", "point", "jsx", "jsxs", "start", "id", "unstable_batchedUpdates", "React", "useEffect", "useRef", "jsx", "areEqual", "React", "useEffect", "useRef", "jsx", "getRelevantAppStateProps", "areEqual", "canvas", "useEffect", "useRef", "jsx", "init_SVGLayer", "jsx", "CONTAINER_PADDING", "getContainerCoords", "init_ElementCanvasButtons", "clsx", "jsx", "jsxs", "DEFAULT_SIZE", "jsx", "jsxs", "init_FollowMode", "t", "canvas", "editable", "observer", "React", "useContext", "rough", "clsx", "nanoid", "throttle", "Fragment", "jsx", "jsxs", "init_ContextMenu", "init_LayerUI", "init_Toast", "init_image", "init_Hyperlink", "init_EyeDropper", "init_Sidebar", "init_SVGLayer", "init_ElementCanvasButtons", "init_export", "init_FollowMode", "t", "defaultAppState", "file", "newElement", "error", "text", "from", "scrollX", "scrollY", "zoom", "offset", "distance", "point", "onPointerUp", "event", "element", "hitElement", "dataURL", "previewDataURL", "canvas", "sign", "currentLang", "clsx", "jsx", "init_FooterCenter", "jsx", "jsxs", "init_ExcalidrawLogo", "Fragment", "jsx", "jsxs", "init_ExcalidrawLogo", "t", "jsx", "jsxs", "Fragment", "jsx", "jsxs", "init_WelcomeScreen", "clsx", "jsx", "jsxs", "LiveCollaborationTrigger", "init_LiveCollaborationTrigger", "init_Button", "jsx", "jsxs", "init_DropdownMenu", "React", "useEffect", "Provider", "jsx", "areEqual", "init_FooterCenter", "init_WelcomeScreen", "init_LiveCollaborationTrigger", "init_export", "init_Sidebar", "init_Button", "init_TTDDialog", "key"]
}
